{"version":3,"file":"static/js/504.e1fb8f17.chunk.js","mappings":"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BACA,mBACA,mBACA,kBACA,mBACA,mBACA,kBACA,mBACA,mBACA,kBACA,kBACA,kBACA,kBACA,mBACA,mBACA,kBACA,kBAAuB,mBAEvB,mBACA,mBACA,kBACA,iBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,iBACA,kBACA,mBACA,mBACA,mBACA,kBACA,kBAAuB,mBAEvB,mBACA,mBACA,mBACA,kBACA,kBACA,kBACA,mBACA,kBACA,kBACA,mBACA,kBACA,mBACA,mBACA,oBACA,oBACA,kBACA,kBAAuB,mBAEvB,mBACA,mBACA,mBACA,kBACA,mBACA,mBACA,kBACA,mBACA,mBACA,kBACA,kBACA,mBACA,mBACA,oBACA,oBACA,kBACA,kBAAuB,mBAEvB,kBACA,kBACA,kBACA,kBACA,mBACA,mBACA,kBACA,mBACA,mBACA,kBACA,kBACA,mBACA,kBACA,oBACA,mBACA,mBACA,kBAAuB,mBAEvB,mBACA,kBACA,kBACA,kBACA,mBACA,mBACA,mBACA,mBACA,kBACA,mBACA,kBACA,mBACA,mBACA,oBACA,oBACA,kBACA,kBAAuB,mBAEvB,mBACA,kBACA,kBACA,kBACA,kBACA,mBACA,mBACA,mBACA,kBACA,mBACA,mBACA,mBACA,kBACA,kBACA,mBACA,iBACA,kBAAuB,mBAEvB,mBACA,mBACA,kBACA,mBACA,mBACA,kBACA,mBACA,mBACA,mBACA,mBACA,kBACA,oBACA,mBACA,oBACA,oBACA,mBACA,mBACA,mBAEA,mBACA,mBACA,oBACA,mBACA,mBACA,kBACA,kBACA,mBACA,mBACA,kBACA,kBACA,mBACA,oBACA,mBACA,mBACA,mBACA,kBAAuB,mBAEvB,kBACA,iBACA,oBACA,kBACA,mBACA,mBACA,kBACA,mBACA,kBACA,kBACA,mBACA,oBACA,oBACA,oBACA,iBACA,mBACA,kBAAuB,kBAEvB,kBACA,kBACA,oBACA,kBACA,kBACA,mBACA,kBACA,mBACA,oBACA,iBACA,kBACA,mBACA,oBACA,oBACA,mBACA,kBACA,kBAAuB,kBAEvB,kBACA,kBACA,oBACA,kBACA,mBACA,mBACA,kBACA,mBACA,oBACA,mBACA,mBACA,oBACA,oBACA,oBACA,oBACA,kBACA,iBAAuB,mBAEvB,kBACA,kBACA,kBACA,mBACA,mBACA,mBACA,mBACA,mBACA,oBACA,mBACA,mBACA,oBACA,oBACA,mBACA,mBACA,kBACA,kBAAuB,mBAEvB,kBACA,iBACA,mBACA,mBACA,mBACA,kBACA,kBACA,mBACA,oBACA,mBACA,mBACA,mBACA,oBACA,oBACA,mBACA,kBACA,mBAAuB,mBAEvB,iBACA,kBACA,oBACA,kBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,kBACA,kBACA,oBACA,oBACA,oBACA,kBACA,mBAAuB,kBAEvB,WAAgBP,EAAKnB,MAAQ,GAAM,QACnC,WAAgBmB,EAAKnB,MAAQ,GAAM,QACnC,WAAemB,EAAKnB,MAAQ,GAAM,QAClC,WAAemB,EAAKnB,MAAQ,GAAM,QAClC,UAAcmB,EAAKnB,MAAQ,GAAM,QACjC,UAAcmB,EAAKnB,MAAQ,GAAM,QACjC,UAAcmB,EAAKnB,MAAQ,GAAM,QACjC,SAAamB,EAAKnB,MAAQ,GAAM,QAEhC,mBAA2B,mBAC3B,kBAAyB,mBACzB,mBAA0B,mBAC1B,mBAGE2B,EAAK,GACLC,EAAK,GAELC,EAAM,CACN,CACC,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,oBACA,qBACA,qBAEA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,sBAEC,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBAEA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,qBACA,sBAEF,CACC,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBAEA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,sBAEC,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,qBACA,qBAED,EACA,EACA,EACA,EACA,EACA,GACC,sBACA,sBACA,sBAEF,CACC,kBACA,iBACA,kBAEA,kBACA,kBACA,iBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBAEA,iBACA,kBACA,kBACA,mBACC,mBACA,kBACD,kBACA,IAEC,mBACA,mBACA,mBACA,mBACA,oBACA,oBACA,oBACA,oBAED,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,iBACA,mBAED,CACC,EACA,EACA,EACA,EACA,EACA,EACA,qBACA,qBACA,qBAEA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,oBACA,sBAEC,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBAEA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,uBAIFC,EAAWD,EAAIE,EAAQC,YACvBC,EAAKJ,EAAIE,EAAQC,YACjBE,EAAKL,EAAIE,EAAQC,YACjBG,EAAKN,EAAIE,EAAQC,YAajBI,EAAQ,CACR,EAAG,EAAG,GAAI,GAAI,EAAG,EAAG,GAAI,GAAI,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GACtD,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,IAM5D,SAASC,EAAeC,EAAIC,EAAOjgC,GAKlC,IAJA,IAuEWkgC,EAAGC,EA8BTC,EArGDC,EAAK,GAELC,EAAKL,EAAQ,IAAM,GAAK,IAEnB9hD,GAAK,GAAIA,EAAI,EAAGA,IAAK,CAC7B,IAAIoiD,EAAGC,EAAGC,EAEVF,EAAInB,EAASiB,GAAM,IACnBG,EAAIR,EAAGM,GAAM,KAAOC,EACpBE,EAAIT,EAAGC,EAAQ,KAAOM,EACtBA,EAAInB,EAASiB,GAAM,GACnBG,GAAKR,EAAGM,GAAM,KAAOC,EACrBE,GAAKT,EAAGC,EAAQ,KAAOM,EACvBA,EAAInB,EAASiB,GAAM,GACnBG,GAAKR,EAAGM,GAAM,IAAMC,EACpBE,GAAKT,EAAGC,EAAQ,IAAMM,EACtBA,EAAInB,EAASiB,GAAM,GACnBG,GAAKR,EAAGM,GAAM,IAAMC,EACpBE,GAAKT,EAAGC,EAAQ,IAAMM,EACtBA,EAAInB,EAASiB,GAAM,GACnBG,GAAKR,EAAGM,EAAK,IAAMC,EACnBE,GAAKT,EAAGC,GAAS,IAAMM,EACvBA,EAAInB,EAASiB,GAAM,GACnBG,GAAKR,EAAGM,EAAK,IAAMC,EACnBE,GAAKT,EAAGC,GAAS,IAAMM,EACvBA,EAAInB,EAASiB,GAAM,GACnBG,GAAKR,EAAGM,EAAK,KAAOC,EACpBE,GAAKT,EAAGC,GAAS,KAAOM,EACxBA,EAAInB,EAASiB,GAAM,GACnBG,GAAKR,EAAGM,EAAK,KAAOC,EACpBE,GAAKT,EAAGC,GAAS,KAAOM,EAExBA,EAAInB,EAASiB,GAAM,GACnBG,GAAKR,EAAGC,GAAS,KAAOM,EACxBE,GAAKT,EAAGM,EAAK,KAAOC,EACpBA,EAAInB,EAASiB,GAAM,GACnBG,GAAKR,EAAGC,GAAS,KAAOM,EACxBE,GAAKT,EAAGM,EAAK,KAAOC,EACpBA,EAAInB,EAASiB,EAAK,GAClBG,GAAKR,EAAGC,GAAS,KAAOM,EACxBE,GAAKT,EAAGM,EAAK,KAAOC,EACpBA,EAAInB,EAASiB,EAAK,GAClBG,GAAKR,EAAGC,GAAS,IAAMM,EACvBE,GAAKT,EAAGM,EAAK,IAAMC,EACnBA,EAAInB,EAASiB,EAAK,GAClBG,GAAKR,EAAGC,EAAQ,GAAKM,EACrBE,GAAKT,EAAGM,EAAK,GAAKC,EAClBA,EAAInB,EAASiB,EAAK,GAClBG,GAAKR,EAAGC,EAAQ,IAAMM,EACtBE,GAAKT,EAAGM,GAAM,IAAMC,EACpBA,EAAInB,EAASiB,EAAK,GAClBG,GAAKR,EAAGC,EAAQ,KAAOM,EACvBE,GAAKT,EAAGM,GAAM,KAAOC,EACrBA,EAAInB,EAASiB,EAAK,GAClBG,GAAKR,EAAGC,EAAQ,KAAOM,EASvBA,GARAE,GAAKT,EAAGM,GAAM,KAAOC,IAOrBC,GAAKpB,EAASiB,EAAK,IAEnBrgC,EAAE,GAAS,EAAJ7hB,GAASsiD,EAAID,EACpBxgC,EAAE,GAAS,EAAJ7hB,GAASihD,EAASiB,EAAK,GAAKE,EACnCF,GAAM,GACNJ,IACAK,IAIAG,EAAIT,EAAGC,GAAS,IAAMb,EAASiB,GAAM,IACrCG,EAAIR,EAAGC,GAAS,IAAMb,EAASiB,GAAM,GACrCI,IAAMT,EAAGC,GAAS,IAAMD,EAAGC,EAAQ,KAAOb,EAASiB,GAAM,GACzDG,GAAKR,EAAGC,GAAS,IAAMb,EAASiB,GAAM,GACtCI,IAAMT,EAAGC,GAAS,IAAMD,EAAGC,EAAQ,KAAOb,EAASiB,GAAM,GACzDG,GAAKR,EAAGC,GAAS,KAAOb,EAASiB,EAAK,GACtCI,IAAMT,EAAGC,GAAS,KAAOD,EAAGC,EAAQ,KAAOb,EAASiB,GAAM,GAC1DG,GAAKR,EAAGC,GAAS,KAAOb,EAASiB,EAAK,GACtCI,IAAMT,EAAGC,GAAS,KAAOD,EAAGC,EAAQ,MAAQb,EAASiB,GAAM,GAC3DG,GAAKR,EAAGC,EAAQ,IAAMb,EAASiB,EAAK,GACpCI,IAAMT,EAAGC,GAAS,KAAOD,EAAGC,EAAQ,MAAQb,EAASiB,GAAM,GAC3DG,GAAKR,EAAGC,EAAQ,IAAMb,EAASiB,EAAK,GACpCI,IAAMT,EAAGC,GAAS,KAAOD,EAAGC,EAAQ,MAAQb,EAASiB,GAAM,GAC3DG,GAAKR,EAAGC,EAAQ,KAAOb,EAASiB,EAAK,GACrCI,IAAMT,EAAGC,GAAS,KAAOD,EAAGC,EAAQ,MAAQb,EAASiB,GAAM,GAG3DH,GAFAM,GAAKR,EAAGC,EAAQ,MAERQ,EACRN,EAAIK,EAAIC,EAERA,EAAIzgC,EAAE,IACNwgC,EAAIxgC,EAAE,IAAMygC,EAEZzgC,EAAE,IAAMmgC,EAAIM,EACZzgC,EAAE,IAAMkgC,EAAIM,EACZxgC,EAAE,IAAMkgC,EAAIM,EACZxgC,EAAE,IAAMmgC,EAAIM,EAIZL,EAAKpgC,EAAE,IAAMA,EAAE,GACfA,EAAE,IAAMA,EAAE,IACVA,EAAE,IAAMogC,EAAKhB,EAASiB,GAAK,GAAU,GACrCD,EAAKpgC,EAAE,IAAMA,EAAE,GACfA,EAAE,IAAMA,EAAE,IACVA,EAAE,IAAMogC,EAAKhB,EAASiB,GAAK,GAAU,GAErCD,EAAKpgC,EAAE,IAAMA,EAAE,GACfA,EAAE,IAAMA,EAAE,IACVA,EAAE,IAAMogC,EAAKhB,EAASiB,GAAK,GAAU,GACrCD,EAAKpgC,EAAE,IAAMA,EAAE,GACfA,EAAE,IAAMA,EAAE,IACVA,EAAE,IAAMogC,EAAKhB,EAASiB,GAAK,GAAU,GAErCD,EAAKpgC,EAAE,IAAMA,EAAE,GACfA,EAAE,IAAMA,EAAE,IACVA,EAAE,IAAMogC,EAAKhB,EAASiB,GAAK,IAAU,GACrCD,EAAKpgC,EAAE,IAAMA,EAAE,GACfA,EAAE,IAAMA,EAAE,IACVA,EAAE,IAAMogC,EAAKhB,EAASiB,GAAK,IAAU,GAErCD,EAAKpgC,EAAE,IAAMA,EAAE,GACfA,EAAE,IAAMA,EAAE,IACVA,EAAE,IAAMogC,EAAKvB,EAAKnB,MAClB0C,EAAKpgC,EAAE,IAAMA,EAAE,GACfA,EAAE,IAAMA,EAAE,IACVA,EAAE,IAAMogC,EAAKvB,EAAKnB,MAAQ19B,EAAE,GAC5BA,EAAE,IAAMA,EAAE,GACVA,EAAE,KAAOA,EAAE,GACXA,EAAE,KAAOA,EAAE,IAEXogC,EAAKpgC,EAAE,GACPA,EAAE,GAAKA,EAAE,IAAMogC,EACfpgC,EAAE,IAAMA,EAAE,IAAMogC,EAChBA,EAAKpgC,EAAE,GACPA,EAAE,GAAKA,EAAE,IAAMogC,EACfpgC,EAAE,IAAMA,EAAE,IAAMogC,EAChBA,EAAKpgC,EAAE,IACPA,EAAE,IAAMA,EAAE,IAAMogC,EAChBpgC,EAAE,IAAMA,EAAE,IAAMogC,EAChBA,EAAKpgC,EAAE,IACPA,EAAE,IAAMA,EAAE,IAAMogC,EAChBpgC,EAAE,IAAMA,EAAE,IAAMogC,EAEhBA,EAAKpgC,EAAE,IAAMA,EAAE,GACfA,EAAE,IAAMA,EAAE,IACVA,EAAE,IAAMogC,EAAKhB,EAASiB,GAAK,IAAW,GACtCD,EAAKpgC,EAAE,IAAMA,EAAE,GACfA,EAAE,IAAMA,EAAE,IACVA,EAAE,IAAMogC,EAAKhB,EAASiB,GAAK,IAAW,GAEtCD,EAAKpgC,EAAE,IAAMA,EAAE,IACfA,EAAE,KAAOA,EAAE,IACXA,EAAE,IAAMogC,EAAKhB,EAASiB,GAAK,IAAW,GACtCD,EAAKpgC,EAAE,IAAMA,EAAE,IACfA,EAAE,KAAOA,EAAE,IACXA,EAAE,IAAMogC,EAAKhB,EAASiB,GAAK,IAAW,GAEtCD,EAAKpgC,EAAE,IAAMA,EAAE,IACfA,EAAE,KAAOA,EAAE,IACXA,EAAE,IAAMogC,EAAKhB,EAASiB,GAAK,IAAW,GACtCD,EAAKpgC,EAAE,IAAMA,EAAE,IACfA,EAAE,KAAOA,EAAE,IACXA,EAAE,IAAMogC,EAAKhB,EAASiB,GAAK,IAAW,GAEtCD,GAAMpgC,EAAE,IAAMA,EAAE,IAChBA,EAAE,KAAOA,EAAE,IACXA,EAAE,IAAMogC,EAAKhB,EAASiB,GAAK,IAAW,GACtCD,GAAMpgC,EAAE,IAAMA,EAAE,IAChBA,EAAE,KAAOA,EAAE,IACXA,EAAE,IAAMogC,EAAKhB,EAASiB,GAAK,IAAW,GAEtCD,EAAKpgC,EAAE,GAAKA,EAAE,GACdA,EAAE,IAAMA,EAAE,GACVA,EAAE,GAAKogC,EAAKhB,EAASiB,GAAK,IAAW,GACrCD,EAAKpgC,EAAE,GAAKA,EAAE,GACdA,EAAE,IAAMA,EAAE,GACVA,EAAE,GAAKogC,EAAKhB,EAASiB,GAAK,IAAW,GAErCD,EAAKpgC,EAAE,GAAKA,EAAE,IACdA,EAAE,IAAMA,EAAE,IACVA,EAAE,IAAMogC,EAAKhB,EAASiB,GAAK,GAAU,GACrCD,EAAKpgC,EAAE,GAAKA,EAAE,IACdA,EAAE,IAAMA,EAAE,IACVA,EAAE,IAAMogC,EAAKhB,EAASiB,GAAK,GAAU,GACrCD,EAAKpgC,EAAE,IAAMA,EAAE,IACfA,EAAE,KAAOA,EAAE,IACXA,EAAE,IAAMogC,EAAKhB,EAASiB,GAAK,GAAU,GACrCD,GAAMpgC,EAAE,IAAMA,EAAE,IAChBA,EAAE,KAAOA,EAAE,IACXA,EAAE,IAAMogC,EAAKhB,EAASiB,GAAK,GAAU,GAErCD,EAAKvB,EAAKnB,OAAS19B,EAAE,GAAKA,EAAE,KAC5BA,EAAE,IAAMA,EAAE,IACVA,EAAE,IAAMogC,EACRA,EAAKvB,EAAKnB,OAAS19B,EAAE,GAAKA,EAAE,KAC5BA,EAAE,IAAMA,EAAE,IACVA,EAAE,IAAMogC,EACRA,EAAKvB,EAAKnB,QAAU19B,EAAE,IAAMA,EAAE,KAC9BA,EAAE,KAAOA,EAAE,IACXA,EAAE,IAAMogC,EAAKpgC,EAAE,IACfogC,EAAKvB,EAAKnB,QAAU19B,EAAE,IAAMA,EAAE,KAC9BA,EAAE,KAAOA,EAAE,IACXA,EAAE,IAAMogC,EAAKpgC,EAAE,IAEfogC,EAAKpgC,EAAE,GACPA,EAAE,KAAOA,EAAE,GACXA,EAAE,IAAMogC,EACRpgC,EAAE,GAAKA,EAAE,IAAMogC,EACfpgC,EAAE,KAAOogC,EACTA,EAAKpgC,EAAE,GACPA,EAAE,KAAOA,EAAE,IACXA,EAAE,KAAOogC,EACTpgC,EAAE,GAAKA,EAAE,IAAMogC,EACfpgC,EAAE,KAAOogC,EACTA,EAAKpgC,EAAE,IACPA,EAAE,KAAOA,EAAE,IACXA,EAAE,KAAOogC,EACTpgC,EAAE,IAAMA,EAAE,IAAMogC,EAChBpgC,EAAE,KAAOogC,EAETA,EAAKpgC,EAAE,IACPA,EAAE,KAAOogC,EACTpgC,EAAE,IAAMA,EAAE,IAAMogC,EAChBpgC,EAAE,KAAOogC,EACTA,EAAKpgC,EAAE,IACPA,EAAE,KAAOogC,EACTpgC,EAAE,IAAMA,EAAE,IAAMogC,EAChBpgC,EAAE,KAAOogC,EACTA,EAAKpgC,EAAE,IACPA,EAAE,KAAOogC,EACTpgC,EAAE,IAAMA,EAAE,IAAMogC,EAChBpgC,EAAE,KAAOogC,EACTA,EAAKpgC,EAAE,IACPA,EAAE,KAAOogC,EACTpgC,EAAE,IAAMA,EAAE,GAAKogC,EACfpgC,EAAE,IAAMogC,EAERA,EAAKpgC,EAAE,IACPA,EAAE,IAAMA,EAAE,GAAKogC,EACfpgC,EAAE,IAAMogC,EAERA,EAAKvB,EAAKnB,OAAS19B,EAAE,GAAKA,EAAE,IAC5BA,EAAE,IAAMA,EAAE,GACVA,EAAE,GAAKogC,EACPA,EAAKvB,EAAKnB,OAAS19B,EAAE,GAAKA,EAAE,IAC5BA,EAAE,IAAMA,EAAE,GACVA,EAAE,GAAKogC,EACPA,EAAKvB,EAAKnB,OAAS19B,EAAE,IAAMA,EAAE,KAC7BA,EAAE,KAAOA,EAAE,IACXA,EAAE,IAAMogC,EACRA,EAAKvB,EAAKnB,OAAS19B,EAAE,IAAMA,EAAE,KAC7BA,EAAE,KAAOA,EAAE,IACXA,EAAE,IAAMogC,EAERA,GAAMvB,EAAKnB,OAAS19B,EAAE,GAAKA,EAAE,KAC7BA,EAAE,IAAMA,EAAE,IACVA,EAAE,IAAMogC,EAAKpgC,EAAE,GACfogC,GAAMvB,EAAKnB,OAAS19B,EAAE,GAAKA,EAAE,KAC7BA,EAAE,IAAMA,EAAE,IACVA,EAAE,IAAMogC,EAAKpgC,EAAE,GACfogC,GAAMvB,EAAKnB,OAAS19B,EAAE,IAAMA,EAAE,KAC9BA,EAAE,KAAOA,EAAE,IACXA,EAAE,IAAMogC,EAAKpgC,EAAE,IACfogC,GAAMvB,EAAKnB,OAAS19B,EAAE,IAAMA,EAAE,KAC9BA,EAAE,KAAOA,EAAE,IACXA,EAAE,IAAMogC,EAAKpgC,EAAE,IAEfogC,EAAKpgC,EAAE,IAAMA,EAAE,IACfA,EAAE,IAAMogC,EACRA,EAAKpgC,EAAE,IAAMogC,EACbpgC,EAAE,IAAMogC,EACRA,EAAKpgC,EAAE,IAAMogC,EACbpgC,EAAE,IAAMogC,EAERA,EAAKpgC,EAAE,IAAMA,EAAE,IACfA,EAAE,IAAMogC,EACRA,EAAKpgC,EAAE,IAAMogC,EACbpgC,EAAE,IAAMogC,EACRA,EAAKpgC,EAAE,IAAMogC,EACbpgC,EAAE,IAAMogC,EAERA,EAAKpgC,EAAE,IAAMA,EAAE,GACfA,EAAE,IAAMogC,EACRA,EAAKpgC,EAAE,GAAKogC,EACZpgC,EAAE,GAAKogC,EACPA,EAAKpgC,EAAE,IAAMogC,EACbpgC,EAAE,IAAMogC,EACRA,EAAKpgC,EAAE,GAAKogC,EACZpgC,EAAE,GAAKogC,EACPA,EAAKpgC,EAAE,IAAMogC,EACbpgC,EAAE,IAAMogC,EACRA,EAAKpgC,EAAE,IAAMogC,EACbpgC,EAAE,IAAMogC,EACRA,EAAKpgC,EAAE,IAAMogC,EACbpgC,EAAE,IAAMogC,EAERA,EAAKpgC,EAAE,GAAKA,EAAE,GACdA,EAAE,GAAKogC,EACPA,EAAKpgC,EAAE,IAAMogC,EACbpgC,EAAE,IAAMogC,EACRA,EAAKpgC,EAAE,IAAMogC,EACbpgC,EAAE,IAAMogC,EACRA,EAAKpgC,EAAE,GAAKogC,EACZpgC,EAAE,GAAKogC,EACPA,EAAKpgC,EAAE,GAAKogC,EACZpgC,EAAE,GAAKogC,EACPA,EAAKpgC,EAAE,IAAMogC,EACbpgC,EAAE,IAAMogC,EACRA,EAAKpgC,EAAE,IAAMogC,EACbpgC,EAAE,IAAMogC,EACRA,EAAKpgC,EAAE,GAAKogC,EACZpgC,EAAE,GAAKogC,EACPA,EAAKpgC,EAAE,GAAKogC,EACZpgC,EAAE,GAAKogC,EACPA,EAAKpgC,EAAE,IAAMogC,EACbpgC,EAAE,IAAMogC,EACRA,EAAKpgC,EAAE,IAAMogC,EACbpgC,EAAE,IAAMogC,EACRA,EAAKpgC,EAAE,IAAMogC,EACbpgC,EAAE,IAAMogC,EACRA,EAAKpgC,EAAE,IAAMogC,EACbpgC,EAAE,IAAMogC,EACRA,EAAKpgC,EAAE,IAAMogC,EACbpgC,EAAE,IAAMogC,EACRA,EAAKpgC,EAAE,IAAMogC,EACbpgC,EAAE,IAAMogC,EAERA,EAAKpgC,EAAE,GACPA,EAAE,IAAMA,EAAE,IACVA,EAAE,KAAOogC,EACTA,EAAKpgC,EAAE,GACPA,EAAE,IAAMA,EAAE,IACVA,EAAE,KAAOogC,EACTA,EAAKpgC,EAAE,IACPA,EAAE,KAAOA,EAAE,IACXA,EAAE,KAAOogC,EACTA,EAAKpgC,EAAE,IACPA,EAAE,KAAOA,EAAE,IACXA,EAAE,KAAOogC,EACTA,EAAKpgC,EAAE,GACPA,EAAE,IAAMA,EAAE,IACVA,EAAE,KAAOogC,EACTA,EAAKpgC,EAAE,GACPA,EAAE,IAAMA,EAAE,IACVA,EAAE,KAAOogC,EACTA,EAAKpgC,EAAE,IACPA,EAAE,KAAOA,EAAE,GACXA,EAAE,IAAMogC,EACRA,EAAKpgC,EAAE,IACPA,EAAE,KAAOA,EAAE,GACXA,EAAE,IAAMogC,EACRA,EAAKpgC,EAAE,GACPA,EAAE,IAAMA,EAAE,IACVA,EAAE,KAAOogC,EACTA,EAAKpgC,EAAE,GACPA,EAAE,IAAMA,EAAE,IACVA,EAAE,KAAOogC,EACTA,EAAKpgC,EAAE,IACPA,EAAE,KAAOA,EAAE,IACXA,EAAE,KAAOogC,EACTA,EAAKpgC,EAAE,IACPA,EAAE,KAAOA,EAAE,IACXA,EAAE,KAAOogC,EACTA,EAAKpgC,EAAE,IACPA,EAAE,KAAOA,EAAE,IACXA,EAAE,KAAOogC,EACTA,EAAKpgC,EAAE,IACPA,EAAE,KAAOA,EAAE,IACXA,EAAE,KAAOogC,EACTA,EAAKpgC,EAAE,IACPA,EAAE,KAAOA,EAAE,GACXA,EAAE,IAAMogC,EACRA,EAAKpgC,EAAE,IACPA,EAAE,KAAOA,EAAE,GACXA,EAAE,IAAMogC,EAeV,SAASM,EAAWC,EAAOC,GAC1B,IAAK,IAAIC,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC3B,IAAIC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAM7BJ,GAJAE,EAAMN,EAAMC,EAAW,GAASrB,EAAIE,EAAQC,YAAY,GACpDiB,EAAMC,EAAW,MACrBE,EAAMH,EAAMC,EAAW,GAASrB,EAAIE,EAAQC,YAAY,GACpDiB,EAAMC,EAAW,IAErBI,EAAMC,EAAMH,EAMZI,GAJAD,EAAMN,EAAMC,EAAW,IAASrB,EAAIE,EAAQC,YAAY,GACpDiB,EAAMC,EAAW,KACrBE,EAAMH,EAAMC,EAAW,GAASrB,EAAIE,EAAQC,YAAY,GACpDiB,EAAMC,EAAW,IAErBO,GAAOF,EAAMH,EAEbA,EAAyF,sBAAlFH,EAAMC,EAAW,GAASrB,EAAIE,EAAQC,YAAY,GAAKiB,EAAMC,EAAW,KAI/EK,EAAyF,sBAAlFN,EAAMC,EAAW,IAASrB,EAAIE,EAAQC,YAAY,GAAKiB,EAAMC,EAAW,IAI/ED,EAAMC,EAAW,GAAe,oBAANG,EAA8BD,EAIxDH,EAAMC,EAAW,IAAgB,qBAANM,EAA8BD,EAIzDD,EAAY,kBAANA,EAA+B,qBAIrCE,EAAY,GAANA,EAAY,qBAAwBD,EAC1CN,EAAMC,EAAW,GAASI,EAAME,EAChCP,EAAMC,EAAW,GAASI,EAAME,EAEhCH,EAAY,GAANA,EAAY,qBAAwBD,EAC1CK,EAAY,kBAANA,EAA+B,qBAIrCR,EAAMC,EAAW,GAASG,EAAMI,EAChCR,EAAMC,EAAW,IAASG,EAAMI,EAEhCP,KAIF,SAASQ,EAAUC,EAAKC,EAAQC,GAC/B,IAAIC,EAAIC,EAEHV,EAAKC,EAAKU,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAkCnCb,EAAKC,EAAKa,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAhCvCtB,EAAMQ,EAAI,IAAMA,EAAI,GACpBG,EAAMH,EAAI,IAAMA,EAAI,IACpBI,EAAMJ,EAAI,IAAMA,EAAI,IACpBK,EAAML,EAAI,GAAKA,EAAI,GACnBM,EAAMN,EAAI,GAAKA,EAAI,GACnBO,EAAMP,EAAI,GAAKA,EAAI,GACnBQ,EAAMR,EAAI,GAAKA,EAAI,GAEnBF,EAAIC,EAAS,IAAOM,EAAME,EAAMC,GAAQF,EAAMN,EAAI,IAClDE,GAAMG,EAAME,EAAMC,GAAOpC,EAAG,KAAWkC,EAAMN,EAAI,IACjDC,GAAMT,EAAMW,EAAMC,GAAOhC,EAAG,IAC5B0B,EAAIC,EAAS,GAAKE,EAAKC,EACvBJ,EAAIC,EAAS,GAAKE,EAAKC,EAEvBT,GAAOO,EAAI,IAAMA,EAAI,KAAO5B,EAAG,IAC/BkC,EAAMA,EAAMlC,EAAG,IAAU4B,EAAI,GAC7BC,EAAKT,EAAMpB,EAAG,IAAUqB,EAAMU,EAAM/B,EAAG,IAAUgC,EAAMhC,EAAG,IAC1D8B,GAAMG,EAAMjC,EAAG,IAAUkC,EAAMC,EAAMnC,EAAG,IAAUoC,EAAMpC,EAAG,IAC3D0B,EAAIC,EAAS,GAAKE,EAAKC,EACvBJ,EAAIC,EAAS,GAAKE,EAAKC,EAEvBD,EAAKT,EAAMpB,EAAG,IAAUqB,EAAMU,EAAM/B,EAAG,IAAUgC,EAAMhC,EAAG,IAC1D8B,GAAMG,EAAMjC,EAAG,IAAUkC,EAAMC,EAAMnC,EAAG,IAAUoC,EAAMpC,EAAG,IAC3D0B,EAAIC,EAAS,GAAKE,EAAKC,EACvBJ,EAAIC,EAAS,IAAME,EAAKC,EAExBD,EAAKT,EAAMpB,EAAG,IAAUqB,EAAMU,EAAM/B,EAAG,IAAUgC,EAAMhC,EAAG,IAC1D8B,EAAKG,EAAMjC,EAAG,IAAUkC,EAAMC,EAAMnC,EAAG,IAAUoC,EAAMpC,EAAG,IAC1D0B,EAAIC,EAAS,IAAME,EAAKC,EACxBJ,EAAIC,EAAS,IAAME,EAAKC,EAKxBP,EAAMK,EAAI,GAAKA,EAAI,GACnBS,EAAMT,EAAI,GAAKA,EAAI,GACnBU,EAAMV,EAAI,GAAKA,EAAI,GACnBW,EAAMX,EAAI,IAAMA,EAAI,GACpBY,EAAMZ,EAAI,IAAMA,EAAI,IACpBa,EAAMb,EAAI,IAAMA,EAAI,IACpBc,EAAMd,EAAI,IAAMA,EAAI,IAEpBF,EAAIC,EAAS,GAAMY,EAAME,EAAMC,GAAQF,EAAMZ,EAAI,KACjDC,GAAMU,EAAME,EAAMC,GAAO1C,EAAG,KAAWwC,EAAMZ,EAAI,KACjDE,GAAMP,EAAMc,EAAMC,GAAOtC,EAAG,IAC5B0B,EAAIC,EAAS,IAAME,EAAKC,EACxBJ,EAAIC,EAAS,IAAME,EAAKC,EAExBN,GAAOI,EAAI,GAAKA,EAAI,IAAM5B,EAAG,IAC7BwC,EAAMZ,EAAI,IAAMY,EAAMxC,EAAG,IACzB6B,EAAKU,EAAMvC,EAAG,IAAUwC,EAAMC,EAAMzC,EAAG,IAAU0C,EAAM1C,EAAG,IAC1D8B,EAAKP,EAAMvB,EAAG,IAAUwB,EAAMa,EAAMrC,EAAG,IAAUsC,EAAMtC,EAAG,IAC1D0B,EAAIC,EAAS,GAAKE,EAAKC,EACvBJ,EAAIC,EAAS,GAAKE,EAAKC,EAEvBD,GAAMU,EAAMvC,EAAG,IAAUwC,EAAMC,EAAMzC,EAAG,IAAU0C,EAAM1C,EAAG,IAC3D8B,EAAKP,EAAMvB,EAAG,IAAUwB,EAAMa,EAAMrC,EAAG,IAAUsC,EAAMtC,EAAG,IAC1D0B,EAAIC,EAAS,GAAKE,EAAKC,EACvBJ,EAAIC,EAAS,GAAKE,EAAKC,EAEvBD,GAAMU,EAAMvC,EAAG,IAAUwC,EAAMC,EAAMzC,EAAG,IAAU0C,EAAM1C,EAAG,IAC3D8B,EAAKP,EAAMvB,EAAG,IAAUwB,EAAMa,EAAMrC,EAAG,IAAUsC,EAAMtC,EAAG,IAC1D0B,EAAIC,EAAS,IAAME,EAAKC,EACxBJ,EAAIC,EAAS,IAAME,EAAKC,EAI1B1kD,KAAKulD,WAAa,SAASC,EAAKC,EAAIC,GAInC,IAHA,IAAIC,EAAKF,EACLG,EAAQ,IAEHC,EAAK,EAAGA,EAAKL,EAAIM,aAAcD,IAAM,CAC7C,IAAK,IAAIE,EAAK,EAAGA,EAAKP,EAAIQ,QAASD,IAAM,CAQxC,IAPA,IAAIE,EACAC,EAAMV,EAAIW,QAAQC,GAAGL,GAAIF,GACzBQ,EAAWH,EAAG7C,GACdiD,EAAc,EACdC,EAAOf,EAAIgB,UAAUX,GAAI,EAAIE,GAC7BU,EAAU,EAEL5oC,EAAI,EAAGA,EAAI,EAAQA,IAQ3B,IAPAmlC,EAAe2C,EAAIC,EAAOW,EAAKE,IAC/BzD,EAAe2C,EAAIC,EAAQ,GAAIW,EAAKE,EAAU,IAC9CA,GAAW,EACXb,GAAS,GAIJK,EAAO,EAAGA,EAAO,GAAIA,GAAQ,EACjCM,EAAKE,EAAU,GAAGR,KAAU,EAQ9B,IAAKA,EAAO,EAAGA,EAAO,GAAIA,IAAQK,GAAe,GAAI,CACpD,IAAIrpD,EAAOipD,EAAGQ,WACVC,EAAQnB,EAAIgB,UAAUX,GAAIE,GAC1Ba,EAAQpB,EAAIgB,UAAUX,GAAI,EAAIE,GAGlC,GAF2B,GAAvBG,EAAGW,kBAAyBZ,EAAO,IACtChpD,EAAO,GACJuoD,EAAIsB,WAAWb,GAAQ,MAC1BjE,EAAOzmB,KAAK8qB,EAAUC,EAAc,EAClCA,EAAc,GAAI,OACd,CACN,GAAId,EAAIsB,WAAWb,GAAQ,EAC1B,IAASpoC,EAAI,EAAGA,EAAI,GAAIA,IACvB+oC,EAAM/oC,GAAGklC,EAAMkD,KAAUT,EAAIsB,WAAWb,GAE1C,GAAIhpD,GAAQylD,EAAQC,WAAY,CAC/B,IAAS9kC,GAAKykC,EAAK,EAAGzkC,EAAI,EAAGA,IAAK,CACjC,IAAI2lC,EAAIhB,EAAIE,EAAQC,YAAY9kC,EAAI,GACpCwoC,EAASC,EAAkB,EAAJzoC,EAAQ,GAAK8oC,EAAM,EAAI9oC,GAAGklC,EAAMkD,IACnDzC,EAAImD,EAAM,EAAI9oC,GAAGklC,EAAMkD,IAC3BI,EAASC,EAAkB,EAAJzoC,EAAQ,IAAM8oC,EAAM,GAAK9oC,GAAGklC,EAAMkD,IACrDzC,EAAImD,EAAM,GAAK9oC,GAAGklC,EAAMkD,IAC5BI,EAASC,EAAkB,EAAJzoC,EAAQ,IAAM8oC,EAAM,GAAK9oC,GAAGklC,EAAMkD,IACrDzC,EAAImD,EAAM,GAAK9oC,GAAGklC,EAAMkD,IAC5BI,EAASC,EAAkB,EAAJzoC,EAAQ,IAAM+oC,EAAM,EAAI/oC,GAAGklC,EAAMkD,IACpDzC,EAAIoD,EAAM,EAAI/oC,GAAGklC,EAAMkD,IAC3BI,EAASC,EAAkB,EAAJzoC,EAAQ,IAAM+oC,EAAM,EAAI/oC,GAAGklC,EAAMkD,IACpDzC,EAAIoD,EAAM,EAAI/oC,GAAGklC,EAAMkD,IAC3BI,EAASC,EAAkB,EAAJzoC,EAAQ,IAAM+oC,EAAM,EAAI/oC,GAAGklC,EAAMkD,IACpDzC,EAAIoD,EAAM,EAAI/oC,GAAGklC,EAAMkD,IAE5BtC,EAAW0C,EAAUC,OACf,CACN,IAAIS,EAAO7E,EAAU,IACrB,IAASrkC,GAAK0kC,EAAK,EAAG1kC,EAAI,EAAGA,IAAK,CACjC,IAAIoF,EAAGC,EACPD,EAAIu/B,EAAIvlD,GAAM4gB,EAAI,IACd+oC,EAAM/oC,EAAI,GAAGklC,EAAMkD,IACnBzD,EAAIvlD,GAAM4gB,EAAI,IACd+oC,EAAM,EAAI/oC,GAAGklC,EAAMkD,IACvB/iC,EAAIs/B,EAAIvlD,GAAM4gB,EAAI,GACd8oC,EAAM9oC,EAAI,GAAGklC,EAAMkD,IACnBzD,EAAIvlD,GAAM4gB,EAAI,IACd8oC,EAAM,EAAI9oC,GAAGklC,EAAMkD,IACvBc,EAAKlpC,EAAI,GAAKoF,EAAIC,EAAIu/B,EAAS,EAAI5kC,EAAI,GACvCkpC,EAAKlpC,EAAI,IAAMoF,EAAIw/B,EAAS,EAAI5kC,EAAI,GAAKqF,EAG1CmhC,EAAUgC,EAAUC,EAAaS,IAMnC,GAAI9pD,GAAQylD,EAAQC,YAAsB,GAARsD,EACjC,IAASpoC,EAAI,EAAGA,GAAK,IAAKA,EAAG,CAC5B,IAAImpC,EAAIC,EACRD,EAAKX,EAASC,EAAczoC,GAAKglC,EAAG,GAAKhlC,GACrCwoC,EAASC,GAAe,EAAIzoC,GAC5BilC,EAAG,GAAKjlC,GACZopC,EAAKZ,EAASC,EAAczoC,GAAKilC,EAAG,GAAKjlC,GACrCwoC,EAASC,GAAe,EAAIzoC,GAC5BglC,EAAG,GAAKhlC,GAEZwoC,EAASC,GAAe,EAAIzoC,GAAKmpC,EACjCX,EAASC,EAAczoC,GAAKopC,IAOhC,GAFAtB,EAAKD,EACLE,EAAQ,IACW,GAAfJ,EAAIQ,QACP,IAAK,IAAI5kD,EAAI,EAAGA,EAAI,GAAIA,IACvBwgD,EAAOsF,UAAU1B,EAAIgB,UAAUX,GAAI,GAAGzkD,GAAI,EACxCokD,EAAIgB,UAAUX,GAAI,GAAGzkD,GAAI,EAAG,MAOnC,IAAA+lD,EAAiB/E,ECzoCbgF,EAASzF,EAAOE,OAShBwF,EAAY1F,EAAOQ,UACnBmF,EAAc3F,EAAO4F,YACzB,SAISC,IACLxnD,KAAK8jD,EAAIuD,EAAU3E,EAAQ+E,SAC3BznD,KAAKyjD,EAAI6D,EAAY,CAAC5E,EAAQgF,QAAS,IAEvC,IAAIC,EAAO3nD,KACXA,KAAK4nD,OAAS,SAAUC,GACpBT,EAAOF,UAAUW,EAAa/D,EAAG,EAAG6D,EAAK7D,EAAG,EAAGpB,EAAQ+E,SACvD,IAAK,IAAIrmD,EAAI,EAAGA,EAAIshD,EAAQgF,QAAStmD,IACjC,IAAK,IAAIub,EAAI,EAAGA,EAAI,EAAGA,IACnBgrC,EAAKlE,EAAEriD,GAAGub,GAAKkrC,EAAapE,EAAEriD,GAAGub,IAMjD,IAAAmrC,EAAiBN,EC5BjB,SAASO,IACR/nD,KAAKgoD,IAAM,IAAIF,EACf9nD,KAAKioD,GAAK,IAAIH,EAGf,IAAAI,EAAiBH,ECRbI,EAASxG,EAAOE,OAChBuG,EAAUzG,EAAO0G,QAKjBC,EAAc3G,EAAO4G,YAGrBC,EAAY7G,EAAOQ,UACnBsG,EAAc9G,EAAO4F,YACrBmB,EAAU/G,EAAOgH,QAEjBC,EAASjH,EAAOkH,OA8FpB,SAASC,IACL,IAAI1G,EAAU+E,EACVY,EAAgBG,EAEhBa,EAAYD,EAAQC,UACpBC,EAAeF,EAAQE,aAKvBC,EAAK,KACTjpD,KAAKkpD,IAAM,KACX,IAAIA,EAAM,KACNC,EAAM,KACNC,EAAQ,KAIZppD,KAAKqpD,WAAa,SAAUC,EAAKC,EAAMC,EAAQC,GAC3CR,EAAKK,EACLtpD,KAAKkpD,IAAMK,EACXL,EAAMK,EACNJ,EAAMM,EACNL,EAAQI,GAGZ,IAAIE,EAAU,IAAItH,EA8BlB,SAASuH,EAAWnE,GAChB,IAAIoE,EAASC,EAEb,GAAyB,GAArBrE,EAAIsE,IAAIC,UAyCZ,GAhCAF,EAAUrE,EAAIwE,YAAY,GAAG,GAC7BJ,EAAUpE,EAAIwE,YAAY,GAAG,GACL,GAApBxE,EAAIM,cACJ+D,GAAWrE,EAAIwE,YAAY,GAAG,GAC9BJ,GAAWpE,EAAIwE,YAAY,GAAG,KAE9BH,GAAWA,EACXD,GAAWA,GAEI,GAAfpE,EAAIQ,UACJ6D,EAAU/rD,KAAKoD,IAAI2oD,EAASD,IAEhCC,GAAW,IAKXA,GAAWrE,EAAIsE,IAAIG,gBAeL,OACNzE,EAAIsE,IAAII,QAAU,EAClB1E,EAAIsE,IAAII,OAAS,EAKb1E,EAAIsE,IAAII,OAAS1E,EAAIsE,IAAIK,cACzB3E,EAAIsE,IAAII,OAAS1E,EAAIsE,IAAIK,aAGjC3E,EAAIsE,IAAIK,YAAc,MACnB,CAEH,IAAIC,EAAc,MAAQP,EAAU,OAChCrE,EAAIsE,IAAII,QAAUE,GAClB5E,EAAIsE,IAAII,QAAwB,KAAdE,EAAsB,KACpC5E,EAAIsE,IAAII,OAASE,IACjB5E,EAAIsE,IAAII,OAASE,IAGjB5E,EAAIsE,IAAIK,aAAeC,EACvB5E,EAAIsE,IAAII,OAASE,EAIb5E,EAAIsE,IAAII,OAAS1E,EAAIsE,IAAIK,cACzB3E,EAAIsE,IAAII,OAAS1E,EAAIsE,IAAIK,aAIrC3E,EAAIsE,IAAIK,YAAcC,OAvEtB5E,EAAIsE,IAAII,OAAS,EA0FzB,SAASG,EAAY7E,GACjB,IAAIO,EAAIF,EAaR,IAZA+C,EAAO,GAAKpD,EAAI8E,eAAiB9E,EAAI8E,cAAgB,IACrD1B,EAAO,GAAKpD,EAAI+E,UAAY/E,EAAI+E,SAAW,GAG3C/E,EAAIgF,wBAAwBhF,EAAI8E,eAAe,KAC/C9E,EAAIgF,wBAAwB,IAAI,KAGR,GAApBhF,EAAIM,eACJN,EAAIgF,wBAAwBhF,EAAI8E,eAAe9E,EAAI+E,YACnD/E,EAAIgF,wBAAwB,IAAIhF,EAAI+E,aAEnCxE,EAAK,EAAGA,EAAKP,EAAIQ,UAAWD,EAC7B,IAAKF,EAAK,EAAGA,EAAKL,EAAIM,eAAgBD,EAAI,CACtC,IAAI4E,EAAyC,EAApCjF,EAAIW,QAAQC,GAAGL,GAAIF,GAAIa,WACe,GAA3ClB,EAAIW,QAAQC,GAAGL,GAAIF,GAAIgB,mBACvB4D,EAAK,GACTjF,EAAIkF,uBAAuBlF,EAAI8E,eAAeG,KAC9CjF,EAAIkF,uBAAuBlF,EAAI8E,eAAe,KAC9C9E,EAAIkF,uBAAuB,IAAID,KAC/BjF,EAAIkF,uBAAuB,IAAI,MAK3C,SAASC,EAAuBC,EAAKC,GACjC,IAEIhF,EAAIE,EAFJP,EAAMoF,EAAIE,eAId,GAAkC,GAA9BtF,EAAImF,uBAA6B,CAEjC,IAAIvpD,EAAGub,EACHouC,EAAavC,EAAU,MACvBwC,EAAaxC,EAAU,MAE3B,IADAhD,EAAImF,uBAAyB,EACxBvpD,EAAI,EAAGub,EAAI,EAAGvb,EAAI,IAAM,KAAO,EAAIokD,EAAIQ,WAAY5kD,EAChDA,EAAI,IAAMokD,EAAIQ,SACd+E,EAAW3pD,GAAK,EACQ,GAApBokD,EAAIM,eACJkF,EAAW5pD,GAAK,KAEpB2pD,EAAW3pD,GAAKypD,EAAM,GAAGluC,GACD,GAApB6oC,EAAIM,eACJkF,EAAW5pD,GAAKypD,EAAM,GAAGluC,MAC3BA,GAIV,IAAKopC,EAAK,EAAGA,EAAKP,EAAIQ,QAASD,IAC3B,IAAKF,EAAK,EAAGA,EAAKL,EAAIM,aAAcD,IAChCL,EAAIW,QAAQC,GAAGL,GAAIF,GAAIa,WAAaoC,EAAQnG,WAGpD+G,EAAQnE,WAAWC,EAAKuF,EAAYC,GAGpCpC,EAAO,KAAOE,EAAQC,WAEtBH,EAAOpD,EAAIyF,SAAYnC,EAAQoC,QAAUN,EAAIO,UAAYrC,EAAQC,WAEjEH,EAAOpD,EAAIyF,SAAY,IAAML,EAAIO,UAAY,KAiErDnrD,KAAKorD,sBAAwB,SAAUR,EAAKS,EAASC,EAASC,EAAQC,EAAWC,GAC7E,IAAIC,EACAC,EAAarD,EAAY,CAAC,EAAG,IAKjCqD,EAAW,GAAG,GAAK,IAAI5D,EACvB4D,EAAW,GAAG,GAAK,IAAI5D,EACvB4D,EAAW,GAAG,GAAK,IAAI5D,EACvB4D,EAAW,GAAG,GAAK,IAAI5D,EACvB,IAOI6D,EAPAC,EAAavD,EAAY,CAAC,EAAG,IAEjCuD,EAAW,GAAG,GAAK,IAAI9D,EACvB8D,EAAW,GAAG,GAAK,IAAI9D,EACvB8D,EAAW,GAAG,GAAK,IAAI9D,EACvB8D,EAAW,GAAG,GAAK,IAAI9D,EAIvB,IASI+D,EAEAjG,EAAIE,EAXJ8E,EAAQ,CAAC,KAAM,MACfrF,EAAMoF,EAAIE,eAEViB,EAAWtD,EAAY,CAAC,EAAG,IAC3BuD,EAAgB,CAAC,GAAI,IACrBC,EAAK,CAAC,CAAC,EAAI,GAAK,CAAC,EAAI,IACrBC,EAAQ,CAAC,CAAC,EAAI,GAAK,CAAC,EAAI,IAsC5B,GA/BArB,EAAM,GAAKQ,EACXR,EAAM,GAAKS,EAEuB,GAA9B9F,EAAImF,wBAEJA,EAAuBC,EAAKC,GAgBhCrF,EAAI2G,QAAU,GACT3G,EAAI4G,UAAY5G,EAAI6G,UAAY,IACjC7G,EAAI4G,UAAYxB,EAAI0B,eACpB9G,EAAI2G,QAAU,GAOE,GAAhB3G,EAAI+G,SAAe,CAKnB,IACIC,EAAO,CAAC,KAAM,MAEdC,EAAU,EAEVC,EAAYhE,EAAQ,GAExB,IAAK3C,EAAK,EAAGA,EAAKP,EAAIQ,QAASD,IAAM,CAEjC,IAAKF,EAAK,EAAGA,EAAKL,EAAIM,aAAcD,IAChC2G,EAAK3G,GAAMgF,EAAMhF,GACjB4G,EAAU,IAAW,IAAL1G,EAAW+C,EAAQC,UAWvC,GAAW,IATP6B,EAAI+B,KAAOvE,EAAQ3G,UAAYmJ,EAAI+B,KAAOvE,EAAQ9G,OAC5C4H,EAAI0D,kBAAkBhC,EAAK4B,EAAMC,EAAS1G,EAC5C4F,EAAYE,EAAYI,EAAGlG,GAAKmG,EAAMnG,GACtCgG,EAAShG,GAAK2G,GAEZxD,EAAI2D,iBAAiBjC,EAAK4B,EAAMC,EAAS1G,EAC3C4F,EAAYE,EAAYI,EAAGlG,GAAKmG,EAAMnG,GACtCgG,EAAShG,GAAK2G,IAGlB,OAAQ,EASZ,IAPI9B,EAAIkC,MAAQC,SAASC,eACrBhB,EAAcjG,GAAMgG,EAAShG,GAAI,GAAKgG,EAAShG,GAAI,GAC/CiG,EAAcjG,GAAM,IACpBiG,EAAcjG,GAAMgG,EAAShG,GAAI,GAAKiG,EAAcjG,KAIvDF,EAAK,EAAGA,EAAKL,EAAIM,aAAcD,IAAM,CACtC,IAAIoH,EAAWzH,EAAIW,QAAQC,GAAGL,GAAIF,GAClCoH,EAASvG,WAAagG,EAAU7G,GAChCoH,EAASpG,iBAAmB,SAKpC,IAAKd,EAAK,EAAGA,EAAKP,EAAIQ,QAASD,IAC3B,IAAKF,EAAK,EAAGA,EAAKL,EAAIM,aAAcD,IAChCL,EAAIW,QAAQC,GAAGL,GAAIF,GAAIa,WAAaoC,EAAQoE,UAC5C1H,EAAIW,QAAQC,GAAGL,GAAIF,GAAIgB,iBAAmB,EAC1CqF,EAAMnG,GAAIF,GAAMoG,EAAGlG,GAAIF,GAAM,IAqBzC,GAhBA8D,EAAWnE,GAOXkE,EAAQnE,WAAWC,EAAKqF,EAAM,GAAIA,EAAM,IAOxCrF,EAAI+E,SAAWzB,EAAQqE,aAEnBvC,EAAIwC,SACJ5H,EAAI+E,SAAWzB,EAAQE,kBACpB,GAAI4B,EAAIkC,MAAQC,SAASC,aAAc,CAgB1C,IAAIK,EAAY,EACZC,EAAY,EAChB,IAAKvH,EAAK,EAAGA,EAAKP,EAAIQ,QAASD,IAC3B,IAAKF,EAAK,EAAGA,EAAKL,EAAIM,aAAcD,IAChCwH,GAAanB,EAAMnG,GAAIF,GACvByH,GAAarB,EAAGlG,GAAIF,GAK5B,GAAIwH,GAAa,EAAOC,EAAW,CAE/B,IAAIC,EAAM/H,EAAIW,QAAQC,GAAG,GACrBoH,EAAMhI,EAAIW,QAAQC,GAAGZ,EAAIQ,QAAU,GAEnCuH,EAAI,GAAG7G,YAAc6G,EAAI,GAAG7G,YACzB8G,EAAI,GAAG9G,YAAc8G,EAAI,GAAG9G,aAE/BlB,EAAI+E,SAAWzB,EAAQE,eAiBnC,GAXIxD,EAAI+E,UAAYvB,GAChB4C,EAAUC,EAEVC,EAASI,IAETN,EAAUD,EAEVG,EAASG,GAITrB,EAAI6C,UAAyB,MAAbjI,EAAIkI,MACpB,IAAK3H,EAAK,EAAGA,EAAKP,EAAIQ,QAASD,IAC3B,IAAKF,EAAK,EAAGA,EAAKL,EAAIM,aAAcD,IAChCL,EAAIkI,MAAMC,SAAS5H,GAAMP,EAAImI,SAAS5H,GACtCP,EAAIkI,MAAM1B,cAAcjG,GAAMiG,EAAcjG,GAC5CP,EAAIkI,MAAMhB,UAAU3G,GAAIF,GAAML,EAAIW,QAAQC,GAAGL,GAAIF,GAAIa,WACrDlB,EAAIkI,MAAMzB,GAAGlG,GAAIF,GAAMiG,EAAO/F,GAAIF,GAClCsC,EAAOjB,UAAU1B,EAAIW,QAAQC,GAAGL,GAAIF,GAAIxC,GAAI,EACxCmC,EAAIkI,MAAMrK,GAAG0C,GAAIF,GAAK,EAAG,KAKzBL,EAAI+E,UAAYvB,IAChBxD,EAAIkI,MAAME,IAAI7H,GAAIF,GAAML,EAAIkI,MAAME,IAAI7H,GAAIF,EAAK,GAC/CsC,EAAOjB,UAAU1B,EAAIkI,MAAMG,OAAO9H,GAAIF,EAAK,GAAI,EAC3CL,EAAIkI,MAAMG,OAAO9H,GAAIF,GAAK,EAC1BL,EAAIkI,MAAMG,OAAO9H,GAAIF,GAAIlnD,SAU7C,GAAIisD,EAAI+B,KAAOvE,EAAQ/G,SAAWuJ,EAAI+B,KAAOvE,EAAQ5G,QAAS,CAE1D,IAAIpgD,EACA0sD,EAEJ,IAAK1sD,EAAI,EAAGA,EAAI,GAAIA,IAChBokD,EAAIuI,MAAMC,SAAS5sD,GAAKokD,EAAIuI,MAAMC,SAAS5sD,EAAI,GAGnD,IADA0sD,EAAI,EACC/H,EAAK,EAAGA,EAAKP,EAAIQ,QAASD,IAC3B,IAAKF,EAAK,EAAGA,EAAKL,EAAIM,aAAcD,IAChCiI,GAAKhC,EAAO/F,GAAIF,GAIxB,IAHAL,EAAIuI,MAAMC,SAAS,IAAMF,EAEzBA,EAAItI,EAAIuI,MAAMC,SAAS,GAClB5sD,EAAI,EAAGA,EAAI,EAAGA,IACf0sD,IAAMtI,EAAIuI,MAAMC,SAAS5sD,GAAKokD,EAAIuI,MAAMC,SAAS,GAAK5sD,IAChD0nD,EAAQmF,QAAQ7sD,GAG1B,IADA0sD,EAAK,KAAUtI,EAAIQ,QAAUR,EAAIM,aAAgBgI,EAC5C/H,EAAK,EAAGA,EAAKP,EAAIQ,QAASD,IAC3B,IAAKF,EAAK,EAAGA,EAAKL,EAAIM,aAAcD,IAChCiG,EAAO/F,GAAIF,IAAOiI,EAmB9B,GAfAtI,EAAI0I,eAAeA,eAAetD,EAAKkB,EAAQE,EAAeJ,GAO9D3C,EAAGkF,iBAAiBvD,GAGpBc,EAAWzC,EAAGmF,YAAY5I,EAAK+F,EAAQC,EAAWC,EAAa,GAE3Db,EAAIyD,cACJlF,EAAImF,YAAY1D,GAEhBA,EAAI6C,UAAyB,MAAbjI,EAAIkI,MAAe,CACnC,IAAK7H,EAAK,EAAGA,EAAKL,EAAIM,aAAcD,IAAM,CACtC,IAAIlpC,EACJ,IAAKA,EAAI,EAAGA,EAAIosC,EAAWpsC,IACvB6oC,EAAIkI,MAAMa,QAAQ1I,GAAIlpC,GAAK6oC,EAAIkI,MAAMa,QAAQ1I,GAAIlpC,EAC/CiuC,EAAIO,WACV,IAAKxuC,EAAIosC,EAAWpsC,EAAI,KAAMA,IAC1B6oC,EAAIkI,MAAMa,QAAQ1I,GAAIlpC,GAAKkuC,EAAMhF,GAAIlpC,EAAIosC,GAGjDK,EAAMoF,gBAAgB5D,EAAKgB,GAK/B,OAFAvB,EAAY7E,GAELkG,GAtnBf5C,EAAQ2F,SAAW,IAUnB3F,EAAQ4F,UAAY,KAMpB5F,EAAQ6F,UAAY,GACpB7F,EAAQC,UAAa,IAAMD,EAAQ6F,UAKnC7F,EAAQ8F,SAAW,IAKnB9F,EAAQ+F,QAAU,GAKlB/F,EAAQgG,OAAS,GAKjBhG,EAAQiG,QAAU,GAClBjG,EAAQkG,QAAU,GAKlBlG,EAAQrB,QAAU,GAClBqB,EAAQpB,QAAU,GAClBoB,EAAQmG,OAAS,EACjBnG,EAAQoG,OAAS,EAKjBpG,EAAQoC,QAAU,KAClBpC,EAAQqG,SAAYrG,EAAQoC,QAAU,EAAI,EAC1CpC,EAAQsG,UAAY,IACpBtG,EAAQuG,WAAcvG,EAAQsG,UAAY,EAAI,EAE9CtG,EAAQoE,UAAY,EACpBpE,EAAQwG,WAAa,EACrBxG,EAAQnG,WAAa,EACrBmG,EAAQyG,UAAY,EAcpBzG,EAAQqE,aAAe,EACvBrE,EAAQ0G,YAAc,EACtB1G,EAAQE,aAAe,EACvBF,EAAQ2G,YAAc,EAEtB3G,EAAQmF,QAAU,EAAC,UAAgB,SAClB,GAAZ,UAAe,QAAe,YAAiB,SAAY,EAC5D,OAAa,QAAc,QAAW,GA2iB1C,IAAAvL,EAAiBoG,EChpBb4G,EAAO/N,EAAOI,KAKd4N,EAAYhO,EAAOQ,UACvB,SAOSyN,IAEL,IAAI7jD,EAAS4jD,EAAUjN,EAAQwI,SAC3B2E,EAAWF,EAAUjN,EAAQ0M,UAAY,GAEzCU,EAAS,CACT,kBAAuB,kBACvB,kBAAuB,kBACvB,kBAAuB,mBACvB,kBAAuB,qBAG3B,SAASC,EAAIC,EAAIC,EAAOC,GACpB,IACIC,EACAC,EACAlK,EAHAmK,EAAM,EAONlnB,EAAK8mB,GAFTC,IAAM,GAGNC,EAAK,EACL,EAAG,CACC,IAAIG,EAAIC,EACJnvD,EAAGovD,EAAIC,EAAIC,EAAIC,EACnBA,EAAKR,GAAM,EAGXO,GADAD,EAAKN,GAAM,IADXK,EAAKL,GAGLA,EAAKM,GAAM,EAEXvK,GADAkK,EAAKH,GACKU,EACV,GAEIC,EAAKZ,EAAGI,EAAK,GAAKJ,EAAGI,EAAKI,GAC1BK,EAAKb,EAAGI,EAAK,GAAKJ,EAAGI,EAAKI,GAC1BM,EAAKd,EAAGI,EAAKK,GAAMT,EAAGI,EAAKM,GAC3BK,EAAKf,EAAGI,EAAKK,GAAMT,EAAGI,EAAKM,GAC3BV,EAAGI,EAAKK,GAAMI,EAAKE,EACnBf,EAAGI,EAAK,GAAKS,EAAKE,EAClBf,EAAGI,EAAKM,GAAME,EAAKE,EACnBd,EAAGI,EAAKI,GAAMI,EAAKE,EACnBF,EAAKZ,EAAG9J,EAAK,GAAK8J,EAAG9J,EAAKsK,GAC1BK,EAAKb,EAAG9J,EAAK,GAAK8J,EAAG9J,EAAKsK,GAC1BM,EAAMpB,EAAK/O,MAAQqP,EAAG9J,EAAKwK,GAC3BK,EAAMrB,EAAK/O,MAAQqP,EAAG9J,EAAKuK,GAC3BT,EAAG9J,EAAKuK,GAAMI,EAAKE,EACnBf,EAAG9J,EAAK,GAAK2K,EAAKE,EAClBf,EAAG9J,EAAKwK,GAAME,EAAKE,EACnBd,EAAG9J,EAAKsK,GAAMI,EAAKE,EACnB5K,GAAMiK,EACNC,GAAMD,QACDC,EAAKjnB,GAGd,IAFAonB,EAAKT,EAAOO,EAAM,GAClBC,EAAKR,EAAOO,EAAM,GACbjvD,EAAI,EAAGA,EAAIuvD,EAAIvvD,IAAK,CACrB,IAAI4vD,EAAIC,EACRD,EAAK,EAAK,EAAIV,EAAMA,EACpBW,EAAM,EAAIX,EAAMC,EAChBH,EAAKH,EAAQ7uD,EACb8kD,EAAK+J,EAAQO,EAAKpvD,EAClB,EAAG,CACC,IAAI6hB,EAAGC,EAAGguC,EAAIL,EAAID,EAAIO,EAAIJ,EAAIK,EAAIN,EAAIO,EACtCnuC,EAAI+tC,EAAKjB,EAAGI,EAAKI,GAAMQ,EAAKhB,EAAG9J,EAAKsK,GACpCvtC,EAAI+tC,EAAKhB,EAAGI,EAAKI,GAAMS,EAAKjB,EAAG9J,EAAKsK,GACpCI,EAAKZ,EAAGI,EAAK,GAAKntC,EAClB4tC,EAAKb,EAAGI,EAAK,GAAKntC,EAClBkuC,EAAKnB,EAAG9J,EAAK,GAAKhjC,EAClBguC,EAAKlB,EAAG9J,EAAK,GAAKhjC,EAClBA,EAAI+tC,EAAKjB,EAAGI,EAAKM,GAAMM,EAAKhB,EAAG9J,EAAKwK,GACpCztC,EAAI+tC,EAAKhB,EAAGI,EAAKM,GAAMO,EAAKjB,EAAG9J,EAAKwK,GACpCI,EAAKd,EAAGI,EAAKK,GAAMxtC,EACnB8tC,EAAKf,EAAGI,EAAKK,GAAMxtC,EACnBouC,EAAKrB,EAAG9J,EAAKuK,GAAMvtC,EACnBkuC,EAAKpB,EAAG9J,EAAKuK,GAAMvtC,EACnBA,EAAIotC,EAAKS,EAAKR,EAAKc,EACnBpuC,EAAIstC,EAAKQ,EAAKT,EAAKe,EACnBrB,EAAGI,EAAKK,GAAMI,EAAK5tC,EACnB+sC,EAAGI,EAAK,GAAKS,EAAK5tC,EAClB+sC,EAAG9J,EAAKwK,GAAMS,EAAKjuC,EACnB8sC,EAAG9J,EAAKsK,GAAMW,EAAKjuC,EACnBA,EAAIqtC,EAAKa,EAAKd,EAAKQ,EACnB7tC,EAAIqtC,EAAKc,EAAKb,EAAKO,EACnBd,EAAG9J,EAAKuK,GAAMS,EAAKjuC,EACnB+sC,EAAG9J,EAAK,GAAKgL,EAAKjuC,EAClB+sC,EAAGI,EAAKM,GAAME,EAAK1tC,EACnB8sC,EAAGI,EAAKI,GAAMI,EAAK1tC,EACnBgjC,GAAMiK,EACNC,GAAMD,QACDC,EAAKjnB,GAEdonB,GADAS,EAAKT,GACKT,EAAOO,EAAM,GAAKC,EAAKR,EAAOO,EAAM,GAC9CC,EAAKU,EAAKlB,EAAOO,EAAM,GAAKC,EAAKR,EAAOO,EAAM,GAElDA,GAAO,QACFF,EAAKD,GAGlB,IAAIoB,EAAS,CAAC,EAAM,IAAM,GACtB,IAAM,GAAM,IAAM,GAAM,IAAM,GAC9B,IAAM,GAAM,IAAM,GAAM,IAAM,IAC9B,IAAM,EAAM,IAAM,GAAM,IAAM,GAC9B,IAAM,IAAM,IAAM,GAAM,IAAM,GAC9B,IAAM,GAAM,IAAM,IAAM,IAAM,EAC9B,IAAM,GAAM,IAAM,GAAM,IAAM,IAC9B,IAAM,GAAM,IAAM,GAAM,IAAM,GAC9B,IAAM,IAAM,IAAM,GAAM,IAAM,GAC9B,IAAM,GAAM,IAAM,IAAM,IAAM,GAC9B,IAAM,GAAM,IAAM,GAAM,IAAM,IAC9B,IAAM,EAAM,IAAM,GAAM,IAAM,GAC9B,IAAM,GAAM,IAAM,GAAM,IAAM,GAC9B,IAAM,GAAM,IAAM,IAAM,IAAM,GAC9B,IAAM,GAAM,IAAM,GAAM,IAAM,IAC9B,IAAM,GAAM,IAAM,GAAM,IAAM,GAC9B,IAAM,IAAM,IAAM,EAAM,IAAM,GAC9B,IAAM,GAAM,IAAM,IAAM,IAAM,GAC9B,IAAM,GAAM,IAAM,GAAM,IAAM,IAC9B,IAAM,GAAM,IAAM,GAAM,IAAM,GAC9B,IAAM,IAAM,IAAM,GAAM,IAAM,GAC9B,IAAM,GAAM,IAAM,IAAM,KAE5BtxD,KAAKuxD,UAAY,SAAU/L,EAAKgM,EAAQC,EAAK1nD,EAAQ2nD,GACjD,IAAK,IAAIxuC,EAAI,EAAGA,EAAI,EAAGA,IAAK,CACxB,IAAI1G,EAAIkmC,EAAQ0M,UAAY,EACxBvxC,EAAI,MAAW,KAAYqF,EAAI,GAC/BvG,EAAI+lC,EAAQ0M,UAAY,EAAI,EAChC,EAAG,CACC,IAAIyB,EAAID,EAAIG,EAAID,EAAItN,EAChBpiD,EAAqB,IAAjBkwD,EAAO30C,GAAK,GAIpBi0C,GAFAC,EAAKhB,EAASzuD,GAAK2I,EAAO0nD,GAAKC,EAAStwD,EAAIyc,KAC5C2lC,EAAIqM,EAAS,IAAOzuD,GAAK2I,EAAO0nD,GAAKC,EAAStwD,EAAIyc,EAAI,MAEtDgzC,GAAUrN,EAGVsN,GAFAC,EAAKlB,EAASzuD,EAAI,IAAQ2I,EAAO0nD,GAAKC,EAAStwD,EAAIyc,EAAI,MACvD2lC,EAAIqM,EAAS,GAAOzuD,GAAK2I,EAAO0nD,GAAKC,EAAStwD,EAAIyc,EAAI,MAEtDkzC,GAAUvN,EAEVhnC,GAAK,EACLg1C,EAAOtuC,GAAG1G,EAAI,GAAKq0C,EAAKE,EACxBS,EAAOtuC,GAAG1G,EAAI,GAAKq0C,EAAKE,EACxBS,EAAOtuC,GAAG1G,EAAI,GAAKo0C,EAAKE,EACxBU,EAAOtuC,GAAG1G,EAAI,GAAKo0C,EAAKE,EAIxBF,GAFAC,EAAKhB,EAASzuD,EAAI,GAAQ2I,EAAO0nD,GAAKC,EAAStwD,EAAIyc,EAAI,KACvD2lC,EAAIqM,EAAS,IAAOzuD,GAAK2I,EAAO0nD,GAAKC,EAAStwD,EAAIyc,EAAI,MAEtDgzC,GAAUrN,EAGVsN,GAFAC,EAAKlB,EAASzuD,EAAI,IAAQ2I,EAAO0nD,GAAKC,EAAStwD,EAAIyc,EAAI,MACvD2lC,EAAIqM,EAAS,GAAOzuD,GAAK2I,EAAO0nD,GAAKC,EAAStwD,EAAIyc,EAAI,MAEtDkzC,GAAUvN,EAEVgO,EAAOtuC,GAAG1G,EAAIkmC,EAAQ0M,UAAY,EAAI,GAAKyB,EAAKE,EAChDS,EAAOtuC,GAAG1G,EAAIkmC,EAAQ0M,UAAY,EAAI,GAAKyB,EAAKE,EAChDS,EAAOtuC,GAAG1G,EAAIkmC,EAAQ0M,UAAY,EAAI,GAAKwB,EAAKE,EAChDU,EAAOtuC,GAAG1G,EAAIkmC,EAAQ0M,UAAY,EAAI,GAAKwB,EAAKE,UACzCn0C,GAAK,GAEhBozC,EAAIyB,EAAOtuC,GAAI1G,EAAGkmC,EAAQ0M,UAAY,KAM9CpvD,KAAK2xD,SAAW,SAAUnM,EAAK/oC,EAAGg1C,EAAK1nD,EAAQ2nD,GAC3C,IAAIE,EAAKlP,EAAQwI,QAAU,EAAI,EAC3B1uC,EAAIkmC,EAAQwI,QAAU,EAE1B,EAAG,CACC,IAAI2F,EAAID,EAAIG,EAAID,EAAItN,EAChBpiD,EAAiB,IAAbkwD,EAAOM,GAGfhB,GAFAC,EAAK9kD,EAAO3K,GAAK2I,EAAO0nD,GAAKC,EAAStwD,KACtCoiD,EAAIz3C,EAAO3K,EAAI,KAAS2I,EAAO0nD,GAAKC,EAAStwD,EAAI,MAEjDyvD,GAAUrN,EAGVsN,GAFAC,EAAKhlD,EAAO3K,EAAI,KAAS2I,EAAO0nD,GAAKC,EAAStwD,EAAI,OAClDoiD,EAAIz3C,EAAO3K,EAAI,KAAS2I,EAAO0nD,GAAKC,EAAStwD,EAAI,MAEjD2vD,GAAUvN,EAGV/mC,EAAM,GADND,GAAK,IACMq0C,EAAKE,EAChBt0C,EAAED,EAAI,GAAKq0C,EAAKE,EAChBt0C,EAAED,EAAI,GAAKo0C,EAAKE,EAChBr0C,EAAED,EAAI,GAAKo0C,EAAKE,EAIhBF,GAFAC,EAAK9kD,EAAO3K,EAAI,GAAS2I,EAAO0nD,GAAKC,EAAStwD,EAAI,KAClDoiD,EAAIz3C,EAAO3K,EAAI,KAAS2I,EAAO0nD,GAAKC,EAAStwD,EAAI,MAEjDyvD,GAAUrN,EAGVsN,GAFAC,EAAKhlD,EAAO3K,EAAI,KAAS2I,EAAO0nD,GAAKC,EAAStwD,EAAI,OAClDoiD,EAAIz3C,EAAO3K,EAAI,KAAS2I,EAAO0nD,GAAKC,EAAStwD,EAAI,MAEjD2vD,GAAUvN,EAEV/mC,EAAED,EAAIkmC,EAAQwI,QAAU,EAAI,GAAK2F,EAAKE,EACtCt0C,EAAED,EAAIkmC,EAAQwI,QAAU,EAAI,GAAK2F,EAAKE,EACtCt0C,EAAED,EAAIkmC,EAAQwI,QAAU,EAAI,GAAK0F,EAAKE,EACtCr0C,EAAED,EAAIkmC,EAAQwI,QAAU,EAAI,GAAK0F,EAAKE,UAC/Bc,GAAM,GAEjB7B,EAAItzC,EAAGD,EAAGkmC,EAAQwI,QAAU,IAIhClrD,KAAK6xD,SAAW,SAAUrM,GAMtB,IAAK,IAAIpkD,EAAI,EAAGA,EAAIshD,EAAQwI,QAAS9pD,IAEjC2K,EAAO3K,GAAM,IAAO,GAAMtD,KAAK89B,IAAI,EAAI99B,KAAK69B,IAAMv6B,EAAI,IAChDshD,EAAQwI,SAAW,IAAOptD,KAAK89B,IAAI,EAAI99B,KAAK69B,IAAMv6B,EAAI,IACtDshD,EAAQwI,SAElB,IAAS9pD,EAAI,EAAGA,EAAIshD,EAAQ0M,UAAY,EAAGhuD,IACvCyuD,EAASzuD,GAAM,IAAO,EAAMtD,KAAK89B,IAAI,EAAM99B,KAAK69B,IACzCv6B,EAAI,IAAOshD,EAAQ0M,aAMtC,IAAA0C,EAAiBlC,ECtGbmC,EAAUpQ,EAAO0G,QACjB2J,EAAQrQ,EAAOsQ,MACfC,EAAavQ,EAAOwQ,WACpBC,EAAOzQ,EAAOI,KACdsQ,EAAS1Q,EAAOM,OAIhBqQ,EAAY3Q,EAAOQ,UACnBoQ,EAAc5Q,EAAO4F,YACrBiL,EAAU7Q,EAAOgH,QAEjB8J,EAAS9Q,EAAOkH,OAKpB,SAAS6J,IAEL,IAAIC,EAAM,IAAIb,EAEVc,EAAQ,kBAERC,EAAS,EACTC,EAAU,GACVC,EAAW,EACXC,EAAY,GAGZC,EAAU,IAGVC,EAAY,EAAK,WAAmBxQ,EAAQwI,QAAU,GAEtDiI,EAA2B,IAE3BC,EAAkB,GAClBC,EAAkB,GAClBC,EAAkB,GAElBC,EAAW,IAKXC,EAAW,GAGXC,EAAc,YAElB,SAASC,EAAwBl3C,GAC7B,OAAOA,EA8CX,SAASm3C,EAAuB9F,EAAQrI,GAGpC,IAFA,IAAIoO,EAAiB,EAEZxyD,EAAI,EAAGA,EAAIshD,EAAQwI,QAAU,IAAK9pD,EACvCwyD,GAAkB/F,EAAOzsD,GAAKokD,EAAIsE,IAAI+J,MAAMzyD,GAGhD,OAFAwyD,GAAkBV,EAKtB,SAASY,EAAalJ,EAAKmJ,EAAWC,EAAaC,EAASC,EAAYC,EAASC,EAAYC,EAAQ5C,EAAK1nD,EAAQ2nD,GAC9G,IAAIlM,EAAMoF,EAAIE,eACd,GAAI2G,EAAM,EACNkB,EAAIhB,SAASnM,EAAKyO,EAAQC,GAAazC,EAAK1nD,EAAQ2nD,GACpDiB,EAAIpB,UAAU/L,EAAK2O,EAAQC,GAAa3C,EAAK1nD,EAAQ2nD,QAGpD,GAAW,GAAPD,EAAU,CACf,IAAK,IAAI90C,EAAI+lC,EAAQwI,QAAU,EAAGvuC,GAAK,IAAKA,EAAG,CAC3C,IAAImnC,EAAImQ,EAAQC,EAAa,GAAGv3C,GAC5B23C,EAAIL,EAAQC,EAAa,GAAGv3C,GAChCs3C,EAAQC,EAAa,GAAGv3C,IAAMmnC,EAAIwQ,GAAKlC,EAAKzR,MAAQ,GACpDsT,EAAQC,EAAa,GAAGv3C,IAAMmnC,EAAIwQ,GAAKlC,EAAKzR,MAAQ,GAExD,IAAK,IAAIz9B,EAAI,EAAGA,GAAK,IAAKA,EACtB,IAASvG,EAAI+lC,EAAQ0M,UAAY,EAAGzyC,GAAK,IAAKA,EACtCmnC,EAAIqQ,EAAQC,EAAa,GAAGlxC,GAAGvG,GAC/B23C,EAAIH,EAAQC,EAAa,GAAGlxC,GAAGvG,GACnCw3C,EAAQC,EAAa,GAAGlxC,GAAGvG,IAAMmnC,EAAIwQ,GAAKlC,EAAKzR,MAAQ,GACvDwT,EAAQC,EAAa,GAAGlxC,GAAGvG,IAAMmnC,EAAIwQ,GAAKlC,EAAKzR,MAAQ,GAWnE,IAHAoT,EAAU,GAAKL,EAAwBO,EAAQC,EAAa,GAAG,IAC/DH,EAAU,IAAMA,EAAU,GAEjBp3C,EAAI+lC,EAAQwI,QAAU,EAAI,EAAGvuC,GAAK,IAAKA,EAAG,CAC/C,IAAI43C,EAAMN,EAAQC,EAAa,GAAIxR,EAAQwI,QAAU,EAAIvuC,GACrD63C,EAAMP,EAAQC,EAAa,GAAIxR,EAAQwI,QAAU,EAAIvuC,GACzDo3C,EAAUrR,EAAQwI,QAAU,EAAIvuC,GAAK+2C,EACf,IADwCa,EACxDA,EAAKC,EAAKA,IAEpB,IAAStxC,EAAI,EAAGA,GAAK,IAAKA,EAGtB,IAFA8wC,EAAY9wC,GAAG,GAAMixC,EAAQC,EAAa,GAAIlxC,GAAG,GACjD8wC,EAAY9wC,GAAG,IAAM8wC,EAAY9wC,GAAG,GAC3BvG,EAAI+lC,EAAQ0M,UAAY,EAAI,EAAGzyC,GAAK,IAAKA,EAC1C43C,EAAMJ,EAAQC,EAAa,GAAIlxC,GAAGw/B,EAAQ0M,UAC5C,EAAIzyC,GACF63C,EAAML,EAAQC,EAAa,GAAIlxC,GAAGw/B,EAAQ0M,UAC5C,EAAIzyC,GACNq3C,EAAY9wC,GAAGw/B,EAAQ0M,UAAY,EAAIzyC,GAAK+2C,EACtB,IAD+Ca,EAC/DA,EAAKC,EAAKA,IAKpB,IAAIC,EAAc,EAClB,IAAS93C,EAAI,GAAIA,EAAI+lC,EAAQyM,SAAUxyC,IACnC83C,GAAeV,EAAUp3C,GAKjC,GAHI6oC,EAAIuG,SAAS0F,GAAOgD,EAGpB7J,EAAI6C,SAAU,CACd,IAAS9wC,EAAI,EAAGA,EAAI+lC,EAAQyM,SAAUxyC,IAClC6oC,EAAIkI,MAAMG,OAAOwG,GAAQ5C,GAAK90C,GAAK6oC,EAAIkI,MAAMgH,YAAYjD,GAAK90C,GAC9D6oC,EAAIkI,MAAMgH,YAAYjD,GAAK90C,GAAKo3C,EAAUp3C,GAE9C6oC,EAAIkI,MAAMzB,GAAGoI,GAAQ5C,GAAOjM,EAAIyG,GAAGwF,GAMX,GAAxB7G,EAAI+J,kBAAyBlD,EAAM,IAEnCjM,EAAIwE,YAAYqK,GAAQ5C,GAAOjM,EAAIoP,iBAAiBnD,GACpDjM,EAAIoP,iBAAiBnD,GAAOkC,EAAuBI,EAAWvO,IAyBtE,IAUIqP,EACAC,EACAC,EAZAC,EAAU,EAIVC,EAAU,GAIVC,EAAS,GAcTC,EAAM,CAAC,EAAK,OAAS,OAAS,OAC9B,OAAS,OAAS,OAAS,OAAS,QAExC,SAASC,IACLP,EAAY/2D,KAAKsB,IAAI,IAAK41D,EAAU,GAAK,IACzCF,EAAYh3D,KAAKsB,IAAI,IAAK61D,EAAU,GAAK,IACzCF,EAAWj3D,KAAKsB,IAAI,GAAK81D,EAAU,IAGvC,IAAIG,EAAS,CAAC,OAAS,OACnB,QAAU,QAAS,aAAmB,aACtC,aAAmB,aAAmB,QAAU,QAChD,MAAQ,MAAO,aAAmB,QAAU,QAC5C,QAAU,QAAS,QAAU,QAAS,aACtC,aAAmB,QAAU,QAAS,QAAU,QAChD,aAAmB,aAAmB,QAAU,QAChD,aAAmB,QAAU,QAAS,OAAS,OAC/C,aAAmB,aAAmB,GAEtCC,EAAS,CAAC,aACV,QAAU,QAAS,QAAU,QAAS,QAAU,QAChD,QAAU,QAAS,OAAS,OAAQ,aACpC,QAAU,QAAS,aAAmB,GAEtCC,EAAS,CAAC,aACV,QAAU,QAAS,aAAmB,QAAU,QAChD,QAAU,QAAS,QAAU,QAAS,QAAU,QAChD,QAAU,QAAS,aAAmB,QAAU,QAChD,QAAU,QAAS,QAAU,QAAS,aACtC,cAKJ,SAASC,EAASC,EAAIC,EAAIC,EAAIzyC,EAAGsiC,EAAKoQ,GAClC,IAAI30D,EAmDQ6sD,EAAGwG,EAjDf,GAAIoB,EAAKD,EAAI,CACT,KAAIC,EAAMD,EAAKX,GAGX,OAAQW,EAAKC,EAFbz0D,EAAQy0D,EAAKD,MAGd,CACH,GAAIA,GAAOC,EAAKZ,EACZ,OAAQW,EAAKC,EACjBz0D,EAAQw0D,EAAKC,EASjB,GALAjD,EAAOgD,GAAM,GACbhD,EAAOiD,GAAM,GAEbD,GAAMC,EAEDxyC,EAAI,GAAM,EAAO,CAIlB,GAAIjiB,GAAS4zD,EAET,OAAOY,EAIX,IAAIr0D,EAAI,EAAKgxD,EAAKvR,aAAa5/C,EAAO,IACtC,OAAOw0D,EAAKH,EAAOl0D,GAiBvB,OAPIA,EAAI,EAAIgxD,EAAKvR,aAAa5/C,EAAO,IAEjCy0D,EADc,GAAdE,EACKpQ,EAAIsE,IAAI+L,KAAKF,GAAMnQ,EAAIsE,IAAII,OAE3B1E,EAAIsE,IAAIgM,KAAKH,GAAMnQ,EAAIsE,IAAII,OAEpCuI,EAAOiD,GAAM,GACTD,EAAKV,EAAWW,EAGZD,EAAKC,GAGL5H,EAAI,EACA1sD,GAAK,KACL0sD,EAAIyH,EAAOn0D,IAEfkzD,EAAIlC,EAAKvR,aAAa4U,EAAKC,EAAI,GAAO,IAC/BD,IAAOJ,EAAOj0D,GAAK0sD,GAAKwG,EAAIxG,IAGnC1sD,EAAI,GACGq0D,EAEJA,EAAKF,EAAOn0D,GAIhBq0D,EAAKJ,EAAOj0D,GAGvB,IAAI20D,EAAU,CAAC,aACX,QAAU,QAAS,QAAU,QAAS,QAAU,QAChD,QAAU,QAAS,OAAS,OAAQ,aACpC,QAAU,QAAS,aAAmB,GAK1C,SAASC,EAAgBP,EAAIC,EAAIxyC,GAC7B,IAAIjiB,EAQJ,GANIw0D,EAAK,IACLA,EAAK,GAELC,EAAK,IACLA,EAAK,GAELD,GAAM,EACN,OAAOC,EAEX,GAAIA,GAAM,EACN,OAAOD,EAOX,GAJIx0D,EADAy0D,EAAKD,EACGC,EAAKD,EAELA,EAAKC,GAEZ,GAAKxyC,GAAKA,GAAK,EAAG,CAGnB,GAAIjiB,GAAS4zD,EACT,OAAOY,EAAKC,EAEZ,IAAIt0D,EAAI,EAAKgxD,EAAKvR,aAAa5/C,EAAO,IACtC,OAAQw0D,EAAKC,GAAMK,EAAQ30D,GAGnC,OAAIH,EAAQ6zD,EACDW,EAAKC,GAEZD,EAAKC,IACLD,EAAKC,GAEFD,GAMX,SAASQ,EAA0BrL,EAAK3pD,GACpC,IAAIukD,EAAMoF,EAAIE,eACd,GAAItF,EAAIM,aAAe,EAAG,CACtB,IAAK,IAAIoQ,EAAK,EAAGA,EAAKxT,EAAQ+E,QAASyO,IAAM,CACzC,IAAIpS,EAAI0B,EAAIwC,IAAI,GAAGlE,EAAEoS,GACjB5B,EAAI9O,EAAIwC,IAAI,GAAGlE,EAAEoS,GACrB1Q,EAAIwC,IAAI,GAAGlE,EAAEoS,IAAO5B,EAAIrzD,EACxBukD,EAAIwC,IAAI,GAAGlE,EAAEoS,IAAOpS,EAAI7iD,EAE5B,IAASi1D,EAAK,EAAGA,EAAKxT,EAAQgF,QAASwO,IACnC,IAAK,IAAIC,EAAS,EAAGA,EAAS,EAAGA,IACzBrS,EAAI0B,EAAIwC,IAAI,GAAGvE,EAAEyS,GAAIC,GACrB7B,EAAI9O,EAAIwC,IAAI,GAAGvE,EAAEyS,GAAIC,GACzB3Q,EAAIwC,IAAI,GAAGvE,EAAEyS,GAAIC,IAAW7B,EAAIrzD,EAChCukD,EAAIwC,IAAI,GAAGvE,EAAEyS,GAAIC,IAAWrS,EAAI7iD,GAShD,SAASm1D,EAAO5Q,GACZ,IAAK,IAAI0Q,EAAK,EAAGA,EAAKxT,EAAQ+E,QAASyO,IAInC,KAAI1Q,EAAIwC,IAAI,GAAGlE,EAAEoS,GAAM,KAAO1Q,EAAIwC,IAAI,GAAGlE,EAAEoS,IACpC1Q,EAAIwC,IAAI,GAAGlE,EAAEoS,GAAM,KAAO1Q,EAAIwC,IAAI,GAAGlE,EAAEoS,IAD9C,CAGA,IAAIG,EAAM7Q,EAAI8Q,MAAMJ,GAAM1Q,EAAIyC,GAAG,GAAGnE,EAAEoS,GAClCK,EAAOz4D,KAAKoD,IAAIskD,EAAIwC,IAAI,GAAGlE,EAAEoS,GAC7Bp4D,KAAKyjB,IAAIikC,EAAIwC,IAAI,GAAGlE,EAAEoS,GAAKG,IAE/BA,EAAM7Q,EAAI8Q,MAAMJ,GAAM1Q,EAAIyC,GAAG,GAAGnE,EAAEoS,GAClC,IAAIM,EAAQ14D,KAAKoD,IAAIskD,EAAIwC,IAAI,GAAGlE,EAAEoS,GAC9Bp4D,KAAKyjB,IAAIikC,EAAIwC,IAAI,GAAGlE,EAAEoS,GAAKG,IAC/B7Q,EAAIwC,IAAI,GAAGlE,EAAEoS,GAAMK,EACnB/Q,EAAIwC,IAAI,GAAGlE,EAAEoS,GAAMM,CATP,CAYhB,IAASN,EAAK,EAAGA,EAAKxT,EAAQgF,QAASwO,IACnC,IAAK,IAAIC,EAAS,EAAGA,EAAS,EAAGA,IACzB3Q,EAAIwC,IAAI,GAAGvE,EAAEyS,GAAIC,GAAU,KAAO3Q,EAAIwC,IAAI,GAAGvE,EAAEyS,GAAIC,IAChD3Q,EAAIwC,IAAI,GAAGvE,EAAEyS,GAAIC,GAAU,KAAO3Q,EAAIwC,IAAI,GAAGvE,EAAEyS,GAAIC,KAEtDE,EAAM7Q,EAAIiR,MAAMP,GAAM1Q,EAAIyC,GAAG,GAAGxE,EAAEyS,GAAIC,GACtCI,EAAOz4D,KAAKoD,IAAIskD,EAAIwC,IAAI,GAAGvE,EAAEyS,GAAIC,GACjCr4D,KAAKyjB,IAAIikC,EAAIwC,IAAI,GAAGvE,EAAEyS,GAAIC,GAASE,IAEvCA,EAAM7Q,EAAIiR,MAAMP,GAAM1Q,EAAIyC,GAAG,GAAGxE,EAAEyS,GAAIC,GAClCK,EAAQ14D,KAAKoD,IAAIskD,EAAIwC,IAAI,GAAGvE,EAAEyS,GAAIC,GAClCr4D,KAAKyjB,IAAIikC,EAAIwC,IAAI,GAAGvE,EAAEyS,GAAIC,GAASE,IAEvC7Q,EAAIwC,IAAI,GAAGvE,EAAEyS,GAAIC,GAAUI,EAC3B/Q,EAAIwC,IAAI,GAAGvE,EAAEyS,GAAIC,GAAUK,GAUvC,SAASE,EAASlR,EAAKmR,EAAOC,GAC1B,IAAIC,EAASF,EACTG,EAAWh5D,KAAKsB,IAAI,GAAIw3D,GAE5BD,GAAS,EACTE,GAAU,EACV,IAAK,IAAIX,EAAK,EAAGA,EAAKxT,EAAQ+E,QAASyO,IAEnCa,EAAOvR,EAAIsE,IAAIgM,KAAKtQ,EAAIwR,KAAKd,IAAQY,GACrCG,EAAQn5D,KAAKyjB,IAAIzjB,KAAKoD,IAAIskD,EAAIwC,IAAI,GAAGlE,EAAEoS,GAAKa,GACxCj5D,KAAKoD,IAAIskD,EAAIwC,IAAI,GAAGlE,EAAEoS,GAAKa,KAGnBJ,GAFZO,EAAOp5D,KAAKoD,IAAIskD,EAAIwC,IAAI,GAAGlE,EAAEoS,GAAKa,KAClCI,EAAOr5D,KAAKoD,IAAIskD,EAAIwC,IAAI,GAAGlE,EAAEoS,GAAKa,KAK9BtE,GAFAyE,GADIpJ,EAAImJ,EAAQJ,GAAUK,EAAOC,KAEjCA,GAAQrJ,GACa,GAEzBtI,EAAIwC,IAAI,GAAGlE,EAAEoS,GAAMp4D,KAAKyjB,IAAI21C,EAAM1R,EAAIwC,IAAI,GAAGlE,EAAEoS,IAC/C1Q,EAAIwC,IAAI,GAAGlE,EAAEoS,GAAMp4D,KAAKyjB,IAAI41C,EAAM3R,EAAIwC,IAAI,GAAGlE,EAAEoS,IAInD,IADAY,GAAcpU,EAAQ0M,UAAY1M,EAAQwI,QACjCgL,EAAK,EAAGA,EAAKxT,EAAQgF,QAASwO,IACnC,IAAK,IAAIC,EAAS,EAAGA,EAAS,EAAGA,IAAU,CACvC,IAAIc,EAAOC,EAAMC,EAAMJ,EAQfjJ,EAPRiJ,EAAOvR,EAAIsE,IAAI+L,KAAKrQ,EAAI4R,KAAKlB,IAAQY,GACrCG,EAAQn5D,KAAKyjB,IAAIzjB,KAAKoD,IAAIskD,EAAIwC,IAAI,GAAGvE,EAAEyS,GAAIC,GAASY,GAChDj5D,KAAKoD,IAAIskD,EAAIwC,IAAI,GAAGvE,EAAEyS,GAAIC,GAASY,KAI3BJ,GAHZO,EAAOp5D,KAAKoD,IAAIskD,EAAIwC,IAAI,GAAGvE,EAAEyS,GAAIC,GAASY,KAC1CI,EAAOr5D,KAAKoD,IAAIskD,EAAIwC,IAAI,GAAGvE,EAAEyS,GAAIC,GAASY,KAMtCtE,GAFAyE,GADIpJ,EAAImJ,EAAQN,GAASO,EAAOC,KAEhCA,GAAQrJ,GACa,GAEzBtI,EAAIwC,IAAI,GAAGvE,EAAEyS,GAAIC,GAAUr4D,KAAKyjB,IAAIikC,EAAIwC,IAAI,GAAGvE,EAAEyS,GAAIC,GACjDe,GACJ1R,EAAIwC,IAAI,GAAGvE,EAAEyS,GAAIC,GAAUr4D,KAAKyjB,IAAIikC,EAAIwC,IAAI,GAAGvE,EAAEyS,GAAIC,GACjDgB,IAWhB,SAASE,EAA6B7R,EAAK8R,EAAIC,EAAK9F,EAAK0E,GACrD,IAAID,EAAIhzC,EACJs0C,EAAM,EACNC,EAAO,EACX,IAAKvB,EAAKhzC,EAAI,EAAGgzC,EAAKxT,EAAQgF,UAAWxkC,IAAKgzC,EAAI,CAI9C,IAHA,IAAIwB,EAAUlS,EAAImS,KAAKzB,GACnB0B,EAAUpS,EAAIoS,QACdC,EAAQH,EAAUE,EAAUF,EAAUE,EACnC10C,EAAI20C,GACPpF,EAAO6E,EAAGp0C,IAAM,GAEhBuvC,EAAO8E,EAAIr0C,IAAM,GACjBs0C,GAAOF,EAAGp0C,GACVu0C,GAAQF,EAAIr0C,GACZA,IAKJ,GAHAsiC,EAAIyC,GAAGwJ,GAAKhO,EAAEyS,GAAIC,GAAUqB,EAC5BhS,EAAIwC,IAAIyJ,GAAKhO,EAAEyS,GAAIC,GAAUsB,EAEzBv0C,GAAK00C,EAAS,GACZ1B,EACF,MAEJzD,EAAO6E,EAAGp0C,IAAM,GAEhBuvC,EAAO8E,EAAIr0C,IAAM,GAGb,IAAI40C,EAAStS,EAAIuS,IAAIC,YAAY9B,GAC7B+B,EAAS,EAAMH,EACnBN,EAAMM,EAASR,EAAGp0C,GAClBu0C,EAAOK,EAASP,EAAIr0C,GACpBsiC,EAAIyC,GAAGwJ,GAAKhO,EAAEyS,GAAIC,IAAWqB,EAC7BhS,EAAIwC,IAAIyJ,GAAKhO,EAAEyS,GAAIC,IAAWsB,EAC9BD,EAAMS,EAASX,EAAGp0C,GAClBu0C,EAAOQ,EAASV,EAAIr0C,GAI5B,KAAOgzC,EAAKxT,EAAQgF,UAAWwO,EAC3B1Q,EAAIyC,GAAGwJ,GAAKhO,EAAEyS,GAAIC,GAAU,EAC5B3Q,EAAIwC,IAAIyJ,GAAKhO,EAAEyS,GAAIC,GAAU,EAOrC,SAAS+B,EAA6B1S,EAAK8R,EAAIC,EAAK9F,GAChD,IAAIyE,EAAIhzC,EACJs0C,EAAM,EACNC,EAAO,EACX,IAAKvB,EAAKhzC,EAAI,EAAGgzC,EAAKxT,EAAQ+E,UAAWvkC,IAAKgzC,EAAI,CAI9C,IAHA,IAAIiC,EAAU3S,EAAI4S,KAAKlC,GACnBmC,EAAU7S,EAAI6S,QACdR,EAAQM,EAAUE,EAAUF,EAAUE,EACnCn1C,EAAI20C,GACPpF,EAAO6E,EAAGp0C,IAAM,GAEhBuvC,EAAO8E,EAAIr0C,IAAM,GACjBs0C,GAAOF,EAAGp0C,GACVu0C,GAAQF,EAAIr0C,GACZA,IAKJ,GAHAsiC,EAAIyC,GAAGwJ,GAAK3N,EAAEoS,GAAMsB,EACpBhS,EAAIwC,IAAIyJ,GAAK3N,EAAEoS,GAAMuB,EAEjBv0C,GAAKm1C,EAAS,GACZnC,EACF,MAEJzD,EAAO6E,EAAGp0C,IAAM,GAChBuvC,EAAO8E,EAAIr0C,IAAM,GAGb,IAAI40C,EAAStS,EAAIuS,IAAIO,YAAYpC,GAC7B+B,EAAS,EAAMH,EACnBN,EAAMM,EAASR,EAAGp0C,GAClBu0C,EAAOK,EAASP,EAAIr0C,GACpBsiC,EAAIyC,GAAGwJ,GAAK3N,EAAEoS,IAAOsB,EACrBhS,EAAIwC,IAAIyJ,GAAK3N,EAAEoS,IAAOuB,EACtBD,EAAMS,EAASX,EAAGp0C,GAClBu0C,EAAOQ,EAASV,EAAIr0C,GAI5B,KAAOgzC,EAAKxT,EAAQ+E,UAAWyO,EAC3B1Q,EAAIyC,GAAGwJ,GAAK3N,EAAEoS,GAAM,EACpB1Q,EAAIwC,IAAIyJ,GAAK3N,EAAEoS,GAAM,EAI7B,SAASqC,EAAkB3N,EAAKoJ,EAAasD,EAAIC,EAAK9F,EAAK0E,GACvD,IACIx5C,EAAGuG,EADHsiC,EAAMoF,EAAIE,eAGd,IAAK5nC,EAAIvG,EAAI,EAAGuG,EAAIsiC,EAAIoS,UAAW10C,EAAG,CAGlC,IAFA,IAAIs1C,EAAM,EAAGryD,EAAI,EACb+pD,EAAI1K,EAAIiT,WAAWv1C,GACd9hB,EAAI,EAAGA,EAAI8uD,IAAK9uD,IAAKub,EAAG,CAC7B,IAAI+7C,EAAK1E,EAAYmC,GAAQx5C,GAC7B67C,GAAOE,EACHvyD,EAAIuyD,IACJvyD,EAAIuyD,GAEZpB,EAAGp0C,GAAKs1C,EAIZ,IAFA/F,EAAOvvC,GAAKsiC,EAAIoS,SAChBnF,EAAY,KAAL91C,GACFA,EAAIuG,EAAI,EAAGA,EAAIsiC,EAAIoS,QAAS10C,IAAK,CAClC,IAAIyyC,EAAKnQ,EAAImT,QAAQz1C,GAAG,GACpB01C,EAAMpT,EAAIqT,MAAMl8C,KAAO26C,EAAG3B,GAE9B,MADEA,EACKA,GAAMnQ,EAAImT,QAAQz1C,GAAG,IACxB01C,GAAOpT,EAAIqT,MAAMl8C,GAAK26C,EAAG3B,KACvBh5C,IACAg5C,EAIF,IAAIn5C,EAAIu2C,EAAWvN,EAAIsT,MAAMrH,GAAKvuC,GAGtC,GAFIq0C,EAAIr0C,GAAKplB,KAAKyjB,IAAIq3C,EAAKp8C,GAEvBgpC,EAAIuT,cAAoB,EAANtH,IAAY/O,EAAQC,WAAY,CAE9CnmC,EAAIw2C,EAAYxN,EAAIwT,MAAMvH,GAAKvuC,GAAnC,IACIzG,EAAI86C,EAAIr0C,GACZq0C,EAAIr0C,GAAKplB,KAAKyjB,IAAI/E,EAAGC,GAGzB+oC,EAAIwT,MAAMvH,GAAKvuC,GAAKsiC,EAAIsT,MAAMrH,GAAKvuC,GACnCsiC,EAAIsT,MAAMrH,GAAKvuC,GAAK01C,EACpBnG,EAAO8E,EAAIr0C,IAAM,GAErB,KAAOA,GAAKw/B,EAAQoM,SAAU5rC,EAC1Bo0C,EAAGp0C,GAAK,EACRq0C,EAAIr0C,GAAK,EAIjB,SAAS+1C,EAAerO,EAAKsO,EAAcC,EAAazM,GACpD,IAAIlH,EAAMoF,EAAIE,eAEVF,EAAIwO,cAAgBlH,EAAWnR,qBAIP,GAAnBmY,EAAa,IAA8B,GAAnBA,EAAa,KAC1CA,EAAa,GAAKA,EAAa,GAAK,GAMxC,IAAK,IAAIzH,EAAM,EAAGA,EAAMjM,EAAIM,aAAc2L,IACtC/E,EAAU+E,GAAO/O,EAAQwK,UAErBtC,EAAIwO,cAAgBlH,EAAWlR,wBAC/BkY,EAAazH,GAAO,GACpB7G,EAAIwO,cAAgBlH,EAAWjR,qBAC/BiY,EAAazH,GAAO,GAEC,GAArByH,EAAazH,IAEbgB,EAAOjN,EAAIuT,cAActH,IAAQ/O,EAAQ4M,YACrC9J,EAAIuT,cAActH,IAAQ/O,EAAQC,aAClC+J,EAAU+E,GAAO/O,EAAQ6M,aAG7B7C,EAAU+E,GAAO/O,EAAQC,WACrB6C,EAAIuT,cAActH,IAAQ/O,EAAQwK,YAClC1H,EAAIuT,cAActH,GAAO/O,EAAQ4M,YAEjC9J,EAAIuT,cAActH,IAAQ/O,EAAQ6M,YAClC/J,EAAIuT,cAActH,GAAO/O,EAAQC,aAGzCwW,EAAY1H,GAAOjM,EAAIuT,cAActH,GAErCjM,EAAIuT,cAActH,GAAO/E,EAAU+E,GAK3C,SAAS4H,EAAU78C,EAAGC,EAAG63C,GAErB,OAAIA,GAAK,EAEE93C,EAEP83C,GAAK,EACE73C,EACPA,EAAI,EAEI3e,KAAKsB,IAAIod,EAAIC,EAAG63C,GAAK73C,EAG1B,EAMX,IAAI68C,EAAY,CAAC,KAAM,KAAM,KAAM,GAAI,KACnC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAIxC,SAASC,EAASC,EAAIC,GAElB,IADA,IAAIC,EAAO,OACFxD,EAAK,EAAGA,EAAKxT,EAAQgF,QAAU,EAAGwO,IACvC,IAAK,IAAIC,EAAS,EAAGA,EAAS,EAAGA,IAAU,CACvC,IAAInO,EAAMwR,EAAGxR,IAAIvE,EAAEyS,GAAIC,GAEvB,GADA1D,EAAOyD,EAAKoD,EAAU36D,QAClBqpD,EAAM,EAAK,CACX,IAAIxrC,EAAIwrC,EAAMyR,EACVxR,EAAKuR,EAAGvR,GAAGxE,EAAEyS,GAAIC,GACjBlO,EAAKzrC,IACDyrC,EAAS,KAAJzrC,EACLk9C,GAAQJ,EAAUpD,IAAO,GAAOtD,IAEhCH,EAAOj2C,EAAI,GACXk9C,GAAQJ,EAAUpD,GAAM9D,EAAKxR,WAAWqH,EAAKzrC,MAOjE,OAAOk9C,EAMX,IAAIC,EAAY,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IACtC,KAAM,KAAM,GAAI,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KACpD,KAAM,KAAM,KAAM,KAAM,OAI5B,SAASC,GAASJ,EAAIC,GAElB,IADA,IAAII,EAAO,SACF3D,EAAK,EAAGA,EAAKxT,EAAQ+E,QAAU,EAAGyO,IAAM,CAC7C,IAAIlO,EAAMwR,EAAGxR,IAAIlE,EAAEoS,GAEnB,GADAzD,EAAOyD,EAAKyD,EAAUh7D,QAClBqpD,EAAM,EAAK,CACX,IAAIxrC,EAAIwrC,EAAMyR,EACVxR,EAAKuR,EAAGvR,GAAGnE,EAAEoS,GACbjO,EAAKzrC,IACDyrC,EAAS,KAAJzrC,EACLq9C,GAAQF,EAAUzD,IAAO,GAAOtD,IAEhCH,EAAOj2C,EAAI,GACXq9C,GAAQF,EAAUzD,GAAM9D,EAAKxR,WAAWqH,EAAKzrC,MAK7D,OAAOq9C,EAGX,SAASC,GAAYtU,EAAKuO,EAAWuD,EAAIp2D,EAAK64D,GAC1C,IAAI72C,EAAGvG,EAEP,IAAKuG,EAAIvG,EAAI,EAAGuG,EAAIsiC,EAAI6S,UAAWn1C,EAAG,CAClC,IACI9hB,EADAo3D,EAAM,EAAGryD,EAAI,EAEjB,IAAK/E,EAAI,EAAGA,EAAIokD,EAAIwU,WAAW92C,KAAM9hB,IAAKub,EAAG,CACzC,IAAI+7C,EAAK3E,EAAUp3C,GACnB81C,EAAOiG,GAAM,GACbF,GAAOE,EACHvyD,EAAIuyD,IACJvyD,EAAIuyD,GAEZpB,EAAGp0C,GAAKs1C,EACRt3D,EAAIgiB,GAAK/c,EACT4zD,EAAI72C,GAAKs1C,EAAMhT,EAAIyU,YAAY/2C,GAC/BuvC,EAAOjN,EAAIyU,YAAY/2C,IAAM,GAC7BuvC,EAAO+F,GAAO,GACd/F,EAAO6E,EAAGp0C,IAAM,GAChBuvC,EAAOvxD,EAAIgiB,IAAM,GACjBuvC,EAAOsH,EAAI72C,IAAM,IAIzB,SAASg3C,GAAkB1U,EAAKtkD,EAAK64D,EAAKI,GACtC,IAAIC,EAAiBjF,EAAIx2D,OAAS,EAC9BukB,EAAI,EACJD,EAAI82C,EAAI72C,GAAK62C,EAAI72C,EAAI,GAiBzB,IAhBAuvC,EAAOxvC,GAAK,GACRA,EAAI,IACA9c,EAAIjF,EAAIgiB,IACJhiB,EAAIgiB,EAAI,KACZ/c,EAAIjF,EAAIgiB,EAAI,IAChBuvC,EAAQjN,EAAIwU,WAAW92C,GAAKsiC,EAAIwU,WAAW92C,EAAI,GAAK,EAAK,IAGrDrF,EAAI,GAFRoF,EAAI,IAAY,EAAJ9c,EAAU8c,IACfA,GAAKuiC,EAAIwU,WAAW92C,GAAKsiC,EAAIwU,WAAW92C,EAAI,GAAK,MAEhDk3C,IACJv8C,EAAIu8C,GACRD,EAASj3C,GAAKrF,GAEds8C,EAASj3C,GAAK,EAGbA,EAAI,EAAGA,EAAIsiC,EAAI6S,QAAU,EAAGn1C,IAAK,CAI9B,IAAI/c,EAUA0X,EAbRoF,EAAI82C,EAAI72C,EAAI,GAAK62C,EAAI72C,GAAK62C,EAAI72C,EAAI,GAClCuvC,EAAOxvC,GAAK,GACRA,EAAI,IACA9c,EAAIjF,EAAIgiB,EAAI,IACRhiB,EAAIgiB,KACR/c,EAAIjF,EAAIgiB,IACR/c,EAAIjF,EAAIgiB,EAAI,KACZ/c,EAAIjF,EAAIgiB,EAAI,IAChBuvC,EAAQjN,EAAIwU,WAAW92C,EAAI,GAAKsiC,EAAIwU,WAAW92C,GAAKsiC,EAAIwU,WAAW92C,EAAI,GAAK,EAAK,IAK7ErF,EAAI,GAJRoF,EAAI,IACO,EAAJ9c,EAAU8c,IACVA,GAAKuiC,EAAIwU,WAAW92C,EAAI,GAAKsiC,EAAIwU,WAAW92C,GAC7CsiC,EAAIwU,WAAW92C,EAAI,GAAK,MAEtBk3C,IACJv8C,EAAIu8C,GACRD,EAASj3C,GAAKrF,GAEds8C,EAASj3C,GAAK,EAGtBuvC,EAAOvvC,EAAI,GACXuvC,EAAOvvC,GAAKsiC,EAAI6S,QAAU,GAE1Bp1C,EAAI82C,EAAI72C,EAAI,GAAK62C,EAAI72C,GACrBuvC,EAAOxvC,GAAK,GACRA,EAAI,IACA9c,EAAIjF,EAAIgiB,EAAI,IACRhiB,EAAIgiB,KACR/c,EAAIjF,EAAIgiB,IACZuvC,EAAQjN,EAAIwU,WAAW92C,EAAI,GAAKsiC,EAAIwU,WAAW92C,GAAK,EAAK,IAGrDrF,EAAI,GAFRoF,EAAI,IAAY,EAAJ9c,EAAU8c,IACfA,GAAKuiC,EAAIwU,WAAW92C,EAAI,GAAKsiC,EAAIwU,WAAW92C,GAAK,MAEhDk3C,IACJv8C,EAAIu8C,GACRD,EAASj3C,GAAKrF,GAEds8C,EAASj3C,GAAK,EAElBuvC,EAAOvvC,GAAMsiC,EAAI6S,QAAU,GAG/B,IAAIpK,GAAU,EACV,aAAkB,WAAiB,YAAkB,UACrD,YAAkB,UAAgB,UAAkB,UACpD,aAAkB,SAoYtB,SAASoM,GAAqBzP,EAAK7gD,EAAQ2nD,EAAQD,EAAK4C,EAAQN,EAAWE,EAASC,GAChF,IAAI1O,EAAMoF,EAAIE,eACd,GAAI2G,EAAM,EACNkB,EAAIhB,SAASnM,EAAKyO,EAAQC,GAAazC,EAAK1nD,EAAQ2nD,QACjD,GAAW,GAAPD,EAEP,IAAK,IAAI90C,EAAI+lC,EAAQwI,QAAU,EAAGvuC,GAAK,IAAKA,EAAG,CAC3C,IAAImnC,EAAImQ,EAAQC,EAAa,GAAGv3C,GAC5B23C,EAAIL,EAAQC,EAAa,GAAGv3C,GAChCs3C,EAAQC,EAAa,GAAGv3C,IAAMmnC,EAAIwQ,GAAKlC,EAAKzR,MAAQ,GACpDsT,EAAQC,EAAa,GAAGv3C,IAAMmnC,EAAIwQ,GAAKlC,EAAKzR,MAAQ,GAU5D,IAHAoT,EAAU,GAAKL,EAAwBO,EAAQC,EAAa,GAAG,IAC/DH,EAAU,IAAMA,EAAU,GAEjBp3C,EAAI+lC,EAAQwI,QAAU,EAAI,EAAGvuC,GAAK,IAAKA,EAAG,CAC/C,IAAI43C,EAAKN,EAAQC,EAAa,GAAGxR,EAAQwI,QAAU,EAAIvuC,GACnD63C,EAAKP,EAAQC,EAAa,GAAGxR,EAAQwI,QAAU,EAAIvuC,GACvDo3C,EAAUrR,EAAQwI,QAAU,EAAIvuC,GAAK+2C,EACf,IADwCa,EACxDA,EAAKC,EAAKA,IAIhB,IAAIC,EAAc,EAClB,IAAS93C,EAAI,GAAIA,EAAI+lC,EAAQyM,SAAUxyC,IACnC83C,GAAeV,EAAUp3C,GAKjC,GAHI6oC,EAAIuG,SAAS0F,GAAOgD,EAGpB7J,EAAI6C,SAAU,CACd,IAAS9wC,EAAI,EAAGA,EAAI+lC,EAAQyM,SAAUxyC,IAClC6oC,EAAIkI,MAAMG,OAAOwG,GAAQ5C,GAAK90C,GAAK6oC,EAAIkI,MAAMgH,YAAYjD,GAAK90C,GAC9D6oC,EAAIkI,MAAMgH,YAAYjD,GAAK90C,GAAKo3C,EAAUp3C,GAE9C6oC,EAAIkI,MAAMzB,GAAGoI,GAAQ5C,GAAOjM,EAAIyG,GAAGwF,IAI3C,SAAS6I,GAAqB1P,EAAK7gD,EAAQ2nD,EAAQD,EAAK0E,EAAQnC,EAAaG,EAASC,GAClF,IAAI5O,EAAMoF,EAAIE,eAKd,GAHc,GAAVqL,GAAe1E,EAAM,GACrBkB,EAAIpB,UAAU/L,EAAK2O,EAAQC,GAAa3C,EAAK1nD,EAAQ2nD,GAE9C,GAAPD,EAEA,IAAK,IAAI90C,EAAI+lC,EAAQ0M,UAAY,EAAGzyC,GAAK,IAAKA,EAAG,CAC7C,IAAImnC,EAAIqQ,EAAQC,EAAa,GAAG+B,GAAQx5C,GACpC23C,EAAIH,EAAQC,EAAa,GAAG+B,GAAQx5C,GACxCw3C,EAAQC,EAAa,GAAG+B,GAAQx5C,IAAMmnC,EAAIwQ,GAAKlC,EAAKzR,MAAQ,GAC5DwT,EAAQC,EAAa,GAAG+B,GAAQx5C,IAAMmnC,EAAIwQ,GAAKlC,EAAKzR,MAAQ,GASpE,IAFAqT,EAAYmC,GAAQ,GAAKhC,EAAQC,EAAa,GAAG+B,GAAQ,GACzDnC,EAAYmC,GAAQ,IAAMnC,EAAYmC,GAAQ,GACrCx5C,EAAI+lC,EAAQ0M,UAAY,EAAI,EAAGzyC,GAAK,IAAKA,EAAG,CACjD,IAAI43C,EAAKJ,EAAQC,EAAa,GAAG+B,GAAQzT,EAAQ0M,UAAY,EAAIzyC,GAC7D63C,EAAKL,EAAQC,EAAa,GAAG+B,GAAQzT,EAAQ0M,UAAY,EAAIzyC,GACjEq3C,EAAYmC,GAAQzT,EAAQ0M,UAAY,EAAIzyC,GAAK+2C,EAC3B,IADoDa,EACpEA,EAAKC,EAAKA,KAOxB,SAAS+F,GAAwC3P,EAAKyJ,EAAQ5C,EAAKsC,GAC/D,IAAIvO,EAAMoF,EAAIE,eACc,GAAxBF,EAAI+J,kBAAyBlD,EAAM,IAEnCjM,EAAIwE,YAAYqK,GAAQ5C,GAAOjM,EAAIoP,iBAAiBnD,GACpDjM,EAAIoP,iBAAiBnD,GAAOkC,EAAuBI,EAAWvO,IAldtExlD,KAAK6sD,iBAAmB,SAAUjC,EAAK7gD,EAAQ2nD,EAAQ2C,EAAQmG,EAAeC,EAAkBC,EAAgBC,EAAmB9M,EAAQsL,GAKvI,IAeIyB,EAAQnJ,EACRvuC,EAAG9hB,EAAGub,EAAGkB,EACTq4C,EAAIC,EAIJ0E,EAuTIlE,EA5UJnR,EAAMoF,EAAIE,eAGVgQ,EAAUvI,EAAY,CAAC,EAAG7P,EAAQwI,UAClC6P,EAAUxI,EAAY,CAAC,EAAG,EAAG7P,EAAQ0M,YAGrC4L,EAAO1I,EAAU5P,EAAQoM,OAAS,GAClCmM,EAAO3I,EAAU5P,EAAQoM,OAAS,GAClCyI,EAAMjF,EAAU5P,EAAQoM,OAAS,GAGjCpC,EAAY8F,EAAQ,GAAI0G,EAAe1G,EAAQ,GAQ/C0I,EAAa3I,EAAY,CAAC,EAAG,MAE7B4I,GAAa3I,EAAQ9P,EAAQoM,OAAS,GAAIsM,GAAa5I,EAAQ9P,EAAQoM,OAAS,GAwBpF,IAtBAuD,EAAO92B,KAAK6/B,GAAY,GAExBR,EAASpV,EAAIM,aAET8E,EAAIkC,MAAQC,SAASC,eACrB4N,EAAS,GAGTC,EADAjQ,EAAI+B,KAAOoF,EAAQ1Q,QACK,GAAfmE,EAAI6V,QAAe,EAAM7V,EAAI8V,SACpC9V,EAAI6V,QAAU,GACXzQ,EAAI+B,KAAOoF,EAAQxQ,QAAUqJ,EAAI+B,KAAOoF,EAAQtQ,UAClDmJ,EAAI+B,KAAOoF,EAAQzQ,OACb,GAEA,EAQRmQ,EAAM,EAAGA,EAAMjM,EAAIM,aAAc2L,IAAO,CAEzC,IAAI8J,GAASxxD,EAAO0nD,GAChB+J,GAAY9J,EAAS,IAAM,IAAM8B,EAAW,IAEhD,IADAf,EAAOxE,GAAQtvD,SAAY60D,EAAW,GAAK,GACtCpyD,EAAI,EAAGA,EAAI,IAAKA,IAAK,CACtB,IAAIq6D,GAAMC,GAGV,IAFAD,GAAOF,GAAOC,GAAYp6D,EAAI,IAC9Bs6D,GAAO,EACF/+C,EAAI,EAAGA,GAAM62C,EAAW,GAAK,EAAK,EAAG72C,GAAK,EAC3C8+C,IAAQxN,GAAQtxC,IACT4+C,GAAOC,GAAYp6D,EAAIub,GAAK4+C,GAAOC,GAAYp6D,EAChDoyD,EAAW72C,IACjB++C,IAAQzN,GAAQtxC,EAAI,IACb4+C,GAAOC,GAAYp6D,EAAIub,EAAI,GAAK4+C,GAAOC,GACxCp6D,EAAIoyD,EAAW72C,EAAI,IAE7Bu+C,EAAWzJ,GAAKrwD,GAAKq6D,GAAOC,GAEhClB,EAAcnG,GAAQ5C,GAAKxJ,GAAGL,OAAOpC,EAAIyC,GAAGwJ,IAC5C+I,EAAcnG,GAAQ5C,GAAKzJ,IAAIJ,OAAOpC,EAAIwC,IAAIyJ,IAC1CmJ,EAAS,IAGTH,EAAiBpG,GAAQ5C,GAAKxJ,GAAGL,OAAOpC,EAAIyC,GAAGwJ,EAAM,IACrDgJ,EAAiBpG,GAAQ5C,GAAKzJ,IAAIJ,OAAOpC,EAAIwC,IAAIyJ,EAAM,KAI/D,IAAKA,EAAM,EAAGA,EAAMmJ,EAAQnJ,IAAO,CAC/B,IAMIkK,GAJAC,GAActJ,EAAU,IACxBuJ,GAAW,CAAC,EAAG,EAAG,EAAG,GACrBC,GAAmBxJ,EAAU,IAC7ByJ,GAAkB,EAElB76D,GAAMoxD,EAAU5P,EAAQoM,QAASiL,GAAMzH,EAAU5P,EAAQoM,QACzDkN,GAAa,CAAC,EAAG,EAAG,EAAG,GACvBjI,GAAYzB,EAAU5P,EAAQyM,UAC9B6E,GAAczB,EAAY,CAAC,EAAG7P,EAAQ2M,aAc1C,IAPAoD,EAAOjN,EAAIoS,SAAWlV,EAAQoM,QAC9B2D,EAAOjN,EAAI6S,SAAW3V,EAAQoM,QAMzB1tD,EAAI,EAAGA,EAAI,EAAGA,IACfw6D,GAAYx6D,GAAKokD,EAAIuI,MAAMkO,iBAAiBxK,GAAKrwD,EAAI,GACrDqxD,EAAOjN,EAAIuI,MAAMkO,iBAAiBxK,GAAKrwD,EAAI,GAAK,GAChD06D,GAAiB16D,GAAKw6D,GAAYx6D,GAC5BokD,EAAIuI,MAAMkO,iBAAiBxK,GAAKrwD,EAAI,GAC1Cy6D,GAAS,IAAMD,GAAYx6D,GAG/B,GAAW,GAAPqwD,EACA,IAAKrwD,EAAI,EAAGA,EAAI,IAAKA,IAAK,CACtB,IAAI0iD,GAAGwQ,GACPxQ,GAAIoX,EAAW,GAAG95D,GAClBkzD,GAAI4G,EAAW,GAAG95D,GAClB85D,EAAW,GAAG95D,GAAK0iD,GAAIwQ,GACvB4G,EAAW,GAAG95D,GAAK0iD,GAAIwQ,GAI3B,IAAI4H,GAAKhB,EAAiB,EAANzJ,GAChB0K,GAAQ,EACZ,IAAK/6D,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAGpB,IAFA,IAAIg7D,GAAMD,GAAQ,GACdE,GAAI,EACDF,GAAQC,GAAKD,KACZE,GAAIv+D,KAAKw+D,IAAIJ,GAAGC,OAChBE,GAAIv+D,KAAKw+D,IAAIJ,GAAGC,MAExB3W,EAAIuI,MAAMkO,iBAAiBxK,GAAKrwD,GAAKw6D,GAAYx6D,EAAI,GAAKi7D,GAC1DR,GAAS,EAAIz6D,EAAI,IAAMi7D,GACnBA,GAAIT,GAAYx6D,EAAI,EAAI,IACxBqxD,EAAOmJ,GAAYx6D,EAAI,EAAI,GAAK,GAChCi7D,IAAQT,GAAYx6D,EAAI,EAAI,IACrBw6D,GAAYx6D,EAAI,EAAI,GAAS,GAAJi7D,IAChC5J,EAAO4J,GAAI,GACXA,GAAIT,GAAYx6D,EAAI,EAAI,IAAU,GAAJi7D,KAE9BA,GAAI,EACRP,GAAiB16D,EAAI,GAAKi7D,GAIlC,GAAIzR,EAAI6C,SAAU,CACd,IAAIjxC,GAAIs/C,GAAiB,GACzB,IAAK16D,EAAI,EAAGA,EAAI,GAAIA,IACZob,GAAIs/C,GAAiB16D,KACrBob,GAAIs/C,GAAiB16D,IAC7BokD,EAAIkI,MAAME,IAAIyG,GAAQ5C,GAAOjM,EAAIkI,MAAM6O,SAAS9K,GAChDjM,EAAIkI,MAAM6O,SAAS9K,GAAOj1C,GAM9B,IAFAm/C,GAA0B,GAAPlK,EAAYjM,EAAIuI,MAAMyO,aACnChX,EAAIuI,MAAM0O,WACXr7D,EAAI,EAAGA,EAAI,GAAIA,IACZ,GAAK46D,GAAW56D,EAAI,IACjB06D,GAAiB16D,GAAKu6D,KACzBK,GAAW56D,EAAI,GAAMA,EAAI,EAAK,GAMtC,IAAKA,EAAI,EAAGA,EAAI,EAAGA,IAAK,CACpB,IAAIH,GACA46D,GAASz6D,EAAI,GAAKy6D,GAASz6D,IAC3BqxD,EAAOoJ,GAASz6D,GAAK,GACrBH,GAAQ46D,GAASz6D,EAAI,GAAKy6D,GAASz6D,KAEnCqxD,EAAOoJ,GAASz6D,EAAI,GAAK,GACzBH,GAAQ46D,GAASz6D,GAAKy6D,GAASz6D,EAAI,IAEnCH,GAAQ,MACR+6D,GAAW56D,GAAK,EACP,GAALA,IACA46D,GAAW,GAAK,IA+C5B,IA3CqB,GAAjBA,GAAW,IAAyC,GAA9BxW,EAAIuI,MAAM2O,YAAYjL,KAC5CuK,GAAW,GAAK,GAEc,GAA9BxW,EAAIuI,MAAM2O,YAAYjL,IAClBuK,GAAW,GAAKA,GAAW,GAAKA,GAAW,GAAKA,GAAW,IAAO,IACtED,GAAkB,EAEG,GAAjBC,GAAW,IAA4B,GAAjBA,GAAW,KACjCA,GAAW,GAAK,GACC,GAAjBA,GAAW,IAA4B,GAAjBA,GAAW,KACjCA,GAAW,GAAK,GACC,GAAjBA,GAAW,IAA4B,GAAjBA,GAAW,KACjCA,GAAW,GAAK,IAGpBvK,EAAM,EACNyH,EAAazH,GAAOsK,GAEG,GAAnBA,KACA7C,EAAa,GAAKA,EAAa,GAAK,GAQ5CrL,EAAO4D,GAAOjM,EAAIuG,SAAS0F,GAO3BqC,EAAalJ,EAAKmJ,GAAWC,GADnB8G,EACgD,EAANrJ,EAF1CsJ,EAGU,EAANtJ,EAAU4C,EAAQ5C,EAAK1nD,EAAQ2nD,GAK7CoI,GAAYtU,EAAKuO,GAAWiH,EAAM95D,GAAK64D,IACvCG,GAAkB1U,EAAKtkD,GAAK64D,GAAKoB,IAE5BhF,EAAS,EAAGA,EAAS,EAAGA,IAAU,CACnC,IAAIqB,GAAKC,GAIT,IAHAc,EAAkB3N,EAAKoJ,GAAaiH,EAAM1D,EAAK9F,EAAK0E,GACpDkB,EAA6B7R,EAAKyV,EAAM1D,EAAK9F,EAAK0E,GAE7CD,EAAK,EAAGA,EAAKxT,EAAQgF,QAASwO,IAAM,CAIrC,GAHAuB,GAAOjS,EAAIwC,IAAIyJ,GAAKhO,EAAEyS,GAAIC,GAE1BsB,IAAQrE,EACJ4I,GAAW7F,IAAW,GAA+B,GAA1B6F,GAAW7F,EAAS,GAAS,CACxD,IAAIwG,GAAiB,GAAVxG,EAAeA,EAAS,EAAI,EACnCkG,GAAIhD,EAAU7T,EAAIwC,IAAIyJ,GAAKhO,EAAEyS,GAAIyG,IAAMlF,GACvCpE,EAAkBwH,GACtBpD,GAAO35D,KAAKyjB,IAAIk2C,GAAM4E,IAGA,GAAtBL,GAAW7F,IACPwG,GAAiB,GAAVxG,EAAeA,EAAS,EAAI,EACnCkG,GAAIhD,EAAU7T,EAAIwC,IAAIyJ,GAAKhO,EAAEyS,GAAIyG,IAAMlF,GACvCnE,EAAkBuH,GACtBpD,GAAO35D,KAAKyjB,IAAIk2C,GAAM4E,MACJ,GAAVlG,GAAyC,GAA1B6F,GAAW7F,EAAS,IAC7B,GAAVA,GAA6C,GAA9B3Q,EAAIuI,MAAM2O,YAAYjL,MACrCkL,GAAiB,GAAVxG,EAAeA,EAAS,EAAI,EACnCkG,GAAIhD,EAAU7T,EAAIwC,IAAIyJ,GAAKhO,EAAEyS,GAAIyG,IAAMlF,GACvCnE,EAAkBuH,GACtBpD,GAAO35D,KAAKyjB,IAAIk2C,GAAM4E,KAI1B7E,GAAMoE,GAAqB,EAATzF,EAAa,GACzByF,GAAqB,EAATzF,EAAa,GACzByF,GAAqB,EAATzF,EAAa,GACG,EAA9ByF,GAAqB,EAATzF,EAAa,GAASqB,KAClCC,IAAQ,GAC0B,EAA9BmE,GAAqB,EAATzF,EAAa,GAASqB,KAClCC,IAAQ,KAGhBjS,EAAIwC,IAAIyJ,GAAKhO,EAAEyS,GAAIC,GAAUsB,IAWjC,IARJjS,EAAIuI,MAAM2O,YAAYjL,GAAOuK,GAAW,GAMxCn+C,EAAI,EAEKqF,EAAI,EAAGA,EAAIsiC,EAAI6S,QAASn1C,IAAK,CAQ9B,IAHA,IAAIyyC,GAAKnQ,EAAIoX,MAAM15C,GAAG,GAClB25C,GAAM7B,EAAKrF,IAAMR,EAAIgG,GAAWxF,KAChCiD,GAAMpT,EAAIsX,MAAMj/C,KAAOg/C,KAClBlH,IAAMnQ,EAAIoX,MAAM15C,GAAG,IACxB25C,GAAM7B,EAAKrF,IAAMR,EAAIgG,GAAWxF,KAChCiD,GAAMpD,EAASoD,GAAKpT,EAAIsX,MAAMj/C,KAAOg/C,GAAKlH,GAAIA,GAAKzyC,EAC/CsiC,EAAK,GAEboT,IAAO,iBAoBHpT,EAAIuT,cAAoB,EAANtH,IAAY/O,EAAQC,WACtC4U,EAAIr0C,GAAK01C,GAETrB,EAAIr0C,GAAKm2C,EACLv7D,KAAKyjB,IAAIq3C,GAAK96D,KAAKyjB,IAAIsxC,EACjBrN,EAAIuX,KAAKtL,GAAKvuC,GAAI4vC,EAClBtN,EAAIwX,KAAKvL,GAAKvuC,KAAM01C,GAAKiC,GAEvCrV,EAAIwX,KAAKvL,GAAKvuC,GAAKsiC,EAAIuX,KAAKtL,GAAKvuC,GACjCsiC,EAAIuX,KAAKtL,GAAKvuC,GAAK01C,GAG3B,KAAO11C,GAAKw/B,EAAQoM,SAAU5rC,EAC1B83C,EAAK93C,GAAK,EACVq0C,EAAIr0C,GAAK,EAGbg1C,EAA6B1S,EAAKwV,EAAMzD,EAAK9F,GA0BjD,IAtBI7G,EAAIkC,MAAQC,SAASkQ,QAAUrS,EAAIkC,MAAQC,SAASC,cAChDpC,EAAIsS,aAAe,GACnBjH,EAA0BrL,EAAKA,EAAIsS,cAIvCtS,EAAIkC,MAAQC,SAASC,eAErBoJ,EAAO5Q,GACPmR,EAAQ/L,EAAI+L,MACR74D,KAAKw+D,IAAI3F,GAAS,GAClBD,EAASlR,EAAKmR,EAAO/L,EAAIuS,SAAW3X,EAAIsE,IAAII,SAMpD+O,EAAerO,EAAKsO,EAAcC,EAAazM,GAK1C+E,EAAM,EAAGA,EAAMmJ,EAAQnJ,IAAO,CAC/B,IAAI2L,GAEAngE,GACAu8D,GAFA6D,GAAS,EAIT5L,EAAM,GACN2L,GAAMzC,EACN0C,IAAU,EACVpgE,GAAOylD,EAAQwK,UACXiM,EAAY,IAAMzW,EAAQC,YACvBwW,EAAY,IAAMzW,EAAQC,aAC7B1lD,GAAOylD,EAAQC,YACnB6W,GAAKiB,EAAiBpG,GAAQ5C,EAAM,KAEpC2L,GAAM1C,EACN2C,GAAS,EACTpgE,GAAOk8D,EAAY1H,GACnB+H,GAAKgB,EAAcnG,GAAQ5C,IAG3Bx0D,IAAQylD,EAAQC,WAChBya,GAAIC,GAAS5L,GAAO8H,EAASC,GAAIhU,EAAIiU,eAErC2D,GAAIC,GAAS5L,GAAOmI,GAASJ,GAAIhU,EAAIiU,eAErC7O,EAAI6C,WACJjI,EAAIkI,MAAMzB,GAAGoI,GAAQ5C,GAAO2L,GAAIC,GAAS5L,IAGjD,OAAO,GAwFX,IAAI6L,GAAW,EAAC,aACZ,WAAiB,YAAkB,UACnC,YAAkB,UAAgB,UAClC,UAAe,aAAkB,SAMrC,SAASC,GAAwB3S,EAAK7gD,EAAQ2nD,EAAQ2C,EAAQmG,EAAeC,EAAkB5M,EAAQ2P,EAAkBxB,EAAY9C,GAQjI,IAPA,IAAIgC,EAAa3I,EAAY,CAAC,EAAG,MAC7B/M,EAAMoF,EAAIE,eACV2S,EAAYjY,EAAIM,aAEhB4X,EAAa9S,EAAIkC,MAAQC,SAASC,aAAgB,EAAIyQ,EAGjDhM,EAAM,EAAGA,EAAMgM,EAAWhM,IAAO,CAEtC8J,OAASxxD,EAAO0nD,GAChB,IAAI+J,EAAY9J,EAAS,IAAM,IAAM8B,EAAW,IAChDf,EAAO6K,GAAS3+D,SAAY60D,EAAW,GAAK,GAC5C,IAAK,IAAIpyD,EAAI,EAAGA,EAAI,IAAKA,IAAK,CAC1B,IAAIq6D,EAAMC,EACVD,EAAOF,OAAOC,EAAYp6D,EAAI,IAC9Bs6D,EAAO,EACP,IAAK,IAAI/+C,EAAI,EAAGA,GAAM62C,EAAW,GAAK,EAAK,EAAG72C,GAAK,EAC/C8+C,GAAQ6B,GAAS3gD,IACV4+C,OAAOC,EAAYp6D,EAAIub,GAAK4+C,OAAOC,EAAYp6D,EAChDoyD,EAAW72C,IACjB++C,GAAQ4B,GAAS3gD,EAAI,IACd4+C,OAAOC,EAAYp6D,EAAIub,EAAI,GAAK4+C,OAAOC,EACxCp6D,EAAIoyD,EAAW72C,EAAI,IAE7Bu+C,EAAWzJ,GAAKrwD,GAAKq6D,EAAOC,EAEhClB,EAAcnG,GAAQ5C,GAAKxJ,GAAGL,OAAOpC,EAAIyC,GAAGwJ,IAC5C+I,EAAcnG,GAAQ5C,GAAKzJ,IAAIJ,OAAOpC,EAAIwC,IAAIyJ,IAC1CiM,EAAY,IAGZjD,EAAiBpG,GAAQ5C,GAAKxJ,GAAGL,OAAOpC,EAAIyC,GAAGwJ,EAAM,IACrDgJ,EAAiBpG,GAAQ5C,GAAKzJ,IAAIJ,OAAOpC,EAAIwC,IAAIyJ,EAAM,KAG/D,IAASA,EAAM,EAAGA,EAAMiM,EAAWjM,IAAO,CACtC,IAAIqK,EAAmBxJ,EAAU,IAC7BsJ,EAActJ,EAAU,IACxBuJ,EAAW,CAAC,EAAG,EAAG,EAAG,GACrBK,EAAKhB,EAAiB,EAANzJ,GAChB0K,EAAQ,EACRR,EAA0B,GAAPlK,EAAYjM,EAAIuI,MAAMyO,aACvChX,EAAIuI,MAAM0O,WACZV,EAAkB,EAEtB,GAAW,GAAPtK,EACA,IAASrwD,EAAI,EAAGub,EAAI,IAAKA,EAAI,IAAKvb,IAAKub,EAAG,CACtC,IAAImnC,EAAIoX,EAAW,GAAG95D,GAClBkzD,EAAI4G,EAAW,GAAG95D,GACtB85D,EAAW,GAAG95D,GAAK0iD,EAAIwQ,EACvB4G,EAAW,GAAG95D,GAAK0iD,EAAIwQ,EAO/B,IAASlzD,EAAI,EAAGA,EAAI,EAAGA,IACnBw6D,EAAYx6D,GAAKokD,EAAIuI,MAAMkO,iBAAiBxK,GAAKrwD,EAAI,GACrDqxD,EAAOjN,EAAIuI,MAAMkO,iBAAiBxK,GAAKrwD,EAAI,GAAK,GAChD06D,EAAiB16D,GAAKw6D,EAAYx6D,GAC5BokD,EAAIuI,MAAMkO,iBAAiBxK,GAAKrwD,EAAI,GAC1Cy6D,EAAS,IAAMD,EAAYx6D,GAG/B,IAASA,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAGxB,IAFA,IAAIg7D,EAAMD,EAAQ,GACdE,EAAI,EACDF,EAAQC,EAAKD,IACZE,EAAIv+D,KAAKw+D,IAAIJ,EAAGC,MAChBE,EAAIv+D,KAAKw+D,IAAIJ,EAAGC,KAExB3W,EAAIuI,MAAMkO,iBAAiBxK,GAAKrwD,GAAKw6D,EAAYx6D,EAAI,GAAKi7D,EAC1DR,EAAS,EAAIz6D,EAAI,IAAMi7D,EACnBA,EAAIT,EAAYx6D,EAAI,EAAI,IACxBqxD,EAAOmJ,EAAYx6D,EAAI,EAAI,GAAK,GAChCi7D,GAAQT,EAAYx6D,EAAI,EAAI,IACrBw6D,EAAYx6D,EAAI,EAAI,GAAS,GAAJi7D,GAChC5J,EAAO4J,EAAI,GACXA,EAAIT,EAAYx6D,EAAI,EAAI,IAAU,GAAJi7D,IAE9BA,EAAI,EAERP,EAAiB16D,EAAI,GAAKi7D,EAG9B,IAASj7D,EAAI,EAAGA,EAAI,IAAKA,EAAG,CACxB,IAAIo2D,EAAMoE,EAAgB,EAAJx6D,EAAQ,GACxBw6D,EAAgB,EAAJx6D,EAAQ,GAAKw6D,EAAgB,EAAJx6D,EAAQ,GAC/CC,EAAS,EACgB,EAAzBu6D,EAAgB,EAAJx6D,EAAQ,GAASo2D,IAC7Bn2D,GAAU,GACmB,EAAzBu6D,EAAgB,EAAJx6D,EAAQ,GAASo2D,IAC7Bn2D,GAAU,KAGlBm8D,EAAiB/L,GAAKrwD,GAAKC,EAG/B,GAAIupD,EAAI6C,SAAU,CACd,IAAIjxC,EAAIs/C,EAAiB,GACzB,IAAS16D,EAAI,EAAGA,EAAI,GAAIA,IAChBob,EAAIs/C,EAAiB16D,KACrBob,EAAIs/C,EAAiB16D,IAG7BokD,EAAIkI,MAAME,IAAIyG,GAAQ5C,GAAOjM,EAAIkI,MAAM6O,SAAS9K,GAChDjM,EAAIkI,MAAM6O,SAAS9K,GAAOj1C,EAI9B,IAASpb,EAAI,EAAGA,EAAI,GAAIA,IAChB,GAAK46D,EAAWvK,GAAKrwD,EAAI,IACtB06D,EAAiB16D,GAAKu6D,IACzBK,EAAWvK,GAAKrwD,EAAI,GAAMA,EAAI,EAAK,GAiB3C,IAASA,EAAI,EAAGA,EAAI,EAAGA,IAAK,CACxB,IAAI+hD,EAAI0Y,EAASz6D,EAAI,GACjBgiD,EAAIyY,EAASz6D,GACTtD,KAAKoD,IAAIiiD,EAAGC,GACZ,KACAD,EAAI,IAAMC,GAAKA,EAAI,IAAMD,IAChB,GAAL/hD,GAAU46D,EAAWvK,GAAK,IAAMuK,EAAWvK,GAAKrwD,KAChD46D,EAAWvK,GAAK,GAAK,GAEzBuK,EAAWvK,GAAKrwD,GAAK,GAK7B46D,EAAWvK,GAAK,IAAMjM,EAAIuI,MAAM2O,YAAYjL,KAC5CuK,EAAWvK,GAAK,GAAK,GAGS,GAA9BjM,EAAIuI,MAAM2O,YAAYjL,IAClBuK,EAAWvK,GAAK,GAAKuK,EAAWvK,GAAK,GACvCuK,EAAWvK,GAAK,GAAKuK,EAAWvK,GAAK,IAAO,IAC9CsK,EAAkB,EAEQ,GAAtBC,EAAWvK,GAAK,IAAiC,GAAtBuK,EAAWvK,GAAK,KAC3CuK,EAAWvK,GAAK,GAAK,GAEC,GAAtBuK,EAAWvK,GAAK,IAAiC,GAAtBuK,EAAWvK,GAAK,KAC3CuK,EAAWvK,GAAK,GAAK,GAEC,GAAtBuK,EAAWvK,GAAK,IAAiC,GAAtBuK,EAAWvK,GAAK,KAC3CuK,EAAWvK,GAAK,GAAK,IAGzBA,EAAM,EACNyH,EAAazH,GAAOsK,EAEG,GAAnBA,IACA7C,EAAa,GAAKA,EAAa,GAAK,GAQ5CrL,EAAO4D,GAAOjM,EAAIuG,SAAS0F,IAInC,SAASkM,GAAsBnY,EAAKiM,EAAK0E,GACrC,GAAc,GAAVA,EACA,IAAK,IAAIjzC,EAAI,EAAGA,EAAIsiC,EAAIoS,QAAS10C,IAC7BsiC,EAAIwT,MAAMvH,GAAKvuC,GAAKsiC,EAAIsT,MAAMrH,GAAKvuC,GACnCsiC,EAAIsT,MAAMrH,GAAKvuC,GAAK,EAKhC,SAAS06C,GAAsBpY,EAAKiM,GAChC,IAAK,IAAIvuC,EAAI,EAAGA,EAAIsiC,EAAI6S,QAASn1C,IAC7BsiC,EAAIwX,KAAKvL,GAAKvuC,GAAKsiC,EAAIuX,KAAKtL,GAAKvuC,GACjCsiC,EAAIuX,KAAKtL,GAAKvuC,GAAK,EAI3B,SAAS26C,GAAyBrY,EAAKtkD,EAAK64D,EAAKI,GAC7C,IAAIC,EAAiBjF,EAAIx2D,OAAS,EAC9BukB,EAAI,EACJD,EAAI82C,EAAI72C,GAAK62C,EAAI72C,EAAI,GAiBzB,IAhBAuvC,EAAOxvC,GAAK,GACRA,EAAI,IACA9c,EAAIjF,EAAIgiB,IACJhiB,EAAIgiB,EAAI,KACZ/c,EAAIjF,EAAIgiB,EAAI,IAChBuvC,EAAQjN,EAAIiT,WAAWv1C,GAAKsiC,EAAIiT,WAAWv1C,EAAI,GAAK,EAAK,IAGrDrF,EAAI,GAFRoF,EAAI,IAAY,EAAJ9c,EAAU8c,IACfA,GAAKuiC,EAAIiT,WAAWv1C,GAAKsiC,EAAIiT,WAAWv1C,EAAI,GAAK,MAEhDk3C,IACJv8C,EAAIu8C,GACRD,EAASj3C,GAAKrF,GAEds8C,EAASj3C,GAAK,EAGbA,EAAI,EAAGA,EAAIsiC,EAAIoS,QAAU,EAAG10C,IAAK,CAK9B,IAAI/c,EAUA0X,EAdRoF,EAAI82C,EAAI72C,EAAI,GAAK62C,EAAI72C,GAAK62C,EAAI72C,EAAI,GAClCuvC,EAAOvvC,EAAI,EAAIsiC,EAAIoS,SACnBnF,EAAOxvC,GAAK,GACRA,EAAI,IACA9c,EAAIjF,EAAIgiB,EAAI,IACRhiB,EAAIgiB,KACR/c,EAAIjF,EAAIgiB,IACR/c,EAAIjF,EAAIgiB,EAAI,KACZ/c,EAAIjF,EAAIgiB,EAAI,IAChBuvC,EAAQjN,EAAIiT,WAAWv1C,EAAI,GAAKsiC,EAAIiT,WAAWv1C,GAAKsiC,EAAIiT,WAAWv1C,EAAI,GAAK,EAAK,IAK7ErF,EAAI,GAJRoF,EAAI,IACO,EAAJ9c,EAAU8c,IACVA,GAAKuiC,EAAIiT,WAAWv1C,EAAI,GAAKsiC,EAAIiT,WAAWv1C,GAC7CsiC,EAAIiT,WAAWv1C,EAAI,GAAK,MAEtBk3C,IACJv8C,EAAIu8C,GACRD,EAASj3C,GAAKrF,GAEds8C,EAASj3C,GAAK,EAGtBuvC,EAAOvvC,EAAI,GACXuvC,EAAOvvC,GAAKsiC,EAAIoS,QAAU,GAE1B30C,EAAI82C,EAAI72C,EAAI,GAAK62C,EAAI72C,GACrBuvC,EAAOxvC,GAAK,GACRA,EAAI,IACA9c,EAAIjF,EAAIgiB,EAAI,IACRhiB,EAAIgiB,KACR/c,EAAIjF,EAAIgiB,IACZuvC,EAAQjN,EAAIiT,WAAWv1C,EAAI,GAAKsiC,EAAIiT,WAAWv1C,GAAK,EAAK,IAGrDrF,EAAI,GAFRoF,EAAI,IAAY,EAAJ9c,EAAU8c,IACfA,GAAKuiC,EAAIiT,WAAWv1C,EAAI,GAAKsiC,EAAIiT,WAAWv1C,GAAK,MAEhDk3C,IACJv8C,EAAIu8C,GACRD,EAASj3C,GAAKrF,GAEds8C,EAASj3C,GAAK,EAElBuvC,EAAOvvC,GAAMsiC,EAAIoS,QAAU,GAG/B,SAASkG,GAAyBlT,EAAKoJ,EAAasD,EAAIC,EAAK9F,EAAK0E,GAC9D,IAEI/0D,EAAGub,EAAGuG,EAFNsiC,EAAMoF,EAAIE,eACV5pD,EAAM,IAAI68D,MAAMrb,EAAQoM,QAASiL,EAAMzH,EAAU5P,EAAQoM,QAEzDsM,EAAa,IAAI4C,IAAItb,EAAQoM,QAEjC,IAAK5rC,EAAIvG,EAAI,EAAGuG,EAAIsiC,EAAIoS,UAAW10C,EAAG,CAClC,IAAIs1C,EAAM,EAAGryD,EAAI,EACb+pD,EAAI1K,EAAIiT,WAAWv1C,GACvB,IAAK9hB,EAAI,EAAGA,EAAI8uD,IAAK9uD,IAAKub,EAAG,CACzB,IAAI+7C,EAAK1E,EAAYmC,GAAQx5C,GAC7B67C,GAAOE,EACHvyD,EAAIuyD,IACJvyD,EAAIuyD,GAEZpB,EAAGp0C,GAAKs1C,EACR/F,EAAO+F,GAAO,GACdt3D,EAAIgiB,GAAK/c,EACTssD,EAAOvC,EAAI,GACX6J,EAAI72C,GAAKs1C,EAAMtI,EACfuC,EAAOsH,EAAI72C,IAAM,GAIrB,IAFAuvC,EAAOvvC,GAAKsiC,EAAIoS,SAChBnF,EAAY,KAAL91C,GACAuG,EAAIw/B,EAAQoM,SAAU5rC,EACzBhiB,EAAIgiB,GAAK,EACT62C,EAAI72C,GAAK,EAGb,IADA26C,GAAyBrY,EAAKtkD,EAAK64D,EAAKqB,GACnCz+C,EAAIuG,EAAI,EAAGA,EAAIsiC,EAAIoS,QAAS10C,IAAK,CAClC,IAEI+6C,EAAIC,EACJ1hD,EAAGo8C,EAAKuF,EAHRxI,EAAKnQ,EAAImT,QAAQz1C,GAAG,GACpBk7C,EAAO5Y,EAAImT,QAAQz1C,GAAG,GAQ1B,IALA+6C,EAAK7C,EAAWzF,GAChBuI,EAAO,EACPtF,EAAMpT,EAAIqT,MAAMl8C,GAAK26C,EAAG3B,GAAMR,EAAIiG,EAAWzF,MAC3Ch5C,IACAg5C,EACKA,GAAMyI,GACTH,GAAM7C,EAAWzF,GACjBuI,GAAQ,EAERtF,EAAM5C,EAAgB4C,EADtBp8C,EAAIgpC,EAAIqT,MAAMl8C,GAAK26C,EAAG3B,GAAMR,EAAIiG,EAAWzF,IACbA,EAAKzyC,KACjCvG,IACAg5C,EAINiD,GADAuF,EAAqB,GAAVhJ,EADX8I,GAAM,EAAI,EAAIA,IAAO,EAAIC,IAGzB3G,EAAIr0C,GAAK01C,EACTpT,EAAIwT,MAAMvH,GAAKvuC,GAAKsiC,EAAIsT,MAAMrH,GAAKvuC,GACnCsiC,EAAIsT,MAAMrH,GAAKvuC,GAAK01C,EAQhBp8C,EAAItb,EAAIgiB,GACR1G,GAAKgpC,EAAI6Y,SAASn7C,GAClB1G,GAAK2hD,EACD5G,EAAIr0C,GAAK1G,IACT+6C,EAAIr0C,GAAK1G,GAGbgpC,EAAIiU,cAAgB,IACpBlC,EAAIr0C,IAAMsiC,EAAIiU,eAEdlC,EAAIr0C,GAAKo0C,EAAGp0C,KACZq0C,EAAIr0C,GAAKo0C,EAAGp0C,IAEZsiC,EAAIiU,cAAgB,IACpBlC,EAAIr0C,IAAMsiC,EAAIiU,eAGlBhH,EAAO8E,EAAIr0C,IAAM,GAErB,KAAOA,EAAIw/B,EAAQoM,SAAU5rC,EACzBo0C,EAAGp0C,GAAK,EACRq0C,EAAIr0C,GAAK,EAIjB,SAASo7C,GAAyB9Y,EAAKuO,EAAWiH,EAAMzD,EAAK9F,GACzD,IAEIvuC,EAFAhiB,EAAMoxD,EAAU5P,EAAQoM,QAASiL,EAAMzH,EAAU5P,EAAQoM,QACzDqM,EAAa3I,EAAQ9P,EAAQoM,OAAS,GAM1CgL,GAAYtU,EAAKuO,EAAWiH,EAAM95D,EAAK64D,GACvCG,GAAkB1U,EAAKtkD,EAAK64D,EAAKoB,GAMjC,IAAIt9C,EAAI,EACR,IAAKqF,EAAI,EAAGA,EAAIsiC,EAAI6S,QAASn1C,IAAK,CAC9B,IAAI1G,EAAGo8C,EAAKuF,EAERxI,EAAKnQ,EAAIoX,MAAM15C,GAAG,GAClBk7C,EAAO5Y,EAAIoX,MAAM15C,GAAG,GACpB+6C,EAAK,EAAGC,EAAO,EAMnB,IALAD,EAAK9C,EAAWxF,GAChBuI,GAAQ,EACRtF,EAAMpT,EAAIsX,MAAMj/C,GAAKm9C,EAAKrF,GAAMR,EAAIgG,EAAWxF,MAC7C93C,IACA83C,EACKA,GAAMyI,GACTH,GAAM9C,EAAWxF,GACjBuI,GAAQ,EAGRtF,EADI5C,EAAgB4C,EADpBp8C,EAAIgpC,EAAIsX,MAAMj/C,GAAKm9C,EAAKrF,GAAMR,EAAIgG,EAAWxF,IACjBA,EAAKzyC,KAE/BrF,IACA83C,EAoBN,GAhBAiD,GADAuF,EAAqB,GAAVhJ,EADX8I,GAAM,EAAI,EAAIA,IAAO,EAAIC,IAkBrB1Y,EAAIuT,cAAoB,EAANtH,IAAe/O,EAAQC,WAAY,CACrD,IAAI4b,EAAY1L,EAASrN,EAAIuX,KAAKtL,GAAKvuC,GAEnCq0C,EAAIr0C,GADJq7C,EAAY,EACHzgE,KAAKyjB,IAAIq3C,EAAK2F,GAadzgE,KAAKyjB,IAAIq3C,EAAKoC,EAAK93C,GAAKowC,OAElC,CACH,IAAIkL,EAAc1L,EAAUtN,EAAIwX,KAAKvL,GAAKvuC,GACtCu7C,EAAc5L,EAASrN,EAAIuX,KAAKtL,GAAKvuC,GAErCs7C,GAAe,IACfA,EAAc5F,GAEd6F,GAAe,IACfA,EAAc7F,GAGd2F,EADA/Y,EAAIuT,cAAoB,EAANtH,IAAe/O,EAAQwK,UAC7BpvD,KAAKyjB,IAAIk9C,EAAaD,GAEtBC,EAEhBlH,EAAIr0C,GAAKplB,KAAKyjB,IAAIq3C,EAAK2F,GAE3B/Y,EAAIwX,KAAKvL,GAAKvuC,GAAKsiC,EAAIuX,KAAKtL,GAAKvuC,GACjCsiC,EAAIuX,KAAKtL,GAAKvuC,GAAK01C,EAQfp8C,EAAItb,EAAIgiB,GACR1G,GAAKgpC,EAAIkZ,SAASx7C,GAClB1G,GAAK2hD,EACD5G,EAAIr0C,GAAK1G,IACT+6C,EAAIr0C,GAAK1G,GAGbgpC,EAAIiU,cAAgB,IACpBlC,EAAIr0C,IAAMsiC,EAAIiU,eAEdlC,EAAIr0C,GAAK83C,EAAK93C,KACdq0C,EAAIr0C,GAAK83C,EAAK93C,IAEdsiC,EAAIiU,cAAgB,IACpBlC,EAAIr0C,IAAMsiC,EAAIiU,eAElBhH,EAAO8E,EAAIr0C,IAAM,GAErB,KAAOA,EAAIw/B,EAAQoM,SAAU5rC,EACzB83C,EAAK93C,GAAK,EACVq0C,EAAIr0C,GAAK,EAIjB,SAASy7C,GAA0B/T,EAAKsO,GACpC,IAAI1T,EAAMoF,EAAIE,eAEVF,EAAIwO,cAAgBlH,EAAWnR,qBAIP,GAAnBmY,EAAa,IAA8B,GAAnBA,EAAa,KAC1CA,EAAa,GAAKA,EAAa,GAAK,GAExC,IAAK,IAAIzH,EAAM,EAAGA,EAAMjM,EAAIM,aAAc2L,IAElC7G,EAAIwO,cAAgBlH,EAAWlR,wBAC/BkY,EAAazH,GAAO,GAEpB7G,EAAIwO,cAAgBlH,EAAWjR,qBAC/BiY,EAAazH,GAAO,GAKhC,SAASmN,GAAwBhU,EAAKsO,EAAcC,GAOhD,IANA,IAAI3T,EAAMoF,EAAIE,eAML2G,EAAM,EAAGA,EAAMjM,EAAIM,aAAc2L,IAAO,CAC7C,IAAI/E,EAAYhK,EAAQwK,UAGC,GAArBgM,EAAazH,IAEbgB,EAAOjN,EAAIuT,cAActH,IAAQ/O,EAAQ4M,YACrC9J,EAAIuT,cAActH,IAAQ/O,EAAQC,aAClC+J,EAAYhK,EAAQ6M,aAGxB7C,EAAYhK,EAAQC,WAChB6C,EAAIuT,cAActH,IAAQ/O,EAAQwK,YAClC1H,EAAIuT,cAActH,GAAO/O,EAAQ4M,YAEjC9J,EAAIuT,cAActH,IAAQ/O,EAAQ6M,YAClC/J,EAAIuT,cAActH,GAAO/O,EAAQC,aAGzCwW,EAAY1H,GAAOjM,EAAIuT,cAActH,GAErCjM,EAAIuT,cAActH,GAAO/E,GAQjC,SAASmS,GAA6BvH,EAAIC,EAAKuH,EAAQC,EAAQnI,EAAWD,EAAOzG,GAI7E,IAHA,IAEIsG,EAAOD,EAFPM,EAAiB,EAARF,EACTG,EAAWH,EAAQ,EAAI74D,KAAKsB,IAAI,GAAIw3D,GAAa,EAE5C1zC,EAAI,EAAGA,EAAIgtC,IAAKhtC,EAAG,CACxB,IAAI87C,EAAM1H,EAAG,GAAGp0C,GACZ+7C,EAAM3H,EAAG,GAAGp0C,GACZg8C,EAAO3H,EAAI,GAAGr0C,GACdi8C,EAAO5H,EAAI,GAAGr0C,GACdg0C,EAAOK,EAAI,GAAGr0C,GACdi0C,EAAOI,EAAI,GAAGr0C,GAGlB,GAAIg8C,GAAQ,KAAOC,GAAQA,GAAQ,KAAOD,EAAM,CAC5C,IAAIE,EAAQN,EAAO57C,GAAK+7C,EACpBxI,EAAQqI,EAAO57C,GAAK87C,EACxBzI,EAAOz4D,KAAKoD,IAAIg2D,EAAMp5D,KAAKyjB,IAAI41C,EAAMiI,IACrC5I,EAAQ14D,KAAKoD,IAAIi2D,EAAMr5D,KAAKyjB,IAAI21C,EAAMT,SAEtCF,EAAOW,EACPV,EAAQW,EAEZ,GAAIR,EAAQ,EAAG,CAKX,IAAIM,EAAOoI,EACPtI,EAAMgI,EAAO77C,GAAK4zC,EAKtB,GAJAG,EAAQn5D,KAAKyjB,IAAIzjB,KAAKoD,IAAIg+D,EAAMnI,GAAMj5D,KAAKoD,IAAIi+D,EAAMpI,KAGrDsI,GAFAnI,EAAOp5D,KAAKoD,IAAIq1D,EAAMQ,KACtBI,EAAOr5D,KAAKoD,IAAIs1D,EAAOO,KAEX,GAAME,EAAQJ,EAAUwI,EAAO,CACvC,IAAIvR,EAAImJ,EAAQJ,EAASwI,EACzBnI,GAAQpJ,EACRqJ,GAAQrJ,EACR2E,EAAO4M,EAAQ,GAEnB9I,EAAOz4D,KAAKyjB,IAAI21C,EAAMX,GACtBC,EAAQ14D,KAAKyjB,IAAI41C,EAAMX,GAEvBD,EAAOyI,IACPzI,EAAOyI,GAEPxI,EAAQyI,IACRzI,EAAQyI,GAEZ1H,EAAI,GAAGr0C,GAAKqzC,EACZgB,EAAI,GAAGr0C,GAAKszC,GAmMpB,SAAS8I,GAAUC,EAAMC,GACrB,IAAkBC,EAOlB,OAJIA,EAHQF,GAEC,EACQ,IAHTA,IAKQC,KAEN,GACH,EAEJ1hE,KAAKC,IAAI0hE,EAAQhM,GAG5B,SAASiM,GAAeF,GACpB,IAkBe1b,EAAG6b,EAlBdC,EAAQ,EAAGC,EAAQ,EAEfrjD,EAAI,EACR,IAAKA,EAAI,EAAG8iD,GAAU9iD,EAAGgjD,GAAY,MAAOhjD,GAAK,GAIjD,IAFAsnC,EAAItnC,EACJmjD,EAAI,EACG7hE,KAAKw+D,IAAIqD,EAAI7b,GAAK,OAEjBwb,GADJ9iD,GAAKmjD,EAAI7b,GAAK,EACG0b,GAAY,EACzBG,EAAInjD,EAEJsnC,EAAItnC,EAOZ,IAJAojD,EAAQ9b,EAGJtnC,EAAI,EACHA,EAAI,EAAG8iD,GAAU9iD,EAAGgjD,GAAY,MAAOhjD,GAAK,GAIjD,IAFAsnC,EAAI,EACJ6b,EAAInjD,EACG1e,KAAKw+D,IAAIqD,EAAI7b,GAAK,OAEjBwb,GADJ9iD,GAAKmjD,EAAI7b,GAAK,EACG0b,GAAY,EACzB1b,EAAItnC,EAEJmjD,EAAInjD,EAGZqjD,EAAQF,EAGR,IAEIv+D,EAFAic,EAAM,EACNlX,EAAI,IAER,IAAK/E,EAAI,EAAGA,GAAK+E,IAAK/E,EAGlBic,GADQiiD,GADJ9iD,EAAIojD,EAAQx+D,GAAKy+D,EAAQD,GAASz5D,EACjBq5D,GAMrB,OAFYr5D,EAAI,IAAMkX,GAAOwiD,EAAQD,IAUjD,SAASE,GAAQP,GACb,IAAIQ,EAAOvjD,EAAGijD,EAAOO,EAgBrB,OAfAD,EAAQR,EAQJ/iD,GANAujD,GADAA,GAAS,EACA,EAEA,MAEA,IAAOA,GAAS,IAErB,IADJC,EAAOD,EAAQ,IACGC,EAAO,EAAMA,GAE3B,GAERP,EAAQ,UAAY,KADpBM,GAAS,MACyB,KAC5BjiE,KAAKi+B,KAAK,EAAMgkC,EAAQA,MAEhB,GACH,GAEXA,EAAQjiE,KAAKC,KAAKye,EAAIijD,GAAShM,GAY/BsM,GAAS,UAOb,SAASE,GAAUC,GAKf,OAHIA,EAAO,IACPA,EAAO,GACXA,GAAc,KACP,GAAOpiE,KAAKqiE,KAAK,IAAMD,GAAQ,IAChCpiE,KAAKqiE,KAAKD,EAAOA,EAAO,OAGlC,SAASE,GAAaC,EAAUC,EAAIC,EAAIC,EAAMC,EAAYpK,EAAKqK,EAAMC,EAAOC,EAASC,EAAUC,EAAWC,GACtG,IAGI3/D,EAHA4/D,EAAQ1O,EAAU5P,EAAQoM,OAAS,GACnCmS,EAAmBN,GAASI,EAAQ,GAAK,KAAU,KACnDG,EAAY1O,EAAQ9P,EAAQyM,UAEhCwR,GAASC,EACT,IAAIjkD,EAAI,EACJwkD,EAAK,EAGT,IAAK//D,EAAI,EAAGA,EAAIshD,EAAQoM,OAAQ1tD,IAAK,CACjC,IACIggE,EAKJ,IAJAC,EAAQpB,GAAUU,EAAQhkD,GAE1BqkD,EAAM5/D,GAAKu/D,EAAQhkD,EAEdykD,EAAKzkD,EAAGsjD,GAAUU,EAAQS,GAAMC,EAAQpO,GAC1CmO,GAAMR,EAAU,EAAGQ,KAMtB,IAHAf,EAASj/D,GAAKggE,EAAKzkD,EACnBwkD,EAAK//D,EAAI,EAEFub,EAAIykD,GACP3O,EAAO91C,EAAI+lC,EAAQyM,UACnB+R,EAAUvkD,KAAOvb,EAErB,GAAIub,EAAIikD,EAAU,EAAG,CACjBjkD,EAAIikD,EAAU,IACZx/D,EACF,OAGRqxD,EAAOrxD,EAAIshD,EAAQoM,QACnBkS,EAAM5/D,GAAKu/D,EAAQhkD,EAEnB,IAAK,IAAI2kD,EAAM,EAAGA,EAAMP,EAAOO,IAAO,CAClC,IAAIC,EAAIC,EAAIz8D,EAAO08D,EACf70D,EACJ7H,EAAQ87D,EAASS,GACjBG,EAAMZ,EAASS,EAAM,IAErBC,EAAK,EAAIzjE,KAAK2B,MAAM,GAAKqhE,GAAa/7D,EAAQ,MACrC,IACLw8D,EAAK,IACTC,EAAK,EAAI1jE,KAAK2B,MAAM,GAAKqhE,GAAaW,EAAM,MAEnCb,EAAU,IACfY,EAAKZ,EAAU,GAEnBL,EAAGe,IAAQJ,EAAUK,GAAML,EAAUM,IAAO,EAC5ClB,EAAGgB,GAAOJ,EAAUM,GACpB,IAAIE,EAAQT,EAAmBQ,EAK/Bf,EAAKY,IAAQI,EAAQV,EAAMV,EAAGgB,MACvBN,EAAMV,EAAGgB,GAAO,GAAKN,EAAMV,EAAGgB,KACjCZ,EAAKY,GAAO,EACZZ,EAAKY,GAAO,EAERZ,EAAKY,GAAO,IACZZ,EAAKY,GAAO,GAKpB10D,EAAMqzD,GAAUU,EAAQE,EAASS,GAAOR,GACxCl0D,EAAQ9O,KAAKyjB,IAAI3U,EAAK,MAAQ,KAE9BypD,EAAIiL,GAAOxjE,KAAKsB,IAAI,GAChB,MAAQ,EAAItB,KAAK89B,IAAI99B,KAAK69B,GAAK/uB,IAAQ,KAI/C+P,EAAI,EACJ,IAAK,IAAIkB,EAAI,EAAGA,EAAIsjD,EAAItjD,IAAK,CACzB,IACIwjD,EAAOM,EADPne,EAAI6c,EAASxiD,GAGjBwjD,EAAQpB,GAAUU,EAAShkD,GAC3BglD,EAAQ1B,GAAUU,GAAShkD,EAAI6mC,EAAI,IACnCgd,EAAK3iD,GAAK,IAAMwjD,EAAQM,GAExBN,EAAQpB,GAAUU,GAAShkD,EAAI,KAC/BglD,EAAQ1B,GAAUU,GAAShkD,EAAI6mC,EAAI,KACnCid,EAAW5iD,GAAK8jD,EAAQN,EACxB1kD,GAAK6mC,EAGT,OAAO2d,EAGX,SAASS,GAAehF,EAAOiF,EAAOrB,EAAMC,EAAYqB,EAAMC,GAC1D,IAMIplD,EANAqlD,EAAKzP,EAAY,CAAC7P,EAAQoM,OAAQpM,EAAQoM,SAO1CmT,EAAmB,EAWvB,GAAIF,EACA,IAAK,IAAI3gE,EAAI,EAAGA,EAAIygE,EAAOzgE,IACvB,IAAKub,EAAI,EAAGA,EAAIklD,EAAOllD,IAAK,CACxB,IAAIymC,EAAI0c,GAAQU,EAAKp/D,GAAKo/D,EAAK7jD,IAAM8jD,EAAW9jD,GAChDqlD,EAAG5gE,GAAGub,GAAKymC,EAAI0e,EAAK1gE,QAI5B,IAAKub,EAAI,EAAGA,EAAIklD,EAAOllD,IACnB,KAAI6iD,EAAW,GAAK1hE,KAAKyjB,IAAI,GAAKi/C,EAAK7jD,GAAI,IACvCulD,EAAYxC,GAAeF,GAC/B,IAASp+D,EAAI,EAAGA,EAAIygE,EAAOzgE,IACnBgiD,EAAI8e,EACF5C,GAAUkB,EAAKp/D,GAAKo/D,EAAK7jD,GAAI6iD,GAC7BiB,EAAW9jD,GACjBqlD,EAAG5gE,GAAGub,GAAKymC,EAAI0e,EAAK1gE,EANsB,CAUtD,IAASA,EAAI,EAAGA,EAAIygE,EAAOzgE,IAAK,CAC5B,IAAKub,EAAI,EAAGA,EAAIklD,KACRG,EAAG5gE,GAAGub,GAAK,GADIA,KAMvB,IAFAigD,EAAMx7D,GAAG,GAAKub,EAETA,EAAIklD,EAAQ,EAAGllD,EAAI,KAChBqlD,EAAG5gE,GAAGub,GAAK,GADQA,KAI3BigD,EAAMx7D,GAAG,GAAKub,EACdslD,GAAqBrF,EAAMx7D,GAAG,GAAKw7D,EAAMx7D,GAAG,GAAK,EAGrD,IAAIi7D,EAAI/J,EAAU2P,GACdpkD,EAAI,EACR,IAASzc,EAAI,EAAGA,EAAIygE,EAAOzgE,IACvB,IAAKub,EAAIigD,EAAMx7D,GAAG,GAAIub,GAAKigD,EAAMx7D,GAAG,GAAIub,IACpC0/C,EAAEx+C,KAAOmkD,EAAG5gE,GAAGub,GAEvB,OAAO0/C,EAGX,SAAS8F,GAAcrU,GAGnB,IAAIlhD,EAAMqzD,GAAUnS,GAGpB,OAFAlhD,EAAO9O,KAAKyjB,IAAI3U,EAAK,MAAQ,KAEtB9O,KAAKsB,IAAI,GACZ,MAAQ,EAAItB,KAAK89B,IAAI99B,KAAK69B,GAAK/uB,IAAQ,KA0S/C,SAASw1D,GAActU,EAAGhxD,GAuCtB,OAVIgxD,GAAK,KACLA,EAAI,MAGRA,GAAK,IACLA,EAAIhwD,KAAKoD,IAAI,GAAK4sD,GACR,KAAQhwD,KAAKsB,IAAI0uD,GAAI,IAAO,IAChChwD,KAAKC,KAAK,GAAMD,KAAKsB,IAAI0uD,EAAI,IAAK,IAAQ,EAC1ChwD,KAAKC,KAAK,IAAOD,KAAKsB,IAAI0uD,EAAI,IAAK,IACZ,MAAtB,GAAM,IAAOhxD,GAAiBgB,KAAKsB,IAAI0uD,EAAG,GAvyBrD9tD,KAAK4sD,kBAAoB,SAAUhC,EAAK7gD,EAAQ2nD,EAAQ2C,EAAQmG,EAAeC,EAAkBC,EAAgBC,EAAmB9M,EAAQsL,GACxI,IAAI3T,EAAMoF,EAAIE,eAKViJ,EAAYzB,EAAU5P,EAAQyM,UAC9B6E,EAAczB,EAAY,CAAC,EAAG7P,EAAQ2M,aACtCyL,EAAUvI,EAAY,CAAC,EAAG7P,EAAQwI,UAClC6P,EAAUxI,EAAY,CAAC,EAAG,EAAG7P,EAAQ0M,YACrCkI,EAAK/E,EAAY,CAAC,EAAG7P,EAAQoM,SAAUyI,EAAMhF,EAAY,CAAC,EAAG7P,EAAQoM,SACrE0O,EAAmBjL,EAAY,CAAC,EAAG,IACnCsI,EAAS,GAGTmB,EAAa,CAAC,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GACpD,CAAC,EAAG,EAAG,EAAG,IACV9C,EAAe1G,EAAQ,GAKvBkL,EAAa9S,EAAIkC,MAAQC,SAASC,aAAgB,EAChDxH,EAAIM,aAEVyX,GAAwB3S,EAAK7gD,EAAQ2nD,EAAQ2C,EAAQmG,EACjDC,EAAkB5M,EAAQ2P,EAAkBxB,EAC5C9C,GAEJyF,GAA0B/T,EAAKsO,GAI3B,IAAK,IAAIzH,EAAM,EAAGA,EAAMiM,EAAWjM,IAG/B4I,GAAqBzP,EAAK7gD,EAAQ2nD,EAAQD,EAAK4C,EAC3CN,EAFM+G,EADNuH,EAAa,EAAN5Q,GAKX8I,GAAwC3P,EAAKyJ,EAAQ5C,EACjDsC,GAEsB,GAAtBmF,EAAamJ,GACb/D,GAAyB9Y,EAAKuO,EAAWuD,EAAG7F,GAAM8F,EAAI9F,GAClDA,GAEJmM,GAAsBpY,EAAKiM,GAYnC,IATKyH,EAAa,GAAKA,EAAa,IAAO,GAEnCtO,EAAIkC,MAAQC,SAASC,cACrB6R,GAA6BvH,EAAIC,EAAK/R,EAAI8c,SACtC9c,EAAIsE,IAAIgM,KAAMlL,EAAIuS,SAAW3X,EAAIsE,IAAII,OACrCU,EAAI+L,MAAOnR,EAAI6S,SAIlB5G,EAAM,EAAGA,EAAMiM,EAAWjM,IAEL,GAAtByH,EADAmJ,EAAa,EAAN5Q,IAEPyG,EAA6B1S,EAAK8R,EAAG7F,GAAM8F,EAAI9F,GAAMA,GAO7D,IAAK,IAAI0E,EAAS,EAAGA,EAAS,EAAGA,IAAU,CACvC,IAAS1E,EAAM,EAAGA,EAAMiM,IAAajM,EAGP,GAAtByH,EAFAmJ,EAAa,EAAN5Q,GAGPkM,GAAsBnY,EAAKiM,EAAK0E,IAIhCmE,GAAqB1P,EAAK7gD,EAAQ2nD,EAAQD,EAAK0E,EAC3CnC,EAFM+G,EAEgBsH,GAC1BvE,GAAyBlT,EAAKoJ,EAAasD,EAAG7F,GAC1C8F,EAAI9F,GAAMA,EAAK0E,IAa3B,IAVK+C,EAAa,GAAKA,EAAa,IAAO,GAEnCtO,EAAIkC,MAAQC,SAASC,cACrB6R,GAA6BvH,EAAIC,EAAK/R,EAAI+c,SACtC/c,EAAIsE,IAAI+L,KAAMjL,EAAIuS,SAAW3X,EAAIsE,IAAII,OACrCU,EAAI+L,MAAOnR,EAAIoS,SAKlBnG,EAAM,EAAGA,EAAMiM,IAAajM,EAE7B,GAAKyH,EADLmJ,EAAa,EAAN5Q,IAEP4F,EAA6B7R,EAAK8R,EAAG7F,GAAM8F,EAAI9F,GAC3CA,EAAK0E,GAMrB,IAAS1E,EAAM,EAAGA,EAAMiM,EAAWjM,IAAO,CACtC,IAAI4Q,EAEJ,GAA0B,GAAtBnJ,EAFAmJ,EAAa,EAAN5Q,GAKX,IAAK,IAAIyE,EAAK,EAAGA,EAAKxT,EAAQgF,QAASwO,IAAM,CACzC,IAAIsM,EAAWlQ,EAAU,GACzB,IAAS6D,EAAS,EAAGA,EAAS,EAAGA,IAAU,CACvC,IAAIsB,EAAOjS,EAAIwC,IAAIyJ,GAAKhO,EAAEyS,GAAIC,GAG9B,GAFAsB,GAAQrE,EAEJ4I,EAAWvK,GAAK0E,IAAW,GACO,GAA/B6F,EAAWvK,GAAK0E,EAAS,GAAS,CACrC,IAAIwG,EAAiB,GAAVxG,EAAeA,EAAS,EAAI,EACnCkG,EAAIhD,EAAU7T,EAAIwC,IAAIyJ,GAAKhO,EAAEyS,GAAIyG,GAAMlF,EACvCpE,EAAkBwH,GACtBpD,EAAO35D,KAAKyjB,IAAIk2C,EAAM4E,QACY,GAA3BL,EAAWvK,GAAK0E,IACnBwG,EAAiB,GAAVxG,EAAeA,EAAS,EAAI,EACnCkG,EAAIhD,EAAU7T,EAAIwC,IAAIyJ,GAAKhO,EAAEyS,GAAIyG,GAAMlF,EACvCnE,EAAkBuH,GACtBpD,EAAO35D,KAAKyjB,IAAIk2C,EAAM4E,KACJ,GAAVlG,GAA8C,GAA/B6F,EAAWvK,GAAK0E,EAAS,IAClC,GAAVA,GAA6C,GAA9B3Q,EAAIuI,MAAM2O,YAAYjL,MACrCkL,EAAiB,GAAVxG,EAAeA,EAAS,EAAI,EACnCkG,EAAIhD,EAAU7T,EAAIwC,IAAIyJ,GAAKhO,EAAEyS,GAAIyG,GAAMlF,EACvCnE,EAAkBuH,GACtBpD,EAAO35D,KAAKyjB,IAAIk2C,EAAM4E,IAI1B5E,GAAQ+F,EAAiB/L,GAAK0E,GAE9BqM,EAASrM,GAAUsB,EAEvB,IAAStB,EAAS,EAAGA,EAAS,EAAGA,IAC7B3Q,EAAIwC,IAAIyJ,GAAKhO,EAAEyS,GAAIC,GAAUqM,EAASrM,IAKtD,IAAS1E,EAAM,EAAGA,EAAMiM,EAAWjM,IAC/BjM,EAAIuI,MAAM2O,YAAYjL,GAAOuK,EAAWvK,GAAK,GAWjD,IALAmN,GAAwBhU,EAAKsO,EAAcC,GAKlC1H,EAAM,EAAGA,EAAMiM,EAAWjM,IAAO,CACtC,IAAI2L,EACAC,EACApgE,EACAu8D,EAEA/H,EAAM,GACN2L,EAAMzC,EACN0C,GAAU,EACVpgE,EAAOylD,EAAQwK,UACXiM,EAAY,IAAMzW,EAAQC,YACvBwW,EAAY,IAAMzW,EAAQC,aAC7B1lD,EAAOylD,EAAQC,YACnB6W,EAAKiB,EAAiBpG,GAAQ5C,EAAM,KAEpC2L,EAAM1C,EACN2C,EAAS,EACTpgE,EAAOk8D,EAAY1H,GACnB+H,EAAKgB,EAAcnG,GAAQ5C,IAG3Bx0D,GAAQylD,EAAQC,WAChBya,EAAIC,EAAS5L,GAAO8H,EAASC,EAAIhU,EAAIiU,eAErC2D,EAAIC,EAAS5L,GAAOmI,GAASJ,EAAIhU,EAAIiU,eAGrC7O,EAAI6C,WACJjI,EAAIkI,MAAMzB,GAAGoI,GAAQ5C,GAAO2L,EAAIC,EAAS5L,IAGjD,OAAO,GAmSXzxD,KAAKyiE,cAAgB,SAAU7X,GAC3B,IACIxpD,EAwMIu1D,EAzMJnR,EAAMoF,EAAIE,eAEV4X,GAAW,EACXC,EAAQ,GAAIC,EAAQ,GACpBC,EAAU,EAAGC,EAAU,EACvBC,GAAW,KAAMC,GAAW,IAC5BxC,EAAOlO,EAAU5P,EAAQoM,QACzB2R,EAAanO,EAAU5P,EAAQoM,QAC/BgT,EAAOxP,EAAU5P,EAAQoM,QACzB6R,EAAQ/V,EAAI0B,eAEhB,OAAQ1B,EAAIqY,eACR,QACA,KAAK,EACDP,GAAW,EACX,MACJ,KAAK,EACDA,EAAY9X,EAAI+B,KAAOoF,EAAQtQ,UAAYmJ,EAAI+B,KAAOoF,EAAQzQ,OAE9D,MACJ,KAAK,EACDohB,GAAW,EACX,MACJ,KAAK,EACDC,EAAQ,EACRE,GAAW,KACXC,GAAW,MACXC,GAAW,KACXC,GAAW,KAOnB,IAJAxd,EAAI0d,kBAAoB,IACxB1d,EAAIuT,cAAc,GAAKvT,EAAIuT,cAAc,GAAKrW,EAAQwK,UAGjD9rD,EAAI,EAAGA,EAAI,IAAKA,EAAG,CACpB,IAAK,IAAIub,EAAI,EAAGA,EAAI+lC,EAAQoM,SAAUnyC,EAClC6oC,EAAIuX,KAAK37D,GAAGub,GAAK,KACjB6oC,EAAIwX,KAAK57D,GAAGub,GAAK,KACjB6oC,EAAIsT,MAAM13D,GAAGub,GAAK6oC,EAAIwT,MAAM53D,GAAGub,GAAK,EAExC,IAAK,IAAIu5C,EAAK,EAAGA,EAAKxT,EAAQ+E,QAASyO,IACnC1Q,EAAIyC,GAAG7mD,GAAG0iD,EAAEoS,GAAM,KAClB1Q,EAAIwC,IAAI5mD,GAAG0iD,EAAEoS,GAAM,KAEvB,IAASv5C,EAAI,EAAGA,EAAI,IAAKA,EAAG,CACxB,IAASu5C,EAAK,EAAGA,EAAKxT,EAAQgF,QAASwO,IACnC1Q,EAAIyC,GAAG7mD,GAAGqiD,EAAEyS,GAAIv5C,GAAK,KACrB6oC,EAAIwC,IAAI5mD,GAAGqiD,EAAEyS,GAAIv5C,GAAK,KAE1B6oC,EAAIuI,MAAM2O,YAAYt7D,GAAK,EAE/B,IAASub,EAAI,EAAGA,EAAI,EAAGA,IACnB6oC,EAAIuI,MAAMkO,iBAAiB76D,GAAGub,GAAK,GAiB3C,IAbA6oC,EAAIoP,iBAAiB,GAAKpP,EAAIoP,iBAAiB,GAAK,EAOpDpP,EAAI6S,QAAU+H,GAAa5a,EAAIwU,WAAYxU,EAAI4S,KAAM5S,EAAIwR,KAAMwJ,EAC3DC,EAAYjb,EAAI8Q,MAAO9Q,EAAIuS,IAAIO,YAAaqI,EAC5Cje,EAAQwI,QAAS1F,EAAI2d,cAAcrf,EAAGpB,EAAQwI,QAAO,KACtCxI,EAAQ+E,SAC3BgL,EAAOjN,EAAI6S,QAAU3V,EAAQoM,QAExB1tD,EAAI,EAAGA,EAAIokD,EAAI6S,QAASj3D,IAAK,CAC9B,IAAIgiE,EAAMP,EACNrC,EAAKp/D,IAAMuhE,IACXS,EAAMN,GAAWtC,EAAKp/D,GAAKuhE,IAAUC,EAAQD,GAASE,GAC/CD,EAAQpC,EAAKp/D,KAAOwhE,EAAQD,IAEvCb,EAAK1gE,GAAKtD,KAAKsB,IAAI,GAAMgkE,EAAM,IAC3B5d,EAAIwU,WAAW54D,GAAK,EACpBokD,EAAIyU,YAAY74D,GAAK,EAAMokD,EAAIwU,WAAW54D,GAE1CokD,EAAIyU,YAAY74D,GAAK,EAQ7B,IALAokD,EAAIsX,MAAQ8E,GAAepc,EAAIoX,MAAOpX,EAAI6S,QAASmI,EAAMC,EACrDqB,EAAMY,GAGN/lD,EAAI,EACHvb,EAAI,EAAGA,EAAIokD,EAAI6S,QAASj3D,IAAK,CAI9Bob,EAAIw1C,EAAM5Q,UACV,IAAK,IAAIvjC,EAAI,EAAGA,EAAI2nC,EAAIwU,WAAW54D,GAAIyc,IAAKlB,IAAK,CAC7C,IAAIujD,EAAOS,EAAQhkD,GAAK,IAAS+lC,EAAQwI,SAKzCmY,EAAQrjE,KAAKsjE,WAAkB,IAAPpD,EAAatV,GAAO,GAE5CyY,EAAQvlE,KAAKsB,IAAI,GAAK,GAAMikE,GAGxB7mD,GADJ6mD,GAAS7d,EAAIwU,WAAW54D,MAEpBob,EAAI6mD,GAEZ7d,EAAIsE,IAAIgM,KAAK10D,GAAKob,GAYlBA,EAAoB,GAAVgkD,EAAKp/D,GAAU,GAApB,IACG,IACJob,EAAI,KAEJA,GAAK,KACLA,GAAK,IAETA,GAAK,EACLgpC,EAAIkZ,SAASt9D,GAAMtD,KAAKsB,IAAI,GAAMod,EAAI,IAAOgpC,EAAIwU,WAAW54D,GAchE,IARAokD,EAAIoS,QAAUwI,GAAa5a,EAAIiT,WAAYjT,EAAImS,KAAMnS,EAAI4R,KAAMoJ,EAC3DC,EAAYjb,EAAIiR,MAAOjR,EAAIuS,IAAIC,YAAa2I,EAC5Cje,EAAQ0M,UAAW5J,EAAI2d,cAAc1f,EAAGf,EAAQ0M,UAAS,IAC1C1M,EAAQgF,SAC3B+K,EAAOjN,EAAIoS,QAAUlV,EAAQoM,QAG7BnyC,EAAI,EACCvb,EAAI,EAAGA,EAAIokD,EAAIoS,QAASx2D,IAAK,CAC9B,IAAIob,EAUJ,IATI4mD,EAAML,EACNvC,EAAKp/D,IAAMuhE,IACXS,EAAMJ,GAAWxC,EAAKp/D,GAAKuhE,IAAUC,EAAQD,GAASI,GAC/CH,EAAQpC,EAAKp/D,KAAOwhE,EAAQD,IAEvCb,EAAK1gE,GAAKtD,KAAKsB,IAAI,GAAMgkE,EAAM,IAG/B5mD,EAAIw1C,EAAM5Q,UACDvjC,EAAI,EAAGA,EAAI2nC,EAAIiT,WAAWr3D,GAAIyc,IAAKlB,IAAK,CAC7C,IACI0mD,EADAnD,EAAOS,EAAQhkD,GAAK,IAAS+lC,EAAQ0M,WAOzCiU,EAAQrjE,KAAKsjE,WAAkB,IAAPpD,EAAatV,GAAO,GAE5CyY,EAAQvlE,KAAKsB,IAAI,GAAK,GAAMikE,GAGxB7mD,GADJ6mD,GAAS7d,EAAIiT,WAAWr3D,MAEpBob,EAAI6mD,GAEZ7d,EAAIsE,IAAI+L,KAAKz0D,GAAKob,EAOlBA,EAAsB,EAAVgkD,EAAKp/D,GAAW,GAAtB,EACFo/D,EAAKp/D,GAAK,KACVob,GAAK,EAAsB,IAAlB1e,KAAKylE,IAAI,EAAI/mD,IAEtBgkD,EAAKp/D,GAAK,KACVob,GAAK,EAAsB,IAAlB1e,KAAKylE,IAAI,EAAI/mD,IAEtBA,GAAK,KACLA,GAAK,IAETA,GAAK,EACLgpC,EAAI6Y,SAASj9D,GAAKtD,KAAKsB,IAAI,GAAMod,EAAI,IAC/BgpC,EAAIiT,WAAWr3D,GAGzBokD,EAAIqT,MAAQ+I,GAAepc,EAAImT,QAASnT,EAAIoS,QAAS4I,EAAMC,EACvDqB,EAAMY,GAEVtN,IACAzC,EAAId,SAASrM,GAGbA,EAAIge,MAAQ1lE,KAAKC,KAAK,EAAM60D,GACrBO,EAA2BwN,EAAQ,MAItChK,EAAQpD,EACuB,IAAN,EAApB3I,EAAI6Y,iBACL9M,EAAQ,GACR74D,KAAKw+D,IAAI1R,EAAI+L,OAAS,IACtBA,EAAQ/L,EAAI+L,OAChB/L,EAAI+L,MAAQA,EAMZ,IAAK,IAAIzzC,EAAI,EAAGA,EAAIsiC,EAAI6S,QAASn1C,IACzBsiC,EAAIoX,MAAM15C,GAAG,GAAKsiC,EAAI6S,QAAU,IAChC7S,EAAIoX,MAAM15C,GAAG,GAAKsiC,EAAI6S,QAAU,GAO5C,IAAIqL,EAAkB,IAAOle,EAAIQ,QAAU2a,EAU3C,GATAnb,EAAIsE,IAAI0Z,MAAQ1lE,KAAKsB,IAAI,IAAK,IAAaskE,GAC3Cle,EAAIsE,IAAII,OAAS,IAEjB1E,EAAIsE,IAAIK,YAAc,EAGtBsI,EAAOjN,EAAI4S,KAAK1V,EAAQ+E,QAAU,IAAMjC,EAAI6S,SAC5C5F,EAAOjN,EAAImS,KAAKjV,EAAQgF,QAAU,IAAMlC,EAAIoS,UAExB,GAAhBhN,EAAI+Y,QAAe,CAEnB,IACIC,EAAWhZ,EAAI0B,eACZ5J,EAAQwI,QACX2Y,EAAc,EAElB,IADA3D,EAAO,EACF9+D,EAAI,EAAGA,EAAIshD,EAAQwI,QAAU,IAAK9pD,EAGnC8+D,GAAQ0D,EACRpe,EAAIsE,IAAI+J,MAAMzyD,GAAK,EAAKtD,KAAKsB,IAAI,GAAIY,KAAKsjE,WAAWpD,EAAMtV,GAAO,IAClEiZ,GAAere,EAAIsE,IAAI+J,MAAMzyD,GAGjC,IADAyiE,EAAc,EAAMA,EACfziE,EAAIshD,EAAQwI,QAAU,IAAK9pD,GAAK,GACjCokD,EAAIsE,IAAI+J,MAAMzyD,IAAMyiE,EAIxB,IAAS3gD,EAAIvG,EAAI,EAAGuG,EAAIsiC,EAAIoS,UAAW10C,EACnC,IAAK9hB,EAAI,EAAGA,EAAIokD,EAAIiT,WAAWv1C,KAAM9hB,IAC/Bub,EAIV,IADA81C,EAAY,KAAL91C,GACEuG,EAAIvG,EAAI,EAAGuG,EAAIsiC,EAAI6S,UAAWn1C,EACnC,IAAK9hB,EAAI,EAAGA,EAAIokD,EAAIwU,WAAW92C,KAAM9hB,IAC/Bub,EAMd,IAHI81C,EAAY,KAAL91C,GAEXA,EAAI,EACCvb,EAAI,EAAGA,EAAIokD,EAAI6S,QAASj3D,IACrB8+D,EAAOS,GAAShkD,EAAI6oC,EAAIwU,WAAW54D,GAAK,IAAM,EAAMshD,EAAQwI,SAChE1F,EAAI8c,SAASlhE,GAAK+gE,GAAcjC,GAChCvjD,GAAK6oC,EAAIwU,WAAW54D,GAExB,KAAOA,EAAIshD,EAAQoM,SAAU1tD,EACzBokD,EAAI8c,SAASlhE,GAAK,EAGtB,IADAub,EAAI,EACCvb,EAAI,EAAGA,EAAIokD,EAAIoS,QAASx2D,IACrB8+D,EAAOS,GAAShkD,EAAI6oC,EAAIiT,WAAWr3D,GAAK,IAAM,EAAMshD,EAAQ0M,WAChE5J,EAAI+c,SAASnhE,GAAK+gE,GAAcjC,GAChCvjD,GAAK6oC,EAAIiT,WAAWr3D,GAExB,KAAOA,EAAIshD,EAAQoM,SAAU1tD,EACzBokD,EAAI+c,SAASnhE,GAAK,EAEtB,OAAO,GAgDXpB,KAAKsjE,WAAa,SAAUxV,EAAGlD,GAC3B,IAAImM,EACJ,OAAQnM,EAAI+Y,SACR,KAAK,EACD5M,EAAMqL,GAActU,EAAG,GACvB,MACJ,KAAK,EAEDiJ,EAAMqL,GAActU,GAAI,GACxB,MACJ,KAAK,EAUL,QACIiJ,EAAMqL,GAActU,EAAG,GACvB,MATJ,KAAK,EAEDiJ,EAAMqL,GAActU,EAAG,GAAK,EAC5B,MACJ,KAAK,EACDiJ,EAAMqL,GAActU,EAAGlD,EAAIkZ,UAMnC,OAAO/M,GAKf,IAAAgN,EAAiBrR,EC90FjB,SAASsR,EAAStjB,GACd,IAAIujB,EAAWvjB,EACf1gD,KAAK0gD,QAAU,WACX,OAAOujB,GAIfD,EAAS/G,OAAS,IAAI+G,EAAS,GAC/BA,EAAShX,aAAe,IAAIgX,EAAS,GACrCA,EAASE,aAAe,IAAIF,EAAS,GACrCA,EAASG,KAAO,IAAIH,EAAS,GAC7BA,EAASI,QAAU,IAAIJ,EAAS,GAEhC,IAAAK,GAAiBL,ECdjB,SAASM,KAELtkE,KAAKukE,SAAW,EAOhBvkE,KAAKwkE,YAAc,EAInBxkE,KAAKykE,aAAe,EAIpBzkE,KAAK0kE,cAAgB,EAKrB1kE,KAAKssD,eAAiB,EAKtBtsD,KAAK2kE,MAAQ,EAIb3kE,KAAK4kE,WAAa,EAIlB5kE,KAAK6kE,YAAc,EAMnB7kE,KAAKytD,UAAW,EAIhBztD,KAAKquD,cAAe,EAKpBruD,KAAK8kE,aAAc,EAInB9kE,KAAK+kE,QAAU,EAIf/kE,KAAK8sD,KAAOuX,GAASpH,OAIrBj9D,KAAKotD,UAAW,EAIhBptD,KAAKglE,aAAc,EAInBhlE,KAAKilE,gBAAiB,EAItBjlE,KAAKklE,mBAAoB,EAIzBllE,KAAKmlE,wBAAyB,EAS9BnlE,KAAKolE,MAAQ,EAIbplE,KAAKqlE,kBAAoB,EAMzBrlE,KAAKslE,UAAY,EAIjBtlE,KAAKyiB,SAAW,EAIhBziB,KAAKulE,UAAY,EAOjBvlE,KAAKwlE,SAAW,EAIhBxlE,KAAKylE,iBAAmB,EAIxBzlE,KAAK0lE,YAAa,EAKlB1lE,KAAK2lE,mBAAoB,EAGzB3lE,KAAK4lE,WAAa,EAClB5lE,KAAK6lE,iBAAmB,EACxB7lE,KAAK8lE,eAAgB,EACrB9lE,KAAKijE,cAAgB,EACrBjjE,KAAKyjE,cAAgB,EAErBzjE,KAAK+lE,OAAS,EAGd/lE,KAAK2sD,IAAM,KAIX3sD,KAAKgmE,WAAa,EAIlBhmE,KAAKimE,MAAQ,EACbjmE,KAAKkmE,sBAAwB,EAC7BlmE,KAAKmmE,qBAAuB,EAC5BnmE,KAAKomE,qBAAuB,EAK5BpmE,KAAKqmE,aAAe,EAOpBrmE,KAAKsmE,YAAc,EAInBtmE,KAAKumE,aAAe,EAIpBvmE,KAAKwmE,aAAe,EAIpBxmE,KAAKymE,cAAgB,EAOrBzmE,KAAK0mE,cAAgB,EACrB1mE,KAAK2mE,oBAAsB,EAI3B3mE,KAAK4mE,SAAU,EAIf5mE,KAAK6mE,UAAW,EAIhB7mE,KAAK8mE,OAAQ,EAIb9mE,KAAK2jE,QAAU,EAIf3jE,KAAK8jE,SAAW,EAIhB9jE,KAAKm9D,SAAW,EAIhBn9D,KAAK+mE,WAAa,EAIlB/mE,KAAK20D,iBAAmB,EAIxB30D,KAAKgnE,kBAAoB,EACzBhnE,KAAKo5D,aAAe,KAIpBp5D,KAAKinE,aAAc,EACnBjnE,KAAKk9D,aAAe,EAIpBl9D,KAAK22D,MAAQ,EAKb32D,KAAKknE,MAAO,EAIZlnE,KAAKmnE,aAAe,EAUpBnnE,KAAKonE,QAAU,EACfpnE,KAAKqnE,cAAgB,EAIrBrnE,KAAKsnE,gBAAkB,EACvBtnE,KAAKmrD,UAAY,EAIjBnrD,KAAKunE,SAAW,EAIhBvnE,KAAKwnE,mBAAqB,EAI1BxnE,KAAK8qD,eAAiB,KAG1B,IAAA2c,GAAiBnD,GC1QboD,GAAS,CAAC,EAMdA,GAAOC,OAA4B,EAAlBjlB,EAAQgF,QAEzB,IAAAkgB,GAAiBF,GCCbG,GAAYlmB,EAAOQ,UAEnB2lB,GAAUnmB,EAAOgH,QACrB,SAKSof,KAEL/nE,KAAKqjD,GAAKwkB,GAAU,KAEpB7nE,KAAKgoE,OAASF,GAAQ,KAEtB9nE,KAAKioE,SAAWH,GAAQF,GAAOD,QAC/B3nE,KAAKkoE,UAAY,EAEjBloE,KAAKmoE,eAAiB,EACtBnoE,KAAKooE,WAAa,EAClBpoE,KAAKqoE,OAAS,EACdroE,KAAKsoE,YAAc,EACnBtoE,KAAKuoE,kBAAoB,EACzBvoE,KAAK0mD,WAAa,EAClB1mD,KAAK6mD,iBAAmB,EACxB7mD,KAAKwoE,aAAeV,GAAQ,GAC5B9nE,KAAKyoE,cAAgBX,GAAQ,GAC7B9nE,KAAK0oE,cAAgB,EACrB1oE,KAAK2oE,cAAgB,EACrB3oE,KAAK4oE,QAAU,EACf5oE,KAAK6oE,eAAiB,EACtB7oE,KAAK8oE,mBAAqB,EAE1B9oE,KAAK+oE,aAAe,EACpB/oE,KAAKgpE,SAAW,EAChBhpE,KAAKipE,SAAW,EAChBjpE,KAAKkpE,SAAW,EAChBlpE,KAAKmpE,OAAS,EACdnpE,KAAKopE,OAAS,EACdppE,KAAKqpE,UAAY,EACjBrpE,KAAKspE,MAAQxB,GAAQF,GAAOD,QAC5B3nE,KAAK+L,OAAS+7D,GAAQF,GAAOD,QAC7B3nE,KAAKupE,WAAa,EAIlBvpE,KAAKwpE,oBAAsB,KAC3BxpE,KAAKypE,KAAO3B,GAAQ,GAEpB9nE,KAAK0pE,kBAAoB,EAEzB,IAAI/hB,EAAO3nD,KACX,SAAS2pE,EAAU1gE,GACf,OAAO,IAAIs2C,WAAWt2C,GAE1B,SAAS2gE,EAAY3gE,GACjB,OAAO,IAAI6L,aAAa7L,GAE5BjJ,KAAK4nD,OAAS,SAAUiiB,GACpBliB,EAAKtE,GAAKumB,EAAYC,EAAMxmB,IAC5BsE,EAAKqgB,OAAS2B,EAAUE,EAAM7B,QAC9BrgB,EAAKsgB,SAAW0B,EAAUE,EAAM5B,UAChCtgB,EAAKugB,UAAY2B,EAAM3B,UAEvBvgB,EAAKwgB,eAAiB0B,EAAM1B,eAC5BxgB,EAAKygB,WAAayB,EAAMzB,WACxBzgB,EAAK0gB,OAASwB,EAAMxB,OACpB1gB,EAAK2gB,YAAcuB,EAAMvB,YACzB3gB,EAAK4gB,kBAAoBsB,EAAMtB,kBAC/B5gB,EAAKjB,WAAamjB,EAAMnjB,WACxBiB,EAAKd,iBAAmBgjB,EAAMhjB,iBAC9Bc,EAAK6gB,aAAemB,EAAUE,EAAMrB,cACpC7gB,EAAK8gB,cAAgBkB,EAAUE,EAAMpB,eACrC9gB,EAAK+gB,cAAgBmB,EAAMnB,cAC3B/gB,EAAKghB,cAAgBkB,EAAMlB,cAC3BhhB,EAAKihB,QAAUiB,EAAMjB,QACrBjhB,EAAKkhB,eAAiBgB,EAAMhB,eAC5BlhB,EAAKmhB,mBAAqBe,EAAMf,mBAEhCnhB,EAAKohB,aAAec,EAAMd,aAC1BphB,EAAKqhB,SAAWa,EAAMb,SACtBrhB,EAAKshB,SAAWY,EAAMZ,SACtBthB,EAAKuhB,SAAWW,EAAMX,SACtBvhB,EAAKwhB,OAASU,EAAMV,OACpBxhB,EAAKyhB,OAASS,EAAMT,OACpBzhB,EAAK0hB,UAAYQ,EAAMR,UACvB1hB,EAAK2hB,MAAQK,EAAUE,EAAMP,OAC7B3hB,EAAK57C,OAAS49D,EAAUE,EAAM99D,QAC9B47C,EAAK4hB,WAAaM,EAAMN,WAExB5hB,EAAK6hB,oBAAsBK,EAAML,oBAAoB9oE,MAAM,GAC3DinD,EAAK8hB,KAAOE,EAAUE,EAAMJ,MAC5B9hB,EAAK+hB,kBAAoBG,EAAMH,mBAIvC,IAAAI,GAAiB/B,GC9FbgC,GAAUpoB,EAAOgH,QACrB,SAKSqhB,KACLhqE,KAAKomD,GAAK,CAAC,CAAC,KAAM,MAAO,CAAC,KAAM,OAChCpmD,KAAKiqE,gBAAkB,EACvBjqE,KAAKkqE,aAAe,EACpBlqE,KAAKmqE,cAAgB,EACrBnqE,KAAKoqE,eAAiB,EACtBpqE,KAAKqqE,MAAQ,CAACN,GAAQ,GAAIA,GAAQ,IAElC,IAAK,IAAIhkB,EAAK,EAAGA,EAAK,EAAGA,IACrB,IAAK,IAAIF,EAAK,EAAGA,EAAK,EAAGA,IACrB7lD,KAAKomD,GAAGL,GAAIF,GAAM,IAAIikB,GAKlC,IAAAQ,GAAiBN,GCvBbO,GAAS5oB,EAAOE,OAWhB2oB,GAAU7oB,EAAOgH,QACrB,SAKS8hB,GAASC,EAAMC,EAAMC,EAAOC,GAEjC7qE,KAAK8jD,EAAI0mB,GAAQ,EAAI9nB,EAAQ+E,SAC7BznD,KAAKyjD,EAAI+mB,GAAQ,EAAI9nB,EAAQgF,SAC7B1nD,KAAK8qE,OAASN,GAAQ,EAAI9nB,EAAQuM,QAClCjvD,KAAK+qE,OAASP,GAAQ,EAAI9nB,EAAQwM,QAClC,IAAIpL,EAAI9jD,KAAK8jD,EACTL,EAAIzjD,KAAKyjD,EAEW,GAApBt+C,UAAUxG,SAGVqB,KAAK0qE,KAAOvlE,UAAU,GACtBnF,KAAK2qE,KAAOxlE,UAAU,GACtBnF,KAAK4qE,MAAQzlE,UAAU,GACvBnF,KAAK6qE,MAAQ1lE,UAAU,GAEvBolE,GAAOrjB,UAAUlnD,KAAK0qE,KAAM,EAAG5mB,EAAG,EAAGhmD,KAAKyjB,IAAIvhB,KAAK0qE,KAAK/rE,OAAQqB,KAAK8jD,EAAEnlD,SACvE4rE,GAAOrjB,UAAUlnD,KAAK2qE,KAAM,EAAGlnB,EAAG,EAAG3lD,KAAKyjB,IAAIvhB,KAAK2qE,KAAKhsE,OAAQqB,KAAKyjD,EAAE9kD,SACvE4rE,GAAOrjB,UAAUlnD,KAAK4qE,MAAO,EAAG5qE,KAAK8qE,OAAQ,EAAGhtE,KAAKyjB,IAAIvhB,KAAK4qE,MAAMjsE,OAAQqB,KAAK8qE,OAAOnsE,SACxF4rE,GAAOrjB,UAAUlnD,KAAK6qE,MAAO,EAAG7qE,KAAK+qE,OAAQ,EAAGjtE,KAAKyjB,IAAIvhB,KAAK6qE,MAAMlsE,OAAQqB,KAAK+qE,OAAOpsE,UAIhG,IAAAqsE,GAAiBP,GCzCbQ,GAAYtpB,EAAOQ,UACnB+oB,GAAcvpB,EAAO4F,YACrB4jB,GAAUxpB,EAAOgH,QAcrB,SAASyiB,KACLprE,KAAKi8D,iBAAmBiP,GAAY,CAAC,EAAG,IACxClrE,KAAK08D,YAAcyO,GAAQ,GAC3BnrE,KAAKguD,SAAWid,GAAU,IAC1BjrE,KAAKqrE,SAAWJ,GAAUvoB,EAAQ+E,SAClCznD,KAAKsrE,UAAYL,GAAUvoB,EAAQgF,SAKnC1nD,KAAKy8D,WAAa,EAClBz8D,KAAKw8D,aAAe,EAGxB,IAAA+O,GAAiBH,GCtCjB,SAASI,KAILxrE,KAAKqd,IAAM,EAIXrd,KAAKyrE,KAAO,EAIZzrE,KAAK0rE,KAAO,EAIZ1rE,KAAK2rE,IAAM,EAIX3rE,KAAKqT,KAAO,EAIZrT,KAAK4rE,IAAM,KACX5rE,KAAK6rE,cAAgB,EACrB7rE,KAAK8rE,cAAgB,EAErB9rE,KAAK+rE,eAAiB,EAG1B,IAAAC,GAAiBR,GCzBbS,GAAWtqB,EAAOuqB,SAClBC,GAAaxqB,EAAOyqB,WACpBC,GAAY1qB,EAAOQ,UACnBmqB,GAAc3qB,EAAO4F,YACrBglB,GAAU5qB,EAAOgH,QACjB6jB,GAAY7qB,EAAO8qB,UAkBvB,SAASC,KACL,IAAIC,EAAiB,GA6LrB,SAASC,IACL5sE,KAAK6sE,aAAe,EACpB7sE,KAAK8sE,IAAM,EAEX9sE,KAAK+sE,IAAMd,GAASU,GA7KxB3sE,KAAKgtE,SAAW,EAEhBhtE,KAAK2qD,uBAAyB,EAC9B3qD,KAAKitE,oBAAsB,EAC3BjtE,KAAKktE,0BAA4B,EAGjCltE,KAAKmtE,MAAQb,GAAY,CAAC,EAAGI,GAAkBU,SAK/CptE,KAAKgmD,QAAU,EAIfhmD,KAAKqtE,YAAc,EAInBrtE,KAAK8lD,aAAe,EAKpB9lD,KAAKstE,eAAiB,EAEtBttE,KAAKutE,qBAAuB,EAC5BvtE,KAAKirD,QAAU,EAIfjrD,KAAKwtE,gBAAkB,EAIvBxtE,KAAKytE,gBAAkB,EACvBztE,KAAKsqD,cAAgB,EACrBtqD,KAAK0tE,iBAAmB,EACxB1tE,KAAKuqD,SAAW,EAMhBvqD,KAAK2tE,SAAW,EAChB3tE,KAAK4tE,SAAW,EAIhB5tE,KAAK6tE,UAAY,EACjB7tE,KAAK8tE,UAAY,EAKjB9tE,KAAK+tE,cAAgB,EAQrB/tE,KAAKguE,kBAAoB,EAQzBhuE,KAAKiuE,gBAAkB,EAKvBjuE,KAAKusD,SAAW,EAOhBvsD,KAAKkuE,mBAAqB,EAK1BluE,KAAKyoE,cAAgB,EAIrBzoE,KAAKmuE,iBAAmB,EAKxBnuE,KAAKouE,gBAAkB,EAGvBpuE,KAAKmmD,QAAU,IAAImkB,GACnBtqE,KAAK2tD,SAAW0e,GAAU,GAM1BrsE,KAAKmsD,QAAU,EACfnsD,KAAKqsD,SAAW,EAChBrsD,KAAKosD,SAAW,EAMhBpsD,KAAKquE,SAAW,KAChBruE,KAAKsuE,UAAY,EAIjBtuE,KAAKuuE,SAAWhC,GAAQ,GAExBvsE,KAAKwuE,YAAcjC,GAAQ,GAE3BvsE,KAAKy5D,cAAgB,EAErBz5D,KAAKyuE,OAASlC,GAAQ,KAEtBvsE,KAAK0uE,WAAanC,GAAQ3E,GAAOD,QAKjC3nE,KAAK2uE,aAAc,EAInB3uE,KAAK4uE,UAAY,IAAIvnE,MAAM,GAE3BrH,KAAK6uE,UAAY,IAAIxnE,MAAM,EAAIqlE,GAAkBoC,IAAM,GAEvD9uE,KAAK+uE,MAAQ5C,GAAW,GACxBnsE,KAAKgvE,aAAe,EAIpBhvE,KAAKwmD,UAAY8lB,GAAY,CAAC,EAAG,EAAG,GAAI5pB,EAAQmM,UAChD7uD,KAAK8mD,WAAaulB,GAAU,IA4B5BrsE,KAAKivE,OAAS,IAAI5nE,MAAMqlE,GAAkBwC,gBAE1ClvE,KAAKmvE,MAAQ,EACbnvE,KAAKovE,MAAQ,EACbpvE,KAAKqvE,eAAiB,EAMtBrvE,KAAKs7D,SAAW,EAIhBt7D,KAAKq7D,QAAU,EAGfr7D,KAAKmjE,cAAgB,IAAI6H,GAOzBhrE,KAAK0+D,SAAW2N,GAAU3pB,EAAQoM,QAClC9uD,KAAKq+D,SAAWgO,GAAU3pB,EAAQoM,QAClC9uD,KAAK+8D,KAAOuP,GAAY,CAAC,EAAG5pB,EAAQoM,SACpC9uD,KAAKg9D,KAAOsP,GAAY,CAAC,EAAG5pB,EAAQoM,SACpC9uD,KAAK84D,MAAQwT,GAAY,CAAC,EAAG5pB,EAAQoM,SACrC9uD,KAAKg5D,MAAQsT,GAAY,CAAC,EAAG5pB,EAAQoM,SACrC9uD,KAAK64D,MAAQ,KACb74D,KAAK88D,MAAQ,KACb98D,KAAKwjE,MAAQ,EAIbxjE,KAAKgoD,IAAM,IAAI3gD,MAAM,GACrBrH,KAAKioD,GAAK,IAAI5gD,MAAM,GAKpBrH,KAAK+rD,SAAWsgB,GAAU,GAM1BrsE,KAAKgqD,YAAcsiB,GAAY,CAAC,EAAG,IAInCtsE,KAAK40D,iBAAmByX,GAAU,GAKlCrsE,KAAKs2D,MAAQ+V,GAAU3pB,EAAQ+E,SAC/BznD,KAAKy2D,MAAQ4V,GAAU3pB,EAAQgF,SAC/B1nD,KAAKg3D,KAAOuV,GAAQ7pB,EAAQ+E,SAC5BznD,KAAKo4D,KAAOmU,GAAQ7pB,EAAQ+E,SAC5BznD,KAAKo3D,KAAOmV,GAAQ7pB,EAAQgF,SAC5B1nD,KAAK23D,KAAO4U,GAAQ7pB,EAAQgF,SAC5B1nD,KAAKq4D,QAAU,EACfr4D,KAAK43D,QAAU,EAEf53D,KAAK48D,MAAQ4P,GAAU,CAAC9pB,EAAQoM,OAAQ,IACxC9uD,KAAK24D,QAAU6T,GAAU,CAAC9pB,EAAQoM,OAAQ,IAE1C9uD,KAAKy4D,WAAa8T,GAAQ7pB,EAAQoM,QAClC9uD,KAAKg6D,WAAauS,GAAQ7pB,EAAQoM,QAClC9uD,KAAKi6D,YAAcoS,GAAU3pB,EAAQoM,QACrC9uD,KAAKsiE,SAAW+J,GAAU3pB,EAAQoM,QAClC9uD,KAAKuiE,SAAW8J,GAAU3pB,EAAQoM,QAClC9uD,KAAKsvE,gBAAkB,EACvBtvE,KAAKuvE,gBAAkB,EAGvBvvE,KAAKisD,GAAKogB,GAAU,GACpBrsE,KAAKwvE,eAAiB,EACtBxvE,KAAKyvE,eAAiB,EACtBzvE,KAAKkjE,kBAAoB,EAKzBljE,KAAK+4D,cAAgBwT,GAAQ,GAK7BvsE,KAAK+tD,MAAQ,IAAIwd,GAKjBvrE,KAAK0vE,eAAiB,IAAI1D,GAM1BhsE,KAAK8pD,IAAM,KAEX9pD,KAAK+3D,IAAM,KAEX/3D,KAAK2vE,YAAc,EACnB3vE,KAAK4vE,cAAgB,EAGrB5vE,KAAKklE,mBAAoB,EACzBllE,KAAKilE,gBAAiB,EACtBjlE,KAAK6vE,gBAAiB,EACtB7vE,KAAK8vE,WAAa,EAClB9vE,KAAK+vE,UAAY,EACjB/vE,KAAKgwE,eAAiB,EAEtBhwE,KAAKiwE,OAAS,KAKdjwE,KAAKkwE,iBAAmB,EAIxBlwE,KAAKmwE,YAAc,EAGnBnwE,KAAKwqD,wBAA0BgiB,GAAU,CAAC,GAAI,IAI9CxsE,KAAK0qD,uBAAyB8hB,GAAU,CAAC,GAAI,IAI7CxsE,KAAK0tD,MAAQ,KACb1tD,KAAKowE,IAAM,KAEXpwE,KAAKqwE,mBAAqB,EAG1BrwE,KAAKswE,YAAc,KACnBtwE,KAAKuwE,YAAc,KAGnBvwE,KAAKkuD,eAAiB,KAEtB,IAAK,IAAI9sD,EAAI,EAAGA,EAAIpB,KAAKioD,GAAGtpD,OAAQyC,IAChCpB,KAAKioD,GAAG7mD,GAAK,IAAI0mD,EAErB,IAAS1mD,EAAI,EAAGA,EAAIpB,KAAKgoD,IAAIrpD,OAAQyC,IACjCpB,KAAKgoD,IAAI5mD,GAAK,IAAI0mD,EAEtB,IAAS1mD,EAAI,EAAGA,EAAIpB,KAAKivE,OAAOtwE,OAAQyC,IACpCpB,KAAKivE,OAAO7tE,GAAK,IAAIwrE,EAlX7BF,GAWkBU,OAAU,KAAW1qB,EAAQ+L,SAAW/L,EAAQiM,UAClE+d,GAAkBwC,eAAiB,IACnCxC,GAAkB8D,qBAAuB,KACzC9D,GAAkB+D,qBAAuB,KACzC/D,GAAkBoC,IAAM,IAwWxB,IAAA4B,GAAiBhE,GC3XbiE,GAAYhvB,EAAOQ,UAYvB,SAAS2H,KAIL9pD,KAAK+pD,UAAY,EAKjB/pD,KAAKiqD,eAAiB,EAItBjqD,KAAKkqD,OAAS,EAIdlqD,KAAKmqD,YAAc,EAInBnqD,KAAKwjE,MAAQ,EAIbxjE,KAAKP,MAAQ,EAIbO,KAAK8jD,EAAI6sB,GAAUjuB,EAAQ+E,SAI3BznD,KAAKyjD,EAAIktB,GAAUjuB,EAAQgF,SAI3B1nD,KAAK8qE,OAAS6F,GAAUjuB,EAAQuM,QAIhCjvD,KAAK+qE,OAAS4F,GAAUjuB,EAAQwM,QAIhClvD,KAAK81D,KAAO6a,GAAUjuB,EAAQoM,QAI9B9uD,KAAK61D,KAAO8a,GAAUjuB,EAAQoM,QAI9B9uD,KAAK6zD,MAAQ8c,GAAUjuB,EAAQwI,QAAU,GAG7C,IAAA0lB,GAAiB9mB,GCYb+mB,GAASlvB,EAAOE,OAKhBivB,GAASnvB,EAAOM,OAgCpB,SAAS8uB,KAIL,IAAIC,EAAW,MAMXC,GAJaF,GAAaG,WAIT,KAKjBC,GADgBJ,GAAaK,cACDL,GAAaI,2BAIzCE,EAA8BN,GAAaM,4BAO3CC,GAHyBP,GAAaQ,uBAG7B,CACT,CAAC,eAAmB,kBAAmB,gBACnC,kBAAmB,iBAAmB,mBACrC,eAAkB,mBAAoB,iBACtC,kBAAmB,gBAAkB,iBACrC,iBAAmB,iBAAkB,gBACtC,iBAAkB,iBAAmB,gBACrC,gBAAkB,gBAAkB,iBACxC,CAAC,gBAAmB,kBAAmB,gBACnC,kBAAmB,iBAAmB,kBACrC,gBAAkB,iBAAmB,iBACrC,iBAAkB,gBAAkB,kBACpC,iBAAmB,iBAAkB,gBACtC,kBAAmB,iBAAmB,gBACtC,gBAAkB,iBAAmB,iBACzC,CAAC,iBAAmB,kBAAmB,gBACnC,kBAAmB,iBAAmB,iBACtC,gBAAkB,kBAAmB,iBACpC,iBAAkB,gBAAkB,iBACrC,iBAAmB,gBAAkB,gBACrC,iBAAmB,iBAAmB,gBACtC,gBAAkB,gBAAmB,iBACzC,CAAC,iBAAmB,kBAAmB,gBACnC,iBAAmB,iBAAmB,eACtC,iBAAmB,gBAAmB,iBACrC,iBAAmB,gBAAkB,iBACrC,iBAAmB,gBAAkB,gBACtC,iBAAmB,cAAkB,gBACrC,gBAAkB,iBAAmB,iBACzC,CAAC,iBAAmB,kBAAmB,eACnC,iBAAmB,gBAAkB,gBACrC,iBAAmB,iBAAmB,gBACtC,iBAAmB,gBAAmB,iBACrC,gBAAmB,gBAAkB,gBACtC,gBAAkB,iBAAmB,iBACpC,eAAkB,iBAAmB,gBAC1C,CAAC,gBAAmB,iBAAmB,gBACnC,iBAAmB,iBAAmB,eACrC,gBAAkB,gBAAkB,iBACpC,iBAAmB,gBAAkB,gBACtC,gBAAkB,gBAAkB,gBACpC,iBAAmB,gBAAkB,iBACpC,gBAAkB,gBAAkB,iBACzC,CAAC,iBAAmB,kBAAmB,gBACnC,gBAAkB,gBAAmB,gBACrC,gBAAkB,iBAAmB,gBACrC,gBAAkB,gBAAmB,iBACpC,gBAAkB,eAAkB,iBACpC,gBAAkB,gBAAkB,iBACpC,eAAkB,iBAAmB,iBAC1C,CAAC,iBAAmB,iBAAmB,iBAClC,iBAAmB,iBAAmB,gBACvC,gBAAkB,eAAkB,gBACpC,gBAAkB,iBAAmB,iBACpC,iBAAmB,gBAAkB,iBACrC,gBAAkB,gBAAkB,iBACpC,gBAAkB,iBAAmB,iBAC1C,CAAC,iBAAmB,gBAAmB,iBAClC,iBAAmB,iBAAmB,gBACvC,iBAAmB,iBAAmB,gBACtC,gBAAkB,gBAAkB,iBACnC,iBAAmB,iBAAmB,iBACtC,iBAAmB,aAAkB,gBACtC,eAAkB,gBAAmB,mBAEzCC,EAAW,CACX,CAAC,iBAAmB,kBAAmB,iBACnC,gBAAkB,iBACtB,CAAC,iBAAmB,kBAAmB,iBACnC,eAAkB,iBACtB,CAAC,iBAAmB,kBAAmB,iBACnC,gBAAkB,iBACtB,CAAC,iBAAmB,kBAAmB,iBACnC,gBAAkB,iBACtB,CAAC,iBAAmB,kBAAmB,iBACnC,gBAAkB,iBACtB,CAAC,iBAAmB,kBAAmB,iBACnC,gBAAkB,iBACtB,CAAC,iBAAmB,kBAAmB,iBACnC,gBAAkB,iBACtB,CAAC,iBAAmB,iBAAmB,iBACnC,gBAAkB,iBACtB,CAAC,iBAAmB,kBAAmB,iBACnC,gBAAkB,kBAS1B,SAASC,EAAWx+D,EAAOy+D,EAAU1+D,EAAQ2+D,EAAWC,EAAUC,GAE9D,KAAuB,GAAfD,KAEJ5+D,EAAO2+D,GAAa,MAAQ1+D,EAAMy+D,EAAW,GAAKG,EAAO,GACnD7+D,EAAO2+D,EAAY,GAAKE,EAAO,GAAK5+D,EAAMy+D,EAAW,GACrDG,EAAO,GAAK7+D,EAAO2+D,EAAY,GAAKE,EAAO,GAC3C5+D,EAAMy+D,EAAW,GAAKG,EAAO,GAAK7+D,EAAO2+D,EAAY,GACrDE,EAAO,GAAK5+D,EAAMy+D,EAAW,GAAKG,EAAO,GACzC7+D,EAAO2+D,EAAY,GAAKE,EAAO,GAAK5+D,EAAMy+D,EAAW,GACrDG,EAAO,GAAK7+D,EAAO2+D,EAAY,GAAKE,EAAO,GAC3C5+D,EAAMy+D,EAAW,GAAKG,EAAO,IAAM7+D,EAAO2+D,EAAY,GACtDE,EAAO,IAAM5+D,EAAMy+D,EAAW,GAAKG,EAAO,IAC1C7+D,EAAO2+D,EAAY,GAAKE,EAAO,IAAM5+D,EAAMy+D,EAAW,GACtDG,EAAO,IAAM7+D,EAAO2+D,EAAY,GAAKE,EAAO,IAC5C5+D,EAAMy+D,EAAW,GAAKG,EAAO,IAAM7+D,EAAO2+D,EAAY,GACtDE,EAAO,IAAM5+D,EAAMy+D,EAAW,GAAKG,EAAO,IAC1C7+D,EAAO2+D,EAAY,IAAME,EAAO,IAChC5+D,EAAMy+D,EAAW,IAAMG,EAAO,MAClCF,IACAD,EAMV,SAASI,EAAa7+D,EAAOy+D,EAAU1+D,EAAQ2+D,EAAWC,EAAUC,GAEhE,KAAuB,GAAfD,KACJ5+D,EAAO2+D,GAAa1+D,EAAMy+D,EAAW,GAAKG,EAAO,GAC3C7+D,EAAO2+D,EAAY,GAAKE,EAAO,GAAK5+D,EAAMy+D,EAAW,GACrDG,EAAO,GAAK7+D,EAAO2+D,EAAY,GAAKE,EAAO,GAC3C5+D,EAAMy+D,EAAW,GAAKG,EAAO,KACjCF,IACAD,EAQV,SAASK,EAAqBC,EAAQC,GAElC,IAAK,IAAI7wE,EAAI,EAAGA,EAAI8wE,UAAW9wE,IAC3B4wE,EAAOG,UAAU/wE,GAAK4wE,EAAOI,SAAShxE,GAAK4wE,EAAOK,QAAQjxE,GAAK4wE,EAAOM,UAAUlxE,GAAK4wE,EAAOO,SAASnxE,GAAK4wE,EAAOQ,QAAQpxE,GAAK,EAElI,OAAQ,EAAK6wE,GACT,KAAK,KACDD,EAAOS,SAAW,EAClB,MACJ,KAAK,MACDT,EAAOS,SAAW,EAClB,MACJ,KAAK,KACDT,EAAOS,SAAW,EAClB,MACJ,KAAK,KACDT,EAAOS,SAAW,EAClB,MACJ,KAAK,MACDT,EAAOS,SAAW,EAClB,MACJ,KAAK,KACDT,EAAOS,SAAW,EAClB,MACJ,KAAK,KACDT,EAAOS,SAAW,EAClB,MACJ,KAAK,MACDT,EAAOS,SAAW,EAClB,MACJ,KAAK,IACDT,EAAOS,SAAW,EAClB,MACJ,QACI,OAAOC,yBAYf,OATAV,EAAOW,aAAe,GAAMV,EAAad,EACnCE,EAA8B,GAAKA,EAEzCW,EAAOY,KAAO,EACdZ,EAAOa,KAAO,EACdb,EAAOc,QAAU,EAEjBhC,GAAOiC,IAAIf,EAAOpyB,EAAG,GAEdozB,sBAuBX,SAASC,EAAKC,GACV,OAAOA,EAAIA,EA6Jf,SAASC,EAAc9rE,EAAO+rE,GAC1B,IAAIhyE,EAEAiyE,EAAQ,EACZ,IAAKjyE,EAAI,EAAGA,EAAIgyE,EAAKhyE,IACjBiyE,GAAShsE,EAAMjG,GACnB,GAAa,GAATiyE,EACA,OAAOC,wBAEX,IAAIC,EAAQ,EAAIz1E,KAAK6B,KAAK0zE,GAAS,EAAKpC,IACxC,IAAK7vE,EAAIgyE,EAAKhyE,KAAM,MACXmyE,GAASlsE,EAAMjG,KAAO,KAK/B,OAAQ4vE,EAAW5vE,EAAI2vE,GAAayC,aAlMxCxzE,KAAKyzE,iBAAmB,SAAUzB,EAAQC,GACtC,OAAIF,EAAqBC,EAAQC,IAAee,sBACrCN,0BAGXV,EAAO0B,OAASxB,UAChBF,EAAO2B,OAASzB,UAChBF,EAAO4B,MAAQ1B,UACfF,EAAO6B,MAAQ3B,UACfF,EAAO8B,KAAO5B,UACdF,EAAO+B,KAAO7B,UAEdpB,GAAOv1C,KAAKy2C,EAAOgC,EAAG,GAEfhB,wBAUXhzE,KAAKi0E,eAAiB,SAAUjC,EAAQkC,EAAcC,EAAiBC,EAAeC,EAAkB7P,EACxEC,GAC5B,IAAI6P,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EAEJ,GAAmB,GAAfpQ,EACA,OAAOqQ,iBAKX,OAHAD,EAAe,EACfF,EAAelQ,EAEPC,GACJ,KAAK,EACD2P,EAAgBF,EAChBG,EAAmBF,EACnB,MACJ,KAAK,EACD,MACJ,QACI,OAAOW,oBAef,IAZItQ,EAAc0N,WACdrB,GAAO3pB,UAAUgtB,EAAcC,EAAiBnC,EAAOG,UACnDD,UAAW1N,GACfqM,GAAO3pB,UAAUktB,EAAeC,EAAkBrC,EAAOM,UACrDJ,UAAW1N,KAEfqM,GAAO3pB,UAAUgtB,EAAcC,EAAiBnC,EAAOG,UACnDD,UAAWA,WACfrB,GAAO3pB,UAAUktB,EAAeC,EAAkBrC,EAAOM,UACrDJ,UAAWA,YAGZwC,EAAe,GAAG,CACrBC,EAAaD,EAAe1C,EAAOW,aAAeX,EAAOc,QAAUd,EAAOW,aACxEX,EAAOc,QACH4B,EACFE,EAAe1C,WACfoC,EAAUtC,EAAO0B,OAASkB,EAC1BL,EAAcvC,EAAOG,UACrBqC,EAAWxC,EAAO2B,OAASiB,EAC3BH,EAAezC,EAAOM,UAClBqC,EAAazC,UAAY0C,IACzBD,EAAazC,UAAY0C,KAE7BN,EAAUH,EAAkBS,EAC5BL,EAAcL,EACdM,EAAWH,EAAmBO,EAC9BH,EAAeL,GAGnB3C,EAAW8C,EAAaD,EAAStC,EAAOI,SAAUJ,EAAO4B,MACnD5B,EAAOc,QAAS6B,EAAYrD,EAAOU,EAAOS,WAChDhB,EAAWgD,EAAcD,EAAUxC,EAAOO,SAAUP,EAAO6B,MACrD7B,EAAOc,QAAS6B,EAAYrD,EAAOU,EAAOS,WAEhDX,EAAaE,EAAOI,SAAUJ,EAAO4B,MAAQ5B,EAAOc,QAChDd,EAAOK,QAASL,EAAO8B,KAAO9B,EAAOc,QAAS6B,EAC9CnD,EAASQ,EAAOS,WACpBX,EAAaE,EAAOO,SAAUP,EAAO6B,MAAQ7B,EAAOc,QAChDd,EAAOQ,QAASR,EAAO+B,KAAO/B,EAAOc,QAAS6B,EAC9CnD,EAASQ,EAAOS,WAEpB6B,EAAUtC,EAAO8B,KAAO9B,EAAOc,QAE/ByB,EAAcvC,EAAOK,QACrBmC,EAAWxC,EAAO+B,KAAO/B,EAAOc,QAChC2B,EAAezC,EAAOQ,QAGtB,IADA,IAAIpxE,EAAIuzE,EAAa,EACL,GAARvzE,KACJ4wE,EAAOY,MAAQK,EAAKsB,EAAYD,MAChCtC,EAAOa,MAAQI,EAAKwB,EAAaD,MAGrC,IADApzE,EAAIuzE,EAAa,EACD,GAARvzE,KACJ4wE,EAAOY,MAAQK,EAAKsB,EAAYD,EAAU,IACpCrB,EAAKsB,EAAYD,EAAU,IAC3BrB,EAAKsB,EAAYD,EAAU,IAC3BrB,EAAKsB,EAAYD,EAAU,IAC3BrB,EAAKsB,EAAYD,EAAU,IAC3BrB,EAAKsB,EAAYD,EAAU,IAC3BrB,EAAKsB,EAAYD,EAAU,IAC3BrB,EAAKsB,EAAYD,EAAU,IACjCA,GAAW,EACXtC,EAAOa,MAAQI,EAAKwB,EAAaD,EAAW,IACtCvB,EAAKwB,EAAaD,EAAW,IAC7BvB,EAAKwB,EAAaD,EAAW,IAC7BvB,EAAKwB,EAAaD,EAAW,IAC7BvB,EAAKwB,EAAaD,EAAW,IAC7BvB,EAAKwB,EAAaD,EAAW,IAC7BvB,EAAKwB,EAAaD,EAAW,IAC7BvB,EAAKwB,EAAaD,EAAW,IACnCA,GAAY,EAMhB,GAHAE,GAAgBC,EAChBC,GAAgBD,EAChB3C,EAAOc,SAAW6B,EACd3C,EAAOc,SAAWd,EAAOW,aAAc,CAEvC,IAAIvrE,EACE,GADI2pE,GAAayC,aAEjB11E,KAAK02B,OAAOw9C,EAAOY,KAAOZ,EAAOa,MAC7Bb,EAAOc,QAAU,GAAM,OAC7BiC,EAAQ3tE,GAAO,EAAK,EAAI,EAAIA,EAC5B2tE,GAAQ/C,EAAOpyB,EAAEjhD,SACjBo2E,EAAO/C,EAAOpyB,EAAEjhD,OAAS,GAC7BqzE,EAAOpyB,EAAEm1B,KACT/C,EAAOY,KAAOZ,EAAOa,KAAO,EAE5BhC,GAAO3pB,UAAU8qB,EAAOK,QAASL,EAAOc,QACpCd,EAAOK,QAAS,EAAGH,WACvBrB,GAAO3pB,UAAU8qB,EAAOQ,QAASR,EAAOc,QACpCd,EAAOQ,QAAS,EAAGN,WACvBrB,GAAO3pB,UAAU8qB,EAAOI,SAAUJ,EAAOc,QACrCd,EAAOI,SAAU,EAAGF,WACxBrB,GAAO3pB,UAAU8qB,EAAOO,SAAUP,EAAOc,QACrCd,EAAOO,SAAU,EAAGL,WACxBF,EAAOc,QAAU,EAErB,GAAId,EAAOc,QAAUd,EAAOW,aAKxB,OAAOmC,oBAmBf,OAhBItQ,EAAc0N,WACdrB,GAAO3pB,UAAU8qB,EAAOG,UAAW3N,EAAawN,EAAOG,UACnD,EAAGD,UAAY1N,GACnBqM,GAAO3pB,UAAU8qB,EAAOM,UAAW9N,EAAawN,EAAOM,UACnD,EAAGJ,UAAY1N,GACnBqM,GAAO3pB,UAAUgtB,EAAcC,EAAiBnC,EAAOG,UACnDD,UAAY1N,EAAaA,GAC7BqM,GAAO3pB,UAAUktB,EAAeC,EAAkBrC,EAAOM,UACrDJ,UAAY1N,EAAaA,KAE7BqM,GAAO3pB,UAAUgtB,EAAcC,EAAkB3P,EAC3C0N,UAAWF,EAAOG,UAAW,EAAGD,WACtCrB,GAAO3pB,UAAUktB,EAAeC,EAAmB7P,EAC7C0N,UAAWF,EAAOM,UAAW,EAAGJ,YAGnC2C,kBAsBX70E,KAAKg1E,aAAe,SAAUhD,GAG1B,IAFA,IAAIiD,EAAS9B,EAAcnB,EAAOpyB,EAAGoyB,EAAOpyB,EAAEjhD,QAErCyC,EAAI,EAAGA,EAAI4wE,EAAOpyB,EAAEjhD,OAAQyC,IACjC4wE,EAAOgC,EAAE5yE,IAAM4wE,EAAOpyB,EAAEx+C,GACxB4wE,EAAOpyB,EAAEx+C,GAAK,EAGlB,IAASA,EAAI,EAAGA,EAAI8wE,UAAW9wE,IAC3B4wE,EAAOG,UAAU/wE,GAAK4wE,EAAOI,SAAShxE,GAAK4wE,EAAOK,QAAQjxE,GAAK4wE,EAAOM,UAAUlxE,GAAK4wE,EAAOO,SAASnxE,GAAK4wE,EAAOQ,QAAQpxE,GAAK,EAIlI,OAFA4wE,EAAOc,QAAU,EACjBd,EAAOY,KAAOZ,EAAOa,KAAO,EACrBoC,GAtbflE,GAAayC,aAAe,IAI5BzC,GAAamE,OAAS,IACtBnE,GAAauC,yBAA2B,MACxCvC,GAAa+D,oBAAsB,EACnC/D,GAAa8D,iBAAmB,EAChC9D,GAAa2B,yBAA2B,EACxC3B,GAAaiC,sBAAwB,EAErCjC,GAAaG,WAAa,GAC1BH,GAAamB,UAAYnB,GAAaG,WAEtCH,GAAaK,cAAgB,KAC7BL,GAAaI,0BAA4B,EACzCJ,GAAaM,4BAA8B,GAC3CN,GAAaQ,uBAA2BR,GAAaK,cAAgBL,GAAaI,0BAA6BJ,GAAaM,4BAA8B,EA0a1J,IAAA8D,GAAiBpE,GC7hBbqE,GAAYzzB,EAAOQ,UAEnBkzB,GAAU1zB,EAAOgH,QACrB,SAKS2sB,KACLt1E,KAAKmyE,UAAYiD,GAAmC,EAAzBD,GAAajD,WAIxClyE,KAAK0zE,OAAS,EACd1zE,KAAKoyE,SAAWgD,GAAUD,GAAa5D,uBAAyB4D,GAAajD,WAI7ElyE,KAAK4zE,MAAQ,EACb5zE,KAAKqyE,QAAU+C,GAAUD,GAAa5D,uBAAyB4D,GAAajD,WAI5ElyE,KAAK8zE,KAAO,EACZ9zE,KAAKsyE,UAAY8C,GAAmC,EAAzBD,GAAajD,WAIxClyE,KAAK2zE,OAAS,EACd3zE,KAAKuyE,SAAW6C,GAAUD,GAAa5D,uBAAyB4D,GAAajD,WAC7ElyE,KAAK6zE,MAAQ,EACb7zE,KAAKwyE,QAAU4C,GAAUD,GAAa5D,uBAAyB4D,GAAajD,WAC5ElyE,KAAK+zE,KAAO,EAKZ/zE,KAAK2yE,aAAe,EACpB3yE,KAAK8yE,QAAU,EACf9yE,KAAK4yE,KAAO,EACZ5yE,KAAK6yE,KAAO,EACZ7yE,KAAKu1E,UAAY,EACjBv1E,KAAKw+C,MAAQ,EACbx+C,KAAK4/C,EAAIy1B,GAAQ,EAAKF,GAAa3B,aAAe2B,GAAaD,QAC/Dl1E,KAAKg0E,EAAIqB,GAAQ,EAAKF,GAAa3B,aAAe2B,GAAaD,QAInE,IAAAM,GAAiBF,GC1DjB,SAASG,GAASC,GACd11E,KAAK21E,KAAOD,EAGhB,IAAAE,GAAiBH,GCMbI,GAAYl0B,EAAOQ,UAEnB2zB,GAAUn0B,EAAOgH,QAEjBotB,GAASp0B,EAAOkH,OAOpB,SAASmtB,GAAoBC,GACzB,IAAIC,EAAWD,EACfj2E,KAAKk2E,SAAWA,EACnBl2E,KAAKkuD,eAAiB,SAAStD,EAAKqB,EAAID,EAAe/qD,GACtD,IAImBk1E,EAJf3wB,EAAMoF,EAAIE,eACJsrB,EAAUP,GAAUjO,GAAOD,QACjC0O,EAAQR,GAAU,KAClBS,EAAYR,GAAQ,GACpBS,EAAY,EACZpwB,EAAUX,EAAIW,QAEdqwB,EAAK,IAAIZ,GAASW,GACtBv2E,KAAKk2E,SAASO,GAAGC,eAAe9rB,EAAK4rB,GACrCD,EAAYC,EAAGb,KAGf,IAAK,IAAI5vB,EAAK,EAAGA,EAAKP,EAAIQ,QAASD,IAAM,CAKxCowB,EAAWn2E,KAAKk2E,SAAS9sB,MAAMutB,MAAM/rB,EAAKqB,EAAIqqB,EAAWC,EACvDxwB,EAAIA,GAEFP,EAAI+E,UAAY7H,EAAQsG,eAC3BhpD,KAAKk2E,SAASU,WAAWpxB,EAAIW,QAASJ,GACtC/lD,KAAKk2E,SAAS9sB,MAAMytB,YAAYP,EAAWtqB,EAAcjG,GACvDwwB,EAAWJ,IAGd,IAAK,IAAItwB,EAAK,EAAGA,EAAKL,EAAIM,aAAcD,IAAM,CAC7C,IAAIqE,EAAQ4sB,EACR7pB,EAAW9G,EAAQC,GAAGL,GAAIF,GAE1BoH,EAASvG,YAAchE,EAAQC,YAElCuH,EAAS,EACT4sB,EAAmBtxB,EAAIuS,IAAIgf,YAAc7sB,IAEzCA,EAAS,EACT4sB,EAAmBtxB,EAAIuS,IAAIif,kBAAoB9sB,GAEhD1E,EAAIiU,cAAiB37D,KAAKsB,IAAI,GACT,GAAnB03E,GAKF92E,KAAKk2E,SAASe,gBAAgBzxB,EAAKyH,GAC/BjtD,KAAKk2E,SAASgB,WAAW1xB,EAAKyH,EAAUopB,KAM3Cr2E,KAAKk2E,SAAS9sB,MAAM+tB,UAAUvsB,EAAK3pD,EAAM8kD,GAAIF,GAAKoH,EAChDmpB,GACFp2E,KAAKk2E,SAASkB,WAAWxsB,EAAKqC,EAAUmpB,EAASC,EAAOxwB,EACtDywB,EAAUzwB,KAGb7lD,KAAKk2E,SAASmB,qBAAqB7xB,EAAKO,EAAIF,GAC5CkwB,GAAQ9oB,EAASkb,gBAAkBuI,GAAkBF,sBACrDuF,GAAQ9oB,EAASkb,gBAAkBmO,EAAUzwB,KAI/C7lD,KAAKk2E,SAASO,GAAGa,aAAa9xB,EAAK+wB,IAGrC,IAAAgB,GAAiBvB,GC3FjB,SAASwB,GAAYpE,EAAKlyE,EAAKi0D,EAAKsiB,GAChCz3E,KAAK03E,KAAOtE,EACZpzE,KAAK23E,OAASz2E,EACdlB,KAAK43E,MAAQziB,EACbn1D,KAAK63E,KAAOJ,EAGhB,IAAIK,GAAS,CAGbA,KAAc,CACV,EAAG,EACH,EAAG,GAGPA,KAAc,CACV,EAAG,EAAG,EACN,EAAG,EAAG,EACN,EAAG,EAAG,GAGVA,KAAc,CACV,EAAG,EAAG,EACN,EAAG,EAAG,EACN,EAAG,EAAG,GAGVA,KAAc,CACV,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,GAGbA,KAAc,CACV,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,GAGbA,KAAc,CACV,EAAG,EAAG,GAAI,GAAI,GAAI,GAClB,EAAG,EAAG,EAAG,GAAI,EAAG,EAChB,GAAI,EAAG,GAAI,GAAI,EAAG,EAClB,GAAI,GAAI,GAAI,GAAI,GAAI,EACpB,EAAG,EAAG,EAAG,GAAI,EAAG,EAChB,EAAG,EAAG,EAAG,EAAG,EAAG,GAGnBA,KAAc,CACV,EAAG,EAAG,EAAG,GAAI,GAAI,EACjB,EAAG,EAAG,EAAG,GAAI,EAAG,EAChB,EAAG,EAAG,EAAG,GAAI,EAAG,EAChB,GAAI,GAAI,GAAI,GAAI,GAAI,EACpB,GAAI,EAAG,EAAG,GAAI,EAAG,EACjB,GAAI,EAAG,EAAG,EAAG,EAAG,GAGpBA,KAAc,CACV,EAAG,EAAG,EAAG,GAAI,GAAI,EACjB,EAAG,EAAG,EAAG,EAAG,EAAG,EACf,EAAG,EAAG,EAAG,EAAG,EAAG,EACf,GAAI,EAAG,EAAG,GAAI,EAAG,EACjB,GAAI,EAAG,EAAG,EAAG,EAAG,EAChB,GAAI,EAAG,EAAG,EAAG,EAAG,GAGpBA,MAAe,CACX,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAC1B,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,EACzB,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,EAC3B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAC5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAG,EAC3B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAG,EAC3B,GAAI,GAAI,GAAI,GAAI,GAAI,EAAG,EAAG,EAC1B,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAGzBA,MAAe,CACX,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAC1B,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GACzB,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,EAC3B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAC5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAG,EAC3B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAG,GAC3B,GAAI,GAAI,EAAG,GAAI,GAAI,EAAG,EAAG,EACzB,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAG1BA,MAAe,CACX,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAC1B,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GACxB,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,EAC3B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAC5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAG,EAC3B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAG,EAC3B,GAAI,GAAI,GAAI,GAAI,GAAI,EAAG,EAAG,EAC1B,GAAI,GAAI,EAAG,GAAI,EAAG,EAAG,EAAG,GAG5BA,MAAe,CACX,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC1D,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC1D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC7D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC7D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAG,EAC3D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAG,EAC3D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAG,EAAG,EAC1D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAG,EAAG,EAAG,EACzD,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAG,EAAG,EAAG,EAAG,GAG5DA,MAAe,CACX,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,GAClE,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC3D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC7D,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC9D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAC7D,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAC7D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAC7D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAG,EAAG,EAC1D,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAG,EAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAG,EAAG,EAAG,EAAG,GAG5DA,MAAe,CACX,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAClE,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,EAC9D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,GACnE,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GACpE,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EACvE,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GACvE,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GACzE,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EACvE,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EACxE,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GACzE,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAC1E,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAC3E,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAAM,EAC5E,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAAM,IAAK,IAAK,IAAK,KAAM,IAAK,EAC7E,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAAM,IAAK,KAAM,IAAK,IAAK,EAC7E,GAAI,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,EAAG,GAAI,GAAI,GAAI,EAAG,EAAG,EAAG,EAAG,GAG1DA,MAAe,CACX,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAAM,GACxE,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GACtE,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GACtE,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GACvE,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GACzE,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAC1E,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAC3E,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAC3E,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAC3E,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAC3E,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAC3E,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAC3E,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAC3E,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAC3E,KAAM,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAC5E,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAGxDA,MAAe,CACX,EAAQ,GAAQ,EAAQ,GAAQ,GAAQ,GAAQ,GAAQ,GACxD,GAAQ,GAAQ,GAAQ,EAAQ,GAAQ,GAAQ,GAAQ,IAG5DA,MAAe,CACX,GAAS,GAAS,GAAS,GAAS,GAAS,GAAS,GAAQ,GAC9D,GAAQ,GAAQ,GAAQ,GAAQ,GAAQ,GAAQ,EAAQ,GAG5DA,IAAa,CACT,EAAG,EACH,EAAG,GAGPA,IAAa,CACT,EAAG,EAAG,EACN,EAAG,EAAG,EACN,EAAG,EAAG,GAGVA,IAAa,CACT,EAAG,EAAG,EACN,EAAG,EAAG,EACN,EAAG,EAAG,GAGVA,IAAa,CACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,GACT,EAAG,EAAG,EAAG,IAGbA,IAAa,CACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,GAGbA,IAAa,CACT,EAAG,EAAG,EAAG,EAAG,EAAG,GACf,EAAG,EAAG,EAAG,EAAG,EAAG,GACf,EAAG,EAAG,EAAG,GAAI,GAAI,GACjB,EAAG,EAAG,GAAI,GAAI,GAAI,GAClB,EAAG,EAAG,GAAI,GAAI,GAAI,GAClB,EAAG,GAAI,GAAI,GAAI,GAAI,IAGvBA,IAAa,CACT,EAAG,EAAG,EAAG,EAAG,EAAG,GACf,EAAG,EAAG,EAAG,GAAI,GAAI,GACjB,EAAG,EAAG,EAAG,GAAI,GAAI,GACjB,EAAG,GAAI,GAAI,GAAI,GAAI,GACnB,EAAG,EAAG,GAAI,GAAI,GAAI,GAClB,GAAI,GAAI,GAAI,GAAI,GAAI,IAGxBA,IAAa,CACT,EAAG,EAAG,EAAG,EAAG,EAAG,GACf,EAAG,EAAG,EAAG,EAAG,EAAG,GACf,EAAG,EAAG,EAAG,EAAG,EAAG,GACf,EAAG,EAAG,EAAG,EAAG,EAAG,GACf,EAAG,EAAG,EAAG,EAAG,GAAI,GAChB,EAAG,EAAG,GAAI,GAAI,GAAI,IAGtBA,KAAc,CACV,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GACxB,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GACxB,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GACzB,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAC1B,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC3B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC3B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAGhCA,KAAc,CACV,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GACtB,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,EAAG,GACvB,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GACxB,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GACzB,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC3B,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC3B,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GACzB,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,IAG9BA,KAAc,CACV,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GACvB,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GACtB,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GACtB,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GACvB,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GACxB,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAC1B,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GACzB,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAGhCA,KAAc,CACV,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GACvD,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GACxD,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GACzD,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC1D,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC1D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAGhEA,KAAc,CACV,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GACtD,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GACtD,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GACtD,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GACvD,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GACxD,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GACzD,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC3D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAGhEA,OAAgB,CACZ,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GACxD,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GACxD,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GACzD,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC1D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAGhEA,KAAc,CACV,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GACxD,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GACxD,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GACzD,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC1D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI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E,OAAU,OAAU,OAAU,OAAU,OAAU,OAAU,OAAU,OACtE,OAAU,OAAU,OAAU,OAAU,OAAU,OAAU,OAAU,OACtE,OAAU,OAAU,OAAU,OAAU,OAAU,OAAU,OAAU,OACtE,OAAU,OAAU,OAAU,OAAU,OAAU,OAAU,OAAU,OACtE,OAAU,OAAU,OAAU,OAAU,OAAU,OAAU,OAAU,OACtE,OAAU,OAAU,OAAU,OAAU,OAAU,OAAU,OAAU,OACtE,OAAU,OAAU,OAAU,OAAU,OAAU,OAAU,OAAU,OACtE,OAAU,OAAU,OAAU,OAAU,OAAU,OAAU,QAAU,OACtE,OAAU,OAAU,OAAU,OAAU,OAAU,OAAU,OAAU,OACtE,OAAU,OAAU,OAAU,OAAU,OAAU,OAAU,QAAU,OACtE,OAAU,OAAU,OAAU,OAAU,OAAU,OAAU,OAAU,OACtE,OAAU,OAAU,OAAU,OAAU,OAAU,QAAU,QAAU,OACtE,OAAU,OAAU,OAAU,OAAU,OAAU,OAAU,OAAU,OACtE,OAAU,OAAU,OAAU,OAAU,QAAU,QAAU,QAAU,OACtE,OAAU,OAAU,OAAU,OAAU,OAAU,OAAU,OAAU,OACtE,OAAU,OAAU,OAAU,QAAU,OAAU,QAAU,OAAU,OACtE,OAAU,OAAU,OAAU,OAAU,OAAU,OAAU,OAAU,OACtE,OAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OACtE,OAAU,OAAU,OAAU,OAAU,OAAU,OAAU,OAAU,QACtE,QAAU,QAAU,QAAU,QAAU,QAAU,OAAU,QAAU,OACtE,OAAU,OAAU,OAAU,OAAU,OAAU,OAAU,OAAU,OACtE,OAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OACtE,OAAU,OAAU,OAAU,OAAU,OAAU,OAAU,QAAU,QACtE,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OACtE,OAAU,OAAU,OAAU,OAAU,QAAU,QAAU,OAAU,QACtE,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OACtE,OAAU,OAAU,OAAU,OAAU,OAAU,OAAU,OAAU,OACtE,OAAU,OAAU,OAAU,OAAU,OAAU,OAAU,OAAU,QAU1ErC,GAAOsC,QAAU,CACb,MAAU,OAAU,OACpB,OAAU,OAAU,OACpB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","sources":["../node_modules/automation-events/build/es5/bundle.js","../node_modules/broker-factory/src/guards/message-port.ts","../node_modules/broker-factory/src/helpers/port-map.ts","../node_modules/broker-factory/src/module.ts","../node_modules/broker-factory/src/helpers/extend-broker-implementation.ts","../node_modules/dashify/index.js","../node_modules/deepmerge/dist/cjs.js","../node_modules/extendable-media-recorder-wav-encoder-broker/src/module.ts","../node_modules/extendable-media-recorder-wav-encoder/src/module.ts","../node_modules/extendable-media-recorder-wav-encoder/src/worker/worker.ts","../node_modules/media-encoder-host-broker/src/module.ts","../node_modules/media-encoder-host/src/module.ts","../node_modules/media-encoder-host/src/worker/worker.ts","../node_modules/extendable-media-recorder/src/factories/blob-event-factory.ts","../node_modules/extendable-media-recorder/src/factories/invalid-modification-error.ts","../node_modules/extendable-media-recorder/src/factories/not-supported-error.ts","../node_modules/rxjs-interop/source/symbols.ts","../node_modules/rxjs-interop/source/to-observer.ts","../node_modules/subscribable-things/src/factories/animation-frame.ts","../node_modules/subscribable-things/src/functions/emit-not-supported-error.ts","../node_modules/subscribable-things/src/module.ts","../node_modules/subscribable-things/src/factories/window.ts","../node_modules/subscribable-things/src/factories/wrap-subscribe-function.ts","../node_modules/rxjs-interop/source/patch.ts","../node_modules/subscribable-things/src/factories/mutations.ts","../node_modules/subscribable-things/src/factories/map-subscribable-thing.ts","../node_modules/subscribable-things/src/factories/prepend-subscribable-thing.ts","../node_modules/subscribable-things/src/factories/attribute.ts","../node_modules/subscribable-things/src/factories/geolocation.ts","../node_modules/subscribable-things/src/factories/intersections.ts","../node_modules/subscribable-things/src/factories/media-devices.ts","../node_modules/subscribable-things/src/factories/media-query-match.ts","../node_modules/subscribable-things/src/factories/metrics.ts","../node_modules/subscribable-things/src/factories/midi-inputs.ts","../node_modules/subscribable-things/src/factories/midi-outputs.ts","../node_modules/subscribable-things/src/factories/on.ts","../node_modules/recorder-audio-worklet/node_modules/worker-factory/src/helpers/error-renderers.ts","../node_modules/recorder-audio-worklet/src/module.ts","../node_modules/recorder-audio-worklet/node_modules/worker-factory/src/helpers/extend-worker-implementation.ts","../node_modules/recorder-audio-worklet/src/factories/add-recorder-audio-worklet-module.ts","../node_modules/recorder-audio-worklet/src/worklet/worklet.ts","../node_modules/recorder-audio-worklet/src/factories/recorder-audio-worklet-node-factory.ts","../node_modules/recorder-audio-worklet/src/factories/listener.ts","../node_modules/recorder-audio-worklet/src/factories/post-message-factory.ts","../node_modules/recorder-audio-worklet/src/functions/validate-state.ts","../node_modules/standardized-audio-context/src/factories/abort-error.ts","../node_modules/standardized-audio-context/src/globals.ts","../node_modules/standardized-audio-context/src/helpers/is-constructible.ts","../node_modules/standardized-audio-context/src/helpers/split-import-statements.ts","../node_modules/standardized-audio-context/src/factories/add-audio-worklet-module.ts","../node_modules/standardized-audio-context/src/helpers/get-value-for-key.ts","../node_modules/standardized-audio-context/src/helpers/pick-element-from-set.ts","../node_modules/standardized-audio-context/src/helpers/delete-passive-input-connection-to-audio-node.ts","../node_modules/standardized-audio-context/src/helpers/get-event-listeners-of-audio-node.ts","../node_modules/standardized-audio-context/src/helpers/set-internal-state-to-active.ts","../node_modules/standardized-audio-context/src/guards/audio-worklet-node.ts","../node_modules/standardized-audio-context/src/helpers/set-internal-state-to-passive.ts","../node_modules/standardized-audio-context/src/helpers/set-internal-state-to-passive-when-necessary.ts","../node_modules/standardized-audio-context/src/factories/analyser-node-constructor.ts","../node_modules/standardized-audio-context/src/helpers/is-owned-by-context.ts","../node_modules/standardized-audio-context/src/helpers/test-audio-buffer-copy-channel-methods-out-of-bounds-support.ts","../node_modules/standardized-audio-context/src/factories/index-size-error.ts","../node_modules/standardized-audio-context/src/helpers/wrap-audio-buffer-get-channel-data-method.ts","../node_modules/standardized-audio-context/src/factories/audio-buffer-constructor.ts","../node_modules/standardized-audio-context/src/constants.ts","../node_modules/standardized-audio-context/src/helpers/is-active-audio-node.ts","../node_modules/standardized-audio-context/src/factories/audio-buffer-source-node-constructor.ts","../node_modules/standardized-audio-context/src/helpers/get-audio-node-connections.ts","../node_modules/standardized-audio-context/src/helpers/get-audio-param-connections.ts","../node_modules/standardized-audio-context/src/helpers/deactivate-active-audio-node-input-connections.ts","../node_modules/standardized-audio-context/src/guards/audio-buffer-source-node.ts","../node_modules/standardized-audio-context/src/guards/biquad-filter-node.ts","../node_modules/standardized-audio-context/src/guards/constant-source-node.ts","../node_modules/standardized-audio-context/src/guards/gain-node.ts","../node_modules/standardized-audio-context/src/guards/oscillator-node.ts","../node_modules/standardized-audio-context/src/guards/stereo-panner-node.ts","../node_modules/standardized-audio-context/src/helpers/deactivate-audio-graph.ts","../node_modules/standardized-audio-context/src/helpers/is-valid-latency-hint.ts","../node_modules/standardized-audio-context/src/guards/audio-node.ts","../node_modules/standardized-audio-context/src/guards/audio-node-output-connection.ts","../node_modules/standardized-audio-context/src/helpers/insert-element-in-set.ts","../node_modules/standardized-audio-context/src/helpers/add-active-input-connection-to-audio-param.ts","../node_modules/standardized-audio-context/src/helpers/add-passive-input-connection-to-audio-param.ts","../node_modules/standardized-audio-context/src/guards/native-audio-node-faker.ts","../node_modules/standardized-audio-context/src/helpers/connect-native-audio-node-to-native-audio-node.ts","../node_modules/standardized-audio-context/src/helpers/delete-active-input-connection.ts","../node_modules/standardized-audio-context/src/helpers/delete-event-listeners-of-audio-node.ts","../node_modules/standardized-audio-context/src/helpers/delete-passive-input-connection-to-audio-param.ts","../node_modules/standardized-audio-context/src/helpers/disconnect-native-audio-node-from-native-audio-node.ts","../node_modules/standardized-audio-context/src/helpers/get-native-audio-node.ts","../node_modules/standardized-audio-context/src/helpers/get-native-audio-param.ts","../node_modules/standardized-audio-context/src/helpers/is-part-of-a-cycle.ts","../node_modules/standardized-audio-context/src/helpers/is-passive-audio-node.ts","../node_modules/standardized-audio-context/src/helpers/test-audio-node-disconnect-method-support.ts","../node_modules/standardized-audio-context/src/helpers/visit-each-audio-node-once.ts","../node_modules/standardized-audio-context/src/guards/native-audio-node.ts","../node_modules/standardized-audio-context/src/helpers/wrap-audio-node-disconnect-method.ts","../node_modules/standardized-audio-context/src/factories/audio-node-constructor.ts","../node_modules/standardized-audio-context/src/helpers/delete-active-input-connection-to-audio-param.ts","../node_modules/standardized-audio-context/src/read-only-map.ts","../node_modules/standardized-audio-context/src/factories/audio-worklet-node-constructor.ts","../node_modules/standardized-audio-context/src/helpers/copy-from-channel.ts","../node_modules/standardized-audio-context/src/helpers/copy-to-channel.ts","../node_modules/standardized-audio-context/src/helpers/create-nested-arrays.ts","../node_modules/standardized-audio-context/src/factories/audio-worklet-node-renderer-factory.ts","../node_modules/standardized-audio-context/src/helpers/get-audio-worklet-processor.ts","../node_modules/standardized-audio-context/src/factories/biquad-filter-node-constructor.ts","../node_modules/standardized-audio-context/src/factories/channel-merger-node-constructor.ts","../node_modules/standardized-audio-context/src/factories/channel-splitter-node-constructor.ts","../node_modules/standardized-audio-context/src/factories/constant-source-node-constructor.ts","../node_modules/standardized-audio-context/src/factories/convolver-node-constructor.ts","../node_modules/standardized-audio-context/src/helpers/detach-array-buffer.ts","../node_modules/standardized-audio-context/src/factories/delay-node-constructor.ts","../node_modules/standardized-audio-context/src/factories/disconnect-multiple-outputs.ts","../node_modules/standardized-audio-context/src/factories/dynamics-compressor-node-constructor.ts","../node_modules/standardized-audio-context/src/factories/gain-node-constructor.ts","../node_modules/standardized-audio-context/src/factories/invalid-state-error.ts","../node_modules/standardized-audio-context/src/factories/invalid-access-error.ts","../node_modules/standardized-audio-context/src/factories/iir-filter-node-constructor.ts","../node_modules/standardized-audio-context/src/helpers/filter-buffer.ts","../node_modules/standardized-audio-context/src/factories/media-stream-audio-destination-node-constructor.ts","../node_modules/standardized-audio-context/src/helpers/test-promise-support.ts","../node_modules/standardized-audio-context/src/factories/minimal-offline-audio-context-constructor.ts","../node_modules/standardized-audio-context/src/helpers/assign-native-audio-node-option.ts","../node_modules/standardized-audio-context/src/helpers/assign-native-audio-node-options.ts","../node_modules/standardized-audio-context/src/helpers/test-analyser-node-get-float-time-domain-data-method-support.ts","../node_modules/standardized-audio-context/src/helpers/assign-native-audio-node-audio-param-value.ts","../node_modules/standardized-audio-context/src/helpers/wrap-audio-scheduled-source-node-start-method-negative-parameters.ts","../node_modules/standardized-audio-context/src/helpers/wrap-audio-scheduled-source-node-stop-method-negative-parameters.ts","../node_modules/standardized-audio-context/src/helpers/compute-buffer-size.ts","../node_modules/standardized-audio-context/src/helpers/create-audio-worklet-processor-promise.ts","../node_modules/standardized-audio-context/src/helpers/clone-audio-worklet-node-options.ts","../node_modules/standardized-audio-context/src/factories/native-biquad-filter-node.ts","../node_modules/standardized-audio-context/src/factories/native-channel-splitter-node.ts","../node_modules/standardized-audio-context/src/helpers/wrap-channel-splitter-node.ts","../node_modules/standardized-audio-context/src/helpers/intercept-connections.ts","../node_modules/standardized-audio-context/src/factories/native-delay-node.ts","../node_modules/standardized-audio-context/src/factories/native-gain-node.ts","../node_modules/standardized-audio-context/src/factories/native-iir-filter-node-faker-factory.ts","../node_modules/standardized-audio-context/src/factories/native-script-processor-node.ts","../node_modules/standardized-audio-context/src/factories/not-supported-error.ts","../node_modules/standardized-audio-context/src/factories/offline-audio-context-constructor.ts","../node_modules/standardized-audio-context/src/factories/oscillator-node-constructor.ts","../node_modules/standardized-audio-context/src/factories/panner-node-constructor.ts","../node_modules/standardized-audio-context/src/factories/periodic-wave-constructor.ts","../node_modules/standardized-audio-context/src/factories/stereo-panner-node-constructor.ts","../node_modules/standardized-audio-context/src/factories/unknown-error.ts","../node_modules/standardized-audio-context/src/factories/wave-shaper-node-constructor.ts","../node_modules/standardized-audio-context/src/helpers/get-first-sample.ts","../node_modules/standardized-audio-context/src/helpers/is-dc-curve.ts","../node_modules/standardized-audio-context/src/helpers/overwrite-accessors.ts","../node_modules/standardized-audio-context/src/helpers/set-value-at-time-until-possible.ts","../node_modules/standardized-audio-context/src/helpers/test-audio-scheduled-source-node-start-method-negative-parameters-support.ts","../node_modules/standardized-audio-context/src/helpers/test-audio-scheduled-source-node-stop-method-consecutive-calls-support.ts","../node_modules/standardized-audio-context/src/helpers/test-audio-scheduled-source-node-stop-method-negative-parameters-support.ts","../node_modules/standardized-audio-context/src/helpers/wrap-audio-scheduled-source-node-stop-method-consecutive-calls.ts","../node_modules/standardized-audio-context/src/helpers/wrap-event-listener.ts","../node_modules/standardized-audio-context/src/module.ts","../node_modules/standardized-audio-context/src/factories/add-active-input-connection-to-audio-node.ts","../node_modules/standardized-audio-context/src/factories/add-passive-input-connection-to-audio-node.ts","../node_modules/standardized-audio-context/src/factories/delete-active-input-connection-to-audio-node.ts","../node_modules/standardized-audio-context/src/factories/get-audio-node-tail-time.ts","../node_modules/standardized-audio-context/src/factories/cache-test-result.ts","../node_modules/standardized-audio-context/src/factories/window.ts","../node_modules/standardized-audio-context/src/factories/native-analyser-node-factory.ts","../node_modules/standardized-audio-context/src/helpers/wrap-analyser-node-get-float-time-domain-data-method.ts","../node_modules/standardized-audio-context/src/factories/get-audio-node-renderer.ts","../node_modules/standardized-audio-context/src/factories/render-inputs-of-audio-node.ts","../node_modules/standardized-audio-context/src/factories/analyser-node-renderer-factory.ts","../node_modules/standardized-audio-context/src/factories/get-native-context.ts","../node_modules/standardized-audio-context/src/factories/native-offline-audio-context-constructor.ts","../node_modules/standardized-audio-context/src/factories/is-native-offline-audio-context.ts","../node_modules/standardized-audio-context/src/factories/event-target-constructor.ts","../node_modules/standardized-audio-context/src/factories/native-audio-context-constructor.ts","../node_modules/standardized-audio-context/src/factories/is-native-audio-context.ts","../node_modules/standardized-audio-context/src/factories/is-native-audio-node.ts","../node_modules/standardized-audio-context/src/factories/is-native-audio-param.ts","../node_modules/standardized-audio-context/src/factories/native-audio-worklet-node-constructor.ts","../node_modules/standardized-audio-context/src/factories/add-audio-node-connections.ts","../node_modules/standardized-audio-context/src/factories/add-connection-to-audio-node.ts","../node_modules/standardized-audio-context/src/factories/increment-cycle-counter-factory.ts","../node_modules/standardized-audio-context/src/factories/decrement-cycle-counter.ts","../node_modules/standardized-audio-context/src/factories/detect-cycles.ts","../node_modules/standardized-audio-context/src/guards/delay-node.ts","../node_modules/standardized-audio-context/src/factories/native-audio-buffer-constructor.ts","../node_modules/standardized-audio-context/src/factories/convert-number-to-unsigned-long.ts","../node_modules/standardized-audio-context/src/factories/wrap-audio-buffer-copy-channel-methods.ts","../node_modules/standardized-audio-context/src/factories/wrap-audio-buffer-copy-channel-methods-out-of-bounds.ts","../node_modules/standardized-audio-context/src/factories/test-audio-buffer-constructor-support.ts","../node_modules/standardized-audio-context/src/factories/add-silent-connection.ts","../node_modules/standardized-audio-context/src/factories/render-inputs-of-audio-param.ts","../node_modules/standardized-audio-context/src/factories/connect-audio-param.ts","../node_modules/standardized-audio-context/src/factories/native-audio-buffer-source-node-factory.ts","../node_modules/standardized-audio-context/src/helpers/wrap-audio-buffer-source-node-start-method-consecutive-calls.ts","../node_modules/standardized-audio-context/src/helpers/test-audio-buffer-source-node-start-method-consecutive-calls-support.ts","../node_modules/standardized-audio-context/src/helpers/test-audio-buffer-source-node-start-method-offset-clamping-support.ts","../node_modules/standardized-audio-context/src/helpers/test-audio-buffer-source-node-stop-method-nullified-buffer-support.ts","../node_modules/standardized-audio-context/src/helpers/wrap-audio-buffer-source-node-start-method-offset-clamping.ts","../node_modules/standardized-audio-context/src/factories/wrap-audio-buffer-source-node-stop-method-nullified-buffer.ts","../node_modules/standardized-audio-context/src/factories/render-automation.ts","../node_modules/standardized-audio-context/src/factories/get-audio-param-renderer.ts","../node_modules/standardized-audio-context/src/factories/audio-buffer-source-node-renderer-factory.ts","../node_modules/standardized-audio-context/src/factories/audio-param-factory.ts","../node_modules/standardized-audio-context/src/factories/add-audio-param-connections.ts","../node_modules/standardized-audio-context/src/factories/audio-param-renderer.ts","../node_modules/standardized-audio-context/src/factories/audio-destination-node-constructor.ts","../node_modules/standardized-audio-context/src/factories/audio-destination-node-renderer-factory.ts","../node_modules/standardized-audio-context/src/factories/native-audio-destination-node.ts","../node_modules/standardized-audio-context/src/factories/biquad-filter-node-renderer-factory.ts","../node_modules/standardized-audio-context/src/factories/set-audio-node-tail-time.ts","../node_modules/standardized-audio-context/src/factories/monitor-connections.ts","../node_modules/standardized-audio-context/src/factories/wrap-channel-merger-node.ts","../node_modules/standardized-audio-context/src/factories/native-channel-merger-node-factory.ts","../node_modules/standardized-audio-context/src/factories/channel-merger-node-renderer-factory.ts","../node_modules/standardized-audio-context/src/factories/channel-splitter-node-renderer-factory.ts","../node_modules/standardized-audio-context/src/helpers/sanitize-channel-splitter-options.ts","../node_modules/standardized-audio-context/src/factories/native-constant-source-node-faker-factory.ts","../node_modules/standardized-audio-context/src/factories/native-constant-source-node-factory.ts","../node_modules/standardized-audio-context/src/factories/constant-source-node-renderer-factory.ts","../node_modules/standardized-audio-context/src/factories/native-convolver-node-factory.ts","../node_modules/standardized-audio-context/src/factories/convolver-node-renderer-factory.ts","../node_modules/standardized-audio-context/src/factories/delay-node-renderer-factory.ts","../node_modules/standardized-audio-context/src/factories/native-dynamics-compressor-node-factory.ts","../node_modules/standardized-audio-context/src/factories/dynamics-compressor-node-renderer-factory.ts","../node_modules/standardized-audio-context/src/factories/gain-node-renderer-factory.ts","../node_modules/standardized-audio-context/src/factories/render-native-offline-audio-context.ts","../node_modules/standardized-audio-context/src/factories/test-offline-audio-context-current-time-support.ts","../node_modules/standardized-audio-context/src/factories/iir-filter-node-renderer-factory.ts","../node_modules/standardized-audio-context/src/factories/native-iir-filter-node-factory.ts","../node_modules/standardized-audio-context/src/helpers/wrap-iir-filter-node-get-frequency-response-method.ts","../node_modules/standardized-audio-context/src/factories/audio-listener-factory.ts","../node_modules/standardized-audio-context/src/factories/minimal-base-audio-context-constructor.ts","../node_modules/standardized-audio-context/src/factories/native-oscillator-node-factory.ts","../node_modules/standardized-audio-context/src/factories/oscillator-node-renderer-factory.ts","../node_modules/standardized-audio-context/src/factories/connected-native-audio-buffer-source-node-factory.ts","../node_modules/standardized-audio-context/src/factories/native-wave-shaper-node-faker-factory.ts","../node_modules/standardized-audio-context/src/factories/native-wave-shaper-node-factory.ts","../node_modules/standardized-audio-context/src/factories/native-panner-node-faker-factory.ts","../node_modules/standardized-audio-context/src/factories/native-panner-node-factory.ts","../node_modules/standardized-audio-context/src/factories/panner-node-renderer-factory.ts","../node_modules/standardized-audio-context/src/factories/native-periodic-wave-factory.ts","../node_modules/standardized-audio-context/src/helpers/sanitize-periodic-wave-options.ts","../node_modules/standardized-audio-context/src/factories/native-stereo-panner-node-faker-factory.ts","../node_modules/standardized-audio-context/src/factories/native-stereo-panner-node-factory.ts","../node_modules/standardized-audio-context/src/factories/stereo-panner-node-renderer-factory.ts","../node_modules/standardized-audio-context/src/factories/wave-shaper-node-renderer-factory.ts","../node_modules/standardized-audio-context/src/factories/is-secure-context.ts","../node_modules/standardized-audio-context/src/factories/expose-current-frame-and-current-time.ts","../node_modules/standardized-audio-context/src/factories/get-or-create-backup-offline-audio-context.ts","../node_modules/standardized-audio-context/src/factories/evaluate-source.ts","../node_modules/standardized-audio-context/src/factories/fetch-source.ts","../node_modules/standardized-audio-context/src/factories/test-audio-worklet-processor-post-message-support.ts","../node_modules/standardized-audio-context/src/factories/is-native-context.ts","../node_modules/standardized-audio-context/src/factories/decode-audio-data.ts","../node_modules/standardized-audio-context/src/factories/data-clone-error.ts","../node_modules/standardized-audio-context/src/factories/encoding-error.ts","../node_modules/standardized-audio-context/src/factories/base-audio-context-constructor.ts","../node_modules/standardized-audio-context/src/factories/media-element-audio-source-node-constructor.ts","../node_modules/standardized-audio-context/src/factories/native-media-element-audio-source-node.ts","../node_modules/standardized-audio-context/src/factories/native-media-stream-audio-destination-node.ts","../node_modules/standardized-audio-context/src/factories/media-stream-audio-source-node-constructor.ts","../node_modules/standardized-audio-context/src/factories/native-media-stream-audio-source-node.ts","../node_modules/standardized-audio-context/src/factories/native-media-stream-track-audio-source-node-factory.ts","../node_modules/standardized-audio-context/src/factories/media-stream-track-audio-source-node-constructor.ts","../node_modules/standardized-audio-context/src/factories/audio-context-constructor.ts","../node_modules/standardized-audio-context/src/factories/get-unrendered-audio-worklet-nodes.ts","../node_modules/standardized-audio-context/src/factories/add-unrendered-audio-worklet-node.ts","../node_modules/standardized-audio-context/src/factories/connect-multiple-outputs.ts","../node_modules/standardized-audio-context/src/factories/delete-unrendered-audio-worklet-node.ts","../node_modules/standardized-audio-context/src/factories/get-active-audio-worklet-node-inputs.ts","../node_modules/standardized-audio-context/src/factories/native-audio-worklet-node-faker-factory.ts","../node_modules/standardized-audio-context/src/helpers/create-audio-worklet-processor.ts","../node_modules/standardized-audio-context/src/factories/native-audio-worklet-node-factory.ts","../node_modules/standardized-audio-context/src/helpers/test-clonability-of-audio-worklet-node-options.ts","../node_modules/standardized-audio-context/src/factories/get-backup-offline-audio-context.ts","../node_modules/standardized-audio-context/src/factories/set-active-audio-worklet-node-inputs.ts","../node_modules/standardized-audio-context/src/helpers/sanitize-audio-worklet-node-options.ts","../node_modules/standardized-audio-context/src/helpers/test-audio-worklet-node-options-clonability.ts","../node_modules/standardized-audio-context/src/factories/minimal-audio-context-constructor.ts","../node_modules/standardized-audio-context/src/factories/create-native-offline-audio-context.ts","../node_modules/standardized-audio-context/src/factories/start-rendering.ts","../node_modules/extendable-media-recorder/src/factories/web-audio-media-recorder.ts","../node_modules/standardized-audio-context/src/factories/is-any-audio-context.ts","../node_modules/standardized-audio-context/src/factories/is-any-audio-node.ts","../node_modules/standardized-audio-context/src/factories/is-any-audio-param.ts","../node_modules/standardized-audio-context/src/factories/is-any-offline-audio-context.ts","../node_modules/extendable-media-recorder/src/factories/webm-pcm-media-recorder.ts","../node_modules/extendable-media-recorder/src/functions/read-variable-size-integer-length.ts","../node_modules/extendable-media-recorder/src/module.ts","../node_modules/extendable-media-recorder/src/factories/window.ts","../node_modules/extendable-media-recorder/src/factories/native-blob-event-constructor.ts","../node_modules/extendable-media-recorder/src/factories/invalid-state-error.ts","../node_modules/extendable-media-recorder/src/factories/read-variable-size-integer.ts","../node_modules/extendable-media-recorder/src/factories/read-element-content.ts","../node_modules/extendable-media-recorder/src/factories/read-element-type.ts","../node_modules/extendable-media-recorder/src/factories/decode-web-m-chunk.ts","../node_modules/extendable-media-recorder/src/factories/event-target-factory.ts","../node_modules/extendable-media-recorder/src/factories/native-media-recorder-constructor.ts","../node_modules/extendable-media-recorder/src/factories/native-media-recorder.ts","../node_modules/extendable-media-recorder/src/factories/media-recorder-constructor.ts","../node_modules/extendable-media-recorder/src/factories/event-target-constructor.ts","../node_modules/extendable-media-recorder/src/functions/wrap-event-listener.ts","../node_modules/extendable-media-recorder/src/factories/is-supported-promise.ts","../node_modules/fast-unique-numbers/build/es5/bundle.js","../node_modules/indefinite-article/indefinite-article.js","../node_modules/load-script/index.js","../node_modules/memoize-one/dist/memoize-one.esm.js","../node_modules/mic-recorder-to-mp3/node_modules/lamejs/src/js/common.js","../node_modules/mic-recorder-to-mp3/node_modules/lamejs/src/js/NewMDCT.js","../node_modules/mic-recorder-to-mp3/node_modules/lamejs/src/js/III_psy_xmin.js","../node_modules/mic-recorder-to-mp3/node_modules/lamejs/src/js/III_psy_ratio.js","../node_modules/mic-recorder-to-mp3/node_modules/lamejs/src/js/Encoder.js","../node_modules/mic-recorder-to-mp3/node_modules/lamejs/src/js/FFT.js","../node_modules/mic-recorder-to-mp3/node_modules/lamejs/src/js/PsyModel.js","../node_modules/mic-recorder-to-mp3/node_modules/lamejs/src/js/MPEGMode.js","../node_modules/mic-recorder-to-mp3/node_modules/lamejs/src/js/LameGlobalFlags.js","../node_modules/mic-recorder-to-mp3/node_modules/lamejs/src/js/L3Side.js","../node_modules/mic-recorder-to-mp3/node_modules/lamejs/src/js/GrInfo.js","../node_modules/mic-recorder-to-mp3/node_modules/lamejs/src/js/IIISideInfo.js","../node_modules/mic-recorder-to-mp3/node_modules/lamejs/src/js/ScaleFac.js","../node_modules/mic-recorder-to-mp3/node_modules/lamejs/src/js/NsPsy.js","../node_modules/mic-recorder-to-mp3/node_modules/lamejs/src/js/VBRSeekInfo.js","../node_modules/mic-recorder-to-mp3/node_modules/lamejs/src/js/LameInternalFlags.js","../node_modules/mic-recorder-to-mp3/node_modules/lamejs/src/js/ATH.js","../node_modules/mic-recorder-to-mp3/node_modules/lamejs/src/js/GainAnalysis.js","../node_modules/mic-recorder-to-mp3/node_modules/lamejs/src/js/ReplayGain.js","../node_modules/mic-recorder-to-mp3/node_modules/lamejs/src/js/MeanBits.js","../node_modules/mic-recorder-to-mp3/node_modules/lamejs/src/js/CBRNewIterationLoop.js","../node_modules/mic-recorder-to-mp3/node_modules/lamejs/src/js/Tables.js","../node_modules/mic-recorder-to-mp3/node_modules/lamejs/src/js/QuantizePVT.js","../node_modules/mic-recorder-to-mp3/node_modules/lamejs/src/js/Takehiro.js","../node_modules/mic-recorder-to-mp3/node_modules/lamejs/src/js/BitStream.js","../node_modules/mic-recorder-to-mp3/node_modules/lamejs/src/js/Lame.js","../node_modules/mic-recorder-to-mp3/node_modules/lamejs/src/js/Presets.js","../node_modules/mic-recorder-to-mp3/node_modules/lamejs/src/js/VBRQuantize.js","../node_modules/mic-recorder-to-mp3/node_modules/lamejs/src/js/CalcNoiseResult.js","../node_modules/mic-recorder-to-mp3/node_modules/lamejs/src/js/CalcNoiseData.js","../node_modules/mic-recorder-to-mp3/node_modules/lamejs/src/js/Quantize.js","../node_modules/mic-recorder-to-mp3/node_modules/lamejs/src/js/Reservoir.js","../node_modules/mic-recorder-to-mp3/node_modules/lamejs/src/js/Version.js","../node_modules/mic-recorder-to-mp3/node_modules/lamejs/src/js/VBRTag.js","../node_modules/mic-recorder-to-mp3/node_modules/lamejs/src/js/index.js","../node_modules/mic-recorder-to-mp3/src/encoder.js","../node_modules/mic-recorder-to-mp3/src/mic-recorder.js","../node_modules/moment/moment.js","../node_modules/multi-buffer-data-view/build/es5/bundle.js","../node_modules/redux/es/redux.js","../node_modules/react-redux/es/components/Context.js","../node_modules/react-redux/es/utils/batch.js","../node_modules/react-redux/es/utils/Subscription.js","../node_modules/react-redux/es/utils/useIsomorphicLayoutEffect.js","../node_modules/react-redux/es/components/Provider.js","../node_modules/react-redux/es/components/connectAdvanced.js","../node_modules/react-redux/es/utils/shallowEqual.js","../node_modules/react-redux/es/connect/wrapMapToProps.js","../node_modules/react-redux/es/connect/mapDispatchToProps.js","../node_modules/react-redux/es/utils/bindActionCreators.js","../node_modules/react-redux/es/connect/mapStateToProps.js","../node_modules/react-redux/es/connect/mergeProps.js","../node_modules/react-redux/es/connect/selectorFactory.js","../node_modules/react-redux/es/connect/connect.js","../node_modules/react-redux/es/hooks/useSelector.js","../node_modules/use-memo-one/dist/use-memo-one.esm.js","../node_modules/react-redux/es/index.js","../node_modules/css-box-model/dist/css-box-model.esm.js","../node_modules/raf-schd/dist/raf-schd.esm.js","../node_modules/react-beautiful-dnd/dist/react-beautiful-dnd.esm.js","../node_modules/react-bootstrap/esm/Image.js","../node_modules/react-chartjs-2/src/utils.ts","../node_modules/react-chartjs-2/src/chart.tsx","../node_modules/react-chartjs-2/src/typedCharts.tsx","../node_modules/react-circular-progressbar/src/constants.ts","../node_modules/react-circular-progressbar/src/Path.tsx","../node_modules/react-circular-progressbar/src/CircularProgressbar.tsx","../node_modules/react-circular-progressbar/src/CircularProgressbarWithChildren.tsx","../node_modules/react-circular-progressbar/src/buildStyles.ts","../node_modules/react-is/cjs/react-is.production.min.js","../node_modules/react-is/index.js","../node_modules/react-media-recorder/index.js","../node_modules/react-media-recorder/lib/index.js","../node_modules/react-player/lib/Player.js","../node_modules/react-player/lib/ReactPlayer.js","../node_modules/react-player/lib/index.js","../node_modules/react-player/lib/patterns.js","../node_modules/react-player/lib/players/index.js","../node_modules/react-player/lib/props.js","../node_modules/react-player/lib/utils.js","../node_modules/recorder-audio-worklet/node_modules/compilerr/build/es5/bundle.js","../node_modules/recorder-audio-worklet/node_modules/fast-unique-numbers/build/es5/bundle.js","../node_modules/@babel/runtime/helpers/arrayLikeToArray.js","../node_modules/@babel/runtime/helpers/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/classCallCheck.js","../node_modules/@babel/runtime/helpers/createClass.js","../node_modules/@babel/runtime/helpers/iterableToArray.js","../node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/nonIterableRest.js","../node_modules/@babel/runtime/helpers/nonIterableSpread.js","../node_modules/@babel/runtime/helpers/slicedToArray.js","../node_modules/@babel/runtime/helpers/toConsumableArray.js","../node_modules/@babel/runtime/helpers/toPrimitive.js","../node_modules/@babel/runtime/helpers/toPropertyKey.js","../node_modules/@babel/runtime/helpers/typeof.js","../node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","../node_modules/chart.js/auto/auto.mjs","../node_modules/chart.js/dist/chunks/helpers.segment.mjs","../node_modules/chart.js/dist/chart.mjs"],"sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@babel/runtime/helpers/slicedToArray'), require('@babel/runtime/helpers/classCallCheck'), require('@babel/runtime/helpers/createClass')) :\n    typeof define === 'function' && define.amd ? define(['exports', '@babel/runtime/helpers/slicedToArray', '@babel/runtime/helpers/classCallCheck', '@babel/runtime/helpers/createClass'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.automationEvents = {}, global._slicedToArray, global._classCallCheck, global._createClass));\n})(this, (function (exports, _slicedToArray, _classCallCheck, _createClass) { 'use strict';\n\n    var createExtendedExponentialRampToValueAutomationEvent = function createExtendedExponentialRampToValueAutomationEvent(value, endTime, insertTime) {\n      return {\n        endTime: endTime,\n        insertTime: insertTime,\n        type: 'exponentialRampToValue',\n        value: value\n      };\n    };\n\n    var createExtendedLinearRampToValueAutomationEvent = function createExtendedLinearRampToValueAutomationEvent(value, endTime, insertTime) {\n      return {\n        endTime: endTime,\n        insertTime: insertTime,\n        type: 'linearRampToValue',\n        value: value\n      };\n    };\n\n    var createSetValueAutomationEvent = function createSetValueAutomationEvent(value, startTime) {\n      return {\n        startTime: startTime,\n        type: 'setValue',\n        value: value\n      };\n    };\n\n    var createSetValueCurveAutomationEvent = function createSetValueCurveAutomationEvent(values, startTime, duration) {\n      return {\n        duration: duration,\n        startTime: startTime,\n        type: 'setValueCurve',\n        values: values\n      };\n    };\n\n    var getTargetValueAtTime = function getTargetValueAtTime(time, valueAtStartTime, _ref) {\n      var startTime = _ref.startTime,\n        target = _ref.target,\n        timeConstant = _ref.timeConstant;\n      return target + (valueAtStartTime - target) * Math.exp((startTime - time) / timeConstant);\n    };\n\n    var isExponentialRampToValueAutomationEvent = function isExponentialRampToValueAutomationEvent(automationEvent) {\n      return automationEvent.type === 'exponentialRampToValue';\n    };\n\n    var isLinearRampToValueAutomationEvent = function isLinearRampToValueAutomationEvent(automationEvent) {\n      return automationEvent.type === 'linearRampToValue';\n    };\n\n    var isAnyRampToValueAutomationEvent = function isAnyRampToValueAutomationEvent(automationEvent) {\n      return isExponentialRampToValueAutomationEvent(automationEvent) || isLinearRampToValueAutomationEvent(automationEvent);\n    };\n\n    var isSetValueAutomationEvent = function isSetValueAutomationEvent(automationEvent) {\n      return automationEvent.type === 'setValue';\n    };\n\n    var isSetValueCurveAutomationEvent = function isSetValueCurveAutomationEvent(automationEvent) {\n      return automationEvent.type === 'setValueCurve';\n    };\n\n    var getValueOfAutomationEventAtIndexAtTime = function getValueOfAutomationEventAtIndexAtTime(automationEvents, index, time, defaultValue) {\n      var automationEvent = automationEvents[index];\n      return automationEvent === undefined ? defaultValue : isAnyRampToValueAutomationEvent(automationEvent) || isSetValueAutomationEvent(automationEvent) ? automationEvent.value : isSetValueCurveAutomationEvent(automationEvent) ? automationEvent.values[automationEvent.values.length - 1] : getTargetValueAtTime(time, getValueOfAutomationEventAtIndexAtTime(automationEvents, index - 1, automationEvent.startTime, defaultValue), automationEvent);\n    };\n\n    var getEndTimeAndValueOfPreviousAutomationEvent = function getEndTimeAndValueOfPreviousAutomationEvent(automationEvents, index, currentAutomationEvent, nextAutomationEvent, defaultValue) {\n      return currentAutomationEvent === undefined ? [nextAutomationEvent.insertTime, defaultValue] : isAnyRampToValueAutomationEvent(currentAutomationEvent) ? [currentAutomationEvent.endTime, currentAutomationEvent.value] : isSetValueAutomationEvent(currentAutomationEvent) ? [currentAutomationEvent.startTime, currentAutomationEvent.value] : isSetValueCurveAutomationEvent(currentAutomationEvent) ? [currentAutomationEvent.startTime + currentAutomationEvent.duration, currentAutomationEvent.values[currentAutomationEvent.values.length - 1]] : [currentAutomationEvent.startTime, getValueOfAutomationEventAtIndexAtTime(automationEvents, index - 1, currentAutomationEvent.startTime, defaultValue)];\n    };\n\n    var isCancelAndHoldAutomationEvent = function isCancelAndHoldAutomationEvent(automationEvent) {\n      return automationEvent.type === 'cancelAndHold';\n    };\n\n    var isCancelScheduledValuesAutomationEvent = function isCancelScheduledValuesAutomationEvent(automationEvent) {\n      return automationEvent.type === 'cancelScheduledValues';\n    };\n\n    var getEventTime = function getEventTime(automationEvent) {\n      if (isCancelAndHoldAutomationEvent(automationEvent) || isCancelScheduledValuesAutomationEvent(automationEvent)) {\n        return automationEvent.cancelTime;\n      }\n      if (isExponentialRampToValueAutomationEvent(automationEvent) || isLinearRampToValueAutomationEvent(automationEvent)) {\n        return automationEvent.endTime;\n      }\n      return automationEvent.startTime;\n    };\n\n    var getExponentialRampValueAtTime = function getExponentialRampValueAtTime(time, startTime, valueAtStartTime, _ref) {\n      var endTime = _ref.endTime,\n        value = _ref.value;\n      if (valueAtStartTime === value) {\n        return value;\n      }\n      if (0 < valueAtStartTime && 0 < value || valueAtStartTime < 0 && value < 0) {\n        return valueAtStartTime * Math.pow(value / valueAtStartTime, (time - startTime) / (endTime - startTime));\n      }\n      return 0;\n    };\n\n    var getLinearRampValueAtTime = function getLinearRampValueAtTime(time, startTime, valueAtStartTime, _ref) {\n      var endTime = _ref.endTime,\n        value = _ref.value;\n      return valueAtStartTime + (time - startTime) / (endTime - startTime) * (value - valueAtStartTime);\n    };\n\n    var interpolateValue = function interpolateValue(values, theoreticIndex) {\n      var lowerIndex = Math.floor(theoreticIndex);\n      var upperIndex = Math.ceil(theoreticIndex);\n      if (lowerIndex === upperIndex) {\n        return values[lowerIndex];\n      }\n      return (1 - (theoreticIndex - lowerIndex)) * values[lowerIndex] + (1 - (upperIndex - theoreticIndex)) * values[upperIndex];\n    };\n\n    var getValueCurveValueAtTime = function getValueCurveValueAtTime(time, _ref) {\n      var duration = _ref.duration,\n        startTime = _ref.startTime,\n        values = _ref.values;\n      var theoreticIndex = (time - startTime) / duration * (values.length - 1);\n      return interpolateValue(values, theoreticIndex);\n    };\n\n    var isSetTargetAutomationEvent = function isSetTargetAutomationEvent(automationEvent) {\n      return automationEvent.type === 'setTarget';\n    };\n\n    var AutomationEventList = /*#__PURE__*/function (_Symbol$iterator) {\n      function AutomationEventList(defaultValue) {\n        _classCallCheck(this, AutomationEventList);\n        this._automationEvents = [];\n        this._currenTime = 0;\n        this._defaultValue = defaultValue;\n      }\n      _createClass(AutomationEventList, [{\n        key: _Symbol$iterator,\n        value: function value() {\n          return this._automationEvents[Symbol.iterator]();\n        }\n      }, {\n        key: \"add\",\n        value: function add(automationEvent) {\n          var eventTime = getEventTime(automationEvent);\n          if (isCancelAndHoldAutomationEvent(automationEvent) || isCancelScheduledValuesAutomationEvent(automationEvent)) {\n            var index = this._automationEvents.findIndex(function (currentAutomationEvent) {\n              if (isCancelScheduledValuesAutomationEvent(automationEvent) && isSetValueCurveAutomationEvent(currentAutomationEvent)) {\n                return currentAutomationEvent.startTime + currentAutomationEvent.duration >= eventTime;\n              }\n              return getEventTime(currentAutomationEvent) >= eventTime;\n            });\n            var removedAutomationEvent = this._automationEvents[index];\n            if (index !== -1) {\n              this._automationEvents = this._automationEvents.slice(0, index);\n            }\n            if (isCancelAndHoldAutomationEvent(automationEvent)) {\n              var lastAutomationEvent = this._automationEvents[this._automationEvents.length - 1];\n              if (removedAutomationEvent !== undefined && isAnyRampToValueAutomationEvent(removedAutomationEvent)) {\n                if (lastAutomationEvent !== undefined && isSetTargetAutomationEvent(lastAutomationEvent)) {\n                  throw new Error('The internal list is malformed.');\n                }\n                var startTime = lastAutomationEvent === undefined ? removedAutomationEvent.insertTime : isSetValueCurveAutomationEvent(lastAutomationEvent) ? lastAutomationEvent.startTime + lastAutomationEvent.duration : getEventTime(lastAutomationEvent);\n                var startValue = lastAutomationEvent === undefined ? this._defaultValue : isSetValueCurveAutomationEvent(lastAutomationEvent) ? lastAutomationEvent.values[lastAutomationEvent.values.length - 1] : lastAutomationEvent.value;\n                var value = isExponentialRampToValueAutomationEvent(removedAutomationEvent) ? getExponentialRampValueAtTime(eventTime, startTime, startValue, removedAutomationEvent) : getLinearRampValueAtTime(eventTime, startTime, startValue, removedAutomationEvent);\n                var truncatedAutomationEvent = isExponentialRampToValueAutomationEvent(removedAutomationEvent) ? createExtendedExponentialRampToValueAutomationEvent(value, eventTime, this._currenTime) : createExtendedLinearRampToValueAutomationEvent(value, eventTime, this._currenTime);\n                this._automationEvents.push(truncatedAutomationEvent);\n              }\n              if (lastAutomationEvent !== undefined && isSetTargetAutomationEvent(lastAutomationEvent)) {\n                this._automationEvents.push(createSetValueAutomationEvent(this.getValue(eventTime), eventTime));\n              }\n              if (lastAutomationEvent !== undefined && isSetValueCurveAutomationEvent(lastAutomationEvent) && lastAutomationEvent.startTime + lastAutomationEvent.duration > eventTime) {\n                var duration = eventTime - lastAutomationEvent.startTime;\n                var ratio = (lastAutomationEvent.values.length - 1) / lastAutomationEvent.duration;\n                var length = Math.max(2, 1 + Math.ceil(duration * ratio));\n                var fraction = duration / (length - 1) * ratio;\n                var values = lastAutomationEvent.values.slice(0, length);\n                if (fraction < 1) {\n                  for (var i = 1; i < length; i += 1) {\n                    var factor = fraction * i % 1;\n                    values[i] = lastAutomationEvent.values[i - 1] * (1 - factor) + lastAutomationEvent.values[i] * factor;\n                  }\n                }\n                this._automationEvents[this._automationEvents.length - 1] = createSetValueCurveAutomationEvent(values, lastAutomationEvent.startTime, duration);\n              }\n            }\n          } else {\n            var _index = this._automationEvents.findIndex(function (currentAutomationEvent) {\n              return getEventTime(currentAutomationEvent) > eventTime;\n            });\n            var previousAutomationEvent = _index === -1 ? this._automationEvents[this._automationEvents.length - 1] : this._automationEvents[_index - 1];\n            if (previousAutomationEvent !== undefined && isSetValueCurveAutomationEvent(previousAutomationEvent) && getEventTime(previousAutomationEvent) + previousAutomationEvent.duration > eventTime) {\n              return false;\n            }\n            var persistentAutomationEvent = isExponentialRampToValueAutomationEvent(automationEvent) ? createExtendedExponentialRampToValueAutomationEvent(automationEvent.value, automationEvent.endTime, this._currenTime) : isLinearRampToValueAutomationEvent(automationEvent) ? createExtendedLinearRampToValueAutomationEvent(automationEvent.value, eventTime, this._currenTime) : automationEvent;\n            if (_index === -1) {\n              this._automationEvents.push(persistentAutomationEvent);\n            } else {\n              if (isSetValueCurveAutomationEvent(automationEvent) && eventTime + automationEvent.duration > getEventTime(this._automationEvents[_index])) {\n                return false;\n              }\n              this._automationEvents.splice(_index, 0, persistentAutomationEvent);\n            }\n          }\n          return true;\n        }\n      }, {\n        key: \"flush\",\n        value: function flush(time) {\n          var index = this._automationEvents.findIndex(function (currentAutomationEvent) {\n            return getEventTime(currentAutomationEvent) > time;\n          });\n          if (index > 1) {\n            var remainingAutomationEvents = this._automationEvents.slice(index - 1);\n            var firstRemainingAutomationEvent = remainingAutomationEvents[0];\n            if (isSetTargetAutomationEvent(firstRemainingAutomationEvent)) {\n              remainingAutomationEvents.unshift(createSetValueAutomationEvent(getValueOfAutomationEventAtIndexAtTime(this._automationEvents, index - 2, firstRemainingAutomationEvent.startTime, this._defaultValue), firstRemainingAutomationEvent.startTime));\n            }\n            this._automationEvents = remainingAutomationEvents;\n          }\n        }\n      }, {\n        key: \"getValue\",\n        value: function getValue(time) {\n          if (this._automationEvents.length === 0) {\n            return this._defaultValue;\n          }\n          var indexOfNextEvent = this._automationEvents.findIndex(function (automationEvent) {\n            return getEventTime(automationEvent) > time;\n          });\n          var nextAutomationEvent = this._automationEvents[indexOfNextEvent];\n          var indexOfCurrentEvent = (indexOfNextEvent === -1 ? this._automationEvents.length : indexOfNextEvent) - 1;\n          var currentAutomationEvent = this._automationEvents[indexOfCurrentEvent];\n          if (currentAutomationEvent !== undefined && isSetTargetAutomationEvent(currentAutomationEvent) && (nextAutomationEvent === undefined || !isAnyRampToValueAutomationEvent(nextAutomationEvent) || nextAutomationEvent.insertTime > time)) {\n            return getTargetValueAtTime(time, getValueOfAutomationEventAtIndexAtTime(this._automationEvents, indexOfCurrentEvent - 1, currentAutomationEvent.startTime, this._defaultValue), currentAutomationEvent);\n          }\n          if (currentAutomationEvent !== undefined && isSetValueAutomationEvent(currentAutomationEvent) && (nextAutomationEvent === undefined || !isAnyRampToValueAutomationEvent(nextAutomationEvent))) {\n            return currentAutomationEvent.value;\n          }\n          if (currentAutomationEvent !== undefined && isSetValueCurveAutomationEvent(currentAutomationEvent) && (nextAutomationEvent === undefined || !isAnyRampToValueAutomationEvent(nextAutomationEvent) || currentAutomationEvent.startTime + currentAutomationEvent.duration > time)) {\n            if (time < currentAutomationEvent.startTime + currentAutomationEvent.duration) {\n              return getValueCurveValueAtTime(time, currentAutomationEvent);\n            }\n            return currentAutomationEvent.values[currentAutomationEvent.values.length - 1];\n          }\n          if (currentAutomationEvent !== undefined && isAnyRampToValueAutomationEvent(currentAutomationEvent) && (nextAutomationEvent === undefined || !isAnyRampToValueAutomationEvent(nextAutomationEvent))) {\n            return currentAutomationEvent.value;\n          }\n          if (nextAutomationEvent !== undefined && isExponentialRampToValueAutomationEvent(nextAutomationEvent)) {\n            var _getEndTimeAndValueOf = getEndTimeAndValueOfPreviousAutomationEvent(this._automationEvents, indexOfCurrentEvent, currentAutomationEvent, nextAutomationEvent, this._defaultValue),\n              _getEndTimeAndValueOf2 = _slicedToArray(_getEndTimeAndValueOf, 2),\n              startTime = _getEndTimeAndValueOf2[0],\n              value = _getEndTimeAndValueOf2[1];\n            return getExponentialRampValueAtTime(time, startTime, value, nextAutomationEvent);\n          }\n          if (nextAutomationEvent !== undefined && isLinearRampToValueAutomationEvent(nextAutomationEvent)) {\n            var _getEndTimeAndValueOf3 = getEndTimeAndValueOfPreviousAutomationEvent(this._automationEvents, indexOfCurrentEvent, currentAutomationEvent, nextAutomationEvent, this._defaultValue),\n              _getEndTimeAndValueOf4 = _slicedToArray(_getEndTimeAndValueOf3, 2),\n              _startTime = _getEndTimeAndValueOf4[0],\n              _value = _getEndTimeAndValueOf4[1];\n            return getLinearRampValueAtTime(time, _startTime, _value, nextAutomationEvent);\n          }\n          return this._defaultValue;\n        }\n      }]);\n      return AutomationEventList;\n    }(Symbol.iterator);\n\n    var createCancelAndHoldAutomationEvent = function createCancelAndHoldAutomationEvent(cancelTime) {\n      return {\n        cancelTime: cancelTime,\n        type: 'cancelAndHold'\n      };\n    };\n\n    var createCancelScheduledValuesAutomationEvent = function createCancelScheduledValuesAutomationEvent(cancelTime) {\n      return {\n        cancelTime: cancelTime,\n        type: 'cancelScheduledValues'\n      };\n    };\n\n    var createExponentialRampToValueAutomationEvent = function createExponentialRampToValueAutomationEvent(value, endTime) {\n      return {\n        endTime: endTime,\n        type: 'exponentialRampToValue',\n        value: value\n      };\n    };\n\n    var createLinearRampToValueAutomationEvent = function createLinearRampToValueAutomationEvent(value, endTime) {\n      return {\n        endTime: endTime,\n        type: 'linearRampToValue',\n        value: value\n      };\n    };\n\n    var createSetTargetAutomationEvent = function createSetTargetAutomationEvent(target, startTime, timeConstant) {\n      return {\n        startTime: startTime,\n        target: target,\n        timeConstant: timeConstant,\n        type: 'setTarget'\n      };\n    };\n\n    exports.AutomationEventList = AutomationEventList;\n    exports.createCancelAndHoldAutomationEvent = createCancelAndHoldAutomationEvent;\n    exports.createCancelScheduledValuesAutomationEvent = createCancelScheduledValuesAutomationEvent;\n    exports.createExponentialRampToValueAutomationEvent = createExponentialRampToValueAutomationEvent;\n    exports.createLinearRampToValueAutomationEvent = createLinearRampToValueAutomationEvent;\n    exports.createSetTargetAutomationEvent = createSetTargetAutomationEvent;\n    exports.createSetValueAutomationEvent = createSetValueAutomationEvent;\n    exports.createSetValueCurveAutomationEvent = createSetValueCurveAutomationEvent;\n\n}));\n","export const isMessagePort = (sender: MessagePort | Worker): sender is MessagePort => {\n    return typeof (<MessagePort>sender).start === 'function';\n};\n","export const PORT_MAP: WeakMap<MessagePort, number> = new WeakMap();\n","import { generateUniqueNumber } from 'fast-unique-numbers';\nimport { IWorkerDefinition, IWorkerErrorMessage, IWorkerResultMessage } from 'worker-factory';\nimport { isMessagePort } from './guards/message-port';\nimport { extendBrokerImplementation } from './helpers/extend-broker-implementation';\nimport { IBrokerDefinition, IDefaultBrokerDefinition, IWorkerEvent } from './interfaces';\nimport { TBrokerImplementation } from './types';\n\n/*\n * @todo Explicitly referencing the barrel file seems to be necessary when enabling the\n * isolatedModules compiler option.\n */\nexport * from './interfaces/index';\nexport * from './types/index';\n\nconst ONGOING_REQUESTS = new WeakMap<MessagePort | Worker, Map<number, { reject: Function; resolve: Function }>>();\n\nconst createOrGetOngoingRequests = (sender: MessagePort | Worker): Map<number, { reject: Function; resolve: Function }> => {\n    if (ONGOING_REQUESTS.has(sender)) {\n        // @todo TypeScript needs to be convinced that has() works as expected.\n        return <Map<number, { reject: Function; resolve: Function }>>ONGOING_REQUESTS.get(sender);\n    }\n\n    const ongoingRequests: Map<number, { reject: Function; resolve: Function }> = new Map();\n\n    ONGOING_REQUESTS.set(sender, ongoingRequests);\n\n    return ongoingRequests;\n};\n\nexport const createBroker = <T extends IBrokerDefinition, U extends IWorkerDefinition>(\n    brokerImplementation: TBrokerImplementation<T, U>\n): ((sender: MessagePort | Worker) => T & IDefaultBrokerDefinition) => {\n    const fullBrokerImplementation = extendBrokerImplementation(brokerImplementation);\n\n    return (sender: MessagePort | Worker) => {\n        const ongoingRequests = createOrGetOngoingRequests(sender);\n\n        sender.addEventListener('message', <EventListener>(({ data: message }: IWorkerEvent) => {\n            const { id } = message;\n\n            if (id !== null && ongoingRequests.has(id)) {\n                const { reject, resolve } = <{ reject: Function; resolve: Function }>ongoingRequests.get(id);\n\n                ongoingRequests.delete(id);\n\n                if ((<IWorkerErrorMessage>message).error === undefined) {\n                    resolve((<IWorkerResultMessage>message).result);\n                } else {\n                    reject(new Error((<IWorkerErrorMessage>message).error.message));\n                }\n            }\n        }));\n\n        if (isMessagePort(sender)) {\n            sender.start();\n        }\n\n        const call = <V extends keyof U>(method: V, params: U[V]['params'] = null, transferables: U[V]['transferables'] = []) => {\n            return new Promise<U[V]['response']['result']>((resolve, reject) => {\n                const id = generateUniqueNumber(ongoingRequests);\n\n                ongoingRequests.set(id, { reject, resolve });\n\n                if (params === null) {\n                    sender.postMessage({ id, method }, <Transferable[]>transferables);\n                } else {\n                    sender.postMessage({ id, method, params }, <Transferable[]>transferables);\n                }\n            });\n        };\n        const notify = <V extends keyof U>(method: V, params: U[V]['params'], transferables: U[V]['transferables'] = []) => {\n            sender.postMessage({ id: null, method, params }, <Transferable[]>transferables);\n        };\n\n        let functions: object = {};\n\n        for (const [key, handler] of Object.entries(fullBrokerImplementation)) {\n            functions = { ...functions, [key]: handler({ call, notify }) };\n        }\n\n        return <T & IDefaultBrokerDefinition>{ ...functions };\n    };\n};\n","import { IWorkerDefinition } from 'worker-factory';\nimport { IBrokerDefinition, IDefaultBrokerDefinition } from '../interfaces';\nimport { TBrokerImplementation } from '../types';\nimport { PORT_MAP } from './port-map';\n\nexport const extendBrokerImplementation = <T extends IBrokerDefinition, U extends IWorkerDefinition>(\n    partialBrokerImplementation: TBrokerImplementation<T, U>\n): TBrokerImplementation<T & IDefaultBrokerDefinition, U> =>\n    <TBrokerImplementation<T & IDefaultBrokerDefinition, U>>{\n        ...partialBrokerImplementation,\n        connect: ({ call }) => {\n            return async (): Promise<MessagePort> => {\n                const { port1, port2 } = new MessageChannel();\n\n                const portId = <number>await call('connect', { port: port1 }, [port1]);\n\n                PORT_MAP.set(port2, portId);\n\n                return port2;\n            };\n        },\n        disconnect: ({ call }) => {\n            return async (port: MessagePort): Promise<void> => {\n                const portId = PORT_MAP.get(port);\n\n                if (portId === undefined) {\n                    throw new Error('The given port is not connected.');\n                }\n\n                await call('disconnect', { portId });\n            };\n        },\n        isSupported: ({ call }) => {\n            return () => call('isSupported');\n        }\n    };\n","/*!\n * dashify <https://github.com/jonschlinkert/dashify>\n *\n * Copyright (c) 2015-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nmodule.exports = (str, options) => {\n  if (typeof str !== 'string') throw new TypeError('expected a string');\n  return str.trim()\n    .replace(/([a-z])([A-Z])/g, '$1-$2')\n    .replace(/\\W/g, m => /[À-ž]/.test(m) ? m : '-')\n    .replace(/^-+|-+$/g, '')\n    .replace(/-{2,}/g, m => options && options.condense ? '-' : m)\n    .toLowerCase();\n};\n","'use strict';\n\nvar isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction getMergeFunction(key, options) {\n\tif (!options.customMerge) {\n\t\treturn deepmerge\n\t}\n\tvar customMerge = options.customMerge(key);\n\treturn typeof customMerge === 'function' ? customMerge : deepmerge\n}\n\nfunction getEnumerableOwnPropertySymbols(target) {\n\treturn Object.getOwnPropertySymbols\n\t\t? Object.getOwnPropertySymbols(target).filter(function(symbol) {\n\t\t\treturn Object.propertyIsEnumerable.call(target, symbol)\n\t\t})\n\t\t: []\n}\n\nfunction getKeys(target) {\n\treturn Object.keys(target).concat(getEnumerableOwnPropertySymbols(target))\n}\n\nfunction propertyIsOnObject(object, property) {\n\ttry {\n\t\treturn property in object\n\t} catch(_) {\n\t\treturn false\n\t}\n}\n\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe(target, key) {\n\treturn propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n\t\t&& !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n\t\t\t&& Object.propertyIsEnumerable.call(target, key)) // and also unsafe if they're nonenumerable.\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tgetKeys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tgetKeys(source).forEach(function(key) {\n\t\tif (propertyIsUnsafe(target, key)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n\t\t\tdestination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\t// cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n\t// implementations can use it. The caller may not replace it.\n\toptions.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nmodule.exports = deepmerge_1;\n","import { createBroker } from 'broker-factory';\nimport { TExtendableMediaRecorderWavEncoderWorkerDefinition } from 'extendable-media-recorder-wav-encoder-worker';\nimport { IExtendableMediaRecorderWavEncoderBrokerDefinition } from './interfaces';\nimport { TExtendableMediaRecorderWavEncoderBrokerLoader, TExtendableMediaRecorderWavEncoderBrokerWrapper } from './types';\n\n/*\n * @todo Explicitly referencing the barrel file seems to be necessary when enabling the\n * isolatedModules compiler option.\n */\nexport * from './interfaces/index';\nexport * from './types/index';\n\nexport const wrap: TExtendableMediaRecorderWavEncoderBrokerWrapper = createBroker<\n    IExtendableMediaRecorderWavEncoderBrokerDefinition,\n    TExtendableMediaRecorderWavEncoderWorkerDefinition\n>({\n    characterize: ({ call }) => {\n        return () => call('characterize');\n    },\n    encode: ({ call }) => {\n        return (recordingId, timeslice) => {\n            return call('encode', { recordingId, timeslice });\n        };\n    },\n    record: ({ call }) => {\n        return async (recordingId, sampleRate, typedArrays) => {\n            await call(\n                'record',\n                { recordingId, sampleRate, typedArrays },\n                typedArrays.map(({ buffer }) => buffer)\n            );\n        };\n    }\n});\n\nexport const load: TExtendableMediaRecorderWavEncoderBrokerLoader = (url: string) => {\n    const worker = new Worker(url);\n\n    return wrap(worker);\n};\n","import { load } from 'extendable-media-recorder-wav-encoder-broker';\nimport { worker } from './worker/worker';\n\nconst blob: Blob = new Blob([worker], { type: 'application/javascript; charset=utf-8' });\n\nconst url: string = URL.createObjectURL(blob);\n\nconst extendableMediaRecorderWavEncoder = load(url);\n\nexport const characterize = extendableMediaRecorderWavEncoder.characterize;\n\nexport const connect = extendableMediaRecorderWavEncoder.connect;\n\nexport const disconnect = extendableMediaRecorderWavEncoder.disconnect;\n\nexport const encode = extendableMediaRecorderWavEncoder.encode;\n\nexport const isSupported = extendableMediaRecorderWavEncoder.isSupported;\n\nexport const record = extendableMediaRecorderWavEncoder.record;\n\nURL.revokeObjectURL(url);\n","// This is the minified and stringified code of the extendable-media-recorder-wav-encoder-worker package.\nexport const worker = `(()=>{var e={775:function(e,t,r){!function(e,t,r,n){\"use strict\";var o=function(e,t){return void 0===t?e:t.reduce((function(e,t){if(\"capitalize\"===t){var o=e.charAt(0).toUpperCase(),s=e.slice(1);return\"\".concat(o).concat(s)}return\"dashify\"===t?r(e):\"prependIndefiniteArticle\"===t?\"\".concat(n(e),\" \").concat(e):e}),e)},s=function(e){var t=e.name+e.modifiers.map((function(e){return\"\\\\\\\\.\".concat(e,\"\\\\\\\\(\\\\\\\\)\")})).join(\"\");return new RegExp(\"\\\\\\\\$\\\\\\\\{\".concat(t,\"}\"),\"g\")},a=function(e,r){for(var n=/\\\\\\${([^.}]+)((\\\\.[^(]+\\\\(\\\\))*)}/g,a=[],i=n.exec(e);null!==i;){var u={modifiers:[],name:i[1]};if(void 0!==i[3])for(var c=/\\\\.[^(]+\\\\(\\\\)/g,l=c.exec(i[2]);null!==l;)u.modifiers.push(l[0].slice(1,-2)),l=c.exec(i[2]);a.push(u),i=n.exec(e)}var d=a.reduce((function(e,n){return e.map((function(e){return\"string\"==typeof e?e.split(s(n)).reduce((function(e,s,a){return 0===a?[s]:n.name in r?[].concat(t(e),[o(r[n.name],n.modifiers),s]):[].concat(t(e),[function(e){return o(e[n.name],n.modifiers)},s])}),[]):[e]})).reduce((function(e,r){return[].concat(t(e),t(r))}),[])}),[e]);return function(e){return d.reduce((function(r,n){return[].concat(t(r),\"string\"==typeof n?[n]:[n(e)])}),[]).join(\"\")}},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=void 0===e.code?void 0:a(e.code,t),n=void 0===e.message?void 0:a(e.message,t);function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0,s=void 0===o&&(t instanceof Error||void 0!==t.code&&\"Exception\"===t.code.slice(-9))?{cause:t,missingParameters:{}}:{cause:o,missingParameters:t},a=s.cause,i=s.missingParameters,u=void 0===n?new Error:new Error(n(i));return null!==a&&(u.cause=a),void 0!==r&&(u.code=r(i)),void 0!==e.status&&(u.status=e.status),u}return o};e.compile=i}(t,r(106),r(881),r(507))},881:e=>{\"use strict\";e.exports=(e,t)=>{if(\"string\"!=typeof e)throw new TypeError(\"expected a string\");return e.trim().replace(/([a-z])([A-Z])/g,\"$1-$2\").replace(/\\\\W/g,(e=>/[À-ž]/.test(e)?e:\"-\")).replace(/^-+|-+$/g,\"\").replace(/-{2,}/g,(e=>t&&t.condense?\"-\":e)).toLowerCase()}},107:function(e,t){!function(e){\"use strict\";var t=function(e){return function(t){var r=e(t);return t.add(r),r}},r=function(e){return function(t,r){return e.set(t,r),r}},n=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,o=536870912,s=2*o,a=function(e,t){return function(r){var a=t.get(r),i=void 0===a?r.size:a<s?a+1:0;if(!r.has(i))return e(r,i);if(r.size<o){for(;r.has(i);)i=Math.floor(Math.random()*s);return e(r,i)}if(r.size>n)throw new Error(\"Congratulations, you created a collection of unique numbers which uses all available integers!\");for(;r.has(i);)i=Math.floor(Math.random()*n);return e(r,i)}},i=new WeakMap,u=r(i),c=a(u,i),l=t(c);e.addUniqueNumber=l,e.generateUniqueNumber=c}(t)},507:e=>{var t=function(e){var t,r,n=/\\\\w+/.exec(e);if(!n)return\"an\";var o=(r=n[0]).toLowerCase(),s=[\"honest\",\"hour\",\"hono\"];for(t in s)if(0==o.indexOf(s[t]))return\"an\";if(1==o.length)return\"aedhilmnorsx\".indexOf(o)>=0?\"an\":\"a\";if(r.match(/(?!FJO|[HLMNS]Y.|RY[EO]|SQU|(F[LR]?|[HL]|MN?|N|RH?|S[CHKLMNPTVW]?|X(YL)?)[AEIOU])[FHLMNRSX][A-Z]/))return\"an\";var a=[/^e[uw]/,/^onc?e\\\\b/,/^uni([^nmd]|mo)/,/^u[bcfhjkqrst][aeiou]/];for(t=0;t<a.length;t++)if(o.match(a[t]))return\"a\";return r.match(/^U[NK][AIEO]/)?\"a\":r==r.toUpperCase()?\"aedhilmnorsx\".indexOf(o[0])>=0?\"an\":\"a\":\"aeiou\".indexOf(o[0])>=0||o.match(/^y(b[lor]|cl[ea]|fere|gg|p[ios]|rou|tt)/)?\"an\":\"a\"};void 0!==e.exports?e.exports=t:window.indefiniteArticle=t},768:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports},907:(e,t,r)=>{var n=r(768);e.exports=function(e){if(Array.isArray(e))return n(e)},e.exports.__esModule=!0,e.exports.default=e.exports},642:e=>{e.exports=function(e){if(\"undefined\"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e[\"@@iterator\"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},344:e=>{e.exports=function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")},e.exports.__esModule=!0,e.exports.default=e.exports},106:(e,t,r)=>{var n=r(907),o=r(642),s=r(906),a=r(344);e.exports=function(e){return n(e)||o(e)||s(e)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},906:(e,t,r)=>{var n=r(768);e.exports=function(e,t){if(e){if(\"string\"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===r&&e.constructor&&(r=e.constructor.name),\"Map\"===r||\"Set\"===r?Array.from(e):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,r),s.exports}(()=>{\"use strict\";var e=r(775);const t=-32603,n=-32602,o=-32601,s=(0,e.compile)({message:'The requested method called \"\\${method}\" is not supported.',status:o}),a=(0,e.compile)({message:'The handler of the method called \"\\${method}\" returned no required result.',status:t}),i=(0,e.compile)({message:'The handler of the method called \"\\${method}\" returned an unexpected result.',status:t}),u=(0,e.compile)({message:'The specified parameter called \"portId\" with the given value \"\\${portId}\" does not identify a port connected to this worker.',status:n});var c=r(107);const l=new Map,d=(e,t,r)=>({...t,connect:r=>{let{port:n}=r;n.start();const o=e(n,t),s=(0,c.generateUniqueNumber)(l);return l.set(s,(()=>{o(),n.close(),l.delete(s)})),{result:s}},disconnect:e=>{let{portId:t}=e;const r=l.get(t);if(void 0===r)throw u({portId:t.toString()});return r(),{result:null}},isSupported:async()=>{if(await new Promise((e=>{const t=new ArrayBuffer(0),{port1:r,port2:n}=new MessageChannel;r.onmessage=t=>{let{data:r}=t;return e(null!==r)},n.postMessage(t,[t])}))){const e=r();return{result:e instanceof Promise?await e:e}}return{result:!1}}}),f=function(e,t){const r=d(f,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0),n=((e,t)=>async r=>{let{data:{id:n,method:o,params:u}}=r;const c=t[o];try{if(void 0===c)throw s({method:o});const t=void 0===u?c():c(u);if(void 0===t)throw a({method:o});const r=t instanceof Promise?await t:t;if(null===n){if(void 0!==r.result)throw i({method:o})}else{if(void 0===r.result)throw i({method:o});const{result:t,transferables:s=[]}=r;e.postMessage({id:n,result:t},s)}}catch(t){const{message:r,status:o=-32603}=t;e.postMessage({error:{code:o,message:r},id:n})}})(e,r);return e.addEventListener(\"message\",n),()=>e.removeEventListener(\"message\",n)},p=e=>e.reduce(((e,t)=>e+t.length),0),m=(e,t)=>{const r=[];let n=0;e:for(;n<t;){const t=e.length;for(let o=0;o<t;o+=1){const t=e[o];void 0===r[o]&&(r[o]=[]);const s=t.shift();if(void 0===s)break e;r[o].push(s),0===o&&(n+=s.length)}}if(n>t){const o=n-t;r.forEach(((t,r)=>{const n=t.pop(),s=n.length-o;t.push(n.subarray(0,s)),e[r].unshift(n.subarray(s))}))}return r},h=new Map,v=(e=>(t,r,n)=>{const o=e.get(t);if(void 0===o){const o={channelDataArrays:n.map((e=>[e])),isComplete:!0,sampleRate:r};return e.set(t,o),o}return o.channelDataArrays.forEach(((e,t)=>e.push(n[t]))),o})(h),g=((e,t)=>(r,n,o,s)=>{const a=o>>3,i=\"subsequent\"===n?0:44,u=r.length,c=e(r[0]),l=new ArrayBuffer(c*u*a+i),d=new DataView(l);return\"subsequent\"!==n&&t(d,o,u,\"complete\"===n?c:Number.POSITIVE_INFINITY,s),r.forEach(((e,t)=>{let r=i+t*a;e.forEach((e=>{const t=e.length;for(let n=0;n<t;n+=1){const t=e[n];d.setInt16(r,t<0?32768*Math.max(-1,t):32767*Math.min(1,t),!0),r+=u*a}}))})),[l]})(p,((e,t,r,n,o)=>{const s=t>>3,a=Math.min(n*r*s,4294967251);e.setUint32(0,1380533830),e.setUint32(4,a+36,!0),e.setUint32(8,1463899717),e.setUint32(12,1718449184),e.setUint32(16,16,!0),e.setUint16(20,1,!0),e.setUint16(22,r,!0),e.setUint32(24,o,!0),e.setUint32(28,o*r*s,!0),e.setUint16(32,r*s,!0),e.setUint16(34,t,!0),e.setUint32(36,1684108385),e.setUint32(40,a,!0)})),x=new Map;f(self,{characterize:()=>({result:/^audio\\\\/wav$/}),encode:e=>{let{recordingId:t,timeslice:r}=e;const n=x.get(t);void 0!==n&&(x.delete(t),n.reject(new Error(\"Another request was made to initiate an encoding.\")));const o=h.get(t);if(null!==r){if(void 0===o||p(o.channelDataArrays[0])*(1e3/o.sampleRate)<r)return new Promise(((e,n)=>{x.set(t,{reject:n,resolve:e,timeslice:r})}));const e=m(o.channelDataArrays,Math.ceil(r*(o.sampleRate/1e3))),n=g(e,o.isComplete?\"initial\":\"subsequent\",16,o.sampleRate);return o.isComplete=!1,{result:n,transferables:n}}if(void 0!==o){const e=g(o.channelDataArrays,o.isComplete?\"complete\":\"subsequent\",16,o.sampleRate);return h.delete(t),{result:e,transferables:e}}return{result:[],transferables:[]}},record:e=>{let{recordingId:t,sampleRate:r,typedArrays:n}=e;const o=v(t,r,n),s=x.get(t);if(void 0!==s&&p(o.channelDataArrays[0])*(1e3/r)>=s.timeslice){const e=m(o.channelDataArrays,Math.ceil(s.timeslice*(r/1e3))),n=g(e,o.isComplete?\"initial\":\"subsequent\",16,r);o.isComplete=!1,x.delete(t),s.resolve({result:n,transferables:n})}return{result:null}}})})()})();`; // tslint:disable-line:max-line-length\n","import { createBroker } from 'broker-factory';\nimport { addUniqueNumber } from 'fast-unique-numbers';\nimport { TMediaEncoderHostWorkerDefinition } from 'media-encoder-host-worker';\nimport { IMediaEncoderHostBrokerDefinition } from './interfaces';\nimport { TMediaEncoderHostBrokerLoader, TMediaEncoderHostBrokerWrapper } from './types';\n\n/*\n * @todo Explicitly referencing the barrel file seems to be necessary when enabling the\n * isolatedModules compiler option.\n */\nexport * from './interfaces/index';\nexport * from './types/index';\n\nconst encoderIds: Set<number> = new Set();\n\nexport const wrap: TMediaEncoderHostBrokerWrapper = createBroker<IMediaEncoderHostBrokerDefinition, TMediaEncoderHostWorkerDefinition>({\n    encode: ({ call }) => {\n        return async (encoderId, timeslice) => {\n            const arrayBuffers = await call('encode', { encoderId, timeslice });\n\n            encoderIds.delete(encoderId);\n\n            return arrayBuffers;\n        };\n    },\n    instantiate: ({ call }) => {\n        return async (mimeType, sampleRate) => {\n            const encoderId = addUniqueNumber(encoderIds);\n            const port = await call('instantiate', { encoderId, mimeType, sampleRate });\n\n            return { encoderId, port };\n        };\n    },\n    register: ({ call }) => {\n        return (port) => {\n            return call('register', { port }, [port]);\n        };\n    }\n});\n\nexport const load: TMediaEncoderHostBrokerLoader = (url: string) => {\n    const worker = new Worker(url);\n\n    return wrap(worker);\n};\n","import { load as loadWorker } from 'media-encoder-host-broker';\nimport { worker } from './worker/worker';\n\nconst blob: Blob = new Blob([worker], { type: 'application/javascript; charset=utf-8' });\n\nconst url: string = URL.createObjectURL(blob);\n\nconst mediaEncoderHost = loadWorker(url);\n\nexport const connect = mediaEncoderHost.connect;\n\nexport const disconnect = mediaEncoderHost.disconnect;\n\nexport const encode = mediaEncoderHost.encode;\n\nexport const instantiate = mediaEncoderHost.instantiate;\n\nexport const isSupported = mediaEncoderHost.isSupported;\n\nexport const register = mediaEncoderHost.register;\n\nURL.revokeObjectURL(url);\n","// This is the minified and stringified code of the media-encoder-host-worker package.\nexport const worker = `(()=>{var e={775:function(e,t,r){!function(e,t,r,n){\"use strict\";var o=function(e,t){return void 0===t?e:t.reduce((function(e,t){if(\"capitalize\"===t){var o=e.charAt(0).toUpperCase(),s=e.slice(1);return\"\".concat(o).concat(s)}return\"dashify\"===t?r(e):\"prependIndefiniteArticle\"===t?\"\".concat(n(e),\" \").concat(e):e}),e)},s=function(e){var t=e.name+e.modifiers.map((function(e){return\"\\\\\\\\.\".concat(e,\"\\\\\\\\(\\\\\\\\)\")})).join(\"\");return new RegExp(\"\\\\\\\\$\\\\\\\\{\".concat(t,\"}\"),\"g\")},a=function(e,r){for(var n=/\\\\\\${([^.}]+)((\\\\.[^(]+\\\\(\\\\))*)}/g,a=[],i=n.exec(e);null!==i;){var c={modifiers:[],name:i[1]};if(void 0!==i[3])for(var u=/\\\\.[^(]+\\\\(\\\\)/g,l=u.exec(i[2]);null!==l;)c.modifiers.push(l[0].slice(1,-2)),l=u.exec(i[2]);a.push(c),i=n.exec(e)}var d=a.reduce((function(e,n){return e.map((function(e){return\"string\"==typeof e?e.split(s(n)).reduce((function(e,s,a){return 0===a?[s]:n.name in r?[].concat(t(e),[o(r[n.name],n.modifiers),s]):[].concat(t(e),[function(e){return o(e[n.name],n.modifiers)},s])}),[]):[e]})).reduce((function(e,r){return[].concat(t(e),t(r))}),[])}),[e]);return function(e){return d.reduce((function(r,n){return[].concat(t(r),\"string\"==typeof n?[n]:[n(e)])}),[]).join(\"\")}},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=void 0===e.code?void 0:a(e.code,t),n=void 0===e.message?void 0:a(e.message,t);function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0,s=void 0===o&&(t instanceof Error||void 0!==t.code&&\"Exception\"===t.code.slice(-9))?{cause:t,missingParameters:{}}:{cause:o,missingParameters:t},a=s.cause,i=s.missingParameters,c=void 0===n?new Error:new Error(n(i));return null!==a&&(c.cause=a),void 0!==r&&(c.code=r(i)),void 0!==e.status&&(c.status=e.status),c}return o};e.compile=i}(t,r(106),r(881),r(507))},881:e=>{\"use strict\";e.exports=(e,t)=>{if(\"string\"!=typeof e)throw new TypeError(\"expected a string\");return e.trim().replace(/([a-z])([A-Z])/g,\"$1-$2\").replace(/\\\\W/g,(e=>/[À-ž]/.test(e)?e:\"-\")).replace(/^-+|-+$/g,\"\").replace(/-{2,}/g,(e=>t&&t.condense?\"-\":e)).toLowerCase()}},107:function(e,t){!function(e){\"use strict\";var t=function(e){return function(t){var r=e(t);return t.add(r),r}},r=function(e){return function(t,r){return e.set(t,r),r}},n=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,o=536870912,s=2*o,a=function(e,t){return function(r){var a=t.get(r),i=void 0===a?r.size:a<s?a+1:0;if(!r.has(i))return e(r,i);if(r.size<o){for(;r.has(i);)i=Math.floor(Math.random()*s);return e(r,i)}if(r.size>n)throw new Error(\"Congratulations, you created a collection of unique numbers which uses all available integers!\");for(;r.has(i);)i=Math.floor(Math.random()*n);return e(r,i)}},i=new WeakMap,c=r(i),u=a(c,i),l=t(u);e.addUniqueNumber=l,e.generateUniqueNumber=u}(t)},507:e=>{var t=function(e){var t,r,n=/\\\\w+/.exec(e);if(!n)return\"an\";var o=(r=n[0]).toLowerCase(),s=[\"honest\",\"hour\",\"hono\"];for(t in s)if(0==o.indexOf(s[t]))return\"an\";if(1==o.length)return\"aedhilmnorsx\".indexOf(o)>=0?\"an\":\"a\";if(r.match(/(?!FJO|[HLMNS]Y.|RY[EO]|SQU|(F[LR]?|[HL]|MN?|N|RH?|S[CHKLMNPTVW]?|X(YL)?)[AEIOU])[FHLMNRSX][A-Z]/))return\"an\";var a=[/^e[uw]/,/^onc?e\\\\b/,/^uni([^nmd]|mo)/,/^u[bcfhjkqrst][aeiou]/];for(t=0;t<a.length;t++)if(o.match(a[t]))return\"a\";return r.match(/^U[NK][AIEO]/)?\"a\":r==r.toUpperCase()?\"aedhilmnorsx\".indexOf(o[0])>=0?\"an\":\"a\":\"aeiou\".indexOf(o[0])>=0||o.match(/^y(b[lor]|cl[ea]|fere|gg|p[ios]|rou|tt)/)?\"an\":\"a\"};void 0!==e.exports?e.exports=t:window.indefiniteArticle=t},768:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports},907:(e,t,r)=>{var n=r(768);e.exports=function(e){if(Array.isArray(e))return n(e)},e.exports.__esModule=!0,e.exports.default=e.exports},642:e=>{e.exports=function(e){if(\"undefined\"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e[\"@@iterator\"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},344:e=>{e.exports=function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")},e.exports.__esModule=!0,e.exports.default=e.exports},106:(e,t,r)=>{var n=r(907),o=r(642),s=r(906),a=r(344);e.exports=function(e){return n(e)||o(e)||s(e)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},906:(e,t,r)=>{var n=r(768);e.exports=function(e,t){if(e){if(\"string\"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===r&&e.constructor&&(r=e.constructor.name),\"Map\"===r||\"Set\"===r?Array.from(e):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,r),s.exports}(()=>{\"use strict\";var e=r(775);const t=-32603,n=-32602,o=-32601,s=(0,e.compile)({message:'The requested method called \"\\${method}\" is not supported.',status:o}),a=(0,e.compile)({message:'The handler of the method called \"\\${method}\" returned no required result.',status:t}),i=(0,e.compile)({message:'The handler of the method called \"\\${method}\" returned an unexpected result.',status:t}),c=(0,e.compile)({message:'The specified parameter called \"portId\" with the given value \"\\${portId}\" does not identify a port connected to this worker.',status:n});var u=r(107);const l=new Map,d=(e,t,r)=>({...t,connect:r=>{let{port:n}=r;n.start();const o=e(n,t),s=(0,u.generateUniqueNumber)(l);return l.set(s,(()=>{o(),n.close(),l.delete(s)})),{result:s}},disconnect:e=>{let{portId:t}=e;const r=l.get(t);if(void 0===r)throw c({portId:t.toString()});return r(),{result:null}},isSupported:async()=>{if(await new Promise((e=>{const t=new ArrayBuffer(0),{port1:r,port2:n}=new MessageChannel;r.onmessage=t=>{let{data:r}=t;return e(null!==r)},n.postMessage(t,[t])}))){const e=r();return{result:e instanceof Promise?await e:e}}return{result:!1}}}),f=function(e,t){const r=d(f,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0),n=((e,t)=>async r=>{let{data:{id:n,method:o,params:c}}=r;const u=t[o];try{if(void 0===u)throw s({method:o});const t=void 0===c?u():u(c);if(void 0===t)throw a({method:o});const r=t instanceof Promise?await t:t;if(null===n){if(void 0!==r.result)throw i({method:o})}else{if(void 0===r.result)throw i({method:o});const{result:t,transferables:s=[]}=r;e.postMessage({id:n,result:t},s)}}catch(t){const{message:r,status:o=-32603}=t;e.postMessage({error:{code:o,message:r},id:n})}})(e,r);return e.addEventListener(\"message\",n),()=>e.removeEventListener(\"message\",n)},p=e=>{e.onmessage=null,e.close()},m=new WeakMap,h=new WeakMap,g=(e=>{const t=(r=e,{...r,connect:e=>{let{call:t}=e;return async()=>{const{port1:e,port2:r}=new MessageChannel,n=await t(\"connect\",{port:e},[e]);return m.set(r,n),r}},disconnect:e=>{let{call:t}=e;return async e=>{const r=m.get(e);if(void 0===r)throw new Error(\"The given port is not connected.\");await t(\"disconnect\",{portId:r})}},isSupported:e=>{let{call:t}=e;return()=>t(\"isSupported\")}});var r;return e=>{const r=(e=>{if(h.has(e))return h.get(e);const t=new Map;return h.set(e,t),t})(e);e.addEventListener(\"message\",(e=>{let{data:t}=e;const{id:n}=t;if(null!==n&&r.has(n)){const{reject:e,resolve:o}=r.get(n);r.delete(n),void 0===t.error?o(t.result):e(new Error(t.error.message))}})),(e=>\"function\"==typeof e.start)(e)&&e.start();const n=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return new Promise(((s,a)=>{const i=(0,u.generateUniqueNumber)(r);r.set(i,{reject:a,resolve:s}),null===n?e.postMessage({id:i,method:t},o):e.postMessage({id:i,method:t,params:n},o)}))},o=function(t,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e.postMessage({id:null,method:t,params:r},n)};let s={};for(const[e,r]of Object.entries(t))s={...s,[e]:r({call:n,notify:o})};return{...s}}})({characterize:e=>{let{call:t}=e;return()=>t(\"characterize\")},encode:e=>{let{call:t}=e;return(e,r)=>t(\"encode\",{recordingId:e,timeslice:r})},record:e=>{let{call:t}=e;return async(e,r,n)=>{await t(\"record\",{recordingId:e,sampleRate:r,typedArrays:n},n.map((e=>{let{buffer:t}=e;return t})))}}}),v=async(e,t)=>{const r=g(t),n=await r.characterize(),o=n.toString();if(e.has(o))throw new Error(\"There is already an encoder stored which handles exactly the same mime types.\");return e.set(o,[n,r]),n},w=new Map,x=(e=>t=>{const r=e.get(t);if(void 0===r)throw new Error(\"There was no instance of an encoder stored with the given id.\");return r})(w),y=((e,t)=>r=>{const n=t(r);return e.delete(r),n})(w,x),M=new Map,b=((e,t)=>r=>{const[n,o,s,a]=t(r);return s?new Promise((t=>{o.onmessage=s=>{let{data:i}=s;0===i.length?(e(o),t(n.encode(r,null))):n.record(r,a,i)}})):n.encode(r,null)})(p,y),E=(e=>t=>{for(const[r,n]of Array.from(e.values()))if(r.test(t))return n;throw new Error(\"There is no encoder registered which could handle the given mimeType.\")})(M),A=((e,t,r)=>(n,o,s)=>{if(t.has(n))throw new Error('There is already an encoder registered with an id called \"'.concat(n,'\".'));const a=r(o),{port1:i,port2:c}=new MessageChannel,u=[a,i,!0,s];return t.set(n,u),i.onmessage=t=>{let{data:r}=t;0===r.length?(e(i),u[2]=!1):a.record(n,s,r.map((e=>\"number\"==typeof e?new Float32Array(e):e)))},c})(p,w,E),I=(e=>(t,r)=>{const[n]=e(t);return n.encode(t,r)})(x);f(self,{encode:async e=>{let{encoderId:t,timeslice:r}=e;const n=null===r?await b(t):await I(t,r);return{result:n,transferables:n}},instantiate:e=>{let{encoderId:t,mimeType:r,sampleRate:n}=e;const o=A(t,r,n);return{result:o,transferables:[o]}},register:async e=>{let{port:t}=e;return{result:await v(M,t)}}})})()})();`; // tslint:disable-line:max-line-length\n","import { IBlobEvent } from '../interfaces';\nimport { TBlobEventFactoryFactory } from '../types';\n\nexport const createBlobEventFactory: TBlobEventFactoryFactory = (nativeBlobEventConstructor) => {\n    return (type, blobEventInit) => {\n        // Bug #14: Safari does not yet support the BlobEvent.\n        if (nativeBlobEventConstructor === null) {\n            const { data, ...eventInit } = blobEventInit;\n            const fakeBlobEvent = <IBlobEvent>new Event(type, eventInit);\n\n            (<Omit<IBlobEvent, 'data'> & { -readonly [P in 'data']: IBlobEvent[P] }>fakeBlobEvent).data = data;\n\n            return fakeBlobEvent;\n        }\n\n        return new nativeBlobEventConstructor(type, blobEventInit);\n    };\n};\n","import { TInvalidModificationErrorFactory } from '../types';\n\nexport const createInvalidModificationError: TInvalidModificationErrorFactory = (message = '') => {\n    try {\n        return new DOMException(message, 'InvalidModificationError');\n    } catch (err) {\n        // @todo Edge is the only browser that does not yet allow to construct a DOMException.\n        err.code = 13;\n        err.message = message;\n        err.name = 'InvalidModificationError';\n\n        return err;\n    }\n};\n","import { TNotSupportedErrorFactory } from '../types';\n\nexport const createNotSupportedError: TNotSupportedErrorFactory = () => {\n    try {\n        return new DOMException('', 'NotSupportedError');\n    } catch (err) {\n        // @todo Edge is the only browser that does not yet allow to construct a DOMException.\n        err.code = 9;\n        err.name = 'NotSupportedError';\n\n        return err;\n    }\n};\n","/**\n * @license Use of this source code is governed by an MIT-style license that\n * can be found in the LICENSE file at https://github.com/cartant/rxjs-interop\n */\n\ndeclare global {\n  interface SymbolConstructor {\n    readonly observable: symbol;\n  }\n}\n\nexport const observable = Symbol.observable || \"@@observable\";\n","/**\n * @license Use of this source code is governed by an MIT-style license that\n * can be found in the LICENSE file at https://github.com/cartant/rxjs-interop\n */\n\nimport { Observer, PartialObserver } from \"./types\";\n\nconst noop = () => {};\nconst rethrow = (error: unknown) => {\n  /* eslint-disable-next-line etc/throw-error */\n  throw error;\n};\n\nexport function toObserver<T>(observer?: PartialObserver<T>): Observer<T> {\n  if (observer) {\n    if (observer.next && observer.error && observer.complete) {\n      return observer as Observer<T>;\n    }\n    return {\n      complete: (observer.complete ?? noop).bind(observer),\n      error: (observer.error ?? rethrow).bind(observer),\n      next: (observer.next ?? noop).bind(observer),\n    };\n  }\n  return {\n    complete: noop,\n    error: rethrow,\n    next: noop,\n  };\n}\n","import { TAnimationFrameFactory } from '../types';\n\nexport const createAnimationFrame: TAnimationFrameFactory = (emitNotSupportedError, window, wrapSubscribeFunction) => {\n    return () =>\n        wrapSubscribeFunction((observer) => {\n            if (window === null || window.cancelAnimationFrame === undefined || window.requestAnimationFrame === undefined) {\n                return emitNotSupportedError(observer);\n            }\n\n            let animationFrameHandle = window.requestAnimationFrame(function animationFrameCallback(timestamp): void {\n                animationFrameHandle = window.requestAnimationFrame(animationFrameCallback);\n\n                observer.next(timestamp);\n            });\n\n            return () => window.cancelAnimationFrame(animationFrameHandle);\n        });\n};\n","import { TEmitNotSupportedErrorFunction } from '../types';\n\nexport const emitNotSupportedError: TEmitNotSupportedErrorFunction = (observer) => {\n    observer.error(new Error('The required browser API seems to be not supported.'));\n\n    return () => {}; // tslint:disable-line:no-empty\n};\n","import { patch, toObserver } from 'rxjs-interop';\nimport { createAnimationFrame } from './factories/animation-frame';\nimport { createAttribute } from './factories/attribute';\nimport { createGeolocation } from './factories/geolocation';\nimport { createIntersections } from './factories/intersections';\nimport { createMapSubscribableThing } from './factories/map-subscribable-thing';\nimport { createMediaDevices } from './factories/media-devices';\nimport { createMediaQueryMatch } from './factories/media-query-match';\nimport { createMetrics } from './factories/metrics';\nimport { createMidiInputs } from './factories/midi-inputs';\nimport { createMidiOutputs } from './factories/midi-outputs';\nimport { createMutations } from './factories/mutations';\nimport { createOn } from './factories/on';\nimport { createOnline } from './factories/online';\nimport { createPermissionState } from './factories/permission-state';\nimport { createPrependSubscribableThing } from './factories/prepend-subscribable-thing';\nimport { createReports } from './factories/reports';\nimport { createResizes } from './factories/resizes';\nimport { createUnhandledRejection } from './factories/unhandled-rejection';\nimport { createVideoFrame } from './factories/video-frame';\nimport { createWakeLock } from './factories/wake-lock';\nimport { createWindow } from './factories/window';\nimport { createWrapSubscribeFunction } from './factories/wrap-subscribe-function';\nimport { emitNotSupportedError } from './functions/emit-not-supported-error';\n\n/*\n * @todo Explicitly referencing the barrel file seems to be necessary when enabling the\n * isolatedModules compiler option.\n */\nexport * from './interfaces/index';\nexport * from './types/index';\n\nconst window = createWindow();\nconst wrapSubscribeFunction = createWrapSubscribeFunction(patch, toObserver);\n\nexport const animationFrame = createAnimationFrame(emitNotSupportedError, window, wrapSubscribeFunction);\n\nexport const mutations = createMutations(emitNotSupportedError, window, wrapSubscribeFunction);\n\nconst mapSubscribableThing = createMapSubscribableThing(wrapSubscribeFunction);\nconst prependSubscribableThing = createPrependSubscribableThing(wrapSubscribeFunction);\n\nexport const attribute = createAttribute(mapSubscribableThing, mutations, prependSubscribableThing);\n\nexport const geolocation = createGeolocation(emitNotSupportedError, window, wrapSubscribeFunction);\n\nexport const intersections = createIntersections(emitNotSupportedError, window, wrapSubscribeFunction);\n\nexport const mediaDevices = createMediaDevices(emitNotSupportedError, window, wrapSubscribeFunction);\n\nexport const mediaQueryMatch = createMediaQueryMatch(emitNotSupportedError, window, wrapSubscribeFunction);\n\nexport const metrics = createMetrics(emitNotSupportedError, window, wrapSubscribeFunction);\n\nexport const midiInputs = createMidiInputs(wrapSubscribeFunction);\n\nexport const midiOutputs = createMidiOutputs(wrapSubscribeFunction);\n\nexport const on = createOn(wrapSubscribeFunction);\n\nexport const online = createOnline(emitNotSupportedError, window, wrapSubscribeFunction);\n\nexport const permissionState = createPermissionState(emitNotSupportedError, window, wrapSubscribeFunction);\n\nexport const reports = createReports(emitNotSupportedError, window, wrapSubscribeFunction);\n\nexport const resizes = createResizes(emitNotSupportedError, window, wrapSubscribeFunction);\n\nexport const unhandledRejection = createUnhandledRejection(emitNotSupportedError, window, wrapSubscribeFunction);\n\nexport const videoFrame = createVideoFrame(emitNotSupportedError, wrapSubscribeFunction);\n\nexport const wakeLock = createWakeLock(emitNotSupportedError, window, wrapSubscribeFunction);\n","import { TWindow, TWindowFactory } from '../types';\n\n// @todo TypeScript does not include type definitions for the Reporting API yet.\nexport const createWindow: TWindowFactory = () => (typeof window === 'undefined' ? null : <TWindow>window);\n","import { Observer, Subscribable } from 'rxjs-interop';\nimport { TObserverParameters, TSubscribableThing, TSubscribeFunction, TWrapSubscribeFunctionFactory } from '../types';\n\nexport const createWrapSubscribeFunction: TWrapSubscribeFunctionFactory = (patch, toObserver) => {\n    const emptyFunction = () => {}; // tslint:disable-line:no-empty\n    const isNextFunction = <T>(args: TObserverParameters<T>): args is [Observer<T>['next']] => typeof args[0] === 'function';\n\n    return <T>(innerSubscribe: TSubscribeFunction<T>) => {\n        const subscribe = <TSubscribableThing<T>>((...args: TObserverParameters<T>) => {\n            const unsubscribe = innerSubscribe(isNextFunction(args) ? toObserver({ next: args[0] }) : toObserver(...args));\n\n            if (unsubscribe !== undefined) {\n                return unsubscribe;\n            }\n\n            return emptyFunction;\n        });\n\n        subscribe[Symbol.observable] = () => ({\n            subscribe: (...args: Parameters<Subscribable<T>['subscribe']>) => ({ unsubscribe: subscribe(...args) })\n        });\n\n        return patch(subscribe);\n    };\n};\n","/**\n * @license Use of this source code is governed by an MIT-style license that\n * can be found in the LICENSE file at https://github.com/cartant/rxjs-interop\n */\n\nimport { observable } from \"./symbols\";\nimport { InteropObservable } from \"./types\";\n\nexport function patch<T extends InteropObservable<any>>(instance: T): T;\nexport function patch<T extends new (...args: any[]) => InteropObservable<any>>(\n  constructor: T\n): T;\nexport function patch(\n  arg: InteropObservable<any> | (new (...args: any[]) => InteropObservable<any>)\n): InteropObservable<any> | (new (...args: any[]) => InteropObservable<any>) {\n  if (!Symbol.observable) {\n    if (\n      typeof arg === \"function\" &&\n      arg.prototype &&\n      arg.prototype[Symbol.observable]\n    ) {\n      (arg.prototype as any)[observable] = arg.prototype[Symbol.observable];\n      delete arg.prototype[Symbol.observable];\n    } else {\n      (arg as any)[observable] = arg[Symbol.observable];\n      delete arg[Symbol.observable];\n    }\n  }\n  return arg;\n}\n","import { TMutationsFactory } from '../types';\n\nexport const createMutations: TMutationsFactory = (emitNotSupportedError, window, wrapSubscribeFunction) => {\n    return (htmlElement, options) =>\n        wrapSubscribeFunction((observer) => {\n            if (window === null || window.MutationObserver === undefined) {\n                return emitNotSupportedError(observer);\n            }\n\n            const mutationObserver = new window.MutationObserver((records) => observer.next(records));\n\n            try {\n                mutationObserver.observe(htmlElement, options);\n            } catch (err) {\n                observer.error(err);\n            }\n\n            return () => mutationObserver.disconnect();\n        });\n};\n","import { TSubscribableThing, TWrapSubscribeFunctionFunction } from '../types';\n\nexport const createMapSubscribableThing =\n    (wrapSubscribeFunction: TWrapSubscribeFunctionFunction) =>\n    <TValue, TMappedValue>(\n        subscribableThing: TSubscribableThing<TValue>,\n        map: (value: TValue) => TMappedValue\n    ): TSubscribableThing<TMappedValue> =>\n        wrapSubscribeFunction((observer) => subscribableThing({ ...observer, next: (value) => observer.next(map(value)) }));\n","import { TSubscribableThing, TWrapSubscribeFunctionFunction } from '../types';\n\nexport const createPrependSubscribableThing =\n    (wrapSubscribeFunction: TWrapSubscribeFunctionFunction) =>\n    <TValue, TPrependedValue>(\n        subscribableThing: TSubscribableThing<TValue>,\n        prependedValue: TPrependedValue\n    ): TSubscribableThing<TPrependedValue | TValue> =>\n        wrapSubscribeFunction((observer) => {\n            observer.next(prependedValue);\n\n            return subscribableThing(observer);\n        });\n","import { TSubscribableThing } from '../types';\nimport type { createMapSubscribableThing } from './map-subscribable-thing';\nimport type { createMutations } from './mutations';\nimport type { createPrependSubscribableThing } from './prepend-subscribable-thing';\n\nexport const createAttribute = (\n    mapSubscribableThing: ReturnType<typeof createMapSubscribableThing>,\n    mutations: ReturnType<typeof createMutations>,\n    prependSubscribableThing: ReturnType<typeof createPrependSubscribableThing>\n) => {\n    return (htmlElement: HTMLElement, name: string): TSubscribableThing<null | string> => {\n        const getAttribute = () => htmlElement.getAttribute(name);\n\n        return prependSubscribableThing(\n            mapSubscribableThing(\n                mutations(htmlElement, {\n                    attributeFilter: [name],\n                    childList: false,\n                    subtree: false\n                }),\n                () => getAttribute()\n            ),\n            getAttribute()\n        );\n    };\n};\n","import { TEmitNotSupportedErrorFunction, TSubscribableThing, TWindow, TWrapSubscribeFunctionFunction } from '../types';\n\nexport const createGeolocation = (\n    emitNotSupportedError: TEmitNotSupportedErrorFunction,\n    window: null | TWindow,\n    wrapSubscribeFunction: TWrapSubscribeFunctionFunction\n) => {\n    return (options?: PositionOptions): TSubscribableThing<GeolocationPosition> =>\n        wrapSubscribeFunction((observer) => {\n            if (\n                window === null ||\n                window.navigator === undefined ||\n                window.navigator.geolocation === undefined ||\n                window.navigator.geolocation.clearWatch === undefined ||\n                window.navigator.geolocation.watchPosition === undefined\n            ) {\n                return emitNotSupportedError(observer);\n            }\n\n            const watchId = window.navigator.geolocation.watchPosition(\n                (position) => observer.next(position),\n                (err) => observer.error(err),\n                options\n            );\n\n            return () => window.navigator.geolocation.clearWatch(watchId);\n        });\n};\n","import { TIntersectionsFactory } from '../types';\n\nexport const createIntersections: TIntersectionsFactory = (emitNotSupportedError, window, wrapSubscribeFunction) => {\n    return (htmlElement, options) =>\n        wrapSubscribeFunction((observer) => {\n            if (window === null || window.IntersectionObserver === undefined) {\n                return emitNotSupportedError(observer);\n            }\n\n            const intersectionObserverObserver = new window.IntersectionObserver((entries) => observer.next(entries), options);\n\n            try {\n                intersectionObserverObserver.observe(htmlElement);\n            } catch (err) {\n                observer.error(err);\n            }\n\n            return () => intersectionObserverObserver.disconnect();\n        });\n};\n","import { TMediaDevicesFactory } from '../types';\n\nexport const createMediaDevices: TMediaDevicesFactory = (emitNotSupportedError, window, wrapSubscribeFunction) => {\n    return () =>\n        wrapSubscribeFunction((observer) => {\n            if (\n                window === null ||\n                window.navigator === undefined ||\n                window.navigator.mediaDevices === undefined ||\n                window.navigator.mediaDevices.enumerateDevices === undefined\n            ) {\n                return emitNotSupportedError(observer);\n            }\n\n            let isActive = true;\n\n            const enumerateDevices = () => {\n                window.navigator.mediaDevices.enumerateDevices().then(\n                    (mediaDevices) => {\n                        if (isActive) {\n                            observer.next(mediaDevices);\n                        }\n                    },\n                    (err) => {\n                        if (isActive) {\n                            unsubscribe();\n\n                            observer.error(err);\n                        }\n                    }\n                );\n            };\n            const unsubscribe = () => {\n                isActive = false;\n                window.navigator.mediaDevices.removeEventListener('devicechange', enumerateDevices);\n            };\n\n            enumerateDevices();\n            window.navigator.mediaDevices.addEventListener('devicechange', enumerateDevices);\n\n            return unsubscribe;\n        });\n};\n","import { TMediaQueryMatchFactory } from '../types';\n\nexport const createMediaQueryMatch: TMediaQueryMatchFactory = (emitNotSupportedError, window, wrapSubscribeFunction) => {\n    return (mediaQueryString) =>\n        wrapSubscribeFunction((observer) => {\n            if (window === null || window.matchMedia === undefined) {\n                return emitNotSupportedError(observer);\n            }\n\n            const mediaQueryList = window.matchMedia(mediaQueryString);\n\n            observer.next(mediaQueryList.matches);\n\n            mediaQueryList.onchange = () => observer.next(mediaQueryList.matches);\n\n            return () => {\n                mediaQueryList.onchange = null;\n            };\n        });\n};\n","import { TMetricsFactory } from '../types';\n\nexport const createMetrics: TMetricsFactory = (emitNotSupportedError, window, wrapSubscribeFunction) => {\n    return (options) =>\n        wrapSubscribeFunction((observer) => {\n            if (window === null || window.PerformanceObserver === undefined) {\n                return emitNotSupportedError(observer);\n            }\n\n            const performanceObserver = new window.PerformanceObserver((entryList) => observer.next(entryList.getEntries()));\n\n            try {\n                performanceObserver.observe(options);\n            } catch (err) {\n                observer.error(err);\n            }\n\n            return () => performanceObserver.disconnect();\n        });\n};\n","import { TMidiInputsFactory } from '../types';\n\nexport const createMidiInputs: TMidiInputsFactory = (wrapSubscribeFunction) => {\n    return (midiAccess) =>\n        wrapSubscribeFunction((observer) => {\n            let midiInputs = Array.from(midiAccess.inputs.values());\n\n            const emitMidiInputs = () => {\n                const midiAccessInputs = midiAccess.inputs;\n\n                if (midiInputs.length !== midiAccessInputs.size || midiInputs.some(({ id }) => !midiAccessInputs.has(id))) {\n                    midiInputs = Array.from(midiAccessInputs.values());\n\n                    observer.next(midiInputs);\n                }\n            };\n\n            observer.next(midiInputs);\n            midiAccess.addEventListener('statechange', emitMidiInputs);\n\n            return () => midiAccess.removeEventListener('statechange', emitMidiInputs);\n        });\n};\n","import { TMidiOutputsFactory } from '../types';\n\nexport const createMidiOutputs: TMidiOutputsFactory = (wrapSubscribeFunction) => {\n    return (midiAccess) =>\n        wrapSubscribeFunction((observer) => {\n            let midiOutputs = Array.from(midiAccess.outputs.values());\n\n            const emitMidiOutputs = () => {\n                const midiAccessOutputs = midiAccess.outputs;\n\n                if (midiOutputs.length !== midiAccessOutputs.size || midiOutputs.some(({ id }) => !midiAccessOutputs.has(id))) {\n                    midiOutputs = Array.from(midiAccessOutputs.values());\n\n                    observer.next(midiOutputs);\n                }\n            };\n\n            observer.next(midiOutputs);\n            midiAccess.addEventListener('statechange', emitMidiOutputs);\n\n            return () => midiAccess.removeEventListener('statechange', emitMidiOutputs);\n        });\n};\n","import { TEventHandler, TEventType, TOnFactory } from '../types';\n\nexport const createOn: TOnFactory = (wrapSubscribeFunction) => {\n    return (target, type, options) =>\n        wrapSubscribeFunction((observer) => {\n            const listener: TEventHandler<typeof target> = (event) => observer.next(<TEventType<typeof target, typeof type>>event);\n\n            target.addEventListener(type, listener, options);\n\n            return () => target.removeEventListener(type, listener, options);\n        });\n};\n","import { IAugmentedError, IParameterObject, compile } from 'compilerr';\n\nconst JSON_RPC_ERROR_CODES = { INTERNAL_ERROR: -32603, INVALID_PARAMS: -32602, METHOD_NOT_FOUND: -32601 };\n\nexport const renderMethodNotFoundError: (missingParameters: IParameterObject) => IAugmentedError = compile({\n    message: 'The requested method called \"${method}\" is not supported.',\n    status: JSON_RPC_ERROR_CODES.METHOD_NOT_FOUND\n});\n\nexport const renderMissingResponseError: (missingParameters: IParameterObject) => IAugmentedError = compile({\n    message: 'The handler of the method called \"${method}\" returned no required result.',\n    status: JSON_RPC_ERROR_CODES.INTERNAL_ERROR\n});\n\nexport const renderUnexpectedResultError: (missingParameters: IParameterObject) => IAugmentedError = compile({\n    message: 'The handler of the method called \"${method}\" returned an unexpected result.',\n    status: JSON_RPC_ERROR_CODES.INTERNAL_ERROR\n});\n\nexport const renderUnknownPortIdError: (missingParameters: IParameterObject) => IAugmentedError = compile({\n    message: 'The specified parameter called \"portId\" with the given value \"${portId}\" does not identify a port connected to this worker.',\n    status: JSON_RPC_ERROR_CODES.INVALID_PARAMS\n});\n","import { generateUniqueNumber } from 'fast-unique-numbers';\nimport { on } from 'subscribable-things';\nimport { isSupported } from 'worker-factory';\nimport { createAddRecorderAudioWorkletModule } from './factories/add-recorder-audio-worklet-module';\nimport { createListener } from './factories/listener';\nimport { createPostMessageFactory } from './factories/post-message-factory';\nimport { createRecorderAudioWorkletNodeFactory } from './factories/recorder-audio-worklet-node-factory';\nimport { validateState } from './functions/validate-state';\nimport { worklet } from './worklet/worklet';\n\n/*\n * @todo Explicitly referencing the barrel file seems to be necessary when enabling the\n * isolatedModules compiler option.\n */\nexport * from './interfaces/index';\nexport * from './types/index';\n\nexport const addRecorderAudioWorkletModule = createAddRecorderAudioWorkletModule(Blob, URL, worklet);\n\nexport const createRecorderAudioWorkletNode = createRecorderAudioWorkletNodeFactory(\n    createListener,\n    createPostMessageFactory(generateUniqueNumber),\n    on,\n    validateState\n);\n\nexport { isSupported };\n","import { generateUniqueNumber } from 'fast-unique-numbers';\nimport { IDefaultWorkerDefinition, IReceiver, IWorkerDefinition } from '../interfaces';\nimport { TDestroyWorkerFunction, TWorkerImplementation } from '../types';\nimport { renderUnknownPortIdError } from './error-renderers';\nimport { isSupportingTransferables } from './is-supporting-transferables';\n\nconst DESTROY_WORKER_FUNCTIONS: Map<number, TDestroyWorkerFunction> = new Map();\n\nexport const extendWorkerImplementation = <T extends IWorkerDefinition>(\n    createWorker: (receiver: IReceiver, workerImplementation: TWorkerImplementation<T>) => TDestroyWorkerFunction,\n    partialWorkerImplementation: TWorkerImplementation<T>,\n    isSupportedFunction: () => boolean | Promise<boolean>\n): TWorkerImplementation<T> & TWorkerImplementation<IDefaultWorkerDefinition> => ({\n    ...partialWorkerImplementation,\n    connect: ({ port }) => {\n        port.start();\n\n        const destroyWorker = createWorker(port, partialWorkerImplementation);\n        const portId = generateUniqueNumber(DESTROY_WORKER_FUNCTIONS);\n\n        DESTROY_WORKER_FUNCTIONS.set(portId, () => {\n            destroyWorker();\n            port.close();\n            DESTROY_WORKER_FUNCTIONS.delete(portId);\n        });\n\n        return { result: portId };\n    },\n    disconnect: ({ portId }) => {\n        const destroyWorker = DESTROY_WORKER_FUNCTIONS.get(portId);\n\n        if (destroyWorker === undefined) {\n            throw renderUnknownPortIdError({ portId: portId.toString() });\n        }\n\n        destroyWorker();\n\n        return { result: null };\n    },\n    isSupported: async () => {\n        const isSelfSupported = await isSupportingTransferables();\n\n        if (isSelfSupported) {\n            const result = isSupportedFunction();\n            const synchronousResult = result instanceof Promise ? await result : result;\n\n            return { result: synchronousResult };\n        }\n\n        return { result: false };\n    }\n});\n","export const createAddRecorderAudioWorkletModule = (blobConstructor: typeof Blob, urlConstructor: typeof URL, worklet: string) => {\n    return async (addAudioWorkletModule: (url: string) => Promise<void>) => {\n        const blob = new blobConstructor([worklet], { type: 'application/javascript; charset=utf-8' });\n        const url = urlConstructor.createObjectURL(blob);\n\n        try {\n            await addAudioWorkletModule(url);\n        } finally {\n            urlConstructor.revokeObjectURL(url);\n        }\n    };\n};\n","// This is the minified and stringified code of the recorder-audio-worklet-processor package.\nexport const worklet = `(()=>{\"use strict\";class e extends AudioWorkletProcessor{constructor(){super(),this._encoderPort=null,this._state=\"inactive\",this.port.onmessage=e=>{let{data:t}=e;\"pause\"===t.method?\"active\"===this._state||\"recording\"===this._state?(this._state=\"paused\",this._sendAcknowledgement(t.id)):this._sendUnexpectedStateError(t.id):\"record\"===t.method?\"inactive\"===this._state?(this._encoderPort=t.params.encoderPort,this._state=\"active\",this._sendAcknowledgement(t.id)):this._sendUnexpectedStateError(t.id):\"resume\"===t.method?\"paused\"===this._state?(this._state=\"active\",this._sendAcknowledgement(t.id)):this._sendUnexpectedStateError(t.id):\"stop\"===t.method?\"active\"!==this._state&&\"paused\"!==this._state&&\"recording\"!==this._state||null===this._encoderPort?this._sendUnexpectedStateError(t.id):(this._stop(this._encoderPort),this._sendAcknowledgement(t.id)):\"number\"==typeof t.id&&this.port.postMessage({error:{code:-32601,message:\"The requested method is not supported.\"},id:t.id})}}process(e){let[t]=e;if(\"inactive\"===this._state||\"paused\"===this._state)return!0;if(\"active\"===this._state){if(void 0===t)throw new Error(\"No channelData was received for the first input.\");if(0===t.length)return!0;this._state=\"recording\"}if(\"recording\"===this._state&&null!==this._encoderPort){if(void 0===t)throw new Error(\"No channelData was received for the first input.\");if(0!==t.length)return this._encoderPort.postMessage(t,t.map((e=>{let{buffer:t}=e;return t}))),!0;this._stop(this._encoderPort)}return!1}_sendAcknowledgement(e){this.port.postMessage({id:e,result:null})}_sendUnexpectedStateError(e){this.port.postMessage({error:{code:-32603,message:\"The internal state does not allow to process the given message.\"},id:e})}_stop(e){e.postMessage([]),e.close(),this._encoderPort=null,this._state=\"stopped\"}}e.parameterDescriptors=[],registerProcessor(\"recorder-audio-worklet-processor\",e)})();`; // tslint:disable-line:max-line-length\n","import type {\n    IAudioWorkletNode,\n    TAudioWorkletNodeConstructor,\n    TContext,\n    TNativeAudioWorkletNode,\n    TNativeAudioWorkletNodeConstructor,\n    TNativeContext\n} from 'standardized-audio-context';\nimport type { on as onFunction } from 'subscribable-things';\nimport type { validateState as validateStateFunction } from '../functions/validate-state';\nimport { INativeRecorderAudioWorkletNode, IRecorderAudioWorkletNode } from '../interfaces';\nimport { TAnyRecorderAudioWorkletNodeOptions, TState } from '../types';\nimport type { createListener as createListenerFunction } from './listener';\nimport type { createPostMessageFactory } from './post-message-factory';\n\nexport const createRecorderAudioWorkletNodeFactory = (\n    createListener: typeof createListenerFunction,\n    createPostMessage: ReturnType<typeof createPostMessageFactory>,\n    on: typeof onFunction,\n    validateState: typeof validateStateFunction\n) => {\n    return <T extends TContext | TNativeContext>(\n        audioWorkletNodeConstructor: T extends TContext ? TAudioWorkletNodeConstructor : TNativeAudioWorkletNodeConstructor,\n        context: T,\n        options: Partial<TAnyRecorderAudioWorkletNodeOptions<T>> = {}\n    ): T extends TContext ? IRecorderAudioWorkletNode<T> : INativeRecorderAudioWorkletNode => {\n        type TAnyAudioWorkletNode = T extends TContext ? IAudioWorkletNode<T> : TNativeAudioWorkletNode;\n        type TAnyRecorderAudioWorkletNode = T extends TContext ? IRecorderAudioWorkletNode<T> : INativeRecorderAudioWorkletNode;\n\n        const audioWorkletNode: TAnyAudioWorkletNode = new (<any>audioWorkletNodeConstructor)(context, 'recorder-audio-worklet-processor', {\n            ...options,\n            channelCountMode: 'explicit',\n            numberOfInputs: 1,\n            numberOfOutputs: 0\n        });\n        const ongoingRequests: Map<number, { reject: Function; resolve: Function }> = new Map();\n        const postMessage = createPostMessage(ongoingRequests, audioWorkletNode.port);\n        const unsubscribe = on(audioWorkletNode.port, 'message')(createListener(ongoingRequests));\n\n        audioWorkletNode.port.start();\n\n        let state: TState = 'inactive';\n\n        Object.defineProperties(audioWorkletNode, {\n            pause: {\n                get(): TAnyRecorderAudioWorkletNode['pause'] {\n                    return async () => {\n                        validateState(['recording'], state);\n\n                        state = 'paused';\n\n                        return postMessage({\n                            method: 'pause'\n                        });\n                    };\n                }\n            },\n            port: {\n                get(): TAnyRecorderAudioWorkletNode['port'] {\n                    throw new Error(\"The port of a RecorderAudioWorkletNode can't be accessed.\");\n                }\n            },\n            record: {\n                get(): TAnyRecorderAudioWorkletNode['record'] {\n                    return async (encoderPort: MessagePort) => {\n                        validateState(['inactive'], state);\n\n                        state = 'recording';\n\n                        return postMessage(\n                            {\n                                method: 'record',\n                                params: { encoderPort }\n                            },\n                            [encoderPort]\n                        );\n                    };\n                }\n            },\n            resume: {\n                get(): TAnyRecorderAudioWorkletNode['resume'] {\n                    return async () => {\n                        validateState(['paused'], state);\n\n                        state = 'recording';\n\n                        return postMessage({\n                            method: 'resume'\n                        });\n                    };\n                }\n            },\n            stop: {\n                get(): TAnyRecorderAudioWorkletNode['stop'] {\n                    return async () => {\n                        validateState(['paused', 'recording'], state);\n\n                        state = 'stopped';\n\n                        try {\n                            await postMessage({ method: 'stop' });\n                        } finally {\n                            unsubscribe();\n                        }\n                    };\n                }\n            }\n        });\n\n        return <TAnyRecorderAudioWorkletNode>audioWorkletNode;\n    };\n};\n","import type { IWorkerEvent } from 'broker-factory';\nimport type { IWorkerErrorMessage, IWorkerResultMessage } from 'worker-factory';\n\nexport const createListener = (ongoingRequests: Map<number, { reject: Function; resolve: Function }>) => {\n    return ({ data: message }: IWorkerEvent) => {\n        const { id } = message;\n\n        if (id !== null) {\n            const ongoingRequest = ongoingRequests.get(id);\n\n            if (ongoingRequest !== undefined) {\n                const { reject, resolve } = ongoingRequest;\n\n                ongoingRequests.delete(id);\n\n                if ((<IWorkerErrorMessage>message).error === undefined) {\n                    resolve((<IWorkerResultMessage>message).result);\n                } else {\n                    reject(new Error((<IWorkerErrorMessage>message).error.message));\n                }\n            }\n        }\n    };\n};\n","import type { generateUniqueNumber as generateUniqueNumberFunction } from 'fast-unique-numbers';\n\nexport const createPostMessageFactory = (generateUniqueNumber: typeof generateUniqueNumberFunction) => {\n    return (ongoingRequests: Map<number, { reject: Function; resolve: Function }>, port: MessagePort) => {\n        return (message: { method: string; params?: object }, transferables: Transferable[] = []): Promise<void> => {\n            return new Promise((resolve, reject) => {\n                const id = generateUniqueNumber(ongoingRequests);\n\n                ongoingRequests.set(id, { reject, resolve });\n\n                port.postMessage({ id, ...message }, transferables);\n            });\n        };\n    };\n};\n","import { TState } from '../types';\n\nexport const validateState = (expectedStates: TState[], currentState: TState): void => {\n    if (!expectedStates.includes(currentState)) {\n        throw new Error(\n            `Expected the state to be ${expectedStates\n                .map((expectedState) => `\"${expectedState}\"`)\n                .join(' or ')} but it was \"${currentState}\".`\n        );\n    }\n};\n","import { TAbortErrorFactory } from '../types';\n\nexport const createAbortError: TAbortErrorFactory = () => new DOMException('', 'AbortError');\n","import { IAudioNode, IAudioWorkletProcessor, IAudioWorkletProcessorConstructor } from './interfaces';\nimport {\n    TAudioNodeConnectionsStore,\n    TAudioNodeStore,\n    TAudioParamConnectionsStore,\n    TAudioParamStore,\n    TContext,\n    TContextStore,\n    TCycleCounters,\n    TInternalStateEventListener,\n    TNativeAudioWorkletNode,\n    TNativeContext\n} from './types';\n\nexport const ACTIVE_AUDIO_NODE_STORE: WeakSet<IAudioNode<TContext>> = new WeakSet();\n\nexport const AUDIO_NODE_CONNECTIONS_STORE: TAudioNodeConnectionsStore = new WeakMap();\n\nexport const AUDIO_NODE_STORE: TAudioNodeStore = new WeakMap();\n\nexport const AUDIO_PARAM_CONNECTIONS_STORE: TAudioParamConnectionsStore = new WeakMap();\n\nexport const AUDIO_PARAM_STORE: TAudioParamStore = new WeakMap();\n\nexport const CONTEXT_STORE: TContextStore = new WeakMap();\n\nexport const EVENT_LISTENERS: WeakMap<IAudioNode<TContext>, Set<TInternalStateEventListener>> = new WeakMap();\n\nexport const CYCLE_COUNTERS: TCycleCounters = new WeakMap();\n\n// This clunky name is borrowed from the spec. :-)\nexport const NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS: WeakMap<\n    TNativeContext,\n    Map<string, IAudioWorkletProcessorConstructor>\n> = new WeakMap();\n\nexport const NODE_TO_PROCESSOR_MAPS: WeakMap<\n    TNativeContext,\n    WeakMap<TNativeAudioWorkletNode, Promise<IAudioWorkletProcessor>>\n> = new WeakMap();\n","import { TConstructor } from '../types';\n\nconst handler = {\n    construct(): any {\n        return handler;\n    }\n};\n\nexport const isConstructible = (constructible: TConstructor): boolean => {\n    try {\n        const proxy = new Proxy(constructible, handler);\n\n        new proxy(); // tslint:disable-line:no-unused-expression\n    } catch {\n        return false;\n    }\n\n    return true;\n};\n","/*\n * This massive regex tries to cover all the following cases.\n *\n * import './path';\n * import defaultImport from './path';\n * import { namedImport } from './path';\n * import { namedImport as renamendImport } from './path';\n * import * as namespaceImport from './path';\n * import defaultImport, { namedImport } from './path';\n * import defaultImport, { namedImport as renamendImport } from './path';\n * import defaultImport, * as namespaceImport from './path';\n */\nconst IMPORT_STATEMENT_REGEX = /^import(?:(?:[\\s]+[\\w]+|(?:[\\s]+[\\w]+[\\s]*,)?[\\s]*\\{[\\s]*[\\w]+(?:[\\s]+as[\\s]+[\\w]+)?(?:[\\s]*,[\\s]*[\\w]+(?:[\\s]+as[\\s]+[\\w]+)?)*[\\s]*}|(?:[\\s]+[\\w]+[\\s]*,)?[\\s]*\\*[\\s]+as[\\s]+[\\w]+)[\\s]+from)?(?:[\\s]*)(\"([^\"\\\\]|\\\\.)+\"|'([^'\\\\]|\\\\.)+')(?:[\\s]*);?/; // tslint:disable-line:max-line-length\n\nexport const splitImportStatements = (source: string, url: string): [string, string] => {\n    const importStatements = [];\n\n    let sourceWithoutImportStatements = source.replace(/^[\\s]+/, '');\n    let result = sourceWithoutImportStatements.match(IMPORT_STATEMENT_REGEX);\n\n    while (result !== null) {\n        const unresolvedUrl = result[1].slice(1, -1);\n\n        const importStatementWithResolvedUrl = result[0]\n            .replace(/([\\s]+)?;?$/, '')\n            .replace(unresolvedUrl, new URL(unresolvedUrl, url).toString());\n        importStatements.push(importStatementWithResolvedUrl);\n\n        sourceWithoutImportStatements = sourceWithoutImportStatements.slice(result[0].length).replace(/^[\\s]+/, '');\n        result = sourceWithoutImportStatements.match(IMPORT_STATEMENT_REGEX);\n    }\n\n    return [importStatements.join(';'), sourceWithoutImportStatements];\n};\n","import { NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS } from '../globals';\nimport { isConstructible } from '../helpers/is-constructible';\nimport { splitImportStatements } from '../helpers/split-import-statements';\nimport { IAudioWorkletProcessorConstructor } from '../interfaces';\nimport { TAddAudioWorkletModuleFactory, TEvaluateAudioWorkletGlobalScopeFunction } from '../types';\n\nconst verifyParameterDescriptors = (parameterDescriptors: IAudioWorkletProcessorConstructor['parameterDescriptors']) => {\n    if (parameterDescriptors !== undefined && !Array.isArray(parameterDescriptors)) {\n        throw new TypeError('The parameterDescriptors property of given value for processorCtor is not an array.');\n    }\n};\n\nconst verifyProcessorCtor = <T extends IAudioWorkletProcessorConstructor>(processorCtor: T) => {\n    if (!isConstructible(processorCtor)) {\n        throw new TypeError('The given value for processorCtor should be a constructor.');\n    }\n\n    if (processorCtor.prototype === null || typeof processorCtor.prototype !== 'object') {\n        throw new TypeError('The given value for processorCtor should have a prototype.');\n    }\n};\n\nexport const createAddAudioWorkletModule: TAddAudioWorkletModuleFactory = (\n    cacheTestResult,\n    createNotSupportedError,\n    evaluateSource,\n    exposeCurrentFrameAndCurrentTime,\n    fetchSource,\n    getNativeContext,\n    getOrCreateBackupOfflineAudioContext,\n    isNativeOfflineAudioContext,\n    nativeAudioWorkletNodeConstructor,\n    ongoingRequests,\n    resolvedRequests,\n    testAudioWorkletProcessorPostMessageSupport,\n    window\n) => {\n    let index = 0;\n\n    return (context, moduleURL, options = { credentials: 'omit' }) => {\n        const resolvedRequestsOfContext = resolvedRequests.get(context);\n\n        if (resolvedRequestsOfContext !== undefined && resolvedRequestsOfContext.has(moduleURL)) {\n            return Promise.resolve();\n        }\n\n        const ongoingRequestsOfContext = ongoingRequests.get(context);\n\n        if (ongoingRequestsOfContext !== undefined) {\n            const promiseOfOngoingRequest = ongoingRequestsOfContext.get(moduleURL);\n\n            if (promiseOfOngoingRequest !== undefined) {\n                return promiseOfOngoingRequest;\n            }\n        }\n\n        const nativeContext = getNativeContext(context);\n\n        // Bug #59: Safari does not implement the audioWorklet property.\n        const promise =\n            nativeContext.audioWorklet === undefined\n                ? fetchSource(moduleURL)\n                      .then(([source, absoluteUrl]) => {\n                          const [importStatements, sourceWithoutImportStatements] = splitImportStatements(source, absoluteUrl);\n\n                          /*\n                           * This is the unminified version of the code used below:\n                           *\n                           * ```js\n                           * ${ importStatements };\n                           * ((a, b) => {\n                           *     (a[b] = a[b] || [ ]).push(\n                           *         (AudioWorkletProcessor, global, registerProcessor, sampleRate, self, window) => {\n                           *             ${ sourceWithoutImportStatements }\n                           *         }\n                           *     );\n                           * })(window, '_AWGS');\n                           * ```\n                           */\n                          // tslint:disable-next-line:max-line-length\n                          const wrappedSource = `${importStatements};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${sourceWithoutImportStatements}\n})})(window,'_AWGS')`;\n\n                          // @todo Evaluating the given source code is a possible security problem.\n                          return evaluateSource(wrappedSource);\n                      })\n                      .then(() => {\n                          const evaluateAudioWorkletGlobalScope = (<TEvaluateAudioWorkletGlobalScopeFunction[]>(<any>window)._AWGS).pop();\n\n                          if (evaluateAudioWorkletGlobalScope === undefined) {\n                              // Bug #182 Chrome and Edge do throw an instance of a SyntaxError instead of a DOMException.\n                              throw new SyntaxError();\n                          }\n\n                          exposeCurrentFrameAndCurrentTime(nativeContext.currentTime, nativeContext.sampleRate, () =>\n                              evaluateAudioWorkletGlobalScope(\n                                  class AudioWorkletProcessor {},\n                                  undefined,\n                                  (name, processorCtor) => {\n                                      if (name.trim() === '') {\n                                          throw createNotSupportedError();\n                                      }\n\n                                      const nodeNameToProcessorConstructorMap = NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.get(nativeContext);\n\n                                      if (nodeNameToProcessorConstructorMap !== undefined) {\n                                          if (nodeNameToProcessorConstructorMap.has(name)) {\n                                              throw createNotSupportedError();\n                                          }\n\n                                          verifyProcessorCtor(processorCtor);\n                                          verifyParameterDescriptors(processorCtor.parameterDescriptors);\n\n                                          nodeNameToProcessorConstructorMap.set(name, processorCtor);\n                                      } else {\n                                          verifyProcessorCtor(processorCtor);\n                                          verifyParameterDescriptors(processorCtor.parameterDescriptors);\n\n                                          NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.set(nativeContext, new Map([[name, processorCtor]]));\n                                      }\n                                  },\n                                  nativeContext.sampleRate,\n                                  undefined,\n                                  undefined\n                              )\n                          );\n                      })\n                : Promise.all([\n                      fetchSource(moduleURL),\n                      Promise.resolve(\n                          cacheTestResult(testAudioWorkletProcessorPostMessageSupport, testAudioWorkletProcessorPostMessageSupport)\n                      )\n                  ]).then(([[source, absoluteUrl], isSupportingPostMessage]) => {\n                      const currentIndex = index + 1;\n\n                      index = currentIndex;\n\n                      const [importStatements, sourceWithoutImportStatements] = splitImportStatements(source, absoluteUrl);\n                      /*\n                       * Bug #179: Firefox does not allow to transfer any buffer which has been passed to the process() method as an argument.\n                       *\n                       * This is the unminified version of the code used below.\n                       *\n                       * ```js\n                       * class extends AudioWorkletProcessor {\n                       *\n                       *     __buffers = new WeakSet();\n                       *\n                       *     constructor () {\n                       *         super();\n                       *\n                       *         this.port.postMessage = ((postMessage) => {\n                       *             return (message, transferables) => {\n                       *                 const filteredTransferables = (transferables)\n                       *                     ? transferables.filter((transferable) => !this.__buffers.has(transferable))\n                       *                     : transferables;\n                       *\n                       *                 return postMessage.call(this.port, message, filteredTransferables);\n                       *              };\n                       *         })(this.port.postMessage);\n                       *     }\n                       * }\n                       * ```\n                       */\n                      const patchedAudioWorkletProcessor = isSupportingPostMessage\n                          ? 'AudioWorkletProcessor'\n                          : 'class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}';\n                      /*\n                       * Bug #170: Chrome and Edge do call process() with an array with empty channelData for each input if no input is connected.\n                       *\n                       * Bug #179: Firefox does not allow to transfer any buffer which has been passed to the process() method as an argument.\n                       *\n                       * Bug #190: Safari doesn't throw an error when loading an unparsable module.\n                       *\n                       * This is the unminified version of the code used below:\n                       *\n                       * ```js\n                       * `${ importStatements };\n                       * ((AudioWorkletProcessor, registerProcessor) => {${ sourceWithoutImportStatements }\n                       * })(\n                       *     ${ patchedAudioWorkletProcessor },\n                       *     (name, processorCtor) => registerProcessor(name, class extends processorCtor {\n                       *\n                       *         __collectBuffers = (array) => {\n                       *             array.forEach((element) => this.__buffers.add(element.buffer));\n                       *         };\n                       *\n                       *         process (inputs, outputs, parameters) {\n                       *             inputs.forEach(this.__collectBuffers);\n                       *             outputs.forEach(this.__collectBuffers);\n                       *             this.__collectBuffers(Object.values(parameters));\n                       *\n                       *             return super.process(\n                       *                 (inputs.map((input) => input.some((channelData) => channelData.length === 0)) ? [ ] : input),\n                       *                 outputs,\n                       *                 parameters\n                       *             );\n                       *         }\n                       *\n                       *     })\n                       * );\n                       *\n                       * registerProcessor(`__sac${currentIndex}`, class extends AudioWorkletProcessor{\n                       *\n                       *     process () {\n                       *         return false;\n                       *     }\n                       *\n                       * })`\n                       * ```\n                       */\n                      const memberDefinition = isSupportingPostMessage ? '' : '__c = (a) => a.forEach(e=>this.__b.add(e.buffer));';\n                      const bufferRegistration = isSupportingPostMessage\n                          ? ''\n                          : 'i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));';\n                      const wrappedSource = `${importStatements};((AudioWorkletProcessor,registerProcessor)=>{${sourceWithoutImportStatements}\n})(${patchedAudioWorkletProcessor},(n,p)=>registerProcessor(n,class extends p{${memberDefinition}process(i,o,p){${bufferRegistration}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${currentIndex}',class extends AudioWorkletProcessor{process(){return !1}})`;\n                      const blob = new Blob([wrappedSource], { type: 'application/javascript; charset=utf-8' });\n                      const url = URL.createObjectURL(blob);\n\n                      return nativeContext.audioWorklet\n                          .addModule(url, options)\n                          .then(() => {\n                              if (isNativeOfflineAudioContext(nativeContext)) {\n                                  return nativeContext;\n                              }\n\n                              // Bug #186: Chrome and Edge do not allow to create an AudioWorkletNode on a closed AudioContext.\n                              const backupOfflineAudioContext = getOrCreateBackupOfflineAudioContext(nativeContext);\n\n                              return backupOfflineAudioContext.audioWorklet.addModule(url, options).then(() => backupOfflineAudioContext);\n                          })\n                          .then((nativeContextOrBackupOfflineAudioContext) => {\n                              if (nativeAudioWorkletNodeConstructor === null) {\n                                  throw new SyntaxError();\n                              }\n\n                              try {\n                                  // Bug #190: Safari doesn't throw an error when loading an unparsable module.\n                                  new nativeAudioWorkletNodeConstructor(nativeContextOrBackupOfflineAudioContext, `__sac${currentIndex}`); // tslint:disable-line:no-unused-expression\n                              } catch {\n                                  throw new SyntaxError();\n                              }\n                          })\n                          .finally(() => URL.revokeObjectURL(url));\n                  });\n\n        if (ongoingRequestsOfContext === undefined) {\n            ongoingRequests.set(context, new Map([[moduleURL, promise]]));\n        } else {\n            ongoingRequestsOfContext.set(moduleURL, promise);\n        }\n\n        promise\n            .then(() => {\n                const updatedResolvedRequestsOfContext = resolvedRequests.get(context);\n\n                if (updatedResolvedRequestsOfContext === undefined) {\n                    resolvedRequests.set(context, new Set([moduleURL]));\n                } else {\n                    updatedResolvedRequestsOfContext.add(moduleURL);\n                }\n            })\n            .finally(() => {\n                const updatedOngoingRequestsOfContext = ongoingRequests.get(context);\n\n                if (updatedOngoingRequestsOfContext !== undefined) {\n                    updatedOngoingRequestsOfContext.delete(moduleURL);\n                }\n            });\n\n        return promise;\n    };\n};\n","import { TGetValueForKeyFunction } from '../types';\n\nexport const getValueForKey: TGetValueForKeyFunction = (map, key) => {\n    const value = map.get(key);\n\n    if (value === undefined) {\n        throw new Error('A value with the given key could not be found.');\n    }\n\n    return value;\n};\n","import { TPickElementFromSetFunction } from '../types';\n\nexport const pickElementFromSet: TPickElementFromSetFunction = (set, predicate) => {\n    const matchingElements = Array.from(set).filter(predicate);\n\n    if (matchingElements.length > 1) {\n        throw Error('More than one element was found.');\n    }\n\n    if (matchingElements.length === 0) {\n        throw Error('No element was found.');\n    }\n\n    const [matchingElement] = matchingElements;\n\n    set.delete(matchingElement);\n\n    return matchingElement;\n};\n","import { IAudioNode } from '../interfaces';\nimport { TContext, TPassiveAudioNodeInputConnection } from '../types';\nimport { getValueForKey } from './get-value-for-key';\nimport { pickElementFromSet } from './pick-element-from-set';\n\nexport const deletePassiveInputConnectionToAudioNode = <T extends TContext>(\n    passiveInputs: WeakMap<IAudioNode<T>, Set<TPassiveAudioNodeInputConnection>>,\n    source: IAudioNode<T>,\n    output: number,\n    input: number\n) => {\n    const passiveInputConnections = getValueForKey(passiveInputs, source);\n    const matchingConnection = pickElementFromSet(\n        passiveInputConnections,\n        (passiveInputConnection) => passiveInputConnection[0] === output && passiveInputConnection[1] === input\n    );\n\n    if (passiveInputConnections.size === 0) {\n        passiveInputs.delete(source);\n    }\n\n    return matchingConnection;\n};\n","import { EVENT_LISTENERS } from '../globals';\nimport { TGetEventListenersOfAudioNodeFunction } from '../types';\nimport { getValueForKey } from './get-value-for-key';\n\nexport const getEventListenersOfAudioNode: TGetEventListenersOfAudioNodeFunction = (audioNode) => {\n    return getValueForKey(EVENT_LISTENERS, audioNode);\n};\n","import { ACTIVE_AUDIO_NODE_STORE } from '../globals';\nimport { IAudioNode } from '../interfaces';\nimport { TContext } from '../types';\nimport { getEventListenersOfAudioNode } from './get-event-listeners-of-audio-node';\n\nexport const setInternalStateToActive = <T extends TContext>(audioNode: IAudioNode<T>) => {\n    if (ACTIVE_AUDIO_NODE_STORE.has(audioNode)) {\n        throw new Error('The AudioNode is already stored.');\n    }\n\n    ACTIVE_AUDIO_NODE_STORE.add(audioNode);\n\n    getEventListenersOfAudioNode(audioNode).forEach((eventListener) => eventListener(true));\n};\n","import { IAudioNode, IAudioWorkletNode } from '../interfaces';\nimport { TContext } from '../types';\n\nexport const isAudioWorkletNode = <T extends TContext>(audioNode: IAudioNode<T>): audioNode is IAudioWorkletNode<T> => {\n    return 'port' in audioNode;\n};\n","import { ACTIVE_AUDIO_NODE_STORE } from '../globals';\nimport { IAudioNode } from '../interfaces';\nimport { TContext } from '../types';\nimport { getEventListenersOfAudioNode } from './get-event-listeners-of-audio-node';\n\nexport const setInternalStateToPassive = <T extends TContext>(audioNode: IAudioNode<T>) => {\n    if (!ACTIVE_AUDIO_NODE_STORE.has(audioNode)) {\n        throw new Error('The AudioNode is not stored.');\n    }\n\n    ACTIVE_AUDIO_NODE_STORE.delete(audioNode);\n\n    getEventListenersOfAudioNode(audioNode).forEach((eventListener) => eventListener(false));\n};\n","import { isAudioWorkletNode } from '../guards/audio-worklet-node';\nimport { IAudioNode } from '../interfaces';\nimport { TActiveInputConnection, TContext } from '../types';\nimport { setInternalStateToPassive } from './set-internal-state-to-passive';\n\n// Set the internalState of the audioNode to 'passive' if it is not an AudioWorkletNode and if it has no 'active' input connections.\nexport const setInternalStateToPassiveWhenNecessary = <T extends TContext>(\n    audioNode: IAudioNode<T>,\n    activeInputs: Set<TActiveInputConnection<T>>[]\n) => {\n    if (!isAudioWorkletNode(audioNode) && activeInputs.every((connections) => connections.size === 0)) {\n        setInternalStateToPassive(audioNode);\n    }\n};\n","import { IAnalyserNode, IAnalyserOptions } from '../interfaces';\nimport { TAnalyserNodeConstructorFactory, TAudioNodeRenderer, TContext, TNativeAnalyserNode } from '../types';\n\nconst DEFAULT_OPTIONS = {\n    channelCount: 2,\n    channelCountMode: 'max',\n    channelInterpretation: 'speakers',\n    fftSize: 2048,\n    maxDecibels: -30,\n    minDecibels: -100,\n    smoothingTimeConstant: 0.8\n} as const;\n\nexport const createAnalyserNodeConstructor: TAnalyserNodeConstructorFactory = (\n    audionNodeConstructor,\n    createAnalyserNodeRenderer,\n    createIndexSizeError,\n    createNativeAnalyserNode,\n    getNativeContext,\n    isNativeOfflineAudioContext\n) => {\n    return class AnalyserNode<T extends TContext> extends audionNodeConstructor<T> implements IAnalyserNode<T> {\n        private _nativeAnalyserNode: TNativeAnalyserNode;\n\n        constructor(context: T, options?: Partial<IAnalyserOptions>) {\n            const nativeContext = getNativeContext(context);\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n            const nativeAnalyserNode = createNativeAnalyserNode(nativeContext, mergedOptions);\n            const analyserNodeRenderer = <TAudioNodeRenderer<T, this>>(\n                (isNativeOfflineAudioContext(nativeContext) ? createAnalyserNodeRenderer() : null)\n            );\n\n            super(context, false, nativeAnalyserNode, analyserNodeRenderer);\n\n            this._nativeAnalyserNode = nativeAnalyserNode;\n        }\n\n        get fftSize(): number {\n            return this._nativeAnalyserNode.fftSize;\n        }\n\n        set fftSize(value) {\n            this._nativeAnalyserNode.fftSize = value;\n        }\n\n        get frequencyBinCount(): number {\n            return this._nativeAnalyserNode.frequencyBinCount;\n        }\n\n        get maxDecibels(): number {\n            return this._nativeAnalyserNode.maxDecibels;\n        }\n\n        set maxDecibels(value) {\n            // Bug #118: Safari does not throw an error if maxDecibels is not more than minDecibels.\n            const maxDecibels = this._nativeAnalyserNode.maxDecibels;\n\n            this._nativeAnalyserNode.maxDecibels = value;\n\n            if (!(value > this._nativeAnalyserNode.minDecibels)) {\n                this._nativeAnalyserNode.maxDecibels = maxDecibels;\n\n                throw createIndexSizeError();\n            }\n        }\n\n        get minDecibels(): number {\n            return this._nativeAnalyserNode.minDecibels;\n        }\n\n        set minDecibels(value) {\n            // Bug #118: Safari does not throw an error if maxDecibels is not more than minDecibels.\n            const minDecibels = this._nativeAnalyserNode.minDecibels;\n\n            this._nativeAnalyserNode.minDecibels = value;\n\n            if (!(this._nativeAnalyserNode.maxDecibels > value)) {\n                this._nativeAnalyserNode.minDecibels = minDecibels;\n\n                throw createIndexSizeError();\n            }\n        }\n\n        get smoothingTimeConstant(): number {\n            return this._nativeAnalyserNode.smoothingTimeConstant;\n        }\n\n        set smoothingTimeConstant(value) {\n            this._nativeAnalyserNode.smoothingTimeConstant = value;\n        }\n\n        public getByteFrequencyData(array: Uint8Array): void {\n            this._nativeAnalyserNode.getByteFrequencyData(array);\n        }\n\n        public getByteTimeDomainData(array: Uint8Array): void {\n            this._nativeAnalyserNode.getByteTimeDomainData(array);\n        }\n\n        public getFloatFrequencyData(array: Float32Array): void {\n            this._nativeAnalyserNode.getFloatFrequencyData(array);\n        }\n\n        public getFloatTimeDomainData(array: Float32Array): void {\n            this._nativeAnalyserNode.getFloatTimeDomainData(array);\n        }\n    };\n};\n","import { TNativeAudioNode, TNativeContext } from '../types';\n\nexport const isOwnedByContext = (nativeAudioNode: TNativeAudioNode, nativeContext: TNativeContext): boolean => {\n    return nativeAudioNode.context === nativeContext;\n};\n","import { TNativeAudioBuffer } from '../types';\n\nexport const testAudioBufferCopyChannelMethodsOutOfBoundsSupport = (nativeAudioBuffer: TNativeAudioBuffer): boolean => {\n    try {\n        nativeAudioBuffer.copyToChannel(new Float32Array(1), 0, -1);\n    } catch {\n        return false;\n    }\n\n    return true;\n};\n","import { TIndexSizeErrorFactory } from '../types';\n\nexport const createIndexSizeError: TIndexSizeErrorFactory = () => new DOMException('', 'IndexSizeError');\n","import { createIndexSizeError } from '../factories/index-size-error';\nimport { TNativeAudioBuffer } from '../types';\n\nexport const wrapAudioBufferGetChannelDataMethod = (audioBuffer: TNativeAudioBuffer): void => {\n    audioBuffer.getChannelData = ((getChannelData) => {\n        return (channel: number) => {\n            try {\n                return getChannelData.call(audioBuffer, channel);\n            } catch (err) {\n                if (err.code === 12) {\n                    throw createIndexSizeError();\n                }\n\n                throw err;\n            }\n        };\n    })(audioBuffer.getChannelData);\n};\n","import { testAudioBufferCopyChannelMethodsOutOfBoundsSupport } from '../helpers/test-audio-buffer-copy-channel-methods-out-of-bounds-support';\nimport { wrapAudioBufferGetChannelDataMethod } from '../helpers/wrap-audio-buffer-get-channel-data-method';\nimport { IAudioBuffer, IAudioBufferOptions } from '../interfaces';\nimport { TAudioBufferConstructorFactory, TNativeOfflineAudioContext } from '../types';\n\nconst DEFAULT_OPTIONS = {\n    numberOfChannels: 1\n} as const;\n\nexport const createAudioBufferConstructor: TAudioBufferConstructorFactory = (\n    audioBufferStore,\n    cacheTestResult,\n    createNotSupportedError,\n    nativeAudioBufferConstructor,\n    nativeOfflineAudioContextConstructor,\n    testNativeAudioBufferConstructorSupport,\n    wrapAudioBufferCopyChannelMethods,\n    wrapAudioBufferCopyChannelMethodsOutOfBounds\n) => {\n    let nativeOfflineAudioContext: null | TNativeOfflineAudioContext = null;\n\n    return class AudioBuffer implements IAudioBuffer {\n        // This field needs to be defined to convince TypeScript that the IAudioBuffer will be implemented.\n        public copyFromChannel!: (destination: Float32Array, channelNumber: number, bufferOffset?: number) => void;\n\n        // This field needs to be defined to convince TypeScript that the IAudioBuffer will be implemented.\n        public copyToChannel!: (source: Float32Array, channelNumber: number, bufferOffset?: number) => void;\n\n        // This field needs to be defined to convince TypeScript that the IAudioBuffer will be implemented.\n        public duration!: number;\n\n        // This field needs to be defined to convince TypeScript that the IAudioBuffer will be implemented.\n        public getChannelData!: (channel: number) => Float32Array;\n\n        // This field needs to be defined to convince TypeScript that the IAudioBuffer will be implemented.\n        public length!: number;\n\n        // This field needs to be defined to convince TypeScript that the IAudioBuffer will be implemented.\n        public numberOfChannels!: number;\n\n        // This field needs to be defined to convince TypeScript that the IAudioBuffer will be implemented.\n        public sampleRate!: number;\n\n        constructor(options: IAudioBufferOptions) {\n            if (nativeOfflineAudioContextConstructor === null) {\n                throw new Error('Missing the native OfflineAudioContext constructor.');\n            }\n\n            const { length, numberOfChannels, sampleRate } = { ...DEFAULT_OPTIONS, ...options };\n\n            if (nativeOfflineAudioContext === null) {\n                nativeOfflineAudioContext = new nativeOfflineAudioContextConstructor(1, 1, 44100);\n            }\n\n            /*\n             * Bug #99: Firefox does not throw a NotSupportedError when the numberOfChannels is zero. But it only does it when using the\n             * factory function. But since Firefox also supports the constructor everything should be fine.\n             */\n            const audioBuffer =\n                nativeAudioBufferConstructor !== null &&\n                cacheTestResult(testNativeAudioBufferConstructorSupport, testNativeAudioBufferConstructorSupport)\n                    ? new nativeAudioBufferConstructor({ length, numberOfChannels, sampleRate })\n                    : nativeOfflineAudioContext.createBuffer(numberOfChannels, length, sampleRate);\n\n            // Bug #99: Safari does not throw an error when the numberOfChannels is zero.\n            if (audioBuffer.numberOfChannels === 0) {\n                throw createNotSupportedError();\n            }\n\n            // Bug #5: Safari does not support copyFromChannel() and copyToChannel().\n            // Bug #100: Safari does throw a wrong error when calling getChannelData() with an out-of-bounds value.\n            if (typeof audioBuffer.copyFromChannel !== 'function') {\n                wrapAudioBufferCopyChannelMethods(audioBuffer);\n                wrapAudioBufferGetChannelDataMethod(audioBuffer);\n                // Bug #157: Firefox does not allow the bufferOffset to be out-of-bounds.\n            } else if (\n                !cacheTestResult(testAudioBufferCopyChannelMethodsOutOfBoundsSupport, () =>\n                    testAudioBufferCopyChannelMethodsOutOfBoundsSupport(audioBuffer)\n                )\n            ) {\n                wrapAudioBufferCopyChannelMethodsOutOfBounds(audioBuffer);\n            }\n\n            audioBufferStore.add(audioBuffer);\n\n            /*\n             * This does violate all good pratices but it is necessary to allow this AudioBuffer to be used with native\n             * (Offline)AudioContexts.\n             */\n            return audioBuffer;\n        }\n\n        public static [Symbol.hasInstance](instance: unknown): boolean {\n            return (\n                (instance !== null && typeof instance === 'object' && Object.getPrototypeOf(instance) === AudioBuffer.prototype) ||\n                audioBufferStore.has(<any>instance)\n            );\n        }\n    };\n};\n","export const MOST_NEGATIVE_SINGLE_FLOAT = -3.4028234663852886e38;\n\nexport const MOST_POSITIVE_SINGLE_FLOAT = -MOST_NEGATIVE_SINGLE_FLOAT;\n","import { ACTIVE_AUDIO_NODE_STORE } from '../globals';\nimport { TIsActiveAudioNodeFunction } from '../types';\n\nexport const isActiveAudioNode: TIsActiveAudioNodeFunction = (audioNode) => ACTIVE_AUDIO_NODE_STORE.has(audioNode);\n","import { MOST_NEGATIVE_SINGLE_FLOAT, MOST_POSITIVE_SINGLE_FLOAT } from '../constants';\nimport { isActiveAudioNode } from '../helpers/is-active-audio-node';\nimport { setInternalStateToActive } from '../helpers/set-internal-state-to-active';\nimport { setInternalStateToPassive } from '../helpers/set-internal-state-to-passive';\nimport { IAudioBufferSourceNode, IAudioBufferSourceOptions, IAudioParam, IAudioScheduledSourceNodeEventMap } from '../interfaces';\nimport {\n    TAnyAudioBuffer,\n    TAudioBufferSourceNodeConstructorFactory,\n    TAudioBufferSourceNodeRenderer,\n    TContext,\n    TEventHandler,\n    TNativeAudioBufferSourceNode\n} from '../types';\n\nconst DEFAULT_OPTIONS = {\n    buffer: null,\n    channelCount: 2,\n    channelCountMode: 'max',\n    channelInterpretation: 'speakers',\n    // Bug #149: Safari does not yet support the detune AudioParam.\n    loop: false,\n    loopEnd: 0,\n    loopStart: 0,\n    playbackRate: 1\n} as const;\n\nexport const createAudioBufferSourceNodeConstructor: TAudioBufferSourceNodeConstructorFactory = (\n    audioNodeConstructor,\n    createAudioBufferSourceNodeRenderer,\n    createAudioParam,\n    createInvalidStateError,\n    createNativeAudioBufferSourceNode,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    wrapEventListener\n) => {\n    return class AudioBufferSourceNode<T extends TContext>\n        extends audioNodeConstructor<T, IAudioScheduledSourceNodeEventMap>\n        implements IAudioBufferSourceNode<T>\n    {\n        private _audioBufferSourceNodeRenderer: TAudioBufferSourceNodeRenderer<T>;\n\n        private _isBufferNullified: boolean;\n\n        private _isBufferSet: boolean;\n\n        private _nativeAudioBufferSourceNode: TNativeAudioBufferSourceNode;\n\n        private _onended: null | TEventHandler<this>;\n\n        private _playbackRate: IAudioParam;\n\n        constructor(context: T, options?: Partial<IAudioBufferSourceOptions>) {\n            const nativeContext = getNativeContext(context);\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n            const nativeAudioBufferSourceNode = createNativeAudioBufferSourceNode(nativeContext, mergedOptions);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n            const audioBufferSourceNodeRenderer = <TAudioBufferSourceNodeRenderer<T>>(\n                (isOffline ? createAudioBufferSourceNodeRenderer() : null)\n            );\n\n            super(context, false, nativeAudioBufferSourceNode, audioBufferSourceNodeRenderer);\n\n            this._audioBufferSourceNodeRenderer = audioBufferSourceNodeRenderer;\n            this._isBufferNullified = false;\n            this._isBufferSet = mergedOptions.buffer !== null;\n            this._nativeAudioBufferSourceNode = nativeAudioBufferSourceNode;\n            this._onended = null;\n            // Bug #73: Safari does not export the correct values for maxValue and minValue.\n            this._playbackRate = createAudioParam(\n                this,\n                isOffline,\n                nativeAudioBufferSourceNode.playbackRate,\n                MOST_POSITIVE_SINGLE_FLOAT,\n                MOST_NEGATIVE_SINGLE_FLOAT\n            );\n        }\n\n        get buffer(): null | TAnyAudioBuffer {\n            if (this._isBufferNullified) {\n                return null;\n            }\n\n            return this._nativeAudioBufferSourceNode.buffer;\n        }\n\n        set buffer(value) {\n            this._nativeAudioBufferSourceNode.buffer = value;\n\n            // Bug #72: Only Chrome & Edge do not allow to reassign the buffer yet.\n            if (value !== null) {\n                if (this._isBufferSet) {\n                    throw createInvalidStateError();\n                }\n\n                this._isBufferSet = true;\n            }\n        }\n\n        get loop(): boolean {\n            return this._nativeAudioBufferSourceNode.loop;\n        }\n\n        set loop(value) {\n            this._nativeAudioBufferSourceNode.loop = value;\n        }\n\n        get loopEnd(): number {\n            return this._nativeAudioBufferSourceNode.loopEnd;\n        }\n\n        set loopEnd(value) {\n            this._nativeAudioBufferSourceNode.loopEnd = value;\n        }\n\n        get loopStart(): number {\n            return this._nativeAudioBufferSourceNode.loopStart;\n        }\n\n        set loopStart(value) {\n            this._nativeAudioBufferSourceNode.loopStart = value;\n        }\n\n        get onended(): null | TEventHandler<this> {\n            return this._onended;\n        }\n\n        set onended(value) {\n            const wrappedListener = typeof value === 'function' ? wrapEventListener(this, value) : null;\n\n            this._nativeAudioBufferSourceNode.onended = wrappedListener;\n\n            const nativeOnEnded = this._nativeAudioBufferSourceNode.onended;\n\n            this._onended = nativeOnEnded !== null && nativeOnEnded === wrappedListener ? value : nativeOnEnded;\n        }\n\n        get playbackRate(): IAudioParam {\n            return this._playbackRate;\n        }\n\n        public start(when = 0, offset = 0, duration?: number): void {\n            this._nativeAudioBufferSourceNode.start(when, offset, duration);\n\n            if (this._audioBufferSourceNodeRenderer !== null) {\n                this._audioBufferSourceNodeRenderer.start = duration === undefined ? [when, offset] : [when, offset, duration];\n            }\n\n            if (this.context.state !== 'closed') {\n                setInternalStateToActive(this);\n\n                const resetInternalStateToPassive = () => {\n                    this._nativeAudioBufferSourceNode.removeEventListener('ended', resetInternalStateToPassive);\n\n                    if (isActiveAudioNode(this)) {\n                        setInternalStateToPassive(this);\n                    }\n                };\n\n                this._nativeAudioBufferSourceNode.addEventListener('ended', resetInternalStateToPassive);\n            }\n        }\n\n        public stop(when = 0): void {\n            this._nativeAudioBufferSourceNode.stop(when);\n\n            if (this._audioBufferSourceNodeRenderer !== null) {\n                this._audioBufferSourceNodeRenderer.stop = when;\n            }\n        }\n    };\n};\n","import { AUDIO_NODE_CONNECTIONS_STORE } from '../globals';\nimport { IAudioNode } from '../interfaces';\nimport { TAudioNodeConnections, TContext, TGetAudioNodeConnectionsFunction } from '../types';\nimport { getValueForKey } from './get-value-for-key';\n\nexport const getAudioNodeConnections: TGetAudioNodeConnectionsFunction = <T extends TContext>(\n    audioNode: IAudioNode<T>\n): TAudioNodeConnections<T> => {\n    return <TAudioNodeConnections<T>>getValueForKey(AUDIO_NODE_CONNECTIONS_STORE, audioNode);\n};\n","import { AUDIO_PARAM_CONNECTIONS_STORE } from '../globals';\nimport { IAudioParam } from '../interfaces';\nimport { TAudioParamConnections, TContext, TGetAudioParamConnectionsFunction } from '../types';\nimport { getValueForKey } from './get-value-for-key';\n\nexport const getAudioParamConnections: TGetAudioParamConnectionsFunction = <T extends TContext>(\n    audioParam: IAudioParam\n): TAudioParamConnections<T> => {\n    return <TAudioParamConnections<T>>getValueForKey(AUDIO_PARAM_CONNECTIONS_STORE, audioParam);\n};\n","import { isAudioBufferSourceNode } from '../guards/audio-buffer-source-node';\nimport { isAudioWorkletNode } from '../guards/audio-worklet-node';\nimport { isBiquadFilterNode } from '../guards/biquad-filter-node';\nimport { isConstantSourceNode } from '../guards/constant-source-node';\nimport { isGainNode } from '../guards/gain-node';\nimport { isOscillatorNode } from '../guards/oscillator-node';\nimport { isStereoPannerNode } from '../guards/stereo-panner-node';\nimport { IAudioNode } from '../interfaces';\nimport { TContext } from '../types';\nimport { getAudioNodeConnections } from './get-audio-node-connections';\nimport { getAudioParamConnections } from './get-audio-param-connections';\nimport { isActiveAudioNode } from './is-active-audio-node';\nimport { setInternalStateToPassive } from './set-internal-state-to-passive';\n\nexport const deactivateActiveAudioNodeInputConnections = <T extends TContext>(\n    audioNode: IAudioNode<T>,\n    trace: readonly IAudioNode<T>[]\n) => {\n    const { activeInputs } = getAudioNodeConnections(audioNode);\n\n    activeInputs.forEach((connections) =>\n        connections.forEach(([source]) => {\n            if (!trace.includes(audioNode)) {\n                deactivateActiveAudioNodeInputConnections(source, [...trace, audioNode]);\n            }\n        })\n    );\n\n    const audioParams = isAudioBufferSourceNode(audioNode)\n        ? [\n              // Bug #149: Safari does not yet support the detune AudioParam.\n              audioNode.playbackRate\n          ]\n        : isAudioWorkletNode(audioNode)\n        ? Array.from(audioNode.parameters.values())\n        : isBiquadFilterNode(audioNode)\n        ? [audioNode.Q, audioNode.detune, audioNode.frequency, audioNode.gain]\n        : isConstantSourceNode(audioNode)\n        ? [audioNode.offset]\n        : isGainNode(audioNode)\n        ? [audioNode.gain]\n        : isOscillatorNode(audioNode)\n        ? [audioNode.detune, audioNode.frequency]\n        : isStereoPannerNode(audioNode)\n        ? [audioNode.pan]\n        : [];\n\n    for (const audioParam of audioParams) {\n        const audioParamConnections = getAudioParamConnections<T>(audioParam);\n\n        if (audioParamConnections !== undefined) {\n            audioParamConnections.activeInputs.forEach(([source]) => deactivateActiveAudioNodeInputConnections(source, trace));\n        }\n    }\n\n    if (isActiveAudioNode(audioNode)) {\n        setInternalStateToPassive(audioNode);\n    }\n};\n","import { IAudioBufferSourceNode, IAudioNode } from '../interfaces';\nimport { TContext } from '../types';\n\nexport const isAudioBufferSourceNode = <T extends TContext>(audioNode: IAudioNode<T>): audioNode is IAudioBufferSourceNode<T> => {\n    return 'playbackRate' in audioNode;\n};\n","import { IAudioNode, IBiquadFilterNode } from '../interfaces';\nimport { TContext } from '../types';\n\nexport const isBiquadFilterNode = <T extends TContext>(audioNode: IAudioNode<T>): audioNode is IBiquadFilterNode<T> => {\n    return 'frequency' in audioNode && 'gain' in audioNode;\n};\n","import { IAudioNode, IConstantSourceNode } from '../interfaces';\nimport { TContext } from '../types';\n\nexport const isConstantSourceNode = <T extends TContext>(audioNode: IAudioNode<T>): audioNode is IConstantSourceNode<T> => {\n    return 'offset' in audioNode;\n};\n","import { IAudioNode, IGainNode } from '../interfaces';\nimport { TContext } from '../types';\n\nexport const isGainNode = <T extends TContext>(audioNode: IAudioNode<T>): audioNode is IGainNode<T> => {\n    return !('frequency' in audioNode) && 'gain' in audioNode;\n};\n","import { IAudioNode, IOscillatorNode } from '../interfaces';\nimport { TContext } from '../types';\n\nexport const isOscillatorNode = <T extends TContext>(audioNode: IAudioNode<T>): audioNode is IOscillatorNode<T> => {\n    return 'detune' in audioNode && 'frequency' in audioNode;\n};\n","import { IAudioNode, IStereoPannerNode } from '../interfaces';\nimport { TContext } from '../types';\n\nexport const isStereoPannerNode = <T extends TContext>(audioNode: IAudioNode<T>): audioNode is IStereoPannerNode<T> => {\n    return 'pan' in audioNode;\n};\n","import { IAudioDestinationNode } from '../interfaces';\nimport { TContext } from '../types';\nimport { deactivateActiveAudioNodeInputConnections } from './deactivate-active-audio-node-input-connections';\n\nexport const deactivateAudioGraph = <T extends TContext>(context: T): void => {\n    deactivateActiveAudioNodeInputConnections(<IAudioDestinationNode<T>>context.destination, []);\n};\n","import { IAudioContextOptions } from '../interfaces';\n\nexport const isValidLatencyHint = (latencyHint: IAudioContextOptions['latencyHint']) => {\n    return (\n        latencyHint === undefined ||\n        typeof latencyHint === 'number' ||\n        (typeof latencyHint === 'string' && (latencyHint === 'balanced' || latencyHint === 'interactive' || latencyHint === 'playback'))\n    );\n};\n","import { IAudioNode, IAudioParam } from '../interfaces';\nimport { TContext } from '../types';\n\nexport const isAudioNode = <T extends TContext>(\n    audioNodeOrAudioParam: IAudioNode<T> | IAudioParam\n): audioNodeOrAudioParam is IAudioNode<T> => {\n    return 'context' in audioNodeOrAudioParam;\n};\n","import { TAudioNodeOutputConnection, TContext, TOutputConnection } from '../types';\nimport { isAudioNode } from './audio-node';\n\nexport const isAudioNodeOutputConnection = <T extends TContext>(\n    outputConnection: TOutputConnection<T>\n): outputConnection is TAudioNodeOutputConnection<T> => {\n    return isAudioNode(outputConnection[0]);\n};\n","import { TInsertElementInSetFunction } from '../types';\n\nexport const insertElementInSet: TInsertElementInSetFunction = (set, element, predicate, ignoreDuplicates) => {\n    for (const lmnt of set) {\n        if (predicate(lmnt)) {\n            if (ignoreDuplicates) {\n                return false;\n            }\n\n            throw Error('The set contains at least one similar element.');\n        }\n    }\n\n    set.add(element);\n\n    return true;\n};\n","import { IAudioNode } from '../interfaces';\nimport { TActiveInputConnection, TContext, TPassiveAudioParamInputConnection } from '../types';\nimport { insertElementInSet } from './insert-element-in-set';\n\nexport const addActiveInputConnectionToAudioParam = <T extends TContext>(\n    activeInputs: Set<TActiveInputConnection<T>>,\n    source: IAudioNode<T>,\n    [output, eventListener]: TPassiveAudioParamInputConnection,\n    ignoreDuplicates: boolean\n) => {\n    insertElementInSet(\n        activeInputs,\n        [source, output, eventListener],\n        (activeInputConnection) => activeInputConnection[0] === source && activeInputConnection[1] === output,\n        ignoreDuplicates\n    );\n};\n","import { IAudioNode } from '../interfaces';\nimport { TActiveInputConnection, TContext, TPassiveAudioParamInputConnection } from '../types';\nimport { insertElementInSet } from './insert-element-in-set';\n\nexport const addPassiveInputConnectionToAudioParam = <T extends TContext>(\n    passiveInputs: WeakMap<IAudioNode<T>, Set<TPassiveAudioParamInputConnection>>,\n    [source, output, eventListener]: TActiveInputConnection<T>,\n    ignoreDuplicates: boolean\n) => {\n    const passiveInputConnections = passiveInputs.get(source);\n\n    if (passiveInputConnections === undefined) {\n        passiveInputs.set(source, new Set([[output, eventListener]]));\n    } else {\n        insertElementInSet(\n            passiveInputConnections,\n            [output, eventListener],\n            (passiveInputConnection) => passiveInputConnection[0] === output,\n            ignoreDuplicates\n        );\n    }\n};\n","import { INativeAudioNodeFaker } from '../interfaces';\nimport { TNativeAudioNode } from '../types';\n\nexport const isNativeAudioNodeFaker = (\n    nativeAudioNodeOrNativeAudioNodeFaker: TNativeAudioNode | INativeAudioNodeFaker\n): nativeAudioNodeOrNativeAudioNodeFaker is INativeAudioNodeFaker => {\n    return 'inputs' in nativeAudioNodeOrNativeAudioNodeFaker;\n};\n","import { isNativeAudioNodeFaker } from '../guards/native-audio-node-faker';\nimport { INativeAudioNodeFaker } from '../interfaces';\nimport { TConnectNativeAudioNodeToNativeAudioNodeFunction, TNativeAudioNode } from '../types';\n\nexport const connectNativeAudioNodeToNativeAudioNode: TConnectNativeAudioNodeToNativeAudioNodeFunction = (\n    nativeSourceAudioNode: INativeAudioNodeFaker | TNativeAudioNode,\n    nativeDestinationAudioNode: INativeAudioNodeFaker | TNativeAudioNode,\n    output: number,\n    input: number\n): [TNativeAudioNode, number, number] => {\n    if (isNativeAudioNodeFaker(nativeDestinationAudioNode)) {\n        const fakeNativeDestinationAudioNode = nativeDestinationAudioNode.inputs[input];\n\n        nativeSourceAudioNode.connect(fakeNativeDestinationAudioNode, output, 0);\n\n        return [fakeNativeDestinationAudioNode, output, 0];\n    }\n\n    nativeSourceAudioNode.connect(nativeDestinationAudioNode, output, input);\n\n    return [nativeDestinationAudioNode, output, input];\n};\n","import { IAudioNode } from '../interfaces';\nimport { TActiveInputConnection, TContext } from '../types';\n\nexport const deleteActiveInputConnection = <T extends TContext>(\n    activeInputConnections: Set<TActiveInputConnection<T>>,\n    source: IAudioNode<T>,\n    output: number\n): null | TActiveInputConnection<T> => {\n    for (const activeInputConnection of activeInputConnections) {\n        if (activeInputConnection[0] === source && activeInputConnection[1] === output) {\n            activeInputConnections.delete(activeInputConnection);\n\n            return activeInputConnection;\n        }\n    }\n\n    return null;\n};\n","import { IAudioNode } from '../interfaces';\nimport { TContext, TInternalStateEventListener } from '../types';\nimport { getEventListenersOfAudioNode } from './get-event-listeners-of-audio-node';\n\nexport const deleteEventListenerOfAudioNode = <T extends TContext>(\n    audioNode: IAudioNode<T>,\n    eventListener: TInternalStateEventListener\n) => {\n    const eventListeners = getEventListenersOfAudioNode(audioNode);\n\n    if (!eventListeners.delete(eventListener)) {\n        throw new Error('Missing the expected event listener.');\n    }\n};\n","import { IAudioNode } from '../interfaces';\nimport { TContext, TPassiveAudioParamInputConnection } from '../types';\nimport { getValueForKey } from './get-value-for-key';\nimport { pickElementFromSet } from './pick-element-from-set';\n\nexport const deletePassiveInputConnectionToAudioParam = <T extends TContext>(\n    passiveInputs: WeakMap<IAudioNode<T>, Set<TPassiveAudioParamInputConnection>>,\n    source: IAudioNode<T>,\n    output: number\n) => {\n    const passiveInputConnections = getValueForKey(passiveInputs, source);\n    const matchingConnection = pickElementFromSet(\n        passiveInputConnections,\n        (passiveInputConnection) => passiveInputConnection[0] === output\n    );\n\n    if (passiveInputConnections.size === 0) {\n        passiveInputs.delete(source);\n    }\n\n    return matchingConnection;\n};\n","import { isNativeAudioNodeFaker } from '../guards/native-audio-node-faker';\nimport { TDisconnectNativeAudioNodeFromNativeAudioNodeFunction } from '../types';\n\nexport const disconnectNativeAudioNodeFromNativeAudioNode: TDisconnectNativeAudioNodeFromNativeAudioNodeFunction = (\n    nativeSourceAudioNode,\n    nativeDestinationAudioNode,\n    output,\n    input\n) => {\n    if (isNativeAudioNodeFaker(nativeDestinationAudioNode)) {\n        nativeSourceAudioNode.disconnect(nativeDestinationAudioNode.inputs[input], output, 0);\n    } else {\n        nativeSourceAudioNode.disconnect(nativeDestinationAudioNode, output, input);\n    }\n};\n","import { AUDIO_NODE_STORE } from '../globals';\nimport { IAudioNode, INativeAudioNodeFaker } from '../interfaces';\nimport { TContext, TGetNativeAudioNodeFunction, TNativeAudioNode } from '../types';\nimport { getValueForKey } from './get-value-for-key';\n\nexport const getNativeAudioNode: TGetNativeAudioNodeFunction = <T extends TContext, U extends TNativeAudioNode | INativeAudioNodeFaker>(\n    audioNode: IAudioNode<T>\n): U => {\n    return <U>getValueForKey(AUDIO_NODE_STORE, audioNode);\n};\n","import { AUDIO_PARAM_STORE } from '../globals';\nimport { IAudioParam } from '../interfaces';\nimport { TNativeAudioParam } from '../types';\nimport { getValueForKey } from './get-value-for-key';\n\nexport const getNativeAudioParam = (audioParam: IAudioParam): TNativeAudioParam => {\n    return getValueForKey(AUDIO_PARAM_STORE, audioParam);\n};\n","import { CYCLE_COUNTERS } from '../globals';\nimport { TIsPartOfACycleFunction } from '../types';\n\nexport const isPartOfACycle: TIsPartOfACycleFunction = (audioNode) => {\n    return CYCLE_COUNTERS.has(audioNode);\n};\n","import { ACTIVE_AUDIO_NODE_STORE } from '../globals';\nimport { TIsPassiveAudioNodeFunction } from '../types';\n\nexport const isPassiveAudioNode: TIsPassiveAudioNodeFunction = (audioNode) => {\n    return !ACTIVE_AUDIO_NODE_STORE.has(audioNode);\n};\n","import { TNativeAudioContext, TNativeAudioWorkletNodeConstructor } from '../types';\n\nexport const testAudioNodeDisconnectMethodSupport = (\n    nativeAudioContext: TNativeAudioContext,\n    nativeAudioWorkletNodeConstructor: null | TNativeAudioWorkletNodeConstructor\n): Promise<boolean> => {\n    return new Promise((resolve) => {\n        /*\n         * This bug existed in Safari up until v14.0.2. Since AudioWorklets were not supported in Safari until v14.1 the presence of the\n         * constructor for an AudioWorkletNode can be used here to skip the test.\n         */\n        if (nativeAudioWorkletNodeConstructor !== null) {\n            resolve(true);\n        } else {\n            const analyzer = nativeAudioContext.createScriptProcessor(256, 1, 1); // tslint:disable-line deprecation\n            const dummy = nativeAudioContext.createGain();\n            // Bug #95: Safari does not play one sample buffers.\n            const ones = nativeAudioContext.createBuffer(1, 2, 44100);\n            const channelData = ones.getChannelData(0);\n\n            channelData[0] = 1;\n            channelData[1] = 1;\n\n            const source = nativeAudioContext.createBufferSource();\n\n            source.buffer = ones;\n            source.loop = true;\n\n            source.connect(analyzer).connect(nativeAudioContext.destination);\n            source.connect(dummy);\n            source.disconnect(dummy);\n\n            // tslint:disable-next-line:deprecation\n            analyzer.onaudioprocess = (event) => {\n                const chnnlDt = event.inputBuffer.getChannelData(0); // tslint:disable-line deprecation\n\n                if (Array.prototype.some.call(chnnlDt, (sample: number) => sample === 1)) {\n                    resolve(true);\n                } else {\n                    resolve(false);\n                }\n\n                source.stop();\n\n                analyzer.onaudioprocess = null; // tslint:disable-line:deprecation\n\n                source.disconnect(analyzer);\n                analyzer.disconnect(nativeAudioContext.destination);\n            };\n\n            source.start();\n        }\n    });\n};\n","import { IAudioNode } from '../interfaces';\nimport { TContext } from '../types';\n\nexport const visitEachAudioNodeOnce = <T extends TContext>(\n    cycles: IAudioNode<T>[][],\n    visitor: (audioNode: IAudioNode<T>, count: number) => void\n): void => {\n    const counts = new Map<IAudioNode<T>, number>();\n\n    for (const cycle of cycles) {\n        for (const audioNode of cycle) {\n            const count = counts.get(audioNode);\n\n            counts.set(audioNode, count === undefined ? 1 : count + 1);\n        }\n    }\n\n    counts.forEach((count, audioNode) => visitor(audioNode, count));\n};\n","import { TNativeAudioNode, TNativeAudioParam } from '../types';\n\nexport const isNativeAudioNode = (\n    nativeAudioNodeOrAudioParam: TNativeAudioNode | TNativeAudioParam\n): nativeAudioNodeOrAudioParam is TNativeAudioNode => {\n    return 'context' in nativeAudioNodeOrAudioParam;\n};\n","import { isNativeAudioNode } from '../guards/native-audio-node';\nimport { TNativeAudioNode, TNativeAudioParam } from '../types';\n\nexport const wrapAudioNodeDisconnectMethod = (nativeAudioNode: TNativeAudioNode): void => {\n    const connections = new Map<TNativeAudioNode | TNativeAudioParam, { input: number; output: number }[]>();\n\n    nativeAudioNode.connect = <TNativeAudioNode['connect']>((connect) => {\n        // tslint:disable-next-line:invalid-void no-inferrable-types\n        return (destination: TNativeAudioNode | TNativeAudioParam, output = 0, input: number = 0): void | TNativeAudioNode => {\n            const returnValue = isNativeAudioNode(destination) ? connect(destination, output, input) : connect(destination, output);\n\n            // Save the new connection only if the calls to connect above didn't throw an error.\n            const connectionsToDestination = connections.get(destination);\n\n            if (connectionsToDestination === undefined) {\n                connections.set(destination, [{ input, output }]);\n            } else {\n                if (connectionsToDestination.every((connection) => connection.input !== input || connection.output !== output)) {\n                    connectionsToDestination.push({ input, output });\n                }\n            }\n\n            return returnValue;\n        };\n    })(nativeAudioNode.connect.bind(nativeAudioNode));\n\n    nativeAudioNode.disconnect = ((disconnect) => {\n        return (destinationOrOutput?: number | TNativeAudioNode | TNativeAudioParam, output?: number, input?: number): void => {\n            disconnect.apply(nativeAudioNode);\n\n            if (destinationOrOutput === undefined) {\n                connections.clear();\n            } else if (typeof destinationOrOutput === 'number') {\n                for (const [destination, connectionsToDestination] of connections) {\n                    const filteredConnections = connectionsToDestination.filter((connection) => connection.output !== destinationOrOutput);\n\n                    if (filteredConnections.length === 0) {\n                        connections.delete(destination);\n                    } else {\n                        connections.set(destination, filteredConnections);\n                    }\n                }\n            } else if (connections.has(destinationOrOutput)) {\n                if (output === undefined) {\n                    connections.delete(destinationOrOutput);\n                } else {\n                    const connectionsToDestination = connections.get(destinationOrOutput);\n\n                    if (connectionsToDestination !== undefined) {\n                        const filteredConnections = connectionsToDestination.filter(\n                            (connection) => connection.output !== output && (connection.input !== input || input === undefined)\n                        );\n\n                        if (filteredConnections.length === 0) {\n                            connections.delete(destinationOrOutput);\n                        } else {\n                            connections.set(destinationOrOutput, filteredConnections);\n                        }\n                    }\n                }\n            }\n\n            for (const [destination, connectionsToDestination] of connections) {\n                connectionsToDestination.forEach((connection) => {\n                    if (isNativeAudioNode(destination)) {\n                        nativeAudioNode.connect(destination, connection.output, connection.input);\n                    } else {\n                        nativeAudioNode.connect(destination, connection.output);\n                    }\n                });\n            }\n        };\n    })(nativeAudioNode.disconnect);\n};\n","import { AUDIO_NODE_STORE, EVENT_LISTENERS } from '../globals';\nimport { isAudioNode } from '../guards/audio-node';\nimport { isAudioNodeOutputConnection } from '../guards/audio-node-output-connection';\nimport { addActiveInputConnectionToAudioParam } from '../helpers/add-active-input-connection-to-audio-param';\nimport { addPassiveInputConnectionToAudioParam } from '../helpers/add-passive-input-connection-to-audio-param';\nimport { connectNativeAudioNodeToNativeAudioNode } from '../helpers/connect-native-audio-node-to-native-audio-node';\nimport { deleteActiveInputConnection } from '../helpers/delete-active-input-connection';\nimport { deleteActiveInputConnectionToAudioParam } from '../helpers/delete-active-input-connection-to-audio-param';\nimport { deleteEventListenerOfAudioNode } from '../helpers/delete-event-listeners-of-audio-node';\nimport { deletePassiveInputConnectionToAudioNode } from '../helpers/delete-passive-input-connection-to-audio-node';\nimport { deletePassiveInputConnectionToAudioParam } from '../helpers/delete-passive-input-connection-to-audio-param';\nimport { disconnectNativeAudioNodeFromNativeAudioNode } from '../helpers/disconnect-native-audio-node-from-native-audio-node';\nimport { getAudioNodeConnections } from '../helpers/get-audio-node-connections';\nimport { getAudioParamConnections } from '../helpers/get-audio-param-connections';\nimport { getEventListenersOfAudioNode } from '../helpers/get-event-listeners-of-audio-node';\nimport { getNativeAudioNode } from '../helpers/get-native-audio-node';\nimport { getNativeAudioParam } from '../helpers/get-native-audio-param';\nimport { insertElementInSet } from '../helpers/insert-element-in-set';\nimport { isActiveAudioNode } from '../helpers/is-active-audio-node';\nimport { isPartOfACycle } from '../helpers/is-part-of-a-cycle';\nimport { isPassiveAudioNode } from '../helpers/is-passive-audio-node';\nimport { setInternalStateToActive } from '../helpers/set-internal-state-to-active';\nimport { setInternalStateToPassiveWhenNecessary } from '../helpers/set-internal-state-to-passive-when-necessary';\nimport { testAudioNodeDisconnectMethodSupport } from '../helpers/test-audio-node-disconnect-method-support';\nimport { visitEachAudioNodeOnce } from '../helpers/visit-each-audio-node-once';\nimport { wrapAudioNodeDisconnectMethod } from '../helpers/wrap-audio-node-disconnect-method';\nimport {\n    IAudioNode,\n    IAudioNodeRenderer,\n    IAudioParam,\n    IMinimalOfflineAudioContext,\n    INativeAudioNodeFaker,\n    IOfflineAudioContext\n} from '../interfaces';\nimport {\n    TAudioNodeConstructorFactory,\n    TChannelCountMode,\n    TChannelInterpretation,\n    TContext,\n    TInternalStateEventListener,\n    TNativeAudioNode,\n    TNativeAudioParam\n} from '../types';\n\nconst addConnectionToAudioParamOfAudioContext = <T extends TContext>(\n    source: IAudioNode<T>,\n    destination: IAudioParam,\n    output: number,\n    isOffline: boolean\n): boolean => {\n    const { activeInputs, passiveInputs } = getAudioParamConnections<T>(destination);\n    const { outputs } = getAudioNodeConnections(source);\n    const eventListeners = getEventListenersOfAudioNode(source);\n\n    const eventListener: TInternalStateEventListener = (isActive) => {\n        const nativeAudioNode = getNativeAudioNode(source);\n        const nativeAudioParam = getNativeAudioParam(destination);\n\n        if (isActive) {\n            const partialConnection = deletePassiveInputConnectionToAudioParam(passiveInputs, source, output);\n\n            addActiveInputConnectionToAudioParam(activeInputs, source, partialConnection, false);\n\n            if (!isOffline && !isPartOfACycle(source)) {\n                nativeAudioNode.connect(nativeAudioParam, output);\n            }\n        } else {\n            const partialConnection = deleteActiveInputConnectionToAudioParam(activeInputs, source, output);\n\n            addPassiveInputConnectionToAudioParam(passiveInputs, partialConnection, false);\n\n            if (!isOffline && !isPartOfACycle(source)) {\n                nativeAudioNode.disconnect(nativeAudioParam, output);\n            }\n        }\n    };\n\n    if (\n        insertElementInSet(\n            outputs,\n            [destination, output],\n            (outputConnection) => outputConnection[0] === destination && outputConnection[1] === output,\n            true\n        )\n    ) {\n        eventListeners.add(eventListener);\n\n        if (isActiveAudioNode(source)) {\n            addActiveInputConnectionToAudioParam(activeInputs, source, [output, eventListener], true);\n        } else {\n            addPassiveInputConnectionToAudioParam(passiveInputs, [source, output, eventListener], true);\n        }\n\n        return true;\n    }\n\n    return false;\n};\n\nconst deleteInputConnectionOfAudioNode = <T extends TContext>(\n    source: IAudioNode<T>,\n    destination: IAudioNode<T>,\n    output: number,\n    input: number\n): [null | TInternalStateEventListener, boolean] => {\n    const { activeInputs, passiveInputs } = getAudioNodeConnections(destination);\n\n    const activeInputConnection = deleteActiveInputConnection(activeInputs[input], source, output);\n\n    if (activeInputConnection === null) {\n        const passiveInputConnection = deletePassiveInputConnectionToAudioNode(passiveInputs, source, output, input);\n\n        return [passiveInputConnection[2], false];\n    }\n\n    return [activeInputConnection[2], true];\n};\n\nconst deleteInputConnectionOfAudioParam = <T extends TContext>(\n    source: IAudioNode<T>,\n    destination: IAudioParam,\n    output: number\n): [null | TInternalStateEventListener, boolean] => {\n    const { activeInputs, passiveInputs } = getAudioParamConnections<T>(destination);\n\n    const activeInputConnection = deleteActiveInputConnection(activeInputs, source, output);\n\n    if (activeInputConnection === null) {\n        const passiveInputConnection = deletePassiveInputConnectionToAudioParam(passiveInputs, source, output);\n\n        return [passiveInputConnection[1], false];\n    }\n\n    return [activeInputConnection[2], true];\n};\n\nconst deleteInputsOfAudioNode = <T extends TContext>(\n    source: IAudioNode<T>,\n    isOffline: boolean,\n    destination: IAudioNode<T>,\n    output: number,\n    input: number\n) => {\n    const [listener, isActive] = deleteInputConnectionOfAudioNode(source, destination, output, input);\n\n    if (listener !== null) {\n        deleteEventListenerOfAudioNode(source, listener);\n\n        if (isActive && !isOffline && !isPartOfACycle(source)) {\n            disconnectNativeAudioNodeFromNativeAudioNode(getNativeAudioNode(source), getNativeAudioNode(destination), output, input);\n        }\n    }\n\n    if (isActiveAudioNode(destination)) {\n        const { activeInputs } = getAudioNodeConnections(destination);\n\n        setInternalStateToPassiveWhenNecessary(destination, activeInputs);\n    }\n};\n\nconst deleteInputsOfAudioParam = <T extends TContext>(\n    source: IAudioNode<T>,\n    isOffline: boolean,\n    destination: IAudioParam,\n    output: number\n) => {\n    const [listener, isActive] = deleteInputConnectionOfAudioParam(source, destination, output);\n\n    if (listener !== null) {\n        deleteEventListenerOfAudioNode(source, listener);\n\n        if (isActive && !isOffline && !isPartOfACycle(source)) {\n            getNativeAudioNode(source).disconnect(getNativeAudioParam(destination), output);\n        }\n    }\n};\n\nconst deleteAnyConnection = <T extends TContext>(source: IAudioNode<T>, isOffline: boolean): (IAudioNode<T> | IAudioParam)[] => {\n    const audioNodeConnectionsOfSource = getAudioNodeConnections(source);\n    const destinations = [];\n\n    for (const outputConnection of audioNodeConnectionsOfSource.outputs) {\n        if (isAudioNodeOutputConnection(outputConnection)) {\n            deleteInputsOfAudioNode(source, isOffline, ...outputConnection);\n        } else {\n            deleteInputsOfAudioParam(source, isOffline, ...outputConnection);\n        }\n\n        destinations.push(outputConnection[0]);\n    }\n\n    audioNodeConnectionsOfSource.outputs.clear();\n\n    return destinations;\n};\n\nconst deleteConnectionAtOutput = <T extends TContext>(\n    source: IAudioNode<T>,\n    isOffline: boolean,\n    output: number\n): (IAudioNode<T> | IAudioParam)[] => {\n    const audioNodeConnectionsOfSource = getAudioNodeConnections(source);\n    const destinations = [];\n\n    for (const outputConnection of audioNodeConnectionsOfSource.outputs) {\n        if (outputConnection[1] === output) {\n            if (isAudioNodeOutputConnection(outputConnection)) {\n                deleteInputsOfAudioNode(source, isOffline, ...outputConnection);\n            } else {\n                deleteInputsOfAudioParam(source, isOffline, ...outputConnection);\n            }\n\n            destinations.push(outputConnection[0]);\n            audioNodeConnectionsOfSource.outputs.delete(outputConnection);\n        }\n    }\n\n    return destinations;\n};\n\nconst deleteConnectionToDestination = <T extends TContext, U extends TContext>(\n    source: IAudioNode<T>,\n    isOffline: boolean,\n    destination: IAudioNode<U> | IAudioParam,\n    output?: number,\n    input?: number\n): (IAudioNode<T> | IAudioParam)[] => {\n    const audioNodeConnectionsOfSource = getAudioNodeConnections(source);\n\n    return Array.from(audioNodeConnectionsOfSource.outputs)\n        .filter(\n            (outputConnection) =>\n                outputConnection[0] === destination &&\n                (output === undefined || outputConnection[1] === output) &&\n                (input === undefined || outputConnection[2] === input)\n        )\n        .map((outputConnection) => {\n            if (isAudioNodeOutputConnection(outputConnection)) {\n                deleteInputsOfAudioNode(source, isOffline, ...outputConnection);\n            } else {\n                deleteInputsOfAudioParam(source, isOffline, ...outputConnection);\n            }\n\n            audioNodeConnectionsOfSource.outputs.delete(outputConnection);\n\n            return outputConnection[0];\n        });\n};\n\nexport const createAudioNodeConstructor: TAudioNodeConstructorFactory = (\n    addAudioNodeConnections,\n    addConnectionToAudioNode,\n    cacheTestResult,\n    createIncrementCycleCounter,\n    createIndexSizeError,\n    createInvalidAccessError,\n    createNotSupportedError,\n    decrementCycleCounter,\n    detectCycles,\n    eventTargetConstructor,\n    getNativeContext,\n    isNativeAudioContext,\n    isNativeAudioNode,\n    isNativeAudioParam,\n    isNativeOfflineAudioContext,\n    nativeAudioWorkletNodeConstructor\n) => {\n    return class AudioNode<T extends TContext, EventMap extends Record<string, Event> = {}>\n        extends eventTargetConstructor<EventMap>\n        implements IAudioNode<T, EventMap>\n    {\n        private _context: T;\n\n        private _nativeAudioNode: INativeAudioNodeFaker | TNativeAudioNode;\n\n        constructor(\n            context: T,\n            isActive: boolean,\n            nativeAudioNode: INativeAudioNodeFaker | TNativeAudioNode,\n            audioNodeRenderer: T extends IMinimalOfflineAudioContext | IOfflineAudioContext ? IAudioNodeRenderer<T, IAudioNode<T>> : null\n        ) {\n            super(nativeAudioNode);\n\n            this._context = context;\n            this._nativeAudioNode = nativeAudioNode;\n\n            const nativeContext = getNativeContext(context);\n\n            // Bug #12: Safari does not support to disconnect a specific destination.\n            if (\n                isNativeAudioContext(nativeContext) &&\n                true !==\n                    cacheTestResult(testAudioNodeDisconnectMethodSupport, () => {\n                        return testAudioNodeDisconnectMethodSupport(nativeContext, nativeAudioWorkletNodeConstructor);\n                    })\n            ) {\n                wrapAudioNodeDisconnectMethod(nativeAudioNode);\n            }\n\n            AUDIO_NODE_STORE.set(this, nativeAudioNode);\n            EVENT_LISTENERS.set(this, new Set());\n\n            if (context.state !== 'closed' && isActive) {\n                setInternalStateToActive(this);\n            }\n\n            addAudioNodeConnections(this, audioNodeRenderer, nativeAudioNode);\n        }\n\n        get channelCount(): number {\n            return this._nativeAudioNode.channelCount;\n        }\n\n        set channelCount(value) {\n            this._nativeAudioNode.channelCount = value;\n        }\n\n        get channelCountMode(): TChannelCountMode {\n            return this._nativeAudioNode.channelCountMode;\n        }\n\n        set channelCountMode(value) {\n            this._nativeAudioNode.channelCountMode = value;\n        }\n\n        get channelInterpretation(): TChannelInterpretation {\n            return this._nativeAudioNode.channelInterpretation;\n        }\n\n        set channelInterpretation(value) {\n            this._nativeAudioNode.channelInterpretation = value;\n        }\n\n        get context(): T {\n            return this._context;\n        }\n\n        get numberOfInputs(): number {\n            return this._nativeAudioNode.numberOfInputs;\n        }\n\n        get numberOfOutputs(): number {\n            return this._nativeAudioNode.numberOfOutputs;\n        }\n\n        public connect<U extends TContext, V extends IAudioNode<U>>(destinationNode: V, output?: number, input?: number): V;\n        public connect(destinationParam: IAudioParam, output?: number): void;\n        // tslint:disable-next-line:invalid-void\n        public connect<U extends TContext, V extends IAudioNode<U>>(destination: V | IAudioParam, output = 0, input = 0): void | V {\n            // Bug #174: Safari does expose a wrong numberOfOutputs for MediaStreamAudioDestinationNodes.\n            if (output < 0 || output >= this._nativeAudioNode.numberOfOutputs) {\n                throw createIndexSizeError();\n            }\n\n            const nativeContext = getNativeContext(this._context);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n\n            if (isNativeAudioNode(destination) || isNativeAudioParam(destination)) {\n                throw createInvalidAccessError();\n            }\n\n            if (isAudioNode(destination)) {\n                const nativeDestinationAudioNode = getNativeAudioNode(destination);\n\n                try {\n                    const connection = connectNativeAudioNodeToNativeAudioNode(\n                        this._nativeAudioNode,\n                        nativeDestinationAudioNode,\n                        output,\n                        input\n                    );\n\n                    const isPassive = isPassiveAudioNode(this);\n\n                    if (isOffline || isPassive) {\n                        this._nativeAudioNode.disconnect(...connection);\n                    }\n\n                    if (this.context.state !== 'closed' && !isPassive && isPassiveAudioNode(destination)) {\n                        setInternalStateToActive(destination);\n                    }\n                } catch (err) {\n                    // Bug #41: Safari does not throw the correct exception so far.\n                    if (err.code === 12) {\n                        throw createInvalidAccessError();\n                    }\n\n                    throw err;\n                }\n\n                const isNewConnectionToAudioNode = addConnectionToAudioNode(\n                    this,\n                    <IAudioNode<TContext>>destination,\n                    output,\n                    input,\n                    isOffline\n                );\n\n                // Bug #164: Only Firefox detects cycles so far.\n                if (isNewConnectionToAudioNode) {\n                    const cycles = detectCycles([this], <IAudioNode<T>>(<unknown>destination));\n\n                    visitEachAudioNodeOnce(cycles, createIncrementCycleCounter(isOffline));\n                }\n\n                return destination;\n            }\n\n            const nativeAudioParam = getNativeAudioParam(destination);\n\n            /*\n             * Bug #73, #147 & #153: Safari does not support to connect an input signal to the playbackRate AudioParam of an\n             * AudioBufferSourceNode. This can't be easily detected and that's why the outdated name property is used here to identify\n             * Safari. In addition to that the maxValue property is used to only detect the affected versions below v14.0.2.\n             */\n            if ((<TNativeAudioParam & { name: string }>nativeAudioParam).name === 'playbackRate' && nativeAudioParam.maxValue === 1024) {\n                throw createNotSupportedError();\n            }\n\n            try {\n                this._nativeAudioNode.connect(nativeAudioParam, output);\n\n                if (isOffline || isPassiveAudioNode(this)) {\n                    this._nativeAudioNode.disconnect(nativeAudioParam, output);\n                }\n            } catch (err) {\n                // Bug #58: Safari doesn't throw an InvalidAccessError yet.\n                if (err.code === 12) {\n                    throw createInvalidAccessError();\n                }\n\n                throw err;\n            }\n\n            const isNewConnectionToAudioParam = addConnectionToAudioParamOfAudioContext(this, destination, output, isOffline);\n\n            // Bug #164: Only Firefox detects cycles so far.\n            if (isNewConnectionToAudioParam) {\n                const cycles = detectCycles([this], destination);\n\n                visitEachAudioNodeOnce(cycles, createIncrementCycleCounter(isOffline));\n            }\n        }\n\n        public disconnect(output?: number): void;\n        public disconnect<U extends TContext>(destinationNode: IAudioNode<U>, output?: number, input?: number): void;\n        public disconnect(destinationParam: IAudioParam, output?: number): void;\n        public disconnect<U extends TContext>(\n            destinationOrOutput?: number | IAudioNode<U> | IAudioParam,\n            output?: number,\n            input?: number\n        ): void {\n            let destinations: (IAudioNode<T> | IAudioParam)[];\n\n            const nativeContext = getNativeContext(this._context);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n\n            if (destinationOrOutput === undefined) {\n                destinations = deleteAnyConnection(this, isOffline);\n            } else if (typeof destinationOrOutput === 'number') {\n                if (destinationOrOutput < 0 || destinationOrOutput >= this.numberOfOutputs) {\n                    throw createIndexSizeError();\n                }\n\n                destinations = deleteConnectionAtOutput(this, isOffline, destinationOrOutput);\n            } else {\n                if (output !== undefined && (output < 0 || output >= this.numberOfOutputs)) {\n                    throw createIndexSizeError();\n                }\n\n                if (isAudioNode(destinationOrOutput) && input !== undefined && (input < 0 || input >= destinationOrOutput.numberOfInputs)) {\n                    throw createIndexSizeError();\n                }\n\n                destinations = deleteConnectionToDestination(this, isOffline, destinationOrOutput, output, input);\n\n                if (destinations.length === 0) {\n                    throw createInvalidAccessError();\n                }\n            }\n\n            // Bug #164: Only Firefox detects cycles so far.\n            for (const destination of destinations) {\n                const cycles = detectCycles([this], destination);\n\n                visitEachAudioNodeOnce(cycles, decrementCycleCounter);\n            }\n        }\n    };\n};\n","import { IAudioNode } from '../interfaces';\nimport { TActiveInputConnection, TContext } from '../types';\nimport { pickElementFromSet } from './pick-element-from-set';\n\nexport const deleteActiveInputConnectionToAudioParam = <T extends TContext>(\n    activeInputs: Set<TActiveInputConnection<T>>,\n    source: IAudioNode<T>,\n    output: number\n) => {\n    return pickElementFromSet(\n        activeInputs,\n        (activeInputConnection) => activeInputConnection[0] === source && activeInputConnection[1] === output\n    );\n};\n","import { IReadOnlyMap } from './interfaces';\n\nexport class ReadOnlyMap<T, U> implements IReadOnlyMap<T, U> {\n    private _map: Map<T, U>;\n\n    constructor(parameters: [T, U][]) {\n        this._map = new Map(parameters);\n    }\n\n    get size(): number {\n        return this._map.size;\n    }\n\n    public entries(): IterableIterator<[T, U]> {\n        return this._map.entries();\n    }\n\n    public forEach(callback: (audioParam: U, name: T, map: ReadOnlyMap<T, U>) => void, thisArg: any = null): void {\n        return this._map.forEach((value: U, key: T) => callback.call(thisArg, value, key, this));\n    }\n\n    public get(name: T): undefined | U {\n        return this._map.get(name);\n    }\n\n    public has(name: T): boolean {\n        return this._map.has(name);\n    }\n\n    public keys(): IterableIterator<T> {\n        return this._map.keys();\n    }\n\n    public values(): IterableIterator<U> {\n        return this._map.values();\n    }\n}\n","import { NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS } from '../globals';\nimport {\n    IAudioParam,\n    IAudioWorkletNode,\n    IAudioWorkletNodeEventMap,\n    IAudioWorkletNodeOptions,\n    IMinimalAudioContext,\n    IMinimalOfflineAudioContext,\n    IOfflineAudioContext,\n    IReadOnlyMap\n} from '../interfaces';\nimport { ReadOnlyMap } from '../read-only-map';\nimport {\n    TAudioNodeRenderer,\n    TAudioParamMap,\n    TAudioWorkletNodeConstructorFactory,\n    TContext,\n    TErrorEventHandler,\n    TNativeAudioContext,\n    TNativeAudioParam,\n    TNativeAudioWorkletNode\n} from '../types';\n\nconst DEFAULT_OPTIONS = {\n    channelCount: 2,\n    // Bug #61: The channelCountMode should be 'max' according to the spec but is set to 'explicit' to achieve consistent behavior.\n    channelCountMode: 'explicit',\n    channelInterpretation: 'speakers',\n    numberOfInputs: 1,\n    numberOfOutputs: 1,\n    parameterData: {},\n    processorOptions: {}\n} as const;\n\nexport const createAudioWorkletNodeConstructor: TAudioWorkletNodeConstructorFactory = (\n    addUnrenderedAudioWorkletNode,\n    audioNodeConstructor,\n    createAudioParam,\n    createAudioWorkletNodeRenderer,\n    createNativeAudioWorkletNode,\n    getAudioNodeConnections,\n    getBackupOfflineAudioContext,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    nativeAudioWorkletNodeConstructor,\n    sanitizeAudioWorkletNodeOptions,\n    setActiveAudioWorkletNodeInputs,\n    testAudioWorkletNodeOptionsClonability,\n    wrapEventListener\n) => {\n    return class AudioWorkletNode<T extends TContext>\n        extends audioNodeConstructor<T, IAudioWorkletNodeEventMap>\n        implements IAudioWorkletNode<T>\n    {\n        private _nativeAudioWorkletNode: TNativeAudioWorkletNode;\n\n        private _onprocessorerror: null | TErrorEventHandler<this>;\n\n        private _parameters: null | TAudioParamMap;\n\n        constructor(context: T, name: string, options?: Partial<IAudioWorkletNodeOptions>) {\n            const nativeContext = getNativeContext(context);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n            const mergedOptions = sanitizeAudioWorkletNodeOptions({ ...DEFAULT_OPTIONS, ...options });\n\n            // Bug #191: Safari doesn't throw an error if the options aren't clonable.\n            testAudioWorkletNodeOptionsClonability(mergedOptions);\n\n            const nodeNameToProcessorConstructorMap = NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.get(nativeContext);\n            const processorConstructor = nodeNameToProcessorConstructorMap?.get(name);\n            // Bug #186: Chrome and Edge do not allow to create an AudioWorkletNode on a closed AudioContext.\n            const nativeContextOrBackupOfflineAudioContext =\n                isOffline || nativeContext.state !== 'closed'\n                    ? nativeContext\n                    : getBackupOfflineAudioContext(<TNativeAudioContext>nativeContext) ?? nativeContext;\n            const nativeAudioWorkletNode = createNativeAudioWorkletNode(\n                nativeContextOrBackupOfflineAudioContext,\n                isOffline ? null : (<IMinimalAudioContext>(<any>context)).baseLatency,\n                nativeAudioWorkletNodeConstructor,\n                name,\n                processorConstructor,\n                mergedOptions\n            );\n            const audioWorkletNodeRenderer = <TAudioNodeRenderer<T, this>>(\n                (isOffline ? createAudioWorkletNodeRenderer(name, mergedOptions, processorConstructor) : null)\n            );\n\n            /*\n             * @todo Add a mechanism to switch an AudioWorkletNode to passive once the process() function of the AudioWorkletProcessor\n             * returns false.\n             */\n            super(context, true, nativeAudioWorkletNode, audioWorkletNodeRenderer);\n\n            const parameters: [string, IAudioParam][] = [];\n\n            nativeAudioWorkletNode.parameters.forEach((nativeAudioParam, nm) => {\n                const audioParam = createAudioParam(this, isOffline, nativeAudioParam);\n\n                parameters.push([nm, audioParam]);\n            });\n\n            this._nativeAudioWorkletNode = nativeAudioWorkletNode;\n            this._onprocessorerror = null;\n            this._parameters = new ReadOnlyMap(parameters);\n\n            /*\n             * Bug #86 & #87: Invoking the renderer of an AudioWorkletNode might be necessary if it has no direct or indirect connection to\n             * the destination.\n             */\n            if (isOffline) {\n                addUnrenderedAudioWorkletNode(nativeContext, <IAudioWorkletNode<IMinimalOfflineAudioContext | IOfflineAudioContext>>this);\n            }\n\n            const { activeInputs } = getAudioNodeConnections(this);\n\n            setActiveAudioWorkletNodeInputs(nativeAudioWorkletNode, activeInputs);\n        }\n\n        get onprocessorerror(): null | TErrorEventHandler<this> {\n            return this._onprocessorerror;\n        }\n\n        set onprocessorerror(value) {\n            const wrappedListener = typeof value === 'function' ? wrapEventListener(this, <EventListenerOrEventListenerObject>value) : null;\n\n            this._nativeAudioWorkletNode.onprocessorerror = wrappedListener;\n\n            const nativeOnProcessorError = this._nativeAudioWorkletNode.onprocessorerror;\n\n            this._onprocessorerror =\n                nativeOnProcessorError !== null && nativeOnProcessorError === wrappedListener\n                    ? value\n                    : <null | TErrorEventHandler<this>>nativeOnProcessorError;\n        }\n\n        get parameters(): TAudioParamMap {\n            if (this._parameters === null) {\n                // @todo The definition that TypeScript uses of the AudioParamMap is lacking many methods.\n                return <IReadOnlyMap<string, TNativeAudioParam>>this._nativeAudioWorkletNode.parameters;\n            }\n\n            return this._parameters;\n        }\n\n        get port(): MessagePort {\n            return this._nativeAudioWorkletNode.port;\n        }\n    };\n};\n","import { TNativeAudioBuffer } from '../types';\n\nexport function copyFromChannel(\n    audioBuffer: TNativeAudioBuffer,\n    parent: { [key: number]: Float32Array },\n    key: number,\n    channelNumber: number,\n    bufferOffset: number\n): void;\nexport function copyFromChannel(\n    audioBuffer: TNativeAudioBuffer,\n    parent: { [key: string]: Float32Array },\n    key: string,\n    channelNumber: number,\n    bufferOffset: number\n): void;\nexport function copyFromChannel(\n    audioBuffer: TNativeAudioBuffer,\n    // @todo There is currently no way to define something like { [ key: number | string ]: Float32Array }\n    parent: any,\n    key: number | string,\n    channelNumber: number,\n    bufferOffset: number\n): void {\n    if (typeof audioBuffer.copyFromChannel === 'function') {\n        // The byteLength will be 0 when the ArrayBuffer was transferred.\n        if (parent[key].byteLength === 0) {\n            parent[key] = new Float32Array(128);\n        }\n\n        audioBuffer.copyFromChannel(parent[key], channelNumber, bufferOffset);\n\n        // Bug #5: Safari does not support copyFromChannel().\n    } else {\n        const channelData = audioBuffer.getChannelData(channelNumber);\n\n        // The byteLength will be 0 when the ArrayBuffer was transferred.\n        if (parent[key].byteLength === 0) {\n            parent[key] = channelData.slice(bufferOffset, bufferOffset + 128);\n        } else {\n            const slicedInput = new Float32Array(channelData.buffer, bufferOffset * Float32Array.BYTES_PER_ELEMENT, 128);\n\n            parent[key].set(slicedInput);\n        }\n    }\n}\n","import { TNativeAudioBuffer } from '../types';\n\nexport const copyToChannel = (\n    audioBuffer: TNativeAudioBuffer,\n    parent: { [key: number]: Float32Array },\n    key: number,\n    channelNumber: number,\n    bufferOffset: number\n): void => {\n    if (typeof audioBuffer.copyToChannel === 'function') {\n        // The byteLength will be 0 when the ArrayBuffer was transferred.\n        if (parent[key].byteLength !== 0) {\n            audioBuffer.copyToChannel(parent[key], channelNumber, bufferOffset);\n        }\n\n        // Bug #5: Safari does not support copyToChannel().\n    } else {\n        // The byteLength will be 0 when the ArrayBuffer was transferred.\n        if (parent[key].byteLength !== 0) {\n            audioBuffer.getChannelData(channelNumber).set(parent[key], bufferOffset);\n        }\n    }\n};\n","export const createNestedArrays = (x: number, y: number | number[]): Float32Array[][] => {\n    const arrays: Float32Array[][] = [];\n\n    for (let i = 0; i < x; i += 1) {\n        const array = [];\n\n        const length = typeof y === 'number' ? y : y[i];\n\n        for (let j = 0; j < length; j += 1) {\n            array.push(new Float32Array(128));\n        }\n\n        arrays.push(array);\n    }\n\n    return arrays;\n};\n","import { copyFromChannel } from '../helpers/copy-from-channel';\nimport { copyToChannel } from '../helpers/copy-to-channel';\nimport { createNestedArrays } from '../helpers/create-nested-arrays';\nimport { getAudioNodeConnections } from '../helpers/get-audio-node-connections';\nimport { getAudioWorkletProcessor } from '../helpers/get-audio-worklet-processor';\nimport { isOwnedByContext } from '../helpers/is-owned-by-context';\nimport {\n    IAudioWorkletNode,\n    IAudioWorkletNodeOptions,\n    IAudioWorkletProcessorConstructor,\n    IMinimalOfflineAudioContext,\n    IOfflineAudioContext,\n    IReadOnlyMap\n} from '../interfaces';\nimport {\n    TAudioWorkletNodeRendererFactoryFactory,\n    TExposeCurrentFrameAndCurrentTimeFunction,\n    TNativeAudioBuffer,\n    TNativeAudioNode,\n    TNativeAudioParam,\n    TNativeAudioWorkletNode,\n    TNativeChannelMergerNode,\n    TNativeChannelSplitterNode,\n    TNativeGainNode,\n    TNativeOfflineAudioContext\n} from '../types';\n\nconst processBuffer = async <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>(\n    proxy: IAudioWorkletNode<T>,\n    renderedBuffer: null | TNativeAudioBuffer,\n    nativeOfflineAudioContext: TNativeOfflineAudioContext,\n    options: IAudioWorkletNodeOptions,\n    outputChannelCount: number[],\n    processorConstructor: undefined | IAudioWorkletProcessorConstructor,\n    exposeCurrentFrameAndCurrentTime: TExposeCurrentFrameAndCurrentTimeFunction\n): Promise<null | TNativeAudioBuffer> => {\n    // Ceil the length to the next full render quantum.\n    // Bug #17: Safari does not yet expose the length.\n    const length = renderedBuffer === null ? Math.ceil(proxy.context.length / 128) * 128 : renderedBuffer.length;\n    const numberOfInputChannels = options.channelCount * options.numberOfInputs;\n    const numberOfOutputChannels = outputChannelCount.reduce((sum, value) => sum + value, 0);\n    const processedBuffer =\n        numberOfOutputChannels === 0\n            ? null\n            : nativeOfflineAudioContext.createBuffer(numberOfOutputChannels, length, nativeOfflineAudioContext.sampleRate);\n\n    if (processorConstructor === undefined) {\n        throw new Error('Missing the processor constructor.');\n    }\n\n    const audioNodeConnections = getAudioNodeConnections(proxy);\n    const audioWorkletProcessor = await getAudioWorkletProcessor(nativeOfflineAudioContext, proxy);\n    const inputs = createNestedArrays(options.numberOfInputs, options.channelCount);\n    const outputs = createNestedArrays(options.numberOfOutputs, outputChannelCount);\n    const parameters: { [name: string]: Float32Array } = Array.from(proxy.parameters.keys()).reduce(\n        (prmtrs, name) => ({ ...prmtrs, [name]: new Float32Array(128) }),\n        {}\n    );\n\n    for (let i = 0; i < length; i += 128) {\n        if (options.numberOfInputs > 0 && renderedBuffer !== null) {\n            for (let j = 0; j < options.numberOfInputs; j += 1) {\n                for (let k = 0; k < options.channelCount; k += 1) {\n                    copyFromChannel(renderedBuffer, inputs[j], k, k, i);\n                }\n            }\n        }\n\n        if (processorConstructor.parameterDescriptors !== undefined && renderedBuffer !== null) {\n            processorConstructor.parameterDescriptors.forEach(({ name }, index) => {\n                copyFromChannel(renderedBuffer, parameters, name, numberOfInputChannels + index, i);\n            });\n        }\n\n        for (let j = 0; j < options.numberOfInputs; j += 1) {\n            for (let k = 0; k < outputChannelCount[j]; k += 1) {\n                // The byteLength will be 0 when the ArrayBuffer was transferred.\n                if (outputs[j][k].byteLength === 0) {\n                    outputs[j][k] = new Float32Array(128);\n                }\n            }\n        }\n\n        try {\n            const potentiallyEmptyInputs = inputs.map((input, index) => {\n                if (audioNodeConnections.activeInputs[index].size === 0) {\n                    return [];\n                }\n\n                return input;\n            });\n            const activeSourceFlag = exposeCurrentFrameAndCurrentTime(\n                i / nativeOfflineAudioContext.sampleRate,\n                nativeOfflineAudioContext.sampleRate,\n                () => audioWorkletProcessor.process(potentiallyEmptyInputs, outputs, parameters)\n            );\n\n            if (processedBuffer !== null) {\n                for (let j = 0, outputChannelSplitterNodeOutput = 0; j < options.numberOfOutputs; j += 1) {\n                    for (let k = 0; k < outputChannelCount[j]; k += 1) {\n                        copyToChannel(processedBuffer, outputs[j], k, outputChannelSplitterNodeOutput + k, i);\n                    }\n\n                    outputChannelSplitterNodeOutput += outputChannelCount[j];\n                }\n            }\n\n            if (!activeSourceFlag) {\n                break;\n            }\n        } catch (error) {\n            proxy.dispatchEvent(\n                new ErrorEvent('processorerror', {\n                    colno: error.colno,\n                    filename: error.filename,\n                    lineno: error.lineno,\n                    message: error.message\n                })\n            );\n\n            break;\n        }\n    }\n\n    return processedBuffer;\n};\n\nexport const createAudioWorkletNodeRendererFactory: TAudioWorkletNodeRendererFactoryFactory = (\n    connectAudioParam,\n    connectMultipleOutputs,\n    createNativeAudioBufferSourceNode,\n    createNativeChannelMergerNode,\n    createNativeChannelSplitterNode,\n    createNativeConstantSourceNode,\n    createNativeGainNode,\n    deleteUnrenderedAudioWorkletNode,\n    disconnectMultipleOutputs,\n    exposeCurrentFrameAndCurrentTime,\n    getNativeAudioNode,\n    nativeAudioWorkletNodeConstructor,\n    nativeOfflineAudioContextConstructor,\n    renderAutomation,\n    renderInputsOfAudioNode,\n    renderNativeOfflineAudioContext\n) => {\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>(\n        name: string,\n        options: IAudioWorkletNodeOptions,\n        processorConstructor: undefined | IAudioWorkletProcessorConstructor\n    ) => {\n        const renderedNativeAudioNodes = new WeakMap<TNativeOfflineAudioContext, TNativeAudioWorkletNode | TNativeGainNode>();\n\n        let processedBufferPromise: null | Promise<null | TNativeAudioBuffer> = null;\n\n        const createAudioNode = async (proxy: IAudioWorkletNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext) => {\n            let nativeAudioWorkletNode = getNativeAudioNode<T, TNativeAudioWorkletNode>(proxy);\n            let nativeOutputNodes: null | [TNativeChannelSplitterNode, TNativeChannelMergerNode[], TNativeGainNode] = null;\n\n            const nativeAudioWorkletNodeIsOwnedByContext = isOwnedByContext(nativeAudioWorkletNode, nativeOfflineAudioContext);\n            const outputChannelCount = Array.isArray(options.outputChannelCount)\n                ? options.outputChannelCount\n                : Array.from(options.outputChannelCount);\n\n            // Bug #61: Only Chrome, Edge & Firefox have an implementation of the AudioWorkletNode yet.\n            if (nativeAudioWorkletNodeConstructor === null) {\n                const numberOfOutputChannels = outputChannelCount.reduce((sum, value) => sum + value, 0);\n                const outputChannelSplitterNode = createNativeChannelSplitterNode(nativeOfflineAudioContext, {\n                    channelCount: Math.max(1, numberOfOutputChannels),\n                    channelCountMode: 'explicit',\n                    channelInterpretation: 'discrete',\n                    numberOfOutputs: Math.max(1, numberOfOutputChannels)\n                });\n                const outputChannelMergerNodes: TNativeChannelMergerNode[] = [];\n\n                for (let i = 0; i < proxy.numberOfOutputs; i += 1) {\n                    outputChannelMergerNodes.push(\n                        createNativeChannelMergerNode(nativeOfflineAudioContext, {\n                            channelCount: 1,\n                            channelCountMode: 'explicit',\n                            channelInterpretation: 'speakers',\n                            numberOfInputs: outputChannelCount[i]\n                        })\n                    );\n                }\n\n                const outputGainNode = createNativeGainNode(nativeOfflineAudioContext, {\n                    channelCount: options.channelCount,\n                    channelCountMode: options.channelCountMode,\n                    channelInterpretation: options.channelInterpretation,\n                    gain: 1\n                });\n\n                outputGainNode.connect = <TNativeAudioNode['connect']>connectMultipleOutputs.bind(null, outputChannelMergerNodes);\n                outputGainNode.disconnect = <TNativeAudioNode['disconnect']>disconnectMultipleOutputs.bind(null, outputChannelMergerNodes);\n\n                nativeOutputNodes = [outputChannelSplitterNode, outputChannelMergerNodes, outputGainNode];\n            } else if (!nativeAudioWorkletNodeIsOwnedByContext) {\n                nativeAudioWorkletNode = new nativeAudioWorkletNodeConstructor(nativeOfflineAudioContext, name);\n            }\n\n            renderedNativeAudioNodes.set(\n                nativeOfflineAudioContext,\n                nativeOutputNodes === null ? nativeAudioWorkletNode : nativeOutputNodes[2]\n            );\n\n            if (nativeOutputNodes !== null) {\n                if (processedBufferPromise === null) {\n                    if (processorConstructor === undefined) {\n                        throw new Error('Missing the processor constructor.');\n                    }\n\n                    if (nativeOfflineAudioContextConstructor === null) {\n                        throw new Error('Missing the native OfflineAudioContext constructor.');\n                    }\n\n                    // Bug #47: The AudioDestinationNode in Safari gets not initialized correctly.\n                    const numberOfInputChannels = proxy.channelCount * proxy.numberOfInputs;\n                    const numberOfParameters =\n                        processorConstructor.parameterDescriptors === undefined ? 0 : processorConstructor.parameterDescriptors.length;\n                    const numberOfChannels = numberOfInputChannels + numberOfParameters;\n\n                    const renderBuffer = async () => {\n                        const partialOfflineAudioContext = new nativeOfflineAudioContextConstructor(\n                            numberOfChannels,\n                            // Ceil the length to the next full render quantum.\n                            // Bug #17: Safari does not yet expose the length.\n                            Math.ceil(proxy.context.length / 128) * 128,\n                            nativeOfflineAudioContext.sampleRate\n                        );\n                        const gainNodes: TNativeGainNode[] = [];\n                        const inputChannelSplitterNodes = [];\n\n                        for (let i = 0; i < options.numberOfInputs; i += 1) {\n                            gainNodes.push(\n                                createNativeGainNode(partialOfflineAudioContext, {\n                                    channelCount: options.channelCount,\n                                    channelCountMode: options.channelCountMode,\n                                    channelInterpretation: options.channelInterpretation,\n                                    gain: 1\n                                })\n                            );\n                            inputChannelSplitterNodes.push(\n                                createNativeChannelSplitterNode(partialOfflineAudioContext, {\n                                    channelCount: options.channelCount,\n                                    channelCountMode: 'explicit',\n                                    channelInterpretation: 'discrete',\n                                    numberOfOutputs: options.channelCount\n                                })\n                            );\n                        }\n\n                        const constantSourceNodes = await Promise.all(\n                            Array.from(proxy.parameters.values()).map(async (audioParam) => {\n                                const constantSourceNode = createNativeConstantSourceNode(partialOfflineAudioContext, {\n                                    channelCount: 1,\n                                    channelCountMode: 'explicit',\n                                    channelInterpretation: 'discrete',\n                                    offset: audioParam.value\n                                });\n\n                                await renderAutomation(partialOfflineAudioContext, audioParam, constantSourceNode.offset);\n\n                                return constantSourceNode;\n                            })\n                        );\n\n                        const inputChannelMergerNode = createNativeChannelMergerNode(partialOfflineAudioContext, {\n                            channelCount: 1,\n                            channelCountMode: 'explicit',\n                            channelInterpretation: 'speakers',\n                            numberOfInputs: Math.max(1, numberOfInputChannels + numberOfParameters)\n                        });\n\n                        for (let i = 0; i < options.numberOfInputs; i += 1) {\n                            gainNodes[i].connect(inputChannelSplitterNodes[i]);\n\n                            for (let j = 0; j < options.channelCount; j += 1) {\n                                inputChannelSplitterNodes[i].connect(inputChannelMergerNode, j, i * options.channelCount + j);\n                            }\n                        }\n\n                        for (const [index, constantSourceNode] of constantSourceNodes.entries()) {\n                            constantSourceNode.connect(inputChannelMergerNode, 0, numberOfInputChannels + index);\n                            constantSourceNode.start(0);\n                        }\n\n                        inputChannelMergerNode.connect(partialOfflineAudioContext.destination);\n\n                        await Promise.all(\n                            gainNodes.map((gainNode) => renderInputsOfAudioNode(proxy, partialOfflineAudioContext, gainNode))\n                        );\n\n                        return renderNativeOfflineAudioContext(partialOfflineAudioContext);\n                    };\n\n                    processedBufferPromise = processBuffer(\n                        proxy,\n                        numberOfChannels === 0 ? null : await renderBuffer(),\n                        nativeOfflineAudioContext,\n                        options,\n                        outputChannelCount,\n                        processorConstructor,\n                        exposeCurrentFrameAndCurrentTime\n                    );\n                }\n\n                const processedBuffer = await processedBufferPromise;\n                const audioBufferSourceNode = createNativeAudioBufferSourceNode(nativeOfflineAudioContext, {\n                    buffer: null,\n                    channelCount: 2,\n                    channelCountMode: 'max',\n                    channelInterpretation: 'speakers',\n                    loop: false,\n                    loopEnd: 0,\n                    loopStart: 0,\n                    playbackRate: 1\n                });\n                const [outputChannelSplitterNode, outputChannelMergerNodes, outputGainNode] = nativeOutputNodes;\n\n                if (processedBuffer !== null) {\n                    audioBufferSourceNode.buffer = processedBuffer;\n                    audioBufferSourceNode.start(0);\n                }\n\n                audioBufferSourceNode.connect(outputChannelSplitterNode);\n\n                for (let i = 0, outputChannelSplitterNodeOutput = 0; i < proxy.numberOfOutputs; i += 1) {\n                    const outputChannelMergerNode = outputChannelMergerNodes[i];\n\n                    for (let j = 0; j < outputChannelCount[i]; j += 1) {\n                        outputChannelSplitterNode.connect(outputChannelMergerNode, outputChannelSplitterNodeOutput + j, j);\n                    }\n\n                    outputChannelSplitterNodeOutput += outputChannelCount[i];\n                }\n\n                return outputGainNode;\n            }\n\n            if (!nativeAudioWorkletNodeIsOwnedByContext) {\n                for (const [nm, audioParam] of proxy.parameters.entries()) {\n                    await renderAutomation(\n                        nativeOfflineAudioContext,\n                        audioParam,\n                        // @todo The definition that TypeScript uses of the AudioParamMap is lacking many methods.\n                        <TNativeAudioParam>(<IReadOnlyMap<string, TNativeAudioParam>>nativeAudioWorkletNode.parameters).get(nm)\n                    );\n                }\n            } else {\n                for (const [nm, audioParam] of proxy.parameters.entries()) {\n                    await connectAudioParam(\n                        nativeOfflineAudioContext,\n                        audioParam,\n                        // @todo The definition that TypeScript uses of the AudioParamMap is lacking many methods.\n                        <TNativeAudioParam>(<IReadOnlyMap<string, TNativeAudioParam>>nativeAudioWorkletNode.parameters).get(nm)\n                    );\n                }\n            }\n\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeAudioWorkletNode);\n\n            return nativeAudioWorkletNode;\n        };\n\n        return {\n            render(\n                proxy: IAudioWorkletNode<T>,\n                nativeOfflineAudioContext: TNativeOfflineAudioContext\n            ): Promise<TNativeAudioWorkletNode | TNativeGainNode> {\n                deleteUnrenderedAudioWorkletNode(nativeOfflineAudioContext, proxy);\n\n                const renderedNativeAudioWorkletNodeOrGainNode = renderedNativeAudioNodes.get(nativeOfflineAudioContext);\n\n                if (renderedNativeAudioWorkletNodeOrGainNode !== undefined) {\n                    return Promise.resolve(renderedNativeAudioWorkletNodeOrGainNode);\n                }\n\n                return createAudioNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n","import { NODE_TO_PROCESSOR_MAPS } from '../globals';\nimport { IAudioNode, IAudioWorkletProcessor } from '../interfaces';\nimport { TContext, TNativeAudioWorkletNode, TNativeOfflineAudioContext } from '../types';\nimport { getNativeAudioNode } from './get-native-audio-node';\nimport { getValueForKey } from './get-value-for-key';\n\nexport const getAudioWorkletProcessor = <T extends TContext>(\n    nativeOfflineAudioContext: TNativeOfflineAudioContext,\n    proxy: IAudioNode<T>\n): Promise<IAudioWorkletProcessor> => {\n    const nodeToProcessorMap = getValueForKey(NODE_TO_PROCESSOR_MAPS, nativeOfflineAudioContext);\n    const nativeAudioWorkletNode = getNativeAudioNode<T, TNativeAudioWorkletNode>(proxy);\n\n    return getValueForKey(nodeToProcessorMap, nativeAudioWorkletNode);\n};\n","import { MOST_NEGATIVE_SINGLE_FLOAT, MOST_POSITIVE_SINGLE_FLOAT } from '../constants';\nimport { IAudioParam, IBiquadFilterNode, IBiquadFilterOptions } from '../interfaces';\nimport { TAudioNodeRenderer, TBiquadFilterNodeConstructorFactory, TBiquadFilterType, TContext, TNativeBiquadFilterNode } from '../types';\n\nconst DEFAULT_OPTIONS = {\n    Q: 1,\n    channelCount: 2,\n    channelCountMode: 'max',\n    channelInterpretation: 'speakers',\n    detune: 0,\n    frequency: 350,\n    gain: 0,\n    type: 'lowpass'\n} as const;\n\nexport const createBiquadFilterNodeConstructor: TBiquadFilterNodeConstructorFactory = (\n    audioNodeConstructor,\n    createAudioParam,\n    createBiquadFilterNodeRenderer,\n    createInvalidAccessError,\n    createNativeBiquadFilterNode,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    setAudioNodeTailTime\n) => {\n    return class BiquadFilterNode<T extends TContext> extends audioNodeConstructor<T> implements IBiquadFilterNode<T> {\n        private _detune: IAudioParam;\n\n        private _frequency: IAudioParam;\n\n        private _gain: IAudioParam;\n\n        private _nativeBiquadFilterNode: TNativeBiquadFilterNode;\n\n        private _Q: IAudioParam;\n\n        constructor(context: T, options?: Partial<IBiquadFilterOptions>) {\n            const nativeContext = getNativeContext(context);\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n            const nativeBiquadFilterNode = createNativeBiquadFilterNode(nativeContext, mergedOptions);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n            const biquadFilterNodeRenderer = <TAudioNodeRenderer<T, this>>(isOffline ? createBiquadFilterNodeRenderer() : null);\n\n            super(context, false, nativeBiquadFilterNode, biquadFilterNodeRenderer);\n\n            // Bug #80: Safari does not export the correct values for maxValue and minValue.\n            this._Q = createAudioParam(this, isOffline, nativeBiquadFilterNode.Q, MOST_POSITIVE_SINGLE_FLOAT, MOST_NEGATIVE_SINGLE_FLOAT);\n            // Bug #78: Firefox & Safari do not export the correct values for maxValue and minValue.\n            this._detune = createAudioParam(\n                this,\n                isOffline,\n                nativeBiquadFilterNode.detune,\n                1200 * Math.log2(MOST_POSITIVE_SINGLE_FLOAT),\n                -1200 * Math.log2(MOST_POSITIVE_SINGLE_FLOAT)\n            );\n            // Bug #77: Firefox & Safari do not export the correct value for minValue.\n            this._frequency = createAudioParam(this, isOffline, nativeBiquadFilterNode.frequency, context.sampleRate / 2, 0);\n            // Bug #79: Firefox & Safari do not export the correct values for maxValue and minValue.\n            this._gain = createAudioParam(\n                this,\n                isOffline,\n                nativeBiquadFilterNode.gain,\n                40 * Math.log10(MOST_POSITIVE_SINGLE_FLOAT),\n                MOST_NEGATIVE_SINGLE_FLOAT\n            );\n            this._nativeBiquadFilterNode = nativeBiquadFilterNode;\n\n            // @todo Determine a meaningful tail-time instead of just using one second.\n            setAudioNodeTailTime(this, 1);\n        }\n\n        get detune(): IAudioParam {\n            return this._detune;\n        }\n\n        get frequency(): IAudioParam {\n            return this._frequency;\n        }\n\n        get gain(): IAudioParam {\n            return this._gain;\n        }\n\n        get Q(): IAudioParam {\n            return this._Q;\n        }\n\n        get type(): TBiquadFilterType {\n            return this._nativeBiquadFilterNode.type;\n        }\n\n        set type(value) {\n            this._nativeBiquadFilterNode.type = value;\n        }\n\n        public getFrequencyResponse(frequencyHz: Float32Array, magResponse: Float32Array, phaseResponse: Float32Array): void {\n            // Bug #189: Safari does throw an InvalidStateError.\n            try {\n                this._nativeBiquadFilterNode.getFrequencyResponse(frequencyHz, magResponse, phaseResponse);\n            } catch (err) {\n                if (err.code === 11) {\n                    throw createInvalidAccessError();\n                }\n\n                throw err;\n            }\n\n            // Bug #68: Safari does not throw an error if the parameters differ in their length.\n            if (frequencyHz.length !== magResponse.length || magResponse.length !== phaseResponse.length) {\n                throw createInvalidAccessError();\n            }\n        }\n    };\n};\n","import { IChannelMergerOptions } from '../interfaces';\nimport { TAudioNodeRenderer, TChannelMergerNodeConstructorFactory, TContext } from '../types';\n\nconst DEFAULT_OPTIONS = {\n    channelCount: 1,\n    channelCountMode: 'explicit',\n    channelInterpretation: 'speakers',\n    numberOfInputs: 6\n} as const;\n\nexport const createChannelMergerNodeConstructor: TChannelMergerNodeConstructorFactory = (\n    audioNodeConstructor,\n    createChannelMergerNodeRenderer,\n    createNativeChannelMergerNode,\n    getNativeContext,\n    isNativeOfflineAudioContext\n) => {\n    return class ChannelMergerNode<T extends TContext> extends audioNodeConstructor<T> {\n        constructor(context: T, options?: Partial<IChannelMergerOptions>) {\n            const nativeContext = getNativeContext(context);\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n            const nativeChannelMergerNode = createNativeChannelMergerNode(nativeContext, mergedOptions);\n            const channelMergerNodeRenderer = <TAudioNodeRenderer<T, this>>(\n                (isNativeOfflineAudioContext(nativeContext) ? createChannelMergerNodeRenderer() : null)\n            );\n\n            super(context, false, nativeChannelMergerNode, channelMergerNodeRenderer);\n        }\n    };\n};\n","import { IChannelSplitterOptions } from '../interfaces';\nimport { TAudioNodeRenderer, TChannelSplitterNodeConstructorFactory, TContext } from '../types';\n\nconst DEFAULT_OPTIONS = {\n    channelCount: 6,\n    channelCountMode: 'explicit',\n    channelInterpretation: 'discrete',\n    numberOfOutputs: 6\n} as const;\n\nexport const createChannelSplitterNodeConstructor: TChannelSplitterNodeConstructorFactory = (\n    audioNodeConstructor,\n    createChannelSplitterNodeRenderer,\n    createNativeChannelSplitterNode,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    sanitizeChannelSplitterOptions\n) => {\n    return class ChannelSplitterNode<T extends TContext> extends audioNodeConstructor<T> {\n        constructor(context: T, options?: Partial<IChannelSplitterOptions>) {\n            const nativeContext = getNativeContext(context);\n            const mergedOptions = sanitizeChannelSplitterOptions({ ...DEFAULT_OPTIONS, ...options });\n            const nativeChannelSplitterNode = createNativeChannelSplitterNode(nativeContext, mergedOptions);\n            const channelSplitterNodeRenderer = <TAudioNodeRenderer<T, this>>(\n                (isNativeOfflineAudioContext(nativeContext) ? createChannelSplitterNodeRenderer() : null)\n            );\n\n            super(context, false, nativeChannelSplitterNode, channelSplitterNodeRenderer);\n        }\n    };\n};\n","import { MOST_NEGATIVE_SINGLE_FLOAT, MOST_POSITIVE_SINGLE_FLOAT } from '../constants';\nimport { isActiveAudioNode } from '../helpers/is-active-audio-node';\nimport { setInternalStateToActive } from '../helpers/set-internal-state-to-active';\nimport { setInternalStateToPassive } from '../helpers/set-internal-state-to-passive';\nimport { IAudioParam, IAudioScheduledSourceNodeEventMap, IConstantSourceNode, IConstantSourceOptions } from '../interfaces';\nimport {\n    TConstantSourceNodeConstructorFactory,\n    TConstantSourceNodeRenderer,\n    TContext,\n    TEventHandler,\n    TNativeConstantSourceNode\n} from '../types';\n\nconst DEFAULT_OPTIONS = {\n    channelCount: 2,\n    channelCountMode: 'max',\n    channelInterpretation: 'speakers',\n    offset: 1\n} as const;\n\nexport const createConstantSourceNodeConstructor: TConstantSourceNodeConstructorFactory = (\n    audioNodeConstructor,\n    createAudioParam,\n    createConstantSourceNodeRendererFactory,\n    createNativeConstantSourceNode,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    wrapEventListener\n) => {\n    return class ConstantSourceNode<T extends TContext>\n        extends audioNodeConstructor<T, IAudioScheduledSourceNodeEventMap>\n        implements IConstantSourceNode<T>\n    {\n        private _constantSourceNodeRenderer: TConstantSourceNodeRenderer<T>;\n\n        private _nativeConstantSourceNode: TNativeConstantSourceNode;\n\n        private _offset: IAudioParam;\n\n        private _onended: null | TEventHandler<this>;\n\n        constructor(context: T, options?: Partial<IConstantSourceOptions>) {\n            const nativeContext = getNativeContext(context);\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n            const nativeConstantSourceNode = createNativeConstantSourceNode(nativeContext, mergedOptions);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n            const constantSourceNodeRenderer = <TConstantSourceNodeRenderer<T>>(\n                (isOffline ? createConstantSourceNodeRendererFactory() : null)\n            );\n\n            super(context, false, nativeConstantSourceNode, constantSourceNodeRenderer);\n\n            this._constantSourceNodeRenderer = constantSourceNodeRenderer;\n            this._nativeConstantSourceNode = nativeConstantSourceNode;\n            /*\n             * Bug #62 & #74: Safari does not support ConstantSourceNodes and does not export the correct values for maxValue and minValue\n             * for GainNodes.\n             */\n            this._offset = createAudioParam(\n                this,\n                isOffline,\n                nativeConstantSourceNode.offset,\n                MOST_POSITIVE_SINGLE_FLOAT,\n                MOST_NEGATIVE_SINGLE_FLOAT\n            );\n            this._onended = null;\n        }\n\n        get offset(): IAudioParam {\n            return this._offset;\n        }\n\n        get onended(): null | TEventHandler<this> {\n            return this._onended;\n        }\n\n        set onended(value) {\n            const wrappedListener = typeof value === 'function' ? wrapEventListener(this, value) : null;\n\n            this._nativeConstantSourceNode.onended = wrappedListener;\n\n            const nativeOnEnded = this._nativeConstantSourceNode.onended;\n\n            this._onended = nativeOnEnded !== null && nativeOnEnded === wrappedListener ? value : nativeOnEnded;\n        }\n\n        public start(when = 0): void {\n            this._nativeConstantSourceNode.start(when);\n\n            if (this._constantSourceNodeRenderer !== null) {\n                this._constantSourceNodeRenderer.start = when;\n            }\n\n            if (this.context.state !== 'closed') {\n                setInternalStateToActive(this);\n\n                const resetInternalStateToPassive = () => {\n                    this._nativeConstantSourceNode.removeEventListener('ended', resetInternalStateToPassive);\n\n                    if (isActiveAudioNode(this)) {\n                        setInternalStateToPassive(this);\n                    }\n                };\n\n                this._nativeConstantSourceNode.addEventListener('ended', resetInternalStateToPassive);\n            }\n        }\n\n        public stop(when = 0): void {\n            this._nativeConstantSourceNode.stop(when);\n\n            if (this._constantSourceNodeRenderer !== null) {\n                this._constantSourceNodeRenderer.stop = when;\n            }\n        }\n    };\n};\n","import { IConvolverNode, IConvolverOptions } from '../interfaces';\nimport { TAnyAudioBuffer, TAudioNodeRenderer, TContext, TConvolverNodeConstructorFactory, TNativeConvolverNode } from '../types';\n\nconst DEFAULT_OPTIONS = {\n    buffer: null,\n    channelCount: 2,\n    channelCountMode: 'clamped-max',\n    channelInterpretation: 'speakers',\n    disableNormalization: false\n} as const;\n\nexport const createConvolverNodeConstructor: TConvolverNodeConstructorFactory = (\n    audioNodeConstructor,\n    createConvolverNodeRenderer,\n    createNativeConvolverNode,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    setAudioNodeTailTime\n) => {\n    return class ConvolverNode<T extends TContext> extends audioNodeConstructor<T> implements IConvolverNode<T> {\n        private _isBufferNullified: boolean;\n\n        private _nativeConvolverNode: TNativeConvolverNode;\n\n        constructor(context: T, options?: Partial<IConvolverOptions>) {\n            const nativeContext = getNativeContext(context);\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n            const nativeConvolverNode = createNativeConvolverNode(nativeContext, mergedOptions);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n            const convolverNodeRenderer = <TAudioNodeRenderer<T, this>>(isOffline ? createConvolverNodeRenderer() : null);\n\n            super(context, false, nativeConvolverNode, convolverNodeRenderer);\n\n            this._isBufferNullified = false;\n            this._nativeConvolverNode = nativeConvolverNode;\n\n            if (mergedOptions.buffer !== null) {\n                setAudioNodeTailTime(this, mergedOptions.buffer.duration);\n            }\n        }\n\n        get buffer(): null | TAnyAudioBuffer {\n            if (this._isBufferNullified) {\n                return null;\n            }\n\n            return this._nativeConvolverNode.buffer;\n        }\n\n        set buffer(value) {\n            this._nativeConvolverNode.buffer = value;\n\n            // Bug #115: Safari does not allow to set the buffer to null.\n            if (value === null && this._nativeConvolverNode.buffer !== null) {\n                const nativeContext = this._nativeConvolverNode.context;\n\n                this._nativeConvolverNode.buffer = nativeContext.createBuffer(1, 1, nativeContext.sampleRate);\n                this._isBufferNullified = true;\n\n                setAudioNodeTailTime(this, 0);\n            } else {\n                this._isBufferNullified = false;\n\n                setAudioNodeTailTime(this, this._nativeConvolverNode.buffer === null ? 0 : this._nativeConvolverNode.buffer.duration);\n            }\n        }\n\n        get normalize(): boolean {\n            return this._nativeConvolverNode.normalize;\n        }\n\n        set normalize(value) {\n            this._nativeConvolverNode.normalize = value;\n        }\n    };\n};\n","export const detachArrayBuffer = (arrayBuffer: ArrayBuffer): Promise<void> => {\n    const { port1, port2 } = new MessageChannel();\n\n    return new Promise((resolve) => {\n        const closeAndResolve = () => {\n            port2.onmessage = null;\n\n            port1.close();\n            port2.close();\n\n            resolve();\n        };\n\n        port2.onmessage = () => closeAndResolve();\n\n        try {\n            port1.postMessage(arrayBuffer, [arrayBuffer]);\n        } catch {\n            // Ignore errors.\n        } finally {\n            closeAndResolve();\n        }\n    });\n};\n","import { IAudioParam, IDelayNode, IDelayOptions } from '../interfaces';\nimport { TAudioNodeRenderer, TContext, TDelayNodeConstructorFactory } from '../types';\n\nconst DEFAULT_OPTIONS = {\n    channelCount: 2,\n    channelCountMode: 'max',\n    channelInterpretation: 'speakers',\n    delayTime: 0,\n    maxDelayTime: 1\n} as const;\n\nexport const createDelayNodeConstructor: TDelayNodeConstructorFactory = (\n    audioNodeConstructor,\n    createAudioParam,\n    createDelayNodeRenderer,\n    createNativeDelayNode,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    setAudioNodeTailTime\n) => {\n    return class DelayNode<T extends TContext> extends audioNodeConstructor<T> implements IDelayNode<T> {\n        private _delayTime: IAudioParam;\n\n        constructor(context: T, options?: Partial<IDelayOptions>) {\n            const nativeContext = getNativeContext(context);\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n            const nativeDelayNode = createNativeDelayNode(nativeContext, mergedOptions);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n            const delayNodeRenderer = <TAudioNodeRenderer<T, this>>(isOffline ? createDelayNodeRenderer(mergedOptions.maxDelayTime) : null);\n\n            super(context, false, nativeDelayNode, delayNodeRenderer);\n\n            this._delayTime = createAudioParam(this, isOffline, nativeDelayNode.delayTime);\n\n            setAudioNodeTailTime(this, mergedOptions.maxDelayTime);\n        }\n\n        get delayTime(): IAudioParam {\n            return this._delayTime;\n        }\n    };\n};\n","import { isNativeAudioNode } from '../guards/native-audio-node';\nimport { TDisconnectMultipleOutputsFactory, TIndexSizeErrorFactory, TNativeAudioNode } from '../types';\n\nconst getOutputAudioNodeAtIndex = (\n    createIndexSizeError: TIndexSizeErrorFactory,\n    outputAudioNodes: TNativeAudioNode[],\n    output: number\n): TNativeAudioNode => {\n    const outputAudioNode = outputAudioNodes[output];\n\n    if (outputAudioNode === undefined) {\n        throw createIndexSizeError();\n    }\n\n    return outputAudioNode;\n};\n\nexport const createDisconnectMultipleOutputs: TDisconnectMultipleOutputsFactory = (createIndexSizeError) => {\n    return (outputAudioNodes, destinationOrOutput = undefined, output = undefined, input = 0) => {\n        if (destinationOrOutput === undefined) {\n            return outputAudioNodes.forEach((outputAudioNode) => outputAudioNode.disconnect());\n        }\n\n        if (typeof destinationOrOutput === 'number') {\n            return getOutputAudioNodeAtIndex(createIndexSizeError, outputAudioNodes, destinationOrOutput).disconnect();\n        }\n\n        if (isNativeAudioNode(destinationOrOutput)) {\n            if (output === undefined) {\n                return outputAudioNodes.forEach((outputAudioNode) => outputAudioNode.disconnect(destinationOrOutput));\n            }\n\n            if (input === undefined) {\n                return getOutputAudioNodeAtIndex(createIndexSizeError, outputAudioNodes, output).disconnect(destinationOrOutput, 0);\n            }\n\n            return getOutputAudioNodeAtIndex(createIndexSizeError, outputAudioNodes, output).disconnect(destinationOrOutput, 0, input);\n        }\n\n        if (output === undefined) {\n            return outputAudioNodes.forEach((outputAudioNode) => outputAudioNode.disconnect(destinationOrOutput));\n        }\n\n        return getOutputAudioNodeAtIndex(createIndexSizeError, outputAudioNodes, output).disconnect(destinationOrOutput, 0);\n    };\n};\n","import { IAudioParam, IDynamicsCompressorNode, IDynamicsCompressorOptions } from '../interfaces';\nimport {\n    TAudioNodeRenderer,\n    TChannelCountMode,\n    TContext,\n    TDynamicsCompressorNodeConstructorFactory,\n    TNativeAudioParam,\n    TNativeDynamicsCompressorNode\n} from '../types';\n\nconst DEFAULT_OPTIONS = {\n    attack: 0.003,\n    channelCount: 2,\n    channelCountMode: 'clamped-max',\n    channelInterpretation: 'speakers',\n    knee: 30,\n    ratio: 12,\n    release: 0.25,\n    threshold: -24\n} as const;\n\nexport const createDynamicsCompressorNodeConstructor: TDynamicsCompressorNodeConstructorFactory = (\n    audioNodeConstructor,\n    createAudioParam,\n    createDynamicsCompressorNodeRenderer,\n    createNativeDynamicsCompressorNode,\n    createNotSupportedError,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    setAudioNodeTailTime\n) => {\n    return class DynamicsCompressorNode<T extends TContext> extends audioNodeConstructor<T> implements IDynamicsCompressorNode<T> {\n        private _attack: IAudioParam;\n\n        private _knee: IAudioParam;\n\n        private _nativeDynamicsCompressorNode: TNativeDynamicsCompressorNode;\n\n        private _ratio: IAudioParam;\n\n        private _release: IAudioParam;\n\n        private _threshold: IAudioParam;\n\n        constructor(context: T, options?: Partial<IDynamicsCompressorOptions>) {\n            const nativeContext = getNativeContext(context);\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n            const nativeDynamicsCompressorNode = createNativeDynamicsCompressorNode(nativeContext, mergedOptions);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n            const dynamicsCompressorNodeRenderer = <TAudioNodeRenderer<T, this>>(isOffline ? createDynamicsCompressorNodeRenderer() : null);\n\n            super(context, false, nativeDynamicsCompressorNode, dynamicsCompressorNodeRenderer);\n\n            this._attack = createAudioParam(this, isOffline, nativeDynamicsCompressorNode.attack);\n            this._knee = createAudioParam(this, isOffline, nativeDynamicsCompressorNode.knee);\n            this._nativeDynamicsCompressorNode = nativeDynamicsCompressorNode;\n            this._ratio = createAudioParam(this, isOffline, nativeDynamicsCompressorNode.ratio);\n            this._release = createAudioParam(this, isOffline, nativeDynamicsCompressorNode.release);\n            this._threshold = createAudioParam(this, isOffline, nativeDynamicsCompressorNode.threshold);\n\n            setAudioNodeTailTime(this, 0.006);\n        }\n\n        get attack(): IAudioParam {\n            return this._attack;\n        }\n\n        // Bug #108: Safari allows a channelCount of three and above which is why the getter and setter needs to be overwritten here.\n        get channelCount(): number {\n            return this._nativeDynamicsCompressorNode.channelCount;\n        }\n\n        set channelCount(value) {\n            const previousChannelCount = this._nativeDynamicsCompressorNode.channelCount;\n\n            this._nativeDynamicsCompressorNode.channelCount = value;\n\n            if (value > 2) {\n                this._nativeDynamicsCompressorNode.channelCount = previousChannelCount;\n\n                throw createNotSupportedError();\n            }\n        }\n\n        /*\n         * Bug #109: Only Chrome and Firefox disallow a channelCountMode of 'max' yet which is why the getter and setter needs to be\n         * overwritten here.\n         */\n        get channelCountMode(): TChannelCountMode {\n            return this._nativeDynamicsCompressorNode.channelCountMode;\n        }\n\n        set channelCountMode(value) {\n            const previousChannelCount = this._nativeDynamicsCompressorNode.channelCountMode;\n\n            this._nativeDynamicsCompressorNode.channelCountMode = value;\n\n            if (value === 'max') {\n                this._nativeDynamicsCompressorNode.channelCountMode = previousChannelCount;\n\n                throw createNotSupportedError();\n            }\n        }\n\n        get knee(): IAudioParam {\n            return this._knee;\n        }\n\n        get ratio(): IAudioParam {\n            return this._ratio;\n        }\n\n        get reduction(): number {\n            // Bug #111: Safari returns an AudioParam instead of a number.\n            if (typeof (<TNativeAudioParam>(<any>this._nativeDynamicsCompressorNode.reduction)).value === 'number') {\n                return (<TNativeAudioParam>(<any>this._nativeDynamicsCompressorNode.reduction)).value;\n            }\n\n            return this._nativeDynamicsCompressorNode.reduction;\n        }\n\n        get release(): IAudioParam {\n            return this._release;\n        }\n\n        get threshold(): IAudioParam {\n            return this._threshold;\n        }\n    };\n};\n","import { MOST_NEGATIVE_SINGLE_FLOAT, MOST_POSITIVE_SINGLE_FLOAT } from '../constants';\nimport { IAudioParam, IGainNode, IGainOptions } from '../interfaces';\nimport { TAudioNodeRenderer, TContext, TGainNodeConstructorFactory } from '../types';\n\nconst DEFAULT_OPTIONS = {\n    channelCount: 2,\n    channelCountMode: 'max',\n    channelInterpretation: 'speakers',\n    gain: 1\n} as const;\n\nexport const createGainNodeConstructor: TGainNodeConstructorFactory = (\n    audioNodeConstructor,\n    createAudioParam,\n    createGainNodeRenderer,\n    createNativeGainNode,\n    getNativeContext,\n    isNativeOfflineAudioContext\n) => {\n    return class GainNode<T extends TContext> extends audioNodeConstructor<T> implements IGainNode<T> {\n        private _gain: IAudioParam;\n\n        constructor(context: T, options?: Partial<IGainOptions>) {\n            const nativeContext = getNativeContext(context);\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n            const nativeGainNode = createNativeGainNode(nativeContext, mergedOptions);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n            const gainNodeRenderer = <TAudioNodeRenderer<T, this>>(isOffline ? createGainNodeRenderer() : null);\n\n            super(context, false, nativeGainNode, gainNodeRenderer);\n\n            // Bug #74: Safari does not export the correct values for maxValue and minValue.\n            this._gain = createAudioParam(this, isOffline, nativeGainNode.gain, MOST_POSITIVE_SINGLE_FLOAT, MOST_NEGATIVE_SINGLE_FLOAT);\n        }\n\n        get gain(): IAudioParam {\n            return this._gain;\n        }\n    };\n};\n","import { TInvalidStateErrorFactory } from '../types';\n\nexport const createInvalidStateError: TInvalidStateErrorFactory = () => new DOMException('', 'InvalidStateError');\n","import { TInvalidAccessErrorFactory } from '../types';\n\nexport const createInvalidAccessError: TInvalidAccessErrorFactory = () => new DOMException('', 'InvalidAccessError');\n","import { wrapIIRFilterNodeGetFrequencyResponseMethod } from '../helpers/wrap-iir-filter-node-get-frequency-response-method';\nimport { IIIRFilterNode, IIIRFilterOptions, IMinimalAudioContext } from '../interfaces';\nimport { TAudioNodeRenderer, TContext, TIIRFilterNodeConstructorFactory, TNativeIIRFilterNode } from '../types';\n\nconst DEFAULT_OPTIONS = {\n    channelCount: 2,\n    channelCountMode: 'max',\n    channelInterpretation: 'speakers'\n} as const;\n\nexport const createIIRFilterNodeConstructor: TIIRFilterNodeConstructorFactory = (\n    audioNodeConstructor,\n    createNativeIIRFilterNode,\n    createIIRFilterNodeRenderer,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    setAudioNodeTailTime\n) => {\n    return class IIRFilterNode<T extends TContext> extends audioNodeConstructor<T> implements IIIRFilterNode<T> {\n        private _nativeIIRFilterNode: TNativeIIRFilterNode;\n\n        constructor(\n            context: T,\n            options: { feedback: IIIRFilterOptions['feedback']; feedforward: IIIRFilterOptions['feedforward'] } & Partial<IIIRFilterOptions>\n        ) {\n            const nativeContext = getNativeContext(context);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n            const nativeIIRFilterNode = createNativeIIRFilterNode(\n                nativeContext,\n                isOffline ? null : (<IMinimalAudioContext>(<any>context)).baseLatency,\n                mergedOptions\n            );\n            const iirFilterNodeRenderer = <TAudioNodeRenderer<T, this>>(\n                (isOffline ? createIIRFilterNodeRenderer(mergedOptions.feedback, mergedOptions.feedforward) : null)\n            );\n\n            super(context, false, nativeIIRFilterNode, iirFilterNodeRenderer);\n\n            // Bug #23 & #24: FirefoxDeveloper does not throw an InvalidAccessError.\n            // @todo Write a test which allows other browsers to remain unpatched.\n            wrapIIRFilterNodeGetFrequencyResponseMethod(nativeIIRFilterNode);\n\n            this._nativeIIRFilterNode = nativeIIRFilterNode;\n\n            // @todo Determine a meaningful tail-time instead of just using one second.\n            setAudioNodeTailTime(this, 1);\n        }\n\n        public getFrequencyResponse(frequencyHz: Float32Array, magResponse: Float32Array, phaseResponse: Float32Array): void {\n            return this._nativeIIRFilterNode.getFrequencyResponse(frequencyHz, magResponse, phaseResponse);\n        }\n    };\n};\n","// This implementation as shamelessly inspired by source code of\n// tslint:disable-next-line:max-line-length\n// {@link https://chromium.googlesource.com/chromium/src.git/+/master/third_party/WebKit/Source/platform/audio/IIRFilter.cpp|Chromium's IIRFilter}.\nexport const filterBuffer = (\n    feedback: Float64Array,\n    feedbackLength: number,\n    feedforward: Float64Array,\n    feedforwardLength: number,\n    minLength: number,\n    xBuffer: Float32Array,\n    yBuffer: Float32Array,\n    bufferIndex: number,\n    bufferLength: number,\n    input: Float32Array,\n    output: Float32Array\n) => {\n    const inputLength = input.length;\n\n    let i = bufferIndex;\n\n    for (let j = 0; j < inputLength; j += 1) {\n        let y = feedforward[0] * input[j];\n\n        for (let k = 1; k < minLength; k += 1) {\n            const x = (i - k) & (bufferLength - 1); // tslint:disable-line:no-bitwise\n\n            y += feedforward[k] * xBuffer[x];\n            y -= feedback[k] * yBuffer[x];\n        }\n\n        for (let k = minLength; k < feedforwardLength; k += 1) {\n            y += feedforward[k] * xBuffer[(i - k) & (bufferLength - 1)]; // tslint:disable-line:no-bitwise\n        }\n\n        for (let k = minLength; k < feedbackLength; k += 1) {\n            y -= feedback[k] * yBuffer[(i - k) & (bufferLength - 1)]; // tslint:disable-line:no-bitwise\n        }\n\n        xBuffer[i] = input[j];\n        yBuffer[i] = y;\n\n        i = (i + 1) & (bufferLength - 1); // tslint:disable-line:no-bitwise\n\n        output[j] = y;\n    }\n\n    return i;\n};\n","import { IAudioContext, IAudioNodeOptions, IMediaStreamAudioDestinationNode, IMinimalAudioContext } from '../interfaces';\nimport { TAudioNodeRenderer, TMediaStreamAudioDestinationNodeConstructorFactory, TNativeMediaStreamAudioDestinationNode } from '../types';\n\nconst DEFAULT_OPTIONS = {\n    channelCount: 2,\n    channelCountMode: 'explicit',\n    channelInterpretation: 'speakers'\n} as const;\n\nexport const createMediaStreamAudioDestinationNodeConstructor: TMediaStreamAudioDestinationNodeConstructorFactory = (\n    audioNodeConstructor,\n    createNativeMediaStreamAudioDestinationNode,\n    getNativeContext,\n    isNativeOfflineAudioContext\n) => {\n    return class MediaStreamAudioDestinationNode<T extends IAudioContext | IMinimalAudioContext> extends audioNodeConstructor<T>\n        implements IMediaStreamAudioDestinationNode<T> {\n        private _nativeMediaStreamAudioDestinationNode: TNativeMediaStreamAudioDestinationNode;\n\n        constructor(context: T, options?: Partial<IAudioNodeOptions>) {\n            const nativeContext = getNativeContext(context);\n\n            // Bug #173: Safari allows to create a MediaStreamAudioDestinationNode with an OfflineAudioContext.\n            if (isNativeOfflineAudioContext(nativeContext)) {\n                throw new TypeError();\n            }\n\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n            const nativeMediaStreamAudioDestinationNode = createNativeMediaStreamAudioDestinationNode(nativeContext, mergedOptions);\n\n            super(context, false, nativeMediaStreamAudioDestinationNode, <TAudioNodeRenderer<T>>null);\n\n            this._nativeMediaStreamAudioDestinationNode = nativeMediaStreamAudioDestinationNode;\n        }\n\n        get stream(): MediaStream {\n            return this._nativeMediaStreamAudioDestinationNode.stream;\n        }\n    };\n};\n","import { TNativeContext } from '../types';\n\nexport const testPromiseSupport = (nativeContext: TNativeContext): boolean => {\n    // This 12 numbers represent the 48 bytes of an empty WAVE file with a single sample.\n    const uint32Array = new Uint32Array([1179011410, 40, 1163280727, 544501094, 16, 131073, 44100, 176400, 1048580, 1635017060, 4, 0]);\n\n    try {\n        // Bug #1: Safari requires a successCallback.\n        const promise = nativeContext.decodeAudioData(<ArrayBuffer>uint32Array.buffer, () => {\n            // Ignore the success callback.\n        });\n\n        if (promise === undefined) {\n            return false;\n        }\n\n        promise.catch(() => {\n            // Ignore rejected errors.\n        });\n\n        return true;\n    } catch {\n        // Ignore errors.\n    }\n\n    return false;\n};\n","import { deactivateAudioGraph } from '../helpers/deactivate-audio-graph';\nimport { testPromiseSupport } from '../helpers/test-promise-support';\nimport { IAudioBuffer, IMinimalOfflineAudioContext, IOfflineAudioContextOptions } from '../interfaces';\nimport { TAudioContextState, TMinimalOfflineAudioContextConstructorFactory, TNativeOfflineAudioContext } from '../types';\n\nconst DEFAULT_OPTIONS = {\n    numberOfChannels: 1\n} as const;\n\nexport const createMinimalOfflineAudioContextConstructor: TMinimalOfflineAudioContextConstructorFactory = (\n    cacheTestResult,\n    createInvalidStateError,\n    createNativeOfflineAudioContext,\n    minimalBaseAudioContextConstructor,\n    startRendering\n) => {\n    return class MinimalOfflineAudioContext extends minimalBaseAudioContextConstructor<IMinimalOfflineAudioContext>\n        implements IMinimalOfflineAudioContext {\n        private _length: number;\n\n        private _nativeOfflineAudioContext: TNativeOfflineAudioContext;\n\n        private _state: null | TAudioContextState;\n\n        constructor(options: IOfflineAudioContextOptions) {\n            const { length, numberOfChannels, sampleRate } = { ...DEFAULT_OPTIONS, ...options };\n\n            const nativeOfflineAudioContext = createNativeOfflineAudioContext(numberOfChannels, length, sampleRate);\n\n            // #21 Safari does not support promises and therefore would fire the statechange event before the promise can be resolved.\n            if (!cacheTestResult(testPromiseSupport, () => testPromiseSupport(nativeOfflineAudioContext))) {\n                nativeOfflineAudioContext.addEventListener(\n                    'statechange',\n                    (() => {\n                        let i = 0;\n\n                        const delayStateChangeEvent = (event: Event) => {\n                            if (this._state === 'running') {\n                                if (i > 0) {\n                                    nativeOfflineAudioContext.removeEventListener('statechange', delayStateChangeEvent);\n                                    event.stopImmediatePropagation();\n\n                                    this._waitForThePromiseToSettle(event);\n                                } else {\n                                    i += 1;\n                                }\n                            }\n                        };\n\n                        return delayStateChangeEvent;\n                    })()\n                );\n            }\n\n            super(nativeOfflineAudioContext, numberOfChannels);\n\n            this._length = length;\n            this._nativeOfflineAudioContext = nativeOfflineAudioContext;\n            this._state = null;\n        }\n\n        get length(): number {\n            // Bug #17: Safari does not yet expose the length.\n            if (this._nativeOfflineAudioContext.length === undefined) {\n                return this._length;\n            }\n\n            return this._nativeOfflineAudioContext.length;\n        }\n\n        get state(): TAudioContextState {\n            return this._state === null ? this._nativeOfflineAudioContext.state : this._state;\n        }\n\n        public startRendering(): Promise<IAudioBuffer> {\n            /*\n             * Bug #9 & #59: It is theoretically possible that startRendering() will first render a partialOfflineAudioContext. Therefore\n             * the state of the nativeOfflineAudioContext might no transition to running immediately.\n             */\n            if (this._state === 'running') {\n                return Promise.reject(createInvalidStateError());\n            }\n\n            this._state = 'running';\n\n            return startRendering(this.destination, this._nativeOfflineAudioContext).finally(() => {\n                this._state = null;\n\n                deactivateAudioGraph(this);\n            });\n        }\n\n        private _waitForThePromiseToSettle(event: Event): void {\n            if (this._state === null) {\n                this._nativeOfflineAudioContext.dispatchEvent(event);\n            } else {\n                setTimeout(() => this._waitForThePromiseToSettle(event));\n            }\n        }\n    };\n};\n","export const assignNativeAudioNodeOption = <T extends keyof any, U extends any>(\n    nativeAudioNode: Record<T, U>,\n    options: Record<T, U>,\n    option: T\n) => {\n    const value = options[option];\n\n    if (value !== undefined && value !== nativeAudioNode[option]) {\n        nativeAudioNode[option] = value;\n    }\n};\n","import { IAudioNodeOptions } from '../interfaces';\nimport { TNativeAudioNode } from '../types';\nimport { assignNativeAudioNodeOption } from './assign-native-audio-node-option';\n\nexport const assignNativeAudioNodeOptions = (nativeAudioNode: TNativeAudioNode, options: IAudioNodeOptions): void => {\n    assignNativeAudioNodeOption(nativeAudioNode, options, 'channelCount');\n    assignNativeAudioNodeOption(nativeAudioNode, options, 'channelCountMode');\n    assignNativeAudioNodeOption(nativeAudioNode, options, 'channelInterpretation');\n};\n","import { TNativeAnalyserNode } from '../types';\n\nexport const testAnalyserNodeGetFloatTimeDomainDataMethodSupport = (nativeAnalyserNode: TNativeAnalyserNode): boolean => {\n    return typeof nativeAnalyserNode.getFloatTimeDomainData === 'function';\n};\n","export const assignNativeAudioNodeAudioParamValue = <T extends { [key: string]: any }, U extends { [key: string]: any }>(\n    nativeAudioNode: T,\n    options: U,\n    audioParam: keyof T & keyof U\n) => {\n    const value = options[audioParam];\n\n    if (value !== undefined && value !== nativeAudioNode[audioParam].value) {\n        nativeAudioNode[audioParam].value = value;\n    }\n};\n","import { TNativeAudioBufferSourceNode, TNativeConstantSourceNode, TNativeOscillatorNode } from '../types';\n\nexport const wrapAudioScheduledSourceNodeStartMethodNegativeParameters = (\n    nativeAudioScheduledSourceNode: TNativeAudioBufferSourceNode | TNativeConstantSourceNode | TNativeOscillatorNode\n): void => {\n    nativeAudioScheduledSourceNode.start = ((start) => {\n        return (when = 0, offset = 0, duration?: number) => {\n            if ((typeof duration === 'number' && duration < 0) || offset < 0 || when < 0) {\n                throw new RangeError(\"The parameters can't be negative.\");\n            }\n\n            // @todo TypeScript cannot infer the overloaded signature with 3 arguments yet.\n            (<(when: number, offset: number, duration?: number) => void>start).call(nativeAudioScheduledSourceNode, when, offset, duration);\n        };\n    })(nativeAudioScheduledSourceNode.start);\n};\n","import { TNativeAudioBufferSourceNode, TNativeConstantSourceNode, TNativeOscillatorNode } from '../types';\n\nexport const wrapAudioScheduledSourceNodeStopMethodNegativeParameters = (\n    nativeAudioScheduledSourceNode: TNativeAudioBufferSourceNode | TNativeConstantSourceNode | TNativeOscillatorNode\n): void => {\n    nativeAudioScheduledSourceNode.stop = ((stop) => {\n        return (when = 0) => {\n            if (when < 0) {\n                throw new RangeError(\"The parameter can't be negative.\");\n            }\n\n            stop.call(nativeAudioScheduledSourceNode, when);\n        };\n    })(nativeAudioScheduledSourceNode.stop);\n};\n","export const computeBufferSize = (baseLatency: null | number, sampleRate: number) => {\n    if (baseLatency === null) {\n        return 512;\n    }\n\n    return Math.max(512, Math.min(16384, Math.pow(2, Math.round(Math.log2(baseLatency * sampleRate)))));\n};\n","import { IAudioWorkletNodeOptions, IAudioWorkletProcessor, IAudioWorkletProcessorConstructor } from '../interfaces';\nimport { cloneAudioWorkletNodeOptions } from './clone-audio-worklet-node-options';\n\nexport const createAudioWorkletProcessorPromise = async (\n    processorConstructor: IAudioWorkletProcessorConstructor,\n    audioWorkletNodeOptions: IAudioWorkletNodeOptions\n): Promise<IAudioWorkletProcessor> => {\n    const clonedAudioWorkletNodeOptions = await cloneAudioWorkletNodeOptions(audioWorkletNodeOptions);\n\n    return new processorConstructor(clonedAudioWorkletNodeOptions);\n};\n","import { IAudioWorkletNodeOptions } from '../interfaces';\n\nexport const cloneAudioWorkletNodeOptions = (audioWorkletNodeOptions: IAudioWorkletNodeOptions): Promise<IAudioWorkletNodeOptions> => {\n    return new Promise((resolve, reject) => {\n        const { port1, port2 } = new MessageChannel();\n\n        port1.onmessage = ({ data }) => {\n            port1.close();\n            port2.close();\n\n            resolve(data);\n        };\n        port1.onmessageerror = ({ data }) => {\n            port1.close();\n            port2.close();\n\n            reject(data);\n        };\n\n        // This will throw an error if the audioWorkletNodeOptions are not clonable.\n        port2.postMessage(audioWorkletNodeOptions);\n    });\n};\n","import { assignNativeAudioNodeAudioParamValue } from '../helpers/assign-native-audio-node-audio-param-value';\nimport { assignNativeAudioNodeOption } from '../helpers/assign-native-audio-node-option';\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { TNativeBiquadFilterNodeFactory } from '../types';\n\nexport const createNativeBiquadFilterNode: TNativeBiquadFilterNodeFactory = (nativeContext, options) => {\n    const nativeBiquadFilterNode = nativeContext.createBiquadFilter();\n\n    assignNativeAudioNodeOptions(nativeBiquadFilterNode, options);\n\n    assignNativeAudioNodeAudioParamValue(nativeBiquadFilterNode, options, 'Q');\n    assignNativeAudioNodeAudioParamValue(nativeBiquadFilterNode, options, 'detune');\n    assignNativeAudioNodeAudioParamValue(nativeBiquadFilterNode, options, 'frequency');\n    assignNativeAudioNodeAudioParamValue(nativeBiquadFilterNode, options, 'gain');\n\n    assignNativeAudioNodeOption(nativeBiquadFilterNode, options, 'type');\n\n    return nativeBiquadFilterNode;\n};\n","import { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { wrapChannelSplitterNode } from '../helpers/wrap-channel-splitter-node';\nimport { TNativeChannelSplitterNodeFactory } from '../types';\n\nexport const createNativeChannelSplitterNode: TNativeChannelSplitterNodeFactory = (nativeContext, options) => {\n    const nativeChannelSplitterNode = nativeContext.createChannelSplitter(options.numberOfOutputs);\n\n    // Bug #96: Safari does not have the correct channelCount.\n    // Bug #29: Safari does not have the correct channelCountMode.\n    // Bug #31: Safari does not have the correct channelInterpretation.\n    assignNativeAudioNodeOptions(nativeChannelSplitterNode, options);\n\n    // Bug #29, #30, #31, #32, #96 & #97: Only Chrome, Edge & Firefox partially support the spec yet.\n    wrapChannelSplitterNode(nativeChannelSplitterNode);\n\n    return nativeChannelSplitterNode;\n};\n","import { createInvalidStateError } from '../factories/invalid-state-error';\nimport { TNativeChannelSplitterNode } from '../types';\n\nexport const wrapChannelSplitterNode = (channelSplitterNode: TNativeChannelSplitterNode): void => {\n    const channelCount = channelSplitterNode.numberOfOutputs;\n\n    // Bug #97: Safari does not throw an error when attempting to change the channelCount to something other than its initial value.\n    Object.defineProperty(channelSplitterNode, 'channelCount', {\n        get: () => channelCount,\n        set: (value) => {\n            if (value !== channelCount) {\n                throw createInvalidStateError();\n            }\n        }\n    });\n\n    // Bug #30: Safari does not throw an error when attempting to change the channelCountMode to something other than explicit.\n    Object.defineProperty(channelSplitterNode, 'channelCountMode', {\n        get: () => 'explicit',\n        set: (value) => {\n            if (value !== 'explicit') {\n                throw createInvalidStateError();\n            }\n        }\n    });\n\n    // Bug #32: Safari does not throw an error when attempting to change the channelInterpretation to something other than discrete.\n    Object.defineProperty(channelSplitterNode, 'channelInterpretation', {\n        get: () => 'discrete',\n        set: (value) => {\n            if (value !== 'discrete') {\n                throw createInvalidStateError();\n            }\n        }\n    });\n};\n","import { TNativeAudioNode } from '../types';\n\nexport const interceptConnections = <T extends object>(\n    original: T,\n    interceptor: TNativeAudioNode\n): T & { connect: TNativeAudioNode['connect']; disconnect: TNativeAudioNode['disconnect'] } => {\n    (<T & { connect: TNativeAudioNode['connect'] }>original).connect = interceptor.connect.bind(interceptor);\n\n    (<T & { disconnect: TNativeAudioNode['disconnect'] }>original).disconnect = interceptor.disconnect.bind(interceptor);\n\n    return <T & { connect: TNativeAudioNode['connect']; disconnect: TNativeAudioNode['disconnect'] }>original;\n};\n","import { assignNativeAudioNodeAudioParamValue } from '../helpers/assign-native-audio-node-audio-param-value';\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { TNativeDelayNodeFactory } from '../types';\n\nexport const createNativeDelayNode: TNativeDelayNodeFactory = (nativeContext, options) => {\n    const nativeDelayNode = nativeContext.createDelay(options.maxDelayTime);\n\n    assignNativeAudioNodeOptions(nativeDelayNode, options);\n\n    assignNativeAudioNodeAudioParamValue(nativeDelayNode, options, 'delayTime');\n\n    return nativeDelayNode;\n};\n","import { assignNativeAudioNodeAudioParamValue } from '../helpers/assign-native-audio-node-audio-param-value';\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { TNativeGainNodeFactory } from '../types';\n\nexport const createNativeGainNode: TNativeGainNodeFactory = (nativeContext, options) => {\n    const nativeGainNode = nativeContext.createGain();\n\n    assignNativeAudioNodeOptions(nativeGainNode, options);\n\n    assignNativeAudioNodeAudioParamValue(nativeGainNode, options, 'gain');\n\n    return nativeGainNode;\n};\n","import { computeBufferSize } from '../helpers/compute-buffer-size';\nimport { filterBuffer } from '../helpers/filter-buffer';\nimport { interceptConnections } from '../helpers/intercept-connections';\nimport { TNativeAudioNode, TNativeIIRFilterNode, TNativeIIRFilterNodeFakerFactoryFactory } from '../types';\n\nfunction divide(a: [number, number], b: [number, number]): [number, number] {\n    const denominator = b[0] * b[0] + b[1] * b[1];\n\n    return [(a[0] * b[0] + a[1] * b[1]) / denominator, (a[1] * b[0] - a[0] * b[1]) / denominator];\n}\n\nfunction multiply(a: [number, number], b: [number, number]): [number, number] {\n    return [a[0] * b[0] - a[1] * b[1], a[0] * b[1] + a[1] * b[0]];\n}\n\nfunction evaluatePolynomial(coefficient: Float64Array, z: [number, number]): [number, number] {\n    let result: [number, number] = [0, 0];\n\n    for (let i = coefficient.length - 1; i >= 0; i -= 1) {\n        result = multiply(result, z);\n\n        result[0] += coefficient[i];\n    }\n\n    return result;\n}\n\nexport const createNativeIIRFilterNodeFakerFactory: TNativeIIRFilterNodeFakerFactoryFactory = (\n    createInvalidAccessError,\n    createInvalidStateError,\n    createNativeScriptProcessorNode,\n    createNotSupportedError\n) => {\n    return (nativeContext, baseLatency, { channelCount, channelCountMode, channelInterpretation, feedback, feedforward }) => {\n        const bufferSize = computeBufferSize(baseLatency, nativeContext.sampleRate);\n        const convertedFeedback = feedback instanceof Float64Array ? feedback : new Float64Array(feedback);\n        const convertedFeedforward = feedforward instanceof Float64Array ? feedforward : new Float64Array(feedforward);\n        const feedbackLength = convertedFeedback.length;\n        const feedforwardLength = convertedFeedforward.length;\n        const minLength = Math.min(feedbackLength, feedforwardLength);\n\n        if (feedbackLength === 0 || feedbackLength > 20) {\n            throw createNotSupportedError();\n        }\n\n        if (convertedFeedback[0] === 0) {\n            throw createInvalidStateError();\n        }\n\n        if (feedforwardLength === 0 || feedforwardLength > 20) {\n            throw createNotSupportedError();\n        }\n\n        if (convertedFeedforward[0] === 0) {\n            throw createInvalidStateError();\n        }\n\n        if (convertedFeedback[0] !== 1) {\n            for (let i = 0; i < feedforwardLength; i += 1) {\n                convertedFeedforward[i] /= convertedFeedback[0];\n            }\n\n            for (let i = 1; i < feedbackLength; i += 1) {\n                convertedFeedback[i] /= convertedFeedback[0];\n            }\n        }\n\n        const scriptProcessorNode = createNativeScriptProcessorNode(nativeContext, bufferSize, channelCount, channelCount);\n\n        scriptProcessorNode.channelCount = channelCount;\n        scriptProcessorNode.channelCountMode = channelCountMode;\n        scriptProcessorNode.channelInterpretation = channelInterpretation;\n\n        const bufferLength = 32;\n        const bufferIndexes: number[] = [];\n        const xBuffers: Float32Array[] = [];\n        const yBuffers: Float32Array[] = [];\n\n        for (let i = 0; i < channelCount; i += 1) {\n            bufferIndexes.push(0);\n\n            const xBuffer = new Float32Array(bufferLength);\n            const yBuffer = new Float32Array(bufferLength);\n\n            xBuffer.fill(0);\n            yBuffer.fill(0);\n\n            xBuffers.push(xBuffer);\n            yBuffers.push(yBuffer);\n        }\n\n        // tslint:disable-next-line:deprecation\n        scriptProcessorNode.onaudioprocess = (event: AudioProcessingEvent) => {\n            const inputBuffer = event.inputBuffer;\n            const outputBuffer = event.outputBuffer;\n\n            const numberOfChannels = inputBuffer.numberOfChannels;\n\n            for (let i = 0; i < numberOfChannels; i += 1) {\n                const input = inputBuffer.getChannelData(i);\n                const output = outputBuffer.getChannelData(i);\n\n                bufferIndexes[i] = filterBuffer(\n                    convertedFeedback,\n                    feedbackLength,\n                    convertedFeedforward,\n                    feedforwardLength,\n                    minLength,\n                    xBuffers[i],\n                    yBuffers[i],\n                    bufferIndexes[i],\n                    bufferLength,\n                    input,\n                    output\n                );\n            }\n        };\n\n        const nyquist = nativeContext.sampleRate / 2;\n\n        const nativeIIRFilterNodeFaker = {\n            get bufferSize(): number {\n                return bufferSize;\n            },\n            get channelCount(): number {\n                return scriptProcessorNode.channelCount;\n            },\n            set channelCount(value) {\n                scriptProcessorNode.channelCount = value;\n            },\n            get channelCountMode(): TNativeIIRFilterNode['channelCountMode'] {\n                return scriptProcessorNode.channelCountMode;\n            },\n            set channelCountMode(value) {\n                scriptProcessorNode.channelCountMode = value;\n            },\n            get channelInterpretation(): TNativeIIRFilterNode['channelInterpretation'] {\n                return scriptProcessorNode.channelInterpretation;\n            },\n            set channelInterpretation(value) {\n                scriptProcessorNode.channelInterpretation = value;\n            },\n            get context(): TNativeIIRFilterNode['context'] {\n                return scriptProcessorNode.context;\n            },\n            get inputs(): TNativeAudioNode[] {\n                return [scriptProcessorNode];\n            },\n            get numberOfInputs(): number {\n                return scriptProcessorNode.numberOfInputs;\n            },\n            get numberOfOutputs(): number {\n                return scriptProcessorNode.numberOfOutputs;\n            },\n            addEventListener(...args: any[]): void {\n                // @todo Dissallow adding an audioprocess listener.\n                return scriptProcessorNode.addEventListener(args[0], args[1], args[2]);\n            },\n            dispatchEvent(...args: any[]): boolean {\n                return scriptProcessorNode.dispatchEvent(args[0]);\n            },\n            getFrequencyResponse(frequencyHz: Float32Array, magResponse: Float32Array, phaseResponse: Float32Array): void {\n                if (frequencyHz.length !== magResponse.length || magResponse.length !== phaseResponse.length) {\n                    throw createInvalidAccessError();\n                }\n\n                const length = frequencyHz.length;\n\n                for (let i = 0; i < length; i += 1) {\n                    const omega = -Math.PI * (frequencyHz[i] / nyquist);\n                    const z: [number, number] = [Math.cos(omega), Math.sin(omega)];\n                    const numerator = evaluatePolynomial(convertedFeedforward, z);\n                    const denominator = evaluatePolynomial(convertedFeedback, z);\n                    const response = divide(numerator, denominator);\n\n                    magResponse[i] = Math.sqrt(response[0] * response[0] + response[1] * response[1]);\n                    phaseResponse[i] = Math.atan2(response[1], response[0]);\n                }\n            },\n            removeEventListener(...args: any[]): void {\n                return scriptProcessorNode.removeEventListener(args[0], args[1], args[2]);\n            }\n        };\n\n        return interceptConnections(nativeIIRFilterNodeFaker, scriptProcessorNode);\n    };\n};\n","import { TNativeScriptProcessorNodeFactory } from '../types';\n\nexport const createNativeScriptProcessorNode: TNativeScriptProcessorNodeFactory = (\n    nativeContext,\n    bufferSize,\n    numberOfInputChannels,\n    numberOfOutputChannels\n) => {\n    return nativeContext.createScriptProcessor(bufferSize, numberOfInputChannels, numberOfOutputChannels); // tslint:disable-line deprecation\n};\n","import { TNotSupportedErrorFactory } from '../types';\n\nexport const createNotSupportedError: TNotSupportedErrorFactory = () => new DOMException('', 'NotSupportedError');\n","import { deactivateAudioGraph } from '../helpers/deactivate-audio-graph';\nimport { testPromiseSupport } from '../helpers/test-promise-support';\nimport { IAudioBuffer, IOfflineAudioContext, IOfflineAudioContextOptions } from '../interfaces';\nimport { TAudioContextState, TNativeOfflineAudioContext, TOfflineAudioContextConstructorFactory } from '../types';\n\nconst DEFAULT_OPTIONS = {\n    numberOfChannels: 1\n} as const;\n\nexport const createOfflineAudioContextConstructor: TOfflineAudioContextConstructorFactory = (\n    baseAudioContextConstructor,\n    cacheTestResult,\n    createInvalidStateError,\n    createNativeOfflineAudioContext,\n    startRendering\n) => {\n    return class OfflineAudioContext extends baseAudioContextConstructor<IOfflineAudioContext> implements IOfflineAudioContext {\n        private _length: number;\n\n        private _nativeOfflineAudioContext: TNativeOfflineAudioContext;\n\n        private _state: null | TAudioContextState;\n\n        constructor(options: IOfflineAudioContextOptions);\n        constructor(numberOfChannels: number, length: number, sampleRate: number);\n        constructor(a: number | IOfflineAudioContextOptions, b?: number, c?: number) {\n            let options: IOfflineAudioContextOptions;\n\n            if (typeof a === 'number' && b !== undefined && c !== undefined) {\n                options = { length: b, numberOfChannels: a, sampleRate: c };\n            } else if (typeof a === 'object') {\n                options = a;\n            } else {\n                throw new Error('The given parameters are not valid.');\n            }\n\n            const { length, numberOfChannels, sampleRate } = { ...DEFAULT_OPTIONS, ...options };\n\n            const nativeOfflineAudioContext = createNativeOfflineAudioContext(numberOfChannels, length, sampleRate);\n\n            // #21 Safari does not support promises and therefore would fire the statechange event before the promise can be resolved.\n            if (!cacheTestResult(testPromiseSupport, () => testPromiseSupport(nativeOfflineAudioContext))) {\n                nativeOfflineAudioContext.addEventListener(\n                    'statechange',\n                    (() => {\n                        let i = 0;\n\n                        const delayStateChangeEvent = (event: Event) => {\n                            if (this._state === 'running') {\n                                if (i > 0) {\n                                    nativeOfflineAudioContext.removeEventListener('statechange', delayStateChangeEvent);\n                                    event.stopImmediatePropagation();\n\n                                    this._waitForThePromiseToSettle(event);\n                                } else {\n                                    i += 1;\n                                }\n                            }\n                        };\n\n                        return delayStateChangeEvent;\n                    })()\n                );\n            }\n\n            super(nativeOfflineAudioContext, numberOfChannels);\n\n            this._length = length;\n            this._nativeOfflineAudioContext = nativeOfflineAudioContext;\n            this._state = null;\n        }\n\n        get length(): number {\n            // Bug #17: Safari does not yet expose the length.\n            if (this._nativeOfflineAudioContext.length === undefined) {\n                return this._length;\n            }\n\n            return this._nativeOfflineAudioContext.length;\n        }\n\n        get state(): TAudioContextState {\n            return this._state === null ? this._nativeOfflineAudioContext.state : this._state;\n        }\n\n        public startRendering(): Promise<IAudioBuffer> {\n            /*\n             * Bug #9 & #59: It is theoretically possible that startRendering() will first render a partialOfflineAudioContext. Therefore\n             * the state of the nativeOfflineAudioContext might no transition to running immediately.\n             */\n            if (this._state === 'running') {\n                return Promise.reject(createInvalidStateError());\n            }\n\n            this._state = 'running';\n\n            return startRendering(this.destination, this._nativeOfflineAudioContext).finally(() => {\n                this._state = null;\n\n                deactivateAudioGraph(this);\n            });\n        }\n\n        private _waitForThePromiseToSettle(event: Event): void {\n            if (this._state === null) {\n                this._nativeOfflineAudioContext.dispatchEvent(event);\n            } else {\n                setTimeout(() => this._waitForThePromiseToSettle(event));\n            }\n        }\n    };\n};\n","import { isActiveAudioNode } from '../helpers/is-active-audio-node';\nimport { setInternalStateToActive } from '../helpers/set-internal-state-to-active';\nimport { setInternalStateToPassive } from '../helpers/set-internal-state-to-passive';\nimport {\n    IAudioParam,\n    IAudioScheduledSourceNodeEventMap,\n    IMinimalOfflineAudioContext,\n    IOscillatorNode,\n    IOscillatorNodeRenderer,\n    IOscillatorOptions\n} from '../interfaces';\nimport {\n    TContext,\n    TEventHandler,\n    TNativeOscillatorNode,\n    TOscillatorNodeConstructorFactory,\n    TOscillatorNodeRenderer,\n    TOscillatorType\n} from '../types';\n\nconst DEFAULT_OPTIONS = {\n    channelCount: 2,\n    channelCountMode: 'max', // This attribute has no effect for nodes with no inputs.\n    channelInterpretation: 'speakers', // This attribute has no effect for nodes with no inputs.\n    detune: 0,\n    frequency: 440,\n    periodicWave: undefined,\n    type: 'sine'\n} as const;\n\nexport const createOscillatorNodeConstructor: TOscillatorNodeConstructorFactory = (\n    audioNodeConstructor,\n    createAudioParam,\n    createNativeOscillatorNode,\n    createOscillatorNodeRenderer,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    wrapEventListener\n) => {\n    return class OscillatorNode<T extends TContext>\n        extends audioNodeConstructor<T, IAudioScheduledSourceNodeEventMap>\n        implements IOscillatorNode<T>\n    {\n        private _detune: IAudioParam;\n\n        private _frequency: IAudioParam;\n\n        private _nativeOscillatorNode: TNativeOscillatorNode;\n\n        private _onended: null | TEventHandler<this>;\n\n        private _oscillatorNodeRenderer: TOscillatorNodeRenderer<T>;\n\n        constructor(context: T, options?: Partial<IOscillatorOptions>) {\n            const nativeContext = getNativeContext(context);\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n            const nativeOscillatorNode = createNativeOscillatorNode(nativeContext, mergedOptions);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n            const oscillatorNodeRenderer = <TOscillatorNodeRenderer<T>>(isOffline ? createOscillatorNodeRenderer() : null);\n            const nyquist = context.sampleRate / 2;\n\n            super(context, false, nativeOscillatorNode, oscillatorNodeRenderer);\n\n            // Bug #81: Firefox & Safari do not export the correct values for maxValue and minValue.\n            this._detune = createAudioParam(this, isOffline, nativeOscillatorNode.detune, 153600, -153600);\n            // Bug #76: Safari does not export the correct values for maxValue and minValue.\n            this._frequency = createAudioParam(this, isOffline, nativeOscillatorNode.frequency, nyquist, -nyquist);\n            this._nativeOscillatorNode = nativeOscillatorNode;\n            this._onended = null;\n            this._oscillatorNodeRenderer = oscillatorNodeRenderer;\n\n            if (this._oscillatorNodeRenderer !== null && mergedOptions.periodicWave !== undefined) {\n                (<IOscillatorNodeRenderer<IMinimalOfflineAudioContext>>this._oscillatorNodeRenderer).periodicWave =\n                    mergedOptions.periodicWave;\n            }\n        }\n\n        get detune(): IAudioParam {\n            return this._detune;\n        }\n\n        get frequency(): IAudioParam {\n            return this._frequency;\n        }\n\n        get onended(): null | TEventHandler<this> {\n            return this._onended;\n        }\n\n        set onended(value) {\n            const wrappedListener = typeof value === 'function' ? wrapEventListener(this, value) : null;\n\n            this._nativeOscillatorNode.onended = wrappedListener;\n\n            const nativeOnEnded = this._nativeOscillatorNode.onended;\n\n            this._onended = nativeOnEnded !== null && nativeOnEnded === wrappedListener ? value : nativeOnEnded;\n        }\n\n        get type(): TOscillatorType {\n            return this._nativeOscillatorNode.type;\n        }\n\n        set type(value) {\n            this._nativeOscillatorNode.type = value;\n\n            if (this._oscillatorNodeRenderer !== null) {\n                this._oscillatorNodeRenderer.periodicWave = null;\n            }\n        }\n\n        public setPeriodicWave(periodicWave: PeriodicWave): void {\n            this._nativeOscillatorNode.setPeriodicWave(periodicWave);\n\n            if (this._oscillatorNodeRenderer !== null) {\n                this._oscillatorNodeRenderer.periodicWave = periodicWave;\n            }\n        }\n\n        public start(when = 0): void {\n            this._nativeOscillatorNode.start(when);\n\n            if (this._oscillatorNodeRenderer !== null) {\n                this._oscillatorNodeRenderer.start = when;\n            }\n\n            if (this.context.state !== 'closed') {\n                setInternalStateToActive(this);\n\n                const resetInternalStateToPassive = () => {\n                    this._nativeOscillatorNode.removeEventListener('ended', resetInternalStateToPassive);\n\n                    if (isActiveAudioNode(this)) {\n                        setInternalStateToPassive(this);\n                    }\n                };\n\n                this._nativeOscillatorNode.addEventListener('ended', resetInternalStateToPassive);\n            }\n        }\n\n        public stop(when = 0): void {\n            this._nativeOscillatorNode.stop(when);\n\n            if (this._oscillatorNodeRenderer !== null) {\n                this._oscillatorNodeRenderer.stop = when;\n            }\n        }\n    };\n};\n","import { MOST_NEGATIVE_SINGLE_FLOAT, MOST_POSITIVE_SINGLE_FLOAT } from '../constants';\nimport { IAudioParam, IPannerNode, IPannerOptions } from '../interfaces';\nimport {\n    TAudioNodeRenderer,\n    TContext,\n    TDistanceModelType,\n    TNativePannerNode,\n    TPannerNodeConstructorFactory,\n    TPanningModelType\n} from '../types';\n\nconst DEFAULT_OPTIONS = {\n    channelCount: 2,\n    channelCountMode: 'clamped-max',\n    channelInterpretation: 'speakers',\n    coneInnerAngle: 360,\n    coneOuterAngle: 360,\n    coneOuterGain: 0,\n    distanceModel: 'inverse',\n    maxDistance: 10000,\n    orientationX: 1,\n    orientationY: 0,\n    orientationZ: 0,\n    panningModel: 'equalpower',\n    positionX: 0,\n    positionY: 0,\n    positionZ: 0,\n    refDistance: 1,\n    rolloffFactor: 1\n} as const;\n\nexport const createPannerNodeConstructor: TPannerNodeConstructorFactory = (\n    audioNodeConstructor,\n    createAudioParam,\n    createNativePannerNode,\n    createPannerNodeRenderer,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    setAudioNodeTailTime\n) => {\n    return class PannerNode<T extends TContext> extends audioNodeConstructor<T> implements IPannerNode<T> {\n        private _nativePannerNode: TNativePannerNode;\n\n        private _orientationX: IAudioParam;\n\n        private _orientationY: IAudioParam;\n\n        private _orientationZ: IAudioParam;\n\n        private _positionX: IAudioParam;\n\n        private _positionY: IAudioParam;\n\n        private _positionZ: IAudioParam;\n\n        constructor(context: T, options?: Partial<IPannerOptions>) {\n            const nativeContext = getNativeContext(context);\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n            const nativePannerNode = createNativePannerNode(nativeContext, mergedOptions);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n            const pannerNodeRenderer = <TAudioNodeRenderer<T, this>>(isOffline ? createPannerNodeRenderer() : null);\n\n            super(context, false, nativePannerNode, pannerNodeRenderer);\n\n            this._nativePannerNode = nativePannerNode;\n            // Bug #74: Safari does not export the correct values for maxValue and minValue.\n            this._orientationX = createAudioParam(\n                this,\n                isOffline,\n                nativePannerNode.orientationX,\n                MOST_POSITIVE_SINGLE_FLOAT,\n                MOST_NEGATIVE_SINGLE_FLOAT\n            );\n            this._orientationY = createAudioParam(\n                this,\n                isOffline,\n                nativePannerNode.orientationY,\n                MOST_POSITIVE_SINGLE_FLOAT,\n                MOST_NEGATIVE_SINGLE_FLOAT\n            );\n            this._orientationZ = createAudioParam(\n                this,\n                isOffline,\n                nativePannerNode.orientationZ,\n                MOST_POSITIVE_SINGLE_FLOAT,\n                MOST_NEGATIVE_SINGLE_FLOAT\n            );\n            this._positionX = createAudioParam(\n                this,\n                isOffline,\n                nativePannerNode.positionX,\n                MOST_POSITIVE_SINGLE_FLOAT,\n                MOST_NEGATIVE_SINGLE_FLOAT\n            );\n            this._positionY = createAudioParam(\n                this,\n                isOffline,\n                nativePannerNode.positionY,\n                MOST_POSITIVE_SINGLE_FLOAT,\n                MOST_NEGATIVE_SINGLE_FLOAT\n            );\n            this._positionZ = createAudioParam(\n                this,\n                isOffline,\n                nativePannerNode.positionZ,\n                MOST_POSITIVE_SINGLE_FLOAT,\n                MOST_NEGATIVE_SINGLE_FLOAT\n            );\n\n            // @todo Determine a meaningful tail-time instead of just using one second.\n            setAudioNodeTailTime(this, 1);\n        }\n\n        get coneInnerAngle(): number {\n            return this._nativePannerNode.coneInnerAngle;\n        }\n\n        set coneInnerAngle(value) {\n            this._nativePannerNode.coneInnerAngle = value;\n        }\n\n        get coneOuterAngle(): number {\n            return this._nativePannerNode.coneOuterAngle;\n        }\n\n        set coneOuterAngle(value) {\n            this._nativePannerNode.coneOuterAngle = value;\n        }\n\n        get coneOuterGain(): number {\n            return this._nativePannerNode.coneOuterGain;\n        }\n\n        set coneOuterGain(value) {\n            this._nativePannerNode.coneOuterGain = value;\n        }\n\n        get distanceModel(): TDistanceModelType {\n            return this._nativePannerNode.distanceModel;\n        }\n\n        set distanceModel(value) {\n            this._nativePannerNode.distanceModel = value;\n        }\n\n        get maxDistance(): number {\n            return this._nativePannerNode.maxDistance;\n        }\n\n        set maxDistance(value) {\n            this._nativePannerNode.maxDistance = value;\n        }\n\n        get orientationX(): IAudioParam {\n            return this._orientationX;\n        }\n\n        get orientationY(): IAudioParam {\n            return this._orientationY;\n        }\n\n        get orientationZ(): IAudioParam {\n            return this._orientationZ;\n        }\n\n        get panningModel(): TPanningModelType {\n            return this._nativePannerNode.panningModel;\n        }\n\n        set panningModel(value) {\n            this._nativePannerNode.panningModel = value;\n        }\n\n        get positionX(): IAudioParam {\n            return this._positionX;\n        }\n\n        get positionY(): IAudioParam {\n            return this._positionY;\n        }\n\n        get positionZ(): IAudioParam {\n            return this._positionZ;\n        }\n\n        get refDistance(): number {\n            return this._nativePannerNode.refDistance;\n        }\n\n        set refDistance(value) {\n            this._nativePannerNode.refDistance = value;\n        }\n\n        get rolloffFactor(): number {\n            return this._nativePannerNode.rolloffFactor;\n        }\n\n        set rolloffFactor(value) {\n            this._nativePannerNode.rolloffFactor = value;\n        }\n    };\n};\n","import { IPeriodicWave, IPeriodicWaveOptions } from '../interfaces';\nimport { TContext, TPeriodicWaveConstructorFactory } from '../types';\n\nconst DEFAULT_OPTIONS = {\n    disableNormalization: false\n} as const;\n\nexport const createPeriodicWaveConstructor: TPeriodicWaveConstructorFactory = (\n    createNativePeriodicWave,\n    getNativeContext,\n    periodicWaveStore,\n    sanitizePeriodicWaveOptions\n) => {\n    return class PeriodicWave<T extends TContext> implements IPeriodicWave {\n        constructor(context: T, options?: Partial<IPeriodicWaveOptions>) {\n            const nativeContext = getNativeContext(context);\n            const mergedOptions = sanitizePeriodicWaveOptions({ ...DEFAULT_OPTIONS, ...options });\n            const periodicWave = createNativePeriodicWave(nativeContext, mergedOptions);\n\n            periodicWaveStore.add(periodicWave);\n\n            // This does violate all good pratices but it is used here to simplify the handling of periodic waves.\n            return periodicWave;\n        }\n\n        public static [Symbol.hasInstance](instance: unknown): boolean {\n            return (\n                (instance !== null && typeof instance === 'object' && Object.getPrototypeOf(instance) === PeriodicWave.prototype) ||\n                periodicWaveStore.has(<any>instance)\n            );\n        }\n    };\n};\n","import { IAudioParam, IStereoPannerNode, IStereoPannerOptions } from '../interfaces';\nimport { TAudioNodeRenderer, TContext, TStereoPannerNodeConstructorFactory } from '../types';\n\nconst DEFAULT_OPTIONS = {\n    channelCount: 2,\n    /*\n     * Bug #105: The channelCountMode should be 'clamped-max' according to the spec but is set to 'explicit' to achieve consistent\n     * behavior.\n     */\n    channelCountMode: 'explicit',\n    channelInterpretation: 'speakers',\n    pan: 0\n} as const;\n\nexport const createStereoPannerNodeConstructor: TStereoPannerNodeConstructorFactory = (\n    audioNodeConstructor,\n    createAudioParam,\n    createNativeStereoPannerNode,\n    createStereoPannerNodeRenderer,\n    getNativeContext,\n    isNativeOfflineAudioContext\n) => {\n    return class StereoPannerNode<T extends TContext> extends audioNodeConstructor<T> implements IStereoPannerNode<T> {\n        private _pan: IAudioParam;\n\n        constructor(context: T, options?: Partial<IStereoPannerOptions>) {\n            const nativeContext = getNativeContext(context);\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n            const nativeStereoPannerNode = createNativeStereoPannerNode(nativeContext, mergedOptions);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n            const stereoPannerNodeRenderer = <TAudioNodeRenderer<T, this>>(isOffline ? createStereoPannerNodeRenderer() : null);\n\n            super(context, false, nativeStereoPannerNode, stereoPannerNodeRenderer);\n\n            this._pan = createAudioParam(this, isOffline, nativeStereoPannerNode.pan);\n        }\n\n        get pan(): IAudioParam {\n            return this._pan;\n        }\n    };\n};\n","import { TUnknownErrorFactory } from '../types';\n\nexport const createUnknownError: TUnknownErrorFactory = () => new DOMException('', 'UnknownError');\n","import { IWaveShaperNode, IWaveShaperOptions } from '../interfaces';\nimport { TAudioNodeRenderer, TContext, TNativeWaveShaperNode, TOverSampleType, TWaveShaperNodeConstructorFactory } from '../types';\n\nconst DEFAULT_OPTIONS = {\n    channelCount: 2,\n    channelCountMode: 'max',\n    channelInterpretation: 'speakers',\n    curve: null,\n    oversample: 'none'\n} as const;\n\nexport const createWaveShaperNodeConstructor: TWaveShaperNodeConstructorFactory = (\n    audioNodeConstructor,\n    createInvalidStateError,\n    createNativeWaveShaperNode,\n    createWaveShaperNodeRenderer,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    setAudioNodeTailTime\n) => {\n    return class WaveShaperNode<T extends TContext> extends audioNodeConstructor<T> implements IWaveShaperNode<T> {\n        private _isCurveNullified: boolean;\n\n        private _nativeWaveShaperNode: TNativeWaveShaperNode;\n\n        constructor(context: T, options?: Partial<IWaveShaperOptions>) {\n            const nativeContext = getNativeContext(context);\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n            const nativeWaveShaperNode = createNativeWaveShaperNode(nativeContext, mergedOptions);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n            const waveShaperNodeRenderer = <TAudioNodeRenderer<T, this>>(isOffline ? createWaveShaperNodeRenderer() : null);\n\n            // @todo Add a mechanism to only switch a WaveShaperNode to active while it is connected.\n            super(context, true, nativeWaveShaperNode, waveShaperNodeRenderer);\n\n            this._isCurveNullified = false;\n            this._nativeWaveShaperNode = nativeWaveShaperNode;\n\n            // @todo Determine a meaningful tail-time instead of just using one second.\n            setAudioNodeTailTime(this, 1);\n        }\n\n        get curve(): null | Float32Array {\n            if (this._isCurveNullified) {\n                return null;\n            }\n\n            return this._nativeWaveShaperNode.curve;\n        }\n\n        set curve(value) {\n            // Bug #103: Safari does not allow to set the curve to null.\n            if (value === null) {\n                this._isCurveNullified = true;\n                this._nativeWaveShaperNode.curve = new Float32Array([0, 0]);\n            } else {\n                // Bug #102: Safari does not throw an InvalidStateError when the curve has less than two samples.\n                // Bug #104: Chrome and Edge will throw an InvalidAccessError when the curve has less than two samples.\n                if (value.length < 2) {\n                    throw createInvalidStateError();\n                }\n\n                this._isCurveNullified = false;\n                this._nativeWaveShaperNode.curve = value;\n            }\n        }\n\n        get oversample(): TOverSampleType {\n            return this._nativeWaveShaperNode.oversample;\n        }\n\n        set oversample(value) {\n            this._nativeWaveShaperNode.oversample = value;\n        }\n    };\n};\n","import { TGetFirstSampleFunction } from '../types';\n\nexport const getFirstSample: TGetFirstSampleFunction = (audioBuffer, buffer, channelNumber) => {\n    // Bug #5: Safari does not support copyFromChannel() and copyToChannel().\n    if (audioBuffer.copyFromChannel === undefined) {\n        return audioBuffer.getChannelData(channelNumber)[0];\n    }\n\n    audioBuffer.copyFromChannel(buffer, channelNumber);\n\n    return buffer[0];\n};\n","import { TIsDCCurveFunction } from '../types';\n\nexport const isDCCurve: TIsDCCurveFunction = (curve) => {\n    if (curve === null) {\n        return false;\n    }\n\n    const length = curve.length;\n\n    if (length % 2 !== 0) {\n        return curve[Math.floor(length / 2)] !== 0;\n    }\n\n    return curve[length / 2 - 1] + curve[length / 2] !== 0;\n};\n","import { TOverwriteAccessorsFunction } from '../types';\n\nexport const overwriteAccessors: TOverwriteAccessorsFunction = (object, property, createGetter, createSetter) => {\n    let prototype = object;\n\n    while (!prototype.hasOwnProperty(property)) {\n        prototype = Object.getPrototypeOf(prototype);\n    }\n\n    const { get, set } = <Required<PropertyDescriptor>>Object.getOwnPropertyDescriptor(prototype, property);\n\n    Object.defineProperty(object, property, { get: createGetter(get), set: createSetter(set) });\n};\n","import { TSetValueAtTimeUntilPossibleFunction } from '../types';\n\nexport const setValueAtTimeUntilPossible: TSetValueAtTimeUntilPossibleFunction = (audioParam, value, startTime) => {\n    try {\n        audioParam.setValueAtTime(value, startTime);\n    } catch (err) {\n        if (err.code !== 9) {\n            throw err;\n        }\n\n        setValueAtTimeUntilPossible(audioParam, value, startTime + 1e-7);\n    }\n};\n","import { TNativeContext } from '../types';\n\nexport const testAudioScheduledSourceNodeStartMethodNegativeParametersSupport = (nativeContext: TNativeContext) => {\n    const nativeAudioBufferSourceNode = nativeContext.createOscillator();\n\n    try {\n        nativeAudioBufferSourceNode.start(-1);\n    } catch (err) {\n        return err instanceof RangeError;\n    }\n\n    return false;\n};\n","import { TNativeContext } from '../types';\n\nexport const testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport = (nativeContext: TNativeContext) => {\n    const nativeAudioBuffer = nativeContext.createBuffer(1, 1, 44100);\n    const nativeAudioBufferSourceNode = nativeContext.createBufferSource();\n\n    nativeAudioBufferSourceNode.buffer = nativeAudioBuffer;\n    nativeAudioBufferSourceNode.start();\n    nativeAudioBufferSourceNode.stop();\n\n    try {\n        nativeAudioBufferSourceNode.stop();\n\n        return true;\n    } catch {\n        return false;\n    }\n};\n","import { TNativeContext } from '../types';\n\nexport const testAudioScheduledSourceNodeStopMethodNegativeParametersSupport = (nativeContext: TNativeContext) => {\n    const nativeAudioBufferSourceNode = nativeContext.createOscillator();\n\n    try {\n        nativeAudioBufferSourceNode.stop(-1);\n    } catch (err) {\n        return err instanceof RangeError;\n    }\n\n    return false;\n};\n","import { TNativeAudioNode, TWrapAudioScheduledSourceNodeStopMethodConsecutiveCallsFunction } from '../types';\nimport { interceptConnections } from './intercept-connections';\n\nexport const wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls: TWrapAudioScheduledSourceNodeStopMethodConsecutiveCallsFunction = (\n    nativeAudioScheduledSourceNode,\n    nativeContext\n) => {\n    const nativeGainNode = nativeContext.createGain();\n\n    nativeAudioScheduledSourceNode.connect(nativeGainNode);\n\n    const disconnectGainNode = ((disconnect) => {\n        return () => {\n            // @todo TypeScript cannot infer the overloaded signature with 1 argument yet.\n            (<(destinaton: TNativeAudioNode) => void>disconnect).call(nativeAudioScheduledSourceNode, nativeGainNode);\n            nativeAudioScheduledSourceNode.removeEventListener('ended', disconnectGainNode);\n        };\n    })(nativeAudioScheduledSourceNode.disconnect);\n\n    nativeAudioScheduledSourceNode.addEventListener('ended', disconnectGainNode);\n\n    interceptConnections(nativeAudioScheduledSourceNode, nativeGainNode);\n\n    nativeAudioScheduledSourceNode.stop = ((stop) => {\n        let isStopped = false;\n\n        return (when = 0) => {\n            if (isStopped) {\n                try {\n                    stop.call(nativeAudioScheduledSourceNode, when);\n                } catch {\n                    nativeGainNode.gain.setValueAtTime(0, when);\n                }\n            } else {\n                stop.call(nativeAudioScheduledSourceNode, when);\n\n                isStopped = true;\n            }\n        };\n    })(nativeAudioScheduledSourceNode.stop);\n};\n","import { TWrapEventListenerFunction } from '../types';\n\nexport const wrapEventListener: TWrapEventListenerFunction = (target, eventListener) => {\n    return (event) => {\n        const descriptor = { value: target };\n\n        Object.defineProperties(event, {\n            currentTarget: descriptor,\n            target: descriptor\n        });\n\n        if (typeof eventListener === 'function') {\n            return eventListener.call(target, event);\n        }\n\n        return eventListener.handleEvent.call(target, event);\n    };\n};\n","import {\n    createCancelAndHoldAutomationEvent,\n    createCancelScheduledValuesAutomationEvent,\n    createExponentialRampToValueAutomationEvent,\n    createLinearRampToValueAutomationEvent,\n    createSetTargetAutomationEvent,\n    createSetValueAutomationEvent,\n    createSetValueCurveAutomationEvent\n} from 'automation-events';\nimport { createAbortError } from './factories/abort-error';\nimport { createAddActiveInputConnectionToAudioNode } from './factories/add-active-input-connection-to-audio-node';\nimport { createAddAudioNodeConnections } from './factories/add-audio-node-connections';\nimport { createAddAudioParamConnections } from './factories/add-audio-param-connections';\nimport { createAddAudioWorkletModule } from './factories/add-audio-worklet-module';\nimport { createAddConnectionToAudioNode } from './factories/add-connection-to-audio-node';\nimport { createAddPassiveInputConnectionToAudioNode } from './factories/add-passive-input-connection-to-audio-node';\nimport { createAddSilentConnection } from './factories/add-silent-connection';\nimport { createAddUnrenderedAudioWorkletNode } from './factories/add-unrendered-audio-worklet-node';\nimport { createAnalyserNodeConstructor } from './factories/analyser-node-constructor';\nimport { createAnalyserNodeRendererFactory } from './factories/analyser-node-renderer-factory';\nimport { createAudioBufferConstructor } from './factories/audio-buffer-constructor';\nimport { createAudioBufferSourceNodeConstructor } from './factories/audio-buffer-source-node-constructor';\nimport { createAudioBufferSourceNodeRendererFactory } from './factories/audio-buffer-source-node-renderer-factory';\nimport { createAudioContextConstructor } from './factories/audio-context-constructor';\nimport { createAudioDestinationNodeConstructor } from './factories/audio-destination-node-constructor';\nimport { createAudioDestinationNodeRenderer } from './factories/audio-destination-node-renderer-factory';\nimport { createAudioListenerFactory } from './factories/audio-listener-factory';\nimport { createAudioNodeConstructor } from './factories/audio-node-constructor';\nimport { createAudioParamFactory } from './factories/audio-param-factory';\nimport { createAudioParamRenderer } from './factories/audio-param-renderer';\nimport { createAudioWorkletNodeConstructor } from './factories/audio-worklet-node-constructor';\nimport { createAudioWorkletNodeRendererFactory } from './factories/audio-worklet-node-renderer-factory';\nimport { createBaseAudioContextConstructor } from './factories/base-audio-context-constructor';\nimport { createBiquadFilterNodeConstructor } from './factories/biquad-filter-node-constructor';\nimport { createBiquadFilterNodeRendererFactory } from './factories/biquad-filter-node-renderer-factory';\nimport { createCacheTestResult } from './factories/cache-test-result';\nimport { createChannelMergerNodeConstructor } from './factories/channel-merger-node-constructor';\nimport { createChannelMergerNodeRendererFactory } from './factories/channel-merger-node-renderer-factory';\nimport { createChannelSplitterNodeConstructor } from './factories/channel-splitter-node-constructor';\nimport { createChannelSplitterNodeRendererFactory } from './factories/channel-splitter-node-renderer-factory';\nimport { createConnectAudioParam } from './factories/connect-audio-param';\nimport { createConnectMultipleOutputs } from './factories/connect-multiple-outputs';\nimport { createConnectedNativeAudioBufferSourceNodeFactory } from './factories/connected-native-audio-buffer-source-node-factory';\nimport { createConstantSourceNodeConstructor } from './factories/constant-source-node-constructor';\nimport { createConstantSourceNodeRendererFactory } from './factories/constant-source-node-renderer-factory';\nimport { createConvertNumberToUnsignedLong } from './factories/convert-number-to-unsigned-long';\nimport { createConvolverNodeConstructor } from './factories/convolver-node-constructor';\nimport { createConvolverNodeRendererFactory } from './factories/convolver-node-renderer-factory';\nimport { createCreateNativeOfflineAudioContext } from './factories/create-native-offline-audio-context';\nimport { createDataCloneError } from './factories/data-clone-error';\nimport { createDecodeAudioData } from './factories/decode-audio-data';\nimport { createDecrementCycleCounter } from './factories/decrement-cycle-counter';\nimport { createDelayNodeConstructor } from './factories/delay-node-constructor';\nimport { createDelayNodeRendererFactory } from './factories/delay-node-renderer-factory';\nimport { createDeleteActiveInputConnectionToAudioNode } from './factories/delete-active-input-connection-to-audio-node';\nimport { createDeleteUnrenderedAudioWorkletNode } from './factories/delete-unrendered-audio-worklet-node';\nimport { createDetectCycles } from './factories/detect-cycles';\nimport { createDisconnectMultipleOutputs } from './factories/disconnect-multiple-outputs';\nimport { createDynamicsCompressorNodeConstructor } from './factories/dynamics-compressor-node-constructor';\nimport { createDynamicsCompressorNodeRendererFactory } from './factories/dynamics-compressor-node-renderer-factory';\nimport { createEncodingError } from './factories/encoding-error';\nimport { createEvaluateSource } from './factories/evaluate-source';\nimport { createEventTargetConstructor } from './factories/event-target-constructor';\nimport { createExposeCurrentFrameAndCurrentTime } from './factories/expose-current-frame-and-current-time';\nimport { createFetchSource } from './factories/fetch-source';\nimport { createGainNodeConstructor } from './factories/gain-node-constructor';\nimport { createGainNodeRendererFactory } from './factories/gain-node-renderer-factory';\nimport { createGetActiveAudioWorkletNodeInputs } from './factories/get-active-audio-worklet-node-inputs';\nimport { createGetAudioNodeRenderer } from './factories/get-audio-node-renderer';\nimport { createGetAudioNodeTailTime } from './factories/get-audio-node-tail-time';\nimport { createGetAudioParamRenderer } from './factories/get-audio-param-renderer';\nimport { createGetBackupOfflineAudioContext } from './factories/get-backup-offline-audio-context';\nimport { createGetNativeContext } from './factories/get-native-context';\nimport { createGetOrCreateBackupOfflineAudioContext } from './factories/get-or-create-backup-offline-audio-context';\nimport { createGetUnrenderedAudioWorkletNodes } from './factories/get-unrendered-audio-worklet-nodes';\nimport { createIIRFilterNodeConstructor } from './factories/iir-filter-node-constructor';\nimport { createIIRFilterNodeRendererFactory } from './factories/iir-filter-node-renderer-factory';\nimport { createIncrementCycleCounterFactory } from './factories/increment-cycle-counter-factory';\nimport { createIndexSizeError } from './factories/index-size-error';\nimport { createInvalidAccessError } from './factories/invalid-access-error';\nimport { createInvalidStateError } from './factories/invalid-state-error';\nimport { createIsAnyAudioContext } from './factories/is-any-audio-context';\nimport { createIsAnyAudioNode } from './factories/is-any-audio-node';\nimport { createIsAnyAudioParam } from './factories/is-any-audio-param';\nimport { createIsAnyOfflineAudioContext } from './factories/is-any-offline-audio-context';\nimport { createIsNativeAudioContext } from './factories/is-native-audio-context';\nimport { createIsNativeAudioNode } from './factories/is-native-audio-node';\nimport { createIsNativeAudioParam } from './factories/is-native-audio-param';\nimport { createIsNativeContext } from './factories/is-native-context';\nimport { createIsNativeOfflineAudioContext } from './factories/is-native-offline-audio-context';\nimport { createIsSecureContext } from './factories/is-secure-context';\nimport { createIsSupportedPromise } from './factories/is-supported-promise';\nimport { createMediaElementAudioSourceNodeConstructor } from './factories/media-element-audio-source-node-constructor';\nimport { createMediaStreamAudioDestinationNodeConstructor } from './factories/media-stream-audio-destination-node-constructor';\nimport { createMediaStreamAudioSourceNodeConstructor } from './factories/media-stream-audio-source-node-constructor';\nimport { createMediaStreamTrackAudioSourceNodeConstructor } from './factories/media-stream-track-audio-source-node-constructor';\nimport { createMinimalAudioContextConstructor } from './factories/minimal-audio-context-constructor';\nimport { createMinimalBaseAudioContextConstructor } from './factories/minimal-base-audio-context-constructor';\nimport { createMinimalOfflineAudioContextConstructor } from './factories/minimal-offline-audio-context-constructor';\nimport { createMonitorConnections } from './factories/monitor-connections';\nimport { createNativeAnalyserNodeFactory } from './factories/native-analyser-node-factory';\nimport { createNativeAudioBufferConstructor } from './factories/native-audio-buffer-constructor';\nimport { createNativeAudioBufferSourceNodeFactory } from './factories/native-audio-buffer-source-node-factory';\nimport { createNativeAudioContextConstructor } from './factories/native-audio-context-constructor';\nimport { createNativeAudioDestinationNodeFactory } from './factories/native-audio-destination-node';\nimport { createNativeAudioWorkletNodeConstructor } from './factories/native-audio-worklet-node-constructor';\nimport { createNativeAudioWorkletNodeFactory } from './factories/native-audio-worklet-node-factory';\nimport { createNativeAudioWorkletNodeFakerFactory } from './factories/native-audio-worklet-node-faker-factory';\nimport { createNativeBiquadFilterNode } from './factories/native-biquad-filter-node';\nimport { createNativeChannelMergerNodeFactory } from './factories/native-channel-merger-node-factory';\nimport { createNativeChannelSplitterNode } from './factories/native-channel-splitter-node';\nimport { createNativeConstantSourceNodeFactory } from './factories/native-constant-source-node-factory';\nimport { createNativeConstantSourceNodeFakerFactory } from './factories/native-constant-source-node-faker-factory';\nimport { createNativeConvolverNodeFactory } from './factories/native-convolver-node-factory';\nimport { createNativeDelayNode } from './factories/native-delay-node';\nimport { createNativeDynamicsCompressorNodeFactory } from './factories/native-dynamics-compressor-node-factory';\nimport { createNativeGainNode } from './factories/native-gain-node';\nimport { createNativeIIRFilterNodeFactory } from './factories/native-iir-filter-node-factory';\nimport { createNativeIIRFilterNodeFakerFactory } from './factories/native-iir-filter-node-faker-factory';\nimport { createNativeMediaElementAudioSourceNode } from './factories/native-media-element-audio-source-node';\nimport { createNativeMediaStreamAudioDestinationNode } from './factories/native-media-stream-audio-destination-node';\nimport { createNativeMediaStreamAudioSourceNode } from './factories/native-media-stream-audio-source-node';\nimport { createNativeMediaStreamTrackAudioSourceNodeFactory } from './factories/native-media-stream-track-audio-source-node-factory';\nimport { createNativeOfflineAudioContextConstructor } from './factories/native-offline-audio-context-constructor';\nimport { createNativeOscillatorNodeFactory } from './factories/native-oscillator-node-factory';\nimport { createNativePannerNodeFactory } from './factories/native-panner-node-factory';\nimport { createNativePannerNodeFakerFactory } from './factories/native-panner-node-faker-factory';\nimport { createNativePeriodicWaveFactory } from './factories/native-periodic-wave-factory';\nimport { createNativeScriptProcessorNode } from './factories/native-script-processor-node';\nimport { createNativeStereoPannerNodeFactory } from './factories/native-stereo-panner-node-factory';\nimport { createNativeStereoPannerNodeFakerFactory } from './factories/native-stereo-panner-node-faker-factory';\nimport { createNativeWaveShaperNodeFactory } from './factories/native-wave-shaper-node-factory';\nimport { createNativeWaveShaperNodeFakerFactory } from './factories/native-wave-shaper-node-faker-factory';\nimport { createNotSupportedError } from './factories/not-supported-error';\nimport { createOfflineAudioContextConstructor } from './factories/offline-audio-context-constructor';\nimport { createOscillatorNodeConstructor } from './factories/oscillator-node-constructor';\nimport { createOscillatorNodeRendererFactory } from './factories/oscillator-node-renderer-factory';\nimport { createPannerNodeConstructor } from './factories/panner-node-constructor';\nimport { createPannerNodeRendererFactory } from './factories/panner-node-renderer-factory';\nimport { createPeriodicWaveConstructor } from './factories/periodic-wave-constructor';\nimport { createRenderAutomation } from './factories/render-automation';\nimport { createRenderInputsOfAudioNode } from './factories/render-inputs-of-audio-node';\nimport { createRenderInputsOfAudioParam } from './factories/render-inputs-of-audio-param';\nimport { createRenderNativeOfflineAudioContext } from './factories/render-native-offline-audio-context';\nimport { createSetActiveAudioWorkletNodeInputs } from './factories/set-active-audio-worklet-node-inputs';\nimport { createSetAudioNodeTailTime } from './factories/set-audio-node-tail-time';\nimport { createStartRendering } from './factories/start-rendering';\nimport { createStereoPannerNodeConstructor } from './factories/stereo-panner-node-constructor';\nimport { createStereoPannerNodeRendererFactory } from './factories/stereo-panner-node-renderer-factory';\nimport { createTestAudioBufferConstructorSupport } from './factories/test-audio-buffer-constructor-support';\nimport { createTestAudioBufferCopyChannelMethodsSubarraySupport } from './factories/test-audio-buffer-copy-channel-methods-subarray-support';\nimport { createTestAudioContextCloseMethodSupport } from './factories/test-audio-context-close-method-support';\nimport { createTestAudioContextDecodeAudioDataMethodTypeErrorSupport } from './factories/test-audio-context-decode-audio-data-method-type-error-support';\nimport { createTestAudioContextOptionsSupport } from './factories/test-audio-context-options-support';\nimport { createTestAudioNodeConnectMethodSupport } from './factories/test-audio-node-connect-method-support';\nimport { createTestAudioWorkletProcessorNoOutputsSupport } from './factories/test-audio-worklet-processor-no-outputs-support';\nimport { createTestAudioWorkletProcessorPostMessageSupport } from './factories/test-audio-worklet-processor-post-message-support';\nimport { createTestChannelMergerNodeChannelCountSupport } from './factories/test-channel-merger-node-channel-count-support';\nimport { createTestConstantSourceNodeAccurateSchedulingSupport } from './factories/test-constant-source-node-accurate-scheduling-support';\nimport { createTestConvolverNodeBufferReassignabilitySupport } from './factories/test-convolver-node-buffer-reassignability-support';\nimport { createTestConvolverNodeChannelCountSupport } from './factories/test-convolver-node-channel-count-support';\nimport { createTestIsSecureContextSupport } from './factories/test-is-secure-context-support';\nimport { createTestMediaStreamAudioSourceNodeMediaStreamWithoutAudioTrackSupport } from './factories/test-media-stream-audio-source-node-media-stream-without-audio-track-support';\nimport { createTestOfflineAudioContextCurrentTimeSupport } from './factories/test-offline-audio-context-current-time-support';\nimport { createTestStereoPannerNodeDefaultValueSupport } from './factories/test-stereo-panner-node-default-value-support';\nimport { createUnknownError } from './factories/unknown-error';\nimport { createWaveShaperNodeConstructor } from './factories/wave-shaper-node-constructor';\nimport { createWaveShaperNodeRendererFactory } from './factories/wave-shaper-node-renderer-factory';\nimport { createWindow } from './factories/window';\nimport { createWrapAudioBufferCopyChannelMethods } from './factories/wrap-audio-buffer-copy-channel-methods';\nimport { createWrapAudioBufferCopyChannelMethodsOutOfBounds } from './factories/wrap-audio-buffer-copy-channel-methods-out-of-bounds';\nimport { createWrapAudioBufferSourceNodeStopMethodNullifiedBuffer } from './factories/wrap-audio-buffer-source-node-stop-method-nullified-buffer';\nimport { createWrapChannelMergerNode } from './factories/wrap-channel-merger-node';\nimport {\n    AUDIO_NODE_CONNECTIONS_STORE,\n    AUDIO_NODE_STORE,\n    AUDIO_PARAM_CONNECTIONS_STORE,\n    AUDIO_PARAM_STORE,\n    CONTEXT_STORE,\n    CYCLE_COUNTERS\n} from './globals';\nimport { connectNativeAudioNodeToNativeAudioNode } from './helpers/connect-native-audio-node-to-native-audio-node';\nimport { disconnectNativeAudioNodeFromNativeAudioNode } from './helpers/disconnect-native-audio-node-from-native-audio-node';\nimport { getAudioNodeConnections } from './helpers/get-audio-node-connections';\nimport { getAudioParamConnections } from './helpers/get-audio-param-connections';\nimport { getEventListenersOfAudioNode } from './helpers/get-event-listeners-of-audio-node';\nimport { getFirstSample } from './helpers/get-first-sample';\nimport { getNativeAudioNode } from './helpers/get-native-audio-node';\nimport { getNativeAudioParam } from './helpers/get-native-audio-param';\nimport { getValueForKey } from './helpers/get-value-for-key';\nimport { insertElementInSet } from './helpers/insert-element-in-set';\nimport { isActiveAudioNode } from './helpers/is-active-audio-node';\nimport { isDCCurve } from './helpers/is-dc-curve';\nimport { isPartOfACycle } from './helpers/is-part-of-a-cycle';\nimport { isPassiveAudioNode } from './helpers/is-passive-audio-node';\nimport { overwriteAccessors } from './helpers/overwrite-accessors';\nimport { pickElementFromSet } from './helpers/pick-element-from-set';\nimport { sanitizeAudioWorkletNodeOptions } from './helpers/sanitize-audio-worklet-node-options';\nimport { sanitizeChannelSplitterOptions } from './helpers/sanitize-channel-splitter-options';\nimport { sanitizePeriodicWaveOptions } from './helpers/sanitize-periodic-wave-options';\nimport { setValueAtTimeUntilPossible } from './helpers/set-value-at-time-until-possible';\nimport { testAudioBufferCopyChannelMethodsOutOfBoundsSupport } from './helpers/test-audio-buffer-copy-channel-methods-out-of-bounds-support';\nimport { testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport } from './helpers/test-audio-buffer-source-node-start-method-consecutive-calls-support';\nimport { testAudioBufferSourceNodeStartMethodOffsetClampingSupport } from './helpers/test-audio-buffer-source-node-start-method-offset-clamping-support';\nimport { testAudioBufferSourceNodeStopMethodNullifiedBufferSupport } from './helpers/test-audio-buffer-source-node-stop-method-nullified-buffer-support';\nimport { testAudioScheduledSourceNodeStartMethodNegativeParametersSupport } from './helpers/test-audio-scheduled-source-node-start-method-negative-parameters-support';\nimport { testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport } from './helpers/test-audio-scheduled-source-node-stop-method-consecutive-calls-support';\nimport { testAudioScheduledSourceNodeStopMethodNegativeParametersSupport } from './helpers/test-audio-scheduled-source-node-stop-method-negative-parameters-support';\nimport { testAudioWorkletNodeOptionsClonability } from './helpers/test-audio-worklet-node-options-clonability';\nimport { testDomExceptionConstructorSupport } from './helpers/test-dom-exception-constructor-support';\nimport { testPromiseSupport } from './helpers/test-promise-support';\nimport { testTransferablesSupport } from './helpers/test-transferables-support';\nimport { wrapAudioBufferSourceNodeStartMethodOffsetClamping } from './helpers/wrap-audio-buffer-source-node-start-method-offset-clamping';\nimport { wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls } from './helpers/wrap-audio-scheduled-source-node-stop-method-consecutive-calls';\nimport { wrapEventListener } from './helpers/wrap-event-listener';\nimport {\n    IAnalyserNode,\n    IAudioBuffer,\n    IAudioBufferSourceNode,\n    IAudioContext,\n    IAudioNode,\n    IAudioWorkletNode,\n    IBiquadFilterNode,\n    IConstantSourceNode,\n    IConvolverNode,\n    IDelayNode,\n    IDynamicsCompressorNode,\n    IGainNode,\n    IIIRFilterNode,\n    IMediaElementAudioSourceNode,\n    IMediaStreamAudioDestinationNode,\n    IMediaStreamAudioSourceNode,\n    IMediaStreamTrackAudioSourceNode,\n    IMinimalAudioContext,\n    IMinimalOfflineAudioContext,\n    IOfflineAudioContext,\n    IOfflineAudioContextConstructor,\n    IOscillatorNode,\n    IPannerNode,\n    IPeriodicWave,\n    IStereoPannerNode,\n    IWaveShaperNode\n} from './interfaces';\nimport {\n    TActiveAudioWorkletNodeInputsStore,\n    TAddAudioWorkletModuleFunction,\n    TAnalyserNodeConstructor,\n    TAudioBufferConstructor,\n    TAudioBufferSourceNodeConstructor,\n    TAudioBufferStore,\n    TAudioContextConstructor,\n    TAudioParamAudioNodeStore,\n    TAudioWorkletNodeConstructor,\n    TBackupOfflineAudioContextStore,\n    TBiquadFilterNodeConstructor,\n    TChannelMergerNodeConstructor,\n    TChannelSplitterNodeConstructor,\n    TConstantSourceNodeConstructor,\n    TContext,\n    TConvolverNodeConstructor,\n    TDecodeAudioDataFunction,\n    TDelayNodeConstructor,\n    TDynamicsCompressorNodeConstructor,\n    TGainNodeConstructor,\n    TIIRFilterNodeConstructor,\n    TMediaElementAudioSourceNodeConstructor,\n    TMediaStreamAudioDestinationNodeConstructor,\n    TMediaStreamAudioSourceNodeConstructor,\n    TMediaStreamTrackAudioSourceNodeConstructor,\n    TMinimalAudioContextConstructor,\n    TMinimalOfflineAudioContextConstructor,\n    TOscillatorNodeConstructor,\n    TPannerNodeConstructor,\n    TPeriodicWaveConstructor,\n    TStereoPannerNodeConstructor,\n    TUnrenderedAudioWorkletNodeStore,\n    TWaveShaperNodeConstructor\n} from './types';\n\n/*\n * @todo Explicitly referencing the barrel file seems to be necessary when enabling the\n * isolatedModules compiler option.\n */\nexport * from './interfaces/index';\nexport * from './types/index';\n\nconst addActiveInputConnectionToAudioNode = createAddActiveInputConnectionToAudioNode(insertElementInSet);\nconst addPassiveInputConnectionToAudioNode = createAddPassiveInputConnectionToAudioNode(insertElementInSet);\nconst deleteActiveInputConnectionToAudioNode = createDeleteActiveInputConnectionToAudioNode(pickElementFromSet);\nconst audioNodeTailTimeStore = new WeakMap();\nconst getAudioNodeTailTime = createGetAudioNodeTailTime(audioNodeTailTimeStore);\nconst cacheTestResult = createCacheTestResult(new Map(), new WeakMap());\nconst window = createWindow();\nconst createNativeAnalyserNode = createNativeAnalyserNodeFactory(cacheTestResult, createIndexSizeError);\nconst getAudioNodeRenderer = createGetAudioNodeRenderer(getAudioNodeConnections);\nconst renderInputsOfAudioNode = createRenderInputsOfAudioNode(getAudioNodeConnections, getAudioNodeRenderer, isPartOfACycle);\nconst createAnalyserNodeRenderer = createAnalyserNodeRendererFactory(createNativeAnalyserNode, getNativeAudioNode, renderInputsOfAudioNode);\nconst getNativeContext = createGetNativeContext(CONTEXT_STORE);\nconst nativeOfflineAudioContextConstructor = createNativeOfflineAudioContextConstructor(window);\nconst isNativeOfflineAudioContext = createIsNativeOfflineAudioContext(nativeOfflineAudioContextConstructor);\nconst audioParamAudioNodeStore: TAudioParamAudioNodeStore = new WeakMap();\nconst eventTargetConstructor = createEventTargetConstructor(wrapEventListener);\nconst nativeAudioContextConstructor = createNativeAudioContextConstructor(window);\nconst isNativeAudioContext = createIsNativeAudioContext(nativeAudioContextConstructor);\nconst isNativeAudioNode = createIsNativeAudioNode(window);\nconst isNativeAudioParam = createIsNativeAudioParam(window);\nconst nativeAudioWorkletNodeConstructor = createNativeAudioWorkletNodeConstructor(window);\nconst audioNodeConstructor = createAudioNodeConstructor(\n    createAddAudioNodeConnections(AUDIO_NODE_CONNECTIONS_STORE),\n    createAddConnectionToAudioNode(\n        addActiveInputConnectionToAudioNode,\n        addPassiveInputConnectionToAudioNode,\n        connectNativeAudioNodeToNativeAudioNode,\n        deleteActiveInputConnectionToAudioNode,\n        disconnectNativeAudioNodeFromNativeAudioNode,\n        getAudioNodeConnections,\n        getAudioNodeTailTime,\n        getEventListenersOfAudioNode,\n        getNativeAudioNode,\n        insertElementInSet,\n        isActiveAudioNode,\n        isPartOfACycle,\n        isPassiveAudioNode\n    ),\n    cacheTestResult,\n    createIncrementCycleCounterFactory(\n        CYCLE_COUNTERS,\n        disconnectNativeAudioNodeFromNativeAudioNode,\n        getAudioNodeConnections,\n        getNativeAudioNode,\n        getNativeAudioParam,\n        isActiveAudioNode\n    ),\n    createIndexSizeError,\n    createInvalidAccessError,\n    createNotSupportedError,\n    createDecrementCycleCounter(\n        connectNativeAudioNodeToNativeAudioNode,\n        CYCLE_COUNTERS,\n        getAudioNodeConnections,\n        getNativeAudioNode,\n        getNativeAudioParam,\n        getNativeContext,\n        isActiveAudioNode,\n        isNativeOfflineAudioContext\n    ),\n    createDetectCycles(audioParamAudioNodeStore, getAudioNodeConnections, getValueForKey),\n    eventTargetConstructor,\n    getNativeContext,\n    isNativeAudioContext,\n    isNativeAudioNode,\n    isNativeAudioParam,\n    isNativeOfflineAudioContext,\n    nativeAudioWorkletNodeConstructor\n);\nconst analyserNodeConstructor: TAnalyserNodeConstructor = createAnalyserNodeConstructor(\n    audioNodeConstructor,\n    createAnalyserNodeRenderer,\n    createIndexSizeError,\n    createNativeAnalyserNode,\n    getNativeContext,\n    isNativeOfflineAudioContext\n);\n\ntype analyserNodeConstructor<T extends TContext> = IAnalyserNode<T>;\n\nexport { analyserNodeConstructor as AnalyserNode };\n\nconst audioBufferStore: TAudioBufferStore = new WeakSet();\nconst nativeAudioBufferConstructor = createNativeAudioBufferConstructor(window);\nconst convertNumberToUnsignedLong = createConvertNumberToUnsignedLong(new Uint32Array(1));\nconst wrapAudioBufferCopyChannelMethods = createWrapAudioBufferCopyChannelMethods(convertNumberToUnsignedLong, createIndexSizeError);\nconst wrapAudioBufferCopyChannelMethodsOutOfBounds = createWrapAudioBufferCopyChannelMethodsOutOfBounds(convertNumberToUnsignedLong);\nconst audioBufferConstructor: TAudioBufferConstructor = createAudioBufferConstructor(\n    audioBufferStore,\n    cacheTestResult,\n    createNotSupportedError,\n    nativeAudioBufferConstructor,\n    nativeOfflineAudioContextConstructor,\n    createTestAudioBufferConstructorSupport(nativeAudioBufferConstructor),\n    wrapAudioBufferCopyChannelMethods,\n    wrapAudioBufferCopyChannelMethodsOutOfBounds\n);\n\ntype audioBufferConstructor = IAudioBuffer;\n\nexport { audioBufferConstructor as AudioBuffer };\n\nconst addSilentConnection = createAddSilentConnection(createNativeGainNode);\nconst renderInputsOfAudioParam = createRenderInputsOfAudioParam(getAudioNodeRenderer, getAudioParamConnections, isPartOfACycle);\nconst connectAudioParam = createConnectAudioParam(renderInputsOfAudioParam);\nconst createNativeAudioBufferSourceNode = createNativeAudioBufferSourceNodeFactory(\n    addSilentConnection,\n    cacheTestResult,\n    testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport,\n    testAudioBufferSourceNodeStartMethodOffsetClampingSupport,\n    testAudioBufferSourceNodeStopMethodNullifiedBufferSupport,\n    testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,\n    testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport,\n    testAudioScheduledSourceNodeStopMethodNegativeParametersSupport,\n    wrapAudioBufferSourceNodeStartMethodOffsetClamping,\n    createWrapAudioBufferSourceNodeStopMethodNullifiedBuffer(overwriteAccessors),\n    wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls\n);\nconst renderAutomation = createRenderAutomation(createGetAudioParamRenderer(getAudioParamConnections), renderInputsOfAudioParam);\nconst createAudioBufferSourceNodeRenderer = createAudioBufferSourceNodeRendererFactory(\n    connectAudioParam,\n    createNativeAudioBufferSourceNode,\n    getNativeAudioNode,\n    renderAutomation,\n    renderInputsOfAudioNode\n);\nconst createAudioParam = createAudioParamFactory(\n    createAddAudioParamConnections(AUDIO_PARAM_CONNECTIONS_STORE),\n    audioParamAudioNodeStore,\n    AUDIO_PARAM_STORE,\n    createAudioParamRenderer,\n    createCancelAndHoldAutomationEvent,\n    createCancelScheduledValuesAutomationEvent,\n    createExponentialRampToValueAutomationEvent,\n    createLinearRampToValueAutomationEvent,\n    createSetTargetAutomationEvent,\n    createSetValueAutomationEvent,\n    createSetValueCurveAutomationEvent,\n    nativeAudioContextConstructor,\n    setValueAtTimeUntilPossible\n);\nconst audioBufferSourceNodeConstructor: TAudioBufferSourceNodeConstructor = createAudioBufferSourceNodeConstructor(\n    audioNodeConstructor,\n    createAudioBufferSourceNodeRenderer,\n    createAudioParam,\n    createInvalidStateError,\n    createNativeAudioBufferSourceNode,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    wrapEventListener\n);\n\ntype audioBufferSourceNodeConstructor<T extends TContext> = IAudioBufferSourceNode<T>;\n\nexport { audioBufferSourceNodeConstructor as AudioBufferSourceNode };\n\nconst audioDestinationNodeConstructor = createAudioDestinationNodeConstructor(\n    audioNodeConstructor,\n    createAudioDestinationNodeRenderer,\n    createIndexSizeError,\n    createInvalidStateError,\n    createNativeAudioDestinationNodeFactory(createNativeGainNode, overwriteAccessors),\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    renderInputsOfAudioNode\n);\nconst createBiquadFilterNodeRenderer = createBiquadFilterNodeRendererFactory(\n    connectAudioParam,\n    createNativeBiquadFilterNode,\n    getNativeAudioNode,\n    renderAutomation,\n    renderInputsOfAudioNode\n);\nconst setAudioNodeTailTime = createSetAudioNodeTailTime(audioNodeTailTimeStore);\nconst biquadFilterNodeConstructor: TBiquadFilterNodeConstructor = createBiquadFilterNodeConstructor(\n    audioNodeConstructor,\n    createAudioParam,\n    createBiquadFilterNodeRenderer,\n    createInvalidAccessError,\n    createNativeBiquadFilterNode,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    setAudioNodeTailTime\n);\nconst monitorConnections = createMonitorConnections(insertElementInSet, isNativeAudioNode);\nconst wrapChannelMergerNode = createWrapChannelMergerNode(createInvalidStateError, monitorConnections);\nconst createNativeChannelMergerNode = createNativeChannelMergerNodeFactory(nativeAudioContextConstructor, wrapChannelMergerNode);\nconst createChannelMergerNodeRenderer = createChannelMergerNodeRendererFactory(\n    createNativeChannelMergerNode,\n    getNativeAudioNode,\n    renderInputsOfAudioNode\n);\nconst channelMergerNodeConstructor: TChannelMergerNodeConstructor = createChannelMergerNodeConstructor(\n    audioNodeConstructor,\n    createChannelMergerNodeRenderer,\n    createNativeChannelMergerNode,\n    getNativeContext,\n    isNativeOfflineAudioContext\n);\nconst createChannelSplitterNodeRenderer = createChannelSplitterNodeRendererFactory(\n    createNativeChannelSplitterNode,\n    getNativeAudioNode,\n    renderInputsOfAudioNode\n);\nconst channelSplitterNodeConstructor: TChannelSplitterNodeConstructor = createChannelSplitterNodeConstructor(\n    audioNodeConstructor,\n    createChannelSplitterNodeRenderer,\n    createNativeChannelSplitterNode,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    sanitizeChannelSplitterOptions\n);\nconst createNativeConstantSourceNodeFaker = createNativeConstantSourceNodeFakerFactory(\n    addSilentConnection,\n    createNativeAudioBufferSourceNode,\n    createNativeGainNode,\n    monitorConnections\n);\nconst createNativeConstantSourceNode = createNativeConstantSourceNodeFactory(\n    addSilentConnection,\n    cacheTestResult,\n    createNativeConstantSourceNodeFaker,\n    testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,\n    testAudioScheduledSourceNodeStopMethodNegativeParametersSupport\n);\nconst createConstantSourceNodeRenderer = createConstantSourceNodeRendererFactory(\n    connectAudioParam,\n    createNativeConstantSourceNode,\n    getNativeAudioNode,\n    renderAutomation,\n    renderInputsOfAudioNode\n);\nconst constantSourceNodeConstructor: TConstantSourceNodeConstructor = createConstantSourceNodeConstructor(\n    audioNodeConstructor,\n    createAudioParam,\n    createConstantSourceNodeRenderer,\n    createNativeConstantSourceNode,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    wrapEventListener\n);\nconst createNativeConvolverNode = createNativeConvolverNodeFactory(createNotSupportedError, overwriteAccessors);\nconst createConvolverNodeRenderer = createConvolverNodeRendererFactory(\n    createNativeConvolverNode,\n    getNativeAudioNode,\n    renderInputsOfAudioNode\n);\nconst convolverNodeConstructor: TConvolverNodeConstructor = createConvolverNodeConstructor(\n    audioNodeConstructor,\n    createConvolverNodeRenderer,\n    createNativeConvolverNode,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    setAudioNodeTailTime\n);\nconst createDelayNodeRenderer = createDelayNodeRendererFactory(\n    connectAudioParam,\n    createNativeDelayNode,\n    getNativeAudioNode,\n    renderAutomation,\n    renderInputsOfAudioNode\n);\nconst delayNodeConstructor: TDelayNodeConstructor = createDelayNodeConstructor(\n    audioNodeConstructor,\n    createAudioParam,\n    createDelayNodeRenderer,\n    createNativeDelayNode,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    setAudioNodeTailTime\n);\nconst createNativeDynamicsCompressorNode = createNativeDynamicsCompressorNodeFactory(createNotSupportedError);\nconst createDynamicsCompressorNodeRenderer = createDynamicsCompressorNodeRendererFactory(\n    connectAudioParam,\n    createNativeDynamicsCompressorNode,\n    getNativeAudioNode,\n    renderAutomation,\n    renderInputsOfAudioNode\n);\nconst dynamicsCompressorNodeConstructor: TDynamicsCompressorNodeConstructor = createDynamicsCompressorNodeConstructor(\n    audioNodeConstructor,\n    createAudioParam,\n    createDynamicsCompressorNodeRenderer,\n    createNativeDynamicsCompressorNode,\n    createNotSupportedError,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    setAudioNodeTailTime\n);\nconst createGainNodeRenderer = createGainNodeRendererFactory(\n    connectAudioParam,\n    createNativeGainNode,\n    getNativeAudioNode,\n    renderAutomation,\n    renderInputsOfAudioNode\n);\nconst gainNodeConstructor: TGainNodeConstructor = createGainNodeConstructor(\n    audioNodeConstructor,\n    createAudioParam,\n    createGainNodeRenderer,\n    createNativeGainNode,\n    getNativeContext,\n    isNativeOfflineAudioContext\n);\nconst createNativeIIRFilterNodeFaker = createNativeIIRFilterNodeFakerFactory(\n    createInvalidAccessError,\n    createInvalidStateError,\n    createNativeScriptProcessorNode,\n    createNotSupportedError\n);\nconst renderNativeOfflineAudioContext = createRenderNativeOfflineAudioContext(\n    cacheTestResult,\n    createNativeGainNode,\n    createNativeScriptProcessorNode,\n    createTestOfflineAudioContextCurrentTimeSupport(createNativeGainNode, nativeOfflineAudioContextConstructor)\n);\nconst createIIRFilterNodeRenderer = createIIRFilterNodeRendererFactory(\n    createNativeAudioBufferSourceNode,\n    getNativeAudioNode,\n    nativeOfflineAudioContextConstructor,\n    renderInputsOfAudioNode,\n    renderNativeOfflineAudioContext\n);\nconst createNativeIIRFilterNode = createNativeIIRFilterNodeFactory(createNativeIIRFilterNodeFaker);\nconst iIRFilterNodeConstructor: TIIRFilterNodeConstructor = createIIRFilterNodeConstructor(\n    audioNodeConstructor,\n    createNativeIIRFilterNode,\n    createIIRFilterNodeRenderer,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    setAudioNodeTailTime\n);\nconst createAudioListener = createAudioListenerFactory(\n    createAudioParam,\n    createNativeChannelMergerNode,\n    createNativeConstantSourceNode,\n    createNativeScriptProcessorNode,\n    createNotSupportedError,\n    getFirstSample,\n    isNativeOfflineAudioContext,\n    overwriteAccessors\n);\nconst unrenderedAudioWorkletNodeStore: TUnrenderedAudioWorkletNodeStore = new WeakMap();\nconst minimalBaseAudioContextConstructor = createMinimalBaseAudioContextConstructor(\n    audioDestinationNodeConstructor,\n    createAudioListener,\n    eventTargetConstructor,\n    isNativeOfflineAudioContext,\n    unrenderedAudioWorkletNodeStore,\n    wrapEventListener\n);\nconst createNativeOscillatorNode = createNativeOscillatorNodeFactory(\n    addSilentConnection,\n    cacheTestResult,\n    testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,\n    testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport,\n    testAudioScheduledSourceNodeStopMethodNegativeParametersSupport,\n    wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls\n);\nconst createOscillatorNodeRenderer = createOscillatorNodeRendererFactory(\n    connectAudioParam,\n    createNativeOscillatorNode,\n    getNativeAudioNode,\n    renderAutomation,\n    renderInputsOfAudioNode\n);\nconst oscillatorNodeConstructor: TOscillatorNodeConstructor = createOscillatorNodeConstructor(\n    audioNodeConstructor,\n    createAudioParam,\n    createNativeOscillatorNode,\n    createOscillatorNodeRenderer,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    wrapEventListener\n);\nconst createConnectedNativeAudioBufferSourceNode = createConnectedNativeAudioBufferSourceNodeFactory(createNativeAudioBufferSourceNode);\nconst createNativeWaveShaperNodeFaker = createNativeWaveShaperNodeFakerFactory(\n    createConnectedNativeAudioBufferSourceNode,\n    createInvalidStateError,\n    createNativeGainNode,\n    isDCCurve,\n    monitorConnections\n);\nconst createNativeWaveShaperNode = createNativeWaveShaperNodeFactory(\n    createConnectedNativeAudioBufferSourceNode,\n    createInvalidStateError,\n    createNativeWaveShaperNodeFaker,\n    isDCCurve,\n    monitorConnections,\n    nativeAudioContextConstructor,\n    overwriteAccessors\n);\nconst createNativePannerNodeFaker = createNativePannerNodeFakerFactory(\n    connectNativeAudioNodeToNativeAudioNode,\n    createInvalidStateError,\n    createNativeChannelMergerNode,\n    createNativeGainNode,\n    createNativeScriptProcessorNode,\n    createNativeWaveShaperNode,\n    createNotSupportedError,\n    disconnectNativeAudioNodeFromNativeAudioNode,\n    getFirstSample,\n    monitorConnections\n);\nconst createNativePannerNode = createNativePannerNodeFactory(createNativePannerNodeFaker);\nconst createPannerNodeRenderer = createPannerNodeRendererFactory(\n    connectAudioParam,\n    createNativeChannelMergerNode,\n    createNativeConstantSourceNode,\n    createNativeGainNode,\n    createNativePannerNode,\n    getNativeAudioNode,\n    nativeOfflineAudioContextConstructor,\n    renderAutomation,\n    renderInputsOfAudioNode,\n    renderNativeOfflineAudioContext\n);\nconst pannerNodeConstructor: TPannerNodeConstructor = createPannerNodeConstructor(\n    audioNodeConstructor,\n    createAudioParam,\n    createNativePannerNode,\n    createPannerNodeRenderer,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    setAudioNodeTailTime\n);\nconst createNativePeriodicWave = createNativePeriodicWaveFactory(createIndexSizeError);\nconst periodicWaveConstructor: TPeriodicWaveConstructor = createPeriodicWaveConstructor(\n    createNativePeriodicWave,\n    getNativeContext,\n    new WeakSet(),\n    sanitizePeriodicWaveOptions\n);\nconst nativeStereoPannerNodeFakerFactory = createNativeStereoPannerNodeFakerFactory(\n    createNativeChannelMergerNode,\n    createNativeChannelSplitterNode,\n    createNativeGainNode,\n    createNativeWaveShaperNode,\n    createNotSupportedError,\n    monitorConnections\n);\nconst createNativeStereoPannerNode = createNativeStereoPannerNodeFactory(nativeStereoPannerNodeFakerFactory, createNotSupportedError);\nconst createStereoPannerNodeRenderer = createStereoPannerNodeRendererFactory(\n    connectAudioParam,\n    createNativeStereoPannerNode,\n    getNativeAudioNode,\n    renderAutomation,\n    renderInputsOfAudioNode\n);\nconst stereoPannerNodeConstructor: TStereoPannerNodeConstructor = createStereoPannerNodeConstructor(\n    audioNodeConstructor,\n    createAudioParam,\n    createNativeStereoPannerNode,\n    createStereoPannerNodeRenderer,\n    getNativeContext,\n    isNativeOfflineAudioContext\n);\nconst createWaveShaperNodeRenderer = createWaveShaperNodeRendererFactory(\n    createNativeWaveShaperNode,\n    getNativeAudioNode,\n    renderInputsOfAudioNode\n);\nconst waveShaperNodeConstructor: TWaveShaperNodeConstructor = createWaveShaperNodeConstructor(\n    audioNodeConstructor,\n    createInvalidStateError,\n    createNativeWaveShaperNode,\n    createWaveShaperNodeRenderer,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    setAudioNodeTailTime\n);\nconst isSecureContext = createIsSecureContext(window);\nconst exposeCurrentFrameAndCurrentTime = createExposeCurrentFrameAndCurrentTime(window);\nconst backupOfflineAudioContextStore: TBackupOfflineAudioContextStore = new WeakMap();\nconst getOrCreateBackupOfflineAudioContext = createGetOrCreateBackupOfflineAudioContext(\n    backupOfflineAudioContextStore,\n    nativeOfflineAudioContextConstructor\n);\n\n// The addAudioWorkletModule() function is only available in a SecureContext.\nexport const addAudioWorkletModule: undefined | TAddAudioWorkletModuleFunction = isSecureContext\n    ? createAddAudioWorkletModule(\n          cacheTestResult,\n          createNotSupportedError,\n          createEvaluateSource(window),\n          exposeCurrentFrameAndCurrentTime,\n          createFetchSource(createAbortError),\n          getNativeContext,\n          getOrCreateBackupOfflineAudioContext,\n          isNativeOfflineAudioContext,\n          nativeAudioWorkletNodeConstructor,\n          new WeakMap(),\n          new WeakMap(),\n          createTestAudioWorkletProcessorPostMessageSupport(nativeAudioWorkletNodeConstructor, nativeOfflineAudioContextConstructor),\n          // @todo window is guaranteed to be defined because isSecureContext checks that as well.\n          <NonNullable<typeof window>>window\n      )\n    : undefined;\n\nconst isNativeContext = createIsNativeContext(isNativeAudioContext, isNativeOfflineAudioContext);\n\nexport const decodeAudioData: TDecodeAudioDataFunction = createDecodeAudioData(\n    audioBufferStore,\n    cacheTestResult,\n    createDataCloneError,\n    createEncodingError,\n    new WeakSet(),\n    getNativeContext,\n    isNativeContext,\n    testAudioBufferCopyChannelMethodsOutOfBoundsSupport,\n    testPromiseSupport,\n    wrapAudioBufferCopyChannelMethods,\n    wrapAudioBufferCopyChannelMethodsOutOfBounds\n);\n\nconst baseAudioContextConstructor = createBaseAudioContextConstructor(\n    addAudioWorkletModule,\n    analyserNodeConstructor,\n    audioBufferConstructor,\n    audioBufferSourceNodeConstructor,\n    biquadFilterNodeConstructor,\n    channelMergerNodeConstructor,\n    channelSplitterNodeConstructor,\n    constantSourceNodeConstructor,\n    convolverNodeConstructor,\n    decodeAudioData,\n    delayNodeConstructor,\n    dynamicsCompressorNodeConstructor,\n    gainNodeConstructor,\n    iIRFilterNodeConstructor,\n    minimalBaseAudioContextConstructor,\n    oscillatorNodeConstructor,\n    pannerNodeConstructor,\n    periodicWaveConstructor,\n    stereoPannerNodeConstructor,\n    waveShaperNodeConstructor\n);\nconst mediaElementAudioSourceNodeConstructor: TMediaElementAudioSourceNodeConstructor = createMediaElementAudioSourceNodeConstructor(\n    audioNodeConstructor,\n    createNativeMediaElementAudioSourceNode,\n    getNativeContext,\n    isNativeOfflineAudioContext\n);\nconst mediaStreamAudioDestinationNodeConstructor: TMediaStreamAudioDestinationNodeConstructor =\n    createMediaStreamAudioDestinationNodeConstructor(\n        audioNodeConstructor,\n        createNativeMediaStreamAudioDestinationNode,\n        getNativeContext,\n        isNativeOfflineAudioContext\n    );\nconst mediaStreamAudioSourceNodeConstructor: TMediaStreamAudioSourceNodeConstructor = createMediaStreamAudioSourceNodeConstructor(\n    audioNodeConstructor,\n    createNativeMediaStreamAudioSourceNode,\n    getNativeContext,\n    isNativeOfflineAudioContext\n);\nconst createNativeMediaStreamTrackAudioSourceNode = createNativeMediaStreamTrackAudioSourceNodeFactory(\n    createInvalidStateError,\n    isNativeOfflineAudioContext\n);\nconst mediaStreamTrackAudioSourceNodeConstructor: TMediaStreamTrackAudioSourceNodeConstructor =\n    createMediaStreamTrackAudioSourceNodeConstructor(audioNodeConstructor, createNativeMediaStreamTrackAudioSourceNode, getNativeContext);\nconst audioContextConstructor: TAudioContextConstructor = createAudioContextConstructor(\n    baseAudioContextConstructor,\n    createInvalidStateError,\n    createNotSupportedError,\n    createUnknownError,\n    mediaElementAudioSourceNodeConstructor,\n    mediaStreamAudioDestinationNodeConstructor,\n    mediaStreamAudioSourceNodeConstructor,\n    mediaStreamTrackAudioSourceNodeConstructor,\n    nativeAudioContextConstructor\n);\n\ntype audioContextConstructor = IAudioContext;\n\nexport { audioContextConstructor as AudioContext };\n\nconst getUnrenderedAudioWorkletNodes = createGetUnrenderedAudioWorkletNodes(unrenderedAudioWorkletNodeStore);\nconst addUnrenderedAudioWorkletNode = createAddUnrenderedAudioWorkletNode(getUnrenderedAudioWorkletNodes);\nconst connectMultipleOutputs = createConnectMultipleOutputs(createIndexSizeError);\nconst deleteUnrenderedAudioWorkletNode = createDeleteUnrenderedAudioWorkletNode(getUnrenderedAudioWorkletNodes);\nconst disconnectMultipleOutputs = createDisconnectMultipleOutputs(createIndexSizeError);\nconst activeAudioWorkletNodeInputsStore: TActiveAudioWorkletNodeInputsStore = new WeakMap();\nconst getActiveAudioWorkletNodeInputs = createGetActiveAudioWorkletNodeInputs(activeAudioWorkletNodeInputsStore, getValueForKey);\nconst createNativeAudioWorkletNodeFaker = createNativeAudioWorkletNodeFakerFactory(\n    connectMultipleOutputs,\n    createIndexSizeError,\n    createInvalidStateError,\n    createNativeChannelMergerNode,\n    createNativeChannelSplitterNode,\n    createNativeConstantSourceNode,\n    createNativeGainNode,\n    createNativeScriptProcessorNode,\n    createNotSupportedError,\n    disconnectMultipleOutputs,\n    exposeCurrentFrameAndCurrentTime,\n    getActiveAudioWorkletNodeInputs,\n    monitorConnections\n);\nconst createNativeAudioWorkletNode = createNativeAudioWorkletNodeFactory(\n    createInvalidStateError,\n    createNativeAudioWorkletNodeFaker,\n    createNativeGainNode,\n    createNotSupportedError,\n    monitorConnections\n);\nconst createAudioWorkletNodeRenderer = createAudioWorkletNodeRendererFactory(\n    connectAudioParam,\n    connectMultipleOutputs,\n    createNativeAudioBufferSourceNode,\n    createNativeChannelMergerNode,\n    createNativeChannelSplitterNode,\n    createNativeConstantSourceNode,\n    createNativeGainNode,\n    deleteUnrenderedAudioWorkletNode,\n    disconnectMultipleOutputs,\n    exposeCurrentFrameAndCurrentTime,\n    getNativeAudioNode,\n    nativeAudioWorkletNodeConstructor,\n    nativeOfflineAudioContextConstructor,\n    renderAutomation,\n    renderInputsOfAudioNode,\n    renderNativeOfflineAudioContext\n);\nconst getBackupOfflineAudioContext = createGetBackupOfflineAudioContext(backupOfflineAudioContextStore);\nconst setActiveAudioWorkletNodeInputs = createSetActiveAudioWorkletNodeInputs(activeAudioWorkletNodeInputsStore);\n\n// The AudioWorkletNode constructor is only available in a SecureContext.\nconst audioWorkletNodeConstructor: undefined | TAudioWorkletNodeConstructor = isSecureContext\n    ? createAudioWorkletNodeConstructor(\n          addUnrenderedAudioWorkletNode,\n          audioNodeConstructor,\n          createAudioParam,\n          createAudioWorkletNodeRenderer,\n          createNativeAudioWorkletNode,\n          getAudioNodeConnections,\n          getBackupOfflineAudioContext,\n          getNativeContext,\n          isNativeOfflineAudioContext,\n          nativeAudioWorkletNodeConstructor,\n          sanitizeAudioWorkletNodeOptions,\n          setActiveAudioWorkletNodeInputs,\n          testAudioWorkletNodeOptionsClonability,\n          wrapEventListener\n      )\n    : undefined;\n\ntype audioWorkletNodeConstructor<T extends TContext> = undefined | IAudioWorkletNode<T>;\n\nexport { audioWorkletNodeConstructor as AudioWorkletNode };\n\ntype biquadFilterNodeConstructor<T extends TContext> = IBiquadFilterNode<T>;\n\nexport { biquadFilterNodeConstructor as BiquadFilterNode };\n\ntype channelMergerNodeConstructor<T extends TContext> = IAudioNode<T>;\n\nexport { channelMergerNodeConstructor as ChannelMergerNode };\n\ntype channelSplitterNodeConstructor<T extends TContext> = IAudioNode<T>;\n\nexport { channelSplitterNodeConstructor as ChannelSplitterNode };\n\ntype constantSourceNodeConstructor<T extends TContext> = IConstantSourceNode<T>;\n\nexport { convolverNodeConstructor as ConvolverNode };\n\ntype convolverNodeConstructor<T extends TContext> = IConvolverNode<T>;\n\nexport { constantSourceNodeConstructor as ConstantSourceNode };\n\ntype delayNodeConstructor<T extends TContext> = IDelayNode<T>;\n\nexport { delayNodeConstructor as DelayNode };\n\ntype dynamicsCompressorNodeConstructor<T extends TContext> = IDynamicsCompressorNode<T>;\n\nexport { dynamicsCompressorNodeConstructor as DynamicsCompressorNode };\n\ntype gainNodeConstructor<T extends TContext> = IGainNode<T>;\n\nexport { gainNodeConstructor as GainNode };\n\ntype iIRFilterNodeConstructor<T extends TContext> = IIIRFilterNode<T>;\n\nexport { iIRFilterNodeConstructor as IIRFilterNode };\n\ntype mediaElementAudioSourceNodeConstructor<T extends IAudioContext | IMinimalAudioContext> = IMediaElementAudioSourceNode<T>;\n\nexport { mediaElementAudioSourceNodeConstructor as MediaElementAudioSourceNode };\n\ntype mediaStreamAudioDestinationNodeConstructor<T extends IAudioContext | IMinimalAudioContext> = IMediaStreamAudioDestinationNode<T>;\n\nexport { mediaStreamAudioDestinationNodeConstructor as MediaStreamAudioDestinationNode };\n\ntype mediaStreamAudioSourceNodeConstructor<T extends IAudioContext | IMinimalAudioContext> = IMediaStreamAudioSourceNode<T>;\n\nexport { mediaStreamAudioSourceNodeConstructor as MediaStreamAudioSourceNode };\n\ntype mediaStreamTrackAudioSourceNodeConstructor<T extends IAudioContext | IMinimalAudioContext> = IMediaStreamTrackAudioSourceNode<T>;\n\nexport { mediaStreamTrackAudioSourceNodeConstructor as MediaStreamTrackAudioSourceNode };\n\nconst minimalAudioContextConstructor: TMinimalAudioContextConstructor = createMinimalAudioContextConstructor(\n    createInvalidStateError,\n    createNotSupportedError,\n    createUnknownError,\n    minimalBaseAudioContextConstructor,\n    nativeAudioContextConstructor\n);\n\ntype minimalAudioContextConstructor = IMinimalAudioContext;\n\nexport { minimalAudioContextConstructor as MinimalAudioContext };\n\nconst createNativeOfflineAudioContext = createCreateNativeOfflineAudioContext(\n    createNotSupportedError,\n    nativeOfflineAudioContextConstructor\n);\nconst startRendering = createStartRendering(\n    audioBufferStore,\n    cacheTestResult,\n    getAudioNodeRenderer,\n    getUnrenderedAudioWorkletNodes,\n    renderNativeOfflineAudioContext,\n    testAudioBufferCopyChannelMethodsOutOfBoundsSupport,\n    wrapAudioBufferCopyChannelMethods,\n    wrapAudioBufferCopyChannelMethodsOutOfBounds\n);\nconst minimalOfflineAudioContextConstructor: TMinimalOfflineAudioContextConstructor = createMinimalOfflineAudioContextConstructor(\n    cacheTestResult,\n    createInvalidStateError,\n    createNativeOfflineAudioContext,\n    minimalBaseAudioContextConstructor,\n    startRendering\n);\n\ntype minimalOfflineAudioContextConstructor = IMinimalOfflineAudioContext;\n\nexport { minimalOfflineAudioContextConstructor as MinimalOfflineAudioContext };\n\nconst offlineAudioContextConstructor: IOfflineAudioContextConstructor = createOfflineAudioContextConstructor(\n    baseAudioContextConstructor,\n    cacheTestResult,\n    createInvalidStateError,\n    createNativeOfflineAudioContext,\n    startRendering\n);\n\ntype offlineAudioContextConstructor = IOfflineAudioContext;\n\nexport { offlineAudioContextConstructor as OfflineAudioContext };\n\ntype oscillatorNodeConstructor<T extends TContext> = IOscillatorNode<T>;\n\nexport { oscillatorNodeConstructor as OscillatorNode };\n\ntype pannerNodeConstructor<T extends TContext> = IPannerNode<T>;\n\nexport { pannerNodeConstructor as PannerNode };\n\ntype periodicWaveConstructor = IPeriodicWave;\n\nexport { periodicWaveConstructor as PeriodicWave };\n\ntype stereoPannerNodeConstructor<T extends TContext> = IStereoPannerNode<T>;\n\nexport { stereoPannerNodeConstructor as StereoPannerNode };\n\ntype waveShaperNodeConstructor<T extends TContext> = IWaveShaperNode<T>;\n\nexport { waveShaperNodeConstructor as WaveShaperNode };\n\nexport const isAnyAudioContext = createIsAnyAudioContext(CONTEXT_STORE, isNativeAudioContext);\n\nexport const isAnyAudioNode = createIsAnyAudioNode(AUDIO_NODE_STORE, isNativeAudioNode);\n\nexport const isAnyAudioParam = createIsAnyAudioParam(AUDIO_PARAM_STORE, isNativeAudioParam);\n\nexport const isAnyOfflineAudioContext = createIsAnyOfflineAudioContext(CONTEXT_STORE, isNativeOfflineAudioContext);\n\nexport const isSupported = () =>\n    createIsSupportedPromise(\n        cacheTestResult,\n        createTestAudioBufferCopyChannelMethodsSubarraySupport(nativeOfflineAudioContextConstructor),\n        createTestAudioContextCloseMethodSupport(nativeAudioContextConstructor),\n        createTestAudioContextDecodeAudioDataMethodTypeErrorSupport(nativeOfflineAudioContextConstructor),\n        createTestAudioContextOptionsSupport(nativeAudioContextConstructor),\n        createTestAudioNodeConnectMethodSupport(nativeOfflineAudioContextConstructor),\n        createTestAudioWorkletProcessorNoOutputsSupport(nativeAudioWorkletNodeConstructor, nativeOfflineAudioContextConstructor),\n        createTestChannelMergerNodeChannelCountSupport(nativeOfflineAudioContextConstructor),\n        createTestConstantSourceNodeAccurateSchedulingSupport(nativeOfflineAudioContextConstructor),\n        createTestConvolverNodeBufferReassignabilitySupport(nativeOfflineAudioContextConstructor),\n        createTestConvolverNodeChannelCountSupport(nativeOfflineAudioContextConstructor),\n        testDomExceptionConstructorSupport,\n        createTestIsSecureContextSupport(window),\n        createTestMediaStreamAudioSourceNodeMediaStreamWithoutAudioTrackSupport(nativeAudioContextConstructor),\n        createTestStereoPannerNodeDefaultValueSupport(nativeOfflineAudioContextConstructor),\n        testTransferablesSupport\n    );\n","import { TAddActiveInputConnectionToAudioNodeFactory } from '../types/add-active-input-connection-to-audio-node-factory';\n\nexport const createAddActiveInputConnectionToAudioNode: TAddActiveInputConnectionToAudioNodeFactory = (insertElementInSet) => {\n    return (activeInputs, source, [output, input, eventListener], ignoreDuplicates) => {\n        insertElementInSet(\n            activeInputs[input],\n            [source, output, eventListener],\n            (activeInputConnection) => activeInputConnection[0] === source && activeInputConnection[1] === output,\n            ignoreDuplicates\n        );\n    };\n};\n","import { TAddPassiveInputConnectionToAudioNodeFactory } from '../types';\n\nexport const createAddPassiveInputConnectionToAudioNode: TAddPassiveInputConnectionToAudioNodeFactory = (insertElementInSet) => {\n    return (passiveInputs, input, [source, output, eventListener], ignoreDuplicates) => {\n        const passiveInputConnections = passiveInputs.get(source);\n\n        if (passiveInputConnections === undefined) {\n            passiveInputs.set(source, new Set([[output, input, eventListener]]));\n        } else {\n            insertElementInSet(\n                passiveInputConnections,\n                [output, input, eventListener],\n                (passiveInputConnection) => passiveInputConnection[0] === output && passiveInputConnection[1] === input,\n                ignoreDuplicates\n            );\n        }\n    };\n};\n","import { TDeleteActiveInputConnectionToAudioNodeFactory } from '../types';\n\nexport const createDeleteActiveInputConnectionToAudioNode: TDeleteActiveInputConnectionToAudioNodeFactory = (pickElementFromSet) => {\n    return (activeInputs, source, output, input) => {\n        return pickElementFromSet(\n            activeInputs[input],\n            (activeInputConnection) => activeInputConnection[0] === source && activeInputConnection[1] === output\n        );\n    };\n};\n","import { TGetAudioNodeTailTimeFactory } from '../types';\n\nexport const createGetAudioNodeTailTime: TGetAudioNodeTailTimeFactory = (audioNodeTailTimeStore) => {\n    return (audioNode) => audioNodeTailTimeStore.get(audioNode) ?? 0;\n};\n","import { TCacheTestResultFactory } from '../types';\n\nexport const createCacheTestResult: TCacheTestResultFactory = (ongoingTests, testResults) => {\n    return (tester, test) => {\n        const cachedTestResult = testResults.get(tester);\n\n        if (cachedTestResult !== undefined) {\n            return cachedTestResult;\n        }\n\n        const ongoingTest = ongoingTests.get(tester);\n\n        if (ongoingTest !== undefined) {\n            return ongoingTest;\n        }\n\n        try {\n            const synchronousTestResult = test();\n\n            if (synchronousTestResult instanceof Promise) {\n                ongoingTests.set(tester, synchronousTestResult);\n\n                return synchronousTestResult\n                    .catch(() => false)\n                    .then((finalTestResult) => {\n                        ongoingTests.delete(tester);\n                        testResults.set(tester, finalTestResult);\n\n                        return finalTestResult;\n                    });\n            }\n\n            testResults.set(tester, synchronousTestResult);\n\n            return synchronousTestResult;\n        } catch {\n            testResults.set(tester, false);\n\n            return false;\n        }\n    };\n};\n","import { TWindow, TWindowFactory } from '../types';\n\nexport const createWindow: TWindowFactory = () => (typeof window === 'undefined' ? null : <TWindow>window);\n","import { assignNativeAudioNodeOption } from '../helpers/assign-native-audio-node-option';\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { testAnalyserNodeGetFloatTimeDomainDataMethodSupport } from '../helpers/test-analyser-node-get-float-time-domain-data-method-support';\nimport { wrapAnalyserNodeGetFloatTimeDomainDataMethod } from '../helpers/wrap-analyser-node-get-float-time-domain-data-method';\nimport { TNativeAnalyserNodeFactoryFactory } from '../types';\n\nexport const createNativeAnalyserNodeFactory: TNativeAnalyserNodeFactoryFactory = (cacheTestResult, createIndexSizeError) => {\n    return (nativeContext, options) => {\n        const nativeAnalyserNode = nativeContext.createAnalyser();\n\n        // Bug #37: Firefox does not create an AnalyserNode with the default properties.\n        assignNativeAudioNodeOptions(nativeAnalyserNode, options);\n\n        // Bug #118: Safari does not throw an error if maxDecibels is not more than minDecibels.\n        if (!(options.maxDecibels > options.minDecibels)) {\n            throw createIndexSizeError();\n        }\n\n        assignNativeAudioNodeOption(nativeAnalyserNode, options, 'fftSize');\n        assignNativeAudioNodeOption(nativeAnalyserNode, options, 'maxDecibels');\n        assignNativeAudioNodeOption(nativeAnalyserNode, options, 'minDecibels');\n        assignNativeAudioNodeOption(nativeAnalyserNode, options, 'smoothingTimeConstant');\n\n        // Bug #36: Safari does not support getFloatTimeDomainData() yet.\n        if (\n            !cacheTestResult(testAnalyserNodeGetFloatTimeDomainDataMethodSupport, () =>\n                testAnalyserNodeGetFloatTimeDomainDataMethodSupport(nativeAnalyserNode)\n            )\n        ) {\n            wrapAnalyserNodeGetFloatTimeDomainDataMethod(nativeAnalyserNode);\n        }\n\n        return nativeAnalyserNode;\n    };\n};\n","import { TNativeAnalyserNode } from '../types';\n\nexport const wrapAnalyserNodeGetFloatTimeDomainDataMethod = (nativeAnalyserNode: TNativeAnalyserNode): void => {\n    nativeAnalyserNode.getFloatTimeDomainData = (array: Float32Array) => {\n        const byteTimeDomainData = new Uint8Array(array.length);\n\n        nativeAnalyserNode.getByteTimeDomainData(byteTimeDomainData);\n\n        const length = Math.max(byteTimeDomainData.length, nativeAnalyserNode.fftSize);\n\n        for (let i = 0; i < length; i += 1) {\n            array[i] = (byteTimeDomainData[i] - 128) * 0.0078125;\n        }\n\n        return array;\n    };\n};\n","import { IAudioNode, IAudioNodeRenderer, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\nimport { TGetAudioNodeRendererFactory } from '../types';\n\nexport const createGetAudioNodeRenderer: TGetAudioNodeRendererFactory = (getAudioNodeConnections) => {\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>(\n        audioNode: IAudioNode<T>\n    ): IAudioNodeRenderer<T, IAudioNode<T>> => {\n        const audioNodeConnections = getAudioNodeConnections(audioNode);\n\n        if (audioNodeConnections.renderer === null) {\n            throw new Error('Missing the renderer of the given AudioNode in the audio graph.');\n        }\n\n        return <IAudioNodeRenderer<T, IAudioNode<T>>>audioNodeConnections.renderer;\n    };\n};\n","import { IAudioDestinationNode } from '../interfaces';\nimport { TRenderInputsOfAudioNodeFactory } from '../types';\n\nexport const createRenderInputsOfAudioNode: TRenderInputsOfAudioNodeFactory = (\n    getAudioNodeConnections,\n    getAudioNodeRenderer,\n    isPartOfACycle\n) => {\n    return async (audioNode, nativeOfflineAudioContext, nativeAudioNode) => {\n        const audioNodeConnections = getAudioNodeConnections(audioNode);\n\n        await Promise.all(\n            audioNodeConnections.activeInputs\n                .map((connections, input) =>\n                    Array.from(connections).map(async ([source, output]) => {\n                        const audioNodeRenderer = getAudioNodeRenderer(source);\n                        const renderedNativeAudioNode = await audioNodeRenderer.render(source, nativeOfflineAudioContext);\n                        const destination = <IAudioDestinationNode<typeof audioNode.context>>audioNode.context.destination;\n\n                        if (!isPartOfACycle(source) && (audioNode !== destination || !isPartOfACycle(audioNode))) {\n                            renderedNativeAudioNode.connect(nativeAudioNode, output, input);\n                        }\n                    })\n                )\n                .reduce((allRenderingPromises, renderingPromises) => [...allRenderingPromises, ...renderingPromises], [])\n        );\n    };\n};\n","import { isOwnedByContext } from '../helpers/is-owned-by-context';\nimport { IAnalyserNode, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\nimport { TAnalyserNodeRendererFactoryFactory, TNativeAnalyserNode, TNativeOfflineAudioContext } from '../types';\n\nexport const createAnalyserNodeRendererFactory: TAnalyserNodeRendererFactoryFactory = (\n    createNativeAnalyserNode,\n    getNativeAudioNode,\n    renderInputsOfAudioNode\n) => {\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>() => {\n        const renderedNativeAnalyserNodes = new WeakMap<TNativeOfflineAudioContext, TNativeAnalyserNode>();\n\n        const createAnalyserNode = async (proxy: IAnalyserNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext) => {\n            let nativeAnalyserNode = getNativeAudioNode<T, TNativeAnalyserNode>(proxy);\n\n            // If the initially used nativeAnalyserNode was not constructed on the same OfflineAudioContext it needs to be created again.\n            const nativeAnalyserNodeIsOwnedByContext = isOwnedByContext(nativeAnalyserNode, nativeOfflineAudioContext);\n\n            if (!nativeAnalyserNodeIsOwnedByContext) {\n                const options = {\n                    channelCount: nativeAnalyserNode.channelCount,\n                    channelCountMode: nativeAnalyserNode.channelCountMode,\n                    channelInterpretation: nativeAnalyserNode.channelInterpretation,\n                    fftSize: nativeAnalyserNode.fftSize,\n                    maxDecibels: nativeAnalyserNode.maxDecibels,\n                    minDecibels: nativeAnalyserNode.minDecibels,\n                    smoothingTimeConstant: nativeAnalyserNode.smoothingTimeConstant\n                };\n\n                nativeAnalyserNode = createNativeAnalyserNode(nativeOfflineAudioContext, options);\n            }\n\n            renderedNativeAnalyserNodes.set(nativeOfflineAudioContext, nativeAnalyserNode);\n\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeAnalyserNode);\n\n            return nativeAnalyserNode;\n        };\n\n        return {\n            render(proxy: IAnalyserNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext): Promise<TNativeAnalyserNode> {\n                const renderedNativeAnalyserNode = renderedNativeAnalyserNodes.get(nativeOfflineAudioContext);\n\n                if (renderedNativeAnalyserNode !== undefined) {\n                    return Promise.resolve(renderedNativeAnalyserNode);\n                }\n\n                return createAnalyserNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n","import { IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\nimport { TContext, TGetNativeContextFactory, TNativeAudioContext, TNativeOfflineAudioContext } from '../types';\nimport { createInvalidStateError } from './invalid-state-error';\n\nexport const createGetNativeContext: TGetNativeContextFactory = (contextStore) => {\n    return <T extends TContext>(\n        context: T\n    ): T extends IMinimalOfflineAudioContext | IOfflineAudioContext ? TNativeOfflineAudioContext : TNativeAudioContext => {\n        const nativeContext = contextStore.get(context);\n\n        if (nativeContext === undefined) {\n            throw createInvalidStateError();\n        }\n\n        return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext ? TNativeOfflineAudioContext : TNativeAudioContext>(\n            nativeContext\n        );\n    };\n};\n","import { TNativeOfflineAudioContextConstructorFactory } from '../types';\n\nexport const createNativeOfflineAudioContextConstructor: TNativeOfflineAudioContextConstructorFactory = (window) => {\n    if (window === null) {\n        return null;\n    }\n\n    if (window.hasOwnProperty('OfflineAudioContext')) {\n        return window.OfflineAudioContext;\n    }\n\n    return window.hasOwnProperty('webkitOfflineAudioContext') ? (<any>window).webkitOfflineAudioContext : null;\n};\n","import { TIsNativeOfflineAudioContextFactory, TNativeOfflineAudioContext } from '../types';\n\nexport const createIsNativeOfflineAudioContext: TIsNativeOfflineAudioContextFactory = (nativeOfflineAudioContextConstructor) => {\n    return (anything): anything is TNativeOfflineAudioContext => {\n        return nativeOfflineAudioContextConstructor !== null && anything instanceof nativeOfflineAudioContextConstructor;\n    };\n};\n","import { IEventTarget } from '../interfaces';\nimport { TEventHandler, TEventTargetConstructorFactory, TNativeEventTarget } from '../types';\n\nexport const createEventTargetConstructor: TEventTargetConstructorFactory = (wrapEventListener) => {\n    return class EventTarget<EventMap extends Record<string, Event>> implements IEventTarget<EventMap> {\n        private _listeners: WeakMap<EventListenerOrEventListenerObject, EventListenerOrEventListenerObject>;\n\n        constructor(private _nativeEventTarget: TNativeEventTarget) {\n            this._listeners = new WeakMap();\n        }\n\n        public addEventListener(\n            type: string,\n            listener: null | TEventHandler<this> | EventListenerOrEventListenerObject,\n            options?: boolean | AddEventListenerOptions\n        ): void {\n            if (listener !== null) {\n                let wrappedEventListener = this._listeners.get(listener);\n\n                if (wrappedEventListener === undefined) {\n                    wrappedEventListener = wrapEventListener(this, listener);\n\n                    if (typeof listener === 'function') {\n                        this._listeners.set(listener, wrappedEventListener);\n                    }\n                }\n\n                this._nativeEventTarget.addEventListener(type, wrappedEventListener, options);\n            }\n        }\n\n        public dispatchEvent(event: Event): boolean {\n            return this._nativeEventTarget.dispatchEvent(event);\n        }\n\n        public removeEventListener(\n            type: string,\n            listener: null | TEventHandler<this> | EventListenerOrEventListenerObject,\n            options?: boolean | EventListenerOptions\n        ): void {\n            const wrappedEventListener = listener === null ? undefined : this._listeners.get(listener);\n\n            this._nativeEventTarget.removeEventListener(type, wrappedEventListener === undefined ? null : wrappedEventListener, options);\n        }\n    };\n};\n","import { TNativeAudioContextConstructorFactory } from '../types';\n\nexport const createNativeAudioContextConstructor: TNativeAudioContextConstructorFactory = (window) => {\n    if (window === null) {\n        return null;\n    }\n\n    if (window.hasOwnProperty('AudioContext')) {\n        return window.AudioContext;\n    }\n\n    return window.hasOwnProperty('webkitAudioContext') ? (<any>window).webkitAudioContext : null;\n};\n","import { TIsNativeAudioContextFactory, TNativeAudioContext } from '../types';\n\nexport const createIsNativeAudioContext: TIsNativeAudioContextFactory = (nativeAudioContextConstructor) => {\n    return (anything): anything is TNativeAudioContext => {\n        return nativeAudioContextConstructor !== null && anything instanceof nativeAudioContextConstructor;\n    };\n};\n","import { TIsNativeAudioNodeFactory, TNativeAudioNode } from '../types';\n\nexport const createIsNativeAudioNode: TIsNativeAudioNodeFactory = (window) => {\n    return (anything): anything is TNativeAudioNode => {\n        return window !== null && typeof window.AudioNode === 'function' && anything instanceof window.AudioNode;\n    };\n};\n","import { TIsNativeAudioParamFactory, TNativeAudioParam } from '../types';\n\nexport const createIsNativeAudioParam: TIsNativeAudioParamFactory = (window) => {\n    return (anything): anything is TNativeAudioParam => {\n        return window !== null && typeof window.AudioParam === 'function' && anything instanceof window.AudioParam;\n    };\n};\n","import { TNativeAudioWorkletNodeConstructorFactory } from '../types';\n\nexport const createNativeAudioWorkletNodeConstructor: TNativeAudioWorkletNodeConstructorFactory = (window) => {\n    if (window === null) {\n        return null;\n    }\n\n    return window.hasOwnProperty('AudioWorkletNode') ? window.AudioWorkletNode : null;\n};\n","import { IAudioNode, IAudioNodeRenderer, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\nimport { TActiveInputConnection, TAddAudioNodeConnectionsFactory, TContext, TNativeAudioNode } from '../types';\n\nexport const createAddAudioNodeConnections: TAddAudioNodeConnectionsFactory = (audioNodeConnectionsStore) => {\n    return <T extends TContext>(\n        audioNode: IAudioNode<T>,\n        audioNodeRenderer: T extends IMinimalOfflineAudioContext | IOfflineAudioContext ? IAudioNodeRenderer<T, IAudioNode<T>> : null,\n        nativeAudioNode: TNativeAudioNode\n    ) => {\n        const activeInputs = [];\n\n        for (let i = 0; i < nativeAudioNode.numberOfInputs; i += 1) {\n            activeInputs.push(new Set<TActiveInputConnection<T>>());\n        }\n\n        audioNodeConnectionsStore.set(audioNode, {\n            activeInputs,\n            outputs: new Set(),\n            passiveInputs: new WeakMap(),\n            renderer: audioNodeRenderer\n        });\n    };\n};\n","import { deletePassiveInputConnectionToAudioNode } from '../helpers/delete-passive-input-connection-to-audio-node';\nimport { setInternalStateToActive } from '../helpers/set-internal-state-to-active';\nimport { setInternalStateToPassiveWhenNecessary } from '../helpers/set-internal-state-to-passive-when-necessary';\nimport { IAudioNode } from '../interfaces';\nimport { TAddConnectionToAudioNodeFactory, TContext, TInternalStateEventListener } from '../types';\n\nexport const createAddConnectionToAudioNode: TAddConnectionToAudioNodeFactory = (\n    addActiveInputConnectionToAudioNode,\n    addPassiveInputConnectionToAudioNode,\n    connectNativeAudioNodeToNativeAudioNode,\n    deleteActiveInputConnectionToAudioNode,\n    disconnectNativeAudioNodeFromNativeAudioNode,\n    getAudioNodeConnections,\n    getAudioNodeTailTime,\n    getEventListenersOfAudioNode,\n    getNativeAudioNode,\n    insertElementInSet,\n    isActiveAudioNode,\n    isPartOfACycle,\n    isPassiveAudioNode\n) => {\n    const tailTimeTimeoutIds = new WeakMap<IAudioNode<TContext>, number>();\n\n    return (source, destination, output, input, isOffline) => {\n        const { activeInputs, passiveInputs } = getAudioNodeConnections(destination);\n        const { outputs } = getAudioNodeConnections(source);\n        const eventListeners = getEventListenersOfAudioNode(source);\n\n        const eventListener: TInternalStateEventListener = (isActive) => {\n            const nativeDestinationAudioNode = getNativeAudioNode(destination);\n            const nativeSourceAudioNode = getNativeAudioNode(source);\n\n            if (isActive) {\n                const partialConnection = deletePassiveInputConnectionToAudioNode(passiveInputs, source, output, input);\n\n                addActiveInputConnectionToAudioNode(activeInputs, source, partialConnection, false);\n\n                if (!isOffline && !isPartOfACycle(source)) {\n                    connectNativeAudioNodeToNativeAudioNode(nativeSourceAudioNode, nativeDestinationAudioNode, output, input);\n                }\n\n                if (isPassiveAudioNode(destination)) {\n                    setInternalStateToActive(destination);\n                }\n            } else {\n                const partialConnection = deleteActiveInputConnectionToAudioNode(activeInputs, source, output, input);\n\n                addPassiveInputConnectionToAudioNode(passiveInputs, input, partialConnection, false);\n\n                if (!isOffline && !isPartOfACycle(source)) {\n                    disconnectNativeAudioNodeFromNativeAudioNode(nativeSourceAudioNode, nativeDestinationAudioNode, output, input);\n                }\n\n                const tailTime = getAudioNodeTailTime(destination);\n\n                if (tailTime === 0) {\n                    if (isActiveAudioNode(destination)) {\n                        setInternalStateToPassiveWhenNecessary(destination, activeInputs);\n                    }\n                } else {\n                    const tailTimeTimeoutId = tailTimeTimeoutIds.get(destination);\n\n                    if (tailTimeTimeoutId !== undefined) {\n                        clearTimeout(tailTimeTimeoutId);\n                    }\n\n                    tailTimeTimeoutIds.set(\n                        destination,\n                        setTimeout(() => {\n                            if (isActiveAudioNode(destination)) {\n                                setInternalStateToPassiveWhenNecessary(destination, activeInputs);\n                            }\n                        }, tailTime * 1000)\n                    );\n                }\n            }\n        };\n\n        if (\n            insertElementInSet(\n                outputs,\n                [destination, output, input],\n                (outputConnection) =>\n                    outputConnection[0] === destination && outputConnection[1] === output && outputConnection[2] === input,\n                true\n            )\n        ) {\n            eventListeners.add(eventListener);\n\n            if (isActiveAudioNode(source)) {\n                addActiveInputConnectionToAudioNode(activeInputs, source, [output, input, eventListener], true);\n            } else {\n                addPassiveInputConnectionToAudioNode(passiveInputs, input, [source, output, eventListener], true);\n            }\n\n            return true;\n        }\n\n        return false;\n    };\n};\n","import { isAudioNodeOutputConnection } from '../guards/audio-node-output-connection';\nimport { TIncrementCycleCounterFactoryFactory } from '../types';\n\nexport const createIncrementCycleCounterFactory: TIncrementCycleCounterFactoryFactory = (\n    cycleCounters,\n    disconnectNativeAudioNodeFromNativeAudioNode,\n    getAudioNodeConnections,\n    getNativeAudioNode,\n    getNativeAudioParam,\n    isActiveAudioNode\n) => {\n    return (isOffline) => {\n        return (audioNode, count) => {\n            const cycleCounter = cycleCounters.get(audioNode);\n\n            if (cycleCounter === undefined) {\n                if (!isOffline && isActiveAudioNode(audioNode)) {\n                    const nativeSourceAudioNode = getNativeAudioNode(audioNode);\n                    const { outputs } = getAudioNodeConnections(audioNode);\n\n                    for (const output of outputs) {\n                        if (isAudioNodeOutputConnection(output)) {\n                            const nativeDestinationAudioNode = getNativeAudioNode(output[0]);\n\n                            disconnectNativeAudioNodeFromNativeAudioNode(\n                                nativeSourceAudioNode,\n                                nativeDestinationAudioNode,\n                                output[1],\n                                output[2]\n                            );\n                        } else {\n                            const nativeDestinationAudioParam = getNativeAudioParam(output[0]);\n\n                            nativeSourceAudioNode.disconnect(nativeDestinationAudioParam, output[1]);\n                        }\n                    }\n                }\n\n                cycleCounters.set(audioNode, count);\n            } else {\n                cycleCounters.set(audioNode, cycleCounter + count);\n            }\n        };\n    };\n};\n","import { isAudioNodeOutputConnection } from '../guards/audio-node-output-connection';\nimport { TDecrementCycleCounterFactory } from '../types';\n\nexport const createDecrementCycleCounter: TDecrementCycleCounterFactory = (\n    connectNativeAudioNodeToNativeAudioNode,\n    cycleCounters,\n    getAudioNodeConnections,\n    getNativeAudioNode,\n    getNativeAudioParam,\n    getNativeContext,\n    isActiveAudioNode,\n    isNativeOfflineAudioContext\n) => {\n    return (audioNode, count) => {\n        const cycleCounter = cycleCounters.get(audioNode);\n\n        if (cycleCounter === undefined) {\n            throw new Error('Missing the expected cycle count.');\n        }\n\n        const nativeContext = getNativeContext(audioNode.context);\n        const isOffline = isNativeOfflineAudioContext(nativeContext);\n\n        if (cycleCounter === count) {\n            cycleCounters.delete(audioNode);\n\n            if (!isOffline && isActiveAudioNode(audioNode)) {\n                const nativeSourceAudioNode = getNativeAudioNode(audioNode);\n                const { outputs } = getAudioNodeConnections(audioNode);\n\n                for (const output of outputs) {\n                    if (isAudioNodeOutputConnection(output)) {\n                        const nativeDestinationAudioNode = getNativeAudioNode(output[0]);\n\n                        connectNativeAudioNodeToNativeAudioNode(nativeSourceAudioNode, nativeDestinationAudioNode, output[1], output[2]);\n                    } else {\n                        const nativeDestinationAudioParam = getNativeAudioParam(output[0]);\n\n                        nativeSourceAudioNode.connect(nativeDestinationAudioParam, output[1]);\n                    }\n                }\n            }\n        } else {\n            cycleCounters.set(audioNode, cycleCounter - count);\n        }\n    };\n};\n","import { isAudioNode } from '../guards/audio-node';\nimport { isDelayNode } from '../guards/delay-node';\nimport { IAudioNode, IAudioParam } from '../interfaces';\nimport { TContext, TDetectCyclesFactory } from '../types';\n\nexport const createDetectCycles: TDetectCyclesFactory = (audioParamAudioNodeStore, getAudioNodeConnections, getValueForKey) => {\n    return function detectCycles<T extends TContext>(chain: IAudioNode<T>[], nextLink: IAudioNode<T> | IAudioParam): IAudioNode<T>[][] {\n        const audioNode = isAudioNode(nextLink) ? nextLink : <IAudioNode<T>>getValueForKey(audioParamAudioNodeStore, nextLink);\n\n        if (isDelayNode(audioNode)) {\n            return [];\n        }\n\n        if (chain[0] === audioNode) {\n            return [chain];\n        }\n\n        if (chain.includes(audioNode)) {\n            return [];\n        }\n\n        const { outputs } = getAudioNodeConnections(audioNode);\n\n        return Array.from(outputs)\n            .map((outputConnection) => detectCycles([...chain, audioNode], outputConnection[0]))\n            .reduce((mergedCycles, nestedCycles) => mergedCycles.concat(nestedCycles), []);\n    };\n};\n","import { IAudioNode, IDelayNode } from '../interfaces';\nimport { TContext } from '../types';\n\nexport const isDelayNode = <T extends TContext>(audioNode: IAudioNode<T>): audioNode is IDelayNode<T> => {\n    return 'delayTime' in audioNode;\n};\n","import { TNativeAudioBufferConstructorFactory } from '../types';\n\nexport const createNativeAudioBufferConstructor: TNativeAudioBufferConstructorFactory = (window) => {\n    if (window === null) {\n        return null;\n    }\n\n    if (window.hasOwnProperty('AudioBuffer')) {\n        return window.AudioBuffer;\n    }\n\n    return null;\n};\n","import { TConvertNumberToUnsignedLongFactory } from '../types';\n\nexport const createConvertNumberToUnsignedLong: TConvertNumberToUnsignedLongFactory = (unit32Array) => {\n    return (value) => {\n        unit32Array[0] = value;\n\n        return unit32Array[0];\n    };\n};\n","import { TNativeAudioBuffer, TWrapAudioBufferCopyChannelMethodsFactory } from '../types';\n\nexport const createWrapAudioBufferCopyChannelMethods: TWrapAudioBufferCopyChannelMethodsFactory = (\n    convertNumberToUnsignedLong,\n    createIndexSizeError\n) => {\n    return (audioBuffer: TNativeAudioBuffer): void => {\n        audioBuffer.copyFromChannel = (destination, channelNumberAsNumber, bufferOffsetAsNumber = 0) => {\n            const bufferOffset = convertNumberToUnsignedLong(bufferOffsetAsNumber);\n            const channelNumber = convertNumberToUnsignedLong(channelNumberAsNumber);\n\n            if (channelNumber >= audioBuffer.numberOfChannels) {\n                throw createIndexSizeError();\n            }\n\n            const audioBufferLength = audioBuffer.length;\n            const channelData = audioBuffer.getChannelData(channelNumber);\n            const destinationLength = destination.length;\n\n            for (let i = bufferOffset < 0 ? -bufferOffset : 0; i + bufferOffset < audioBufferLength && i < destinationLength; i += 1) {\n                destination[i] = channelData[i + bufferOffset];\n            }\n        };\n\n        audioBuffer.copyToChannel = (source, channelNumberAsNumber, bufferOffsetAsNumber = 0) => {\n            const bufferOffset = convertNumberToUnsignedLong(bufferOffsetAsNumber);\n            const channelNumber = convertNumberToUnsignedLong(channelNumberAsNumber);\n\n            if (channelNumber >= audioBuffer.numberOfChannels) {\n                throw createIndexSizeError();\n            }\n\n            const audioBufferLength = audioBuffer.length;\n            const channelData = audioBuffer.getChannelData(channelNumber);\n            const sourceLength = source.length;\n\n            for (let i = bufferOffset < 0 ? -bufferOffset : 0; i + bufferOffset < audioBufferLength && i < sourceLength; i += 1) {\n                channelData[i + bufferOffset] = source[i];\n            }\n        };\n    };\n};\n","import { TNativeAudioBuffer, TWrapAudioBufferCopyChannelMethodsOutOfBoundsFactory } from '../types';\n\nexport const createWrapAudioBufferCopyChannelMethodsOutOfBounds: TWrapAudioBufferCopyChannelMethodsOutOfBoundsFactory = (\n    convertNumberToUnsignedLong\n) => {\n    return (audioBuffer: TNativeAudioBuffer): void => {\n        audioBuffer.copyFromChannel = ((copyFromChannel) => {\n            return (destination: Float32Array, channelNumberAsNumber: number, bufferOffsetAsNumber = 0) => {\n                const bufferOffset = convertNumberToUnsignedLong(bufferOffsetAsNumber);\n                const channelNumber = convertNumberToUnsignedLong(channelNumberAsNumber);\n\n                if (bufferOffset < audioBuffer.length) {\n                    return copyFromChannel.call(audioBuffer, destination, channelNumber, bufferOffset);\n                }\n            };\n        })(audioBuffer.copyFromChannel);\n\n        audioBuffer.copyToChannel = ((copyToChannel) => {\n            return (source: Float32Array, channelNumberAsNumber: number, bufferOffsetAsNumber = 0) => {\n                const bufferOffset = convertNumberToUnsignedLong(bufferOffsetAsNumber);\n                const channelNumber = convertNumberToUnsignedLong(channelNumberAsNumber);\n\n                if (bufferOffset < audioBuffer.length) {\n                    return copyToChannel.call(audioBuffer, source, channelNumber, bufferOffset);\n                }\n            };\n        })(audioBuffer.copyToChannel);\n    };\n};\n","import { TTestAudioBufferConstructorSupportFactory } from '../types';\n\n// Bug #33: Safari exposes an AudioBuffer but it can't be used as a constructor.\nexport const createTestAudioBufferConstructorSupport: TTestAudioBufferConstructorSupportFactory = (nativeAudioBufferConstructor) => {\n    return () => {\n        if (nativeAudioBufferConstructor === null) {\n            return false;\n        }\n\n        try {\n            new nativeAudioBufferConstructor({ length: 1, sampleRate: 44100 }); // tslint:disable-line:no-unused-expression\n        } catch {\n            return false;\n        }\n\n        return true;\n    };\n};\n","import { TAddSilentConnectionFactory } from '../types';\n\nexport const createAddSilentConnection: TAddSilentConnectionFactory = (createNativeGainNode) => {\n    return (nativeContext, nativeAudioScheduledSourceNode) => {\n        const nativeGainNode = createNativeGainNode(nativeContext, {\n            channelCount: 1,\n            channelCountMode: 'explicit',\n            channelInterpretation: 'discrete',\n            gain: 0\n        });\n\n        nativeAudioScheduledSourceNode.connect(nativeGainNode).connect(nativeContext.destination);\n\n        const disconnect = () => {\n            nativeAudioScheduledSourceNode.removeEventListener('ended', disconnect);\n            nativeAudioScheduledSourceNode.disconnect(nativeGainNode);\n            nativeGainNode.disconnect();\n        };\n\n        nativeAudioScheduledSourceNode.addEventListener('ended', disconnect);\n    };\n};\n","import { IAudioParam, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\nimport { TNativeAudioParam, TNativeOfflineAudioContext, TRenderInputsOfAudioParamFactory } from '../types';\n\nexport const createRenderInputsOfAudioParam: TRenderInputsOfAudioParamFactory = (\n    getAudioNodeRenderer,\n    getAudioParamConnections,\n    isPartOfACycle\n) => {\n    return async <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>(\n        audioParam: IAudioParam,\n        nativeOfflineAudioContext: TNativeOfflineAudioContext,\n        nativeAudioParam: TNativeAudioParam\n    ): Promise<void> => {\n        const audioParamConnections = getAudioParamConnections<T>(audioParam);\n\n        await Promise.all(\n            Array.from(audioParamConnections.activeInputs).map(async ([source, output]) => {\n                const audioNodeRenderer = getAudioNodeRenderer(source);\n                const renderedNativeAudioNode = await audioNodeRenderer.render(source, nativeOfflineAudioContext);\n\n                if (!isPartOfACycle(source)) {\n                    renderedNativeAudioNode.connect(nativeAudioParam, output);\n                }\n            })\n        );\n    };\n};\n","import { TConnectAudioParamFactory } from '../types';\n\nexport const createConnectAudioParam: TConnectAudioParamFactory = (renderInputsOfAudioParam) => {\n    return (nativeOfflineAudioContext, audioParam, nativeAudioParam) => {\n        return renderInputsOfAudioParam(audioParam, nativeOfflineAudioContext, nativeAudioParam);\n    };\n};\n","import { assignNativeAudioNodeAudioParamValue } from '../helpers/assign-native-audio-node-audio-param-value';\nimport { assignNativeAudioNodeOption } from '../helpers/assign-native-audio-node-option';\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { wrapAudioBufferSourceNodeStartMethodConsecutiveCalls } from '../helpers/wrap-audio-buffer-source-node-start-method-consecutive-calls';\nimport { wrapAudioScheduledSourceNodeStartMethodNegativeParameters } from '../helpers/wrap-audio-scheduled-source-node-start-method-negative-parameters';\nimport { wrapAudioScheduledSourceNodeStopMethodNegativeParameters } from '../helpers/wrap-audio-scheduled-source-node-stop-method-negative-parameters';\nimport { TNativeAudioBufferSourceNodeFactoryFactory } from '../types';\n\nexport const createNativeAudioBufferSourceNodeFactory: TNativeAudioBufferSourceNodeFactoryFactory = (\n    addSilentConnection,\n    cacheTestResult,\n    testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport,\n    testAudioBufferSourceNodeStartMethodOffsetClampingSupport,\n    testAudioBufferSourceNodeStopMethodNullifiedBufferSupport,\n    testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,\n    testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport,\n    testAudioScheduledSourceNodeStopMethodNegativeParametersSupport,\n    wrapAudioBufferSourceNodeStartMethodOffsetClampling,\n    wrapAudioBufferSourceNodeStopMethodNullifiedBuffer,\n    wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls\n) => {\n    return (nativeContext, options) => {\n        const nativeAudioBufferSourceNode = nativeContext.createBufferSource();\n\n        assignNativeAudioNodeOptions(nativeAudioBufferSourceNode, options);\n\n        assignNativeAudioNodeAudioParamValue(nativeAudioBufferSourceNode, options, 'playbackRate');\n\n        assignNativeAudioNodeOption(nativeAudioBufferSourceNode, options, 'buffer');\n\n        // Bug #149: Safari does not yet support the detune AudioParam.\n\n        assignNativeAudioNodeOption(nativeAudioBufferSourceNode, options, 'loop');\n        assignNativeAudioNodeOption(nativeAudioBufferSourceNode, options, 'loopEnd');\n        assignNativeAudioNodeOption(nativeAudioBufferSourceNode, options, 'loopStart');\n\n        // Bug #69: Safari does allow calls to start() of an already scheduled AudioBufferSourceNode.\n        if (\n            !cacheTestResult(testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport, () =>\n                testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport(nativeContext)\n            )\n        ) {\n            wrapAudioBufferSourceNodeStartMethodConsecutiveCalls(nativeAudioBufferSourceNode);\n        }\n\n        // Bug #154 & #155: Safari does not handle offsets which are equal to or greater than the duration of the buffer.\n        if (\n            !cacheTestResult(testAudioBufferSourceNodeStartMethodOffsetClampingSupport, () =>\n                testAudioBufferSourceNodeStartMethodOffsetClampingSupport(nativeContext)\n            )\n        ) {\n            wrapAudioBufferSourceNodeStartMethodOffsetClampling(nativeAudioBufferSourceNode);\n        }\n\n        // Bug #162: Safari does throw an error when stop() is called on an AudioBufferSourceNode which has no buffer assigned to it.\n        if (\n            !cacheTestResult(testAudioBufferSourceNodeStopMethodNullifiedBufferSupport, () =>\n                testAudioBufferSourceNodeStopMethodNullifiedBufferSupport(nativeContext)\n            )\n        ) {\n            wrapAudioBufferSourceNodeStopMethodNullifiedBuffer(nativeAudioBufferSourceNode, nativeContext);\n        }\n\n        // Bug #44: Safari does not throw a RangeError yet.\n        if (\n            !cacheTestResult(testAudioScheduledSourceNodeStartMethodNegativeParametersSupport, () =>\n                testAudioScheduledSourceNodeStartMethodNegativeParametersSupport(nativeContext)\n            )\n        ) {\n            wrapAudioScheduledSourceNodeStartMethodNegativeParameters(nativeAudioBufferSourceNode);\n        }\n\n        // Bug #19: Safari does not ignore calls to stop() of an already stopped AudioBufferSourceNode.\n        if (\n            !cacheTestResult(testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport, () =>\n                testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport(nativeContext)\n            )\n        ) {\n            wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls(nativeAudioBufferSourceNode, nativeContext);\n        }\n\n        // Bug #44: Only Firefox does not throw a RangeError yet.\n        if (\n            !cacheTestResult(testAudioScheduledSourceNodeStopMethodNegativeParametersSupport, () =>\n                testAudioScheduledSourceNodeStopMethodNegativeParametersSupport(nativeContext)\n            )\n        ) {\n            wrapAudioScheduledSourceNodeStopMethodNegativeParameters(nativeAudioBufferSourceNode);\n        }\n\n        // Bug #175: Safari will not fire an ended event if the AudioBufferSourceNode is unconnected.\n        addSilentConnection(nativeContext, nativeAudioBufferSourceNode);\n\n        return nativeAudioBufferSourceNode;\n    };\n};\n","import { createInvalidStateError } from '../factories/invalid-state-error';\nimport { TNativeAudioBufferSourceNode } from '../types';\n\nexport const wrapAudioBufferSourceNodeStartMethodConsecutiveCalls = (nativeAudioBufferSourceNode: TNativeAudioBufferSourceNode): void => {\n    nativeAudioBufferSourceNode.start = ((start) => {\n        let isScheduled = false;\n\n        return (when = 0, offset = 0, duration?: number) => {\n            if (isScheduled) {\n                throw createInvalidStateError();\n            }\n\n            start.call(nativeAudioBufferSourceNode, when, offset, duration);\n\n            isScheduled = true;\n        };\n    })(nativeAudioBufferSourceNode.start);\n};\n","import { TNativeContext } from '../types';\n\nexport const testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport = (nativeContext: TNativeContext) => {\n    const nativeAudioBufferSourceNode = nativeContext.createBufferSource();\n\n    nativeAudioBufferSourceNode.start();\n\n    try {\n        nativeAudioBufferSourceNode.start();\n    } catch {\n        return true;\n    }\n\n    return false;\n};\n","import { TNativeContext } from '../types';\n\nexport const testAudioBufferSourceNodeStartMethodOffsetClampingSupport = (nativeContext: TNativeContext) => {\n    const nativeAudioBufferSourceNode = nativeContext.createBufferSource();\n    const nativeAudioBuffer = nativeContext.createBuffer(1, 1, 44100);\n\n    nativeAudioBufferSourceNode.buffer = nativeAudioBuffer;\n\n    try {\n        nativeAudioBufferSourceNode.start(0, 1);\n    } catch {\n        return false;\n    }\n\n    return true;\n};\n","import { TNativeContext } from '../types';\n\nexport const testAudioBufferSourceNodeStopMethodNullifiedBufferSupport = (nativeContext: TNativeContext) => {\n    const nativeAudioBufferSourceNode = nativeContext.createBufferSource();\n\n    nativeAudioBufferSourceNode.start();\n\n    try {\n        nativeAudioBufferSourceNode.stop();\n    } catch {\n        return false;\n    }\n\n    return true;\n};\n","import { TNativeAudioBufferSourceNode } from '../types';\n\nexport const wrapAudioBufferSourceNodeStartMethodOffsetClamping = (nativeAudioBufferSourceNode: TNativeAudioBufferSourceNode): void => {\n    nativeAudioBufferSourceNode.start = ((start) => {\n        return (when = 0, offset = 0, duration?: number) => {\n            const buffer = nativeAudioBufferSourceNode.buffer;\n            // Bug #154: Safari does not clamp the offset if it is equal to or greater than the duration of the buffer.\n            const clampedOffset = buffer === null ? offset : Math.min(buffer.duration, offset);\n\n            // Bug #155: Safari does not handle the offset correctly if it would cause the buffer to be not be played at all.\n            if (buffer !== null && clampedOffset > buffer.duration - 0.5 / nativeAudioBufferSourceNode.context.sampleRate) {\n                start.call(nativeAudioBufferSourceNode, when, 0, 0);\n            } else {\n                start.call(nativeAudioBufferSourceNode, when, clampedOffset, duration);\n            }\n        };\n    })(nativeAudioBufferSourceNode.start);\n};\n","import { TWrapAudioBufferSourceNodeStopMethodNullifiedBufferFactory } from '../types';\n\nexport const createWrapAudioBufferSourceNodeStopMethodNullifiedBuffer: TWrapAudioBufferSourceNodeStopMethodNullifiedBufferFactory = (\n    overwriteAccessors\n) => {\n    return (nativeAudioBufferSourceNode, nativeContext) => {\n        const nullifiedBuffer = nativeContext.createBuffer(1, 1, 44100);\n\n        if (nativeAudioBufferSourceNode.buffer === null) {\n            nativeAudioBufferSourceNode.buffer = nullifiedBuffer;\n        }\n\n        overwriteAccessors(\n            nativeAudioBufferSourceNode,\n            'buffer',\n            (get) => () => {\n                const value = get.call(nativeAudioBufferSourceNode);\n\n                return value === nullifiedBuffer ? null : value;\n            },\n            (set) => (value) => {\n                return set.call(nativeAudioBufferSourceNode, value === null ? nullifiedBuffer : value);\n            }\n        );\n    };\n};\n","import { TRenderAutomationFactory } from '../types';\n\nexport const createRenderAutomation: TRenderAutomationFactory = (getAudioParamRenderer, renderInputsOfAudioParam) => {\n    return (nativeOfflineAudioContext, audioParam, nativeAudioParam) => {\n        const audioParamRenderer = getAudioParamRenderer(audioParam);\n\n        audioParamRenderer.replay(nativeAudioParam);\n\n        return renderInputsOfAudioParam(audioParam, nativeOfflineAudioContext, nativeAudioParam);\n    };\n};\n","import { IMinimalOfflineAudioContext } from '../interfaces';\nimport { TGetAudioParamRendererFactory } from '../types';\n\nexport const createGetAudioParamRenderer: TGetAudioParamRendererFactory = (getAudioParamConnections) => {\n    return (audioParam) => {\n        const audioParamConnections = getAudioParamConnections<IMinimalOfflineAudioContext>(audioParam);\n\n        if (audioParamConnections.renderer === null) {\n            throw new Error('Missing the renderer of the given AudioParam in the audio graph.');\n        }\n\n        return audioParamConnections.renderer;\n    };\n};\n","import { isOwnedByContext } from '../helpers/is-owned-by-context';\nimport { IAudioBufferSourceNode, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\nimport { TAudioBufferSourceNodeRendererFactoryFactory, TNativeAudioBufferSourceNode, TNativeOfflineAudioContext } from '../types';\n\nexport const createAudioBufferSourceNodeRendererFactory: TAudioBufferSourceNodeRendererFactoryFactory = (\n    connectAudioParam,\n    createNativeAudioBufferSourceNode,\n    getNativeAudioNode,\n    renderAutomation,\n    renderInputsOfAudioNode\n) => {\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>() => {\n        const renderedNativeAudioBufferSourceNodes = new WeakMap<TNativeOfflineAudioContext, TNativeAudioBufferSourceNode>();\n\n        let start: null | [number, number] | [number, number, number] = null;\n        let stop: null | number = null;\n\n        const createAudioBufferSourceNode = async (\n            proxy: IAudioBufferSourceNode<T>,\n            nativeOfflineAudioContext: TNativeOfflineAudioContext\n        ) => {\n            let nativeAudioBufferSourceNode = getNativeAudioNode<T, TNativeAudioBufferSourceNode>(proxy);\n\n            /*\n             * If the initially used nativeAudioBufferSourceNode was not constructed on the same OfflineAudioContext it needs to be created\n             * again.\n             */\n            const nativeAudioBufferSourceNodeIsOwnedByContext = isOwnedByContext(nativeAudioBufferSourceNode, nativeOfflineAudioContext);\n\n            if (!nativeAudioBufferSourceNodeIsOwnedByContext) {\n                const options = {\n                    buffer: nativeAudioBufferSourceNode.buffer,\n                    channelCount: nativeAudioBufferSourceNode.channelCount,\n                    channelCountMode: nativeAudioBufferSourceNode.channelCountMode,\n                    channelInterpretation: nativeAudioBufferSourceNode.channelInterpretation,\n                    // Bug #149: Safari does not yet support the detune AudioParam.\n                    loop: nativeAudioBufferSourceNode.loop,\n                    loopEnd: nativeAudioBufferSourceNode.loopEnd,\n                    loopStart: nativeAudioBufferSourceNode.loopStart,\n                    playbackRate: nativeAudioBufferSourceNode.playbackRate.value\n                };\n\n                nativeAudioBufferSourceNode = createNativeAudioBufferSourceNode(nativeOfflineAudioContext, options);\n\n                if (start !== null) {\n                    nativeAudioBufferSourceNode.start(...start);\n                }\n\n                if (stop !== null) {\n                    nativeAudioBufferSourceNode.stop(stop);\n                }\n            }\n\n            renderedNativeAudioBufferSourceNodes.set(nativeOfflineAudioContext, nativeAudioBufferSourceNode);\n\n            if (!nativeAudioBufferSourceNodeIsOwnedByContext) {\n                // Bug #149: Safari does not yet support the detune AudioParam.\n                await renderAutomation(nativeOfflineAudioContext, proxy.playbackRate, nativeAudioBufferSourceNode.playbackRate);\n            } else {\n                // Bug #149: Safari does not yet support the detune AudioParam.\n                await connectAudioParam(nativeOfflineAudioContext, proxy.playbackRate, nativeAudioBufferSourceNode.playbackRate);\n            }\n\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeAudioBufferSourceNode);\n\n            return nativeAudioBufferSourceNode;\n        };\n\n        return {\n            set start(value: [number, number] | [number, number, number]) {\n                start = value;\n            },\n            set stop(value: number) {\n                stop = value;\n            },\n            render(\n                proxy: IAudioBufferSourceNode<T>,\n                nativeOfflineAudioContext: TNativeOfflineAudioContext\n            ): Promise<TNativeAudioBufferSourceNode> {\n                const renderedNativeAudioBufferSourceNode = renderedNativeAudioBufferSourceNodes.get(nativeOfflineAudioContext);\n\n                if (renderedNativeAudioBufferSourceNode !== undefined) {\n                    return Promise.resolve(renderedNativeAudioBufferSourceNode);\n                }\n\n                return createAudioBufferSourceNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n","import { AutomationEventList } from 'automation-events';\nimport { IAudioNode, IAudioParam, IAudioParamRenderer, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\nimport { TAudioParamFactoryFactory, TContext, TNativeAudioParam } from '../types';\n\nexport const createAudioParamFactory: TAudioParamFactoryFactory = (\n    addAudioParamConnections,\n    audioParamAudioNodeStore,\n    audioParamStore,\n    createAudioParamRenderer,\n    createCancelAndHoldAutomationEvent,\n    createCancelScheduledValuesAutomationEvent,\n    createExponentialRampToValueAutomationEvent,\n    createLinearRampToValueAutomationEvent,\n    createSetTargetAutomationEvent,\n    createSetValueAutomationEvent,\n    createSetValueCurveAutomationEvent,\n    nativeAudioContextConstructor,\n    setValueAtTimeUntilPossible\n) => {\n    return <T extends TContext>(\n        audioNode: IAudioNode<T>,\n        isAudioParamOfOfflineAudioContext: boolean,\n        nativeAudioParam: TNativeAudioParam,\n        maxValue: null | number = null,\n        minValue: null | number = null\n    ): IAudioParam => {\n        // Bug #196 Only Safari sets the defaultValue to the initial value.\n        const defaultValue = nativeAudioParam.value;\n        const automationEventList = new AutomationEventList(defaultValue);\n        const audioParamRenderer = isAudioParamOfOfflineAudioContext ? createAudioParamRenderer(automationEventList) : null;\n        const audioParam = {\n            get defaultValue(): number {\n                return defaultValue;\n            },\n            get maxValue(): number {\n                return maxValue === null ? nativeAudioParam.maxValue : maxValue;\n            },\n            get minValue(): number {\n                return minValue === null ? nativeAudioParam.minValue : minValue;\n            },\n            get value(): number {\n                return nativeAudioParam.value;\n            },\n            set value(value) {\n                nativeAudioParam.value = value;\n\n                // Bug #98: Firefox & Safari do not yet treat the value setter like a call to setValueAtTime().\n                audioParam.setValueAtTime(value, audioNode.context.currentTime);\n            },\n            cancelAndHoldAtTime(cancelTime: number): IAudioParam {\n                // Bug #28: Firefox & Safari do not yet implement cancelAndHoldAtTime().\n                if (typeof nativeAudioParam.cancelAndHoldAtTime === 'function') {\n                    if (audioParamRenderer === null) {\n                        automationEventList.flush(audioNode.context.currentTime);\n                    }\n\n                    automationEventList.add(createCancelAndHoldAutomationEvent(cancelTime));\n                    nativeAudioParam.cancelAndHoldAtTime(cancelTime);\n                } else {\n                    const previousLastEvent = Array.from(automationEventList).pop();\n\n                    if (audioParamRenderer === null) {\n                        automationEventList.flush(audioNode.context.currentTime);\n                    }\n\n                    automationEventList.add(createCancelAndHoldAutomationEvent(cancelTime));\n\n                    const currentLastEvent = Array.from(automationEventList).pop();\n\n                    nativeAudioParam.cancelScheduledValues(cancelTime);\n\n                    if (previousLastEvent !== currentLastEvent && currentLastEvent !== undefined) {\n                        if (currentLastEvent.type === 'exponentialRampToValue') {\n                            nativeAudioParam.exponentialRampToValueAtTime(currentLastEvent.value, currentLastEvent.endTime);\n                        } else if (currentLastEvent.type === 'linearRampToValue') {\n                            nativeAudioParam.linearRampToValueAtTime(currentLastEvent.value, currentLastEvent.endTime);\n                        } else if (currentLastEvent.type === 'setValue') {\n                            nativeAudioParam.setValueAtTime(currentLastEvent.value, currentLastEvent.startTime);\n                        } else if (currentLastEvent.type === 'setValueCurve') {\n                            nativeAudioParam.setValueCurveAtTime(\n                                currentLastEvent.values,\n                                currentLastEvent.startTime,\n                                currentLastEvent.duration\n                            );\n                        }\n                    }\n                }\n\n                return audioParam;\n            },\n            cancelScheduledValues(cancelTime: number): IAudioParam {\n                if (audioParamRenderer === null) {\n                    automationEventList.flush(audioNode.context.currentTime);\n                }\n\n                automationEventList.add(createCancelScheduledValuesAutomationEvent(cancelTime));\n                nativeAudioParam.cancelScheduledValues(cancelTime);\n\n                return audioParam;\n            },\n            exponentialRampToValueAtTime(value: number, endTime: number): IAudioParam {\n                // Bug #45: Safari does not throw an error yet.\n                if (value === 0) {\n                    throw new RangeError();\n                }\n\n                // Bug #187: Safari does not throw an error yet.\n                if (!Number.isFinite(endTime) || endTime < 0) {\n                    throw new RangeError();\n                }\n\n                const currentTime = audioNode.context.currentTime;\n\n                if (audioParamRenderer === null) {\n                    automationEventList.flush(currentTime);\n                }\n\n                // Bug #194: Firefox does not implicitly call setValueAtTime() if there is no previous event.\n                if (Array.from(automationEventList).length === 0) {\n                    automationEventList.add(createSetValueAutomationEvent(defaultValue, currentTime));\n                    nativeAudioParam.setValueAtTime(defaultValue, currentTime);\n                }\n\n                automationEventList.add(createExponentialRampToValueAutomationEvent(value, endTime));\n                nativeAudioParam.exponentialRampToValueAtTime(value, endTime);\n\n                return audioParam;\n            },\n            linearRampToValueAtTime(value: number, endTime: number): IAudioParam {\n                const currentTime = audioNode.context.currentTime;\n\n                if (audioParamRenderer === null) {\n                    automationEventList.flush(currentTime);\n                }\n\n                // Bug #195: Firefox does not implicitly call setValueAtTime() if there is no previous event.\n                if (Array.from(automationEventList).length === 0) {\n                    automationEventList.add(createSetValueAutomationEvent(defaultValue, currentTime));\n                    nativeAudioParam.setValueAtTime(defaultValue, currentTime);\n                }\n\n                automationEventList.add(createLinearRampToValueAutomationEvent(value, endTime));\n                nativeAudioParam.linearRampToValueAtTime(value, endTime);\n\n                return audioParam;\n            },\n            setTargetAtTime(target: number, startTime: number, timeConstant: number): IAudioParam {\n                if (audioParamRenderer === null) {\n                    automationEventList.flush(audioNode.context.currentTime);\n                }\n\n                automationEventList.add(createSetTargetAutomationEvent(target, startTime, timeConstant));\n                nativeAudioParam.setTargetAtTime(target, startTime, timeConstant);\n\n                return audioParam;\n            },\n            setValueAtTime(value: number, startTime: number): IAudioParam {\n                if (audioParamRenderer === null) {\n                    automationEventList.flush(audioNode.context.currentTime);\n                }\n\n                automationEventList.add(createSetValueAutomationEvent(value, startTime));\n                nativeAudioParam.setValueAtTime(value, startTime);\n\n                return audioParam;\n            },\n            setValueCurveAtTime(values: Iterable<number>, startTime: number, duration: number): IAudioParam {\n                // Bug 183: Safari only accepts a Float32Array.\n                const convertedValues = values instanceof Float32Array ? values : new Float32Array(values);\n                /*\n                 * Bug #152: Safari does not correctly interpolate the values of the curve.\n                 * @todo Unfortunately there is no way to test for this behavior in a synchronous fashion which is why testing for the\n                 * existence of the webkitAudioContext is used as a workaround here.\n                 */\n                if (nativeAudioContextConstructor !== null && nativeAudioContextConstructor.name === 'webkitAudioContext') {\n                    const endTime = startTime + duration;\n                    const sampleRate = audioNode.context.sampleRate;\n                    const firstSample = Math.ceil(startTime * sampleRate);\n                    const lastSample = Math.floor(endTime * sampleRate);\n                    const numberOfInterpolatedValues = lastSample - firstSample;\n                    const interpolatedValues = new Float32Array(numberOfInterpolatedValues);\n\n                    for (let i = 0; i < numberOfInterpolatedValues; i += 1) {\n                        const theoreticIndex = ((convertedValues.length - 1) / duration) * ((firstSample + i) / sampleRate - startTime);\n                        const lowerIndex = Math.floor(theoreticIndex);\n                        const upperIndex = Math.ceil(theoreticIndex);\n\n                        interpolatedValues[i] =\n                            lowerIndex === upperIndex\n                                ? convertedValues[lowerIndex]\n                                : (1 - (theoreticIndex - lowerIndex)) * convertedValues[lowerIndex] +\n                                  (1 - (upperIndex - theoreticIndex)) * convertedValues[upperIndex];\n                    }\n\n                    if (audioParamRenderer === null) {\n                        automationEventList.flush(audioNode.context.currentTime);\n                    }\n\n                    automationEventList.add(createSetValueCurveAutomationEvent(interpolatedValues, startTime, duration));\n                    nativeAudioParam.setValueCurveAtTime(interpolatedValues, startTime, duration);\n\n                    const timeOfLastSample = lastSample / sampleRate;\n\n                    if (timeOfLastSample < endTime) {\n                        setValueAtTimeUntilPossible(audioParam, interpolatedValues[interpolatedValues.length - 1], timeOfLastSample);\n                    }\n\n                    setValueAtTimeUntilPossible(audioParam, convertedValues[convertedValues.length - 1], endTime);\n                } else {\n                    if (audioParamRenderer === null) {\n                        automationEventList.flush(audioNode.context.currentTime);\n                    }\n\n                    automationEventList.add(createSetValueCurveAutomationEvent(convertedValues, startTime, duration));\n                    nativeAudioParam.setValueCurveAtTime(convertedValues, startTime, duration);\n                }\n\n                return audioParam;\n            }\n        };\n\n        audioParamStore.set(audioParam, nativeAudioParam);\n        audioParamAudioNodeStore.set(audioParam, audioNode);\n\n        addAudioParamConnections(\n            audioParam,\n            <T extends IMinimalOfflineAudioContext | IOfflineAudioContext ? IAudioParamRenderer : null>audioParamRenderer\n        );\n\n        return audioParam;\n    };\n};\n","import { IAudioParam, IAudioParamRenderer, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\nimport { TAddAudioParamConnectionsFactory, TContext } from '../types';\n\nexport const createAddAudioParamConnections: TAddAudioParamConnectionsFactory = (audioParamConnectionsStore) => {\n    return <T extends TContext>(\n        audioParam: IAudioParam,\n        audioParamRenderer: T extends IMinimalOfflineAudioContext | IOfflineAudioContext ? IAudioParamRenderer : null\n    ) => {\n        audioParamConnectionsStore.set(audioParam, { activeInputs: new Set(), passiveInputs: new WeakMap(), renderer: audioParamRenderer });\n    };\n};\n","import { TAudioParamRendererFactory, TNativeAudioParam } from '../types';\n\nexport const createAudioParamRenderer: TAudioParamRendererFactory = (automationEventList) => {\n    return {\n        replay(audioParam: TNativeAudioParam): void {\n            for (const automationEvent of automationEventList) {\n                if (automationEvent.type === 'exponentialRampToValue') {\n                    const { endTime, value } = automationEvent;\n\n                    audioParam.exponentialRampToValueAtTime(value, endTime);\n                } else if (automationEvent.type === 'linearRampToValue') {\n                    const { endTime, value } = automationEvent;\n\n                    audioParam.linearRampToValueAtTime(value, endTime);\n                } else if (automationEvent.type === 'setTarget') {\n                    const { startTime, target, timeConstant } = automationEvent;\n\n                    audioParam.setTargetAtTime(target, startTime, timeConstant);\n                } else if (automationEvent.type === 'setValue') {\n                    const { startTime, value } = automationEvent;\n\n                    audioParam.setValueAtTime(value, startTime);\n                } else if (automationEvent.type === 'setValueCurve') {\n                    const { duration, startTime, values } = automationEvent;\n\n                    audioParam.setValueCurveAtTime(values, startTime, duration);\n                } else {\n                    throw new Error(\"Can't apply an unknown automation.\");\n                }\n            }\n        }\n    };\n};\n","import { IAudioDestinationNode } from '../interfaces';\nimport {\n    TAudioDestinationNodeConstructorFactory,\n    TAudioNodeRenderer,\n    TChannelCountMode,\n    TContext,\n    TNativeAudioDestinationNode\n} from '../types';\n\nexport const createAudioDestinationNodeConstructor: TAudioDestinationNodeConstructorFactory = (\n    audioNodeConstructor,\n    createAudioDestinationNodeRenderer,\n    createIndexSizeError,\n    createInvalidStateError,\n    createNativeAudioDestinationNode,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    renderInputsOfAudioNode\n) => {\n    return class AudioDestinationNode<T extends TContext> extends audioNodeConstructor<T> implements IAudioDestinationNode<T> {\n        private _isNodeOfNativeOfflineAudioContext: boolean;\n\n        private _nativeAudioDestinationNode: TNativeAudioDestinationNode;\n\n        constructor(context: T, channelCount: number) {\n            const nativeContext = getNativeContext(context);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n            const nativeAudioDestinationNode = createNativeAudioDestinationNode(nativeContext, channelCount, isOffline);\n            const audioDestinationNodeRenderer = <TAudioNodeRenderer<T, this>>(\n                (isOffline ? createAudioDestinationNodeRenderer(renderInputsOfAudioNode) : null)\n            );\n\n            super(context, false, nativeAudioDestinationNode, audioDestinationNodeRenderer);\n\n            this._isNodeOfNativeOfflineAudioContext = isOffline;\n            this._nativeAudioDestinationNode = nativeAudioDestinationNode;\n        }\n\n        get channelCount(): number {\n            return this._nativeAudioDestinationNode.channelCount;\n        }\n\n        set channelCount(value) {\n            // Bug #52: Chrome, Edge & Safari do not throw an exception at all.\n            // Bug #54: Firefox does throw an IndexSizeError.\n            if (this._isNodeOfNativeOfflineAudioContext) {\n                throw createInvalidStateError();\n            }\n\n            // Bug #47: The AudioDestinationNode in Safari does not initialize the maxChannelCount property correctly.\n            if (value > this._nativeAudioDestinationNode.maxChannelCount) {\n                throw createIndexSizeError();\n            }\n\n            this._nativeAudioDestinationNode.channelCount = value;\n        }\n\n        get channelCountMode(): TChannelCountMode {\n            return this._nativeAudioDestinationNode.channelCountMode;\n        }\n\n        set channelCountMode(value) {\n            // Bug #53: No browser does throw an exception yet.\n            if (this._isNodeOfNativeOfflineAudioContext) {\n                throw createInvalidStateError();\n            }\n\n            this._nativeAudioDestinationNode.channelCountMode = value;\n        }\n\n        get maxChannelCount(): number {\n            return this._nativeAudioDestinationNode.maxChannelCount;\n        }\n    };\n};\n","import { IAudioDestinationNode, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\nimport {\n    TAudioDestinationNodeRendererFactory,\n    TNativeAudioDestinationNode,\n    TNativeOfflineAudioContext,\n    TRenderInputsOfAudioNodeFunction\n} from '../types';\n\nexport const createAudioDestinationNodeRenderer: TAudioDestinationNodeRendererFactory = <\n    T extends IMinimalOfflineAudioContext | IOfflineAudioContext\n>(\n    renderInputsOfAudioNode: TRenderInputsOfAudioNodeFunction\n) => {\n    const renderedNativeAudioDestinationNodes = new WeakMap<TNativeOfflineAudioContext, TNativeAudioDestinationNode>();\n\n    const createAudioDestinationNode = async (proxy: IAudioDestinationNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext) => {\n        const nativeAudioDestinationNode = nativeOfflineAudioContext.destination;\n\n        renderedNativeAudioDestinationNodes.set(nativeOfflineAudioContext, nativeAudioDestinationNode);\n\n        await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeAudioDestinationNode);\n\n        return nativeAudioDestinationNode;\n    };\n\n    return {\n        render(\n            proxy: IAudioDestinationNode<T>,\n            nativeOfflineAudioContext: TNativeOfflineAudioContext\n        ): Promise<TNativeAudioDestinationNode> {\n            const renderedNativeAudioDestinationNode = renderedNativeAudioDestinationNodes.get(nativeOfflineAudioContext);\n\n            if (renderedNativeAudioDestinationNode !== undefined) {\n                return Promise.resolve(renderedNativeAudioDestinationNode);\n            }\n\n            return createAudioDestinationNode(proxy, nativeOfflineAudioContext);\n        }\n    };\n};\n","import { TNativeAudioDestinationNode, TNativeAudioDestinationNodeFactoryFactory, TNativeGainNode } from '../types';\n\nexport const createNativeAudioDestinationNodeFactory: TNativeAudioDestinationNodeFactoryFactory = (\n    createNativeGainNode,\n    overwriteAccessors\n) => {\n    return (nativeContext, channelCount, isNodeOfNativeOfflineAudioContext) => {\n        const nativeAudioDestinationNode = nativeContext.destination;\n\n        // Bug #132: Safari does not have the correct channelCount.\n        if (nativeAudioDestinationNode.channelCount !== channelCount) {\n            try {\n                nativeAudioDestinationNode.channelCount = channelCount;\n            } catch {\n                // Bug #169: Safari throws an error on each attempt to change the channelCount.\n            }\n        }\n\n        // Bug #83: Safari does not have the correct channelCountMode.\n        if (isNodeOfNativeOfflineAudioContext && nativeAudioDestinationNode.channelCountMode !== 'explicit') {\n            nativeAudioDestinationNode.channelCountMode = 'explicit';\n        }\n\n        // Bug #47: The AudioDestinationNode in Safari does not initialize the maxChannelCount property correctly.\n        if (nativeAudioDestinationNode.maxChannelCount === 0) {\n            Object.defineProperty(nativeAudioDestinationNode, 'maxChannelCount', {\n                value: channelCount\n            });\n        }\n\n        // Bug #168: No browser does yet have an AudioDestinationNode with an output.\n        const gainNode = createNativeGainNode(nativeContext, {\n            channelCount,\n            channelCountMode: nativeAudioDestinationNode.channelCountMode,\n            channelInterpretation: nativeAudioDestinationNode.channelInterpretation,\n            gain: 1\n        });\n\n        overwriteAccessors(\n            gainNode,\n            'channelCount',\n            (get) => () => get.call(gainNode),\n            (set) => (value) => {\n                set.call(gainNode, value);\n\n                try {\n                    nativeAudioDestinationNode.channelCount = value;\n                } catch (err) {\n                    // Bug #169: Safari throws an error on each attempt to change the channelCount.\n                    if (value > nativeAudioDestinationNode.maxChannelCount) {\n                        throw err;\n                    }\n                }\n            }\n        );\n\n        overwriteAccessors(\n            gainNode,\n            'channelCountMode',\n            (get) => () => get.call(gainNode),\n            (set) => (value) => {\n                set.call(gainNode, value);\n                nativeAudioDestinationNode.channelCountMode = value;\n            }\n        );\n\n        overwriteAccessors(\n            gainNode,\n            'channelInterpretation',\n            (get) => () => get.call(gainNode),\n            (set) => (value) => {\n                set.call(gainNode, value);\n                nativeAudioDestinationNode.channelInterpretation = value;\n            }\n        );\n\n        Object.defineProperty(gainNode, 'maxChannelCount', {\n            get: () => nativeAudioDestinationNode.maxChannelCount\n        });\n\n        // @todo This should be disconnected when the context is closed.\n        gainNode.connect(nativeAudioDestinationNode);\n\n        return <{ maxChannelCount: TNativeAudioDestinationNode['maxChannelCount'] } & TNativeGainNode>gainNode;\n    };\n};\n","import { isOwnedByContext } from '../helpers/is-owned-by-context';\nimport { IBiquadFilterNode, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\nimport { TBiquadFilterNodeRendererFactoryFactory, TNativeBiquadFilterNode, TNativeOfflineAudioContext } from '../types';\n\nexport const createBiquadFilterNodeRendererFactory: TBiquadFilterNodeRendererFactoryFactory = (\n    connectAudioParam,\n    createNativeBiquadFilterNode,\n    getNativeAudioNode,\n    renderAutomation,\n    renderInputsOfAudioNode\n) => {\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>() => {\n        const renderedNativeBiquadFilterNodes = new WeakMap<TNativeOfflineAudioContext, TNativeBiquadFilterNode>();\n\n        const createBiquadFilterNode = async (proxy: IBiquadFilterNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext) => {\n            let nativeBiquadFilterNode = getNativeAudioNode<T, TNativeBiquadFilterNode>(proxy);\n\n            /*\n             * If the initially used nativeBiquadFilterNode was not constructed on the same OfflineAudioContext it needs to be created\n             * again.\n             */\n            const nativeBiquadFilterNodeIsOwnedByContext = isOwnedByContext(nativeBiquadFilterNode, nativeOfflineAudioContext);\n\n            if (!nativeBiquadFilterNodeIsOwnedByContext) {\n                const options = {\n                    Q: nativeBiquadFilterNode.Q.value,\n                    channelCount: nativeBiquadFilterNode.channelCount,\n                    channelCountMode: nativeBiquadFilterNode.channelCountMode,\n                    channelInterpretation: nativeBiquadFilterNode.channelInterpretation,\n                    detune: nativeBiquadFilterNode.detune.value,\n                    frequency: nativeBiquadFilterNode.frequency.value,\n                    gain: nativeBiquadFilterNode.gain.value,\n                    type: nativeBiquadFilterNode.type\n                };\n\n                nativeBiquadFilterNode = createNativeBiquadFilterNode(nativeOfflineAudioContext, options);\n            }\n\n            renderedNativeBiquadFilterNodes.set(nativeOfflineAudioContext, nativeBiquadFilterNode);\n\n            if (!nativeBiquadFilterNodeIsOwnedByContext) {\n                await renderAutomation(nativeOfflineAudioContext, proxy.Q, nativeBiquadFilterNode.Q);\n                await renderAutomation(nativeOfflineAudioContext, proxy.detune, nativeBiquadFilterNode.detune);\n                await renderAutomation(nativeOfflineAudioContext, proxy.frequency, nativeBiquadFilterNode.frequency);\n                await renderAutomation(nativeOfflineAudioContext, proxy.gain, nativeBiquadFilterNode.gain);\n            } else {\n                await connectAudioParam(nativeOfflineAudioContext, proxy.Q, nativeBiquadFilterNode.Q);\n                await connectAudioParam(nativeOfflineAudioContext, proxy.detune, nativeBiquadFilterNode.detune);\n                await connectAudioParam(nativeOfflineAudioContext, proxy.frequency, nativeBiquadFilterNode.frequency);\n                await connectAudioParam(nativeOfflineAudioContext, proxy.gain, nativeBiquadFilterNode.gain);\n            }\n\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeBiquadFilterNode);\n\n            return nativeBiquadFilterNode;\n        };\n\n        return {\n            render(proxy: IBiquadFilterNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext): Promise<TNativeBiquadFilterNode> {\n                const renderedNativeBiquadFilterNode = renderedNativeBiquadFilterNodes.get(nativeOfflineAudioContext);\n\n                if (renderedNativeBiquadFilterNode !== undefined) {\n                    return Promise.resolve(renderedNativeBiquadFilterNode);\n                }\n\n                return createBiquadFilterNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n","import { TSetAudioNodeTailTimeFactory } from '../types';\n\nexport const createSetAudioNodeTailTime: TSetAudioNodeTailTimeFactory = (audioNodeTailTimeStore) => {\n    return (audioNode, tailTime) => audioNodeTailTimeStore.set(audioNode, tailTime);\n};\n","import { TMonitorConnectionsFactory, TNativeAudioNode, TNativeAudioParam } from '../types';\n\nexport const createMonitorConnections: TMonitorConnectionsFactory = (insertElementInSet, isNativeAudioNode) => {\n    return (nativeAudioNode, whenConnected, whenDisconnected) => {\n        const connections = new Set<[TNativeAudioNode, number, number] | [TNativeAudioParam, number]>();\n\n        nativeAudioNode.connect = <TNativeAudioNode['connect']>((connect) => {\n            // tslint:disable-next-line:invalid-void no-inferrable-types\n            return (destination: TNativeAudioNode | TNativeAudioParam, output = 0, input: number = 0): void | TNativeAudioNode => {\n                const wasDisconnected = connections.size === 0;\n\n                if (isNativeAudioNode(destination)) {\n                    // @todo TypeScript cannot infer the overloaded signature with 3 arguments yet.\n                    (<(destination: TNativeAudioNode, output?: number, input?: number) => TNativeAudioNode>connect).call(\n                        nativeAudioNode,\n                        destination,\n                        output,\n                        input\n                    );\n\n                    insertElementInSet(\n                        connections,\n                        [destination, output, input],\n                        (connection) => connection[0] === destination && connection[1] === output && connection[2] === input,\n                        true\n                    );\n\n                    if (wasDisconnected) {\n                        whenConnected();\n                    }\n\n                    return destination;\n                }\n\n                connect.call(nativeAudioNode, destination, output);\n\n                insertElementInSet(\n                    connections,\n                    [destination, output],\n                    (connection) => connection[0] === destination && connection[1] === output,\n                    true\n                );\n\n                if (wasDisconnected) {\n                    whenConnected();\n                }\n\n                return;\n            };\n        })(nativeAudioNode.connect);\n\n        nativeAudioNode.disconnect = ((disconnect) => {\n            return (destinationOrOutput?: number | TNativeAudioNode | TNativeAudioParam, output?: number, input?: number): void => {\n                const wasConnected = connections.size > 0;\n\n                if (destinationOrOutput === undefined) {\n                    disconnect.apply(nativeAudioNode);\n\n                    connections.clear();\n                } else if (typeof destinationOrOutput === 'number') {\n                    // @todo TypeScript cannot infer the overloaded signature with 1 argument yet.\n                    (<(output: number) => void>disconnect).call(nativeAudioNode, destinationOrOutput);\n\n                    for (const connection of connections) {\n                        if (connection[1] === destinationOrOutput) {\n                            connections.delete(connection);\n                        }\n                    }\n                } else {\n                    if (isNativeAudioNode(destinationOrOutput)) {\n                        // @todo TypeScript cannot infer the overloaded signature with 3 arguments yet.\n                        (<(destination: TNativeAudioNode, output?: number, input?: number) => void>disconnect).call(\n                            nativeAudioNode,\n                            destinationOrOutput,\n                            output,\n                            input\n                        );\n                    } else {\n                        // @todo TypeScript cannot infer the overloaded signature with 2 arguments yet.\n                        (<(destination: TNativeAudioParam, output?: number) => void>disconnect).call(\n                            nativeAudioNode,\n                            destinationOrOutput,\n                            output\n                        );\n                    }\n\n                    for (const connection of connections) {\n                        if (\n                            connection[0] === destinationOrOutput &&\n                            (output === undefined || connection[1] === output) &&\n                            (input === undefined || connection[2] === input)\n                        ) {\n                            connections.delete(connection);\n                        }\n                    }\n                }\n\n                const isDisconnected = connections.size === 0;\n\n                if (wasConnected && isDisconnected) {\n                    whenDisconnected();\n                }\n            };\n        })(nativeAudioNode.disconnect);\n\n        return nativeAudioNode;\n    };\n};\n","import { TWrapChannelMergerNodeFactory } from '../types';\n\nexport const createWrapChannelMergerNode: TWrapChannelMergerNodeFactory = (createInvalidStateError, monitorConnections) => {\n    return (nativeContext, channelMergerNode) => {\n        // Bug #15: Safari does not return the default properties.\n        channelMergerNode.channelCount = 1;\n        channelMergerNode.channelCountMode = 'explicit';\n\n        // Bug #16: Safari does not throw an error when setting a different channelCount or channelCountMode.\n        Object.defineProperty(channelMergerNode, 'channelCount', {\n            get: () => 1,\n            set: () => {\n                throw createInvalidStateError();\n            }\n        });\n\n        Object.defineProperty(channelMergerNode, 'channelCountMode', {\n            get: () => 'explicit',\n            set: () => {\n                throw createInvalidStateError();\n            }\n        });\n\n        // Bug #20: Safari requires a connection of any kind to treat the input signal correctly.\n        const audioBufferSourceNode = nativeContext.createBufferSource();\n\n        const whenConnected = () => {\n            const length = channelMergerNode.numberOfInputs;\n\n            for (let i = 0; i < length; i += 1) {\n                audioBufferSourceNode.connect(channelMergerNode, 0, i);\n            }\n        };\n        const whenDisconnected = () => audioBufferSourceNode.disconnect(channelMergerNode);\n\n        monitorConnections(channelMergerNode, whenConnected, whenDisconnected);\n    };\n};\n","import { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { TNativeChannelMergerNodeFactoryFactory } from '../types';\n\nexport const createNativeChannelMergerNodeFactory: TNativeChannelMergerNodeFactoryFactory = (\n    nativeAudioContextConstructor,\n    wrapChannelMergerNode\n) => {\n    return (nativeContext, options) => {\n        const nativeChannelMergerNode = nativeContext.createChannelMerger(options.numberOfInputs);\n\n        /*\n         * Bug #20: Safari requires a connection of any kind to treat the input signal correctly.\n         * @todo Unfortunately there is no way to test for this behavior in a synchronous fashion which is why testing for the existence of\n         * the webkitAudioContext is used as a workaround here.\n         */\n        if (nativeAudioContextConstructor !== null && nativeAudioContextConstructor.name === 'webkitAudioContext') {\n            wrapChannelMergerNode(nativeContext, nativeChannelMergerNode);\n        }\n\n        assignNativeAudioNodeOptions(nativeChannelMergerNode, options);\n\n        return nativeChannelMergerNode;\n    };\n};\n","import { isOwnedByContext } from '../helpers/is-owned-by-context';\nimport { IAudioNode, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\nimport { TChannelMergerNodeRendererFactoryFactory, TNativeAudioNode, TNativeOfflineAudioContext } from '../types';\n\nexport const createChannelMergerNodeRendererFactory: TChannelMergerNodeRendererFactoryFactory = (\n    createNativeChannelMergerNode,\n    getNativeAudioNode,\n    renderInputsOfAudioNode\n) => {\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>() => {\n        const renderedNativeAudioNodes = new WeakMap<TNativeOfflineAudioContext, TNativeAudioNode>();\n\n        const createAudioNode = async (proxy: IAudioNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext) => {\n            let nativeAudioNode = getNativeAudioNode<T, TNativeAudioNode>(proxy);\n\n            // If the initially used nativeAudioNode was not constructed on the same OfflineAudioContext it needs to be created again.\n            const nativeAudioNodeIsOwnedByContext = isOwnedByContext(nativeAudioNode, nativeOfflineAudioContext);\n\n            if (!nativeAudioNodeIsOwnedByContext) {\n                const options = {\n                    channelCount: nativeAudioNode.channelCount,\n                    channelCountMode: nativeAudioNode.channelCountMode,\n                    channelInterpretation: nativeAudioNode.channelInterpretation,\n                    numberOfInputs: nativeAudioNode.numberOfInputs\n                };\n\n                nativeAudioNode = createNativeChannelMergerNode(nativeOfflineAudioContext, options);\n            }\n\n            renderedNativeAudioNodes.set(nativeOfflineAudioContext, nativeAudioNode);\n\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeAudioNode);\n\n            return nativeAudioNode;\n        };\n\n        return {\n            render(proxy: IAudioNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext): Promise<TNativeAudioNode> {\n                const renderedNativeAudioNode = renderedNativeAudioNodes.get(nativeOfflineAudioContext);\n\n                if (renderedNativeAudioNode !== undefined) {\n                    return Promise.resolve(renderedNativeAudioNode);\n                }\n\n                return createAudioNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n","import { isOwnedByContext } from '../helpers/is-owned-by-context';\nimport { IAudioNode, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\nimport { TChannelSplitterNodeRendererFactoryFactory, TNativeAudioNode, TNativeOfflineAudioContext } from '../types';\n\nexport const createChannelSplitterNodeRendererFactory: TChannelSplitterNodeRendererFactoryFactory = (\n    createNativeChannelSplitterNode,\n    getNativeAudioNode,\n    renderInputsOfAudioNode\n) => {\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>() => {\n        const renderedNativeAudioNodes = new WeakMap<TNativeOfflineAudioContext, TNativeAudioNode>();\n\n        const createAudioNode = async (proxy: IAudioNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext) => {\n            let nativeAudioNode = getNativeAudioNode<T, TNativeAudioNode>(proxy);\n\n            // If the initially used nativeAudioNode was not constructed on the same OfflineAudioContext it needs to be created again.\n            const nativeAudioNodeIsOwnedByContext = isOwnedByContext(nativeAudioNode, nativeOfflineAudioContext);\n\n            if (!nativeAudioNodeIsOwnedByContext) {\n                const options = {\n                    channelCount: nativeAudioNode.channelCount,\n                    channelCountMode: nativeAudioNode.channelCountMode,\n                    channelInterpretation: nativeAudioNode.channelInterpretation,\n                    numberOfOutputs: nativeAudioNode.numberOfOutputs\n                };\n\n                nativeAudioNode = createNativeChannelSplitterNode(nativeOfflineAudioContext, options);\n            }\n\n            renderedNativeAudioNodes.set(nativeOfflineAudioContext, nativeAudioNode);\n\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeAudioNode);\n\n            return nativeAudioNode;\n        };\n\n        return {\n            render(proxy: IAudioNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext): Promise<TNativeAudioNode> {\n                const renderedNativeAudioNode = renderedNativeAudioNodes.get(nativeOfflineAudioContext);\n\n                if (renderedNativeAudioNode !== undefined) {\n                    return Promise.resolve(renderedNativeAudioNode);\n                }\n\n                return createAudioNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n","import { TSanitizeChannelSplitterOptionsFunction } from '../types';\n\nexport const sanitizeChannelSplitterOptions: TSanitizeChannelSplitterOptionsFunction = (options) => {\n    return { ...options, channelCount: options.numberOfOutputs };\n};\n","import { interceptConnections } from '../helpers/intercept-connections';\nimport {\n    TNativeAudioBufferSourceNode,\n    TNativeAudioNode,\n    TNativeConstantSourceNode,\n    TNativeConstantSourceNodeFakerFactoryFactory\n} from '../types';\n\nexport const createNativeConstantSourceNodeFakerFactory: TNativeConstantSourceNodeFakerFactoryFactory = (\n    addSilentConnection,\n    createNativeAudioBufferSourceNode,\n    createNativeGainNode,\n    monitorConnections\n) => {\n    return (nativeContext, { offset, ...audioNodeOptions }) => {\n        const audioBuffer = nativeContext.createBuffer(1, 2, 44100);\n        const audioBufferSourceNode = createNativeAudioBufferSourceNode(nativeContext, {\n            buffer: null,\n            channelCount: 2,\n            channelCountMode: 'max',\n            channelInterpretation: 'speakers',\n            loop: false,\n            loopEnd: 0,\n            loopStart: 0,\n            playbackRate: 1\n        });\n        const gainNode = createNativeGainNode(nativeContext, { ...audioNodeOptions, gain: offset });\n\n        // Bug #5: Safari does not support copyFromChannel() and copyToChannel().\n        const channelData = audioBuffer.getChannelData(0);\n\n        // Bug #95: Safari does not play or loop one sample buffers.\n        channelData[0] = 1;\n        channelData[1] = 1;\n\n        audioBufferSourceNode.buffer = audioBuffer;\n        audioBufferSourceNode.loop = true;\n\n        const nativeConstantSourceNodeFaker = {\n            get bufferSize(): undefined {\n                return undefined;\n            },\n            get channelCount(): number {\n                return gainNode.channelCount;\n            },\n            set channelCount(value) {\n                gainNode.channelCount = value;\n            },\n            get channelCountMode(): TNativeConstantSourceNode['channelCountMode'] {\n                return gainNode.channelCountMode;\n            },\n            set channelCountMode(value) {\n                gainNode.channelCountMode = value;\n            },\n            get channelInterpretation(): TNativeConstantSourceNode['channelInterpretation'] {\n                return gainNode.channelInterpretation;\n            },\n            set channelInterpretation(value) {\n                gainNode.channelInterpretation = value;\n            },\n            get context(): TNativeConstantSourceNode['context'] {\n                return gainNode.context;\n            },\n            get inputs(): TNativeAudioNode[] {\n                return [];\n            },\n            get numberOfInputs(): number {\n                return audioBufferSourceNode.numberOfInputs;\n            },\n            get numberOfOutputs(): number {\n                return gainNode.numberOfOutputs;\n            },\n            get offset(): TNativeConstantSourceNode['offset'] {\n                return gainNode.gain;\n            },\n            get onended(): TNativeConstantSourceNode['onended'] {\n                return audioBufferSourceNode.onended;\n            },\n            set onended(value) {\n                audioBufferSourceNode.onended = <TNativeAudioBufferSourceNode['onended']>value;\n            },\n            addEventListener(...args: any[]): void {\n                return audioBufferSourceNode.addEventListener(args[0], args[1], args[2]);\n            },\n            dispatchEvent(...args: any[]): boolean {\n                return audioBufferSourceNode.dispatchEvent(args[0]);\n            },\n            removeEventListener(...args: any[]): void {\n                return audioBufferSourceNode.removeEventListener(args[0], args[1], args[2]);\n            },\n            start(when = 0): void {\n                audioBufferSourceNode.start.call(audioBufferSourceNode, when);\n            },\n            stop(when = 0): void {\n                audioBufferSourceNode.stop.call(audioBufferSourceNode, when);\n            }\n        };\n\n        const whenConnected = () => audioBufferSourceNode.connect(gainNode);\n        const whenDisconnected = () => audioBufferSourceNode.disconnect(gainNode);\n\n        // Bug #175: Safari will not fire an ended event if the AudioBufferSourceNode is unconnected.\n        addSilentConnection(nativeContext, audioBufferSourceNode);\n\n        return monitorConnections(interceptConnections(nativeConstantSourceNodeFaker, gainNode), whenConnected, whenDisconnected);\n    };\n};\n","import { assignNativeAudioNodeAudioParamValue } from '../helpers/assign-native-audio-node-audio-param-value';\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { wrapAudioScheduledSourceNodeStartMethodNegativeParameters } from '../helpers/wrap-audio-scheduled-source-node-start-method-negative-parameters';\nimport { wrapAudioScheduledSourceNodeStopMethodNegativeParameters } from '../helpers/wrap-audio-scheduled-source-node-stop-method-negative-parameters';\nimport { TNativeConstantSourceNodeFactoryFactory } from '../types';\n\nexport const createNativeConstantSourceNodeFactory: TNativeConstantSourceNodeFactoryFactory = (\n    addSilentConnection,\n    cacheTestResult,\n    createNativeConstantSourceNodeFaker,\n    testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,\n    testAudioScheduledSourceNodeStopMethodNegativeParametersSupport\n) => {\n    return (nativeContext, options) => {\n        // Bug #62: Safari does not support ConstantSourceNodes.\n        if (nativeContext.createConstantSource === undefined) {\n            return createNativeConstantSourceNodeFaker(nativeContext, options);\n        }\n\n        const nativeConstantSourceNode = nativeContext.createConstantSource();\n\n        assignNativeAudioNodeOptions(nativeConstantSourceNode, options);\n\n        assignNativeAudioNodeAudioParamValue(nativeConstantSourceNode, options, 'offset');\n\n        // Bug #44: Safari does not throw a RangeError yet.\n        if (\n            !cacheTestResult(testAudioScheduledSourceNodeStartMethodNegativeParametersSupport, () =>\n                testAudioScheduledSourceNodeStartMethodNegativeParametersSupport(nativeContext)\n            )\n        ) {\n            wrapAudioScheduledSourceNodeStartMethodNegativeParameters(nativeConstantSourceNode);\n        }\n\n        // Bug #44: Only Firefox does not throw a RangeError yet.\n        if (\n            !cacheTestResult(testAudioScheduledSourceNodeStopMethodNegativeParametersSupport, () =>\n                testAudioScheduledSourceNodeStopMethodNegativeParametersSupport(nativeContext)\n            )\n        ) {\n            wrapAudioScheduledSourceNodeStopMethodNegativeParameters(nativeConstantSourceNode);\n        }\n\n        // Bug #175: Safari will not fire an ended event if the ConstantSourceNode is unconnected.\n        addSilentConnection(nativeContext, nativeConstantSourceNode);\n\n        return nativeConstantSourceNode;\n    };\n};\n","import { isOwnedByContext } from '../helpers/is-owned-by-context';\nimport { IConstantSourceNode, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\nimport { TConstantSourceNodeRendererFactoryFactory, TNativeConstantSourceNode, TNativeOfflineAudioContext } from '../types';\n\nexport const createConstantSourceNodeRendererFactory: TConstantSourceNodeRendererFactoryFactory = (\n    connectAudioParam,\n    createNativeConstantSourceNode,\n    getNativeAudioNode,\n    renderAutomation,\n    renderInputsOfAudioNode\n) => {\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>() => {\n        const renderedNativeConstantSourceNodes = new WeakMap<TNativeOfflineAudioContext, TNativeConstantSourceNode>();\n\n        let start: null | number = null;\n        let stop: null | number = null;\n\n        const createConstantSourceNode = async (proxy: IConstantSourceNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext) => {\n            let nativeConstantSourceNode = getNativeAudioNode<T, TNativeConstantSourceNode>(proxy);\n\n            /*\n             * If the initially used nativeConstantSourceNode was not constructed on the same OfflineAudioContext it needs to be created\n             * again.\n             */\n            const nativeConstantSourceNodeIsOwnedByContext = isOwnedByContext(nativeConstantSourceNode, nativeOfflineAudioContext);\n\n            if (!nativeConstantSourceNodeIsOwnedByContext) {\n                const options = {\n                    channelCount: nativeConstantSourceNode.channelCount,\n                    channelCountMode: nativeConstantSourceNode.channelCountMode,\n                    channelInterpretation: nativeConstantSourceNode.channelInterpretation,\n                    offset: nativeConstantSourceNode.offset.value\n                };\n\n                nativeConstantSourceNode = createNativeConstantSourceNode(nativeOfflineAudioContext, options);\n\n                if (start !== null) {\n                    nativeConstantSourceNode.start(start);\n                }\n\n                if (stop !== null) {\n                    nativeConstantSourceNode.stop(stop);\n                }\n            }\n\n            renderedNativeConstantSourceNodes.set(nativeOfflineAudioContext, nativeConstantSourceNode);\n\n            if (!nativeConstantSourceNodeIsOwnedByContext) {\n                await renderAutomation(nativeOfflineAudioContext, proxy.offset, nativeConstantSourceNode.offset);\n            } else {\n                await connectAudioParam(nativeOfflineAudioContext, proxy.offset, nativeConstantSourceNode.offset);\n            }\n\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeConstantSourceNode);\n\n            return nativeConstantSourceNode;\n        };\n\n        return {\n            set start(value: number) {\n                start = value;\n            },\n            set stop(value: number) {\n                stop = value;\n            },\n            render(\n                proxy: IConstantSourceNode<T>,\n                nativeOfflineAudioContext: TNativeOfflineAudioContext\n            ): Promise<TNativeConstantSourceNode> {\n                const renderedNativeConstantSourceNode = renderedNativeConstantSourceNodes.get(nativeOfflineAudioContext);\n\n                if (renderedNativeConstantSourceNode !== undefined) {\n                    return Promise.resolve(renderedNativeConstantSourceNode);\n                }\n\n                return createConstantSourceNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n","import { assignNativeAudioNodeOption } from '../helpers/assign-native-audio-node-option';\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { TNativeConvolverNodeFactoryFactory } from '../types';\n\nexport const createNativeConvolverNodeFactory: TNativeConvolverNodeFactoryFactory = (createNotSupportedError, overwriteAccessors) => {\n    return (nativeContext, options) => {\n        const nativeConvolverNode = nativeContext.createConvolver();\n\n        assignNativeAudioNodeOptions(nativeConvolverNode, options);\n\n        // The normalize property needs to be set before setting the buffer.\n        if (options.disableNormalization === nativeConvolverNode.normalize) {\n            nativeConvolverNode.normalize = !options.disableNormalization;\n        }\n\n        assignNativeAudioNodeOption(nativeConvolverNode, options, 'buffer');\n\n        // Bug #113: Safari does allow to set the channelCount to a value larger than 2.\n        if (options.channelCount > 2) {\n            throw createNotSupportedError();\n        }\n\n        overwriteAccessors(\n            nativeConvolverNode,\n            'channelCount',\n            (get) => () => get.call(nativeConvolverNode),\n            (set) => (value) => {\n                if (value > 2) {\n                    throw createNotSupportedError();\n                }\n\n                return set.call(nativeConvolverNode, value);\n            }\n        );\n\n        // Bug #114: Safari allows to set the channelCountMode to 'max'.\n        if (options.channelCountMode === 'max') {\n            throw createNotSupportedError();\n        }\n\n        overwriteAccessors(\n            nativeConvolverNode,\n            'channelCountMode',\n            (get) => () => get.call(nativeConvolverNode),\n            (set) => (value) => {\n                if (value === 'max') {\n                    throw createNotSupportedError();\n                }\n\n                return set.call(nativeConvolverNode, value);\n            }\n        );\n\n        return nativeConvolverNode;\n    };\n};\n","import { isNativeAudioNodeFaker } from '../guards/native-audio-node-faker';\nimport { isOwnedByContext } from '../helpers/is-owned-by-context';\nimport { IConvolverNode, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\nimport { TConvolverNodeRendererFactoryFactory, TNativeConvolverNode, TNativeOfflineAudioContext } from '../types';\n\nexport const createConvolverNodeRendererFactory: TConvolverNodeRendererFactoryFactory = (\n    createNativeConvolverNode,\n    getNativeAudioNode,\n    renderInputsOfAudioNode\n) => {\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>() => {\n        const renderedNativeConvolverNodes = new WeakMap<TNativeOfflineAudioContext, TNativeConvolverNode>();\n\n        const createConvolverNode = async (proxy: IConvolverNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext) => {\n            let nativeConvolverNode = getNativeAudioNode<T, TNativeConvolverNode>(proxy);\n\n            // If the initially used nativeConvolverNode was not constructed on the same OfflineAudioContext it needs to be created again.\n            const nativeConvolverNodeIsOwnedByContext = isOwnedByContext(nativeConvolverNode, nativeOfflineAudioContext);\n\n            if (!nativeConvolverNodeIsOwnedByContext) {\n                const options = {\n                    buffer: nativeConvolverNode.buffer,\n                    channelCount: nativeConvolverNode.channelCount,\n                    channelCountMode: nativeConvolverNode.channelCountMode,\n                    channelInterpretation: nativeConvolverNode.channelInterpretation,\n                    disableNormalization: !nativeConvolverNode.normalize\n                };\n\n                nativeConvolverNode = createNativeConvolverNode(nativeOfflineAudioContext, options);\n            }\n\n            renderedNativeConvolverNodes.set(nativeOfflineAudioContext, nativeConvolverNode);\n\n            if (isNativeAudioNodeFaker(nativeConvolverNode)) {\n                await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeConvolverNode.inputs[0]);\n            } else {\n                await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeConvolverNode);\n            }\n\n            return nativeConvolverNode;\n        };\n\n        return {\n            render(proxy: IConvolverNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext): Promise<TNativeConvolverNode> {\n                const renderedNativeConvolverNode = renderedNativeConvolverNodes.get(nativeOfflineAudioContext);\n\n                if (renderedNativeConvolverNode !== undefined) {\n                    return Promise.resolve(renderedNativeConvolverNode);\n                }\n\n                return createConvolverNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n","import { isOwnedByContext } from '../helpers/is-owned-by-context';\nimport { IDelayNode, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\nimport { TDelayNodeRendererFactoryFactory, TNativeDelayNode, TNativeOfflineAudioContext } from '../types';\n\nexport const createDelayNodeRendererFactory: TDelayNodeRendererFactoryFactory = (\n    connectAudioParam,\n    createNativeDelayNode,\n    getNativeAudioNode,\n    renderAutomation,\n    renderInputsOfAudioNode\n) => {\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>(maxDelayTime: number) => {\n        const renderedNativeDelayNodes = new WeakMap<TNativeOfflineAudioContext, TNativeDelayNode>();\n\n        const createDelayNode = async (proxy: IDelayNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext) => {\n            let nativeDelayNode = getNativeAudioNode<T, TNativeDelayNode>(proxy);\n\n            // If the initially used nativeDelayNode was not constructed on the same OfflineAudioContext it needs to be created again.\n            const nativeDelayNodeIsOwnedByContext = isOwnedByContext(nativeDelayNode, nativeOfflineAudioContext);\n\n            if (!nativeDelayNodeIsOwnedByContext) {\n                const options = {\n                    channelCount: nativeDelayNode.channelCount,\n                    channelCountMode: nativeDelayNode.channelCountMode,\n                    channelInterpretation: nativeDelayNode.channelInterpretation,\n                    delayTime: nativeDelayNode.delayTime.value,\n                    maxDelayTime\n                };\n\n                nativeDelayNode = createNativeDelayNode(nativeOfflineAudioContext, options);\n            }\n\n            renderedNativeDelayNodes.set(nativeOfflineAudioContext, nativeDelayNode);\n\n            if (!nativeDelayNodeIsOwnedByContext) {\n                await renderAutomation(nativeOfflineAudioContext, proxy.delayTime, nativeDelayNode.delayTime);\n            } else {\n                await connectAudioParam(nativeOfflineAudioContext, proxy.delayTime, nativeDelayNode.delayTime);\n            }\n\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeDelayNode);\n\n            return nativeDelayNode;\n        };\n\n        return {\n            render(proxy: IDelayNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext): Promise<TNativeDelayNode> {\n                const renderedNativeDelayNode = renderedNativeDelayNodes.get(nativeOfflineAudioContext);\n\n                if (renderedNativeDelayNode !== undefined) {\n                    return Promise.resolve(renderedNativeDelayNode);\n                }\n\n                return createDelayNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n","import { assignNativeAudioNodeAudioParamValue } from '../helpers/assign-native-audio-node-audio-param-value';\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { TNativeDynamicsCompressorNodeFactoryFactory } from '../types';\n\nexport const createNativeDynamicsCompressorNodeFactory: TNativeDynamicsCompressorNodeFactoryFactory = (createNotSupportedError) => {\n    return (nativeContext, options) => {\n        const nativeDynamicsCompressorNode = nativeContext.createDynamicsCompressor();\n\n        assignNativeAudioNodeOptions(nativeDynamicsCompressorNode, options);\n\n        // Bug #108: Safari allows a channelCount of three and above.\n        if (options.channelCount > 2) {\n            throw createNotSupportedError();\n        }\n\n        // Bug #109: Only Chrome and Firefox disallow a channelCountMode of 'max'.\n        if (options.channelCountMode === 'max') {\n            throw createNotSupportedError();\n        }\n\n        assignNativeAudioNodeAudioParamValue(nativeDynamicsCompressorNode, options, 'attack');\n        assignNativeAudioNodeAudioParamValue(nativeDynamicsCompressorNode, options, 'knee');\n        assignNativeAudioNodeAudioParamValue(nativeDynamicsCompressorNode, options, 'ratio');\n        assignNativeAudioNodeAudioParamValue(nativeDynamicsCompressorNode, options, 'release');\n        assignNativeAudioNodeAudioParamValue(nativeDynamicsCompressorNode, options, 'threshold');\n\n        return nativeDynamicsCompressorNode;\n    };\n};\n","import { isOwnedByContext } from '../helpers/is-owned-by-context';\nimport { IDynamicsCompressorNode, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\nimport { TDynamicsCompressorNodeRendererFactoryFactory, TNativeDynamicsCompressorNode, TNativeOfflineAudioContext } from '../types';\n\nexport const createDynamicsCompressorNodeRendererFactory: TDynamicsCompressorNodeRendererFactoryFactory = (\n    connectAudioParam,\n    createNativeDynamicsCompressorNode,\n    getNativeAudioNode,\n    renderAutomation,\n    renderInputsOfAudioNode\n) => {\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>() => {\n        const renderedNativeDynamicsCompressorNodes = new WeakMap<TNativeOfflineAudioContext, TNativeDynamicsCompressorNode>();\n\n        const createDynamicsCompressorNode = async (\n            proxy: IDynamicsCompressorNode<T>,\n            nativeOfflineAudioContext: TNativeOfflineAudioContext\n        ) => {\n            let nativeDynamicsCompressorNode = getNativeAudioNode<T, TNativeDynamicsCompressorNode>(proxy);\n\n            /*\n             * If the initially used nativeDynamicsCompressorNode was not constructed on the same OfflineAudioContext it needs to be\n             * created again.\n             */\n            const nativeDynamicsCompressorNodeIsOwnedByContext = isOwnedByContext(nativeDynamicsCompressorNode, nativeOfflineAudioContext);\n\n            if (!nativeDynamicsCompressorNodeIsOwnedByContext) {\n                const options = {\n                    attack: nativeDynamicsCompressorNode.attack.value,\n                    channelCount: nativeDynamicsCompressorNode.channelCount,\n                    channelCountMode: nativeDynamicsCompressorNode.channelCountMode,\n                    channelInterpretation: nativeDynamicsCompressorNode.channelInterpretation,\n                    knee: nativeDynamicsCompressorNode.knee.value,\n                    ratio: nativeDynamicsCompressorNode.ratio.value,\n                    release: nativeDynamicsCompressorNode.release.value,\n                    threshold: nativeDynamicsCompressorNode.threshold.value\n                };\n\n                nativeDynamicsCompressorNode = createNativeDynamicsCompressorNode(nativeOfflineAudioContext, options);\n            }\n\n            renderedNativeDynamicsCompressorNodes.set(nativeOfflineAudioContext, nativeDynamicsCompressorNode);\n\n            if (!nativeDynamicsCompressorNodeIsOwnedByContext) {\n                await renderAutomation(nativeOfflineAudioContext, proxy.attack, nativeDynamicsCompressorNode.attack);\n                await renderAutomation(nativeOfflineAudioContext, proxy.knee, nativeDynamicsCompressorNode.knee);\n                await renderAutomation(nativeOfflineAudioContext, proxy.ratio, nativeDynamicsCompressorNode.ratio);\n                await renderAutomation(nativeOfflineAudioContext, proxy.release, nativeDynamicsCompressorNode.release);\n                await renderAutomation(nativeOfflineAudioContext, proxy.threshold, nativeDynamicsCompressorNode.threshold);\n            } else {\n                await connectAudioParam(nativeOfflineAudioContext, proxy.attack, nativeDynamicsCompressorNode.attack);\n                await connectAudioParam(nativeOfflineAudioContext, proxy.knee, nativeDynamicsCompressorNode.knee);\n                await connectAudioParam(nativeOfflineAudioContext, proxy.ratio, nativeDynamicsCompressorNode.ratio);\n                await connectAudioParam(nativeOfflineAudioContext, proxy.release, nativeDynamicsCompressorNode.release);\n                await connectAudioParam(nativeOfflineAudioContext, proxy.threshold, nativeDynamicsCompressorNode.threshold);\n            }\n\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeDynamicsCompressorNode);\n\n            return nativeDynamicsCompressorNode;\n        };\n\n        return {\n            render(\n                proxy: IDynamicsCompressorNode<T>,\n                nativeOfflineAudioContext: TNativeOfflineAudioContext\n            ): Promise<TNativeDynamicsCompressorNode> {\n                const renderedNativeDynamicsCompressorNode = renderedNativeDynamicsCompressorNodes.get(nativeOfflineAudioContext);\n\n                if (renderedNativeDynamicsCompressorNode !== undefined) {\n                    return Promise.resolve(renderedNativeDynamicsCompressorNode);\n                }\n\n                return createDynamicsCompressorNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n","import { isOwnedByContext } from '../helpers/is-owned-by-context';\nimport { IGainNode, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\nimport { TGainNodeRendererFactoryFactory, TNativeGainNode, TNativeOfflineAudioContext } from '../types';\n\nexport const createGainNodeRendererFactory: TGainNodeRendererFactoryFactory = (\n    connectAudioParam,\n    createNativeGainNode,\n    getNativeAudioNode,\n    renderAutomation,\n    renderInputsOfAudioNode\n) => {\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>() => {\n        const renderedNativeGainNodes = new WeakMap<TNativeOfflineAudioContext, TNativeGainNode>();\n\n        const createGainNode = async (proxy: IGainNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext) => {\n            let nativeGainNode = getNativeAudioNode<T, TNativeGainNode>(proxy);\n\n            // If the initially used nativeGainNode was not constructed on the same OfflineAudioContext it needs to be created again.\n            const nativeGainNodeIsOwnedByContext = isOwnedByContext(nativeGainNode, nativeOfflineAudioContext);\n\n            if (!nativeGainNodeIsOwnedByContext) {\n                const options = {\n                    channelCount: nativeGainNode.channelCount,\n                    channelCountMode: nativeGainNode.channelCountMode,\n                    channelInterpretation: nativeGainNode.channelInterpretation,\n                    gain: nativeGainNode.gain.value\n                };\n\n                nativeGainNode = createNativeGainNode(nativeOfflineAudioContext, options);\n            }\n\n            renderedNativeGainNodes.set(nativeOfflineAudioContext, nativeGainNode);\n\n            if (!nativeGainNodeIsOwnedByContext) {\n                await renderAutomation(nativeOfflineAudioContext, proxy.gain, nativeGainNode.gain);\n            } else {\n                await connectAudioParam(nativeOfflineAudioContext, proxy.gain, nativeGainNode.gain);\n            }\n\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeGainNode);\n\n            return nativeGainNode;\n        };\n\n        return {\n            render(proxy: IGainNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext): Promise<TNativeGainNode> {\n                const renderedNativeGainNode = renderedNativeGainNodes.get(nativeOfflineAudioContext);\n\n                if (renderedNativeGainNode !== undefined) {\n                    return Promise.resolve(renderedNativeGainNode);\n                }\n\n                return createGainNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n","import { testPromiseSupport } from '../helpers/test-promise-support';\nimport { IOfflineAudioCompletionEvent } from '../interfaces';\nimport { TNativeAudioBuffer, TRenderNativeOfflineAudioContextFactory } from '../types';\n\nexport const createRenderNativeOfflineAudioContext: TRenderNativeOfflineAudioContextFactory = (\n    cacheTestResult,\n    createNativeGainNode,\n    createNativeScriptProcessorNode,\n    testOfflineAudioContextCurrentTimeSupport\n) => {\n    return (nativeOfflineAudioContext) => {\n        // Bug #21: Safari does not support promises yet.\n        if (cacheTestResult(testPromiseSupport, () => testPromiseSupport(nativeOfflineAudioContext))) {\n            // Bug #158: Chrome and Edge do not advance currentTime if it is not accessed while rendering the audio.\n            return Promise.resolve(\n                cacheTestResult(testOfflineAudioContextCurrentTimeSupport, testOfflineAudioContextCurrentTimeSupport)\n            ).then((isOfflineAudioContextCurrentTimeSupported) => {\n                if (!isOfflineAudioContextCurrentTimeSupported) {\n                    const scriptProcessorNode = createNativeScriptProcessorNode(nativeOfflineAudioContext, 512, 0, 1);\n\n                    nativeOfflineAudioContext.oncomplete = () => {\n                        scriptProcessorNode.onaudioprocess = null; // tslint:disable-line:deprecation\n                        scriptProcessorNode.disconnect();\n                    };\n                    scriptProcessorNode.onaudioprocess = () => nativeOfflineAudioContext.currentTime; // tslint:disable-line:deprecation\n\n                    scriptProcessorNode.connect(nativeOfflineAudioContext.destination);\n                }\n\n                return nativeOfflineAudioContext.startRendering();\n            });\n        }\n\n        return new Promise<TNativeAudioBuffer>((resolve) => {\n            // Bug #48: Safari does not render an OfflineAudioContext without any connected node.\n            const gainNode = createNativeGainNode(nativeOfflineAudioContext, {\n                channelCount: 1,\n                channelCountMode: 'explicit',\n                channelInterpretation: 'discrete',\n                gain: 0\n            });\n\n            nativeOfflineAudioContext.oncomplete = (event: IOfflineAudioCompletionEvent) => {\n                gainNode.disconnect();\n\n                resolve(event.renderedBuffer);\n            };\n\n            gainNode.connect(nativeOfflineAudioContext.destination);\n\n            nativeOfflineAudioContext.startRendering();\n        });\n    };\n};\n","import { TTestOfflineAudioContextCurrentTimeSupportFactory } from '../types';\n\nexport const createTestOfflineAudioContextCurrentTimeSupport: TTestOfflineAudioContextCurrentTimeSupportFactory = (\n    createNativeGainNode,\n    nativeOfflineAudioContextConstructor\n) => {\n    return () => {\n        if (nativeOfflineAudioContextConstructor === null) {\n            return Promise.resolve(false);\n        }\n\n        const nativeOfflineAudioContext = new nativeOfflineAudioContextConstructor(1, 1, 44100);\n\n        // Bug #48: Safari does not render an OfflineAudioContext without any connected node.\n        const gainNode = createNativeGainNode(nativeOfflineAudioContext, {\n            channelCount: 1,\n            channelCountMode: 'explicit',\n            channelInterpretation: 'discrete',\n            gain: 0\n        });\n\n        // Bug #21: Safari does not support promises yet.\n        return new Promise((resolve) => {\n            nativeOfflineAudioContext.oncomplete = () => {\n                gainNode.disconnect();\n\n                resolve(nativeOfflineAudioContext.currentTime !== 0);\n            };\n            nativeOfflineAudioContext.startRendering();\n        });\n    };\n};\n","import { filterBuffer } from '../helpers/filter-buffer';\nimport { isOwnedByContext } from '../helpers/is-owned-by-context';\nimport { IIIRFilterNode, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\nimport {\n    TIIRFilterNodeRendererFactoryFactory,\n    TNativeAudioBuffer,\n    TNativeAudioBufferSourceNode,\n    TNativeIIRFilterNode,\n    TNativeOfflineAudioContext\n} from '../types';\n\nconst filterFullBuffer = (\n    renderedBuffer: TNativeAudioBuffer,\n    nativeOfflineAudioContext: TNativeOfflineAudioContext,\n    feedback: Iterable<number>,\n    feedforward: Iterable<number>\n) => {\n    const convertedFeedback = feedback instanceof Float64Array ? feedback : new Float64Array(feedback);\n    const convertedFeedforward = feedforward instanceof Float64Array ? feedforward : new Float64Array(feedforward);\n    const feedbackLength = convertedFeedback.length;\n    const feedforwardLength = convertedFeedforward.length;\n    const minLength = Math.min(feedbackLength, feedforwardLength);\n\n    if (convertedFeedback[0] !== 1) {\n        for (let i = 0; i < feedbackLength; i += 1) {\n            convertedFeedforward[i] /= convertedFeedback[0];\n        }\n\n        for (let i = 1; i < feedforwardLength; i += 1) {\n            convertedFeedback[i] /= convertedFeedback[0];\n        }\n    }\n\n    const bufferLength = 32;\n    const xBuffer = new Float32Array(bufferLength);\n    const yBuffer = new Float32Array(bufferLength);\n\n    const filteredBuffer = nativeOfflineAudioContext.createBuffer(\n        renderedBuffer.numberOfChannels,\n        renderedBuffer.length,\n        renderedBuffer.sampleRate\n    );\n\n    const numberOfChannels = renderedBuffer.numberOfChannels;\n\n    for (let i = 0; i < numberOfChannels; i += 1) {\n        const input = renderedBuffer.getChannelData(i);\n        const output = filteredBuffer.getChannelData(i);\n\n        xBuffer.fill(0);\n        yBuffer.fill(0);\n\n        filterBuffer(\n            convertedFeedback,\n            feedbackLength,\n            convertedFeedforward,\n            feedforwardLength,\n            minLength,\n            xBuffer,\n            yBuffer,\n            0,\n            bufferLength,\n            input,\n            output\n        );\n    }\n\n    return filteredBuffer;\n};\n\nexport const createIIRFilterNodeRendererFactory: TIIRFilterNodeRendererFactoryFactory = (\n    createNativeAudioBufferSourceNode,\n    getNativeAudioNode,\n    nativeOfflineAudioContextConstructor,\n    renderInputsOfAudioNode,\n    renderNativeOfflineAudioContext\n) => {\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>(feedback: Iterable<number>, feedforward: Iterable<number>) => {\n        const renderedNativeAudioNodes = new WeakMap<TNativeOfflineAudioContext, TNativeAudioBufferSourceNode | TNativeIIRFilterNode>();\n\n        let filteredBufferPromise: null | Promise<null | TNativeAudioBuffer> = null;\n\n        const createAudioNode = async (proxy: IIIRFilterNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext) => {\n            let nativeAudioBufferSourceNode: null | TNativeAudioBufferSourceNode = null;\n            let nativeIIRFilterNode = getNativeAudioNode<T, TNativeIIRFilterNode>(proxy);\n\n            // If the initially used nativeIIRFilterNode was not constructed on the same OfflineAudioContext it needs to be created again.\n            const nativeIIRFilterNodeIsOwnedByContext = isOwnedByContext(nativeIIRFilterNode, nativeOfflineAudioContext);\n\n            // Bug #9: Safari does not support IIRFilterNodes.\n            if (nativeOfflineAudioContext.createIIRFilter === undefined) {\n                nativeAudioBufferSourceNode = createNativeAudioBufferSourceNode(nativeOfflineAudioContext, {\n                    buffer: null,\n                    channelCount: 2,\n                    channelCountMode: 'max',\n                    channelInterpretation: 'speakers',\n                    loop: false,\n                    loopEnd: 0,\n                    loopStart: 0,\n                    playbackRate: 1\n                });\n            } else if (!nativeIIRFilterNodeIsOwnedByContext) {\n                // @todo TypeScript defines the parameters of createIIRFilter() as arrays of numbers.\n                nativeIIRFilterNode = nativeOfflineAudioContext.createIIRFilter(<number[]>feedforward, <number[]>feedback);\n            }\n\n            renderedNativeAudioNodes.set(\n                nativeOfflineAudioContext,\n                nativeAudioBufferSourceNode === null ? nativeIIRFilterNode : nativeAudioBufferSourceNode\n            );\n\n            if (nativeAudioBufferSourceNode !== null) {\n                if (filteredBufferPromise === null) {\n                    if (nativeOfflineAudioContextConstructor === null) {\n                        throw new Error('Missing the native OfflineAudioContext constructor.');\n                    }\n\n                    const partialOfflineAudioContext = new nativeOfflineAudioContextConstructor(\n                        // Bug #47: The AudioDestinationNode in Safari gets not initialized correctly.\n                        proxy.context.destination.channelCount,\n                        // Bug #17: Safari does not yet expose the length.\n                        proxy.context.length,\n                        nativeOfflineAudioContext.sampleRate\n                    );\n\n                    filteredBufferPromise = (async () => {\n                        await renderInputsOfAudioNode(proxy, partialOfflineAudioContext, partialOfflineAudioContext.destination);\n\n                        const renderedBuffer = await renderNativeOfflineAudioContext(partialOfflineAudioContext);\n\n                        return filterFullBuffer(renderedBuffer, nativeOfflineAudioContext, feedback, feedforward);\n                    })();\n                }\n\n                const filteredBuffer = await filteredBufferPromise;\n\n                nativeAudioBufferSourceNode.buffer = filteredBuffer;\n                nativeAudioBufferSourceNode.start(0);\n\n                return nativeAudioBufferSourceNode;\n            }\n\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeIIRFilterNode);\n\n            return nativeIIRFilterNode;\n        };\n\n        return {\n            render(\n                proxy: IIIRFilterNode<T>,\n                nativeOfflineAudioContext: TNativeOfflineAudioContext\n            ): Promise<TNativeAudioBufferSourceNode | TNativeIIRFilterNode> {\n                const renderedNativeAudioNode = renderedNativeAudioNodes.get(nativeOfflineAudioContext);\n\n                if (renderedNativeAudioNode !== undefined) {\n                    return Promise.resolve(renderedNativeAudioNode);\n                }\n\n                return createAudioNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n","import { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { TNativeIIRFilterNodeFactoryFactory } from '../types';\n\nexport const createNativeIIRFilterNodeFactory: TNativeIIRFilterNodeFactoryFactory = (createNativeIIRFilterNodeFaker) => {\n    return (nativeContext, baseLatency, options) => {\n        // Bug #9: Safari does not support IIRFilterNodes.\n        if (nativeContext.createIIRFilter === undefined) {\n            return createNativeIIRFilterNodeFaker(nativeContext, baseLatency, options);\n        }\n\n        // @todo TypeScript defines the parameters of createIIRFilter() as arrays of numbers.\n        const nativeIIRFilterNode = nativeContext.createIIRFilter(<number[]>options.feedforward, <number[]>options.feedback);\n\n        assignNativeAudioNodeOptions(nativeIIRFilterNode, options);\n\n        return nativeIIRFilterNode;\n    };\n};\n","import { createInvalidAccessError } from '../factories/invalid-access-error';\nimport { TNativeIIRFilterNode } from '../types';\n\nexport const wrapIIRFilterNodeGetFrequencyResponseMethod = (nativeIIRFilterNode: TNativeIIRFilterNode): void => {\n    nativeIIRFilterNode.getFrequencyResponse = ((getFrequencyResponse) => {\n        return (frequencyHz: Float32Array, magResponse: Float32Array, phaseResponse: Float32Array) => {\n            if (frequencyHz.length !== magResponse.length || magResponse.length !== phaseResponse.length) {\n                throw createInvalidAccessError();\n            }\n\n            return getFrequencyResponse.call(nativeIIRFilterNode, frequencyHz, magResponse, phaseResponse);\n        };\n    })(nativeIIRFilterNode.getFrequencyResponse);\n};\n","import { MOST_NEGATIVE_SINGLE_FLOAT, MOST_POSITIVE_SINGLE_FLOAT } from '../constants';\nimport { IAudioParam } from '../interfaces';\nimport { TAudioListenerFactoryFactory } from '../types';\n\nexport const createAudioListenerFactory: TAudioListenerFactoryFactory = (\n    createAudioParam,\n    createNativeChannelMergerNode,\n    createNativeConstantSourceNode,\n    createNativeScriptProcessorNode,\n    createNotSupportedError,\n    getFirstSample,\n    isNativeOfflineAudioContext,\n    overwriteAccessors\n) => {\n    return (context, nativeContext) => {\n        const nativeListener = nativeContext.listener;\n\n        // Bug #117: Only Chrome & Edge support the new interface already.\n        const createFakeAudioParams = () => {\n            const buffer = new Float32Array(1);\n            const channelMergerNode = createNativeChannelMergerNode(nativeContext, {\n                channelCount: 1,\n                channelCountMode: 'explicit',\n                channelInterpretation: 'speakers',\n                numberOfInputs: 9\n            });\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n\n            let isScriptProcessorNodeCreated = false;\n            let lastOrientation: [number, number, number, number, number, number] = [0, 0, -1, 0, 1, 0];\n            let lastPosition: [number, number, number] = [0, 0, 0];\n\n            const createScriptProcessorNode = () => {\n                if (isScriptProcessorNodeCreated) {\n                    return;\n                }\n\n                isScriptProcessorNodeCreated = true;\n\n                const scriptProcessorNode = createNativeScriptProcessorNode(nativeContext, 256, 9, 0);\n\n                // tslint:disable-next-line:deprecation\n                scriptProcessorNode.onaudioprocess = ({ inputBuffer }) => {\n                    const orientation: [number, number, number, number, number, number] = [\n                        getFirstSample(inputBuffer, buffer, 0),\n                        getFirstSample(inputBuffer, buffer, 1),\n                        getFirstSample(inputBuffer, buffer, 2),\n                        getFirstSample(inputBuffer, buffer, 3),\n                        getFirstSample(inputBuffer, buffer, 4),\n                        getFirstSample(inputBuffer, buffer, 5)\n                    ];\n\n                    if (orientation.some((value, index) => value !== lastOrientation[index])) {\n                        nativeListener.setOrientation(...orientation); // tslint:disable-line:deprecation\n\n                        lastOrientation = orientation;\n                    }\n\n                    const positon: [number, number, number] = [\n                        getFirstSample(inputBuffer, buffer, 6),\n                        getFirstSample(inputBuffer, buffer, 7),\n                        getFirstSample(inputBuffer, buffer, 8)\n                    ];\n\n                    if (positon.some((value, index) => value !== lastPosition[index])) {\n                        nativeListener.setPosition(...positon); // tslint:disable-line:deprecation\n\n                        lastPosition = positon;\n                    }\n                };\n\n                channelMergerNode.connect(scriptProcessorNode);\n            };\n            const createSetOrientation = (index: number) => (value: number) => {\n                if (value !== lastOrientation[index]) {\n                    lastOrientation[index] = value;\n\n                    nativeListener.setOrientation(...lastOrientation); // tslint:disable-line:deprecation\n                }\n            };\n            const createSetPosition = (index: number) => (value: number) => {\n                if (value !== lastPosition[index]) {\n                    lastPosition[index] = value;\n\n                    nativeListener.setPosition(...lastPosition); // tslint:disable-line:deprecation\n                }\n            };\n            const createFakeAudioParam = (input: number, initialValue: number, setValue: (value: number) => void) => {\n                const constantSourceNode = createNativeConstantSourceNode(nativeContext, {\n                    channelCount: 1,\n                    channelCountMode: 'explicit',\n                    channelInterpretation: 'discrete',\n                    offset: initialValue\n                });\n\n                constantSourceNode.connect(channelMergerNode, 0, input);\n\n                // @todo This should be stopped when the context is closed.\n                constantSourceNode.start();\n\n                Object.defineProperty(constantSourceNode.offset, 'defaultValue', {\n                    get(): number {\n                        return initialValue;\n                    }\n                });\n\n                /*\n                 * Bug #62 & #74: Safari does not support ConstantSourceNodes and does not export the correct values for maxValue and\n                 * minValue for GainNodes.\n                 */\n                const audioParam = createAudioParam(\n                    <any>{ context },\n                    isOffline,\n                    constantSourceNode.offset,\n                    MOST_POSITIVE_SINGLE_FLOAT,\n                    MOST_NEGATIVE_SINGLE_FLOAT\n                );\n\n                overwriteAccessors(\n                    audioParam,\n                    'value',\n                    (get) => () => get.call(audioParam),\n                    (set) => (value) => {\n                        try {\n                            set.call(audioParam, value);\n                        } catch (err) {\n                            if (err.code !== 9) {\n                                throw err;\n                            }\n                        }\n\n                        createScriptProcessorNode();\n\n                        if (isOffline) {\n                            // Bug #117: Using setOrientation() and setPosition() doesn't work with an OfflineAudioContext.\n                            setValue(value);\n                        }\n                    }\n                );\n\n                audioParam.cancelAndHoldAtTime = ((cancelAndHoldAtTime) => {\n                    if (isOffline) {\n                        return () => {\n                            throw createNotSupportedError();\n                        };\n                    }\n\n                    return (...args: Parameters<IAudioParam['cancelAndHoldAtTime']>) => {\n                        const value = cancelAndHoldAtTime.apply(audioParam, args);\n\n                        createScriptProcessorNode();\n\n                        return value;\n                    };\n                })(audioParam.cancelAndHoldAtTime);\n                audioParam.cancelScheduledValues = ((cancelScheduledValues) => {\n                    if (isOffline) {\n                        return () => {\n                            throw createNotSupportedError();\n                        };\n                    }\n\n                    return (...args: Parameters<IAudioParam['cancelScheduledValues']>) => {\n                        const value = cancelScheduledValues.apply(audioParam, args);\n\n                        createScriptProcessorNode();\n\n                        return value;\n                    };\n                })(audioParam.cancelScheduledValues);\n                audioParam.exponentialRampToValueAtTime = ((exponentialRampToValueAtTime) => {\n                    if (isOffline) {\n                        return () => {\n                            throw createNotSupportedError();\n                        };\n                    }\n\n                    return (...args: Parameters<IAudioParam['exponentialRampToValueAtTime']>) => {\n                        const value = exponentialRampToValueAtTime.apply(audioParam, args);\n\n                        createScriptProcessorNode();\n\n                        return value;\n                    };\n                })(audioParam.exponentialRampToValueAtTime);\n                audioParam.linearRampToValueAtTime = ((linearRampToValueAtTime) => {\n                    if (isOffline) {\n                        return () => {\n                            throw createNotSupportedError();\n                        };\n                    }\n\n                    return (...args: Parameters<IAudioParam['linearRampToValueAtTime']>) => {\n                        const value = linearRampToValueAtTime.apply(audioParam, args);\n\n                        createScriptProcessorNode();\n\n                        return value;\n                    };\n                })(audioParam.linearRampToValueAtTime);\n                audioParam.setTargetAtTime = ((setTargetAtTime) => {\n                    if (isOffline) {\n                        return () => {\n                            throw createNotSupportedError();\n                        };\n                    }\n\n                    return (...args: Parameters<IAudioParam['setTargetAtTime']>) => {\n                        const value = setTargetAtTime.apply(audioParam, args);\n\n                        createScriptProcessorNode();\n\n                        return value;\n                    };\n                })(audioParam.setTargetAtTime);\n                audioParam.setValueAtTime = ((setValueAtTime) => {\n                    if (isOffline) {\n                        return () => {\n                            throw createNotSupportedError();\n                        };\n                    }\n\n                    return (...args: Parameters<IAudioParam['setValueAtTime']>) => {\n                        const value = setValueAtTime.apply(audioParam, args);\n\n                        createScriptProcessorNode();\n\n                        return value;\n                    };\n                })(audioParam.setValueAtTime);\n                audioParam.setValueCurveAtTime = ((setValueCurveAtTime) => {\n                    if (isOffline) {\n                        return () => {\n                            throw createNotSupportedError();\n                        };\n                    }\n\n                    return (...args: Parameters<IAudioParam['setValueCurveAtTime']>) => {\n                        const value = setValueCurveAtTime.apply(audioParam, args);\n\n                        createScriptProcessorNode();\n\n                        return value;\n                    };\n                })(audioParam.setValueCurveAtTime);\n\n                return audioParam;\n            };\n\n            return {\n                forwardX: createFakeAudioParam(0, 0, createSetOrientation(0)),\n                forwardY: createFakeAudioParam(1, 0, createSetOrientation(1)),\n                forwardZ: createFakeAudioParam(2, -1, createSetOrientation(2)),\n                positionX: createFakeAudioParam(6, 0, createSetPosition(0)),\n                positionY: createFakeAudioParam(7, 0, createSetPosition(1)),\n                positionZ: createFakeAudioParam(8, 0, createSetPosition(2)),\n                upX: createFakeAudioParam(3, 0, createSetOrientation(3)),\n                upY: createFakeAudioParam(4, 1, createSetOrientation(4)),\n                upZ: createFakeAudioParam(5, 0, createSetOrientation(5))\n            };\n        };\n\n        const { forwardX, forwardY, forwardZ, positionX, positionY, positionZ, upX, upY, upZ } =\n            nativeListener.forwardX === undefined ? createFakeAudioParams() : nativeListener;\n\n        return {\n            get forwardX(): IAudioParam {\n                return forwardX;\n            },\n            get forwardY(): IAudioParam {\n                return forwardY;\n            },\n            get forwardZ(): IAudioParam {\n                return forwardZ;\n            },\n            get positionX(): IAudioParam {\n                return positionX;\n            },\n            get positionY(): IAudioParam {\n                return positionY;\n            },\n            get positionZ(): IAudioParam {\n                return positionZ;\n            },\n            get upX(): IAudioParam {\n                return upX;\n            },\n            get upY(): IAudioParam {\n                return upY;\n            },\n            get upZ(): IAudioParam {\n                return upZ;\n            }\n        };\n    };\n};\n","import { CONTEXT_STORE } from '../globals';\nimport { IAudioDestinationNode, IAudioListener, IMinimalBaseAudioContext, IMinimalBaseAudioContextEventMap } from '../interfaces';\nimport { TAudioContextState, TContext, TEventHandler, TMinimalBaseAudioContextConstructorFactory, TNativeContext } from '../types';\n\nexport const createMinimalBaseAudioContextConstructor: TMinimalBaseAudioContextConstructorFactory = (\n    audioDestinationNodeConstructor,\n    createAudioListener,\n    eventTargetConstructor,\n    isNativeOfflineAudioContext,\n    unrenderedAudioWorkletNodeStore,\n    wrapEventListener\n) => {\n    return class MinimalBaseAudioContext<T extends TContext>\n        extends eventTargetConstructor<IMinimalBaseAudioContextEventMap>\n        implements IMinimalBaseAudioContext<T>\n    {\n        private _destination: IAudioDestinationNode<T>;\n\n        private _listener: IAudioListener;\n\n        private _onstatechange: null | TEventHandler<T>;\n\n        constructor(private _nativeContext: TNativeContext, numberOfChannels: number) {\n            super(_nativeContext);\n\n            CONTEXT_STORE.set(<T>(<unknown>this), _nativeContext);\n\n            if (isNativeOfflineAudioContext(_nativeContext)) {\n                unrenderedAudioWorkletNodeStore.set(_nativeContext, new Set());\n            }\n\n            this._destination = new audioDestinationNodeConstructor(<T>(<unknown>this), numberOfChannels);\n            this._listener = createAudioListener(<T>(<unknown>this), _nativeContext);\n            this._onstatechange = null;\n        }\n\n        get currentTime(): number {\n            return this._nativeContext.currentTime;\n        }\n\n        get destination(): IAudioDestinationNode<T> {\n            return this._destination;\n        }\n\n        get listener(): IAudioListener {\n            return this._listener;\n        }\n\n        get onstatechange(): null | TEventHandler<T> {\n            return this._onstatechange;\n        }\n\n        set onstatechange(value) {\n            const wrappedListener = typeof value === 'function' ? wrapEventListener(this, value) : null;\n\n            this._nativeContext.onstatechange = wrappedListener;\n\n            const nativeOnStateChange = this._nativeContext.onstatechange;\n\n            this._onstatechange = nativeOnStateChange !== null && nativeOnStateChange === wrappedListener ? value : nativeOnStateChange;\n        }\n\n        get sampleRate(): number {\n            return this._nativeContext.sampleRate;\n        }\n\n        get state(): TAudioContextState {\n            return this._nativeContext.state;\n        }\n    };\n};\n","import { assignNativeAudioNodeAudioParamValue } from '../helpers/assign-native-audio-node-audio-param-value';\nimport { assignNativeAudioNodeOption } from '../helpers/assign-native-audio-node-option';\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { wrapAudioScheduledSourceNodeStartMethodNegativeParameters } from '../helpers/wrap-audio-scheduled-source-node-start-method-negative-parameters';\nimport { wrapAudioScheduledSourceNodeStopMethodNegativeParameters } from '../helpers/wrap-audio-scheduled-source-node-stop-method-negative-parameters';\nimport { TNativeOscillatorNodeFactoryFactory } from '../types';\n\nexport const createNativeOscillatorNodeFactory: TNativeOscillatorNodeFactoryFactory = (\n    addSilentConnection,\n    cacheTestResult,\n    testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,\n    testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport,\n    testAudioScheduledSourceNodeStopMethodNegativeParametersSupport,\n    wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls\n) => {\n    return (nativeContext, options) => {\n        const nativeOscillatorNode = nativeContext.createOscillator();\n\n        assignNativeAudioNodeOptions(nativeOscillatorNode, options);\n\n        assignNativeAudioNodeAudioParamValue(nativeOscillatorNode, options, 'detune');\n        assignNativeAudioNodeAudioParamValue(nativeOscillatorNode, options, 'frequency');\n\n        if (options.periodicWave !== undefined) {\n            nativeOscillatorNode.setPeriodicWave(options.periodicWave);\n        } else {\n            assignNativeAudioNodeOption(nativeOscillatorNode, options, 'type');\n        }\n\n        // Bug #44: Only Chrome & Edge throw a RangeError yet.\n        if (\n            !cacheTestResult(testAudioScheduledSourceNodeStartMethodNegativeParametersSupport, () =>\n                testAudioScheduledSourceNodeStartMethodNegativeParametersSupport(nativeContext)\n            )\n        ) {\n            wrapAudioScheduledSourceNodeStartMethodNegativeParameters(nativeOscillatorNode);\n        }\n\n        // Bug #19: Safari does not ignore calls to stop() of an already stopped AudioBufferSourceNode.\n        if (\n            !cacheTestResult(testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport, () =>\n                testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport(nativeContext)\n            )\n        ) {\n            wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls(nativeOscillatorNode, nativeContext);\n        }\n\n        // Bug #44: Only Firefox does not throw a RangeError yet.\n        if (\n            !cacheTestResult(testAudioScheduledSourceNodeStopMethodNegativeParametersSupport, () =>\n                testAudioScheduledSourceNodeStopMethodNegativeParametersSupport(nativeContext)\n            )\n        ) {\n            wrapAudioScheduledSourceNodeStopMethodNegativeParameters(nativeOscillatorNode);\n        }\n\n        // Bug #175: Safari will not fire an ended event if the OscillatorNode is unconnected.\n        addSilentConnection(nativeContext, nativeOscillatorNode);\n\n        return nativeOscillatorNode;\n    };\n};\n","import { isOwnedByContext } from '../helpers/is-owned-by-context';\nimport { IMinimalOfflineAudioContext, IOfflineAudioContext, IOscillatorNode, IPeriodicWave } from '../interfaces';\nimport { TNativeOfflineAudioContext, TNativeOscillatorNode, TOscillatorNodeRendererFactoryFactory } from '../types';\n\nexport const createOscillatorNodeRendererFactory: TOscillatorNodeRendererFactoryFactory = (\n    connectAudioParam,\n    createNativeOscillatorNode,\n    getNativeAudioNode,\n    renderAutomation,\n    renderInputsOfAudioNode\n) => {\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>() => {\n        const renderedNativeOscillatorNodes = new WeakMap<TNativeOfflineAudioContext, TNativeOscillatorNode>();\n\n        let periodicWave: null | IPeriodicWave = null;\n        let start: null | number = null;\n        let stop: null | number = null;\n\n        const createOscillatorNode = async (proxy: IOscillatorNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext) => {\n            let nativeOscillatorNode = getNativeAudioNode<T, TNativeOscillatorNode>(proxy);\n\n            // If the initially used nativeOscillatorNode was not constructed on the same OfflineAudioContext it needs to be created again.\n            const nativeOscillatorNodeIsOwnedByContext = isOwnedByContext(nativeOscillatorNode, nativeOfflineAudioContext);\n\n            if (!nativeOscillatorNodeIsOwnedByContext) {\n                const options = {\n                    channelCount: nativeOscillatorNode.channelCount,\n                    channelCountMode: nativeOscillatorNode.channelCountMode,\n                    channelInterpretation: nativeOscillatorNode.channelInterpretation,\n                    detune: nativeOscillatorNode.detune.value,\n                    frequency: nativeOscillatorNode.frequency.value,\n                    periodicWave: periodicWave === null ? undefined : periodicWave,\n                    type: nativeOscillatorNode.type\n                };\n\n                nativeOscillatorNode = createNativeOscillatorNode(nativeOfflineAudioContext, options);\n\n                if (start !== null) {\n                    nativeOscillatorNode.start(start);\n                }\n\n                if (stop !== null) {\n                    nativeOscillatorNode.stop(stop);\n                }\n            }\n\n            renderedNativeOscillatorNodes.set(nativeOfflineAudioContext, nativeOscillatorNode);\n\n            if (!nativeOscillatorNodeIsOwnedByContext) {\n                await renderAutomation(nativeOfflineAudioContext, proxy.detune, nativeOscillatorNode.detune);\n                await renderAutomation(nativeOfflineAudioContext, proxy.frequency, nativeOscillatorNode.frequency);\n            } else {\n                await connectAudioParam(nativeOfflineAudioContext, proxy.detune, nativeOscillatorNode.detune);\n                await connectAudioParam(nativeOfflineAudioContext, proxy.frequency, nativeOscillatorNode.frequency);\n            }\n\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeOscillatorNode);\n\n            return nativeOscillatorNode;\n        };\n\n        return {\n            set periodicWave(value: null | IPeriodicWave) {\n                periodicWave = value;\n            },\n            set start(value: number) {\n                start = value;\n            },\n            set stop(value: number) {\n                stop = value;\n            },\n            render(proxy: IOscillatorNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext): Promise<TNativeOscillatorNode> {\n                const renderedNativeOscillatorNode = renderedNativeOscillatorNodes.get(nativeOfflineAudioContext);\n\n                if (renderedNativeOscillatorNode !== undefined) {\n                    return Promise.resolve(renderedNativeOscillatorNode);\n                }\n\n                return createOscillatorNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n","import { TConnectedNativeAudioBufferSourceNodeFactoryFactory } from '../types';\n\nexport const createConnectedNativeAudioBufferSourceNodeFactory: TConnectedNativeAudioBufferSourceNodeFactoryFactory = (\n    createNativeAudioBufferSourceNode\n) => {\n    return (nativeContext, nativeAudioNode) => {\n        const nativeAudioBufferSourceNode = createNativeAudioBufferSourceNode(nativeContext, {\n            buffer: null,\n            channelCount: 2,\n            channelCountMode: 'max',\n            channelInterpretation: 'speakers',\n            loop: false,\n            loopEnd: 0,\n            loopStart: 0,\n            playbackRate: 1\n        });\n        const nativeAudioBuffer = nativeContext.createBuffer(1, 2, 44100);\n\n        nativeAudioBufferSourceNode.buffer = nativeAudioBuffer;\n        nativeAudioBufferSourceNode.loop = true;\n\n        nativeAudioBufferSourceNode.connect(nativeAudioNode);\n        nativeAudioBufferSourceNode.start();\n\n        return () => {\n            nativeAudioBufferSourceNode.stop();\n            nativeAudioBufferSourceNode.disconnect(nativeAudioNode);\n        };\n    };\n};\n","import { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { interceptConnections } from '../helpers/intercept-connections';\nimport { TNativeAudioNode, TNativeWaveShaperNode, TNativeWaveShaperNodeFakerFactoryFactory } from '../types';\n\nexport const createNativeWaveShaperNodeFakerFactory: TNativeWaveShaperNodeFakerFactoryFactory = (\n    createConnectedNativeAudioBufferSourceNode,\n    createInvalidStateError,\n    createNativeGainNode,\n    isDCCurve,\n    monitorConnections\n) => {\n    return (nativeContext, { curve, oversample, ...audioNodeOptions }) => {\n        const negativeWaveShaperNode = nativeContext.createWaveShaper();\n        const positiveWaveShaperNode = nativeContext.createWaveShaper();\n\n        assignNativeAudioNodeOptions(negativeWaveShaperNode, audioNodeOptions);\n        assignNativeAudioNodeOptions(positiveWaveShaperNode, audioNodeOptions);\n\n        const inputGainNode = createNativeGainNode(nativeContext, { ...audioNodeOptions, gain: 1 });\n        const invertGainNode = createNativeGainNode(nativeContext, { ...audioNodeOptions, gain: -1 });\n        const outputGainNode = createNativeGainNode(nativeContext, { ...audioNodeOptions, gain: 1 });\n        const revertGainNode = createNativeGainNode(nativeContext, { ...audioNodeOptions, gain: -1 });\n\n        let disconnectNativeAudioBufferSourceNode: null | (() => void) = null;\n        let isConnected = false;\n        let unmodifiedCurve: null | TNativeWaveShaperNode['curve'] = null;\n\n        const nativeWaveShaperNodeFaker = {\n            get bufferSize(): undefined {\n                return undefined;\n            },\n            get channelCount(): number {\n                return negativeWaveShaperNode.channelCount;\n            },\n            set channelCount(value) {\n                inputGainNode.channelCount = value;\n                invertGainNode.channelCount = value;\n                negativeWaveShaperNode.channelCount = value;\n                outputGainNode.channelCount = value;\n                positiveWaveShaperNode.channelCount = value;\n                revertGainNode.channelCount = value;\n            },\n            get channelCountMode(): TNativeWaveShaperNode['channelCountMode'] {\n                return negativeWaveShaperNode.channelCountMode;\n            },\n            set channelCountMode(value) {\n                inputGainNode.channelCountMode = value;\n                invertGainNode.channelCountMode = value;\n                negativeWaveShaperNode.channelCountMode = value;\n                outputGainNode.channelCountMode = value;\n                positiveWaveShaperNode.channelCountMode = value;\n                revertGainNode.channelCountMode = value;\n            },\n            get channelInterpretation(): TNativeWaveShaperNode['channelInterpretation'] {\n                return negativeWaveShaperNode.channelInterpretation;\n            },\n            set channelInterpretation(value) {\n                inputGainNode.channelInterpretation = value;\n                invertGainNode.channelInterpretation = value;\n                negativeWaveShaperNode.channelInterpretation = value;\n                outputGainNode.channelInterpretation = value;\n                positiveWaveShaperNode.channelInterpretation = value;\n                revertGainNode.channelInterpretation = value;\n            },\n            get context(): TNativeWaveShaperNode['context'] {\n                return negativeWaveShaperNode.context;\n            },\n            get curve(): TNativeWaveShaperNode['curve'] {\n                return unmodifiedCurve;\n            },\n            set curve(value) {\n                // Bug #102: Safari does not throw an InvalidStateError when the curve has less than two samples.\n                if (value !== null && value.length < 2) {\n                    throw createInvalidStateError();\n                }\n\n                if (value === null) {\n                    negativeWaveShaperNode.curve = value;\n                    positiveWaveShaperNode.curve = value;\n                } else {\n                    const curveLength = value.length;\n\n                    const negativeCurve = new Float32Array(curveLength + 2 - (curveLength % 2));\n                    const positiveCurve = new Float32Array(curveLength + 2 - (curveLength % 2));\n\n                    negativeCurve[0] = value[0];\n                    positiveCurve[0] = -value[curveLength - 1];\n\n                    const length = Math.ceil((curveLength + 1) / 2);\n                    const centerIndex = (curveLength + 1) / 2 - 1;\n\n                    for (let i = 1; i < length; i += 1) {\n                        const theoreticIndex = (i / length) * centerIndex;\n\n                        const lowerIndex = Math.floor(theoreticIndex);\n                        const upperIndex = Math.ceil(theoreticIndex);\n\n                        negativeCurve[i] =\n                            lowerIndex === upperIndex\n                                ? value[lowerIndex]\n                                : (1 - (theoreticIndex - lowerIndex)) * value[lowerIndex] +\n                                  (1 - (upperIndex - theoreticIndex)) * value[upperIndex];\n                        positiveCurve[i] =\n                            lowerIndex === upperIndex\n                                ? -value[curveLength - 1 - lowerIndex]\n                                : -((1 - (theoreticIndex - lowerIndex)) * value[curveLength - 1 - lowerIndex]) -\n                                  (1 - (upperIndex - theoreticIndex)) * value[curveLength - 1 - upperIndex];\n                    }\n\n                    negativeCurve[length] = curveLength % 2 === 1 ? value[length - 1] : (value[length - 2] + value[length - 1]) / 2;\n\n                    negativeWaveShaperNode.curve = negativeCurve;\n                    positiveWaveShaperNode.curve = positiveCurve;\n                }\n\n                unmodifiedCurve = value;\n\n                if (isConnected) {\n                    if (isDCCurve(unmodifiedCurve) && disconnectNativeAudioBufferSourceNode === null) {\n                        disconnectNativeAudioBufferSourceNode = createConnectedNativeAudioBufferSourceNode(nativeContext, inputGainNode);\n                    } else if (disconnectNativeAudioBufferSourceNode !== null) {\n                        disconnectNativeAudioBufferSourceNode();\n                        disconnectNativeAudioBufferSourceNode = null;\n                    }\n                }\n            },\n            get inputs(): TNativeAudioNode[] {\n                return [inputGainNode];\n            },\n            get numberOfInputs(): number {\n                return negativeWaveShaperNode.numberOfInputs;\n            },\n            get numberOfOutputs(): number {\n                return negativeWaveShaperNode.numberOfOutputs;\n            },\n            get oversample(): TNativeWaveShaperNode['oversample'] {\n                return negativeWaveShaperNode.oversample;\n            },\n            set oversample(value) {\n                negativeWaveShaperNode.oversample = value;\n                positiveWaveShaperNode.oversample = value;\n            },\n            addEventListener(...args: any[]): void {\n                return inputGainNode.addEventListener(args[0], args[1], args[2]);\n            },\n            dispatchEvent(...args: any[]): boolean {\n                return inputGainNode.dispatchEvent(args[0]);\n            },\n            removeEventListener(...args: any[]): void {\n                return inputGainNode.removeEventListener(args[0], args[1], args[2]);\n            }\n        };\n\n        if (curve !== null) {\n            // Only values of type Float32Array can be assigned to the curve property.\n            nativeWaveShaperNodeFaker.curve = curve instanceof Float32Array ? curve : new Float32Array(curve);\n        }\n\n        if (oversample !== nativeWaveShaperNodeFaker.oversample) {\n            nativeWaveShaperNodeFaker.oversample = oversample;\n        }\n\n        const whenConnected = () => {\n            inputGainNode.connect(negativeWaveShaperNode).connect(outputGainNode);\n\n            inputGainNode.connect(invertGainNode).connect(positiveWaveShaperNode).connect(revertGainNode).connect(outputGainNode);\n\n            isConnected = true;\n\n            if (isDCCurve(unmodifiedCurve)) {\n                disconnectNativeAudioBufferSourceNode = createConnectedNativeAudioBufferSourceNode(nativeContext, inputGainNode);\n            }\n        };\n        const whenDisconnected = () => {\n            inputGainNode.disconnect(negativeWaveShaperNode);\n            negativeWaveShaperNode.disconnect(outputGainNode);\n\n            inputGainNode.disconnect(invertGainNode);\n            invertGainNode.disconnect(positiveWaveShaperNode);\n            positiveWaveShaperNode.disconnect(revertGainNode);\n            revertGainNode.disconnect(outputGainNode);\n\n            isConnected = false;\n\n            if (disconnectNativeAudioBufferSourceNode !== null) {\n                disconnectNativeAudioBufferSourceNode();\n                disconnectNativeAudioBufferSourceNode = null;\n            }\n        };\n\n        return monitorConnections(interceptConnections(nativeWaveShaperNodeFaker, outputGainNode), whenConnected, whenDisconnected);\n    };\n};\n","import { assignNativeAudioNodeOption } from '../helpers/assign-native-audio-node-option';\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { TNativeWaveShaperNodeFactoryFactory } from '../types';\n\nexport const createNativeWaveShaperNodeFactory: TNativeWaveShaperNodeFactoryFactory = (\n    createConnectedNativeAudioBufferSourceNode,\n    createInvalidStateError,\n    createNativeWaveShaperNodeFaker,\n    isDCCurve,\n    monitorConnections,\n    nativeAudioContextConstructor,\n    overwriteAccessors\n) => {\n    return (nativeContext, options) => {\n        const nativeWaveShaperNode = nativeContext.createWaveShaper();\n\n        /*\n         * Bug #119: Safari does not correctly map the values.\n         * @todo Unfortunately there is no way to test for this behavior in a synchronous fashion which is why testing for the existence of\n         * the webkitAudioContext is used as a workaround here. Testing for the automationRate property is necessary because this workaround\n         * isn't necessary anymore since v14.0.2 of Safari.\n         */\n        if (\n            nativeAudioContextConstructor !== null &&\n            nativeAudioContextConstructor.name === 'webkitAudioContext' &&\n            nativeContext.createGain().gain.automationRate === undefined\n        ) {\n            return createNativeWaveShaperNodeFaker(nativeContext, options);\n        }\n\n        assignNativeAudioNodeOptions(nativeWaveShaperNode, options);\n\n        const curve = options.curve === null || options.curve instanceof Float32Array ? options.curve : new Float32Array(options.curve);\n\n        // Bug #104: Chrome and Edge will throw an InvalidAccessError when the curve has less than two samples.\n        if (curve !== null && curve.length < 2) {\n            throw createInvalidStateError();\n        }\n\n        // Only values of type Float32Array can be assigned to the curve property.\n        assignNativeAudioNodeOption(nativeWaveShaperNode, { curve }, 'curve');\n        assignNativeAudioNodeOption(nativeWaveShaperNode, options, 'oversample');\n\n        let disconnectNativeAudioBufferSourceNode: null | (() => void) = null;\n        let isConnected = false;\n\n        overwriteAccessors(\n            nativeWaveShaperNode,\n            'curve',\n            (get) => () => get.call(nativeWaveShaperNode),\n            (set) => (value) => {\n                set.call(nativeWaveShaperNode, value);\n\n                if (isConnected) {\n                    if (isDCCurve(value) && disconnectNativeAudioBufferSourceNode === null) {\n                        disconnectNativeAudioBufferSourceNode = createConnectedNativeAudioBufferSourceNode(\n                            nativeContext,\n                            nativeWaveShaperNode\n                        );\n                    } else if (!isDCCurve(value) && disconnectNativeAudioBufferSourceNode !== null) {\n                        disconnectNativeAudioBufferSourceNode();\n                        disconnectNativeAudioBufferSourceNode = null;\n                    }\n                }\n\n                return value;\n            }\n        );\n\n        const whenConnected = () => {\n            isConnected = true;\n\n            if (isDCCurve(nativeWaveShaperNode.curve)) {\n                disconnectNativeAudioBufferSourceNode = createConnectedNativeAudioBufferSourceNode(nativeContext, nativeWaveShaperNode);\n            }\n        };\n        const whenDisconnected = () => {\n            isConnected = false;\n\n            if (disconnectNativeAudioBufferSourceNode !== null) {\n                disconnectNativeAudioBufferSourceNode();\n                disconnectNativeAudioBufferSourceNode = null;\n            }\n        };\n\n        return monitorConnections(nativeWaveShaperNode, whenConnected, whenDisconnected);\n    };\n};\n","import { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { interceptConnections } from '../helpers/intercept-connections';\nimport { TNativeAudioNode, TNativePannerNode, TNativePannerNodeFakerFactoryFactory } from '../types';\n\nexport const createNativePannerNodeFakerFactory: TNativePannerNodeFakerFactoryFactory = (\n    connectNativeAudioNodeToNativeAudioNode,\n    createInvalidStateError,\n    createNativeChannelMergerNode,\n    createNativeGainNode,\n    createNativeScriptProcessorNode,\n    createNativeWaveShaperNode,\n    createNotSupportedError,\n    disconnectNativeAudioNodeFromNativeAudioNode,\n    getFirstSample,\n    monitorConnections\n) => {\n    return (\n        nativeContext,\n        {\n            coneInnerAngle,\n            coneOuterAngle,\n            coneOuterGain,\n            distanceModel,\n            maxDistance,\n            orientationX,\n            orientationY,\n            orientationZ,\n            panningModel,\n            positionX,\n            positionY,\n            positionZ,\n            refDistance,\n            rolloffFactor,\n            ...audioNodeOptions\n        }\n    ) => {\n        const pannerNode = nativeContext.createPanner();\n\n        // Bug #125: Safari does not throw an error yet.\n        if (audioNodeOptions.channelCount > 2) {\n            throw createNotSupportedError();\n        }\n\n        // Bug #126: Safari does not throw an error yet.\n        if (audioNodeOptions.channelCountMode === 'max') {\n            throw createNotSupportedError();\n        }\n\n        assignNativeAudioNodeOptions(pannerNode, audioNodeOptions);\n\n        const SINGLE_CHANNEL_OPTIONS = {\n            channelCount: 1,\n            channelCountMode: 'explicit',\n            channelInterpretation: 'discrete'\n        } as const;\n\n        const channelMergerNode = createNativeChannelMergerNode(nativeContext, {\n            ...SINGLE_CHANNEL_OPTIONS,\n            channelInterpretation: 'speakers',\n            numberOfInputs: 6\n        });\n        const inputGainNode = createNativeGainNode(nativeContext, { ...audioNodeOptions, gain: 1 });\n        const orientationXGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 1 });\n        const orientationYGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\n        const orientationZGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\n        const positionXGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\n        const positionYGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\n        const positionZGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\n        const scriptProcessorNode = createNativeScriptProcessorNode(nativeContext, 256, 6, 1);\n        const waveShaperNode = createNativeWaveShaperNode(nativeContext, {\n            ...SINGLE_CHANNEL_OPTIONS,\n            curve: new Float32Array([1, 1]),\n            oversample: 'none'\n        });\n\n        let lastOrientation: [number, number, number] = [orientationX, orientationY, orientationZ];\n        let lastPosition: [number, number, number] = [positionX, positionY, positionZ];\n\n        const buffer = new Float32Array(1);\n\n        // tslint:disable-next-line:deprecation\n        scriptProcessorNode.onaudioprocess = ({ inputBuffer }) => {\n            const orientation: [number, number, number] = [\n                getFirstSample(inputBuffer, buffer, 0),\n                getFirstSample(inputBuffer, buffer, 1),\n                getFirstSample(inputBuffer, buffer, 2)\n            ];\n\n            if (orientation.some((value, index) => value !== lastOrientation[index])) {\n                pannerNode.setOrientation(...orientation); // tslint:disable-line:deprecation\n\n                lastOrientation = orientation;\n            }\n\n            const positon: [number, number, number] = [\n                getFirstSample(inputBuffer, buffer, 3),\n                getFirstSample(inputBuffer, buffer, 4),\n                getFirstSample(inputBuffer, buffer, 5)\n            ];\n\n            if (positon.some((value, index) => value !== lastPosition[index])) {\n                pannerNode.setPosition(...positon); // tslint:disable-line:deprecation\n\n                lastPosition = positon;\n            }\n        };\n\n        Object.defineProperty(orientationYGainNode.gain, 'defaultValue', { get: () => 0 });\n        Object.defineProperty(orientationZGainNode.gain, 'defaultValue', { get: () => 0 });\n        Object.defineProperty(positionXGainNode.gain, 'defaultValue', { get: () => 0 });\n        Object.defineProperty(positionYGainNode.gain, 'defaultValue', { get: () => 0 });\n        Object.defineProperty(positionZGainNode.gain, 'defaultValue', { get: () => 0 });\n\n        const nativePannerNodeFaker = {\n            get bufferSize(): undefined {\n                return undefined;\n            },\n            get channelCount(): number {\n                return pannerNode.channelCount;\n            },\n            set channelCount(value) {\n                // Bug #125: Safari does not throw an error yet.\n                if (value > 2) {\n                    throw createNotSupportedError();\n                }\n\n                inputGainNode.channelCount = value;\n                pannerNode.channelCount = value;\n            },\n            get channelCountMode(): TNativePannerNode['channelCountMode'] {\n                return pannerNode.channelCountMode;\n            },\n            set channelCountMode(value) {\n                // Bug #126: Safari does not throw an error yet.\n                if (value === 'max') {\n                    throw createNotSupportedError();\n                }\n\n                inputGainNode.channelCountMode = value;\n                pannerNode.channelCountMode = value;\n            },\n            get channelInterpretation(): TNativePannerNode['channelInterpretation'] {\n                return pannerNode.channelInterpretation;\n            },\n            set channelInterpretation(value) {\n                inputGainNode.channelInterpretation = value;\n                pannerNode.channelInterpretation = value;\n            },\n            get coneInnerAngle(): TNativePannerNode['coneInnerAngle'] {\n                return pannerNode.coneInnerAngle;\n            },\n            set coneInnerAngle(value) {\n                pannerNode.coneInnerAngle = value;\n            },\n            get coneOuterAngle(): TNativePannerNode['coneOuterAngle'] {\n                return pannerNode.coneOuterAngle;\n            },\n            set coneOuterAngle(value) {\n                pannerNode.coneOuterAngle = value;\n            },\n            get coneOuterGain(): TNativePannerNode['coneOuterGain'] {\n                return pannerNode.coneOuterGain;\n            },\n            set coneOuterGain(value) {\n                // Bug #127: Safari does not throw an InvalidStateError yet.\n                if (value < 0 || value > 1) {\n                    throw createInvalidStateError();\n                }\n\n                pannerNode.coneOuterGain = value;\n            },\n            get context(): TNativePannerNode['context'] {\n                return pannerNode.context;\n            },\n            get distanceModel(): TNativePannerNode['distanceModel'] {\n                return pannerNode.distanceModel;\n            },\n            set distanceModel(value) {\n                pannerNode.distanceModel = value;\n            },\n            get inputs(): TNativeAudioNode[] {\n                return [inputGainNode];\n            },\n            get maxDistance(): TNativePannerNode['maxDistance'] {\n                return pannerNode.maxDistance;\n            },\n            set maxDistance(value) {\n                // Bug #128: Safari does not throw an error yet.\n                if (value < 0) {\n                    throw new RangeError();\n                }\n\n                pannerNode.maxDistance = value;\n            },\n            get numberOfInputs(): number {\n                return pannerNode.numberOfInputs;\n            },\n            get numberOfOutputs(): number {\n                return pannerNode.numberOfOutputs;\n            },\n            get orientationX(): TNativePannerNode['orientationX'] {\n                return orientationXGainNode.gain;\n            },\n            get orientationY(): TNativePannerNode['orientationY'] {\n                return orientationYGainNode.gain;\n            },\n            get orientationZ(): TNativePannerNode['orientationZ'] {\n                return orientationZGainNode.gain;\n            },\n            get panningModel(): TNativePannerNode['panningModel'] {\n                return pannerNode.panningModel;\n            },\n            set panningModel(value) {\n                pannerNode.panningModel = value;\n            },\n            get positionX(): TNativePannerNode['positionX'] {\n                return positionXGainNode.gain;\n            },\n            get positionY(): TNativePannerNode['positionY'] {\n                return positionYGainNode.gain;\n            },\n            get positionZ(): TNativePannerNode['positionZ'] {\n                return positionZGainNode.gain;\n            },\n            get refDistance(): TNativePannerNode['refDistance'] {\n                return pannerNode.refDistance;\n            },\n            set refDistance(value) {\n                // Bug #129: Safari does not throw an error yet.\n                if (value < 0) {\n                    throw new RangeError();\n                }\n\n                pannerNode.refDistance = value;\n            },\n            get rolloffFactor(): TNativePannerNode['rolloffFactor'] {\n                return pannerNode.rolloffFactor;\n            },\n            set rolloffFactor(value) {\n                // Bug #130: Safari does not throw an error yet.\n                if (value < 0) {\n                    throw new RangeError();\n                }\n\n                pannerNode.rolloffFactor = value;\n            },\n            addEventListener(...args: any[]): void {\n                return inputGainNode.addEventListener(args[0], args[1], args[2]);\n            },\n            dispatchEvent(...args: any[]): boolean {\n                return inputGainNode.dispatchEvent(args[0]);\n            },\n            removeEventListener(...args: any[]): void {\n                return inputGainNode.removeEventListener(args[0], args[1], args[2]);\n            }\n        };\n\n        if (coneInnerAngle !== nativePannerNodeFaker.coneInnerAngle) {\n            nativePannerNodeFaker.coneInnerAngle = coneInnerAngle;\n        }\n\n        if (coneOuterAngle !== nativePannerNodeFaker.coneOuterAngle) {\n            nativePannerNodeFaker.coneOuterAngle = coneOuterAngle;\n        }\n\n        if (coneOuterGain !== nativePannerNodeFaker.coneOuterGain) {\n            nativePannerNodeFaker.coneOuterGain = coneOuterGain;\n        }\n\n        if (distanceModel !== nativePannerNodeFaker.distanceModel) {\n            nativePannerNodeFaker.distanceModel = distanceModel;\n        }\n\n        if (maxDistance !== nativePannerNodeFaker.maxDistance) {\n            nativePannerNodeFaker.maxDistance = maxDistance;\n        }\n\n        if (orientationX !== nativePannerNodeFaker.orientationX.value) {\n            nativePannerNodeFaker.orientationX.value = orientationX;\n        }\n\n        if (orientationY !== nativePannerNodeFaker.orientationY.value) {\n            nativePannerNodeFaker.orientationY.value = orientationY;\n        }\n\n        if (orientationZ !== nativePannerNodeFaker.orientationZ.value) {\n            nativePannerNodeFaker.orientationZ.value = orientationZ;\n        }\n\n        if (panningModel !== nativePannerNodeFaker.panningModel) {\n            nativePannerNodeFaker.panningModel = panningModel;\n        }\n\n        if (positionX !== nativePannerNodeFaker.positionX.value) {\n            nativePannerNodeFaker.positionX.value = positionX;\n        }\n\n        if (positionY !== nativePannerNodeFaker.positionY.value) {\n            nativePannerNodeFaker.positionY.value = positionY;\n        }\n\n        if (positionZ !== nativePannerNodeFaker.positionZ.value) {\n            nativePannerNodeFaker.positionZ.value = positionZ;\n        }\n\n        if (refDistance !== nativePannerNodeFaker.refDistance) {\n            nativePannerNodeFaker.refDistance = refDistance;\n        }\n\n        if (rolloffFactor !== nativePannerNodeFaker.rolloffFactor) {\n            nativePannerNodeFaker.rolloffFactor = rolloffFactor;\n        }\n\n        if (lastOrientation[0] !== 1 || lastOrientation[1] !== 0 || lastOrientation[2] !== 0) {\n            pannerNode.setOrientation(...lastOrientation); // tslint:disable-line:deprecation\n        }\n\n        if (lastPosition[0] !== 0 || lastPosition[1] !== 0 || lastPosition[2] !== 0) {\n            pannerNode.setPosition(...lastPosition); // tslint:disable-line:deprecation\n        }\n\n        const whenConnected = () => {\n            inputGainNode.connect(pannerNode);\n\n            // Bug #119: Safari does not fully support the WaveShaperNode.\n            connectNativeAudioNodeToNativeAudioNode(inputGainNode, waveShaperNode, 0, 0);\n\n            waveShaperNode.connect(orientationXGainNode).connect(channelMergerNode, 0, 0);\n            waveShaperNode.connect(orientationYGainNode).connect(channelMergerNode, 0, 1);\n            waveShaperNode.connect(orientationZGainNode).connect(channelMergerNode, 0, 2);\n            waveShaperNode.connect(positionXGainNode).connect(channelMergerNode, 0, 3);\n            waveShaperNode.connect(positionYGainNode).connect(channelMergerNode, 0, 4);\n            waveShaperNode.connect(positionZGainNode).connect(channelMergerNode, 0, 5);\n\n            channelMergerNode.connect(scriptProcessorNode).connect(nativeContext.destination);\n        };\n        const whenDisconnected = () => {\n            inputGainNode.disconnect(pannerNode);\n\n            // Bug #119: Safari does not fully support the WaveShaperNode.\n            disconnectNativeAudioNodeFromNativeAudioNode(inputGainNode, waveShaperNode, 0, 0);\n\n            waveShaperNode.disconnect(orientationXGainNode);\n            orientationXGainNode.disconnect(channelMergerNode);\n            waveShaperNode.disconnect(orientationYGainNode);\n            orientationYGainNode.disconnect(channelMergerNode);\n            waveShaperNode.disconnect(orientationZGainNode);\n            orientationZGainNode.disconnect(channelMergerNode);\n            waveShaperNode.disconnect(positionXGainNode);\n            positionXGainNode.disconnect(channelMergerNode);\n            waveShaperNode.disconnect(positionYGainNode);\n            positionYGainNode.disconnect(channelMergerNode);\n            waveShaperNode.disconnect(positionZGainNode);\n            positionZGainNode.disconnect(channelMergerNode);\n\n            channelMergerNode.disconnect(scriptProcessorNode);\n            scriptProcessorNode.disconnect(nativeContext.destination);\n        };\n\n        return monitorConnections(interceptConnections(nativePannerNodeFaker, pannerNode), whenConnected, whenDisconnected);\n    };\n};\n","import { assignNativeAudioNodeAudioParamValue } from '../helpers/assign-native-audio-node-audio-param-value';\nimport { assignNativeAudioNodeOption } from '../helpers/assign-native-audio-node-option';\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { TNativePannerNodeFactoryFactory } from '../types';\n\nexport const createNativePannerNodeFactory: TNativePannerNodeFactoryFactory = (createNativePannerNodeFaker) => {\n    return (nativeContext, options) => {\n        const nativePannerNode = nativeContext.createPanner();\n\n        // Bug #124: Safari does not support modifying the orientation and the position with AudioParams.\n        if (nativePannerNode.orientationX === undefined) {\n            return createNativePannerNodeFaker(nativeContext, options);\n        }\n\n        assignNativeAudioNodeOptions(nativePannerNode, options);\n\n        assignNativeAudioNodeAudioParamValue(nativePannerNode, options, 'orientationX');\n        assignNativeAudioNodeAudioParamValue(nativePannerNode, options, 'orientationY');\n        assignNativeAudioNodeAudioParamValue(nativePannerNode, options, 'orientationZ');\n        assignNativeAudioNodeAudioParamValue(nativePannerNode, options, 'positionX');\n        assignNativeAudioNodeAudioParamValue(nativePannerNode, options, 'positionY');\n        assignNativeAudioNodeAudioParamValue(nativePannerNode, options, 'positionZ');\n\n        assignNativeAudioNodeOption(nativePannerNode, options, 'coneInnerAngle');\n        assignNativeAudioNodeOption(nativePannerNode, options, 'coneOuterAngle');\n        assignNativeAudioNodeOption(nativePannerNode, options, 'coneOuterGain');\n        assignNativeAudioNodeOption(nativePannerNode, options, 'distanceModel');\n        assignNativeAudioNodeOption(nativePannerNode, options, 'maxDistance');\n        assignNativeAudioNodeOption(nativePannerNode, options, 'panningModel');\n        assignNativeAudioNodeOption(nativePannerNode, options, 'refDistance');\n        assignNativeAudioNodeOption(nativePannerNode, options, 'rolloffFactor');\n\n        return nativePannerNode;\n    };\n};\n","import { isNativeAudioNodeFaker } from '../guards/native-audio-node-faker';\nimport { isOwnedByContext } from '../helpers/is-owned-by-context';\nimport { IMinimalOfflineAudioContext, INativePannerNodeFaker, IOfflineAudioContext, IPannerNode } from '../interfaces';\nimport {\n    TNativeAudioBuffer,\n    TNativeGainNode,\n    TNativeOfflineAudioContext,\n    TNativePannerNode,\n    TPannerNodeRendererFactoryFactory\n} from '../types';\n\nexport const createPannerNodeRendererFactory: TPannerNodeRendererFactoryFactory = (\n    connectAudioParam,\n    createNativeChannelMergerNode,\n    createNativeConstantSourceNode,\n    createNativeGainNode,\n    createNativePannerNode,\n    getNativeAudioNode,\n    nativeOfflineAudioContextConstructor,\n    renderAutomation,\n    renderInputsOfAudioNode,\n    renderNativeOfflineAudioContext\n) => {\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>() => {\n        const renderedNativeAudioNodes = new WeakMap<TNativeOfflineAudioContext, TNativeGainNode | TNativePannerNode>();\n\n        let renderedBufferPromise: null | Promise<TNativeAudioBuffer> = null;\n\n        const createAudioNode = async (proxy: IPannerNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext) => {\n            let nativeGainNode: null | TNativeGainNode = null;\n            let nativePannerNode = getNativeAudioNode<T, TNativePannerNode>(proxy);\n\n            const commonAudioNodeOptions = {\n                channelCount: nativePannerNode.channelCount,\n                channelCountMode: nativePannerNode.channelCountMode,\n                channelInterpretation: nativePannerNode.channelInterpretation\n            };\n            const commonNativePannerNodeOptions = {\n                ...commonAudioNodeOptions,\n                coneInnerAngle: nativePannerNode.coneInnerAngle,\n                coneOuterAngle: nativePannerNode.coneOuterAngle,\n                coneOuterGain: nativePannerNode.coneOuterGain,\n                distanceModel: nativePannerNode.distanceModel,\n                maxDistance: nativePannerNode.maxDistance,\n                panningModel: nativePannerNode.panningModel,\n                refDistance: nativePannerNode.refDistance,\n                rolloffFactor: nativePannerNode.rolloffFactor\n            };\n\n            // If the initially used nativePannerNode was not constructed on the same OfflineAudioContext it needs to be created again.\n            const nativePannerNodeIsOwnedByContext = isOwnedByContext(nativePannerNode, nativeOfflineAudioContext);\n\n            // Bug #124: Safari does not support modifying the orientation and the position with AudioParams.\n            if ('bufferSize' in nativePannerNode) {\n                nativeGainNode = createNativeGainNode(nativeOfflineAudioContext, { ...commonAudioNodeOptions, gain: 1 });\n            } else if (!nativePannerNodeIsOwnedByContext) {\n                const options = {\n                    ...commonNativePannerNodeOptions,\n                    orientationX: nativePannerNode.orientationX.value,\n                    orientationY: nativePannerNode.orientationY.value,\n                    orientationZ: nativePannerNode.orientationZ.value,\n                    positionX: nativePannerNode.positionX.value,\n                    positionY: nativePannerNode.positionY.value,\n                    positionZ: nativePannerNode.positionZ.value\n                };\n\n                nativePannerNode = createNativePannerNode(nativeOfflineAudioContext, options);\n            }\n\n            renderedNativeAudioNodes.set(nativeOfflineAudioContext, nativeGainNode === null ? nativePannerNode : nativeGainNode);\n\n            if (nativeGainNode !== null) {\n                if (renderedBufferPromise === null) {\n                    if (nativeOfflineAudioContextConstructor === null) {\n                        throw new Error('Missing the native OfflineAudioContext constructor.');\n                    }\n\n                    const partialOfflineAudioContext = new nativeOfflineAudioContextConstructor(\n                        6,\n                        // Bug #17: Safari does not yet expose the length.\n                        proxy.context.length,\n                        nativeOfflineAudioContext.sampleRate\n                    );\n                    const nativeChannelMergerNode = createNativeChannelMergerNode(partialOfflineAudioContext, {\n                        channelCount: 1,\n                        channelCountMode: 'explicit',\n                        channelInterpretation: 'speakers',\n                        numberOfInputs: 6\n                    });\n                    nativeChannelMergerNode.connect(partialOfflineAudioContext.destination);\n\n                    renderedBufferPromise = (async () => {\n                        const nativeConstantSourceNodes = await Promise.all(\n                            [\n                                proxy.orientationX,\n                                proxy.orientationY,\n                                proxy.orientationZ,\n                                proxy.positionX,\n                                proxy.positionY,\n                                proxy.positionZ\n                            ].map(async (audioParam, index) => {\n                                const nativeConstantSourceNode = createNativeConstantSourceNode(partialOfflineAudioContext, {\n                                    channelCount: 1,\n                                    channelCountMode: 'explicit',\n                                    channelInterpretation: 'discrete',\n                                    offset: index === 0 ? 1 : 0\n                                });\n\n                                await renderAutomation(partialOfflineAudioContext, audioParam, nativeConstantSourceNode.offset);\n\n                                return nativeConstantSourceNode;\n                            })\n                        );\n\n                        for (let i = 0; i < 6; i += 1) {\n                            nativeConstantSourceNodes[i].connect(nativeChannelMergerNode, 0, i);\n                            nativeConstantSourceNodes[i].start(0);\n                        }\n\n                        return renderNativeOfflineAudioContext(partialOfflineAudioContext);\n                    })();\n                }\n\n                const renderedBuffer = await renderedBufferPromise;\n                const inputGainNode = createNativeGainNode(nativeOfflineAudioContext, { ...commonAudioNodeOptions, gain: 1 });\n\n                await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, inputGainNode);\n\n                const channelDatas: Float32Array[] = [];\n\n                for (let i = 0; i < renderedBuffer.numberOfChannels; i += 1) {\n                    channelDatas.push(renderedBuffer.getChannelData(i));\n                }\n\n                let lastOrientation = [channelDatas[0][0], channelDatas[1][0], channelDatas[2][0]];\n                let lastPosition = [channelDatas[3][0], channelDatas[4][0], channelDatas[5][0]];\n                let gateGainNode = createNativeGainNode(nativeOfflineAudioContext, { ...commonAudioNodeOptions, gain: 1 });\n                let partialPannerNode = createNativePannerNode(nativeOfflineAudioContext, {\n                    ...commonNativePannerNodeOptions,\n                    orientationX: lastOrientation[0],\n                    orientationY: lastOrientation[1],\n                    orientationZ: lastOrientation[2],\n                    positionX: lastPosition[0],\n                    positionY: lastPosition[1],\n                    positionZ: lastPosition[2]\n                });\n\n                inputGainNode.connect(gateGainNode).connect((<INativePannerNodeFaker>partialPannerNode).inputs[0]);\n                partialPannerNode.connect(nativeGainNode);\n\n                for (let i = 128; i < renderedBuffer.length; i += 128) {\n                    const orientation: [number, number, number] = [channelDatas[0][i], channelDatas[1][i], channelDatas[2][i]];\n                    const positon: [number, number, number] = [channelDatas[3][i], channelDatas[4][i], channelDatas[5][i]];\n\n                    if (\n                        orientation.some((value, index) => value !== lastOrientation[index]) ||\n                        positon.some((value, index) => value !== lastPosition[index])\n                    ) {\n                        lastOrientation = orientation;\n                        lastPosition = positon;\n\n                        const currentTime = i / nativeOfflineAudioContext.sampleRate;\n\n                        gateGainNode.gain.setValueAtTime(0, currentTime);\n\n                        gateGainNode = createNativeGainNode(nativeOfflineAudioContext, { ...commonAudioNodeOptions, gain: 0 });\n                        partialPannerNode = createNativePannerNode(nativeOfflineAudioContext, {\n                            ...commonNativePannerNodeOptions,\n                            orientationX: lastOrientation[0],\n                            orientationY: lastOrientation[1],\n                            orientationZ: lastOrientation[2],\n                            positionX: lastPosition[0],\n                            positionY: lastPosition[1],\n                            positionZ: lastPosition[2]\n                        });\n\n                        gateGainNode.gain.setValueAtTime(1, currentTime);\n\n                        inputGainNode.connect(gateGainNode).connect((<INativePannerNodeFaker>partialPannerNode).inputs[0]);\n                        partialPannerNode.connect(nativeGainNode);\n                    }\n                }\n\n                return nativeGainNode;\n            }\n\n            if (!nativePannerNodeIsOwnedByContext) {\n                await renderAutomation(nativeOfflineAudioContext, proxy.orientationX, nativePannerNode.orientationX);\n                await renderAutomation(nativeOfflineAudioContext, proxy.orientationY, nativePannerNode.orientationY);\n                await renderAutomation(nativeOfflineAudioContext, proxy.orientationZ, nativePannerNode.orientationZ);\n                await renderAutomation(nativeOfflineAudioContext, proxy.positionX, nativePannerNode.positionX);\n                await renderAutomation(nativeOfflineAudioContext, proxy.positionY, nativePannerNode.positionY);\n                await renderAutomation(nativeOfflineAudioContext, proxy.positionZ, nativePannerNode.positionZ);\n            } else {\n                await connectAudioParam(nativeOfflineAudioContext, proxy.orientationX, nativePannerNode.orientationX);\n                await connectAudioParam(nativeOfflineAudioContext, proxy.orientationY, nativePannerNode.orientationY);\n                await connectAudioParam(nativeOfflineAudioContext, proxy.orientationZ, nativePannerNode.orientationZ);\n                await connectAudioParam(nativeOfflineAudioContext, proxy.positionX, nativePannerNode.positionX);\n                await connectAudioParam(nativeOfflineAudioContext, proxy.positionY, nativePannerNode.positionY);\n                await connectAudioParam(nativeOfflineAudioContext, proxy.positionZ, nativePannerNode.positionZ);\n            }\n\n            if (isNativeAudioNodeFaker(nativePannerNode)) {\n                await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativePannerNode.inputs[0]);\n            } else {\n                await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativePannerNode);\n            }\n\n            return nativePannerNode;\n        };\n\n        return {\n            render(\n                proxy: IPannerNode<T>,\n                nativeOfflineAudioContext: TNativeOfflineAudioContext\n            ): Promise<TNativeGainNode | TNativePannerNode> {\n                const renderedNativeGainNodeOrNativePannerNode = renderedNativeAudioNodes.get(nativeOfflineAudioContext);\n\n                if (renderedNativeGainNodeOrNativePannerNode !== undefined) {\n                    return Promise.resolve(renderedNativeGainNodeOrNativePannerNode);\n                }\n\n                return createAudioNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n","import { TNativePeriodicWaveFactoryFactory } from '../types';\n\nexport const createNativePeriodicWaveFactory: TNativePeriodicWaveFactoryFactory = (createIndexSizeError) => {\n    return (nativeContext, { disableNormalization, imag, real }) => {\n        // Bug #180: Safari does not allow to use ordinary arrays.\n        const convertedImag = imag instanceof Float32Array ? imag : new Float32Array(imag);\n        const convertedReal = real instanceof Float32Array ? real : new Float32Array(real);\n\n        const nativePeriodicWave = nativeContext.createPeriodicWave(convertedReal, convertedImag, { disableNormalization });\n\n        // Bug #181: Safari does not throw an IndexSizeError so far if the given arrays have less than two values.\n        if (Array.from(imag).length < 2) {\n            throw createIndexSizeError();\n        }\n\n        return nativePeriodicWave;\n    };\n};\n","import { TSanitizePeriodicWaveOptionsFunction } from '../types';\n\nexport const sanitizePeriodicWaveOptions: TSanitizePeriodicWaveOptionsFunction = (options) => {\n    const { imag, real } = options;\n\n    if (imag === undefined) {\n        if (real === undefined) {\n            return { ...options, imag: [0, 0], real: [0, 0] };\n        }\n\n        return { ...options, imag: Array.from(real, () => 0), real };\n    }\n\n    if (real === undefined) {\n        return { ...options, imag, real: Array.from(imag, () => 0) };\n    }\n\n    return { ...options, imag, real };\n};\n","import { interceptConnections } from '../helpers/intercept-connections';\nimport { INativeWaveShaperNodeFaker } from '../interfaces';\nimport {\n    TNativeAudioNode,\n    TNativeChannelMergerNode,\n    TNativeContext,\n    TNativeGainNode,\n    TNativeStereoPannerNode,\n    TNativeStereoPannerNodeFakerFactoryFactory\n} from '../types';\n\nexport const createNativeStereoPannerNodeFakerFactory: TNativeStereoPannerNodeFakerFactoryFactory = (\n    createNativeChannelMergerNode,\n    createNativeChannelSplitterNode,\n    createNativeGainNode,\n    createNativeWaveShaperNode,\n    createNotSupportedError,\n    monitorConnections\n) => {\n    // The curve has a size of 14bit plus 1 value to have an exact representation for zero. This value has been determined experimentally.\n    const CURVE_SIZE = 16385;\n    const DC_CURVE = new Float32Array([1, 1]);\n    const HALF_PI = Math.PI / 2;\n    const SINGLE_CHANNEL_OPTIONS = { channelCount: 1, channelCountMode: 'explicit', channelInterpretation: 'discrete' } as const;\n    const SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS = { ...SINGLE_CHANNEL_OPTIONS, oversample: 'none' } as const;\n\n    const buildInternalGraphForMono = (\n        nativeContext: TNativeContext,\n        inputGainNode: TNativeGainNode,\n        panGainNode: TNativeGainNode,\n        channelMergerNode: TNativeChannelMergerNode\n    ) => {\n        const leftWaveShaperCurve = new Float32Array(CURVE_SIZE);\n        const rightWaveShaperCurve = new Float32Array(CURVE_SIZE);\n\n        for (let i = 0; i < CURVE_SIZE; i += 1) {\n            const x = (i / (CURVE_SIZE - 1)) * HALF_PI;\n\n            leftWaveShaperCurve[i] = Math.cos(x);\n            rightWaveShaperCurve[i] = Math.sin(x);\n        }\n\n        const leftGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\n        // Bug #119: Safari does not fully support the WaveShaperNode.\n        const leftWaveShaperNode = <INativeWaveShaperNodeFaker>(\n            createNativeWaveShaperNode(nativeContext, { ...SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS, curve: leftWaveShaperCurve })\n        );\n        // Bug #119: Safari does not fully support the WaveShaperNode.\n        const panWaveShaperNode = <INativeWaveShaperNodeFaker>(\n            createNativeWaveShaperNode(nativeContext, { ...SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS, curve: DC_CURVE })\n        );\n        const rightGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\n        // Bug #119: Safari does not fully support the WaveShaperNode.\n        const rightWaveShaperNode = <INativeWaveShaperNodeFaker>(\n            createNativeWaveShaperNode(nativeContext, { ...SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS, curve: rightWaveShaperCurve })\n        );\n\n        return {\n            connectGraph(): void {\n                inputGainNode.connect(leftGainNode);\n                inputGainNode.connect(panWaveShaperNode.inputs === undefined ? panWaveShaperNode : panWaveShaperNode.inputs[0]);\n                inputGainNode.connect(rightGainNode);\n\n                panWaveShaperNode.connect(panGainNode);\n\n                panGainNode.connect(leftWaveShaperNode.inputs === undefined ? leftWaveShaperNode : leftWaveShaperNode.inputs[0]);\n                panGainNode.connect(rightWaveShaperNode.inputs === undefined ? rightWaveShaperNode : rightWaveShaperNode.inputs[0]);\n\n                leftWaveShaperNode.connect(leftGainNode.gain);\n                rightWaveShaperNode.connect(rightGainNode.gain);\n\n                leftGainNode.connect(channelMergerNode, 0, 0);\n                rightGainNode.connect(channelMergerNode, 0, 1);\n            },\n            disconnectGraph(): void {\n                inputGainNode.disconnect(leftGainNode);\n                inputGainNode.disconnect(panWaveShaperNode.inputs === undefined ? panWaveShaperNode : panWaveShaperNode.inputs[0]);\n                inputGainNode.disconnect(rightGainNode);\n\n                panWaveShaperNode.disconnect(panGainNode);\n\n                panGainNode.disconnect(leftWaveShaperNode.inputs === undefined ? leftWaveShaperNode : leftWaveShaperNode.inputs[0]);\n                panGainNode.disconnect(rightWaveShaperNode.inputs === undefined ? rightWaveShaperNode : rightWaveShaperNode.inputs[0]);\n\n                leftWaveShaperNode.disconnect(leftGainNode.gain);\n                rightWaveShaperNode.disconnect(rightGainNode.gain);\n\n                leftGainNode.disconnect(channelMergerNode, 0, 0);\n                rightGainNode.disconnect(channelMergerNode, 0, 1);\n            }\n        };\n    };\n\n    const buildInternalGraphForStereo = (\n        nativeContext: TNativeContext,\n        inputGainNode: TNativeGainNode,\n        panGainNode: TNativeGainNode,\n        channelMergerNode: TNativeChannelMergerNode\n    ) => {\n        const leftInputForLeftOutputWaveShaperCurve = new Float32Array(CURVE_SIZE);\n        const leftInputForRightOutputWaveShaperCurve = new Float32Array(CURVE_SIZE);\n        const rightInputForLeftOutputWaveShaperCurve = new Float32Array(CURVE_SIZE);\n        const rightInputForRightOutputWaveShaperCurve = new Float32Array(CURVE_SIZE);\n\n        const centerIndex = Math.floor(CURVE_SIZE / 2);\n\n        for (let i = 0; i < CURVE_SIZE; i += 1) {\n            if (i > centerIndex) {\n                const x = ((i - centerIndex) / (CURVE_SIZE - 1 - centerIndex)) * HALF_PI;\n\n                leftInputForLeftOutputWaveShaperCurve[i] = Math.cos(x);\n                leftInputForRightOutputWaveShaperCurve[i] = Math.sin(x);\n                rightInputForLeftOutputWaveShaperCurve[i] = 0;\n                rightInputForRightOutputWaveShaperCurve[i] = 1;\n            } else {\n                const x = (i / (CURVE_SIZE - 1 - centerIndex)) * HALF_PI;\n\n                leftInputForLeftOutputWaveShaperCurve[i] = 1;\n                leftInputForRightOutputWaveShaperCurve[i] = 0;\n                rightInputForLeftOutputWaveShaperCurve[i] = Math.cos(x);\n                rightInputForRightOutputWaveShaperCurve[i] = Math.sin(x);\n            }\n        }\n\n        const channelSplitterNode = createNativeChannelSplitterNode(nativeContext, {\n            channelCount: 2,\n            channelCountMode: 'explicit',\n            channelInterpretation: 'discrete',\n            numberOfOutputs: 2\n        });\n        const leftInputForLeftOutputGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\n        // Bug #119: Safari does not fully support the WaveShaperNode.\n        const leftInputForLeftOutputWaveShaperNode = <INativeWaveShaperNodeFaker>createNativeWaveShaperNode(nativeContext, {\n            ...SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS,\n            curve: leftInputForLeftOutputWaveShaperCurve\n        });\n        const leftInputForRightOutputGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\n        // Bug #119: Safari does not fully support the WaveShaperNode.\n        const leftInputForRightOutputWaveShaperNode = <INativeWaveShaperNodeFaker>createNativeWaveShaperNode(nativeContext, {\n            ...SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS,\n            curve: leftInputForRightOutputWaveShaperCurve\n        });\n        // Bug #119: Safari does not fully support the WaveShaperNode.\n        const panWaveShaperNode = <INativeWaveShaperNodeFaker>(\n            createNativeWaveShaperNode(nativeContext, { ...SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS, curve: DC_CURVE })\n        );\n        const rightInputForLeftOutputGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\n        // Bug #119: Safari does not fully support the WaveShaperNode.\n        const rightInputForLeftOutputWaveShaperNode = <INativeWaveShaperNodeFaker>createNativeWaveShaperNode(nativeContext, {\n            ...SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS,\n            curve: rightInputForLeftOutputWaveShaperCurve\n        });\n        const rightInputForRightOutputGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\n        // Bug #119: Safari does not fully support the WaveShaperNode.\n        const rightInputForRightOutputWaveShaperNode = <INativeWaveShaperNodeFaker>createNativeWaveShaperNode(nativeContext, {\n            ...SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS,\n            curve: rightInputForRightOutputWaveShaperCurve\n        });\n\n        return {\n            connectGraph(): void {\n                inputGainNode.connect(channelSplitterNode);\n                inputGainNode.connect(panWaveShaperNode.inputs === undefined ? panWaveShaperNode : panWaveShaperNode.inputs[0]);\n\n                channelSplitterNode.connect(leftInputForLeftOutputGainNode, 0);\n                channelSplitterNode.connect(leftInputForRightOutputGainNode, 0);\n                channelSplitterNode.connect(rightInputForLeftOutputGainNode, 1);\n                channelSplitterNode.connect(rightInputForRightOutputGainNode, 1);\n\n                panWaveShaperNode.connect(panGainNode);\n\n                panGainNode.connect(\n                    leftInputForLeftOutputWaveShaperNode.inputs === undefined\n                        ? leftInputForLeftOutputWaveShaperNode\n                        : leftInputForLeftOutputWaveShaperNode.inputs[0]\n                );\n                panGainNode.connect(\n                    leftInputForRightOutputWaveShaperNode.inputs === undefined\n                        ? leftInputForRightOutputWaveShaperNode\n                        : leftInputForRightOutputWaveShaperNode.inputs[0]\n                );\n                panGainNode.connect(\n                    rightInputForLeftOutputWaveShaperNode.inputs === undefined\n                        ? rightInputForLeftOutputWaveShaperNode\n                        : rightInputForLeftOutputWaveShaperNode.inputs[0]\n                );\n                panGainNode.connect(\n                    rightInputForRightOutputWaveShaperNode.inputs === undefined\n                        ? rightInputForRightOutputWaveShaperNode\n                        : rightInputForRightOutputWaveShaperNode.inputs[0]\n                );\n\n                leftInputForLeftOutputWaveShaperNode.connect(leftInputForLeftOutputGainNode.gain);\n                leftInputForRightOutputWaveShaperNode.connect(leftInputForRightOutputGainNode.gain);\n                rightInputForLeftOutputWaveShaperNode.connect(rightInputForLeftOutputGainNode.gain);\n                rightInputForRightOutputWaveShaperNode.connect(rightInputForRightOutputGainNode.gain);\n\n                leftInputForLeftOutputGainNode.connect(channelMergerNode, 0, 0);\n                rightInputForLeftOutputGainNode.connect(channelMergerNode, 0, 0);\n\n                leftInputForRightOutputGainNode.connect(channelMergerNode, 0, 1);\n                rightInputForRightOutputGainNode.connect(channelMergerNode, 0, 1);\n            },\n            disconnectGraph(): void {\n                inputGainNode.disconnect(channelSplitterNode);\n                inputGainNode.disconnect(panWaveShaperNode.inputs === undefined ? panWaveShaperNode : panWaveShaperNode.inputs[0]);\n\n                channelSplitterNode.disconnect(leftInputForLeftOutputGainNode, 0);\n                channelSplitterNode.disconnect(leftInputForRightOutputGainNode, 0);\n                channelSplitterNode.disconnect(rightInputForLeftOutputGainNode, 1);\n                channelSplitterNode.disconnect(rightInputForRightOutputGainNode, 1);\n\n                panWaveShaperNode.disconnect(panGainNode);\n\n                panGainNode.disconnect(\n                    leftInputForLeftOutputWaveShaperNode.inputs === undefined\n                        ? leftInputForLeftOutputWaveShaperNode\n                        : leftInputForLeftOutputWaveShaperNode.inputs[0]\n                );\n                panGainNode.disconnect(\n                    leftInputForRightOutputWaveShaperNode.inputs === undefined\n                        ? leftInputForRightOutputWaveShaperNode\n                        : leftInputForRightOutputWaveShaperNode.inputs[0]\n                );\n                panGainNode.disconnect(\n                    rightInputForLeftOutputWaveShaperNode.inputs === undefined\n                        ? rightInputForLeftOutputWaveShaperNode\n                        : rightInputForLeftOutputWaveShaperNode.inputs[0]\n                );\n                panGainNode.disconnect(\n                    rightInputForRightOutputWaveShaperNode.inputs === undefined\n                        ? rightInputForRightOutputWaveShaperNode\n                        : rightInputForRightOutputWaveShaperNode.inputs[0]\n                );\n\n                leftInputForLeftOutputWaveShaperNode.disconnect(leftInputForLeftOutputGainNode.gain);\n                leftInputForRightOutputWaveShaperNode.disconnect(leftInputForRightOutputGainNode.gain);\n                rightInputForLeftOutputWaveShaperNode.disconnect(rightInputForLeftOutputGainNode.gain);\n                rightInputForRightOutputWaveShaperNode.disconnect(rightInputForRightOutputGainNode.gain);\n\n                leftInputForLeftOutputGainNode.disconnect(channelMergerNode, 0, 0);\n                rightInputForLeftOutputGainNode.disconnect(channelMergerNode, 0, 0);\n\n                leftInputForRightOutputGainNode.disconnect(channelMergerNode, 0, 1);\n                rightInputForRightOutputGainNode.disconnect(channelMergerNode, 0, 1);\n            }\n        };\n    };\n\n    const buildInternalGraph = (\n        nativeContext: TNativeContext,\n        channelCount: number,\n        inputGainNode: TNativeGainNode,\n        panGainNode: TNativeGainNode,\n        channelMergerNode: TNativeChannelMergerNode\n    ) => {\n        if (channelCount === 1) {\n            return buildInternalGraphForMono(nativeContext, inputGainNode, panGainNode, channelMergerNode);\n        }\n\n        if (channelCount === 2) {\n            return buildInternalGraphForStereo(nativeContext, inputGainNode, panGainNode, channelMergerNode);\n        }\n\n        throw createNotSupportedError();\n    };\n\n    return (nativeContext, { channelCount, channelCountMode, pan, ...audioNodeOptions }) => {\n        if (channelCountMode === 'max') {\n            throw createNotSupportedError();\n        }\n\n        const channelMergerNode = createNativeChannelMergerNode(nativeContext, {\n            ...audioNodeOptions,\n            channelCount: 1,\n            channelCountMode,\n            numberOfInputs: 2\n        });\n        const inputGainNode = createNativeGainNode(nativeContext, { ...audioNodeOptions, channelCount, channelCountMode, gain: 1 });\n        const panGainNode = createNativeGainNode(nativeContext, {\n            channelCount: 1,\n            channelCountMode: 'explicit',\n            channelInterpretation: 'discrete',\n            gain: pan\n        });\n\n        let { connectGraph, disconnectGraph } = buildInternalGraph(\n            nativeContext,\n            channelCount,\n            inputGainNode,\n            panGainNode,\n            channelMergerNode\n        );\n\n        Object.defineProperty(panGainNode.gain, 'defaultValue', { get: () => 0 });\n        Object.defineProperty(panGainNode.gain, 'maxValue', { get: () => 1 });\n        Object.defineProperty(panGainNode.gain, 'minValue', { get: () => -1 });\n\n        const nativeStereoPannerNodeFakerFactory = {\n            get bufferSize(): undefined {\n                return undefined;\n            },\n            get channelCount(): number {\n                return inputGainNode.channelCount;\n            },\n            set channelCount(value) {\n                if (inputGainNode.channelCount !== value) {\n                    if (isConnected) {\n                        disconnectGraph();\n                    }\n\n                    ({ connectGraph, disconnectGraph } = buildInternalGraph(\n                        nativeContext,\n                        value,\n                        inputGainNode,\n                        panGainNode,\n                        channelMergerNode\n                    ));\n\n                    if (isConnected) {\n                        connectGraph();\n                    }\n                }\n\n                inputGainNode.channelCount = value;\n            },\n            get channelCountMode(): TNativeStereoPannerNode['channelCountMode'] {\n                return inputGainNode.channelCountMode;\n            },\n            set channelCountMode(value) {\n                if (value === 'clamped-max' || value === 'max') {\n                    throw createNotSupportedError();\n                }\n\n                inputGainNode.channelCountMode = value;\n            },\n            get channelInterpretation(): TNativeStereoPannerNode['channelInterpretation'] {\n                return inputGainNode.channelInterpretation;\n            },\n            set channelInterpretation(value) {\n                inputGainNode.channelInterpretation = value;\n            },\n            get context(): TNativeStereoPannerNode['context'] {\n                return inputGainNode.context;\n            },\n            get inputs(): TNativeAudioNode[] {\n                return [inputGainNode];\n            },\n            get numberOfInputs(): number {\n                return inputGainNode.numberOfInputs;\n            },\n            get numberOfOutputs(): number {\n                return inputGainNode.numberOfOutputs;\n            },\n            get pan(): TNativeStereoPannerNode['pan'] {\n                return panGainNode.gain;\n            },\n            addEventListener(...args: any[]): void {\n                return inputGainNode.addEventListener(args[0], args[1], args[2]);\n            },\n            dispatchEvent(...args: any[]): boolean {\n                return inputGainNode.dispatchEvent(args[0]);\n            },\n            removeEventListener(...args: any[]): void {\n                return inputGainNode.removeEventListener(args[0], args[1], args[2]);\n            }\n        };\n\n        let isConnected = false;\n\n        const whenConnected = () => {\n            connectGraph();\n\n            isConnected = true;\n        };\n        const whenDisconnected = () => {\n            disconnectGraph();\n\n            isConnected = false;\n        };\n\n        return monitorConnections(\n            interceptConnections(nativeStereoPannerNodeFakerFactory, channelMergerNode),\n            whenConnected,\n            whenDisconnected\n        );\n    };\n};\n","import { assignNativeAudioNodeAudioParamValue } from '../helpers/assign-native-audio-node-audio-param-value';\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { TNativeStereoPannerNodeFactoryFactory } from '../types';\n\nexport const createNativeStereoPannerNodeFactory: TNativeStereoPannerNodeFactoryFactory = (\n    createNativeStereoPannerNodeFaker,\n    createNotSupportedError\n) => {\n    return (nativeContext, options) => {\n        const channelCountMode = options.channelCountMode;\n\n        /*\n         * Bug #105: The channelCountMode of 'clamped-max' should be supported. However it is not possible to write a polyfill for Safari\n         * which supports it and therefore it can't be supported at all.\n         */\n        if (channelCountMode === 'clamped-max') {\n            throw createNotSupportedError();\n        }\n\n        // Bug #105: Safari does not support the StereoPannerNode.\n        if (nativeContext.createStereoPanner === undefined) {\n            return createNativeStereoPannerNodeFaker(nativeContext, options);\n        }\n\n        const nativeStereoPannerNode = nativeContext.createStereoPanner();\n\n        assignNativeAudioNodeOptions(nativeStereoPannerNode, options);\n\n        assignNativeAudioNodeAudioParamValue(nativeStereoPannerNode, options, 'pan');\n\n        /*\n         * Bug #105: The channelCountMode of 'clamped-max' should be supported. However it is not possible to write a polyfill for Safari\n         * which supports it and therefore it can't be supported at all.\n         */\n        Object.defineProperty(nativeStereoPannerNode, 'channelCountMode', {\n            get: () => channelCountMode,\n            set: (value) => {\n                if (value !== channelCountMode) {\n                    throw createNotSupportedError();\n                }\n            }\n        });\n\n        return nativeStereoPannerNode;\n    };\n};\n","import { isNativeAudioNodeFaker } from '../guards/native-audio-node-faker';\nimport { isOwnedByContext } from '../helpers/is-owned-by-context';\nimport { IMinimalOfflineAudioContext, IOfflineAudioContext, IStereoPannerNode } from '../interfaces';\nimport { TNativeOfflineAudioContext, TNativeStereoPannerNode, TStereoPannerNodeRendererFactoryFactory } from '../types';\n\nexport const createStereoPannerNodeRendererFactory: TStereoPannerNodeRendererFactoryFactory = (\n    connectAudioParam,\n    createNativeStereoPannerNode,\n    getNativeAudioNode,\n    renderAutomation,\n    renderInputsOfAudioNode\n) => {\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>() => {\n        const renderedNativeStereoPannerNodes = new WeakMap<TNativeOfflineAudioContext, TNativeStereoPannerNode>();\n\n        const createStereoPannerNode = async (proxy: IStereoPannerNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext) => {\n            let nativeStereoPannerNode = getNativeAudioNode<T, TNativeStereoPannerNode>(proxy);\n\n            /*\n             * If the initially used nativeStereoPannerNode was not constructed on the same OfflineAudioContext it needs to be created\n             * again.\n             */\n            const nativeStereoPannerNodeIsOwnedByContext = isOwnedByContext(nativeStereoPannerNode, nativeOfflineAudioContext);\n\n            if (!nativeStereoPannerNodeIsOwnedByContext) {\n                const options = {\n                    channelCount: nativeStereoPannerNode.channelCount,\n                    channelCountMode: nativeStereoPannerNode.channelCountMode,\n                    channelInterpretation: nativeStereoPannerNode.channelInterpretation,\n                    pan: nativeStereoPannerNode.pan.value\n                };\n\n                nativeStereoPannerNode = createNativeStereoPannerNode(nativeOfflineAudioContext, options);\n            }\n\n            renderedNativeStereoPannerNodes.set(nativeOfflineAudioContext, nativeStereoPannerNode);\n\n            if (!nativeStereoPannerNodeIsOwnedByContext) {\n                await renderAutomation(nativeOfflineAudioContext, proxy.pan, nativeStereoPannerNode.pan);\n            } else {\n                await connectAudioParam(nativeOfflineAudioContext, proxy.pan, nativeStereoPannerNode.pan);\n            }\n\n            if (isNativeAudioNodeFaker(nativeStereoPannerNode)) {\n                await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeStereoPannerNode.inputs[0]);\n            } else {\n                await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeStereoPannerNode);\n            }\n\n            return nativeStereoPannerNode;\n        };\n\n        return {\n            render(proxy: IStereoPannerNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext): Promise<TNativeStereoPannerNode> {\n                const renderedNativeStereoPannerNode = renderedNativeStereoPannerNodes.get(nativeOfflineAudioContext);\n\n                if (renderedNativeStereoPannerNode !== undefined) {\n                    return Promise.resolve(renderedNativeStereoPannerNode);\n                }\n\n                return createStereoPannerNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n","import { isNativeAudioNodeFaker } from '../guards/native-audio-node-faker';\nimport { isOwnedByContext } from '../helpers/is-owned-by-context';\nimport { IMinimalOfflineAudioContext, IOfflineAudioContext, IWaveShaperNode } from '../interfaces';\nimport { TNativeOfflineAudioContext, TNativeWaveShaperNode, TWaveShaperNodeRendererFactoryFactory } from '../types';\n\nexport const createWaveShaperNodeRendererFactory: TWaveShaperNodeRendererFactoryFactory = (\n    createNativeWaveShaperNode,\n    getNativeAudioNode,\n    renderInputsOfAudioNode\n) => {\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>() => {\n        const renderedNativeWaveShaperNodes = new WeakMap<TNativeOfflineAudioContext, TNativeWaveShaperNode>();\n\n        const createWaveShaperNode = async (proxy: IWaveShaperNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext) => {\n            let nativeWaveShaperNode = getNativeAudioNode<T, TNativeWaveShaperNode>(proxy);\n\n            // If the initially used nativeWaveShaperNode was not constructed on the same OfflineAudioContext it needs to be created again.\n            const nativeWaveShaperNodeIsOwnedByContext = isOwnedByContext(nativeWaveShaperNode, nativeOfflineAudioContext);\n\n            if (!nativeWaveShaperNodeIsOwnedByContext) {\n                const options = {\n                    channelCount: nativeWaveShaperNode.channelCount,\n                    channelCountMode: nativeWaveShaperNode.channelCountMode,\n                    channelInterpretation: nativeWaveShaperNode.channelInterpretation,\n                    curve: nativeWaveShaperNode.curve,\n                    oversample: nativeWaveShaperNode.oversample\n                };\n\n                nativeWaveShaperNode = createNativeWaveShaperNode(nativeOfflineAudioContext, options);\n            }\n\n            renderedNativeWaveShaperNodes.set(nativeOfflineAudioContext, nativeWaveShaperNode);\n\n            if (isNativeAudioNodeFaker(nativeWaveShaperNode)) {\n                await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeWaveShaperNode.inputs[0]);\n            } else {\n                await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeWaveShaperNode);\n            }\n\n            return nativeWaveShaperNode;\n        };\n\n        return {\n            render(proxy: IWaveShaperNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext): Promise<TNativeWaveShaperNode> {\n                const renderedNativeWaveShaperNode = renderedNativeWaveShaperNodes.get(nativeOfflineAudioContext);\n\n                if (renderedNativeWaveShaperNode !== undefined) {\n                    return Promise.resolve(renderedNativeWaveShaperNode);\n                }\n\n                return createWaveShaperNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n","import { TIsSecureContextFactory } from '../types';\n\nexport const createIsSecureContext: TIsSecureContextFactory = (window) => window !== null && window.isSecureContext;\n","import { TExposeCurrentFrameAndCurrentTimeFactory } from '../types';\n\nexport const createExposeCurrentFrameAndCurrentTime: TExposeCurrentFrameAndCurrentTimeFactory = (window) => {\n    return (currentTime, sampleRate, fn) => {\n        Object.defineProperties(window, {\n            currentFrame: {\n                configurable: true,\n                get(): number {\n                    return Math.round(currentTime * sampleRate);\n                }\n            },\n            currentTime: {\n                configurable: true,\n                get(): number {\n                    return currentTime;\n                }\n            }\n        });\n\n        try {\n            return fn();\n        } finally {\n            if (window !== null) {\n                delete (<any>window).currentFrame;\n                delete (<any>window).currentTime;\n            }\n        }\n    };\n};\n","import { TGetOrCreateBackupOfflineAudioContextFactory } from '../types';\n\nexport const createGetOrCreateBackupOfflineAudioContext: TGetOrCreateBackupOfflineAudioContextFactory = (\n    backupOfflineAudioContextStore,\n    nativeOfflineAudioContextConstructor\n) => {\n    return (nativeContext) => {\n        let backupOfflineAudioContext = backupOfflineAudioContextStore.get(nativeContext);\n\n        if (backupOfflineAudioContext !== undefined) {\n            return backupOfflineAudioContext;\n        }\n\n        if (nativeOfflineAudioContextConstructor === null) {\n            throw new Error('Missing the native OfflineAudioContext constructor.');\n        }\n\n        // Bug #141: Safari does not support creating an OfflineAudioContext with less than 44100 Hz.\n        backupOfflineAudioContext = new nativeOfflineAudioContextConstructor(1, 1, 44100);\n\n        backupOfflineAudioContextStore.set(nativeContext, backupOfflineAudioContext);\n\n        return backupOfflineAudioContext;\n    };\n};\n","import { TEvaluateSourceFactory } from '../types';\n\nexport const createEvaluateSource: TEvaluateSourceFactory = (window) => {\n    return (source) =>\n        new Promise((resolve, reject) => {\n            if (window === null) {\n                // Bug #182 Chrome and Edge do throw an instance of a SyntaxError instead of a DOMException.\n                reject(new SyntaxError());\n\n                return;\n            }\n\n            const head = window.document.head;\n\n            if (head === null) {\n                // Bug #182 Chrome and Edge do throw an instance of a SyntaxError instead of a DOMException.\n                reject(new SyntaxError());\n            } else {\n                const script = window.document.createElement('script');\n                // @todo Safari doesn't like URLs with a type of 'application/javascript; charset=utf-8'.\n                const blob = new Blob([source], { type: 'application/javascript' });\n                const url = URL.createObjectURL(blob);\n\n                const originalOnErrorHandler = window.onerror;\n\n                const removeErrorEventListenerAndRevokeUrl = () => {\n                    window.onerror = originalOnErrorHandler;\n\n                    URL.revokeObjectURL(url);\n                };\n\n                window.onerror = (message, src, lineno, colno, error) => {\n                    // @todo Edge thinks the source is the one of the html document.\n                    if (src === url || (src === window.location.href && lineno === 1 && colno === 1)) {\n                        removeErrorEventListenerAndRevokeUrl();\n                        reject(error);\n\n                        return false;\n                    }\n\n                    if (originalOnErrorHandler !== null) {\n                        return originalOnErrorHandler(message, src, lineno, colno, error);\n                    }\n                };\n\n                script.onerror = () => {\n                    removeErrorEventListenerAndRevokeUrl();\n                    // Bug #182 Chrome and Edge do throw an instance of a SyntaxError instead of a DOMException.\n                    reject(new SyntaxError());\n                };\n                script.onload = () => {\n                    removeErrorEventListenerAndRevokeUrl();\n                    resolve();\n                };\n                script.src = url;\n                script.type = 'module';\n\n                head.appendChild(script);\n            }\n        });\n};\n","import { TFetchSourceFactory } from '../types';\n\nexport const createFetchSource: TFetchSourceFactory = (createAbortError) => {\n    return async (url) => {\n        try {\n            const response = await fetch(url);\n\n            if (response.ok) {\n                return [await response.text(), response.url];\n            }\n        } catch {\n            // Ignore errors.\n        } // tslint:disable-line:no-empty\n\n        throw createAbortError();\n    };\n};\n","import { TTestAudioWorkletProcessorPostMessageSupportFactory } from '../types';\n\n// Bug #179: Firefox does not allow to transfer any buffer which has been passed to the process() method as an argument.\nexport const createTestAudioWorkletProcessorPostMessageSupport: TTestAudioWorkletProcessorPostMessageSupportFactory = (\n    nativeAudioWorkletNodeConstructor,\n    nativeOfflineAudioContextConstructor\n) => {\n    return async () => {\n        // Bug #61: If there is no native AudioWorkletNode it gets faked and therefore it is no problem if the it doesn't exist.\n        if (nativeAudioWorkletNodeConstructor === null) {\n            return true;\n        }\n\n        if (nativeOfflineAudioContextConstructor === null) {\n            return false;\n        }\n\n        const blob = new Blob(\n            ['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor(\"a\",A)'],\n            {\n                type: 'application/javascript; charset=utf-8'\n            }\n        );\n        // Bug #141: Safari does not support creating an OfflineAudioContext with less than 44100 Hz.\n        const offlineAudioContext = new nativeOfflineAudioContextConstructor(1, 128, 44100);\n        const url = URL.createObjectURL(blob);\n\n        let isEmittingMessageEvents = false;\n        let isEmittingProcessorErrorEvents = false;\n\n        try {\n            await offlineAudioContext.audioWorklet.addModule(url);\n\n            const audioWorkletNode = new nativeAudioWorkletNodeConstructor(offlineAudioContext, 'a', { numberOfOutputs: 0 });\n            const oscillator = offlineAudioContext.createOscillator();\n\n            audioWorkletNode.port.onmessage = () => (isEmittingMessageEvents = true);\n            audioWorkletNode.onprocessorerror = () => (isEmittingProcessorErrorEvents = true);\n\n            oscillator.connect(audioWorkletNode);\n            oscillator.start(0);\n\n            await offlineAudioContext.startRendering();\n\n            // Bug #197: Safari does not deliver the messages before the promise returned by startRendering() resolves.\n            await new Promise((resolve) => setTimeout(resolve));\n        } catch {\n            // Ignore errors.\n        } finally {\n            URL.revokeObjectURL(url);\n        }\n\n        return isEmittingMessageEvents && !isEmittingProcessorErrorEvents;\n    };\n};\n","import { TIsNativeContextFactory, TNativeAudioContext } from '../types';\n\nexport const createIsNativeContext: TIsNativeContextFactory = (isNativeAudioContext, isNativeOfflineAudioContext) => {\n    return (anything): anything is TNativeAudioContext => {\n        return isNativeAudioContext(anything) || isNativeOfflineAudioContext(anything);\n    };\n};\n","import { detachArrayBuffer } from '../helpers/detach-array-buffer';\nimport { wrapAudioBufferGetChannelDataMethod } from '../helpers/wrap-audio-buffer-get-channel-data-method';\nimport { TDecodeAudioDataFactory } from '../types';\n\nexport const createDecodeAudioData: TDecodeAudioDataFactory = (\n    audioBufferStore,\n    cacheTestResult,\n    createDataCloneError,\n    createEncodingError,\n    detachedArrayBuffers,\n    getNativeContext,\n    isNativeContext,\n    testAudioBufferCopyChannelMethodsOutOfBoundsSupport,\n    testPromiseSupport,\n    wrapAudioBufferCopyChannelMethods,\n    wrapAudioBufferCopyChannelMethodsOutOfBounds\n) => {\n    return (anyContext, audioData) => {\n        const nativeContext = isNativeContext(anyContext) ? anyContext : getNativeContext(anyContext);\n\n        // Bug #43: Only Chrome and Edge do throw a DataCloneError.\n        if (detachedArrayBuffers.has(audioData)) {\n            const err = createDataCloneError();\n\n            return Promise.reject(err);\n        }\n\n        // The audioData parameter maybe of a type which can't be added to a WeakSet.\n        try {\n            detachedArrayBuffers.add(audioData);\n        } catch {\n            // Ignore errors.\n        }\n\n        // Bug #21: Safari does not support promises yet.\n        if (cacheTestResult(testPromiseSupport, () => testPromiseSupport(nativeContext))) {\n            return nativeContext.decodeAudioData(audioData).then((audioBuffer) => {\n                // Bug #133: Safari does neuter the ArrayBuffer.\n                detachArrayBuffer(audioData).catch(() => {\n                    // Ignore errors.\n                });\n\n                // Bug #157: Firefox does not allow the bufferOffset to be out-of-bounds.\n                if (\n                    !cacheTestResult(testAudioBufferCopyChannelMethodsOutOfBoundsSupport, () =>\n                        testAudioBufferCopyChannelMethodsOutOfBoundsSupport(audioBuffer)\n                    )\n                ) {\n                    wrapAudioBufferCopyChannelMethodsOutOfBounds(audioBuffer);\n                }\n\n                audioBufferStore.add(audioBuffer);\n\n                return audioBuffer;\n            });\n        }\n\n        // Bug #21: Safari does not return a Promise yet.\n        return new Promise((resolve, reject) => {\n            const complete = async () => {\n                // Bug #133: Safari does neuter the ArrayBuffer.\n                try {\n                    await detachArrayBuffer(audioData);\n                } catch {\n                    // Ignore errors.\n                }\n            };\n\n            const fail = (err: DOMException | Error) => {\n                reject(err);\n                complete();\n            };\n\n            // Bug #26: Safari throws a synchronous error.\n            try {\n                // Bug #1: Safari requires a successCallback.\n                nativeContext.decodeAudioData(\n                    audioData,\n                    (audioBuffer) => {\n                        // Bug #5: Safari does not support copyFromChannel() and copyToChannel().\n                        // Bug #100: Safari does throw a wrong error when calling getChannelData() with an out-of-bounds value.\n                        if (typeof audioBuffer.copyFromChannel !== 'function') {\n                            wrapAudioBufferCopyChannelMethods(audioBuffer);\n                            wrapAudioBufferGetChannelDataMethod(audioBuffer);\n                        }\n\n                        audioBufferStore.add(audioBuffer);\n\n                        complete().then(() => resolve(audioBuffer));\n                    },\n                    (err: DOMException | Error) => {\n                        // Bug #4: Safari returns null instead of an error.\n                        if (err === null) {\n                            fail(createEncodingError());\n                        } else {\n                            fail(err);\n                        }\n                    }\n                );\n            } catch (err) {\n                fail(err);\n            }\n        });\n    };\n};\n","import { TDataCloneErrorFactory } from '../types';\n\nexport const createDataCloneError: TDataCloneErrorFactory = () => new DOMException('', 'DataCloneError');\n","import { TEncodingErrorFactory } from '../types';\n\nexport const createEncodingError: TEncodingErrorFactory = () => new DOMException('', 'EncodingError');\n","import {\n    IAnalyserNode,\n    IAudioBuffer,\n    IAudioBufferSourceNode,\n    IAudioNode,\n    IAudioWorklet,\n    IBaseAudioContext,\n    IBiquadFilterNode,\n    IConstantSourceNode,\n    IConvolverNode,\n    IDelayNode,\n    IDynamicsCompressorNode,\n    IGainNode,\n    IIIRFilterNode,\n    IOscillatorNode,\n    IPannerNode,\n    IPeriodicWave,\n    IPeriodicWaveConstraints,\n    IStereoPannerNode,\n    IWaveShaperNode,\n    IWorkletOptions\n} from '../interfaces';\nimport { TBaseAudioContextConstructorFactory, TContext, TDecodeErrorCallback, TDecodeSuccessCallback, TNativeContext } from '../types';\n\nexport const createBaseAudioContextConstructor: TBaseAudioContextConstructorFactory = (\n    addAudioWorkletModule,\n    analyserNodeConstructor,\n    audioBufferConstructor,\n    audioBufferSourceNodeConstructor,\n    biquadFilterNodeConstructor,\n    channelMergerNodeConstructor,\n    channelSplitterNodeConstructor,\n    constantSourceNodeConstructor,\n    convolverNodeConstructor,\n    decodeAudioData,\n    delayNodeConstructor,\n    dynamicsCompressorNodeConstructor,\n    gainNodeConstructor,\n    iIRFilterNodeConstructor,\n    minimalBaseAudioContextConstructor,\n    oscillatorNodeConstructor,\n    pannerNodeConstructor,\n    periodicWaveConstructor,\n    stereoPannerNodeConstructor,\n    waveShaperNodeConstructor\n) => {\n    return class BaseAudioContext<T extends TContext> extends minimalBaseAudioContextConstructor<T> implements IBaseAudioContext<T> {\n        private _audioWorklet: undefined | IAudioWorklet;\n\n        constructor(private _nativeContext: TNativeContext, numberOfChannels: number) {\n            super(_nativeContext, numberOfChannels);\n\n            this._audioWorklet =\n                addAudioWorkletModule === undefined\n                    ? undefined\n                    : {\n                          addModule: (moduleURL: string, options?: IWorkletOptions) => {\n                              return addAudioWorkletModule(<T>(<unknown>this), moduleURL, options);\n                          }\n                      };\n        }\n\n        get audioWorklet(): undefined | IAudioWorklet {\n            return this._audioWorklet;\n        }\n\n        public createAnalyser(): IAnalyserNode<T> {\n            return new analyserNodeConstructor(<T>(<unknown>this));\n        }\n\n        public createBiquadFilter(): IBiquadFilterNode<T> {\n            return new biquadFilterNodeConstructor(<T>(<unknown>this));\n        }\n\n        public createBuffer(numberOfChannels: number, length: number, sampleRate: number): IAudioBuffer {\n            return new audioBufferConstructor({ length, numberOfChannels, sampleRate });\n        }\n\n        public createBufferSource(): IAudioBufferSourceNode<T> {\n            return new audioBufferSourceNodeConstructor(<T>(<unknown>this));\n        }\n\n        public createChannelMerger(numberOfInputs = 6): IAudioNode<T> {\n            return new channelMergerNodeConstructor(<T>(<unknown>this), { numberOfInputs });\n        }\n\n        public createChannelSplitter(numberOfOutputs = 6): IAudioNode<T> {\n            return new channelSplitterNodeConstructor(<T>(<unknown>this), { numberOfOutputs });\n        }\n\n        public createConstantSource(): IConstantSourceNode<T> {\n            return new constantSourceNodeConstructor(<T>(<unknown>this));\n        }\n\n        public createConvolver(): IConvolverNode<T> {\n            return new convolverNodeConstructor(<T>(<unknown>this));\n        }\n\n        public createDelay(maxDelayTime = 1): IDelayNode<T> {\n            return new delayNodeConstructor(<T>(<unknown>this), { maxDelayTime });\n        }\n\n        public createDynamicsCompressor(): IDynamicsCompressorNode<T> {\n            return new dynamicsCompressorNodeConstructor(<T>(<unknown>this));\n        }\n\n        public createGain(): IGainNode<T> {\n            return new gainNodeConstructor(<T>(<unknown>this));\n        }\n\n        public createIIRFilter(feedforward: Iterable<number>, feedback: Iterable<number>): IIIRFilterNode<T> {\n            return new iIRFilterNodeConstructor(<T>(<unknown>this), { feedback, feedforward });\n        }\n\n        public createOscillator(): IOscillatorNode<T> {\n            return new oscillatorNodeConstructor(<T>(<unknown>this));\n        }\n\n        public createPanner(): IPannerNode<T> {\n            return new pannerNodeConstructor(<T>(<unknown>this));\n        }\n\n        public createPeriodicWave(\n            real: Iterable<number>,\n            imag: Iterable<number>,\n            constraints: Partial<IPeriodicWaveConstraints> = { disableNormalization: false }\n        ): IPeriodicWave {\n            return new periodicWaveConstructor(<T>(<unknown>this), { ...constraints, imag, real });\n        }\n\n        public createStereoPanner(): IStereoPannerNode<T> {\n            return new stereoPannerNodeConstructor(<T>(<unknown>this));\n        }\n\n        public createWaveShaper(): IWaveShaperNode<T> {\n            return new waveShaperNodeConstructor(<T>(<unknown>this));\n        }\n\n        public decodeAudioData(\n            audioData: ArrayBuffer,\n            successCallback?: TDecodeSuccessCallback,\n            errorCallback?: TDecodeErrorCallback\n        ): Promise<IAudioBuffer> {\n            return decodeAudioData(this._nativeContext, audioData).then(\n                (audioBuffer) => {\n                    if (typeof successCallback === 'function') {\n                        successCallback(audioBuffer);\n                    }\n\n                    return audioBuffer;\n                },\n                (err) => {\n                    if (typeof errorCallback === 'function') {\n                        errorCallback(err);\n                    }\n\n                    throw err;\n                }\n            );\n        }\n    };\n};\n","import { IAudioContext, IMediaElementAudioSourceNode, IMediaElementAudioSourceOptions, IMinimalAudioContext } from '../interfaces';\nimport { TAudioNodeRenderer, TMediaElementAudioSourceNodeConstructorFactory, TNativeMediaElementAudioSourceNode } from '../types';\n\nexport const createMediaElementAudioSourceNodeConstructor: TMediaElementAudioSourceNodeConstructorFactory = (\n    audioNodeConstructor,\n    createNativeMediaElementAudioSourceNode,\n    getNativeContext,\n    isNativeOfflineAudioContext\n) => {\n    return class MediaElementAudioSourceNode<T extends IAudioContext | IMinimalAudioContext> extends audioNodeConstructor<T>\n        implements IMediaElementAudioSourceNode<T> {\n        private _nativeMediaElementAudioSourceNode: TNativeMediaElementAudioSourceNode;\n\n        constructor(context: T, options: IMediaElementAudioSourceOptions) {\n            const nativeContext = getNativeContext(context);\n            const nativeMediaElementAudioSourceNode = createNativeMediaElementAudioSourceNode(nativeContext, options);\n\n            // Bug #171: Safari allows to create a MediaElementAudioSourceNode with an OfflineAudioContext.\n            if (isNativeOfflineAudioContext(nativeContext)) {\n                throw TypeError();\n            }\n\n            super(context, true, nativeMediaElementAudioSourceNode, <TAudioNodeRenderer<T>>null);\n\n            this._nativeMediaElementAudioSourceNode = nativeMediaElementAudioSourceNode;\n        }\n\n        get mediaElement(): HTMLMediaElement {\n            return this._nativeMediaElementAudioSourceNode.mediaElement;\n        }\n    };\n};\n","import { TNativeMediaElementAudioSourceNodeFactory } from '../types';\n\nexport const createNativeMediaElementAudioSourceNode: TNativeMediaElementAudioSourceNodeFactory = (nativeAudioContext, options) => {\n    return nativeAudioContext.createMediaElementSource(options.mediaElement);\n};\n","import { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { TNativeMediaStreamAudioDestinationNodeFactory } from '../types';\n\nexport const createNativeMediaStreamAudioDestinationNode: TNativeMediaStreamAudioDestinationNodeFactory = (nativeAudioContext, options) => {\n    const nativeMediaStreamAudioDestinationNode = nativeAudioContext.createMediaStreamDestination();\n\n    assignNativeAudioNodeOptions(nativeMediaStreamAudioDestinationNode, options);\n\n    // Bug #174: Safari does expose a wrong numberOfOutputs.\n    if (nativeMediaStreamAudioDestinationNode.numberOfOutputs === 1) {\n        Object.defineProperty(nativeMediaStreamAudioDestinationNode, 'numberOfOutputs', { get: () => 0 });\n    }\n\n    return nativeMediaStreamAudioDestinationNode;\n};\n","import { IAudioContext, IMediaStreamAudioSourceNode, IMediaStreamAudioSourceOptions, IMinimalAudioContext } from '../interfaces';\nimport { TAudioNodeRenderer, TMediaStreamAudioSourceNodeConstructorFactory, TNativeMediaStreamAudioSourceNode } from '../types';\n\nexport const createMediaStreamAudioSourceNodeConstructor: TMediaStreamAudioSourceNodeConstructorFactory = (\n    audioNodeConstructor,\n    createNativeMediaStreamAudioSourceNode,\n    getNativeContext,\n    isNativeOfflineAudioContext\n) => {\n    return class MediaStreamAudioSourceNode<T extends IAudioContext | IMinimalAudioContext> extends audioNodeConstructor<T>\n        implements IMediaStreamAudioSourceNode<T> {\n        private _nativeMediaStreamAudioSourceNode: TNativeMediaStreamAudioSourceNode;\n\n        constructor(context: T, options: IMediaStreamAudioSourceOptions) {\n            const nativeContext = getNativeContext(context);\n            const nativeMediaStreamAudioSourceNode = createNativeMediaStreamAudioSourceNode(nativeContext, options);\n\n            // Bug #172: Safari allows to create a MediaStreamAudioSourceNode with an OfflineAudioContext.\n            if (isNativeOfflineAudioContext(nativeContext)) {\n                throw new TypeError();\n            }\n\n            super(context, true, nativeMediaStreamAudioSourceNode, <TAudioNodeRenderer<T>>null);\n\n            this._nativeMediaStreamAudioSourceNode = nativeMediaStreamAudioSourceNode;\n        }\n\n        get mediaStream(): MediaStream {\n            return this._nativeMediaStreamAudioSourceNode.mediaStream;\n        }\n    };\n};\n","import { TNativeMediaStreamAudioSourceNodeFactory } from '../types';\n\nexport const createNativeMediaStreamAudioSourceNode: TNativeMediaStreamAudioSourceNodeFactory = (nativeAudioContext, { mediaStream }) => {\n    const audioStreamTracks = mediaStream.getAudioTracks();\n    /*\n     * Bug #151: Safari does not use the audio track as input anymore if it gets removed from the mediaStream after construction.\n     * Bug #159: Safari picks the first audio track if the MediaStream has more than one audio track.\n     */\n    audioStreamTracks.sort((a, b) => (a.id < b.id ? -1 : a.id > b.id ? 1 : 0));\n\n    const filteredAudioStreamTracks = audioStreamTracks.slice(0, 1);\n\n    const nativeMediaStreamAudioSourceNode = nativeAudioContext.createMediaStreamSource(new MediaStream(filteredAudioStreamTracks));\n\n    /*\n     * Bug #151 & #159: The given mediaStream gets reconstructed before it gets passed to the native node which is why the accessor needs\n     * to be overwritten as it would otherwise expose the reconstructed version.\n     */\n    Object.defineProperty(nativeMediaStreamAudioSourceNode, 'mediaStream', { value: mediaStream });\n\n    return nativeMediaStreamAudioSourceNode;\n};\n","import { TNativeMediaStreamTrackAudioSourceNodeFactoryFactory } from '../types';\n\nexport const createNativeMediaStreamTrackAudioSourceNodeFactory: TNativeMediaStreamTrackAudioSourceNodeFactoryFactory = (\n    createInvalidStateError,\n    isNativeOfflineAudioContext\n) => {\n    return (nativeAudioContext, { mediaStreamTrack }) => {\n        // Bug #121: Only Firefox does yet support the MediaStreamTrackAudioSourceNode.\n        if (typeof nativeAudioContext.createMediaStreamTrackSource === 'function') {\n            return nativeAudioContext.createMediaStreamTrackSource(mediaStreamTrack);\n        }\n\n        const mediaStream = new MediaStream([mediaStreamTrack]);\n        const nativeMediaStreamAudioSourceNode = nativeAudioContext.createMediaStreamSource(mediaStream);\n\n        // Bug #120: Firefox does not throw an error if the mediaStream has no audio track.\n        if (mediaStreamTrack.kind !== 'audio') {\n            throw createInvalidStateError();\n        }\n\n        // Bug #172: Safari allows to create a MediaStreamAudioSourceNode with an OfflineAudioContext.\n        if (isNativeOfflineAudioContext(nativeAudioContext)) {\n            throw new TypeError();\n        }\n\n        return nativeMediaStreamAudioSourceNode;\n    };\n};\n","import { IAudioContext, IMediaStreamTrackAudioSourceNode, IMediaStreamTrackAudioSourceOptions, IMinimalAudioContext } from '../interfaces';\nimport { TAudioNodeRenderer, TMediaStreamTrackAudioSourceNodeConstructorFactory } from '../types';\n\nexport const createMediaStreamTrackAudioSourceNodeConstructor: TMediaStreamTrackAudioSourceNodeConstructorFactory = (\n    audioNodeConstructor,\n    createNativeMediaStreamTrackAudioSourceNode,\n    getNativeContext\n) => {\n    return class MediaStreamTrackAudioSourceNode<T extends IAudioContext | IMinimalAudioContext> extends audioNodeConstructor<T>\n        implements IMediaStreamTrackAudioSourceNode<T> {\n        constructor(context: T, options: IMediaStreamTrackAudioSourceOptions) {\n            const nativeContext = getNativeContext(context);\n            const nativeMediaStreamTrackAudioSourceNode = createNativeMediaStreamTrackAudioSourceNode(nativeContext, options);\n\n            super(context, true, nativeMediaStreamTrackAudioSourceNode, <TAudioNodeRenderer<T>>null);\n        }\n    };\n};\n","import { deactivateAudioGraph } from '../helpers/deactivate-audio-graph';\nimport { isValidLatencyHint } from '../helpers/is-valid-latency-hint';\nimport {\n    IAudioContext,\n    IAudioContextOptions,\n    IMediaElementAudioSourceNode,\n    IMediaStreamAudioDestinationNode,\n    IMediaStreamAudioSourceNode,\n    IMediaStreamTrackAudioSourceNode\n} from '../interfaces';\nimport { TAudioContextConstructorFactory, TAudioContextState, TNativeAudioContext, TNativeGainNode, TNativeOscillatorNode } from '../types';\n\nexport const createAudioContextConstructor: TAudioContextConstructorFactory = (\n    baseAudioContextConstructor,\n    createInvalidStateError,\n    createNotSupportedError,\n    createUnknownError,\n    mediaElementAudioSourceNodeConstructor,\n    mediaStreamAudioDestinationNodeConstructor,\n    mediaStreamAudioSourceNodeConstructor,\n    mediaStreamTrackAudioSourceNodeConstructor,\n    nativeAudioContextConstructor\n) => {\n    return class AudioContext extends baseAudioContextConstructor<IAudioContext> implements IAudioContext {\n        private _baseLatency: number;\n\n        private _nativeAudioContext: TNativeAudioContext;\n\n        private _nativeGainNode: null | TNativeGainNode;\n\n        private _nativeOscillatorNode: null | TNativeOscillatorNode;\n\n        private _state: null | 'suspended';\n\n        constructor(options: IAudioContextOptions = {}) {\n            if (nativeAudioContextConstructor === null) {\n                throw new Error('Missing the native AudioContext constructor.');\n            }\n\n            let nativeAudioContext: TNativeAudioContext;\n\n            try {\n                nativeAudioContext = new nativeAudioContextConstructor(options);\n            } catch (err) {\n                // Bug #192 Safari does throw a SyntaxError if the sampleRate is not supported.\n                if (err.code === 12 && err.message === 'sampleRate is not in range') {\n                    throw createNotSupportedError();\n                }\n\n                throw err;\n            }\n\n            // Bug #131 Safari returns null when there are four other AudioContexts running already.\n            if (nativeAudioContext === null) {\n                throw createUnknownError();\n            }\n\n            // Bug #51 Only Chrome and Edge throw an error if the given latencyHint is invalid.\n            if (!isValidLatencyHint(options.latencyHint)) {\n                throw new TypeError(\n                    `The provided value '${options.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`\n                );\n            }\n\n            // Bug #150 Safari does not support setting the sampleRate.\n            if (options.sampleRate !== undefined && nativeAudioContext.sampleRate !== options.sampleRate) {\n                throw createNotSupportedError();\n            }\n\n            super(nativeAudioContext, 2);\n\n            const { latencyHint } = options;\n            const { sampleRate } = nativeAudioContext;\n\n            // @todo The values for 'balanced', 'interactive' and 'playback' are just copied from Chrome's implementation.\n            this._baseLatency =\n                typeof nativeAudioContext.baseLatency === 'number'\n                    ? nativeAudioContext.baseLatency\n                    : latencyHint === 'balanced'\n                    ? 512 / sampleRate\n                    : latencyHint === 'interactive' || latencyHint === undefined\n                    ? 256 / sampleRate\n                    : latencyHint === 'playback'\n                    ? 1024 / sampleRate\n                    : /*\n                       * @todo The min (256) and max (16384) values are taken from the allowed bufferSize values of a\n                       * ScriptProcessorNode.\n                       */\n                      (Math.max(2, Math.min(128, Math.round((latencyHint * sampleRate) / 128))) * 128) / sampleRate;\n            this._nativeAudioContext = nativeAudioContext;\n\n            // Bug #188: Safari will set the context's state to 'interrupted' in case the user switches tabs.\n            if (nativeAudioContextConstructor.name === 'webkitAudioContext') {\n                this._nativeGainNode = nativeAudioContext.createGain();\n                this._nativeOscillatorNode = nativeAudioContext.createOscillator();\n\n                this._nativeGainNode.gain.value = 1e-37;\n\n                this._nativeOscillatorNode.connect(this._nativeGainNode).connect(nativeAudioContext.destination);\n                this._nativeOscillatorNode.start();\n            } else {\n                this._nativeGainNode = null;\n                this._nativeOscillatorNode = null;\n            }\n\n            this._state = null;\n\n            /*\n             * Bug #34: Chrome and Edge pretend to be running right away, but fire an onstatechange event when the state actually changes\n             * to 'running'.\n             */\n            if (nativeAudioContext.state === 'running') {\n                this._state = 'suspended';\n\n                const revokeState = () => {\n                    if (this._state === 'suspended') {\n                        this._state = null;\n                    }\n\n                    nativeAudioContext.removeEventListener('statechange', revokeState);\n                };\n\n                nativeAudioContext.addEventListener('statechange', revokeState);\n            }\n        }\n\n        get baseLatency(): number {\n            return this._baseLatency;\n        }\n\n        get state(): TAudioContextState {\n            return this._state !== null ? this._state : this._nativeAudioContext.state;\n        }\n\n        public close(): Promise<void> {\n            // Bug #35: Firefox does not throw an error if the AudioContext was closed before.\n            if (this.state === 'closed') {\n                return this._nativeAudioContext.close().then(() => {\n                    throw createInvalidStateError();\n                });\n            }\n\n            // Bug #34: If the state was set to suspended before it should be revoked now.\n            if (this._state === 'suspended') {\n                this._state = null;\n            }\n\n            return this._nativeAudioContext.close().then(() => {\n                if (this._nativeGainNode !== null && this._nativeOscillatorNode !== null) {\n                    this._nativeOscillatorNode.stop();\n\n                    this._nativeGainNode.disconnect();\n                    this._nativeOscillatorNode.disconnect();\n                }\n\n                deactivateAudioGraph(this);\n            });\n        }\n\n        public createMediaElementSource(mediaElement: HTMLMediaElement): IMediaElementAudioSourceNode<this> {\n            return new mediaElementAudioSourceNodeConstructor(this, { mediaElement });\n        }\n\n        public createMediaStreamDestination(): IMediaStreamAudioDestinationNode<this> {\n            return new mediaStreamAudioDestinationNodeConstructor(this);\n        }\n\n        public createMediaStreamSource(mediaStream: MediaStream): IMediaStreamAudioSourceNode<this> {\n            return new mediaStreamAudioSourceNodeConstructor(this, { mediaStream });\n        }\n\n        public createMediaStreamTrackSource(mediaStreamTrack: MediaStreamTrack): IMediaStreamTrackAudioSourceNode<this> {\n            return new mediaStreamTrackAudioSourceNodeConstructor(this, { mediaStreamTrack });\n        }\n\n        public resume(): Promise<void> {\n            if (this._state === 'suspended') {\n                return new Promise((resolve, reject) => {\n                    const resolvePromise = () => {\n                        this._nativeAudioContext.removeEventListener('statechange', resolvePromise);\n\n                        if (this._nativeAudioContext.state === 'running') {\n                            resolve();\n                        } else {\n                            this.resume().then(resolve, reject);\n                        }\n                    };\n\n                    this._nativeAudioContext.addEventListener('statechange', resolvePromise);\n                });\n            }\n\n            return this._nativeAudioContext.resume().catch((err) => {\n                // Bug #55: Chrome and Edge do throw an InvalidAccessError instead of an InvalidStateError.\n                // Bug #56: Safari invokes the catch handler but without an error.\n                if (err === undefined || err.code === 15) {\n                    throw createInvalidStateError();\n                }\n\n                throw err;\n            });\n        }\n\n        public suspend(): Promise<void> {\n            return this._nativeAudioContext.suspend().catch((err) => {\n                // Bug #56: Safari invokes the catch handler but without an error.\n                if (err === undefined) {\n                    throw createInvalidStateError();\n                }\n\n                throw err;\n            });\n        }\n    };\n};\n","import { TGetUnrenderedAudioWorkletNodesFactory } from '../types';\n\nexport const createGetUnrenderedAudioWorkletNodes: TGetUnrenderedAudioWorkletNodesFactory = (unrenderedAudioWorkletNodeStore) => {\n    return (nativeContext) => {\n        const unrenderedAudioWorkletNodes = unrenderedAudioWorkletNodeStore.get(nativeContext);\n\n        if (unrenderedAudioWorkletNodes === undefined) {\n            throw new Error('The context has no set of AudioWorkletNodes.');\n        }\n\n        return unrenderedAudioWorkletNodes;\n    };\n};\n","import { TAddUnrenderedAudioWorkletNodeFactory } from '../types';\n\nexport const createAddUnrenderedAudioWorkletNode: TAddUnrenderedAudioWorkletNodeFactory = (getUnrenderedAudioWorkletNodes) => {\n    return (nativeContext, audioWorkletNode) => {\n        getUnrenderedAudioWorkletNodes(nativeContext).add(audioWorkletNode);\n    };\n};\n","import { isNativeAudioNode } from '../guards/native-audio-node';\nimport { TConnectMultipleOutputsFactory } from '../types';\n\nexport const createConnectMultipleOutputs: TConnectMultipleOutputsFactory = (createIndexSizeError) => {\n    return (outputAudioNodes, destination, output = 0, input = 0) => {\n        const outputAudioNode = outputAudioNodes[output];\n\n        if (outputAudioNode === undefined) {\n            throw createIndexSizeError();\n        }\n\n        if (isNativeAudioNode(destination)) {\n            return outputAudioNode.connect(destination, 0, input);\n        }\n\n        return outputAudioNode.connect(destination, 0);\n    };\n};\n","import { TDeleteUnrenderedAudioWorkletNodeFactory } from '../types';\n\nexport const createDeleteUnrenderedAudioWorkletNode: TDeleteUnrenderedAudioWorkletNodeFactory = (getUnrenderedAudioWorkletNodes) => {\n    return (nativeContext, audioWorkletNode) => {\n        getUnrenderedAudioWorkletNodes(nativeContext).delete(audioWorkletNode);\n    };\n};\n","import { TActiveInputConnection, TContext, TGetActiveAudioWorkletNodeInputsFactory, TNativeAudioWorkletNode } from '../types';\n\nexport const createGetActiveAudioWorkletNodeInputs: TGetActiveAudioWorkletNodeInputsFactory = (\n    activeAudioWorkletNodeInputsStore,\n    getValueForKey\n) => {\n    return <T extends TContext>(nativeAudioWorkletNode: TNativeAudioWorkletNode) =>\n        <Set<TActiveInputConnection<T>>[]>getValueForKey(activeAudioWorkletNodeInputsStore, nativeAudioWorkletNode);\n};\n","import { MOST_NEGATIVE_SINGLE_FLOAT, MOST_POSITIVE_SINGLE_FLOAT } from '../constants';\nimport { computeBufferSize } from '../helpers/compute-buffer-size';\nimport { copyFromChannel } from '../helpers/copy-from-channel';\nimport { copyToChannel } from '../helpers/copy-to-channel';\nimport { createAudioWorkletProcessor } from '../helpers/create-audio-worklet-processor';\nimport { createNestedArrays } from '../helpers/create-nested-arrays';\nimport { IAudioWorkletProcessor } from '../interfaces';\nimport { ReadOnlyMap } from '../read-only-map';\nimport {\n    TNativeAudioNode,\n    TNativeAudioParam,\n    TNativeAudioWorkletNode,\n    TNativeAudioWorkletNodeFakerFactoryFactory,\n    TNativeChannelMergerNode,\n    TNativeChannelSplitterNode,\n    TNativeConstantSourceNode,\n    TNativeGainNode\n} from '../types';\n\nexport const createNativeAudioWorkletNodeFakerFactory: TNativeAudioWorkletNodeFakerFactoryFactory = (\n    connectMultipleOutputs,\n    createIndexSizeError,\n    createInvalidStateError,\n    createNativeChannelMergerNode,\n    createNativeChannelSplitterNode,\n    createNativeConstantSourceNode,\n    createNativeGainNode,\n    createNativeScriptProcessorNode,\n    createNotSupportedError,\n    disconnectMultipleOutputs,\n    exposeCurrentFrameAndCurrentTime,\n    getActiveAudioWorkletNodeInputs,\n    monitorConnections\n) => {\n    return (nativeContext, baseLatency, processorConstructor, options) => {\n        if (options.numberOfInputs === 0 && options.numberOfOutputs === 0) {\n            throw createNotSupportedError();\n        }\n\n        const outputChannelCount = Array.isArray(options.outputChannelCount)\n            ? options.outputChannelCount\n            : Array.from(options.outputChannelCount);\n\n        // @todo Check if any of the channelCount values is greater than the implementation's maximum number of channels.\n        if (outputChannelCount.some((channelCount) => channelCount < 1)) {\n            throw createNotSupportedError();\n        }\n\n        if (outputChannelCount.length !== options.numberOfOutputs) {\n            throw createIndexSizeError();\n        }\n\n        // Bug #61: This is not part of the standard but required for the faker to work.\n        if (options.channelCountMode !== 'explicit') {\n            throw createNotSupportedError();\n        }\n\n        const numberOfInputChannels = options.channelCount * options.numberOfInputs;\n        const numberOfOutputChannels = outputChannelCount.reduce((sum, value) => sum + value, 0);\n        const numberOfParameters =\n            processorConstructor.parameterDescriptors === undefined ? 0 : processorConstructor.parameterDescriptors.length;\n\n        // Bug #61: This is not part of the standard but required for the faker to work.\n        if (numberOfInputChannels + numberOfParameters > 6 || numberOfOutputChannels > 6) {\n            throw createNotSupportedError();\n        }\n\n        const messageChannel = new MessageChannel();\n        const gainNodes: TNativeGainNode[] = [];\n        const inputChannelSplitterNodes: TNativeChannelSplitterNode[] = [];\n\n        for (let i = 0; i < options.numberOfInputs; i += 1) {\n            gainNodes.push(\n                createNativeGainNode(nativeContext, {\n                    channelCount: options.channelCount,\n                    channelCountMode: options.channelCountMode,\n                    channelInterpretation: options.channelInterpretation,\n                    gain: 1\n                })\n            );\n            inputChannelSplitterNodes.push(\n                createNativeChannelSplitterNode(nativeContext, {\n                    channelCount: options.channelCount,\n                    channelCountMode: 'explicit',\n                    channelInterpretation: 'discrete',\n                    numberOfOutputs: options.channelCount\n                })\n            );\n        }\n\n        const constantSourceNodes: TNativeConstantSourceNode[] = [];\n\n        if (processorConstructor.parameterDescriptors !== undefined) {\n            for (const { defaultValue, maxValue, minValue, name } of processorConstructor.parameterDescriptors) {\n                const constantSourceNode = createNativeConstantSourceNode(nativeContext, {\n                    channelCount: 1,\n                    channelCountMode: 'explicit',\n                    channelInterpretation: 'discrete',\n                    offset:\n                        options.parameterData[name] !== undefined\n                            ? options.parameterData[name]\n                            : defaultValue === undefined\n                            ? 0\n                            : defaultValue\n                });\n\n                Object.defineProperties(constantSourceNode.offset, {\n                    defaultValue: {\n                        get: () => (defaultValue === undefined ? 0 : defaultValue)\n                    },\n                    maxValue: {\n                        get: () => (maxValue === undefined ? MOST_POSITIVE_SINGLE_FLOAT : maxValue)\n                    },\n                    minValue: {\n                        get: () => (minValue === undefined ? MOST_NEGATIVE_SINGLE_FLOAT : minValue)\n                    }\n                });\n\n                constantSourceNodes.push(constantSourceNode);\n            }\n        }\n\n        const inputChannelMergerNode = createNativeChannelMergerNode(nativeContext, {\n            channelCount: 1,\n            channelCountMode: 'explicit',\n            channelInterpretation: 'speakers',\n            numberOfInputs: Math.max(1, numberOfInputChannels + numberOfParameters)\n        });\n        const bufferSize = computeBufferSize(baseLatency, nativeContext.sampleRate);\n        const scriptProcessorNode = createNativeScriptProcessorNode(\n            nativeContext,\n            bufferSize,\n            numberOfInputChannels + numberOfParameters,\n            // Bug #87: Only Firefox will fire an AudioProcessingEvent if there is no connected output.\n            Math.max(1, numberOfOutputChannels)\n        );\n        const outputChannelSplitterNode = createNativeChannelSplitterNode(nativeContext, {\n            channelCount: Math.max(1, numberOfOutputChannels),\n            channelCountMode: 'explicit',\n            channelInterpretation: 'discrete',\n            numberOfOutputs: Math.max(1, numberOfOutputChannels)\n        });\n        const outputChannelMergerNodes: TNativeChannelMergerNode[] = [];\n\n        for (let i = 0; i < options.numberOfOutputs; i += 1) {\n            outputChannelMergerNodes.push(\n                createNativeChannelMergerNode(nativeContext, {\n                    channelCount: 1,\n                    channelCountMode: 'explicit',\n                    channelInterpretation: 'speakers',\n                    numberOfInputs: outputChannelCount[i]\n                })\n            );\n        }\n\n        for (let i = 0; i < options.numberOfInputs; i += 1) {\n            gainNodes[i].connect(inputChannelSplitterNodes[i]);\n\n            for (let j = 0; j < options.channelCount; j += 1) {\n                inputChannelSplitterNodes[i].connect(inputChannelMergerNode, j, i * options.channelCount + j);\n            }\n        }\n\n        const parameterMap = new ReadOnlyMap(\n            processorConstructor.parameterDescriptors === undefined\n                ? []\n                : processorConstructor.parameterDescriptors.map(({ name }, index) => {\n                      const constantSourceNode = constantSourceNodes[index];\n\n                      constantSourceNode.connect(inputChannelMergerNode, 0, numberOfInputChannels + index);\n                      constantSourceNode.start(0);\n\n                      return <[string, TNativeAudioParam]>[name, constantSourceNode.offset];\n                  })\n        );\n\n        inputChannelMergerNode.connect(scriptProcessorNode);\n\n        let channelInterpretation = options.channelInterpretation;\n        let onprocessorerror: TNativeAudioWorkletNode['onprocessorerror'] = null;\n\n        // Bug #87: Expose at least one output to make this node connectable.\n        const outputAudioNodes = options.numberOfOutputs === 0 ? [scriptProcessorNode] : outputChannelMergerNodes;\n        const nativeAudioWorkletNodeFaker = {\n            get bufferSize(): number {\n                return bufferSize;\n            },\n            get channelCount(): number {\n                return options.channelCount;\n            },\n            set channelCount(_) {\n                // Bug #61: This is not part of the standard but required for the faker to work.\n                throw createInvalidStateError();\n            },\n            get channelCountMode(): TNativeAudioWorkletNode['channelCountMode'] {\n                return options.channelCountMode;\n            },\n            set channelCountMode(_) {\n                // Bug #61: This is not part of the standard but required for the faker to work.\n                throw createInvalidStateError();\n            },\n            get channelInterpretation(): TNativeAudioWorkletNode['channelInterpretation'] {\n                return channelInterpretation;\n            },\n            set channelInterpretation(value) {\n                for (const gainNode of gainNodes) {\n                    gainNode.channelInterpretation = value;\n                }\n\n                channelInterpretation = value;\n            },\n            get context(): TNativeAudioWorkletNode['context'] {\n                return scriptProcessorNode.context;\n            },\n            get inputs(): TNativeAudioNode[] {\n                return gainNodes;\n            },\n            get numberOfInputs(): number {\n                return options.numberOfInputs;\n            },\n            get numberOfOutputs(): number {\n                return options.numberOfOutputs;\n            },\n            get onprocessorerror(): TNativeAudioWorkletNode['onprocessorerror'] {\n                return onprocessorerror;\n            },\n            set onprocessorerror(value) {\n                if (typeof onprocessorerror === 'function') {\n                    nativeAudioWorkletNodeFaker.removeEventListener('processorerror', onprocessorerror);\n                }\n\n                onprocessorerror = typeof value === 'function' ? value : null;\n\n                if (typeof onprocessorerror === 'function') {\n                    nativeAudioWorkletNodeFaker.addEventListener('processorerror', onprocessorerror);\n                }\n            },\n            get parameters(): TNativeAudioWorkletNode['parameters'] {\n                return parameterMap;\n            },\n            get port(): TNativeAudioWorkletNode['port'] {\n                return messageChannel.port2;\n            },\n            addEventListener(...args: any[]): void {\n                return scriptProcessorNode.addEventListener(args[0], args[1], args[2]);\n            },\n            connect: <TNativeAudioNode['connect']>connectMultipleOutputs.bind(null, outputAudioNodes),\n            disconnect: <TNativeAudioNode['disconnect']>disconnectMultipleOutputs.bind(null, outputAudioNodes),\n            dispatchEvent(...args: any[]): boolean {\n                return scriptProcessorNode.dispatchEvent(args[0]);\n            },\n            removeEventListener(...args: any[]): void {\n                return scriptProcessorNode.removeEventListener(args[0], args[1], args[2]);\n            }\n        };\n\n        const patchedEventListeners: Map<EventListenerOrEventListenerObject, NonNullable<MessagePort['onmessage']>> = new Map();\n\n        messageChannel.port1.addEventListener = ((addEventListener) => {\n            return (...args: [string, EventListenerOrEventListenerObject, (boolean | AddEventListenerOptions)?]): void => {\n                if (args[0] === 'message') {\n                    const unpatchedEventListener =\n                        typeof args[1] === 'function'\n                            ? args[1]\n                            : typeof args[1] === 'object' && args[1] !== null && typeof args[1].handleEvent === 'function'\n                            ? args[1].handleEvent\n                            : null;\n\n                    if (unpatchedEventListener !== null) {\n                        const patchedEventListener = patchedEventListeners.get(args[1]);\n\n                        if (patchedEventListener !== undefined) {\n                            args[1] = <EventListenerOrEventListenerObject>patchedEventListener;\n                        } else {\n                            args[1] = (event: Event) => {\n                                exposeCurrentFrameAndCurrentTime(nativeContext.currentTime, nativeContext.sampleRate, () =>\n                                    unpatchedEventListener(event)\n                                );\n                            };\n\n                            patchedEventListeners.set(unpatchedEventListener, args[1]);\n                        }\n                    }\n                }\n\n                return addEventListener.call(messageChannel.port1, args[0], args[1], args[2]);\n            };\n        })(messageChannel.port1.addEventListener);\n\n        messageChannel.port1.removeEventListener = ((removeEventListener) => {\n            return (...args: any[]): void => {\n                if (args[0] === 'message') {\n                    const patchedEventListener = patchedEventListeners.get(args[1]);\n\n                    if (patchedEventListener !== undefined) {\n                        patchedEventListeners.delete(args[1]);\n\n                        args[1] = patchedEventListener;\n                    }\n                }\n\n                return removeEventListener.call(messageChannel.port1, args[0], args[1], args[2]);\n            };\n        })(messageChannel.port1.removeEventListener);\n\n        let onmessage: MessagePort['onmessage'] = null;\n\n        Object.defineProperty(messageChannel.port1, 'onmessage', {\n            get: () => onmessage,\n            set: (value) => {\n                if (typeof onmessage === 'function') {\n                    messageChannel.port1.removeEventListener('message', onmessage);\n                }\n\n                onmessage = typeof value === 'function' ? value : null;\n\n                if (typeof onmessage === 'function') {\n                    messageChannel.port1.addEventListener('message', onmessage);\n                    messageChannel.port1.start();\n                }\n            }\n        });\n\n        processorConstructor.prototype.port = messageChannel.port1;\n\n        let audioWorkletProcessor: null | IAudioWorkletProcessor = null;\n\n        const audioWorkletProcessorPromise = createAudioWorkletProcessor(\n            nativeContext,\n            nativeAudioWorkletNodeFaker,\n            processorConstructor,\n            options\n        );\n\n        audioWorkletProcessorPromise.then((dWrkltPrcssr) => (audioWorkletProcessor = dWrkltPrcssr));\n\n        const inputs = createNestedArrays(options.numberOfInputs, options.channelCount);\n        const outputs = createNestedArrays(options.numberOfOutputs, outputChannelCount);\n        const parameters: { [name: string]: Float32Array } =\n            processorConstructor.parameterDescriptors === undefined\n                ? []\n                : processorConstructor.parameterDescriptors.reduce(\n                      (prmtrs, { name }) => ({ ...prmtrs, [name]: new Float32Array(128) }),\n                      {}\n                  );\n\n        let isActive = true;\n\n        const disconnectOutputsGraph = () => {\n            if (options.numberOfOutputs > 0) {\n                scriptProcessorNode.disconnect(outputChannelSplitterNode);\n            }\n\n            for (let i = 0, outputChannelSplitterNodeOutput = 0; i < options.numberOfOutputs; i += 1) {\n                const outputChannelMergerNode = outputChannelMergerNodes[i];\n\n                for (let j = 0; j < outputChannelCount[i]; j += 1) {\n                    outputChannelSplitterNode.disconnect(outputChannelMergerNode, outputChannelSplitterNodeOutput + j, j);\n                }\n\n                outputChannelSplitterNodeOutput += outputChannelCount[i];\n            }\n        };\n\n        const activeInputIndexes = new Map<number, number>();\n\n        // tslint:disable-next-line:deprecation\n        scriptProcessorNode.onaudioprocess = ({ inputBuffer, outputBuffer }: AudioProcessingEvent) => {\n            if (audioWorkletProcessor !== null) {\n                const activeInputs = getActiveAudioWorkletNodeInputs(nativeAudioWorkletNodeFaker);\n\n                for (let i = 0; i < bufferSize; i += 128) {\n                    for (let j = 0; j < options.numberOfInputs; j += 1) {\n                        for (let k = 0; k < options.channelCount; k += 1) {\n                            copyFromChannel(inputBuffer, inputs[j], k, k, i);\n                        }\n                    }\n\n                    if (processorConstructor.parameterDescriptors !== undefined) {\n                        processorConstructor.parameterDescriptors.forEach(({ name }, index) => {\n                            copyFromChannel(inputBuffer, parameters, name, numberOfInputChannels + index, i);\n                        });\n                    }\n\n                    for (let j = 0; j < options.numberOfInputs; j += 1) {\n                        for (let k = 0; k < outputChannelCount[j]; k += 1) {\n                            // The byteLength will be 0 when the ArrayBuffer was transferred.\n                            if (outputs[j][k].byteLength === 0) {\n                                outputs[j][k] = new Float32Array(128);\n                            }\n                        }\n                    }\n\n                    try {\n                        const potentiallyEmptyInputs = inputs.map((input, index) => {\n                            const activeInput = activeInputs[index];\n\n                            if (activeInput.size > 0) {\n                                activeInputIndexes.set(index, bufferSize / 128);\n\n                                return input;\n                            }\n\n                            const count = activeInputIndexes.get(index);\n\n                            if (count === undefined) {\n                                return [];\n                            }\n\n                            if (input.every((channelData) => channelData.every((sample) => sample === 0))) {\n                                if (count === 1) {\n                                    activeInputIndexes.delete(index);\n                                } else {\n                                    activeInputIndexes.set(index, count - 1);\n                                }\n                            }\n\n                            return input;\n                        });\n\n                        const activeSourceFlag = exposeCurrentFrameAndCurrentTime(\n                            nativeContext.currentTime + i / nativeContext.sampleRate,\n                            nativeContext.sampleRate,\n                            () => (<IAudioWorkletProcessor>audioWorkletProcessor).process(potentiallyEmptyInputs, outputs, parameters)\n                        );\n\n                        isActive = activeSourceFlag;\n\n                        for (let j = 0, outputChannelSplitterNodeOutput = 0; j < options.numberOfOutputs; j += 1) {\n                            for (let k = 0; k < outputChannelCount[j]; k += 1) {\n                                copyToChannel(outputBuffer, outputs[j], k, outputChannelSplitterNodeOutput + k, i);\n                            }\n\n                            outputChannelSplitterNodeOutput += outputChannelCount[j];\n                        }\n                    } catch (error) {\n                        isActive = false;\n\n                        nativeAudioWorkletNodeFaker.dispatchEvent(\n                            new ErrorEvent('processorerror', {\n                                colno: error.colno,\n                                filename: error.filename,\n                                lineno: error.lineno,\n                                message: error.message\n                            })\n                        );\n                    }\n\n                    if (!isActive) {\n                        for (let j = 0; j < options.numberOfInputs; j += 1) {\n                            gainNodes[j].disconnect(inputChannelSplitterNodes[j]);\n\n                            for (let k = 0; k < options.channelCount; k += 1) {\n                                inputChannelSplitterNodes[i].disconnect(inputChannelMergerNode, k, j * options.channelCount + k);\n                            }\n                        }\n\n                        if (processorConstructor.parameterDescriptors !== undefined) {\n                            const length = processorConstructor.parameterDescriptors.length;\n\n                            for (let j = 0; j < length; j += 1) {\n                                const constantSourceNode = constantSourceNodes[j];\n\n                                constantSourceNode.disconnect(inputChannelMergerNode, 0, numberOfInputChannels + j);\n                                constantSourceNode.stop();\n                            }\n                        }\n\n                        inputChannelMergerNode.disconnect(scriptProcessorNode);\n\n                        scriptProcessorNode.onaudioprocess = null; // tslint:disable-line:deprecation\n\n                        if (isConnected) {\n                            disconnectOutputsGraph();\n                        } else {\n                            disconnectFakeGraph();\n                        }\n\n                        break;\n                    }\n                }\n            }\n        };\n\n        let isConnected = false;\n\n        // Bug #87: Only Firefox will fire an AudioProcessingEvent if there is no connected output.\n        const nativeGainNode = createNativeGainNode(nativeContext, {\n            channelCount: 1,\n            channelCountMode: 'explicit',\n            channelInterpretation: 'discrete',\n            gain: 0\n        });\n\n        const connectFakeGraph = () => scriptProcessorNode.connect(nativeGainNode).connect(nativeContext.destination);\n        const disconnectFakeGraph = () => {\n            scriptProcessorNode.disconnect(nativeGainNode);\n            nativeGainNode.disconnect();\n        };\n        const whenConnected = () => {\n            if (isActive) {\n                disconnectFakeGraph();\n\n                if (options.numberOfOutputs > 0) {\n                    scriptProcessorNode.connect(outputChannelSplitterNode);\n                }\n\n                for (let i = 0, outputChannelSplitterNodeOutput = 0; i < options.numberOfOutputs; i += 1) {\n                    const outputChannelMergerNode = outputChannelMergerNodes[i];\n\n                    for (let j = 0; j < outputChannelCount[i]; j += 1) {\n                        outputChannelSplitterNode.connect(outputChannelMergerNode, outputChannelSplitterNodeOutput + j, j);\n                    }\n\n                    outputChannelSplitterNodeOutput += outputChannelCount[i];\n                }\n            }\n\n            isConnected = true;\n        };\n        const whenDisconnected = () => {\n            if (isActive) {\n                connectFakeGraph();\n                disconnectOutputsGraph();\n            }\n\n            isConnected = false;\n        };\n\n        connectFakeGraph();\n\n        return monitorConnections(nativeAudioWorkletNodeFaker, whenConnected, whenDisconnected);\n    };\n};\n","import { NODE_TO_PROCESSOR_MAPS } from '../globals';\nimport { IAudioWorkletNodeOptions, IAudioWorkletProcessor, IAudioWorkletProcessorConstructor } from '../interfaces';\nimport { TNativeAudioWorkletNode, TNativeContext } from '../types';\nimport { createAudioWorkletProcessorPromise } from './create-audio-worklet-processor-promise';\n\nexport const createAudioWorkletProcessor = (\n    nativeContext: TNativeContext,\n    nativeAudioWorkletNode: TNativeAudioWorkletNode,\n    processorConstructor: IAudioWorkletProcessorConstructor,\n    audioWorkletNodeOptions: IAudioWorkletNodeOptions\n): Promise<IAudioWorkletProcessor> => {\n    let nodeToProcessorMap = NODE_TO_PROCESSOR_MAPS.get(nativeContext);\n\n    if (nodeToProcessorMap === undefined) {\n        nodeToProcessorMap = new WeakMap();\n\n        NODE_TO_PROCESSOR_MAPS.set(nativeContext, nodeToProcessorMap);\n    }\n\n    const audioWorkletProcessorPromise = createAudioWorkletProcessorPromise(processorConstructor, audioWorkletNodeOptions);\n\n    nodeToProcessorMap.set(nativeAudioWorkletNode, audioWorkletProcessorPromise);\n\n    return audioWorkletProcessorPromise;\n};\n","import { testClonabilityOfAudioWorkletNodeOptions } from '../helpers/test-clonability-of-audio-worklet-node-options';\nimport { TNativeAudioWorkletNode, TNativeAudioWorkletNodeFactoryFactory, TNativeAudioWorkletNodeOptions } from '../types';\n\nexport const createNativeAudioWorkletNodeFactory: TNativeAudioWorkletNodeFactoryFactory = (\n    createInvalidStateError,\n    createNativeAudioWorkletNodeFaker,\n    createNativeGainNode,\n    createNotSupportedError,\n    monitorConnections\n) => {\n    return (nativeContext, baseLatency, nativeAudioWorkletNodeConstructor, name, processorConstructor, options) => {\n        if (nativeAudioWorkletNodeConstructor !== null) {\n            try {\n                const nativeAudioWorkletNode = new nativeAudioWorkletNodeConstructor(\n                    nativeContext,\n                    name,\n                    <TNativeAudioWorkletNodeOptions>options\n                );\n                const patchedEventListeners: Map<\n                    EventListenerOrEventListenerObject,\n                    NonNullable<TNativeAudioWorkletNode['onprocessorerror']>\n                > = new Map();\n\n                let onprocessorerror: TNativeAudioWorkletNode['onprocessorerror'] = null;\n\n                Object.defineProperties(nativeAudioWorkletNode, {\n                    /*\n                     * Bug #61: Overwriting the property accessors for channelCount and channelCountMode is necessary as long as some\n                     * browsers have no native implementation to achieve a consistent behavior.\n                     */\n                    channelCount: {\n                        get: () => options.channelCount,\n                        set: () => {\n                            throw createInvalidStateError();\n                        }\n                    },\n                    channelCountMode: {\n                        get: () => 'explicit',\n                        set: () => {\n                            throw createInvalidStateError();\n                        }\n                    },\n                    // Bug #156: Chrome and Edge do not yet fire an ErrorEvent.\n                    onprocessorerror: {\n                        get: () => onprocessorerror,\n                        set: (value) => {\n                            if (typeof onprocessorerror === 'function') {\n                                nativeAudioWorkletNode.removeEventListener('processorerror', onprocessorerror);\n                            }\n\n                            onprocessorerror = typeof value === 'function' ? value : null;\n\n                            if (typeof onprocessorerror === 'function') {\n                                nativeAudioWorkletNode.addEventListener('processorerror', onprocessorerror);\n                            }\n                        }\n                    }\n                });\n\n                nativeAudioWorkletNode.addEventListener = ((addEventListener) => {\n                    return (...args: [string, EventListenerOrEventListenerObject, (boolean | AddEventListenerOptions)?]): void => {\n                        if (args[0] === 'processorerror') {\n                            const unpatchedEventListener =\n                                typeof args[1] === 'function'\n                                    ? args[1]\n                                    : typeof args[1] === 'object' && args[1] !== null && typeof args[1].handleEvent === 'function'\n                                    ? args[1].handleEvent\n                                    : null;\n\n                            if (unpatchedEventListener !== null) {\n                                const patchedEventListener = patchedEventListeners.get(args[1]);\n\n                                if (patchedEventListener !== undefined) {\n                                    args[1] = patchedEventListener;\n                                } else {\n                                    args[1] = (event: Event) => {\n                                        // Bug #178: Chrome and Edge do fire an event of type error.\n                                        if (event.type === 'error') {\n                                            Object.defineProperties(event, {\n                                                type: { value: 'processorerror' }\n                                            });\n\n                                            unpatchedEventListener(event);\n                                        } else {\n                                            unpatchedEventListener(new ErrorEvent(args[0], { ...event }));\n                                        }\n                                    };\n\n                                    patchedEventListeners.set(unpatchedEventListener, args[1]);\n                                }\n                            }\n                        }\n\n                        // Bug #178: Chrome and Edge do fire an event of type error.\n                        addEventListener.call(nativeAudioWorkletNode, 'error', args[1], args[2]);\n\n                        return addEventListener.call(nativeAudioWorkletNode, ...args);\n                    };\n                })(nativeAudioWorkletNode.addEventListener);\n\n                nativeAudioWorkletNode.removeEventListener = ((removeEventListener) => {\n                    return (...args: any[]): void => {\n                        if (args[0] === 'processorerror') {\n                            const patchedEventListener = patchedEventListeners.get(args[1]);\n\n                            if (patchedEventListener !== undefined) {\n                                patchedEventListeners.delete(args[1]);\n\n                                args[1] = patchedEventListener;\n                            }\n                        }\n\n                        // Bug #178: Chrome and Edge do fire an event of type error.\n                        removeEventListener.call(nativeAudioWorkletNode, 'error', args[1], args[2]);\n\n                        return removeEventListener.call(nativeAudioWorkletNode, args[0], args[1], args[2]);\n                    };\n                })(nativeAudioWorkletNode.removeEventListener);\n\n                /*\n                 * Bug #86: Chrome and Edge do not invoke the process() function if the corresponding AudioWorkletNode is unconnected but\n                 * has an output.\n                 */\n                if (options.numberOfOutputs !== 0) {\n                    const nativeGainNode = createNativeGainNode(nativeContext, {\n                        channelCount: 1,\n                        channelCountMode: 'explicit',\n                        channelInterpretation: 'discrete',\n                        gain: 0\n                    });\n\n                    nativeAudioWorkletNode.connect(nativeGainNode).connect(nativeContext.destination);\n\n                    const whenConnected = () => nativeGainNode.disconnect();\n                    const whenDisconnected = () => nativeGainNode.connect(nativeContext.destination);\n\n                    // @todo Disconnect the connection when the process() function of the AudioWorkletNode returns false.\n                    return monitorConnections(nativeAudioWorkletNode, whenConnected, whenDisconnected);\n                }\n\n                return nativeAudioWorkletNode;\n            } catch (err) {\n                // Bug #60: Chrome & Edge throw an InvalidStateError instead of a NotSupportedError.\n                if (err.code === 11) {\n                    throw createNotSupportedError();\n                }\n\n                throw err;\n            }\n        }\n\n        // Bug #61: Only Chrome & Edge have an implementation of the AudioWorkletNode yet.\n        if (processorConstructor === undefined) {\n            throw createNotSupportedError();\n        }\n\n        testClonabilityOfAudioWorkletNodeOptions(options);\n\n        return createNativeAudioWorkletNodeFaker(nativeContext, baseLatency, processorConstructor, options);\n    };\n};\n","import { IAudioWorkletNodeOptions } from '../interfaces';\n\nexport const testClonabilityOfAudioWorkletNodeOptions = (audioWorkletNodeOptions: IAudioWorkletNodeOptions): void => {\n    const { port1 } = new MessageChannel();\n\n    try {\n        // This will throw an error if the audioWorkletNodeOptions are not clonable.\n        port1.postMessage(audioWorkletNodeOptions);\n    } finally {\n        port1.close();\n    }\n};\n","import { TGetBackupOfflineAudioContextFactory } from '../types';\n\nexport const createGetBackupOfflineAudioContext: TGetBackupOfflineAudioContextFactory = (backupOfflineAudioContextStore) => {\n    return (nativeContext) => {\n        return backupOfflineAudioContextStore.get(nativeContext);\n    };\n};\n","import { TSetActiveAudioWorkletNodeInputsFactory } from '../types';\n\nexport const createSetActiveAudioWorkletNodeInputs: TSetActiveAudioWorkletNodeInputsFactory = (activeAudioWorkletNodeInputsStore) => {\n    return (nativeAudioWorkletNode, activeInputs) => {\n        activeAudioWorkletNodeInputsStore.set(nativeAudioWorkletNode, activeInputs);\n    };\n};\n","import { TSanitizeAudioWorkletNodeOptionsFunction } from '../types';\n\nexport const sanitizeAudioWorkletNodeOptions: TSanitizeAudioWorkletNodeOptionsFunction = (options) => {\n    return {\n        ...options,\n        outputChannelCount:\n            options.outputChannelCount !== undefined\n                ? options.outputChannelCount\n                : options.numberOfInputs === 1 && options.numberOfOutputs === 1\n                ? /*\n                   * Bug #61: This should be the computedNumberOfChannels, but unfortunately that is almost impossible to fake. That's why\n                   * the channelCountMode is required to be 'explicit' as long as there is not a native implementation in every browser. That\n                   * makes sure the computedNumberOfChannels is equivilant to the channelCount which makes it much easier to compute.\n                   */\n                  [options.channelCount]\n                : Array.from({ length: options.numberOfOutputs }, () => 1)\n    };\n};\n","import { TTestAudioWorkletNodeOptionsClonabilityFunction } from '../types';\n\nexport const testAudioWorkletNodeOptionsClonability: TTestAudioWorkletNodeOptionsClonabilityFunction = (audioWorkletNodeOptions) => {\n    const { port1, port2 } = new MessageChannel();\n\n    try {\n        // This will throw an error if the audioWorkletNodeOptions are not clonable.\n        port1.postMessage(audioWorkletNodeOptions);\n    } finally {\n        port1.close();\n        port2.close();\n    }\n};\n","import { deactivateAudioGraph } from '../helpers/deactivate-audio-graph';\nimport { isValidLatencyHint } from '../helpers/is-valid-latency-hint';\nimport { IAudioContextOptions, IMinimalAudioContext } from '../interfaces';\nimport {\n    TAudioContextState,\n    TMinimalAudioContextConstructorFactory,\n    TNativeAudioContext,\n    TNativeGainNode,\n    TNativeOscillatorNode\n} from '../types';\n\nexport const createMinimalAudioContextConstructor: TMinimalAudioContextConstructorFactory = (\n    createInvalidStateError,\n    createNotSupportedError,\n    createUnknownError,\n    minimalBaseAudioContextConstructor,\n    nativeAudioContextConstructor\n) => {\n    return class MinimalAudioContext extends minimalBaseAudioContextConstructor<IMinimalAudioContext> implements IMinimalAudioContext {\n        private _baseLatency: number;\n\n        private _nativeAudioContext: TNativeAudioContext;\n\n        private _nativeGainNode: null | TNativeGainNode;\n\n        private _nativeOscillatorNode: null | TNativeOscillatorNode;\n\n        private _state: null | 'suspended';\n\n        constructor(options: IAudioContextOptions = {}) {\n            if (nativeAudioContextConstructor === null) {\n                throw new Error('Missing the native AudioContext constructor.');\n            }\n\n            let nativeAudioContext: TNativeAudioContext;\n\n            try {\n                nativeAudioContext = new nativeAudioContextConstructor(options);\n            } catch (err) {\n                // Bug #192 Safari does throw a SyntaxError if the sampleRate is not supported.\n                if (err.code === 12 && err.message === 'sampleRate is not in range') {\n                    throw createNotSupportedError();\n                }\n\n                throw err;\n            }\n\n            // Bug #131 Safari returns null when there are four other AudioContexts running already.\n            if (nativeAudioContext === null) {\n                throw createUnknownError();\n            }\n\n            // Bug #51 Only Chrome and Edge throw an error if the given latencyHint is invalid.\n            if (!isValidLatencyHint(options.latencyHint)) {\n                throw new TypeError(\n                    `The provided value '${options.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`\n                );\n            }\n\n            // Bug #150 Safari does not support setting the sampleRate.\n            if (options.sampleRate !== undefined && nativeAudioContext.sampleRate !== options.sampleRate) {\n                throw createNotSupportedError();\n            }\n\n            super(nativeAudioContext, 2);\n\n            const { latencyHint } = options;\n            const { sampleRate } = nativeAudioContext;\n\n            // @todo The values for 'balanced', 'interactive' and 'playback' are just copied from Chrome's implementation.\n            this._baseLatency =\n                typeof nativeAudioContext.baseLatency === 'number'\n                    ? nativeAudioContext.baseLatency\n                    : latencyHint === 'balanced'\n                    ? 512 / sampleRate\n                    : latencyHint === 'interactive' || latencyHint === undefined\n                    ? 256 / sampleRate\n                    : latencyHint === 'playback'\n                    ? 1024 / sampleRate\n                    : /*\n                       * @todo The min (256) and max (16384) values are taken from the allowed bufferSize values of a\n                       * ScriptProcessorNode.\n                       */\n                      (Math.max(2, Math.min(128, Math.round((latencyHint * sampleRate) / 128))) * 128) / sampleRate;\n            this._nativeAudioContext = nativeAudioContext;\n\n            // Bug #188: Safari will set the context's state to 'interrupted' in case the user switches tabs.\n            if (nativeAudioContextConstructor.name === 'webkitAudioContext') {\n                this._nativeGainNode = nativeAudioContext.createGain();\n                this._nativeOscillatorNode = nativeAudioContext.createOscillator();\n\n                this._nativeGainNode.gain.value = 1e-37;\n\n                this._nativeOscillatorNode.connect(this._nativeGainNode).connect(nativeAudioContext.destination);\n                this._nativeOscillatorNode.start();\n            } else {\n                this._nativeGainNode = null;\n                this._nativeOscillatorNode = null;\n            }\n\n            this._state = null;\n\n            /*\n             * Bug #34: Chrome and Edge pretend to be running right away, but fire an onstatechange event when the state actually changes\n             * to 'running'.\n             */\n            if (nativeAudioContext.state === 'running') {\n                this._state = 'suspended';\n\n                const revokeState = () => {\n                    if (this._state === 'suspended') {\n                        this._state = null;\n                    }\n\n                    nativeAudioContext.removeEventListener('statechange', revokeState);\n                };\n\n                nativeAudioContext.addEventListener('statechange', revokeState);\n            }\n        }\n\n        get baseLatency(): number {\n            return this._baseLatency;\n        }\n\n        get state(): TAudioContextState {\n            return this._state !== null ? this._state : this._nativeAudioContext.state;\n        }\n\n        public close(): Promise<void> {\n            // Bug #35: Firefox does not throw an error if the AudioContext was closed before.\n            if (this.state === 'closed') {\n                return this._nativeAudioContext.close().then(() => {\n                    throw createInvalidStateError();\n                });\n            }\n\n            // Bug #34: If the state was set to suspended before it should be revoked now.\n            if (this._state === 'suspended') {\n                this._state = null;\n            }\n\n            return this._nativeAudioContext.close().then(() => {\n                if (this._nativeGainNode !== null && this._nativeOscillatorNode !== null) {\n                    this._nativeOscillatorNode.stop();\n\n                    this._nativeGainNode.disconnect();\n                    this._nativeOscillatorNode.disconnect();\n                }\n\n                deactivateAudioGraph(this);\n            });\n        }\n\n        public resume(): Promise<void> {\n            if (this._state === 'suspended') {\n                return new Promise((resolve, reject) => {\n                    const resolvePromise = () => {\n                        this._nativeAudioContext.removeEventListener('statechange', resolvePromise);\n\n                        if (this._nativeAudioContext.state === 'running') {\n                            resolve();\n                        } else {\n                            this.resume().then(resolve, reject);\n                        }\n                    };\n\n                    this._nativeAudioContext.addEventListener('statechange', resolvePromise);\n                });\n            }\n\n            return this._nativeAudioContext.resume().catch((err) => {\n                // Bug #55: Chrome and Edge do throw an InvalidAccessError instead of an InvalidStateError.\n                // Bug #56: Safari invokes the catch handler but without an error.\n                if (err === undefined || err.code === 15) {\n                    throw createInvalidStateError();\n                }\n\n                throw err;\n            });\n        }\n\n        public suspend(): Promise<void> {\n            return this._nativeAudioContext.suspend().catch((err) => {\n                // Bug #56: Safari invokes the catch handler but without an error.\n                if (err === undefined) {\n                    throw createInvalidStateError();\n                }\n\n                throw err;\n            });\n        }\n    };\n};\n","import { TCreateNativeOfflineAudioContextFactory } from '../types';\n\nexport const createCreateNativeOfflineAudioContext: TCreateNativeOfflineAudioContextFactory = (\n    createNotSupportedError,\n    nativeOfflineAudioContextConstructor\n) => {\n    return (numberOfChannels, length, sampleRate) => {\n        if (nativeOfflineAudioContextConstructor === null) {\n            throw new Error('Missing the native OfflineAudioContext constructor.');\n        }\n\n        try {\n            return new nativeOfflineAudioContextConstructor(numberOfChannels, length, sampleRate);\n        } catch (err) {\n            // Bug #143, #144 & #146: Safari throws a SyntaxError when numberOfChannels, length or sampleRate are invalid.\n            if (err.name === 'SyntaxError') {\n                throw createNotSupportedError();\n            }\n\n            throw err;\n        }\n    };\n};\n","import { wrapAudioBufferGetChannelDataMethod } from '../helpers/wrap-audio-buffer-get-channel-data-method';\nimport { TStartRenderingFactory } from '../types';\n\nexport const createStartRendering: TStartRenderingFactory = (\n    audioBufferStore,\n    cacheTestResult,\n    getAudioNodeRenderer,\n    getUnrenderedAudioWorkletNodes,\n    renderNativeOfflineAudioContext,\n    testAudioBufferCopyChannelMethodsOutOfBoundsSupport,\n    wrapAudioBufferCopyChannelMethods,\n    wrapAudioBufferCopyChannelMethodsOutOfBounds\n) => {\n    return (destination, nativeOfflineAudioContext) =>\n        getAudioNodeRenderer(destination)\n            .render(destination, nativeOfflineAudioContext)\n            /*\n             * Bug #86 & #87: Invoking the renderer of an AudioWorkletNode might be necessary if it has no direct or indirect connection to the\n             * destination.\n             */\n            .then(() =>\n                Promise.all(\n                    Array.from(getUnrenderedAudioWorkletNodes(nativeOfflineAudioContext)).map((audioWorkletNode) =>\n                        getAudioNodeRenderer(audioWorkletNode).render(audioWorkletNode, nativeOfflineAudioContext)\n                    )\n                )\n            )\n            .then(() => renderNativeOfflineAudioContext(nativeOfflineAudioContext))\n            .then((audioBuffer) => {\n                // Bug #5: Safari does not support copyFromChannel() and copyToChannel().\n                // Bug #100: Safari does throw a wrong error when calling getChannelData() with an out-of-bounds value.\n                if (typeof audioBuffer.copyFromChannel !== 'function') {\n                    wrapAudioBufferCopyChannelMethods(audioBuffer);\n                    wrapAudioBufferGetChannelDataMethod(audioBuffer);\n                    // Bug #157: Firefox does not allow the bufferOffset to be out-of-bounds.\n                } else if (\n                    !cacheTestResult(testAudioBufferCopyChannelMethodsOutOfBoundsSupport, () =>\n                        testAudioBufferCopyChannelMethodsOutOfBoundsSupport(audioBuffer)\n                    )\n                ) {\n                    wrapAudioBufferCopyChannelMethodsOutOfBounds(audioBuffer);\n                }\n\n                audioBufferStore.add(audioBuffer);\n\n                return audioBuffer;\n            });\n};\n","import { encode, instantiate } from 'media-encoder-host';\nimport { addRecorderAudioWorkletModule, createRecorderAudioWorkletNode } from 'recorder-audio-worklet';\nimport {\n    AudioBuffer,\n    AudioBufferSourceNode,\n    AudioWorkletNode,\n    ConstantSourceNode,\n    IAudioBuffer,\n    IMinimalAudioContext,\n    MediaStreamAudioSourceNode,\n    MinimalAudioContext,\n    addAudioWorkletModule\n} from 'standardized-audio-context';\nimport { IAudioNodesAndEncoderId } from '../interfaces';\nimport { TRecordingState, TWebAudioMediaRecorderFactoryFactory } from '../types';\n\nconst ERROR_MESSAGE = 'Missing AudioWorklet support. Maybe this is not running in a secure context.';\n\n// @todo This should live in a separate file.\nconst createPromisedAudioNodesEncoderIdAndPort = async (\n    audioBuffer: IAudioBuffer,\n    audioContext: IMinimalAudioContext,\n    channelCount: number,\n    mediaStream: MediaStream,\n    mimeType: string\n) => {\n    const { encoderId, port } = await instantiate(mimeType, audioContext.sampleRate);\n\n    if (AudioWorkletNode === undefined) {\n        throw new Error(ERROR_MESSAGE);\n    }\n\n    const audioBufferSourceNode = new AudioBufferSourceNode(audioContext, { buffer: audioBuffer });\n    const mediaStreamAudioSourceNode = new MediaStreamAudioSourceNode(audioContext, { mediaStream });\n    const recorderAudioWorkletNode = createRecorderAudioWorkletNode(AudioWorkletNode, audioContext, { channelCount });\n\n    return { audioBufferSourceNode, encoderId, mediaStreamAudioSourceNode, port, recorderAudioWorkletNode };\n};\n\nexport const createWebAudioMediaRecorderFactory: TWebAudioMediaRecorderFactoryFactory = (\n    createBlobEvent,\n    createInvalidModificationError,\n    createInvalidStateError,\n    createNotSupportedError\n) => {\n    return (eventTarget, mediaStream, mimeType) => {\n        const sampleRate = mediaStream.getAudioTracks()[0]?.getSettings().sampleRate;\n        const audioContext = new MinimalAudioContext({ latencyHint: 'playback', sampleRate });\n        const length = Math.max(1024, Math.ceil(audioContext.baseLatency * audioContext.sampleRate));\n        const audioBuffer = new AudioBuffer({ length, sampleRate: audioContext.sampleRate });\n        const bufferedArrayBuffers: ArrayBuffer[] = [];\n        const promisedAudioWorkletModule = addRecorderAudioWorkletModule((url: string) => {\n            if (addAudioWorkletModule === undefined) {\n                throw new Error(ERROR_MESSAGE);\n            }\n\n            return addAudioWorkletModule(audioContext, url);\n        });\n\n        let abortRecording: null | (() => void) = null;\n        let intervalId: null | number = null;\n        let promisedAudioNodesAndEncoderId: null | Promise<IAudioNodesAndEncoderId> = null;\n        let promisedPartialRecording: null | Promise<void> = null;\n        let isAudioContextRunning = true;\n\n        const dispatchDataAvailableEvent = (arrayBuffers: ArrayBuffer[]): void => {\n            eventTarget.dispatchEvent(createBlobEvent('dataavailable', { data: new Blob(arrayBuffers, { type: mimeType }) }));\n        };\n\n        const requestNextPartialRecording = async (encoderId: number, timeslice: number): Promise<void> => {\n            const arrayBuffers = await encode(encoderId, timeslice);\n\n            if (promisedAudioNodesAndEncoderId === null) {\n                bufferedArrayBuffers.push(...arrayBuffers);\n            } else {\n                dispatchDataAvailableEvent(arrayBuffers);\n\n                promisedPartialRecording = requestNextPartialRecording(encoderId, timeslice);\n            }\n        };\n\n        const resume = (): Promise<void> => {\n            isAudioContextRunning = true;\n\n            return audioContext.resume();\n        };\n\n        const stop = (): void => {\n            if (promisedAudioNodesAndEncoderId === null) {\n                return;\n            }\n\n            if (abortRecording !== null) {\n                mediaStream.removeEventListener('addtrack', abortRecording);\n                mediaStream.removeEventListener('removetrack', abortRecording);\n            }\n\n            if (intervalId !== null) {\n                clearTimeout(intervalId);\n            }\n\n            promisedAudioNodesAndEncoderId.then(\n                async ({ constantSourceNode, encoderId, mediaStreamAudioSourceNode, recorderAudioWorkletNode }) => {\n                    if (promisedPartialRecording !== null) {\n                        promisedPartialRecording.catch(() => {\n                            /* @todo Only catch the errors caused by a duplicate call to encode. */\n                        });\n                        promisedPartialRecording = null;\n                    }\n\n                    await recorderAudioWorkletNode.stop();\n\n                    mediaStreamAudioSourceNode.disconnect(recorderAudioWorkletNode);\n                    constantSourceNode.stop();\n\n                    const arrayBuffers = await encode(encoderId, null);\n\n                    if (promisedAudioNodesAndEncoderId === null) {\n                        await suspend();\n                    }\n\n                    dispatchDataAvailableEvent([...bufferedArrayBuffers, ...arrayBuffers]);\n\n                    bufferedArrayBuffers.length = 0;\n\n                    eventTarget.dispatchEvent(new Event('stop'));\n                }\n            );\n\n            promisedAudioNodesAndEncoderId = null;\n        };\n\n        const suspend = (): Promise<void> => {\n            isAudioContextRunning = false;\n\n            return audioContext.suspend();\n        };\n\n        suspend();\n\n        return {\n            get mimeType(): string {\n                return mimeType;\n            },\n\n            get state(): TRecordingState {\n                return promisedAudioNodesAndEncoderId === null ? 'inactive' : isAudioContextRunning ? 'recording' : 'paused';\n            },\n\n            pause(): void {\n                if (promisedAudioNodesAndEncoderId === null) {\n                    throw createInvalidStateError();\n                }\n\n                if (isAudioContextRunning) {\n                    suspend();\n                    eventTarget.dispatchEvent(new Event('pause'));\n                }\n            },\n\n            resume(): void {\n                if (promisedAudioNodesAndEncoderId === null) {\n                    throw createInvalidStateError();\n                }\n\n                if (!isAudioContextRunning) {\n                    resume();\n                    eventTarget.dispatchEvent(new Event('resume'));\n                }\n            },\n\n            start(timeslice?: number): void {\n                if (promisedAudioNodesAndEncoderId !== null) {\n                    throw createInvalidStateError();\n                }\n\n                if (mediaStream.getVideoTracks().length > 0) {\n                    throw createNotSupportedError();\n                }\n\n                eventTarget.dispatchEvent(new Event('start'));\n\n                const audioTracks = mediaStream.getAudioTracks();\n                // @todo TypeScript v4.4.2 removed the channelCount property from the MediaTrackSettings interface.\n                const channelCount =\n                    audioTracks.length === 0\n                        ? 2\n                        : (<MediaTrackSettings & { channelCount?: number }>audioTracks[0].getSettings()).channelCount ?? 2;\n\n                promisedAudioNodesAndEncoderId = Promise.all([\n                    resume(),\n                    promisedAudioWorkletModule.then(() =>\n                        createPromisedAudioNodesEncoderIdAndPort(audioBuffer, audioContext, channelCount, mediaStream, mimeType)\n                    )\n                ]).then(async ([, { audioBufferSourceNode, encoderId, mediaStreamAudioSourceNode, port, recorderAudioWorkletNode }]) => {\n                    mediaStreamAudioSourceNode.connect(recorderAudioWorkletNode);\n\n                    await new Promise((resolve) => {\n                        audioBufferSourceNode.onended = resolve;\n                        audioBufferSourceNode.connect(recorderAudioWorkletNode);\n                        audioBufferSourceNode.start(audioContext.currentTime + length / audioContext.sampleRate);\n                    });\n\n                    audioBufferSourceNode.disconnect(recorderAudioWorkletNode);\n\n                    // Bug #17: Safari does throttle the processing on hidden tabs if there is no active audio output.\n                    const constantSourceNode = new ConstantSourceNode(audioContext, { offset: 0 });\n\n                    constantSourceNode.onended = () => constantSourceNode.disconnect();\n                    constantSourceNode.connect(audioContext.destination);\n                    constantSourceNode.start();\n\n                    await recorderAudioWorkletNode.record(port);\n\n                    if (timeslice !== undefined) {\n                        promisedPartialRecording = requestNextPartialRecording(encoderId, timeslice);\n                    }\n\n                    return { constantSourceNode, encoderId, mediaStreamAudioSourceNode, recorderAudioWorkletNode };\n                });\n\n                const tracks = mediaStream.getTracks();\n\n                abortRecording = () => {\n                    stop();\n                    eventTarget.dispatchEvent(new ErrorEvent('error', { error: createInvalidModificationError() }));\n                };\n\n                mediaStream.addEventListener('addtrack', abortRecording);\n                mediaStream.addEventListener('removetrack', abortRecording);\n\n                intervalId = setInterval(() => {\n                    const currentTracks = mediaStream.getTracks();\n\n                    if (\n                        (currentTracks.length !== tracks.length || currentTracks.some((track, index) => track !== tracks[index])) &&\n                        abortRecording !== null\n                    ) {\n                        abortRecording();\n                    }\n                }, 1000);\n            },\n\n            stop\n        };\n    };\n};\n","import { IAudioContext, IMinimalAudioContext } from '../interfaces';\nimport { TIsAnyAudioContextFactory, TNativeAudioContext } from '../types';\n\nexport const createIsAnyAudioContext: TIsAnyAudioContextFactory = (contextStore, isNativeAudioContext) => {\n    return (anything): anything is IAudioContext | IMinimalAudioContext | TNativeAudioContext => {\n        const nativeContext = contextStore.get(<any>anything);\n\n        return isNativeAudioContext(nativeContext) || isNativeAudioContext(anything);\n    };\n};\n","import { IAudioNode } from '../interfaces';\nimport { TIsAnyAudioNodeFactory, TNativeAudioNode } from '../types';\n\nexport const createIsAnyAudioNode: TIsAnyAudioNodeFactory = (audioNodeStore, isNativeAudioNode) => {\n    return (anything): anything is IAudioNode<any> | TNativeAudioNode => audioNodeStore.has(<any>anything) || isNativeAudioNode(anything);\n};\n","import { IAudioParam } from '../interfaces';\nimport { TIsAnyAudioParamFactory, TNativeAudioParam } from '../types';\n\nexport const createIsAnyAudioParam: TIsAnyAudioParamFactory = (audioParamStore, isNativeAudioParam) => {\n    return (anything): anything is IAudioParam | TNativeAudioParam => audioParamStore.has(<any>anything) || isNativeAudioParam(anything);\n};\n","import { IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\nimport { TIsAnyOfflineAudioContextFactory, TNativeOfflineAudioContext } from '../types';\n\nexport const createIsAnyOfflineAudioContext: TIsAnyOfflineAudioContextFactory = (contextStore, isNativeOfflineAudioContext) => {\n    return (anything): anything is IMinimalOfflineAudioContext | IOfflineAudioContext | TNativeOfflineAudioContext => {\n        const nativeContext = contextStore.get(<any>anything);\n\n        return isNativeOfflineAudioContext(nativeContext) || isNativeOfflineAudioContext(anything);\n    };\n};\n","import { encode, instantiate } from 'media-encoder-host';\nimport { MultiBufferDataView } from 'multi-buffer-data-view';\nimport { on } from 'subscribable-things';\nimport { TPromisedDataViewElementTypeEncoderIdAndPort, TRecordingState, TWebmPcmMediaRecorderFactoryFactory } from '../types';\n\nexport const createWebmPcmMediaRecorderFactory: TWebmPcmMediaRecorderFactoryFactory = (\n    createBlobEvent,\n    createInvalidModificationError,\n    createNotSupportedError,\n    decodeWebMChunk,\n    readVariableSizeInteger\n) => {\n    return (eventTarget, nativeMediaRecorderConstructor, mediaStream, mimeType) => {\n        const audioTracks = mediaStream.getAudioTracks();\n        const bufferedArrayBuffers: ArrayBuffer[] = [];\n        // @todo TypeScript v4.4.2 removed the channelCount property from the MediaTrackSettings interface.\n        const channelCount =\n            audioTracks.length === 0\n                ? undefined\n                : (<MediaTrackSettings & { channelCount?: number }>audioTracks[0].getSettings()).channelCount;\n        const nativeMediaRecorder = new nativeMediaRecorderConstructor(mediaStream, { mimeType: 'audio/webm;codecs=pcm' });\n        const sampleRate = audioTracks.length === 0 ? undefined : audioTracks[0].getSettings().sampleRate;\n\n        let promisedPartialRecording: null | Promise<void> = null;\n        let stopRecording = () => {}; // tslint:disable-line:no-empty\n\n        const dispatchDataAvailableEvent = (arrayBuffers: ArrayBuffer[]): void => {\n            eventTarget.dispatchEvent(createBlobEvent('dataavailable', { data: new Blob(arrayBuffers, { type: mimeType }) }));\n        };\n\n        const requestNextPartialRecording = async (encoderId: number, timeslice: number): Promise<void> => {\n            const arrayBuffers = await encode(encoderId, timeslice);\n\n            if (nativeMediaRecorder.state === 'inactive') {\n                bufferedArrayBuffers.push(...arrayBuffers);\n            } else {\n                dispatchDataAvailableEvent(arrayBuffers);\n\n                promisedPartialRecording = requestNextPartialRecording(encoderId, timeslice);\n            }\n        };\n\n        const stop = (): void => {\n            if (nativeMediaRecorder.state === 'inactive') {\n                return;\n            }\n\n            if (promisedPartialRecording !== null) {\n                promisedPartialRecording.catch(() => {\n                    /* @todo Only catch the errors caused by a duplicate call to encode. */\n                });\n                promisedPartialRecording = null;\n            }\n\n            stopRecording();\n            stopRecording = () => {}; // tslint:disable-line:no-empty\n\n            nativeMediaRecorder.stop();\n        };\n\n        nativeMediaRecorder.addEventListener('error', () => {\n            stop();\n            // Bug #3 & #4: Chrome throws an error event without any error.\n            eventTarget.dispatchEvent(new ErrorEvent('error', { error: createInvalidModificationError() }));\n        });\n        nativeMediaRecorder.addEventListener('start', () => eventTarget.dispatchEvent(new Event('start')));\n\n        return {\n            get mimeType(): string {\n                return mimeType;\n            },\n\n            get state(): TRecordingState {\n                return nativeMediaRecorder.state;\n            },\n\n            pause(): void {\n                return nativeMediaRecorder.pause();\n            },\n\n            resume(): void {\n                return nativeMediaRecorder.resume();\n            },\n\n            start(timeslice?: number): void {\n                /*\n                 * Bug #6: Chrome will emit a blob without any data when asked to encode a MediaStream with a video track into an audio\n                 * codec.\n                 */\n                if (mediaStream.getVideoTracks().length > 0) {\n                    throw createNotSupportedError();\n                }\n\n                if (nativeMediaRecorder.state === 'inactive') {\n                    if (sampleRate === undefined) {\n                        throw new Error('The sampleRate is not defined.');\n                    }\n\n                    let isRecording = false;\n                    let isStopped = false;\n                    // Bug #9: Chrome sometimes fires more than one dataavailable event while being inactive.\n                    let pendingInvocations = 0;\n                    let promisedDataViewElementTypeEncoderIdAndPort: TPromisedDataViewElementTypeEncoderIdAndPort = instantiate(\n                        mimeType,\n                        sampleRate\n                    );\n\n                    stopRecording = () => {\n                        isStopped = true;\n                    };\n\n                    const removeEventListener = on(\n                        nativeMediaRecorder,\n                        'dataavailable'\n                    )(({ data }) => {\n                        pendingInvocations += 1;\n\n                        promisedDataViewElementTypeEncoderIdAndPort = promisedDataViewElementTypeEncoderIdAndPort.then(\n                            async ({ dataView = null, elementType = null, encoderId, port }) => {\n                                const arrayBuffer = await data.arrayBuffer();\n\n                                pendingInvocations -= 1;\n\n                                const currentDataView =\n                                    dataView === null\n                                        ? new MultiBufferDataView([arrayBuffer])\n                                        : new MultiBufferDataView([...dataView.buffers, arrayBuffer], dataView.byteOffset);\n\n                                if (!isRecording && nativeMediaRecorder.state === 'recording' && !isStopped) {\n                                    const lengthAndValue = readVariableSizeInteger(currentDataView, 0);\n\n                                    if (lengthAndValue === null) {\n                                        return { dataView: currentDataView, elementType, encoderId, port };\n                                    }\n\n                                    const { value } = lengthAndValue;\n\n                                    if (value !== 172351395) {\n                                        return { dataView, elementType, encoderId, port };\n                                    }\n\n                                    isRecording = true;\n                                }\n\n                                const { currentElementType, offset, contents } = decodeWebMChunk(\n                                    currentDataView,\n                                    elementType,\n                                    channelCount\n                                );\n                                const remainingDataView =\n                                    offset < currentDataView.byteLength\n                                        ? new MultiBufferDataView(currentDataView.buffers, currentDataView.byteOffset + offset)\n                                        : null;\n\n                                contents.forEach((content) =>\n                                    port.postMessage(\n                                        content,\n                                        content.map(({ buffer }) => buffer)\n                                    )\n                                );\n\n                                if (pendingInvocations === 0 && (nativeMediaRecorder.state === 'inactive' || isStopped)) {\n                                    encode(encoderId, null).then((arrayBuffers) => {\n                                        dispatchDataAvailableEvent([...bufferedArrayBuffers, ...arrayBuffers]);\n\n                                        bufferedArrayBuffers.length = 0;\n\n                                        eventTarget.dispatchEvent(new Event('stop'));\n                                    });\n\n                                    port.postMessage([]);\n                                    port.close();\n\n                                    removeEventListener();\n                                }\n\n                                return { dataView: remainingDataView, elementType: currentElementType, encoderId, port };\n                            }\n                        );\n                    });\n\n                    if (timeslice !== undefined) {\n                        promisedDataViewElementTypeEncoderIdAndPort.then(\n                            ({ encoderId }) => (promisedPartialRecording = requestNextPartialRecording(encoderId, timeslice))\n                        );\n                    }\n                }\n\n                nativeMediaRecorder.start(100);\n            },\n\n            stop\n        };\n    };\n};\n","import { TReadVariableSizeIntegerLengthFunction } from '../types';\n\nexport const readVariableSizeIntegerLength: TReadVariableSizeIntegerLengthFunction = (dataView, offset) => {\n    if (offset >= dataView.byteLength) {\n        return null;\n    }\n\n    const byte = dataView.getUint8(offset);\n\n    if (byte > 127) {\n        return 1;\n    }\n\n    if (byte > 63) {\n        return 2;\n    }\n\n    if (byte > 31) {\n        return 3;\n    }\n\n    if (byte > 15) {\n        return 4;\n    }\n\n    if (byte > 7) {\n        return 5;\n    }\n\n    if (byte > 3) {\n        return 6;\n    }\n\n    if (byte > 1) {\n        return 7;\n    }\n\n    if (byte > 0) {\n        return 8;\n    }\n\n    const length = readVariableSizeIntegerLength(dataView, offset + 1);\n\n    return length === null ? null : length + 8;\n};\n","import { register as rgstr } from 'media-encoder-host';\nimport { createBlobEventFactory } from './factories/blob-event-factory';\nimport { createDecodeWebMChunk } from './factories/decode-web-m-chunk';\nimport { createEventTargetConstructor } from './factories/event-target-constructor';\nimport { createEventTargetFactory } from './factories/event-target-factory';\nimport { createInvalidModificationError } from './factories/invalid-modification-error';\nimport { createInvalidStateError } from './factories/invalid-state-error';\nimport { createIsSupportedPromise } from './factories/is-supported-promise';\nimport { createMediaRecorderConstructor } from './factories/media-recorder-constructor';\nimport { createNativeBlobEventConstructor } from './factories/native-blob-event-constructor';\nimport { createNativeMediaRecorderFactory } from './factories/native-media-recorder';\nimport { createNativeMediaRecorderConstructor } from './factories/native-media-recorder-constructor';\nimport { createNotSupportedError } from './factories/not-supported-error';\nimport { createReadElementContent } from './factories/read-element-content';\nimport { createReadElementType } from './factories/read-element-type';\nimport { createReadVariableSizeInteger } from './factories/read-variable-size-integer';\nimport { createWebAudioMediaRecorderFactory } from './factories/web-audio-media-recorder';\nimport { createWebmPcmMediaRecorderFactory } from './factories/webm-pcm-media-recorder';\nimport { createWindow } from './factories/window';\nimport { readVariableSizeIntegerLength } from './functions/read-variable-size-integer-length';\nimport { wrapEventListener } from './functions/wrap-event-listener';\nimport { IMediaRecorderConstructor } from './interfaces';\n\n/*\n * @todo Explicitly referencing the barrel file seems to be necessary when enabling the\n * isolatedModules compiler option.\n */\nexport * from './interfaces/index';\nexport * from './types/index';\n\nconst encoderRegexes: RegExp[] = [];\n\nconst window = createWindow();\nconst nativeBlobEventConstructor = createNativeBlobEventConstructor(window);\nconst createBlobEvent = createBlobEventFactory(nativeBlobEventConstructor);\nconst createWebAudioMediaRecorder = createWebAudioMediaRecorderFactory(\n    createBlobEvent,\n    createInvalidModificationError,\n    createInvalidStateError,\n    createNotSupportedError\n);\nconst readVariableSizeInteger = createReadVariableSizeInteger(readVariableSizeIntegerLength);\nconst readElementContent = createReadElementContent(readVariableSizeInteger);\nconst readElementType = createReadElementType(readVariableSizeInteger);\nconst decodeWebMChunk = createDecodeWebMChunk(readElementContent, readElementType);\nconst createWebmPcmMediaRecorder = createWebmPcmMediaRecorderFactory(\n    createBlobEvent,\n    createInvalidModificationError,\n    createNotSupportedError,\n    decodeWebMChunk,\n    readVariableSizeInteger\n);\nconst createEventTarget = createEventTargetFactory(window);\nconst nativeMediaRecorderConstructor = createNativeMediaRecorderConstructor(window);\n\nconst createNativeMediaRecorder = createNativeMediaRecorderFactory(createInvalidModificationError, createNotSupportedError);\nconst mediaRecorderConstructor: IMediaRecorderConstructor = createMediaRecorderConstructor(\n    createNativeMediaRecorder,\n    createNotSupportedError,\n    createWebAudioMediaRecorder,\n    createWebmPcmMediaRecorder,\n    encoderRegexes,\n    createEventTargetConstructor(createEventTarget, wrapEventListener),\n    nativeMediaRecorderConstructor\n);\n\nexport { mediaRecorderConstructor as MediaRecorder };\n\nexport const isSupported = () => createIsSupportedPromise(window);\n\nexport const register = async (port: MessagePort): Promise<void> => {\n    encoderRegexes.push(await rgstr(port));\n};\n","import { TWindow, TWindowFactory } from '../types';\n\nexport const createWindow: TWindowFactory = () => (typeof window === 'undefined' ? null : <TWindow>window);\n","import { TNativeBlobEventConstructorFactory } from '../types';\n\nexport const createNativeBlobEventConstructor: TNativeBlobEventConstructorFactory = (window) => {\n    if (window !== null && window.BlobEvent !== undefined) {\n        return window.BlobEvent;\n    }\n\n    return null;\n};\n","import { TInvalidStateErrorFactory } from '../types';\n\nexport const createInvalidStateError: TInvalidStateErrorFactory = () => {\n    try {\n        return new DOMException('', 'InvalidStateError');\n    } catch (err) {\n        // Bug #122: Edge is the only browser that does not yet allow to construct a DOMException.\n        err.code = 11;\n        err.name = 'InvalidStateError';\n\n        return err;\n    }\n};\n","import { TReadVariableSizeIntegerFactory } from '../types';\n\nexport const createReadVariableSizeInteger: TReadVariableSizeIntegerFactory = (readVariableSizeIntegerLength) => {\n    return (dataView, offset) => {\n        const length = readVariableSizeIntegerLength(dataView, offset);\n\n        if (length === null) {\n            return length;\n        }\n\n        const firstDataByteOffset = offset + Math.floor((length - 1) / 8);\n\n        if (firstDataByteOffset + length > dataView.byteLength) {\n            return null;\n        }\n\n        const firstDataByte = dataView.getUint8(firstDataByteOffset);\n\n        let value = firstDataByte & ((1 << (8 - (length % 8))) - 1); // tslint:disable-line:no-bitwise\n\n        for (let i = 1; i < length; i += 1) {\n            value = (value << 8) + dataView.getUint8(firstDataByteOffset + i); // tslint:disable-line:no-bitwise\n        }\n\n        return { length, value };\n    };\n};\n","import { TReadElementContentFactory } from '../types';\n\nexport const createReadElementContent: TReadElementContentFactory = (readVariableSizeInteger) => {\n    return (dataView, offset, type, channelCount = 2) => {\n        const lengthAndValue = readVariableSizeInteger(dataView, offset);\n\n        if (lengthAndValue === null) {\n            return lengthAndValue;\n        }\n\n        const { length, value } = lengthAndValue;\n\n        if (type === 'master') {\n            return { content: null, length };\n        }\n\n        if (offset + length + value > dataView.byteLength) {\n            return null;\n        }\n\n        if (type === 'binary') {\n            const numberOfSamples = (value / Float32Array.BYTES_PER_ELEMENT - 1) / channelCount;\n            const content = Array.from({ length: channelCount }, () => new Float32Array(numberOfSamples));\n\n            for (let i = 0; i < numberOfSamples; i += 1) {\n                const elementOffset = i * channelCount + 1;\n\n                for (let j = 0; j < channelCount; j += 1) {\n                    content[j][i] = dataView.getFloat32(offset + length + (elementOffset + j) * Float32Array.BYTES_PER_ELEMENT, true);\n                }\n            }\n\n            return { content, length: length + value };\n        }\n\n        return { content: null, length: length + value };\n    };\n};\n","import { TReadElementTypeFactory } from '../types';\n\nexport const createReadElementType: TReadElementTypeFactory = (readVariableSizeInteger) => {\n    return (dataView, offset) => {\n        const lengthAndValue = readVariableSizeInteger(dataView, offset);\n\n        if (lengthAndValue === null) {\n            return lengthAndValue;\n        }\n\n        const { length, value } = lengthAndValue;\n\n        if (value === 35) {\n            return { length, type: 'binary' };\n        }\n\n        if (\n            value === 46 ||\n            value === 97 ||\n            value === 88713574 ||\n            value === 106212971 ||\n            value === 139690087 ||\n            value === 172351395 ||\n            value === 256095861\n        ) {\n            return { length, type: 'master' };\n        }\n\n        return { length, type: 'unknown' };\n    };\n};\n","import { TDecodeWebMChunkFactory } from '../types';\n\nexport const createDecodeWebMChunk: TDecodeWebMChunkFactory = (readElementContent, readElementType) => {\n    return (dataView, elementType, channelCount) => {\n        const contents: (readonly Float32Array[])[] = [];\n\n        let currentElementType = elementType;\n        let offset = 0;\n\n        while (offset < dataView.byteLength) {\n            if (currentElementType === null) {\n                const lengthAndType = readElementType(dataView, offset);\n\n                if (lengthAndType === null) {\n                    break;\n                }\n\n                const { length, type } = lengthAndType;\n\n                currentElementType = type;\n                offset += length;\n            } else {\n                const contentAndLength = readElementContent(dataView, offset, currentElementType, channelCount);\n\n                if (contentAndLength === null) {\n                    break;\n                }\n\n                const { content, length } = contentAndLength;\n\n                currentElementType = null;\n                offset += length;\n\n                if (content !== null) {\n                    contents.push(content);\n                }\n            }\n        }\n\n        return { contents, currentElementType, offset };\n    };\n};\n","import { TEventTargetFactoryFactory } from '../types';\n\nexport const createEventTargetFactory: TEventTargetFactoryFactory = (window) => {\n    return () => {\n        if (window === null) {\n            throw new Error('A native EventTarget could not be created.');\n        }\n\n        return window.document.createElement('p');\n    };\n};\n","import { TNativeMediaRecorderConstructorFactory } from '../types';\n\nexport const createNativeMediaRecorderConstructor: TNativeMediaRecorderConstructorFactory = (window) => {\n    if (window === null) {\n        return null;\n    }\n\n    return window.MediaRecorder === undefined ? null : window.MediaRecorder;\n};\n","import { IBlobEvent, IMediaRecorder } from '../interfaces';\nimport { TEventHandler, TNativeMediaRecorderFactoryFactory } from '../types';\n\nexport const createNativeMediaRecorderFactory: TNativeMediaRecorderFactoryFactory = (\n    createInvalidModificationError,\n    createNotSupportedError\n) => {\n    return (nativeMediaRecorderConstructor, stream, mediaRecorderOptions) => {\n        const bufferedBlobs: Blob[] = [];\n        const dataAvailableListeners = new WeakMap<EventListener, (this: IMediaRecorder, event: IBlobEvent) => void>();\n        const errorListeners = new WeakMap<EventListener, (this: IMediaRecorder, event: ErrorEvent) => void>();\n        const nativeMediaRecorder = new nativeMediaRecorderConstructor(stream, mediaRecorderOptions);\n        const stopListeners = new WeakMap<EventListener, (this: IMediaRecorder, event: Event) => void>();\n\n        let isActive = true;\n\n        nativeMediaRecorder.addEventListener = ((addEventListener) => {\n            return (\n                type: string,\n                listener: null | TEventHandler<IMediaRecorder> | EventListenerOrEventListenerObject,\n                options?: boolean | AddEventListenerOptions\n            ) => {\n                let patchedEventListener = listener;\n\n                if (typeof listener === 'function') {\n                    if (type === 'dataavailable') {\n                        // Bug #7 & #8: Chrome fires the dataavailable and stop events before it fires the error event.\n                        patchedEventListener = (event: IBlobEvent) => {\n                            setTimeout(() => {\n                                if (isActive && nativeMediaRecorder.state === 'inactive') {\n                                    bufferedBlobs.push(event.data);\n                                } else {\n                                    if (bufferedBlobs.length > 0) {\n                                        const blob = event.data;\n\n                                        Object.defineProperty(event, 'data', {\n                                            value: new Blob([...bufferedBlobs, blob], { type: blob.type })\n                                        });\n\n                                        bufferedBlobs.length = 0;\n                                    }\n\n                                    listener.call(nativeMediaRecorder, event);\n                                }\n                            });\n                        };\n\n                        dataAvailableListeners.set(listener, patchedEventListener);\n                    } else if (type === 'error') {\n                        // Bug #12 & #13: Firefox fires a regular event with an error property.\n                        patchedEventListener = (event: ErrorEvent | (Event & { error?: Error })) => {\n                            // Bug #3 & #4: Chrome throws an error event without any error.\n                            if (event.error === undefined) {\n                                listener.call(nativeMediaRecorder, new ErrorEvent('error', { error: createInvalidModificationError() }));\n                                // Bug #1 & #2: Firefox throws an error event with an UnknownError.\n                            } else if (event.error.name === 'UnknownError') {\n                                const message = event.error.message;\n\n                                listener.call(\n                                    nativeMediaRecorder,\n                                    new ErrorEvent('error', { error: createInvalidModificationError(message) })\n                                );\n                            } else if (event instanceof ErrorEvent) {\n                                listener.call(nativeMediaRecorder, event);\n                            } else {\n                                listener.call(nativeMediaRecorder, new ErrorEvent('error', { error: event.error }));\n                            }\n                        };\n\n                        errorListeners.set(listener, patchedEventListener);\n                    } else if (type === 'stop') {\n                        // Bug #7 & #8: Chrome fires the dataavailable and stop events before it fires the error event.\n                        patchedEventListener = (event: Event) => {\n                            isActive = false;\n\n                            setTimeout(() => listener.call(nativeMediaRecorder, event));\n                        };\n\n                        stopListeners.set(listener, patchedEventListener);\n                    }\n                }\n\n                return addEventListener.call(nativeMediaRecorder, type, patchedEventListener, options);\n            };\n        })(nativeMediaRecorder.addEventListener);\n\n        nativeMediaRecorder.dispatchEvent = ((dispatchEvent) => {\n            // Bug #7 & #8: Chrome fires the dataavailable and stop events before it fires the error event.\n            return (event: Event) => {\n                let wasActive: boolean;\n\n                setTimeout(() => {\n                    wasActive = isActive;\n                    isActive = false;\n                });\n\n                const returnValue = dispatchEvent.call(nativeMediaRecorder, event);\n\n                setTimeout(() => (isActive = wasActive));\n\n                return returnValue;\n            };\n        })(nativeMediaRecorder.dispatchEvent);\n\n        nativeMediaRecorder.removeEventListener = ((removeEventListener) => {\n            return (\n                type: string,\n                listener: null | TEventHandler<IMediaRecorder> | EventListenerOrEventListenerObject,\n                options?: boolean | EventListenerOptions\n            ) => {\n                let patchedEventListener = listener;\n\n                if (typeof listener === 'function') {\n                    if (type === 'dataavailable') {\n                        const dataAvailableListener = dataAvailableListeners.get(listener);\n\n                        if (dataAvailableListener !== undefined) {\n                            patchedEventListener = dataAvailableListener;\n                        }\n                    } else if (type === 'error') {\n                        const errorListener = errorListeners.get(listener);\n\n                        if (errorListener !== undefined) {\n                            patchedEventListener = errorListener;\n                        }\n                    } else if (type === 'stop') {\n                        const stopListener = stopListeners.get(listener);\n\n                        if (stopListener !== undefined) {\n                            patchedEventListener = stopListener;\n                        }\n                    }\n                }\n\n                return removeEventListener.call(nativeMediaRecorder, type, patchedEventListener, options);\n            };\n        })(nativeMediaRecorder.removeEventListener);\n\n        nativeMediaRecorder.start = ((start) => {\n            return (timeslice?: number) => {\n                /*\n                 * Bug #6: Chrome will emit a blob without any data when asked to encode a MediaStream with a video track into an audio\n                 * codec.\n                 */\n                if (\n                    mediaRecorderOptions.mimeType !== undefined &&\n                    mediaRecorderOptions.mimeType.startsWith('audio/') &&\n                    stream.getVideoTracks().length > 0\n                ) {\n                    throw createNotSupportedError();\n                }\n\n                isActive = timeslice !== undefined;\n\n                return timeslice === undefined ? start.call(nativeMediaRecorder) : start.call(nativeMediaRecorder, timeslice);\n            };\n        })(nativeMediaRecorder.start);\n\n        return nativeMediaRecorder;\n    };\n};\n","import { IMediaRecorder, IMediaRecorderEventMap, IMediaRecorderOptions } from '../interfaces';\nimport {\n    TBlobEventHandler,\n    TErrorEventHandler,\n    TEventHandler,\n    TMediaRecorderConstructorFactory,\n    TNativeEventTarget,\n    TRecordingState\n} from '../types';\n\nexport const createMediaRecorderConstructor: TMediaRecorderConstructorFactory = (\n    createNativeMediaRecorder,\n    createNotSupportedError,\n    createWebAudioMediaRecorder,\n    createWebmPcmMediaRecorder,\n    encoderRegexes,\n    eventTargetConstructor,\n    nativeMediaRecorderConstructor\n) => {\n    return class MediaRecorder extends eventTargetConstructor<IMediaRecorderEventMap> implements IMediaRecorder {\n        private _internalMediaRecorder: Omit<\n            IMediaRecorder,\n            'ondataavailable' | 'onerror' | 'onpause' | 'onresume' | 'onstart' | 'onstop' | keyof TNativeEventTarget\n        >;\n\n        private _ondataavailable: null | [TBlobEventHandler<this>, TBlobEventHandler<this>];\n\n        private _onerror: null | [TErrorEventHandler<this>, TErrorEventHandler<this>];\n\n        private _onpause: null | [TEventHandler<this>, TEventHandler<this>];\n\n        private _onresume: null | [TEventHandler<this>, TEventHandler<this>];\n\n        private _onstart: null | [TEventHandler<this>, TEventHandler<this>];\n\n        private _onstop: null | [TEventHandler<this>, TEventHandler<this>];\n\n        constructor(stream: MediaStream, options: IMediaRecorderOptions = {}) {\n            const { mimeType } = options;\n\n            if (\n                nativeMediaRecorderConstructor !== null &&\n                // Bug #10: Safari does not yet implement the isTypeSupported() method.\n                (mimeType === undefined ||\n                    (nativeMediaRecorderConstructor.isTypeSupported !== undefined &&\n                        nativeMediaRecorderConstructor.isTypeSupported(mimeType)))\n            ) {\n                const internalMediaRecorder = createNativeMediaRecorder(nativeMediaRecorderConstructor, stream, options);\n\n                super(internalMediaRecorder);\n\n                this._internalMediaRecorder = internalMediaRecorder;\n            } else if (mimeType !== undefined && encoderRegexes.some((regex) => regex.test(mimeType))) {\n                super();\n\n                // Bug #10: Safari does not yet implement the isTypeSupported() method.\n                if (\n                    nativeMediaRecorderConstructor !== null &&\n                    nativeMediaRecorderConstructor.isTypeSupported !== undefined &&\n                    nativeMediaRecorderConstructor.isTypeSupported('audio/webm;codecs=pcm')\n                ) {\n                    this._internalMediaRecorder = createWebmPcmMediaRecorder(this, nativeMediaRecorderConstructor, stream, mimeType);\n                } else {\n                    this._internalMediaRecorder = createWebAudioMediaRecorder(this, stream, mimeType);\n                }\n            } else {\n                // This is creating a native MediaRecorder just to provoke it to throw an error.\n                if (nativeMediaRecorderConstructor !== null) {\n                    createNativeMediaRecorder(nativeMediaRecorderConstructor, stream, options);\n                }\n\n                throw createNotSupportedError();\n            }\n\n            this._ondataavailable = null;\n            this._onerror = null;\n            this._onpause = null;\n            this._onresume = null;\n            this._onstart = null;\n            this._onstop = null;\n        }\n\n        get mimeType(): string {\n            return this._internalMediaRecorder.mimeType;\n        }\n\n        get ondataavailable(): null | TBlobEventHandler<this> {\n            return this._ondataavailable === null ? this._ondataavailable : this._ondataavailable[0];\n        }\n\n        set ondataavailable(value) {\n            if (this._ondataavailable !== null) {\n                this.removeEventListener('dataavailable', this._ondataavailable[1]);\n            }\n\n            if (typeof value === 'function') {\n                const boundListener = value.bind(this);\n\n                this.addEventListener('dataavailable', boundListener);\n\n                this._ondataavailable = [value, boundListener];\n            } else {\n                this._ondataavailable = null;\n            }\n        }\n\n        get onerror(): null | TErrorEventHandler<this> {\n            return this._onerror === null ? this._onerror : this._onerror[0];\n        }\n\n        set onerror(value) {\n            if (this._onerror !== null) {\n                this.removeEventListener('error', this._onerror[1]);\n            }\n\n            if (typeof value === 'function') {\n                const boundListener = value.bind(this);\n\n                this.addEventListener('error', boundListener);\n\n                this._onerror = [value, boundListener];\n            } else {\n                this._onerror = null;\n            }\n        }\n\n        get onpause(): null | TEventHandler<this> {\n            return this._onpause === null ? this._onpause : this._onpause[0];\n        }\n\n        set onpause(value) {\n            if (this._onpause !== null) {\n                this.removeEventListener('pause', this._onpause[1]);\n            }\n\n            if (typeof value === 'function') {\n                const boundListener = value.bind(this);\n\n                this.addEventListener('pause', boundListener);\n\n                this._onpause = [value, boundListener];\n            } else {\n                this._onpause = null;\n            }\n        }\n\n        get onresume(): null | TEventHandler<this> {\n            return this._onresume === null ? this._onresume : this._onresume[0];\n        }\n\n        set onresume(value) {\n            if (this._onresume !== null) {\n                this.removeEventListener('resume', this._onresume[1]);\n            }\n\n            if (typeof value === 'function') {\n                const boundListener = value.bind(this);\n\n                this.addEventListener('resume', boundListener);\n\n                this._onresume = [value, boundListener];\n            } else {\n                this._onresume = null;\n            }\n        }\n\n        get onstart(): null | TEventHandler<this> {\n            return this._onstart === null ? this._onstart : this._onstart[0];\n        }\n\n        set onstart(value) {\n            if (this._onstart !== null) {\n                this.removeEventListener('start', this._onstart[1]);\n            }\n\n            if (typeof value === 'function') {\n                const boundListener = value.bind(this);\n\n                this.addEventListener('start', boundListener);\n\n                this._onstart = [value, boundListener];\n            } else {\n                this._onstart = null;\n            }\n        }\n\n        get onstop(): null | TEventHandler<this> {\n            return this._onstop === null ? this._onstop : this._onstop[0];\n        }\n\n        set onstop(value) {\n            if (this._onstop !== null) {\n                this.removeEventListener('stop', this._onstop[1]);\n            }\n\n            if (typeof value === 'function') {\n                const boundListener = value.bind(this);\n\n                this.addEventListener('stop', boundListener);\n\n                this._onstop = [value, boundListener];\n            } else {\n                this._onstop = null;\n            }\n        }\n\n        get state(): TRecordingState {\n            return this._internalMediaRecorder.state;\n        }\n\n        public pause(): void {\n            return this._internalMediaRecorder.pause();\n        }\n\n        public resume(): void {\n            return this._internalMediaRecorder.resume();\n        }\n\n        public start(timeslice?: number): void {\n            return this._internalMediaRecorder.start(timeslice);\n        }\n\n        public stop(): void {\n            return this._internalMediaRecorder.stop();\n        }\n\n        public static isTypeSupported(mimeType: string): boolean {\n            return (\n                (nativeMediaRecorderConstructor !== null &&\n                    // Bug #10: Safari does not yet implement the isTypeSupported() method.\n                    nativeMediaRecorderConstructor.isTypeSupported !== undefined &&\n                    nativeMediaRecorderConstructor.isTypeSupported(mimeType)) ||\n                encoderRegexes.some((regex) => regex.test(mimeType))\n            );\n        }\n    };\n};\n","import { IEventTarget } from '../interfaces';\nimport { TEventHandler, TEventTargetConstructorFactory, TNativeEventTarget } from '../types';\n\nexport const createEventTargetConstructor: TEventTargetConstructorFactory = (createEventTarget, wrapEventListener) => {\n    return class EventTarget<EventMap extends Record<string, Event>> implements IEventTarget<EventMap> {\n        private _listeners: WeakMap<EventListenerOrEventListenerObject, EventListenerOrEventListenerObject>;\n\n        private _nativeEventTarget: TNativeEventTarget;\n\n        constructor(nativeEventTarget: null | TNativeEventTarget = null) {\n            this._listeners = new WeakMap();\n            this._nativeEventTarget = nativeEventTarget === null ? createEventTarget() : nativeEventTarget;\n        }\n\n        public addEventListener(\n            type: string,\n            listener: null | TEventHandler<this> | EventListenerOrEventListenerObject,\n            options?: boolean | AddEventListenerOptions\n        ): void {\n            if (listener !== null) {\n                let wrappedEventListener = this._listeners.get(listener);\n\n                if (wrappedEventListener === undefined) {\n                    wrappedEventListener = wrapEventListener(this, listener);\n\n                    if (typeof listener === 'function') {\n                        this._listeners.set(listener, wrappedEventListener);\n                    }\n                }\n\n                this._nativeEventTarget.addEventListener(type, wrappedEventListener, options);\n            }\n        }\n\n        public dispatchEvent(event: Event): boolean {\n            return this._nativeEventTarget.dispatchEvent(event);\n        }\n\n        public removeEventListener(\n            type: string,\n            listener: null | TEventHandler<this> | EventListenerOrEventListenerObject,\n            options?: boolean | EventListenerOptions\n        ): void {\n            const wrappedEventListener = listener === null ? undefined : this._listeners.get(listener);\n\n            this._nativeEventTarget.removeEventListener(type, wrappedEventListener === undefined ? null : wrappedEventListener, options);\n        }\n    };\n};\n","import { TWrapEventListenerFunction } from '../types';\n\nexport const wrapEventListener: TWrapEventListenerFunction = (target, eventListener) => {\n    return (event) => {\n        const descriptor = { value: target };\n\n        Object.defineProperties(event, {\n            currentTarget: descriptor,\n            target: descriptor\n        });\n\n        if (typeof eventListener === 'function') {\n            return eventListener.call(target, event);\n        }\n\n        return eventListener.handleEvent.call(target, event);\n    };\n};\n","import { TIsSupportedPromiseFactory } from '../types';\n\nexport const createIsSupportedPromise: TIsSupportedPromiseFactory = (window) => {\n    if (\n        window !== null &&\n        window.MediaStream !== undefined &&\n        /*\n         * Bug #10: An early experimental implemenation in Safari did not provide the isTypeSupported() function.\n         */\n        (window.MediaRecorder === undefined || window.MediaRecorder.isTypeSupported !== undefined)\n    ) {\n        /*\n         * Bug #5: Up until v70 Firefox did emit a blob of type video/webm when asked to encode a MediaStream with a video track into an\n         * audio codec.\n         */\n        return new Promise((resolve) => {\n            // Bug #11 Safari does not yet support the MediaRecorder but that isn't tested here.\n            if (window.MediaRecorder === undefined) {\n                return resolve(true);\n            }\n\n            // @todo captureStream() is not defined yet.\n            const canvasElement: HTMLCanvasElement & { captureStream?(): MediaStream } = document.createElement('canvas');\n\n            // @todo https://bugzilla.mozilla.org/show_bug.cgi?id=1388974\n            canvasElement.getContext('2d');\n\n            if (typeof canvasElement.captureStream !== 'function') {\n                return resolve(false);\n            }\n\n            const mediaStream = canvasElement.captureStream();\n            const mimeType = 'audio/webm';\n\n            try {\n                const mediaRecorder = new window.MediaRecorder(mediaStream, { mimeType });\n\n                mediaRecorder.addEventListener('dataavailable', ({ data }) => resolve(data.type === mimeType));\n                mediaRecorder.start();\n\n                setTimeout(() => mediaRecorder.stop(), 10);\n            } catch (err) {\n                resolve(err.name === 'NotSupportedError');\n            }\n        });\n    }\n\n    return Promise.resolve(false);\n};\n","(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.fastUniqueNumbers = {}));\n})(this, (function (exports) { 'use strict';\n\n    var createAddUniqueNumber = function createAddUniqueNumber(generateUniqueNumber) {\n      return function (set) {\n        var number = generateUniqueNumber(set);\n        set.add(number);\n        return number;\n      };\n    };\n\n    var createCache = function createCache(lastNumberWeakMap) {\n      return function (collection, nextNumber) {\n        lastNumberWeakMap.set(collection, nextNumber);\n        return nextNumber;\n      };\n    };\n\n    /*\n     * The value of the constant Number.MAX_SAFE_INTEGER equals (2 ** 53 - 1) but it\n     * is fairly new.\n     */\n    var MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER === undefined ? 9007199254740991 : Number.MAX_SAFE_INTEGER;\n    var TWO_TO_THE_POWER_OF_TWENTY_NINE = 536870912;\n    var TWO_TO_THE_POWER_OF_THIRTY = TWO_TO_THE_POWER_OF_TWENTY_NINE * 2;\n    var createGenerateUniqueNumber = function createGenerateUniqueNumber(cache, lastNumberWeakMap) {\n      return function (collection) {\n        var lastNumber = lastNumberWeakMap.get(collection);\n        /*\n         * Let's try the cheapest algorithm first. It might fail to produce a new\n         * number, but it is so cheap that it is okay to take the risk. Just\n         * increase the last number by one or reset it to 0 if we reached the upper\n         * bound of SMIs (which stands for small integers). When the last number is\n         * unknown it is assumed that the collection contains zero based consecutive\n         * numbers.\n         */\n        var nextNumber = lastNumber === undefined ? collection.size : lastNumber < TWO_TO_THE_POWER_OF_THIRTY ? lastNumber + 1 : 0;\n        if (!collection.has(nextNumber)) {\n          return cache(collection, nextNumber);\n        }\n        /*\n         * If there are less than half of 2 ** 30 numbers stored in the collection,\n         * the chance to generate a new random number in the range from 0 to 2 ** 30\n         * is at least 50%. It's benifitial to use only SMIs because they perform\n         * much better in any environment based on V8.\n         */\n        if (collection.size < TWO_TO_THE_POWER_OF_TWENTY_NINE) {\n          while (collection.has(nextNumber)) {\n            nextNumber = Math.floor(Math.random() * TWO_TO_THE_POWER_OF_THIRTY);\n          }\n          return cache(collection, nextNumber);\n        }\n        // Quickly check if there is a theoretical chance to generate a new number.\n        if (collection.size > MAX_SAFE_INTEGER) {\n          throw new Error('Congratulations, you created a collection of unique numbers which uses all available integers!');\n        }\n        // Otherwise use the full scale of safely usable integers.\n        while (collection.has(nextNumber)) {\n          nextNumber = Math.floor(Math.random() * MAX_SAFE_INTEGER);\n        }\n        return cache(collection, nextNumber);\n      };\n    };\n\n    var LAST_NUMBER_WEAK_MAP = new WeakMap();\n    var cache = createCache(LAST_NUMBER_WEAK_MAP);\n    var generateUniqueNumber = createGenerateUniqueNumber(cache, LAST_NUMBER_WEAK_MAP);\n    var addUniqueNumber = createAddUniqueNumber(generateUniqueNumber);\n\n    exports.addUniqueNumber = addUniqueNumber;\n    exports.generateUniqueNumber = generateUniqueNumber;\n\n}));\n","/*\n * indefinite-article.js v1.0.0, 12-18-2011\n *\n * @author: Rodrigo Neri (@rigoneri)\n *\n * (The MIT License)\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\nvar indefiniteArticle = function(phrase) {\n    var i, word;\n\n    // Getting the first word\n    var match = /\\w+/.exec(phrase);\n    if (match)\n        word = match[0];\n    else\n        return \"an\";\n\n    var l_word = word.toLowerCase();\n    // Specific start of words that should be preceeded by 'an'\n    var alt_cases = [\"honest\", \"hour\", \"hono\"];\n    for (i in alt_cases) {\n        if (l_word.indexOf(alt_cases[i]) == 0)\n            return \"an\";\n    }\n\n    // Single letter word which should be preceeded by 'an'\n    if (l_word.length == 1) {\n        if (\"aedhilmnorsx\".indexOf(l_word) >= 0)\n            return \"an\";\n        else\n            return \"a\";\n    }\n\n    // Capital words which should likely be preceeded by 'an'\n    if (word.match(/(?!FJO|[HLMNS]Y.|RY[EO]|SQU|(F[LR]?|[HL]|MN?|N|RH?|S[CHKLMNPTVW]?|X(YL)?)[AEIOU])[FHLMNRSX][A-Z]/)) {\n        return \"an\";\n    }\n\n    // Special cases where a word that begins with a vowel should be preceeded by 'a'\n    var regexes = [/^e[uw]/, /^onc?e\\b/, /^uni([^nmd]|mo)/, /^u[bcfhjkqrst][aeiou]/];\n    for (i = 0; i < regexes.length; i++) {\n        if (l_word.match(regexes[i]))\n            return \"a\"\n    }\n\n    // Special capital words (UK, UN)\n    if (word.match(/^U[NK][AIEO]/)) {\n        return \"a\";\n    }\n    else if (word == word.toUpperCase()) {\n        if (\"aedhilmnorsx\".indexOf(l_word[0]) >= 0)\n            return \"an\";\n        else\n            return \"a\";\n    }\n\n    // Basic method of words that begin with a vowel being preceeded by 'an'\n    if (\"aeiou\".indexOf(l_word[0]) >= 0)\n        return \"an\";\n\n    // Instances where y follwed by specific letters is preceeded by 'an'\n    if (l_word.match(/^y(b[lor]|cl[ea]|fere|gg|p[ios]|rou|tt)/))\n        return \"an\";\n\n    return \"a\";\n};\n\nif ((typeof module !== 'undefined') && (typeof module.exports !== 'undefined')) {\n    module.exports = indefiniteArticle;\n} else {\n    window.indefiniteArticle = indefiniteArticle;\n}\n","\nmodule.exports = function load (src, opts, cb) {\n  var head = document.head || document.getElementsByTagName('head')[0]\n  var script = document.createElement('script')\n\n  if (typeof opts === 'function') {\n    cb = opts\n    opts = {}\n  }\n\n  opts = opts || {}\n  cb = cb || function() {}\n\n  script.type = opts.type || 'text/javascript'\n  script.charset = opts.charset || 'utf8';\n  script.async = 'async' in opts ? !!opts.async : true\n  script.src = src\n\n  if (opts.attrs) {\n    setAttributes(script, opts.attrs)\n  }\n\n  if (opts.text) {\n    script.text = '' + opts.text\n  }\n\n  var onend = 'onload' in script ? stdOnEnd : ieOnEnd\n  onend(script, cb)\n\n  // some good legacy browsers (firefox) fail the 'in' detection above\n  // so as a fallback we always set onload\n  // old IE will ignore this and new IE will set onload\n  if (!script.onload) {\n    stdOnEnd(script, cb);\n  }\n\n  head.appendChild(script)\n}\n\nfunction setAttributes(script, attrs) {\n  for (var attr in attrs) {\n    script.setAttribute(attr, attrs[attr]);\n  }\n}\n\nfunction stdOnEnd (script, cb) {\n  script.onload = function () {\n    this.onerror = this.onload = null\n    cb(null, script)\n  }\n  script.onerror = function () {\n    // this.onload = null here is necessary\n    // because even IE9 works not like others\n    this.onerror = this.onload = null\n    cb(new Error('Failed to load ' + this.src), script)\n  }\n}\n\nfunction ieOnEnd (script, cb) {\n  script.onreadystatechange = function () {\n    if (this.readyState != 'complete' && this.readyState != 'loaded') return\n    this.onreadystatechange = null\n    cb(null, script) // there is no way to catch loading errors in IE8\n  }\n}\n","var safeIsNaN = Number.isNaN ||\n    function ponyfill(value) {\n        return typeof value === 'number' && value !== value;\n    };\nfunction isEqual(first, second) {\n    if (first === second) {\n        return true;\n    }\n    if (safeIsNaN(first) && safeIsNaN(second)) {\n        return true;\n    }\n    return false;\n}\nfunction areInputsEqual(newInputs, lastInputs) {\n    if (newInputs.length !== lastInputs.length) {\n        return false;\n    }\n    for (var i = 0; i < newInputs.length; i++) {\n        if (!isEqual(newInputs[i], lastInputs[i])) {\n            return false;\n        }\n    }\n    return true;\n}\n\nfunction memoizeOne(resultFn, isEqual) {\n    if (isEqual === void 0) { isEqual = areInputsEqual; }\n    var lastThis;\n    var lastArgs = [];\n    var lastResult;\n    var calledOnce = false;\n    function memoized() {\n        var newArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            newArgs[_i] = arguments[_i];\n        }\n        if (calledOnce && lastThis === this && isEqual(newArgs, lastArgs)) {\n            return lastResult;\n        }\n        lastResult = resultFn.apply(this, newArgs);\n        calledOnce = true;\n        lastThis = this;\n        lastArgs = newArgs;\n        return lastResult;\n    }\n    return memoized;\n}\n\nexport default memoizeOne;\n","function new_byte(count) {\n    return new Int8Array(count);\n}\n\nfunction new_short(count) {\n    return new Int16Array(count);\n}\n\nfunction new_int(count) {\n    return new Int32Array(count);\n}\n\nfunction new_float(count) {\n    return new Float32Array(count);\n}\n\nfunction new_double(count) {\n    return new Float64Array(count);\n}\n\nfunction new_float_n(args) {\n    if (args.length == 1) {\n        return new_float(args[0]);\n    }\n    var sz = args[0];\n    args = args.slice(1);\n    var A = [];\n    for (var i = 0; i < sz; i++) {\n        A.push(new_float_n(args));\n    }\n    return A;\n}\nfunction new_int_n(args) {\n    if (args.length == 1) {\n        return new_int(args[0]);\n    }\n    var sz = args[0];\n    args = args.slice(1);\n    var A = [];\n    for (var i = 0; i < sz; i++) {\n        A.push(new_int_n(args));\n    }\n    return A;\n}\n\nfunction new_short_n(args) {\n    if (args.length == 1) {\n        return new_short(args[0]);\n    }\n    var sz = args[0];\n    args = args.slice(1);\n    var A = [];\n    for (var i = 0; i < sz; i++) {\n        A.push(new_short_n(args));\n    }\n    return A;\n}\n\nfunction new_array_n(args) {\n    if (args.length == 1) {\n        return new Array(args[0]);\n    }\n    var sz = args[0];\n    args = args.slice(1);\n    var A = [];\n    for (var i = 0; i < sz; i++) {\n        A.push(new_array_n(args));\n    }\n    return A;\n}\n\n\nvar Arrays = {};\n\nArrays.fill = function (a, fromIndex, toIndex, val) {\n    if (arguments.length == 2) {\n        for (var i = 0; i < a.length; i++) {\n            a[i] = arguments[1];\n        }\n    } else {\n        for (var i = fromIndex; i < toIndex; i++) {\n            a[i] = val;\n        }\n    }\n};\n\nvar System = {};\n\nSystem.arraycopy = function (src, srcPos, dest, destPos, length) {\n    var srcEnd = srcPos + length;\n    while (srcPos < srcEnd)\n        dest[destPos++] = src[srcPos++];\n};\n\n\nvar Util = {};\nUtil.SQRT2 = 1.41421356237309504880;\nUtil.FAST_LOG10 = function (x) {\n    return Math.log10(x);\n};\n\nUtil.FAST_LOG10_X = function (x, y) {\n    return Math.log10(x) * y;\n};\n\nfunction ShortBlock(ordinal) {\n    this.ordinal = ordinal;\n}\n/**\n * LAME may use them, even different block types for L/R.\n */\nShortBlock.short_block_allowed = new ShortBlock(0);\n/**\n * LAME may use them, but always same block types in L/R.\n */\nShortBlock.short_block_coupled = new ShortBlock(1);\n/**\n * LAME will not use short blocks, long blocks only.\n */\nShortBlock.short_block_dispensed = new ShortBlock(2);\n/**\n * LAME will not use long blocks, short blocks only.\n */\nShortBlock.short_block_forced = new ShortBlock(3);\n\nvar Float = {};\nFloat.MAX_VALUE = 3.4028235e+38;\n\nfunction VbrMode(ordinal) {\n    this.ordinal = ordinal;\n}\nVbrMode.vbr_off = new VbrMode(0);\nVbrMode.vbr_mt = new VbrMode(1);\nVbrMode.vbr_rh = new VbrMode(2);\nVbrMode.vbr_abr = new VbrMode(3);\nVbrMode.vbr_mtrh = new VbrMode(4);\nVbrMode.vbr_default = VbrMode.vbr_mtrh;\n\nvar assert = function (x) {\n    //console.assert(x);\n};\n\nmodule.exports = {\n    \"System\": System,\n    \"VbrMode\": VbrMode,\n    \"Float\": Float,\n    \"ShortBlock\": ShortBlock,\n    \"Util\": Util,\n    \"Arrays\": Arrays,\n    \"new_array_n\": new_array_n,\n    \"new_byte\": new_byte,\n    \"new_double\": new_double,\n    \"new_float\": new_float,\n    \"new_float_n\": new_float_n,\n    \"new_int\": new_int,\n    \"new_int_n\": new_int_n,\n    \"new_short\": new_short,\n    \"new_short_n\": new_short_n,\n    \"assert\": assert\n};\n","/*\n *      MP3 window subband -> subband filtering -> mdct routine\n *\n *      Copyright (c) 1999-2000 Takehiro Tominaga\n *\n *\n * This library is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 2 of the License, or (at your option) any later version.\n *\n * This library is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Library General Public License for more details.\n *\n * You should have received a copy of the GNU Library General Public\n * License along with this library; if not, write to the\n * Free Software Foundation, Inc., 59 Temple Place - Suite 330,\n * Boston, MA 02111-1307, USA.\n */\n/*\n *         Special Thanks to Patrick De Smet for your advices.\n */\n\n/* $Id: NewMDCT.java,v 1.11 2011/05/24 20:48:06 kenchis Exp $ */\n\n//package mp3;\n\n//import java.util.Arrays;\nvar common = require('./common.js');\nvar System = common.System;\nvar VbrMode = common.VbrMode;\nvar Float = common.Float;\nvar ShortBlock = common.ShortBlock;\nvar Util = common.Util;\nvar Arrays = common.Arrays;\nvar new_array_n = common.new_array_n;\nvar new_byte = common.new_byte;\nvar new_double = common.new_double;\nvar new_float = common.new_float;\nvar new_float_n = common.new_float_n;\nvar new_int = common.new_int;\nvar new_int_n = common.new_int_n;\nvar assert = common.assert;\n\nvar Encoder = require('./Encoder.js');\n\n\nfunction NewMDCT() {\n\n\tvar enwindow = [\n\t\t\t-4.77e-07 * 0.740951125354959 / 2.384e-06,\n\t\t\t1.03951e-04 * 0.740951125354959 / 2.384e-06,\n\t\t\t9.53674e-04 * 0.740951125354959 / 2.384e-06,\n\t\t\t2.841473e-03 * 0.740951125354959 / 2.384e-06,\n\t\t\t3.5758972e-02 * 0.740951125354959 / 2.384e-06,\n\t\t\t3.401756e-03 * 0.740951125354959 / 2.384e-06,\n\t\t\t9.83715e-04 * 0.740951125354959 / 2.384e-06,\n\t\t\t9.9182e-05 * 0.740951125354959 / 2.384e-06, /* 15 */\n\t\t\t1.2398e-05 * 0.740951125354959 / 2.384e-06,\n\t\t\t1.91212e-04 * 0.740951125354959 / 2.384e-06,\n\t\t\t2.283096e-03 * 0.740951125354959 / 2.384e-06,\n\t\t\t1.6994476e-02 * 0.740951125354959 / 2.384e-06,\n\t\t\t-1.8756866e-02 * 0.740951125354959 / 2.384e-06,\n\t\t\t-2.630711e-03 * 0.740951125354959 / 2.384e-06,\n\t\t\t-2.47478e-04 * 0.740951125354959 / 2.384e-06,\n\t\t\t-1.4782e-05 * 0.740951125354959 / 2.384e-06,\n\t\t\t9.063471690191471e-01, 1.960342806591213e-01,\n\n\t\t\t-4.77e-07 * 0.773010453362737 / 2.384e-06,\n\t\t\t1.05858e-04 * 0.773010453362737 / 2.384e-06,\n\t\t\t9.30786e-04 * 0.773010453362737 / 2.384e-06,\n\t\t\t2.521515e-03 * 0.773010453362737 / 2.384e-06,\n\t\t\t3.5694122e-02 * 0.773010453362737 / 2.384e-06,\n\t\t\t3.643036e-03 * 0.773010453362737 / 2.384e-06,\n\t\t\t9.91821e-04 * 0.773010453362737 / 2.384e-06,\n\t\t\t9.6321e-05 * 0.773010453362737 / 2.384e-06, /* 14 */\n\t\t\t1.1444e-05 * 0.773010453362737 / 2.384e-06,\n\t\t\t1.65462e-04 * 0.773010453362737 / 2.384e-06,\n\t\t\t2.110004e-03 * 0.773010453362737 / 2.384e-06,\n\t\t\t1.6112804e-02 * 0.773010453362737 / 2.384e-06,\n\t\t\t-1.9634247e-02 * 0.773010453362737 / 2.384e-06,\n\t\t\t-2.803326e-03 * 0.773010453362737 / 2.384e-06,\n\t\t\t-2.77042e-04 * 0.773010453362737 / 2.384e-06,\n\t\t\t-1.6689e-05 * 0.773010453362737 / 2.384e-06,\n\t\t\t8.206787908286602e-01, 3.901806440322567e-01,\n\n\t\t\t-4.77e-07 * 0.803207531480645 / 2.384e-06,\n\t\t\t1.07288e-04 * 0.803207531480645 / 2.384e-06,\n\t\t\t9.02653e-04 * 0.803207531480645 / 2.384e-06,\n\t\t\t2.174854e-03 * 0.803207531480645 / 2.384e-06,\n\t\t\t3.5586357e-02 * 0.803207531480645 / 2.384e-06,\n\t\t\t3.858566e-03 * 0.803207531480645 / 2.384e-06,\n\t\t\t9.95159e-04 * 0.803207531480645 / 2.384e-06,\n\t\t\t9.3460e-05 * 0.803207531480645 / 2.384e-06, /* 13 */\n\t\t\t1.0014e-05 * 0.803207531480645 / 2.384e-06,\n\t\t\t1.40190e-04 * 0.803207531480645 / 2.384e-06,\n\t\t\t1.937389e-03 * 0.803207531480645 / 2.384e-06,\n\t\t\t1.5233517e-02 * 0.803207531480645 / 2.384e-06,\n\t\t\t-2.0506859e-02 * 0.803207531480645 / 2.384e-06,\n\t\t\t-2.974033e-03 * 0.803207531480645 / 2.384e-06,\n\t\t\t-3.07560e-04 * 0.803207531480645 / 2.384e-06,\n\t\t\t-1.8120e-05 * 0.803207531480645 / 2.384e-06,\n\t\t\t7.416505462720353e-01, 5.805693545089249e-01,\n\n\t\t\t-4.77e-07 * 0.831469612302545 / 2.384e-06,\n\t\t\t1.08242e-04 * 0.831469612302545 / 2.384e-06,\n\t\t\t8.68797e-04 * 0.831469612302545 / 2.384e-06,\n\t\t\t1.800537e-03 * 0.831469612302545 / 2.384e-06,\n\t\t\t3.5435200e-02 * 0.831469612302545 / 2.384e-06,\n\t\t\t4.049301e-03 * 0.831469612302545 / 2.384e-06,\n\t\t\t9.94205e-04 * 0.831469612302545 / 2.384e-06,\n\t\t\t9.0599e-05 * 0.831469612302545 / 2.384e-06, /* 12 */\n\t\t\t9.060e-06 * 0.831469612302545 / 2.384e-06,\n\t\t\t1.16348e-04 * 0.831469612302545 / 2.384e-06,\n\t\t\t1.766682e-03 * 0.831469612302545 / 2.384e-06,\n\t\t\t1.4358521e-02 * 0.831469612302545 / 2.384e-06,\n\t\t\t-2.1372318e-02 * 0.831469612302545 / 2.384e-06,\n\t\t\t-3.14188e-03 * 0.831469612302545 / 2.384e-06,\n\t\t\t-3.39031e-04 * 0.831469612302545 / 2.384e-06,\n\t\t\t-1.9550e-05 * 0.831469612302545 / 2.384e-06,\n\t\t\t6.681786379192989e-01, 7.653668647301797e-01,\n\n\t\t\t-4.77e-07 * 0.857728610000272 / 2.384e-06,\n\t\t\t1.08719e-04 * 0.857728610000272 / 2.384e-06,\n\t\t\t8.29220e-04 * 0.857728610000272 / 2.384e-06,\n\t\t\t1.399517e-03 * 0.857728610000272 / 2.384e-06,\n\t\t\t3.5242081e-02 * 0.857728610000272 / 2.384e-06,\n\t\t\t4.215240e-03 * 0.857728610000272 / 2.384e-06,\n\t\t\t9.89437e-04 * 0.857728610000272 / 2.384e-06,\n\t\t\t8.7261e-05 * 0.857728610000272 / 2.384e-06, /* 11 */\n\t\t\t8.106e-06 * 0.857728610000272 / 2.384e-06,\n\t\t\t9.3937e-05 * 0.857728610000272 / 2.384e-06,\n\t\t\t1.597881e-03 * 0.857728610000272 / 2.384e-06,\n\t\t\t1.3489246e-02 * 0.857728610000272 / 2.384e-06,\n\t\t\t-2.2228718e-02 * 0.857728610000272 / 2.384e-06,\n\t\t\t-3.306866e-03 * 0.857728610000272 / 2.384e-06,\n\t\t\t-3.71456e-04 * 0.857728610000272 / 2.384e-06,\n\t\t\t-2.1458e-05 * 0.857728610000272 / 2.384e-06,\n\t\t\t5.993769336819237e-01, 9.427934736519954e-01,\n\n\t\t\t-4.77e-07 * 0.881921264348355 / 2.384e-06,\n\t\t\t1.08719e-04 * 0.881921264348355 / 2.384e-06,\n\t\t\t7.8392e-04 * 0.881921264348355 / 2.384e-06,\n\t\t\t9.71317e-04 * 0.881921264348355 / 2.384e-06,\n\t\t\t3.5007000e-02 * 0.881921264348355 / 2.384e-06,\n\t\t\t4.357815e-03 * 0.881921264348355 / 2.384e-06,\n\t\t\t9.80854e-04 * 0.881921264348355 / 2.384e-06,\n\t\t\t8.3923e-05 * 0.881921264348355 / 2.384e-06, /* 10 */\n\t\t\t7.629e-06 * 0.881921264348355 / 2.384e-06,\n\t\t\t7.2956e-05 * 0.881921264348355 / 2.384e-06,\n\t\t\t1.432419e-03 * 0.881921264348355 / 2.384e-06,\n\t\t\t1.2627602e-02 * 0.881921264348355 / 2.384e-06,\n\t\t\t-2.3074150e-02 * 0.881921264348355 / 2.384e-06,\n\t\t\t-3.467083e-03 * 0.881921264348355 / 2.384e-06,\n\t\t\t-4.04358e-04 * 0.881921264348355 / 2.384e-06,\n\t\t\t-2.3365e-05 * 0.881921264348355 / 2.384e-06,\n\t\t\t5.345111359507916e-01, 1.111140466039205e+00,\n\n\t\t\t-9.54e-07 * 0.903989293123443 / 2.384e-06,\n\t\t\t1.08242e-04 * 0.903989293123443 / 2.384e-06,\n\t\t\t7.31945e-04 * 0.903989293123443 / 2.384e-06,\n\t\t\t5.15938e-04 * 0.903989293123443 / 2.384e-06,\n\t\t\t3.4730434e-02 * 0.903989293123443 / 2.384e-06,\n\t\t\t4.477024e-03 * 0.903989293123443 / 2.384e-06,\n\t\t\t9.68933e-04 * 0.903989293123443 / 2.384e-06,\n\t\t\t8.0585e-05 * 0.903989293123443 / 2.384e-06, /* 9 */\n\t\t\t6.676e-06 * 0.903989293123443 / 2.384e-06,\n\t\t\t5.2929e-05 * 0.903989293123443 / 2.384e-06,\n\t\t\t1.269817e-03 * 0.903989293123443 / 2.384e-06,\n\t\t\t1.1775017e-02 * 0.903989293123443 / 2.384e-06,\n\t\t\t-2.3907185e-02 * 0.903989293123443 / 2.384e-06,\n\t\t\t-3.622532e-03 * 0.903989293123443 / 2.384e-06,\n\t\t\t-4.38213e-04 * 0.903989293123443 / 2.384e-06,\n\t\t\t-2.5272e-05 * 0.903989293123443 / 2.384e-06,\n\t\t\t4.729647758913199e-01, 1.268786568327291e+00,\n\n\t\t\t-9.54e-07 * 0.92387953251128675613 / 2.384e-06,\n\t\t\t1.06812e-04 * 0.92387953251128675613 / 2.384e-06,\n\t\t\t6.74248e-04 * 0.92387953251128675613 / 2.384e-06,\n\t\t\t3.3379e-05 * 0.92387953251128675613 / 2.384e-06,\n\t\t\t3.4412861e-02 * 0.92387953251128675613 / 2.384e-06,\n\t\t\t4.573822e-03 * 0.92387953251128675613 / 2.384e-06,\n\t\t\t9.54151e-04 * 0.92387953251128675613 / 2.384e-06,\n\t\t\t7.6771e-05 * 0.92387953251128675613 / 2.384e-06,\n\t\t\t6.199e-06 * 0.92387953251128675613 / 2.384e-06,\n\t\t\t3.4332e-05 * 0.92387953251128675613 / 2.384e-06,\n\t\t\t1.111031e-03 * 0.92387953251128675613 / 2.384e-06,\n\t\t\t1.0933399e-02 * 0.92387953251128675613 / 2.384e-06,\n\t\t\t-2.4725437e-02 * 0.92387953251128675613 / 2.384e-06,\n\t\t\t-3.771782e-03 * 0.92387953251128675613 / 2.384e-06,\n\t\t\t-4.72546e-04 * 0.92387953251128675613 / 2.384e-06,\n\t\t\t-2.7657e-05 * 0.92387953251128675613 / 2.384e-06,\n\t\t\t4.1421356237309504879e-01, /* tan(PI/8) */\n\t\t\t1.414213562373095e+00,\n\n\t\t\t-9.54e-07 * 0.941544065183021 / 2.384e-06,\n\t\t\t1.05381e-04 * 0.941544065183021 / 2.384e-06,\n\t\t\t6.10352e-04 * 0.941544065183021 / 2.384e-06,\n\t\t\t-4.75883e-04 * 0.941544065183021 / 2.384e-06,\n\t\t\t3.4055710e-02 * 0.941544065183021 / 2.384e-06,\n\t\t\t4.649162e-03 * 0.941544065183021 / 2.384e-06,\n\t\t\t9.35555e-04 * 0.941544065183021 / 2.384e-06,\n\t\t\t7.3433e-05 * 0.941544065183021 / 2.384e-06, /* 7 */\n\t\t\t5.245e-06 * 0.941544065183021 / 2.384e-06,\n\t\t\t1.7166e-05 * 0.941544065183021 / 2.384e-06,\n\t\t\t9.56535e-04 * 0.941544065183021 / 2.384e-06,\n\t\t\t1.0103703e-02 * 0.941544065183021 / 2.384e-06,\n\t\t\t-2.5527000e-02 * 0.941544065183021 / 2.384e-06,\n\t\t\t-3.914356e-03 * 0.941544065183021 / 2.384e-06,\n\t\t\t-5.07355e-04 * 0.941544065183021 / 2.384e-06,\n\t\t\t-3.0041e-05 * 0.941544065183021 / 2.384e-06,\n\t\t\t3.578057213145241e-01, 1.546020906725474e+00,\n\n\t\t\t-9.54e-07 * 0.956940335732209 / 2.384e-06,\n\t\t\t1.02520e-04 * 0.956940335732209 / 2.384e-06,\n\t\t\t5.39303e-04 * 0.956940335732209 / 2.384e-06,\n\t\t\t-1.011848e-03 * 0.956940335732209 / 2.384e-06,\n\t\t\t3.3659935e-02 * 0.956940335732209 / 2.384e-06,\n\t\t\t4.703045e-03 * 0.956940335732209 / 2.384e-06,\n\t\t\t9.15051e-04 * 0.956940335732209 / 2.384e-06,\n\t\t\t7.0095e-05 * 0.956940335732209 / 2.384e-06, /* 6 */\n\t\t\t4.768e-06 * 0.956940335732209 / 2.384e-06,\n\t\t\t9.54e-07 * 0.956940335732209 / 2.384e-06,\n\t\t\t8.06808e-04 * 0.956940335732209 / 2.384e-06,\n\t\t\t9.287834e-03 * 0.956940335732209 / 2.384e-06,\n\t\t\t-2.6310921e-02 * 0.956940335732209 / 2.384e-06,\n\t\t\t-4.048824e-03 * 0.956940335732209 / 2.384e-06,\n\t\t\t-5.42164e-04 * 0.956940335732209 / 2.384e-06,\n\t\t\t-3.2425e-05 * 0.956940335732209 / 2.384e-06,\n\t\t\t3.033466836073424e-01, 1.662939224605090e+00,\n\n\t\t\t-1.431e-06 * 0.970031253194544 / 2.384e-06,\n\t\t\t9.9182e-05 * 0.970031253194544 / 2.384e-06,\n\t\t\t4.62532e-04 * 0.970031253194544 / 2.384e-06,\n\t\t\t-1.573563e-03 * 0.970031253194544 / 2.384e-06,\n\t\t\t3.3225536e-02 * 0.970031253194544 / 2.384e-06,\n\t\t\t4.737377e-03 * 0.970031253194544 / 2.384e-06,\n\t\t\t8.91685e-04 * 0.970031253194544 / 2.384e-06,\n\t\t\t6.6280e-05 * 0.970031253194544 / 2.384e-06, /* 5 */\n\t\t\t4.292e-06 * 0.970031253194544 / 2.384e-06,\n\t\t\t-1.3828e-05 * 0.970031253194544 / 2.384e-06,\n\t\t\t6.61850e-04 * 0.970031253194544 / 2.384e-06,\n\t\t\t8.487225e-03 * 0.970031253194544 / 2.384e-06,\n\t\t\t-2.7073860e-02 * 0.970031253194544 / 2.384e-06,\n\t\t\t-4.174709e-03 * 0.970031253194544 / 2.384e-06,\n\t\t\t-5.76973e-04 * 0.970031253194544 / 2.384e-06,\n\t\t\t-3.4809e-05 * 0.970031253194544 / 2.384e-06,\n\t\t\t2.504869601913055e-01, 1.763842528696710e+00,\n\n\t\t\t-1.431e-06 * 0.98078528040323 / 2.384e-06,\n\t\t\t9.5367e-05 * 0.98078528040323 / 2.384e-06,\n\t\t\t3.78609e-04 * 0.98078528040323 / 2.384e-06,\n\t\t\t-2.161503e-03 * 0.98078528040323 / 2.384e-06,\n\t\t\t3.2754898e-02 * 0.98078528040323 / 2.384e-06,\n\t\t\t4.752159e-03 * 0.98078528040323 / 2.384e-06,\n\t\t\t8.66413e-04 * 0.98078528040323 / 2.384e-06,\n\t\t\t6.2943e-05 * 0.98078528040323 / 2.384e-06, /* 4 */\n\t\t\t3.815e-06 * 0.98078528040323 / 2.384e-06,\n\t\t\t-2.718e-05 * 0.98078528040323 / 2.384e-06,\n\t\t\t5.22137e-04 * 0.98078528040323 / 2.384e-06,\n\t\t\t7.703304e-03 * 0.98078528040323 / 2.384e-06,\n\t\t\t-2.7815342e-02 * 0.98078528040323 / 2.384e-06,\n\t\t\t-4.290581e-03 * 0.98078528040323 / 2.384e-06,\n\t\t\t-6.11782e-04 * 0.98078528040323 / 2.384e-06,\n\t\t\t-3.7670e-05 * 0.98078528040323 / 2.384e-06,\n\t\t\t1.989123673796580e-01, 1.847759065022573e+00,\n\n\t\t\t-1.907e-06 * 0.989176509964781 / 2.384e-06,\n\t\t\t9.0122e-05 * 0.989176509964781 / 2.384e-06,\n\t\t\t2.88486e-04 * 0.989176509964781 / 2.384e-06,\n\t\t\t-2.774239e-03 * 0.989176509964781 / 2.384e-06,\n\t\t\t3.2248020e-02 * 0.989176509964781 / 2.384e-06,\n\t\t\t4.748821e-03 * 0.989176509964781 / 2.384e-06,\n\t\t\t8.38757e-04 * 0.989176509964781 / 2.384e-06,\n\t\t\t5.9605e-05 * 0.989176509964781 / 2.384e-06, /* 3 */\n\t\t\t3.338e-06 * 0.989176509964781 / 2.384e-06,\n\t\t\t-3.9577e-05 * 0.989176509964781 / 2.384e-06,\n\t\t\t3.88145e-04 * 0.989176509964781 / 2.384e-06,\n\t\t\t6.937027e-03 * 0.989176509964781 / 2.384e-06,\n\t\t\t-2.8532982e-02 * 0.989176509964781 / 2.384e-06,\n\t\t\t-4.395962e-03 * 0.989176509964781 / 2.384e-06,\n\t\t\t-6.46591e-04 * 0.989176509964781 / 2.384e-06,\n\t\t\t-4.0531e-05 * 0.989176509964781 / 2.384e-06,\n\t\t\t1.483359875383474e-01, 1.913880671464418e+00,\n\n\t\t\t-1.907e-06 * 0.995184726672197 / 2.384e-06,\n\t\t\t8.4400e-05 * 0.995184726672197 / 2.384e-06,\n\t\t\t1.91689e-04 * 0.995184726672197 / 2.384e-06,\n\t\t\t-3.411293e-03 * 0.995184726672197 / 2.384e-06,\n\t\t\t3.1706810e-02 * 0.995184726672197 / 2.384e-06,\n\t\t\t4.728317e-03 * 0.995184726672197 / 2.384e-06,\n\t\t\t8.09669e-04 * 0.995184726672197 / 2.384e-06,\n\t\t\t5.579e-05 * 0.995184726672197 / 2.384e-06,\n\t\t\t3.338e-06 * 0.995184726672197 / 2.384e-06,\n\t\t\t-5.0545e-05 * 0.995184726672197 / 2.384e-06,\n\t\t\t2.59876e-04 * 0.995184726672197 / 2.384e-06,\n\t\t\t6.189346e-03 * 0.995184726672197 / 2.384e-06,\n\t\t\t-2.9224873e-02 * 0.995184726672197 / 2.384e-06,\n\t\t\t-4.489899e-03 * 0.995184726672197 / 2.384e-06,\n\t\t\t-6.80923e-04 * 0.995184726672197 / 2.384e-06,\n\t\t\t-4.3392e-05 * 0.995184726672197 / 2.384e-06,\n\t\t\t9.849140335716425e-02, 1.961570560806461e+00,\n\n\t\t\t-2.384e-06 * 0.998795456205172 / 2.384e-06,\n\t\t\t7.7724e-05 * 0.998795456205172 / 2.384e-06,\n\t\t\t8.8215e-05 * 0.998795456205172 / 2.384e-06,\n\t\t\t-4.072189e-03 * 0.998795456205172 / 2.384e-06,\n\t\t\t3.1132698e-02 * 0.998795456205172 / 2.384e-06,\n\t\t\t4.691124e-03 * 0.998795456205172 / 2.384e-06,\n\t\t\t7.79152e-04 * 0.998795456205172 / 2.384e-06,\n\t\t\t5.2929e-05 * 0.998795456205172 / 2.384e-06,\n\t\t\t2.861e-06 * 0.998795456205172 / 2.384e-06,\n\t\t\t-6.0558e-05 * 0.998795456205172 / 2.384e-06,\n\t\t\t1.37329e-04 * 0.998795456205172 / 2.384e-06,\n\t\t\t5.462170e-03 * 0.998795456205172 / 2.384e-06,\n\t\t\t-2.9890060e-02 * 0.998795456205172 / 2.384e-06,\n\t\t\t-4.570484e-03 * 0.998795456205172 / 2.384e-06,\n\t\t\t-7.14302e-04 * 0.998795456205172 / 2.384e-06,\n\t\t\t-4.6253e-05 * 0.998795456205172 / 2.384e-06,\n\t\t\t4.912684976946725e-02, 1.990369453344394e+00,\n\n\t\t\t3.5780907e-02 * Util.SQRT2 * 0.5 / 2.384e-06,\n\t\t\t1.7876148e-02 * Util.SQRT2 * 0.5 / 2.384e-06,\n\t\t\t3.134727e-03 * Util.SQRT2 * 0.5 / 2.384e-06,\n\t\t\t2.457142e-03 * Util.SQRT2 * 0.5 / 2.384e-06,\n\t\t\t9.71317e-04 * Util.SQRT2 * 0.5 / 2.384e-06,\n\t\t\t2.18868e-04 * Util.SQRT2 * 0.5 / 2.384e-06,\n\t\t\t1.01566e-04 * Util.SQRT2 * 0.5 / 2.384e-06,\n\t\t\t1.3828e-05 * Util.SQRT2 * 0.5 / 2.384e-06,\n\n\t\t\t3.0526638e-02 / 2.384e-06, 4.638195e-03 / 2.384e-06,\n\t\t\t7.47204e-04 / 2.384e-06, 4.9591e-05 / 2.384e-06,\n\t\t\t4.756451e-03 / 2.384e-06, 2.1458e-05 / 2.384e-06,\n\t\t\t-6.9618e-05 / 2.384e-06, /* 2.384e-06/2.384e-06 */\n\t];\n\n\tvar NS = 12;\n\tvar NL = 36;\n\n\tvar win = [\n\t    [\n\t     2.382191739347913e-13,\n\t     6.423305872147834e-13,\n\t     9.400849094049688e-13,\n\t     1.122435026096556e-12,\n\t     1.183840321267481e-12,\n\t     1.122435026096556e-12,\n\t     9.400849094049690e-13,\n\t     6.423305872147839e-13,\n\t     2.382191739347918e-13,\n\n\t     5.456116108943412e-12,\n\t     4.878985199565852e-12,\n\t     4.240448995017367e-12,\n\t     3.559909094758252e-12,\n\t     2.858043359288075e-12,\n\t     2.156177623817898e-12,\n\t     1.475637723558783e-12,\n\t     8.371015190102974e-13,\n\t     2.599706096327376e-13,\n\n\t     -5.456116108943412e-12,\n\t     -4.878985199565852e-12,\n\t     -4.240448995017367e-12,\n\t     -3.559909094758252e-12,\n\t     -2.858043359288076e-12,\n\t     -2.156177623817898e-12,\n\t     -1.475637723558783e-12,\n\t     -8.371015190102975e-13,\n\t     -2.599706096327376e-13,\n\n\t     -2.382191739347923e-13,\n\t     -6.423305872147843e-13,\n\t     -9.400849094049696e-13,\n\t     -1.122435026096556e-12,\n\t     -1.183840321267481e-12,\n\t     -1.122435026096556e-12,\n\t     -9.400849094049694e-13,\n\t     -6.423305872147840e-13,\n\t     -2.382191739347918e-13,\n\t     ],\n\t    [\n\t     2.382191739347913e-13,\n\t     6.423305872147834e-13,\n\t     9.400849094049688e-13,\n\t     1.122435026096556e-12,\n\t     1.183840321267481e-12,\n\t     1.122435026096556e-12,\n\t     9.400849094049688e-13,\n\t     6.423305872147841e-13,\n\t     2.382191739347918e-13,\n\n\t     5.456116108943413e-12,\n\t     4.878985199565852e-12,\n\t     4.240448995017367e-12,\n\t     3.559909094758253e-12,\n\t     2.858043359288075e-12,\n\t     2.156177623817898e-12,\n\t     1.475637723558782e-12,\n\t     8.371015190102975e-13,\n\t     2.599706096327376e-13,\n\n\t     -5.461314069809755e-12,\n\t     -4.921085770524055e-12,\n\t     -4.343405037091838e-12,\n\t     -3.732668368707687e-12,\n\t     -3.093523840190885e-12,\n\t     -2.430835727329465e-12,\n\t     -1.734679010007751e-12,\n\t     -9.748253656609281e-13,\n\t     -2.797435120168326e-13,\n\n\t     0.000000000000000e+00,\n\t     0.000000000000000e+00,\n\t     0.000000000000000e+00,\n\t     0.000000000000000e+00,\n\t     0.000000000000000e+00,\n\t     0.000000000000000e+00,\n\t     -2.283748241799531e-13,\n\t     -4.037858874020686e-13,\n\t     -2.146547464825323e-13,\n\t     ],\n\t    [\n\t     1.316524975873958e-01, /* win[SHORT_TYPE] */\n\t     4.142135623730950e-01,\n\t     7.673269879789602e-01,\n\n\t     1.091308501069271e+00, /* tantab_l */\n\t     1.303225372841206e+00,\n\t     1.569685577117490e+00,\n\t     1.920982126971166e+00,\n\t     2.414213562373094e+00,\n\t     3.171594802363212e+00,\n\t     4.510708503662055e+00,\n\t     7.595754112725146e+00,\n\t     2.290376554843115e+01,\n\n\t     0.98480775301220802032, /* cx */\n\t     0.64278760968653936292,\n\t     0.34202014332566882393,\n\t     0.93969262078590842791,\n\t     -0.17364817766693030343,\n\t     -0.76604444311897790243,\n\t     0.86602540378443870761,\n\t     0.500000000000000e+00,\n\n\t     -5.144957554275265e-01, /* ca */\n\t     -4.717319685649723e-01,\n\t     -3.133774542039019e-01,\n\t     -1.819131996109812e-01,\n\t     -9.457419252642064e-02,\n\t     -4.096558288530405e-02,\n\t     -1.419856857247115e-02,\n\t     -3.699974673760037e-03,\n\n\t     8.574929257125442e-01, /* cs */\n\t     8.817419973177052e-01,\n\t     9.496286491027329e-01,\n\t     9.833145924917901e-01,\n\t     9.955178160675857e-01,\n\t     9.991605581781475e-01,\n\t     9.998991952444470e-01,\n\t     9.999931550702802e-01,\n\t     ],\n\t    [\n\t     0.000000000000000e+00,\n\t     0.000000000000000e+00,\n\t     0.000000000000000e+00,\n\t     0.000000000000000e+00,\n\t     0.000000000000000e+00,\n\t     0.000000000000000e+00,\n\t     2.283748241799531e-13,\n\t     4.037858874020686e-13,\n\t     2.146547464825323e-13,\n\n\t     5.461314069809755e-12,\n\t     4.921085770524055e-12,\n\t     4.343405037091838e-12,\n\t     3.732668368707687e-12,\n\t     3.093523840190885e-12,\n\t     2.430835727329466e-12,\n\t     1.734679010007751e-12,\n\t     9.748253656609281e-13,\n\t     2.797435120168326e-13,\n\n\t     -5.456116108943413e-12,\n\t     -4.878985199565852e-12,\n\t     -4.240448995017367e-12,\n\t     -3.559909094758253e-12,\n\t     -2.858043359288075e-12,\n\t     -2.156177623817898e-12,\n\t     -1.475637723558782e-12,\n\t     -8.371015190102975e-13,\n\t     -2.599706096327376e-13,\n\n\t     -2.382191739347913e-13,\n\t     -6.423305872147834e-13,\n\t     -9.400849094049688e-13,\n\t     -1.122435026096556e-12,\n\t     -1.183840321267481e-12,\n\t     -1.122435026096556e-12,\n\t     -9.400849094049688e-13,\n\t     -6.423305872147841e-13,\n\t     -2.382191739347918e-13,\n\t     ]\n\t];\n\n\tvar tantab_l = win[Encoder.SHORT_TYPE];\n\tvar cx = win[Encoder.SHORT_TYPE];\n\tvar ca = win[Encoder.SHORT_TYPE];\n\tvar cs = win[Encoder.SHORT_TYPE];\n\n\t/**\n\t * new IDCT routine written by Takehiro TOMINAGA\n\t *\n\t * PURPOSE: Overlapping window on PCM samples<BR>\n\t *\n\t * SEMANTICS:<BR>\n\t * 32 16-bit pcm samples are scaled to fractional 2's complement and\n\t * concatenated to the end of the window buffer #x#. The updated window\n\t * buffer #x# is then windowed by the analysis window #c# to produce the\n\t * windowed sample #z#\n\t */\n\tvar order = [\n\t    0, 1, 16, 17, 8, 9, 24, 25, 4, 5, 20, 21, 12, 13, 28, 29,\n\t    2, 3, 18, 19, 10, 11, 26, 27, 6, 7, 22, 23, 14, 15, 30, 31\n\t];\n\n\t/**\n\t * returns sum_j=0^31 a[j]*cos(PI*j*(k+1/2)/32), 0<=k<32\n\t */\n\tfunction window_subband(x1, x1Pos, a) {\n\t\tvar wp = 10;\n\n\t\tvar x2 = x1Pos + 238 - 14 - 286;\n\n\t\tfor (var i = -15; i < 0; i++) {\n\t\t\tvar w, s, t;\n\n\t\t\tw = enwindow[wp + -10];\n\t\t\ts = x1[x2 + -224] * w;\n\t\t\tt = x1[x1Pos + 224] * w;\n\t\t\tw = enwindow[wp + -9];\n\t\t\ts += x1[x2 + -160] * w;\n\t\t\tt += x1[x1Pos + 160] * w;\n\t\t\tw = enwindow[wp + -8];\n\t\t\ts += x1[x2 + -96] * w;\n\t\t\tt += x1[x1Pos + 96] * w;\n\t\t\tw = enwindow[wp + -7];\n\t\t\ts += x1[x2 + -32] * w;\n\t\t\tt += x1[x1Pos + 32] * w;\n\t\t\tw = enwindow[wp + -6];\n\t\t\ts += x1[x2 + 32] * w;\n\t\t\tt += x1[x1Pos + -32] * w;\n\t\t\tw = enwindow[wp + -5];\n\t\t\ts += x1[x2 + 96] * w;\n\t\t\tt += x1[x1Pos + -96] * w;\n\t\t\tw = enwindow[wp + -4];\n\t\t\ts += x1[x2 + 160] * w;\n\t\t\tt += x1[x1Pos + -160] * w;\n\t\t\tw = enwindow[wp + -3];\n\t\t\ts += x1[x2 + 224] * w;\n\t\t\tt += x1[x1Pos + -224] * w;\n\n\t\t\tw = enwindow[wp + -2];\n\t\t\ts += x1[x1Pos + -256] * w;\n\t\t\tt -= x1[x2 + 256] * w;\n\t\t\tw = enwindow[wp + -1];\n\t\t\ts += x1[x1Pos + -192] * w;\n\t\t\tt -= x1[x2 + 192] * w;\n\t\t\tw = enwindow[wp + 0];\n\t\t\ts += x1[x1Pos + -128] * w;\n\t\t\tt -= x1[x2 + 128] * w;\n\t\t\tw = enwindow[wp + 1];\n\t\t\ts += x1[x1Pos + -64] * w;\n\t\t\tt -= x1[x2 + 64] * w;\n\t\t\tw = enwindow[wp + 2];\n\t\t\ts += x1[x1Pos + 0] * w;\n\t\t\tt -= x1[x2 + 0] * w;\n\t\t\tw = enwindow[wp + 3];\n\t\t\ts += x1[x1Pos + 64] * w;\n\t\t\tt -= x1[x2 + -64] * w;\n\t\t\tw = enwindow[wp + 4];\n\t\t\ts += x1[x1Pos + 128] * w;\n\t\t\tt -= x1[x2 + -128] * w;\n\t\t\tw = enwindow[wp + 5];\n\t\t\ts += x1[x1Pos + 192] * w;\n\t\t\tt -= x1[x2 + -192] * w;\n\n\t\t\t/*\n\t\t\t * this multiplyer could be removed, but it needs more 256 FLOAT\n\t\t\t * data. thinking about the data cache performance, I think we\n\t\t\t * should not use such a huge table. tt 2000/Oct/25\n\t\t\t */\n\t\t\ts *= enwindow[wp + 6];\n\t\t\tw = t - s;\n\t\t\ta[30 + i * 2] = t + s;\n\t\t\ta[31 + i * 2] = enwindow[wp + 7] * w;\n\t\t\twp += 18;\n\t\t\tx1Pos--;\n\t\t\tx2++;\n\t\t}\n\t\t{\n\t\t\tvar s, t, u, v;\n\t\t\tt = x1[x1Pos + -16] * enwindow[wp + -10];\n\t\t\ts = x1[x1Pos + -32] * enwindow[wp + -2];\n\t\t\tt += (x1[x1Pos + -48] - x1[x1Pos + 16]) * enwindow[wp + -9];\n\t\t\ts += x1[x1Pos + -96] * enwindow[wp + -1];\n\t\t\tt += (x1[x1Pos + -80] + x1[x1Pos + 48]) * enwindow[wp + -8];\n\t\t\ts += x1[x1Pos + -160] * enwindow[wp + 0];\n\t\t\tt += (x1[x1Pos + -112] - x1[x1Pos + 80]) * enwindow[wp + -7];\n\t\t\ts += x1[x1Pos + -224] * enwindow[wp + 1];\n\t\t\tt += (x1[x1Pos + -144] + x1[x1Pos + 112]) * enwindow[wp + -6];\n\t\t\ts -= x1[x1Pos + 32] * enwindow[wp + 2];\n\t\t\tt += (x1[x1Pos + -176] - x1[x1Pos + 144]) * enwindow[wp + -5];\n\t\t\ts -= x1[x1Pos + 96] * enwindow[wp + 3];\n\t\t\tt += (x1[x1Pos + -208] + x1[x1Pos + 176]) * enwindow[wp + -4];\n\t\t\ts -= x1[x1Pos + 160] * enwindow[wp + 4];\n\t\t\tt += (x1[x1Pos + -240] - x1[x1Pos + 208]) * enwindow[wp + -3];\n\t\t\ts -= x1[x1Pos + 224];\n\n\t\t\tu = s - t;\n\t\t\tv = s + t;\n\n\t\t\tt = a[14];\n\t\t\ts = a[15] - t;\n\n\t\t\ta[31] = v + t; /* A0 */\n\t\t\ta[30] = u + s; /* A1 */\n\t\t\ta[15] = u - s; /* A2 */\n\t\t\ta[14] = v - t; /* A3 */\n\t\t}\n\t\t{\n\t\t\tvar xr;\n\t\t\txr = a[28] - a[0];\n\t\t\ta[0] += a[28];\n\t\t\ta[28] = xr * enwindow[wp + -2 * 18 + 7];\n\t\t\txr = a[29] - a[1];\n\t\t\ta[1] += a[29];\n\t\t\ta[29] = xr * enwindow[wp + -2 * 18 + 7];\n\n\t\t\txr = a[26] - a[2];\n\t\t\ta[2] += a[26];\n\t\t\ta[26] = xr * enwindow[wp + -4 * 18 + 7];\n\t\t\txr = a[27] - a[3];\n\t\t\ta[3] += a[27];\n\t\t\ta[27] = xr * enwindow[wp + -4 * 18 + 7];\n\n\t\t\txr = a[24] - a[4];\n\t\t\ta[4] += a[24];\n\t\t\ta[24] = xr * enwindow[wp + -6 * 18 + 7];\n\t\t\txr = a[25] - a[5];\n\t\t\ta[5] += a[25];\n\t\t\ta[25] = xr * enwindow[wp + -6 * 18 + 7];\n\n\t\t\txr = a[22] - a[6];\n\t\t\ta[6] += a[22];\n\t\t\ta[22] = xr * Util.SQRT2;\n\t\t\txr = a[23] - a[7];\n\t\t\ta[7] += a[23];\n\t\t\ta[23] = xr * Util.SQRT2 - a[7];\n\t\t\ta[7] -= a[6];\n\t\t\ta[22] -= a[7];\n\t\t\ta[23] -= a[22];\n\n\t\t\txr = a[6];\n\t\t\ta[6] = a[31] - xr;\n\t\t\ta[31] = a[31] + xr;\n\t\t\txr = a[7];\n\t\t\ta[7] = a[30] - xr;\n\t\t\ta[30] = a[30] + xr;\n\t\t\txr = a[22];\n\t\t\ta[22] = a[15] - xr;\n\t\t\ta[15] = a[15] + xr;\n\t\t\txr = a[23];\n\t\t\ta[23] = a[14] - xr;\n\t\t\ta[14] = a[14] + xr;\n\n\t\t\txr = a[20] - a[8];\n\t\t\ta[8] += a[20];\n\t\t\ta[20] = xr * enwindow[wp + -10 * 18 + 7];\n\t\t\txr = a[21] - a[9];\n\t\t\ta[9] += a[21];\n\t\t\ta[21] = xr * enwindow[wp + -10 * 18 + 7];\n\n\t\t\txr = a[18] - a[10];\n\t\t\ta[10] += a[18];\n\t\t\ta[18] = xr * enwindow[wp + -12 * 18 + 7];\n\t\t\txr = a[19] - a[11];\n\t\t\ta[11] += a[19];\n\t\t\ta[19] = xr * enwindow[wp + -12 * 18 + 7];\n\n\t\t\txr = a[16] - a[12];\n\t\t\ta[12] += a[16];\n\t\t\ta[16] = xr * enwindow[wp + -14 * 18 + 7];\n\t\t\txr = a[17] - a[13];\n\t\t\ta[13] += a[17];\n\t\t\ta[17] = xr * enwindow[wp + -14 * 18 + 7];\n\n\t\t\txr = -a[20] + a[24];\n\t\t\ta[20] += a[24];\n\t\t\ta[24] = xr * enwindow[wp + -12 * 18 + 7];\n\t\t\txr = -a[21] + a[25];\n\t\t\ta[21] += a[25];\n\t\t\ta[25] = xr * enwindow[wp + -12 * 18 + 7];\n\n\t\t\txr = a[4] - a[8];\n\t\t\ta[4] += a[8];\n\t\t\ta[8] = xr * enwindow[wp + -12 * 18 + 7];\n\t\t\txr = a[5] - a[9];\n\t\t\ta[5] += a[9];\n\t\t\ta[9] = xr * enwindow[wp + -12 * 18 + 7];\n\n\t\t\txr = a[0] - a[12];\n\t\t\ta[0] += a[12];\n\t\t\ta[12] = xr * enwindow[wp + -4 * 18 + 7];\n\t\t\txr = a[1] - a[13];\n\t\t\ta[1] += a[13];\n\t\t\ta[13] = xr * enwindow[wp + -4 * 18 + 7];\n\t\t\txr = a[16] - a[28];\n\t\t\ta[16] += a[28];\n\t\t\ta[28] = xr * enwindow[wp + -4 * 18 + 7];\n\t\t\txr = -a[17] + a[29];\n\t\t\ta[17] += a[29];\n\t\t\ta[29] = xr * enwindow[wp + -4 * 18 + 7];\n\n\t\t\txr = Util.SQRT2 * (a[2] - a[10]);\n\t\t\ta[2] += a[10];\n\t\t\ta[10] = xr;\n\t\t\txr = Util.SQRT2 * (a[3] - a[11]);\n\t\t\ta[3] += a[11];\n\t\t\ta[11] = xr;\n\t\t\txr = Util.SQRT2 * (-a[18] + a[26]);\n\t\t\ta[18] += a[26];\n\t\t\ta[26] = xr - a[18];\n\t\t\txr = Util.SQRT2 * (-a[19] + a[27]);\n\t\t\ta[19] += a[27];\n\t\t\ta[27] = xr - a[19];\n\n\t\t\txr = a[2];\n\t\t\ta[19] -= a[3];\n\t\t\ta[3] -= xr;\n\t\t\ta[2] = a[31] - xr;\n\t\t\ta[31] += xr;\n\t\t\txr = a[3];\n\t\t\ta[11] -= a[19];\n\t\t\ta[18] -= xr;\n\t\t\ta[3] = a[30] - xr;\n\t\t\ta[30] += xr;\n\t\t\txr = a[18];\n\t\t\ta[27] -= a[11];\n\t\t\ta[19] -= xr;\n\t\t\ta[18] = a[15] - xr;\n\t\t\ta[15] += xr;\n\n\t\t\txr = a[19];\n\t\t\ta[10] -= xr;\n\t\t\ta[19] = a[14] - xr;\n\t\t\ta[14] += xr;\n\t\t\txr = a[10];\n\t\t\ta[11] -= xr;\n\t\t\ta[10] = a[23] - xr;\n\t\t\ta[23] += xr;\n\t\t\txr = a[11];\n\t\t\ta[26] -= xr;\n\t\t\ta[11] = a[22] - xr;\n\t\t\ta[22] += xr;\n\t\t\txr = a[26];\n\t\t\ta[27] -= xr;\n\t\t\ta[26] = a[7] - xr;\n\t\t\ta[7] += xr;\n\n\t\t\txr = a[27];\n\t\t\ta[27] = a[6] - xr;\n\t\t\ta[6] += xr;\n\n\t\t\txr = Util.SQRT2 * (a[0] - a[4]);\n\t\t\ta[0] += a[4];\n\t\t\ta[4] = xr;\n\t\t\txr = Util.SQRT2 * (a[1] - a[5]);\n\t\t\ta[1] += a[5];\n\t\t\ta[5] = xr;\n\t\t\txr = Util.SQRT2 * (a[16] - a[20]);\n\t\t\ta[16] += a[20];\n\t\t\ta[20] = xr;\n\t\t\txr = Util.SQRT2 * (a[17] - a[21]);\n\t\t\ta[17] += a[21];\n\t\t\ta[21] = xr;\n\n\t\t\txr = -Util.SQRT2 * (a[8] - a[12]);\n\t\t\ta[8] += a[12];\n\t\t\ta[12] = xr - a[8];\n\t\t\txr = -Util.SQRT2 * (a[9] - a[13]);\n\t\t\ta[9] += a[13];\n\t\t\ta[13] = xr - a[9];\n\t\t\txr = -Util.SQRT2 * (a[25] - a[29]);\n\t\t\ta[25] += a[29];\n\t\t\ta[29] = xr - a[25];\n\t\t\txr = -Util.SQRT2 * (a[24] + a[28]);\n\t\t\ta[24] -= a[28];\n\t\t\ta[28] = xr - a[24];\n\n\t\t\txr = a[24] - a[16];\n\t\t\ta[24] = xr;\n\t\t\txr = a[20] - xr;\n\t\t\ta[20] = xr;\n\t\t\txr = a[28] - xr;\n\t\t\ta[28] = xr;\n\n\t\t\txr = a[25] - a[17];\n\t\t\ta[25] = xr;\n\t\t\txr = a[21] - xr;\n\t\t\ta[21] = xr;\n\t\t\txr = a[29] - xr;\n\t\t\ta[29] = xr;\n\n\t\t\txr = a[17] - a[1];\n\t\t\ta[17] = xr;\n\t\t\txr = a[9] - xr;\n\t\t\ta[9] = xr;\n\t\t\txr = a[25] - xr;\n\t\t\ta[25] = xr;\n\t\t\txr = a[5] - xr;\n\t\t\ta[5] = xr;\n\t\t\txr = a[21] - xr;\n\t\t\ta[21] = xr;\n\t\t\txr = a[13] - xr;\n\t\t\ta[13] = xr;\n\t\t\txr = a[29] - xr;\n\t\t\ta[29] = xr;\n\n\t\t\txr = a[1] - a[0];\n\t\t\ta[1] = xr;\n\t\t\txr = a[16] - xr;\n\t\t\ta[16] = xr;\n\t\t\txr = a[17] - xr;\n\t\t\ta[17] = xr;\n\t\t\txr = a[8] - xr;\n\t\t\ta[8] = xr;\n\t\t\txr = a[9] - xr;\n\t\t\ta[9] = xr;\n\t\t\txr = a[24] - xr;\n\t\t\ta[24] = xr;\n\t\t\txr = a[25] - xr;\n\t\t\ta[25] = xr;\n\t\t\txr = a[4] - xr;\n\t\t\ta[4] = xr;\n\t\t\txr = a[5] - xr;\n\t\t\ta[5] = xr;\n\t\t\txr = a[20] - xr;\n\t\t\ta[20] = xr;\n\t\t\txr = a[21] - xr;\n\t\t\ta[21] = xr;\n\t\t\txr = a[12] - xr;\n\t\t\ta[12] = xr;\n\t\t\txr = a[13] - xr;\n\t\t\ta[13] = xr;\n\t\t\txr = a[28] - xr;\n\t\t\ta[28] = xr;\n\t\t\txr = a[29] - xr;\n\t\t\ta[29] = xr;\n\n\t\t\txr = a[0];\n\t\t\ta[0] += a[31];\n\t\t\ta[31] -= xr;\n\t\t\txr = a[1];\n\t\t\ta[1] += a[30];\n\t\t\ta[30] -= xr;\n\t\t\txr = a[16];\n\t\t\ta[16] += a[15];\n\t\t\ta[15] -= xr;\n\t\t\txr = a[17];\n\t\t\ta[17] += a[14];\n\t\t\ta[14] -= xr;\n\t\t\txr = a[8];\n\t\t\ta[8] += a[23];\n\t\t\ta[23] -= xr;\n\t\t\txr = a[9];\n\t\t\ta[9] += a[22];\n\t\t\ta[22] -= xr;\n\t\t\txr = a[24];\n\t\t\ta[24] += a[7];\n\t\t\ta[7] -= xr;\n\t\t\txr = a[25];\n\t\t\ta[25] += a[6];\n\t\t\ta[6] -= xr;\n\t\t\txr = a[4];\n\t\t\ta[4] += a[27];\n\t\t\ta[27] -= xr;\n\t\t\txr = a[5];\n\t\t\ta[5] += a[26];\n\t\t\ta[26] -= xr;\n\t\t\txr = a[20];\n\t\t\ta[20] += a[11];\n\t\t\ta[11] -= xr;\n\t\t\txr = a[21];\n\t\t\ta[21] += a[10];\n\t\t\ta[10] -= xr;\n\t\t\txr = a[12];\n\t\t\ta[12] += a[19];\n\t\t\ta[19] -= xr;\n\t\t\txr = a[13];\n\t\t\ta[13] += a[18];\n\t\t\ta[18] -= xr;\n\t\t\txr = a[28];\n\t\t\ta[28] += a[3];\n\t\t\ta[3] -= xr;\n\t\t\txr = a[29];\n\t\t\ta[29] += a[2];\n\t\t\ta[2] -= xr;\n\t\t}\n\t}\n\n\t/**\n\t * Function: Calculation of the MDCT In the case of long blocks (type 0,1,3)\n\t * there are 36 coefficents in the time domain and 18 in the frequency\n\t * domain.<BR>\n\t * In the case of short blocks (type 2) there are 3 transformations with\n\t * short length. This leads to 12 coefficents in the time and 6 in the\n\t * frequency domain. In this case the results are stored side by side in the\n\t * vector out[].\n\t *\n\t * New layer3\n\t */\n\tfunction mdct_short(inout, inoutPos) {\n\t\tfor (var l = 0; l < 3; l++) {\n\t\t\tvar tc0, tc1, tc2, ts0, ts1, ts2;\n\n\t\t\tts0 = inout[inoutPos + 2 * 3] * win[Encoder.SHORT_TYPE][0]\n\t\t\t\t\t- inout[inoutPos + 5 * 3];\n\t\t\ttc0 = inout[inoutPos + 0 * 3] * win[Encoder.SHORT_TYPE][2]\n\t\t\t\t\t- inout[inoutPos + 3 * 3];\n\t\t\ttc1 = ts0 + tc0;\n\t\t\ttc2 = ts0 - tc0;\n\n\t\t\tts0 = inout[inoutPos + 5 * 3] * win[Encoder.SHORT_TYPE][0]\n\t\t\t\t\t+ inout[inoutPos + 2 * 3];\n\t\t\ttc0 = inout[inoutPos + 3 * 3] * win[Encoder.SHORT_TYPE][2]\n\t\t\t\t\t+ inout[inoutPos + 0 * 3];\n\t\t\tts1 = ts0 + tc0;\n\t\t\tts2 = -ts0 + tc0;\n\n\t\t\ttc0 = (inout[inoutPos + 1 * 3] * win[Encoder.SHORT_TYPE][1] - inout[inoutPos + 4 * 3]) * 2.069978111953089e-11;\n\t\t\t/*\n\t\t\t * tritab_s [ 1 ]\n\t\t\t */\n\t\t\tts0 = (inout[inoutPos + 4 * 3] * win[Encoder.SHORT_TYPE][1] + inout[inoutPos + 1 * 3]) * 2.069978111953089e-11;\n\t\t\t/*\n\t\t\t * tritab_s [ 1 ]\n\t\t\t */\n\t\t\tinout[inoutPos + 3 * 0] = tc1 * 1.907525191737280e-11 + tc0;\n\t\t\t/*\n\t\t\t * tritab_s[ 2 ]\n\t\t\t */\n\t\t\tinout[inoutPos + 3 * 5] = -ts1 * 1.907525191737280e-11 + ts0;\n\t\t\t/*\n\t\t\t * tritab_s[0 ]\n\t\t\t */\n\t\t\ttc2 = tc2 * 0.86602540378443870761 * 1.907525191737281e-11;\n\t\t\t/*\n\t\t\t * tritab_s[ 2]\n\t\t\t */\n\t\t\tts1 = ts1 * 0.5 * 1.907525191737281e-11 + ts0;\n\t\t\tinout[inoutPos + 3 * 1] = tc2 - ts1;\n\t\t\tinout[inoutPos + 3 * 2] = tc2 + ts1;\n\n\t\t\ttc1 = tc1 * 0.5 * 1.907525191737281e-11 - tc0;\n\t\t\tts2 = ts2 * 0.86602540378443870761 * 1.907525191737281e-11;\n\t\t\t/*\n\t\t\t * tritab_s[ 0]\n\t\t\t */\n\t\t\tinout[inoutPos + 3 * 3] = tc1 + ts2;\n\t\t\tinout[inoutPos + 3 * 4] = tc1 - ts2;\n\n\t\t\tinoutPos++;\n\t\t}\n\t}\n\n\tfunction mdct_long(out, outPos, _in) {\n\t\tvar ct, st;\n\t\t{\n\t\t\tvar tc1, tc2, tc3, tc4, ts5, ts6, ts7, ts8;\n\t\t\t/* 1,2, 5,6, 9,10, 13,14, 17 */\n\t\t\ttc1 = _in[17] - _in[9];\n\t\t\ttc3 = _in[15] - _in[11];\n\t\t\ttc4 = _in[14] - _in[12];\n\t\t\tts5 = _in[0] + _in[8];\n\t\t\tts6 = _in[1] + _in[7];\n\t\t\tts7 = _in[2] + _in[6];\n\t\t\tts8 = _in[3] + _in[5];\n\n\t\t\tout[outPos + 17] = (ts5 + ts7 - ts8) - (ts6 - _in[4]);\n\t\t\tst = (ts5 + ts7 - ts8) * cx[12 + 7] + (ts6 - _in[4]);\n\t\t\tct = (tc1 - tc3 - tc4) * cx[12 + 6];\n\t\t\tout[outPos + 5] = ct + st;\n\t\t\tout[outPos + 6] = ct - st;\n\n\t\t\ttc2 = (_in[16] - _in[10]) * cx[12 + 6];\n\t\t\tts6 = ts6 * cx[12 + 7] + _in[4];\n\t\t\tct = tc1 * cx[12 + 0] + tc2 + tc3 * cx[12 + 1] + tc4 * cx[12 + 2];\n\t\t\tst = -ts5 * cx[12 + 4] + ts6 - ts7 * cx[12 + 5] + ts8 * cx[12 + 3];\n\t\t\tout[outPos + 1] = ct + st;\n\t\t\tout[outPos + 2] = ct - st;\n\n\t\t\tct = tc1 * cx[12 + 1] - tc2 - tc3 * cx[12 + 2] + tc4 * cx[12 + 0];\n\t\t\tst = -ts5 * cx[12 + 5] + ts6 - ts7 * cx[12 + 3] + ts8 * cx[12 + 4];\n\t\t\tout[outPos + 9] = ct + st;\n\t\t\tout[outPos + 10] = ct - st;\n\n\t\t\tct = tc1 * cx[12 + 2] - tc2 + tc3 * cx[12 + 0] - tc4 * cx[12 + 1];\n\t\t\tst = ts5 * cx[12 + 3] - ts6 + ts7 * cx[12 + 4] - ts8 * cx[12 + 5];\n\t\t\tout[outPos + 13] = ct + st;\n\t\t\tout[outPos + 14] = ct - st;\n\t\t}\n\t\t{\n\t\t\tvar ts1, ts2, ts3, ts4, tc5, tc6, tc7, tc8;\n\n\t\t\tts1 = _in[8] - _in[0];\n\t\t\tts3 = _in[6] - _in[2];\n\t\t\tts4 = _in[5] - _in[3];\n\t\t\ttc5 = _in[17] + _in[9];\n\t\t\ttc6 = _in[16] + _in[10];\n\t\t\ttc7 = _in[15] + _in[11];\n\t\t\ttc8 = _in[14] + _in[12];\n\n\t\t\tout[outPos + 0] = (tc5 + tc7 + tc8) + (tc6 + _in[13]);\n\t\t\tct = (tc5 + tc7 + tc8) * cx[12 + 7] - (tc6 + _in[13]);\n\t\t\tst = (ts1 - ts3 + ts4) * cx[12 + 6];\n\t\t\tout[outPos + 11] = ct + st;\n\t\t\tout[outPos + 12] = ct - st;\n\n\t\t\tts2 = (_in[7] - _in[1]) * cx[12 + 6];\n\t\t\ttc6 = _in[13] - tc6 * cx[12 + 7];\n\t\t\tct = tc5 * cx[12 + 3] - tc6 + tc7 * cx[12 + 4] + tc8 * cx[12 + 5];\n\t\t\tst = ts1 * cx[12 + 2] + ts2 + ts3 * cx[12 + 0] + ts4 * cx[12 + 1];\n\t\t\tout[outPos + 3] = ct + st;\n\t\t\tout[outPos + 4] = ct - st;\n\n\t\t\tct = -tc5 * cx[12 + 5] + tc6 - tc7 * cx[12 + 3] - tc8 * cx[12 + 4];\n\t\t\tst = ts1 * cx[12 + 1] + ts2 - ts3 * cx[12 + 2] - ts4 * cx[12 + 0];\n\t\t\tout[outPos + 7] = ct + st;\n\t\t\tout[outPos + 8] = ct - st;\n\n\t\t\tct = -tc5 * cx[12 + 4] + tc6 - tc7 * cx[12 + 5] - tc8 * cx[12 + 3];\n\t\t\tst = ts1 * cx[12 + 0] - ts2 + ts3 * cx[12 + 1] - ts4 * cx[12 + 2];\n\t\t\tout[outPos + 15] = ct + st;\n\t\t\tout[outPos + 16] = ct - st;\n\t\t}\n\t}\n\n\tthis.mdct_sub48 = function(gfc, w0, w1) {\n\t\tvar wk = w0;\n\t\tvar wkPos = 286;\n\t\t/* thinking cache performance, ch->gr loop is better than gr->ch loop */\n\t\tfor (var ch = 0; ch < gfc.channels_out; ch++) {\n\t\t\tfor (var gr = 0; gr < gfc.mode_gr; gr++) {\n\t\t\t\tvar band;\n\t\t\t\tvar gi = (gfc.l3_side.tt[gr][ch]);\n\t\t\t\tvar mdct_enc = gi.xr;\n\t\t\t\tvar mdct_encPos = 0;\n\t\t\t\tvar samp = gfc.sb_sample[ch][1 - gr];\n\t\t\t\tvar sampPos = 0;\n\n\t\t\t\tfor (var k = 0; k < 18 / 2; k++) {\n\t\t\t\t\twindow_subband(wk, wkPos, samp[sampPos]);\n\t\t\t\t\twindow_subband(wk, wkPos + 32, samp[sampPos + 1]);\n\t\t\t\t\tsampPos += 2;\n\t\t\t\t\twkPos += 64;\n\t\t\t\t\t/*\n\t\t\t\t\t * Compensate for inversion in the analysis filter\n\t\t\t\t\t */\n\t\t\t\t\tfor (band = 1; band < 32; band += 2) {\n\t\t\t\t\t\tsamp[sampPos - 1][band] *= -1;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/*\n\t\t\t\t * Perform imdct of 18 previous subband samples + 18 current\n\t\t\t\t * subband samples\n\t\t\t\t */\n\t\t\t\tfor (band = 0; band < 32; band++, mdct_encPos += 18) {\n\t\t\t\t\tvar type = gi.block_type;\n\t\t\t\t\tvar band0 = gfc.sb_sample[ch][gr];\n\t\t\t\t\tvar band1 = gfc.sb_sample[ch][1 - gr];\n\t\t\t\t\tif (gi.mixed_block_flag != 0 && band < 2)\n\t\t\t\t\t\ttype = 0;\n\t\t\t\t\tif (gfc.amp_filter[band] < 1e-12) {\n\t\t\t\t\t\tArrays.fill(mdct_enc, mdct_encPos + 0,\n\t\t\t\t\t\t\t\tmdct_encPos + 18, 0);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (gfc.amp_filter[band] < 1.0) {\n\t\t\t\t\t\t\tfor (var k = 0; k < 18; k++)\n\t\t\t\t\t\t\t\tband1[k][order[band]] *= gfc.amp_filter[band];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (type == Encoder.SHORT_TYPE) {\n\t\t\t\t\t\t\tfor (var k = -NS / 4; k < 0; k++) {\n\t\t\t\t\t\t\t\tvar w = win[Encoder.SHORT_TYPE][k + 3];\n\t\t\t\t\t\t\t\tmdct_enc[mdct_encPos + k * 3 + 9] = band0[9 + k][order[band]]\n\t\t\t\t\t\t\t\t\t\t* w - band0[8 - k][order[band]];\n\t\t\t\t\t\t\t\tmdct_enc[mdct_encPos + k * 3 + 18] = band0[14 - k][order[band]]\n\t\t\t\t\t\t\t\t\t\t* w + band0[15 + k][order[band]];\n\t\t\t\t\t\t\t\tmdct_enc[mdct_encPos + k * 3 + 10] = band0[15 + k][order[band]]\n\t\t\t\t\t\t\t\t\t\t* w - band0[14 - k][order[band]];\n\t\t\t\t\t\t\t\tmdct_enc[mdct_encPos + k * 3 + 19] = band1[2 - k][order[band]]\n\t\t\t\t\t\t\t\t\t\t* w + band1[3 + k][order[band]];\n\t\t\t\t\t\t\t\tmdct_enc[mdct_encPos + k * 3 + 11] = band1[3 + k][order[band]]\n\t\t\t\t\t\t\t\t\t\t* w - band1[2 - k][order[band]];\n\t\t\t\t\t\t\t\tmdct_enc[mdct_encPos + k * 3 + 20] = band1[8 - k][order[band]]\n\t\t\t\t\t\t\t\t\t\t* w + band1[9 + k][order[band]];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tmdct_short(mdct_enc, mdct_encPos);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar work = new_float(18);\n\t\t\t\t\t\t\tfor (var k = -NL / 4; k < 0; k++) {\n\t\t\t\t\t\t\t\tvar a, b;\n\t\t\t\t\t\t\t\ta = win[type][k + 27]\n\t\t\t\t\t\t\t\t\t\t* band1[k + 9][order[band]]\n\t\t\t\t\t\t\t\t\t\t+ win[type][k + 36]\n\t\t\t\t\t\t\t\t\t\t* band1[8 - k][order[band]];\n\t\t\t\t\t\t\t\tb = win[type][k + 9]\n\t\t\t\t\t\t\t\t\t\t* band0[k + 9][order[band]]\n\t\t\t\t\t\t\t\t\t\t- win[type][k + 18]\n\t\t\t\t\t\t\t\t\t\t* band0[8 - k][order[band]];\n\t\t\t\t\t\t\t\twork[k + 9] = a - b * tantab_l[3 + k + 9];\n\t\t\t\t\t\t\t\twork[k + 18] = a * tantab_l[3 + k + 9] + b;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tmdct_long(mdct_enc, mdct_encPos, work);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t/*\n\t\t\t\t\t * Perform aliasing reduction butterfly\n\t\t\t\t\t */\n\t\t\t\t\tif (type != Encoder.SHORT_TYPE && band != 0) {\n\t\t\t\t\t\tfor (var k = 7; k >= 0; --k) {\n\t\t\t\t\t\t\tvar bu, bd;\n\t\t\t\t\t\t\tbu = mdct_enc[mdct_encPos + k] * ca[20 + k]\n\t\t\t\t\t\t\t\t\t+ mdct_enc[mdct_encPos + -1 - k]\n\t\t\t\t\t\t\t\t\t* cs[28 + k];\n\t\t\t\t\t\t\tbd = mdct_enc[mdct_encPos + k] * cs[28 + k]\n\t\t\t\t\t\t\t\t\t- mdct_enc[mdct_encPos + -1 - k]\n\t\t\t\t\t\t\t\t\t* ca[20 + k];\n\n\t\t\t\t\t\t\tmdct_enc[mdct_encPos + -1 - k] = bu;\n\t\t\t\t\t\t\tmdct_enc[mdct_encPos + k] = bd;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\twk = w1;\n\t\t\twkPos = 286;\n\t\t\tif (gfc.mode_gr == 1) {\n\t\t\t\tfor (var i = 0; i < 18; i++) {\n\t\t\t\t\tSystem.arraycopy(gfc.sb_sample[ch][1][i], 0,\n\t\t\t\t\t\t\tgfc.sb_sample[ch][0][i], 0, 32);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nmodule.exports = NewMDCT;\n","var Encoder = require('./Encoder.js');\nvar common = require('./common.js');\nvar System = common.System;\nvar VbrMode = common.VbrMode;\nvar Float = common.Float;\nvar ShortBlock = common.ShortBlock;\nvar Util = common.Util;\nvar Arrays = common.Arrays;\nvar new_array_n = common.new_array_n;\nvar new_byte = common.new_byte;\nvar new_double = common.new_double;\nvar new_float = common.new_float;\nvar new_float_n = common.new_float_n;\nvar new_int = common.new_int;\nvar new_int_n = common.new_int_n;\nvar assert = common.assert;\n\nfunction III_psy_xmin() {\n    this.l = new_float(Encoder.SBMAX_l);\n    this.s = new_float_n([Encoder.SBMAX_s, 3]);\n\n    var self = this;\n    this.assign = function (iii_psy_xmin) {\n        System.arraycopy(iii_psy_xmin.l, 0, self.l, 0, Encoder.SBMAX_l);\n        for (var i = 0; i < Encoder.SBMAX_s; i++) {\n            for (var j = 0; j < 3; j++) {\n                self.s[i][j] = iii_psy_xmin.s[i][j];\n            }\n        }\n    }\n}\n\nmodule.exports = III_psy_xmin;\n","//package mp3;\n\nvar III_psy_xmin = require('./III_psy_xmin.js');\n\nfunction III_psy_ratio() {\n\tthis.thm = new III_psy_xmin();\n\tthis.en = new III_psy_xmin();\n}\n\nmodule.exports = III_psy_ratio;\n","var common = require('./common.js');\nvar System = common.System;\nvar VbrMode = common.VbrMode;\nvar Float = common.Float;\nvar ShortBlock = common.ShortBlock;\nvar Util = common.Util;\nvar Arrays = common.Arrays;\nvar new_array_n = common.new_array_n;\nvar new_byte = common.new_byte;\nvar new_double = common.new_double;\nvar new_float = common.new_float;\nvar new_float_n = common.new_float_n;\nvar new_int = common.new_int;\nvar new_int_n = common.new_int_n;\nvar assert = common.assert;\n\n/**\n * ENCDELAY The encoder delay.\n *\n * Minimum allowed is MDCTDELAY (see below)\n *\n * The first 96 samples will be attenuated, so using a value less than 96\n * will result in corrupt data for the first 96-ENCDELAY samples.\n *\n * suggested: 576 set to 1160 to sync with FhG.\n */\nEncoder.ENCDELAY = 576;\n/**\n * make sure there is at least one complete frame after the last frame\n * containing real data\n *\n * Using a value of 288 would be sufficient for a a very sophisticated\n * decoder that can decode granule-by-granule instead of frame by frame. But\n * lets not assume this, and assume the decoder will not decode frame N\n * unless it also has data for frame N+1\n */\nEncoder.POSTDELAY = 1152;\n\n/**\n * delay of the MDCT used in mdct.c original ISO routines had a delay of\n * 528! Takehiro's routines:\n */\nEncoder.MDCTDELAY = 48;\nEncoder.FFTOFFSET = (224 + Encoder.MDCTDELAY);\n\n/**\n * Most decoders, including the one we use, have a delay of 528 samples.\n */\nEncoder.DECDELAY = 528;\n\n/**\n * number of subbands\n */\nEncoder.SBLIMIT = 32;\n\n/**\n * parition bands bands\n */\nEncoder.CBANDS = 64;\n\n/**\n * number of critical bands/scale factor bands where masking is computed\n */\nEncoder.SBPSY_l = 21;\nEncoder.SBPSY_s = 12;\n\n/**\n * total number of scalefactor bands encoded\n */\nEncoder.SBMAX_l = 22;\nEncoder.SBMAX_s = 13;\nEncoder.PSFB21 = 6;\nEncoder.PSFB12 = 6;\n\n/**\n * FFT sizes\n */\nEncoder.BLKSIZE = 1024;\nEncoder.HBLKSIZE = (Encoder.BLKSIZE / 2 + 1);\nEncoder.BLKSIZE_s = 256;\nEncoder.HBLKSIZE_s = (Encoder.BLKSIZE_s / 2 + 1);\n\nEncoder.NORM_TYPE = 0;\nEncoder.START_TYPE = 1;\nEncoder.SHORT_TYPE = 2;\nEncoder.STOP_TYPE = 3;\n\n/**\n * <PRE>\n * Mode Extention:\n * When we are in stereo mode, there are 4 possible methods to store these\n * two channels. The stereo modes -m? are using a subset of them.\n *\n *  -ms: MPG_MD_LR_LR\n *  -mj: MPG_MD_LR_LR and MPG_MD_MS_LR\n *  -mf: MPG_MD_MS_LR\n *  -mi: all\n * </PRE>\n */\nEncoder.MPG_MD_LR_LR = 0;\nEncoder.MPG_MD_LR_I = 1;\nEncoder.MPG_MD_MS_LR = 2;\nEncoder.MPG_MD_MS_I = 3;\n\nEncoder.fircoef = [-0.0207887 * 5, -0.0378413 * 5,\n    -0.0432472 * 5, -0.031183 * 5, 7.79609e-18 * 5, 0.0467745 * 5,\n    0.10091 * 5, 0.151365 * 5, 0.187098 * 5];\n\nfunction Encoder() {\n    var NewMDCT = require('./NewMDCT.js');\n    var III_psy_ratio = require('./III_psy_ratio.js');\n\n    var FFTOFFSET = Encoder.FFTOFFSET;\n    var MPG_MD_MS_LR = Encoder.MPG_MD_MS_LR;\n    //BitStream bs;\n    //PsyModel psy;\n    //VBRTag vbr;\n    //QuantizePVT qupvt;\n    var bs = null;\n    this.psy = null;\n    var psy = null;\n    var vbr = null;\n    var qupvt = null;\n\n    //public final void setModules(BitStream bs, PsyModel psy, QuantizePVT qupvt,\n    //    VBRTag vbr) {\n    this.setModules = function (_bs, _psy, _qupvt, _vbr) {\n        bs = _bs;\n        this.psy = _psy;\n        psy = _psy;\n        vbr = _vbr;\n        qupvt = _qupvt;\n    };\n\n    var newMDCT = new NewMDCT();\n\n    /***********************************************************************\n     *\n     * encoder and decoder delays\n     *\n     ***********************************************************************/\n\n    /**\n     * <PRE>\n     * layer III enc->dec delay:  1056 (1057?)   (observed)\n     * layer  II enc->dec delay:   480  (481?)   (observed)\n     *\n     * polyphase 256-16             (dec or enc)        = 240\n     * mdct      256+32  (9*32)     (dec or enc)        = 288\n     * total:    512+16\n     *\n     * My guess is that delay of polyphase filterbank is actualy 240.5\n     * (there are technical reasons for this, see postings in mp3encoder).\n     * So total Encode+Decode delay = ENCDELAY + 528 + 1\n     * </PRE>\n     */\n\n\n    /**\n     * auto-adjust of ATH, useful for low volume Gabriel Bouvigne 3 feb 2001\n     *\n     * modifies some values in gfp.internal_flags.ATH (gfc.ATH)\n     */\n//private void adjust_ATH(final LameInternalFlags gfc) {\n    function adjust_ATH(gfc) {\n        var gr2_max, max_pow;\n\n        if (gfc.ATH.useAdjust == 0) {\n            gfc.ATH.adjust = 1.0;\n            /* no adjustment */\n            return;\n        }\n\n        /* jd - 2001 mar 12, 27, jun 30 */\n        /* loudness based on equal loudness curve; */\n        /* use granule with maximum combined loudness */\n        max_pow = gfc.loudness_sq[0][0];\n        gr2_max = gfc.loudness_sq[1][0];\n        if (gfc.channels_out == 2) {\n            max_pow += gfc.loudness_sq[0][1];\n            gr2_max += gfc.loudness_sq[1][1];\n        } else {\n            max_pow += max_pow;\n            gr2_max += gr2_max;\n        }\n        if (gfc.mode_gr == 2) {\n            max_pow = Math.max(max_pow, gr2_max);\n        }\n        max_pow *= 0.5;\n        /* max_pow approaches 1.0 for full band noise */\n\n        /* jd - 2001 mar 31, jun 30 */\n        /* user tuning of ATH adjustment region */\n        max_pow *= gfc.ATH.aaSensitivityP;\n\n        /*\n         * adjust ATH depending on range of maximum value\n         */\n\n        /* jd - 2001 feb27, mar12,20, jun30, jul22 */\n        /* continuous curves based on approximation */\n        /* to GB's original values. */\n        /* For an increase in approximate loudness, */\n        /* set ATH adjust to adjust_limit immediately */\n        /* after a delay of one frame. */\n        /* For a loudness decrease, reduce ATH adjust */\n        /* towards adjust_limit gradually. */\n        /* max_pow is a loudness squared or a power. */\n        if (max_pow > 0.03125) { /* ((1 - 0.000625)/ 31.98) from curve below */\n            if (gfc.ATH.adjust >= 1.0) {\n                gfc.ATH.adjust = 1.0;\n            } else {\n                /* preceding frame has lower ATH adjust; */\n                /* ascend only to the preceding adjust_limit */\n                /* in case there is leading low volume */\n                if (gfc.ATH.adjust < gfc.ATH.adjustLimit) {\n                    gfc.ATH.adjust = gfc.ATH.adjustLimit;\n                }\n            }\n            gfc.ATH.adjustLimit = 1.0;\n        } else { /* adjustment curve */\n            /* about 32 dB maximum adjust (0.000625) */\n            var adj_lim_new = 31.98 * max_pow + 0.000625;\n            if (gfc.ATH.adjust >= adj_lim_new) { /* descend gradually */\n                gfc.ATH.adjust *= adj_lim_new * 0.075 + 0.925;\n                if (gfc.ATH.adjust < adj_lim_new) { /* stop descent */\n                    gfc.ATH.adjust = adj_lim_new;\n                }\n            } else { /* ascend */\n                if (gfc.ATH.adjustLimit >= adj_lim_new) {\n                    gfc.ATH.adjust = adj_lim_new;\n                } else {\n                    /* preceding frame has lower ATH adjust; */\n                    /* ascend only to the preceding adjust_limit */\n                    if (gfc.ATH.adjust < gfc.ATH.adjustLimit) {\n                        gfc.ATH.adjust = gfc.ATH.adjustLimit;\n                    }\n                }\n            }\n            gfc.ATH.adjustLimit = adj_lim_new;\n        }\n    }\n\n    /**\n     * <PRE>\n     *  some simple statistics\n     *\n     *  bitrate index 0: free bitrate . not allowed in VBR mode\n     *  : bitrates, kbps depending on MPEG version\n     *  bitrate index 15: forbidden\n     *\n     *  mode_ext:\n     *  0:  LR\n     *  1:  LR-i\n     *  2:  MS\n     *  3:  MS-i\n     * </PRE>\n     */\n    function updateStats(gfc) {\n        var gr, ch;\n        assert(0 <= gfc.bitrate_index && gfc.bitrate_index < 16);\n        assert(0 <= gfc.mode_ext && gfc.mode_ext < 4);\n\n        /* count bitrate indices */\n        gfc.bitrate_stereoMode_Hist[gfc.bitrate_index][4]++;\n        gfc.bitrate_stereoMode_Hist[15][4]++;\n\n        /* count 'em for every mode extension in case of 2 channel encoding */\n        if (gfc.channels_out == 2) {\n            gfc.bitrate_stereoMode_Hist[gfc.bitrate_index][gfc.mode_ext]++;\n            gfc.bitrate_stereoMode_Hist[15][gfc.mode_ext]++;\n        }\n        for (gr = 0; gr < gfc.mode_gr; ++gr) {\n            for (ch = 0; ch < gfc.channels_out; ++ch) {\n                var bt = gfc.l3_side.tt[gr][ch].block_type | 0;\n                if (gfc.l3_side.tt[gr][ch].mixed_block_flag != 0)\n                    bt = 4;\n                gfc.bitrate_blockType_Hist[gfc.bitrate_index][bt]++;\n                gfc.bitrate_blockType_Hist[gfc.bitrate_index][5]++;\n                gfc.bitrate_blockType_Hist[15][bt]++;\n                gfc.bitrate_blockType_Hist[15][5]++;\n            }\n        }\n    }\n\n    function lame_encode_frame_init(gfp, inbuf) {\n        var gfc = gfp.internal_flags;\n\n        var ch, gr;\n\n        if (gfc.lame_encode_frame_init == 0) {\n            /* prime the MDCT/polyphase filterbank with a short block */\n            var i, j;\n            var primebuff0 = new_float(286 + 1152 + 576);\n            var primebuff1 = new_float(286 + 1152 + 576);\n            gfc.lame_encode_frame_init = 1;\n            for (i = 0, j = 0; i < 286 + 576 * (1 + gfc.mode_gr); ++i) {\n                if (i < 576 * gfc.mode_gr) {\n                    primebuff0[i] = 0;\n                    if (gfc.channels_out == 2)\n                        primebuff1[i] = 0;\n                } else {\n                    primebuff0[i] = inbuf[0][j];\n                    if (gfc.channels_out == 2)\n                        primebuff1[i] = inbuf[1][j];\n                    ++j;\n                }\n            }\n            /* polyphase filtering / mdct */\n            for (gr = 0; gr < gfc.mode_gr; gr++) {\n                for (ch = 0; ch < gfc.channels_out; ch++) {\n                    gfc.l3_side.tt[gr][ch].block_type = Encoder.SHORT_TYPE;\n                }\n            }\n            newMDCT.mdct_sub48(gfc, primebuff0, primebuff1);\n\n            /* check FFT will not use a negative starting offset */\n            assert(576 >= Encoder.FFTOFFSET);\n            /* check if we have enough data for FFT */\n            assert(gfc.mf_size >= (Encoder.BLKSIZE + gfp.framesize - Encoder.FFTOFFSET));\n            /* check if we have enough data for polyphase filterbank */\n            assert(gfc.mf_size >= (512 + gfp.framesize - 32));\n        }\n\n    }\n\n    /**\n     * <PRE>\n     * encodeframe()           Layer 3\n     *\n     * encode a single frame\n     *\n     *\n     *    lame_encode_frame()\n     *\n     *\n     *                           gr 0            gr 1\n     *    inbuf:           |--------------|--------------|--------------|\n     *\n     *\n     *    Polyphase (18 windows, each shifted 32)\n     *    gr 0:\n     *    window1          <----512---.\n     *    window18                 <----512---.\n     *\n     *    gr 1:\n     *    window1                         <----512---.\n     *    window18                                <----512---.\n     *\n     *\n     *\n     *    MDCT output:  |--------------|--------------|--------------|\n     *\n     *    FFT's                    <---------1024---------.\n     *                                             <---------1024-------.\n     *\n     *\n     *\n     *        inbuf = buffer of PCM data size=MP3 framesize\n     *        encoder acts on inbuf[ch][0], but output is delayed by MDCTDELAY\n     *        so the MDCT coefficints are from inbuf[ch][-MDCTDELAY]\n     *\n     *        psy-model FFT has a 1 granule delay, so we feed it data for the\n     *        next granule.\n     *        FFT is centered over granule:  224+576+224\n     *        So FFT starts at:   576-224-MDCTDELAY\n     *\n     *        MPEG2:  FFT ends at:  BLKSIZE+576-224-MDCTDELAY      (1328)\n     *        MPEG1:  FFT ends at:  BLKSIZE+2*576-224-MDCTDELAY    (1904)\n     *\n     *        MPEG2:  polyphase first window:  [0..511]\n     *                          18th window:   [544..1055]          (1056)\n     *        MPEG1:            36th window:   [1120..1631]         (1632)\n     *                data needed:  512+framesize-32\n     *\n     *        A close look newmdct.c shows that the polyphase filterbank\n     *        only uses data from [0..510] for each window.  Perhaps because the window\n     *        used by the filterbank is zero for the last point, so Takehiro's\n     *        code doesn't bother to compute with it.\n     *\n     *        FFT starts at 576-224-MDCTDELAY (304)  = 576-FFTOFFSET\n     *\n     * </PRE>\n     */\n\n\n    this.lame_encode_mp3_frame = function (gfp, inbuf_l, inbuf_r, mp3buf, mp3bufPos, mp3buf_size) {\n        var mp3count;\n        var masking_LR = new_array_n([2, 2]);\n        /*\n         * LR masking &\n         * energy\n         */\n        masking_LR[0][0] = new III_psy_ratio();\n        masking_LR[0][1] = new III_psy_ratio();\n        masking_LR[1][0] = new III_psy_ratio();\n        masking_LR[1][1] = new III_psy_ratio();\n        var masking_MS = new_array_n([2, 2]);\n        /* MS masking & energy */\n        masking_MS[0][0] = new III_psy_ratio();\n        masking_MS[0][1] = new III_psy_ratio();\n        masking_MS[1][0] = new III_psy_ratio();\n        masking_MS[1][1] = new III_psy_ratio();\n        //III_psy_ratio masking[][];\n        var masking;\n        /* pointer to selected maskings */\n        var inbuf = [null, null];\n        var gfc = gfp.internal_flags;\n\n        var tot_ener = new_float_n([2, 4]);\n        var ms_ener_ratio = [.5, .5];\n        var pe = [[0., 0.], [0., 0.]];\n        var pe_MS = [[0., 0.], [0., 0.]];\n\n//float[][] pe_use;\n        var pe_use;\n\n        var ch, gr;\n\n        inbuf[0] = inbuf_l;\n        inbuf[1] = inbuf_r;\n\n        if (gfc.lame_encode_frame_init == 0) {\n            /* first run? */\n            lame_encode_frame_init(gfp, inbuf);\n\n        }\n\n        /********************** padding *****************************/\n        /**\n         * <PRE>\n         * padding method as described in\n         * \"MPEG-Layer3 / Bitstream Syntax and Decoding\"\n         * by Martin Sieler, Ralph Sperschneider\n         *\n         * note: there is no padding for the very first frame\n         *\n         * Robert Hegemann 2000-06-22\n         * </PRE>\n         */\n        gfc.padding = 0;\n        if ((gfc.slot_lag -= gfc.frac_SpF) < 0) {\n            gfc.slot_lag += gfp.out_samplerate;\n            gfc.padding = 1;\n        }\n\n        /****************************************\n         * Stage 1: psychoacoustic model *\n         ****************************************/\n\n        if (gfc.psymodel != 0) {\n            /*\n             * psychoacoustic model psy model has a 1 granule (576) delay that\n             * we must compensate for (mt 6/99).\n             */\n            var ret;\n            var bufp = [null, null];\n            /* address of beginning of left & right granule */\n            var bufpPos = 0;\n            /* address of beginning of left & right granule */\n            var blocktype = new_int(2);\n\n            for (gr = 0; gr < gfc.mode_gr; gr++) {\n\n                for (ch = 0; ch < gfc.channels_out; ch++) {\n                    bufp[ch] = inbuf[ch];\n                    bufpPos = 576 + gr * 576 - Encoder.FFTOFFSET;\n                }\n                if (gfp.VBR == VbrMode.vbr_mtrh || gfp.VBR == VbrMode.vbr_mt) {\n                    ret = psy.L3psycho_anal_vbr(gfp, bufp, bufpPos, gr,\n                        masking_LR, masking_MS, pe[gr], pe_MS[gr],\n                        tot_ener[gr], blocktype);\n                } else {\n                    ret = psy.L3psycho_anal_ns(gfp, bufp, bufpPos, gr,\n                        masking_LR, masking_MS, pe[gr], pe_MS[gr],\n                        tot_ener[gr], blocktype);\n                }\n                if (ret != 0)\n                    return -4;\n\n                if (gfp.mode == MPEGMode.JOINT_STEREO) {\n                    ms_ener_ratio[gr] = tot_ener[gr][2] + tot_ener[gr][3];\n                    if (ms_ener_ratio[gr] > 0)\n                        ms_ener_ratio[gr] = tot_ener[gr][3] / ms_ener_ratio[gr];\n                }\n\n                /* block type flags */\n                for (ch = 0; ch < gfc.channels_out; ch++) {\n                    var cod_info = gfc.l3_side.tt[gr][ch];\n                    cod_info.block_type = blocktype[ch];\n                    cod_info.mixed_block_flag = 0;\n                }\n            }\n        } else {\n            /* no psy model */\n            for (gr = 0; gr < gfc.mode_gr; gr++)\n                for (ch = 0; ch < gfc.channels_out; ch++) {\n                    gfc.l3_side.tt[gr][ch].block_type = Encoder.NORM_TYPE;\n                    gfc.l3_side.tt[gr][ch].mixed_block_flag = 0;\n                    pe_MS[gr][ch] = pe[gr][ch] = 700;\n                }\n        }\n\n        /* auto-adjust of ATH, useful for low volume */\n        adjust_ATH(gfc);\n\n        /****************************************\n         * Stage 2: MDCT *\n         ****************************************/\n\n        /* polyphase filtering / mdct */\n        newMDCT.mdct_sub48(gfc, inbuf[0], inbuf[1]);\n\n        /****************************************\n         * Stage 3: MS/LR decision *\n         ****************************************/\n\n        /* Here will be selected MS or LR coding of the 2 stereo channels */\n        gfc.mode_ext = Encoder.MPG_MD_LR_LR;\n\n        if (gfp.force_ms) {\n            gfc.mode_ext = Encoder.MPG_MD_MS_LR;\n        } else if (gfp.mode == MPEGMode.JOINT_STEREO) {\n            /*\n             * ms_ratio = is scaled, for historical reasons, to look like a\n             * ratio of side_channel / total. 0 = signal is 100% mono .5 = L & R\n             * uncorrelated\n             */\n\n            /**\n             * <PRE>\n             * [0] and [1] are the results for the two granules in MPEG-1,\n             * in MPEG-2 it's only a faked averaging of the same value\n             * _prev is the value of the last granule of the previous frame\n             * _next is the value of the first granule of the next frame\n             * </PRE>\n             */\n\n            var sum_pe_MS = 0.;\n            var sum_pe_LR = 0.;\n            for (gr = 0; gr < gfc.mode_gr; gr++) {\n                for (ch = 0; ch < gfc.channels_out; ch++) {\n                    sum_pe_MS += pe_MS[gr][ch];\n                    sum_pe_LR += pe[gr][ch];\n                }\n            }\n\n            /* based on PE: M/S coding would not use much more bits than L/R */\n            if (sum_pe_MS <= 1.00 * sum_pe_LR) {\n\n                var gi0 = gfc.l3_side.tt[0];\n                var gi1 = gfc.l3_side.tt[gfc.mode_gr - 1];\n\n                if (gi0[0].block_type == gi0[1].block_type\n                    && gi1[0].block_type == gi1[1].block_type) {\n\n                    gfc.mode_ext = Encoder.MPG_MD_MS_LR;\n                }\n            }\n        }\n\n        /* bit and noise allocation */\n        if (gfc.mode_ext == MPG_MD_MS_LR) {\n            masking = masking_MS;\n            /* use MS masking */\n            pe_use = pe_MS;\n        } else {\n            masking = masking_LR;\n            /* use LR masking */\n            pe_use = pe;\n        }\n\n        /* copy data for MP3 frame analyzer */\n        if (gfp.analysis && gfc.pinfo != null) {\n            for (gr = 0; gr < gfc.mode_gr; gr++) {\n                for (ch = 0; ch < gfc.channels_out; ch++) {\n                    gfc.pinfo.ms_ratio[gr] = gfc.ms_ratio[gr];\n                    gfc.pinfo.ms_ener_ratio[gr] = ms_ener_ratio[gr];\n                    gfc.pinfo.blocktype[gr][ch] = gfc.l3_side.tt[gr][ch].block_type;\n                    gfc.pinfo.pe[gr][ch] = pe_use[gr][ch];\n                    System.arraycopy(gfc.l3_side.tt[gr][ch].xr, 0,\n                        gfc.pinfo.xr[gr][ch], 0, 576);\n                    /*\n                     * in psymodel, LR and MS data was stored in pinfo. switch\n                     * to MS data:\n                     */\n                    if (gfc.mode_ext == MPG_MD_MS_LR) {\n                        gfc.pinfo.ers[gr][ch] = gfc.pinfo.ers[gr][ch + 2];\n                        System.arraycopy(gfc.pinfo.energy[gr][ch + 2], 0,\n                            gfc.pinfo.energy[gr][ch], 0,\n                            gfc.pinfo.energy[gr][ch].length);\n                    }\n                }\n            }\n        }\n\n        /****************************************\n         * Stage 4: quantization loop *\n         ****************************************/\n\n        if (gfp.VBR == VbrMode.vbr_off || gfp.VBR == VbrMode.vbr_abr) {\n\n            var i;\n            var f;\n\n            for (i = 0; i < 18; i++)\n                gfc.nsPsy.pefirbuf[i] = gfc.nsPsy.pefirbuf[i + 1];\n\n            f = 0.0;\n            for (gr = 0; gr < gfc.mode_gr; gr++)\n                for (ch = 0; ch < gfc.channels_out; ch++)\n                    f += pe_use[gr][ch];\n            gfc.nsPsy.pefirbuf[18] = f;\n\n            f = gfc.nsPsy.pefirbuf[9];\n            for (i = 0; i < 9; i++)\n                f += (gfc.nsPsy.pefirbuf[i] + gfc.nsPsy.pefirbuf[18 - i])\n                    * Encoder.fircoef[i];\n\n            f = (670 * 5 * gfc.mode_gr * gfc.channels_out) / f;\n            for (gr = 0; gr < gfc.mode_gr; gr++) {\n                for (ch = 0; ch < gfc.channels_out; ch++) {\n                    pe_use[gr][ch] *= f;\n                }\n            }\n        }\n        gfc.iteration_loop.iteration_loop(gfp, pe_use, ms_ener_ratio, masking);\n\n        /****************************************\n         * Stage 5: bitstream formatting *\n         ****************************************/\n\n        /* write the frame to the bitstream */\n        bs.format_bitstream(gfp);\n\n        /* copy mp3 bit buffer into array */\n        mp3count = bs.copy_buffer(gfc, mp3buf, mp3bufPos, mp3buf_size, 1);\n\n        if (gfp.bWriteVbrTag)\n            vbr.addVbrFrame(gfp);\n\n        if (gfp.analysis && gfc.pinfo != null) {\n            for (ch = 0; ch < gfc.channels_out; ch++) {\n                var j;\n                for (j = 0; j < FFTOFFSET; j++)\n                    gfc.pinfo.pcmdata[ch][j] = gfc.pinfo.pcmdata[ch][j\n                    + gfp.framesize];\n                for (j = FFTOFFSET; j < 1600; j++) {\n                    gfc.pinfo.pcmdata[ch][j] = inbuf[ch][j - FFTOFFSET];\n                }\n            }\n            qupvt.set_frame_pinfo(gfp, masking);\n        }\n\n        updateStats(gfc);\n\n        return mp3count;\n    }\n}\n\n\nmodule.exports = Encoder;\n","var common = require('./common.js');\nvar System = common.System;\nvar VbrMode = common.VbrMode;\nvar Float = common.Float;\nvar ShortBlock = common.ShortBlock;\nvar Util = common.Util;\nvar Arrays = common.Arrays;\nvar new_array_n = common.new_array_n;\nvar new_byte = common.new_byte;\nvar new_double = common.new_double;\nvar new_float = common.new_float;\nvar new_float_n = common.new_float_n;\nvar new_int = common.new_int;\nvar new_int_n = common.new_int_n;\nvar assert = common.assert;\n\nvar Encoder = require('./Encoder.js');\n\nfunction FFT() {\n\n    var window = new_float(Encoder.BLKSIZE);\n    var window_s = new_float(Encoder.BLKSIZE_s / 2);\n\n    var costab = [\n        9.238795325112867e-01, 3.826834323650898e-01,\n        9.951847266721969e-01, 9.801714032956060e-02,\n        9.996988186962042e-01, 2.454122852291229e-02,\n        9.999811752826011e-01, 6.135884649154475e-03\n    ];\n\n    function fht(fz, fzPos, n) {\n        var tri = 0;\n        var k4;\n        var fi;\n        var gi;\n\n        n <<= 1;\n        /* to get BLKSIZE, because of 3DNow! ASM routine */\n        var fn = fzPos + n;\n        k4 = 4;\n        do {\n            var s1, c1;\n            var i, k1, k2, k3, kx;\n            kx = k4 >> 1;\n            k1 = k4;\n            k2 = k4 << 1;\n            k3 = k2 + k1;\n            k4 = k2 << 1;\n            fi = fzPos;\n            gi = fi + kx;\n            do {\n                var f0, f1, f2, f3;\n                f1 = fz[fi + 0] - fz[fi + k1];\n                f0 = fz[fi + 0] + fz[fi + k1];\n                f3 = fz[fi + k2] - fz[fi + k3];\n                f2 = fz[fi + k2] + fz[fi + k3];\n                fz[fi + k2] = f0 - f2;\n                fz[fi + 0] = f0 + f2;\n                fz[fi + k3] = f1 - f3;\n                fz[fi + k1] = f1 + f3;\n                f1 = fz[gi + 0] - fz[gi + k1];\n                f0 = fz[gi + 0] + fz[gi + k1];\n                f3 = (Util.SQRT2 * fz[gi + k3]);\n                f2 = (Util.SQRT2 * fz[gi + k2]);\n                fz[gi + k2] = f0 - f2;\n                fz[gi + 0] = f0 + f2;\n                fz[gi + k3] = f1 - f3;\n                fz[gi + k1] = f1 + f3;\n                gi += k4;\n                fi += k4;\n            } while (fi < fn);\n            c1 = costab[tri + 0];\n            s1 = costab[tri + 1];\n            for (i = 1; i < kx; i++) {\n                var c2, s2;\n                c2 = 1 - (2 * s1) * s1;\n                s2 = (2 * s1) * c1;\n                fi = fzPos + i;\n                gi = fzPos + k1 - i;\n                do {\n                    var a, b, g0, f0, f1, g1, f2, g2, f3, g3;\n                    b = s2 * fz[fi + k1] - c2 * fz[gi + k1];\n                    a = c2 * fz[fi + k1] + s2 * fz[gi + k1];\n                    f1 = fz[fi + 0] - a;\n                    f0 = fz[fi + 0] + a;\n                    g1 = fz[gi + 0] - b;\n                    g0 = fz[gi + 0] + b;\n                    b = s2 * fz[fi + k3] - c2 * fz[gi + k3];\n                    a = c2 * fz[fi + k3] + s2 * fz[gi + k3];\n                    f3 = fz[fi + k2] - a;\n                    f2 = fz[fi + k2] + a;\n                    g3 = fz[gi + k2] - b;\n                    g2 = fz[gi + k2] + b;\n                    b = s1 * f2 - c1 * g3;\n                    a = c1 * f2 + s1 * g3;\n                    fz[fi + k2] = f0 - a;\n                    fz[fi + 0] = f0 + a;\n                    fz[gi + k3] = g1 - b;\n                    fz[gi + k1] = g1 + b;\n                    b = c1 * g2 - s1 * f3;\n                    a = s1 * g2 + c1 * f3;\n                    fz[gi + k2] = g0 - a;\n                    fz[gi + 0] = g0 + a;\n                    fz[fi + k3] = f1 - b;\n                    fz[fi + k1] = f1 + b;\n                    gi += k4;\n                    fi += k4;\n                } while (fi < fn);\n                c2 = c1;\n                c1 = c2 * costab[tri + 0] - s1 * costab[tri + 1];\n                s1 = c2 * costab[tri + 1] + s1 * costab[tri + 0];\n            }\n            tri += 2;\n        } while (k4 < n);\n    }\n\n    var rv_tbl = [0x00, 0x80, 0x40,\n        0xc0, 0x20, 0xa0, 0x60, 0xe0, 0x10,\n        0x90, 0x50, 0xd0, 0x30, 0xb0, 0x70,\n        0xf0, 0x08, 0x88, 0x48, 0xc8, 0x28,\n        0xa8, 0x68, 0xe8, 0x18, 0x98, 0x58,\n        0xd8, 0x38, 0xb8, 0x78, 0xf8, 0x04,\n        0x84, 0x44, 0xc4, 0x24, 0xa4, 0x64,\n        0xe4, 0x14, 0x94, 0x54, 0xd4, 0x34,\n        0xb4, 0x74, 0xf4, 0x0c, 0x8c, 0x4c,\n        0xcc, 0x2c, 0xac, 0x6c, 0xec, 0x1c,\n        0x9c, 0x5c, 0xdc, 0x3c, 0xbc, 0x7c,\n        0xfc, 0x02, 0x82, 0x42, 0xc2, 0x22,\n        0xa2, 0x62, 0xe2, 0x12, 0x92, 0x52,\n        0xd2, 0x32, 0xb2, 0x72, 0xf2, 0x0a,\n        0x8a, 0x4a, 0xca, 0x2a, 0xaa, 0x6a,\n        0xea, 0x1a, 0x9a, 0x5a, 0xda, 0x3a,\n        0xba, 0x7a, 0xfa, 0x06, 0x86, 0x46,\n        0xc6, 0x26, 0xa6, 0x66, 0xe6, 0x16,\n        0x96, 0x56, 0xd6, 0x36, 0xb6, 0x76,\n        0xf6, 0x0e, 0x8e, 0x4e, 0xce, 0x2e,\n        0xae, 0x6e, 0xee, 0x1e, 0x9e, 0x5e,\n        0xde, 0x3e, 0xbe, 0x7e, 0xfe];\n\n    this.fft_short = function (gfc, x_real, chn, buffer, bufPos) {\n        for (var b = 0; b < 3; b++) {\n            var x = Encoder.BLKSIZE_s / 2;\n            var k = 0xffff & ((576 / 3) * (b + 1));\n            var j = Encoder.BLKSIZE_s / 8 - 1;\n            do {\n                var f0, f1, f2, f3, w;\n                var i = rv_tbl[j << 2] & 0xff;\n\n                f0 = window_s[i] * buffer[chn][bufPos + i + k];\n                w = window_s[0x7f - i] * buffer[chn][bufPos + i + k + 0x80];\n                f1 = f0 - w;\n                f0 = f0 + w;\n                f2 = window_s[i + 0x40] * buffer[chn][bufPos + i + k + 0x40];\n                w = window_s[0x3f - i] * buffer[chn][bufPos + i + k + 0xc0];\n                f3 = f2 - w;\n                f2 = f2 + w;\n\n                x -= 4;\n                x_real[b][x + 0] = f0 + f2;\n                x_real[b][x + 2] = f0 - f2;\n                x_real[b][x + 1] = f1 + f3;\n                x_real[b][x + 3] = f1 - f3;\n\n                f0 = window_s[i + 0x01] * buffer[chn][bufPos + i + k + 0x01];\n                w = window_s[0x7e - i] * buffer[chn][bufPos + i + k + 0x81];\n                f1 = f0 - w;\n                f0 = f0 + w;\n                f2 = window_s[i + 0x41] * buffer[chn][bufPos + i + k + 0x41];\n                w = window_s[0x3e - i] * buffer[chn][bufPos + i + k + 0xc1];\n                f3 = f2 - w;\n                f2 = f2 + w;\n\n                x_real[b][x + Encoder.BLKSIZE_s / 2 + 0] = f0 + f2;\n                x_real[b][x + Encoder.BLKSIZE_s / 2 + 2] = f0 - f2;\n                x_real[b][x + Encoder.BLKSIZE_s / 2 + 1] = f1 + f3;\n                x_real[b][x + Encoder.BLKSIZE_s / 2 + 3] = f1 - f3;\n            } while (--j >= 0);\n\n            fht(x_real[b], x, Encoder.BLKSIZE_s / 2);\n            /* BLKSIZE_s/2 because of 3DNow! ASM routine */\n            /* BLKSIZE/2 because of 3DNow! ASM routine */\n        }\n    }\n\n    this.fft_long = function (gfc, y, chn, buffer, bufPos) {\n        var jj = Encoder.BLKSIZE / 8 - 1;\n        var x = Encoder.BLKSIZE / 2;\n\n        do {\n            var f0, f1, f2, f3, w;\n            var i = rv_tbl[jj] & 0xff;\n            f0 = window[i] * buffer[chn][bufPos + i];\n            w = window[i + 0x200] * buffer[chn][bufPos + i + 0x200];\n            f1 = f0 - w;\n            f0 = f0 + w;\n            f2 = window[i + 0x100] * buffer[chn][bufPos + i + 0x100];\n            w = window[i + 0x300] * buffer[chn][bufPos + i + 0x300];\n            f3 = f2 - w;\n            f2 = f2 + w;\n\n            x -= 4;\n            y[x + 0] = f0 + f2;\n            y[x + 2] = f0 - f2;\n            y[x + 1] = f1 + f3;\n            y[x + 3] = f1 - f3;\n\n            f0 = window[i + 0x001] * buffer[chn][bufPos + i + 0x001];\n            w = window[i + 0x201] * buffer[chn][bufPos + i + 0x201];\n            f1 = f0 - w;\n            f0 = f0 + w;\n            f2 = window[i + 0x101] * buffer[chn][bufPos + i + 0x101];\n            w = window[i + 0x301] * buffer[chn][bufPos + i + 0x301];\n            f3 = f2 - w;\n            f2 = f2 + w;\n\n            y[x + Encoder.BLKSIZE / 2 + 0] = f0 + f2;\n            y[x + Encoder.BLKSIZE / 2 + 2] = f0 - f2;\n            y[x + Encoder.BLKSIZE / 2 + 1] = f1 + f3;\n            y[x + Encoder.BLKSIZE / 2 + 3] = f1 - f3;\n        } while (--jj >= 0);\n\n        fht(y, x, Encoder.BLKSIZE / 2);\n        /* BLKSIZE/2 because of 3DNow! ASM routine */\n    }\n\n    this.init_fft = function (gfc) {\n        /* The type of window used here will make no real difference, but */\n        /*\n         * in the interest of merging nspsytune stuff - switch to blackman\n         * window\n         */\n        for (var i = 0; i < Encoder.BLKSIZE; i++)\n            /* blackman window */\n            window[i] = (0.42 - 0.5 * Math.cos(2 * Math.PI * (i + .5)\n                / Encoder.BLKSIZE) + 0.08 * Math.cos(4 * Math.PI * (i + .5)\n                / Encoder.BLKSIZE));\n\n        for (var i = 0; i < Encoder.BLKSIZE_s / 2; i++)\n            window_s[i] = (0.5 * (1.0 - Math.cos(2.0 * Math.PI\n                * (i + 0.5) / Encoder.BLKSIZE_s)));\n\n    }\n\n}\n\nmodule.exports = FFT;\n","/*\n *      psymodel.c\n *\n *      Copyright (c) 1999-2000 Mark Taylor\n *      Copyright (c) 2001-2002 Naoki Shibata\n *      Copyright (c) 2000-2003 Takehiro Tominaga\n *      Copyright (c) 2000-2008 Robert Hegemann\n *      Copyright (c) 2000-2005 Gabriel Bouvigne\n *      Copyright (c) 2000-2005 Alexander Leidinger\n *\n * This library is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 2 of the License, or (at your option) any later version.\n *\n * This library is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Library General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public\n * License along with this library; if not, write to the\n * Free Software Foundation, Inc., 59 Temple Place - Suite 330,\n * Boston, MA 02111-1307, USA.\n */\n\n/* $Id: PsyModel.java,v 1.27 2011/05/24 20:48:06 kenchis Exp $ */\n\n\n/*\n PSYCHO ACOUSTICS\n\n\n This routine computes the psycho acoustics, delayed by one granule.\n\n Input: buffer of PCM data (1024 samples).\n\n This window should be centered over the 576 sample granule window.\n The routine will compute the psycho acoustics for\n this granule, but return the psycho acoustics computed\n for the *previous* granule.  This is because the block\n type of the previous granule can only be determined\n after we have computed the psycho acoustics for the following\n granule.\n\n Output:  maskings and energies for each scalefactor band.\n block type, PE, and some correlation measures.\n The PE is used by CBR modes to determine if extra bits\n from the bit reservoir should be used.  The correlation\n measures are used to determine mid/side or regular stereo.\n */\n/*\n Notation:\n\n barks:  a non-linear frequency scale.  Mapping from frequency to\n barks is given by freq2bark()\n\n scalefactor bands: The spectrum (frequencies) are broken into\n SBMAX \"scalefactor bands\".  Thes bands\n are determined by the MPEG ISO spec.  In\n the noise shaping/quantization code, we allocate\n bits among the partition bands to achieve the\n best possible quality\n\n partition bands:   The spectrum is also broken into about\n 64 \"partition bands\".  Each partition\n band is about .34 barks wide.  There are about 2-5\n partition bands for each scalefactor band.\n\n LAME computes all psycho acoustic information for each partition\n band.  Then at the end of the computations, this information\n is mapped to scalefactor bands.  The energy in each scalefactor\n band is taken as the sum of the energy in all partition bands\n which overlap the scalefactor band.  The maskings can be computed\n in the same way (and thus represent the average masking in that band)\n or by taking the minmum value multiplied by the number of\n partition bands used (which represents a minimum masking in that band).\n */\n/*\n The general outline is as follows:\n\n 1. compute the energy in each partition band\n 2. compute the tonality in each partition band\n 3. compute the strength of each partion band \"masker\"\n 4. compute the masking (via the spreading function applied to each masker)\n 5. Modifications for mid/side masking.\n\n Each partition band is considiered a \"masker\".  The strength\n of the i'th masker in band j is given by:\n\n s3(bark(i)-bark(j))*strength(i)\n\n The strength of the masker is a function of the energy and tonality.\n The more tonal, the less masking.  LAME uses a simple linear formula\n (controlled by NMT and TMN) which says the strength is given by the\n energy divided by a linear function of the tonality.\n */\n/*\n s3() is the \"spreading function\".  It is given by a formula\n determined via listening tests.\n\n The total masking in the j'th partition band is the sum over\n all maskings i.  It is thus given by the convolution of\n the strength with s3(), the \"spreading function.\"\n\n masking(j) = sum_over_i  s3(i-j)*strength(i)  = s3 o strength\n\n where \"o\" = convolution operator.  s3 is given by a formula determined\n via listening tests.  It is normalized so that s3 o 1 = 1.\n\n Note: instead of a simple convolution, LAME also has the\n option of using \"additive masking\"\n\n The most critical part is step 2, computing the tonality of each\n partition band.  LAME has two tonality estimators.  The first\n is based on the ISO spec, and measures how predictiable the\n signal is over time.  The more predictable, the more tonal.\n The second measure is based on looking at the spectrum of\n a single granule.  The more peaky the spectrum, the more\n tonal.  By most indications, the latter approach is better.\n\n Finally, in step 5, the maskings for the mid and side\n channel are possibly increased.  Under certain circumstances,\n noise in the mid & side channels is assumed to also\n be masked by strong maskers in the L or R channels.\n\n\n Other data computed by the psy-model:\n\n ms_ratio        side-channel / mid-channel masking ratio (for previous granule)\n ms_ratio_next   side-channel / mid-channel masking ratio for this granule\n\n percep_entropy[2]     L and R values (prev granule) of PE - A measure of how\n much pre-echo is in the previous granule\n percep_entropy_MS[2]  mid and side channel values (prev granule) of percep_entropy\n energy[4]             L,R,M,S energy in each channel, prev granule\n blocktype_d[2]        block type to use for previous granule\n */\n//package mp3;\n\n//import java.util.Arrays;\nvar common = require('./common.js');\nvar System = common.System;\nvar VbrMode = common.VbrMode;\nvar Float = common.Float;\nvar ShortBlock = common.ShortBlock;\nvar Util = common.Util;\nvar Arrays = common.Arrays;\nvar new_array_n = common.new_array_n;\nvar new_byte = common.new_byte;\nvar new_double = common.new_double;\nvar new_float = common.new_float;\nvar new_float_n = common.new_float_n;\nvar new_int = common.new_int;\nvar new_int_n = common.new_int_n;\nvar assert = common.assert;\n\nvar FFT = require(\"./FFT.js\");\nvar Encoder = require(\"./Encoder.js\");\n\nfunction PsyModel() {\n\n    var fft = new FFT();\n\n    var LOG10 = 2.30258509299404568402;\n\n    var rpelev = 2;\n    var rpelev2 = 16;\n    var rpelev_s = 2;\n    var rpelev2_s = 16;\n\n    /* size of each partition band, in barks: */\n    var DELBARK = .34;\n\n    /* tuned for output level (sensitive to energy scale) */\n    var VO_SCALE = (1. / (14752 * 14752) / (Encoder.BLKSIZE / 2));\n\n    var temporalmask_sustain_sec = 0.01;\n\n    var NS_PREECHO_ATT0 = 0.8;\n    var NS_PREECHO_ATT1 = 0.6;\n    var NS_PREECHO_ATT2 = 0.3;\n\n    var NS_MSFIX = 3.5;\n\n    var NSATTACKTHRE = 4.4;\n    var NSATTACKTHRE_S = 25;\n\n    var NSFIRLEN = 21;\n\n    /* size of each partition band, in barks: */\n    var LN_TO_LOG10 = 0.2302585093;\n\n    function NON_LINEAR_SCALE_ENERGY(x) {\n        return x;\n    }\n\n    /**\n     * <PRE>\n     *       L3psycho_anal.  Compute psycho acoustics.\n     *\n     *       Data returned to the calling program must be delayed by one\n     *       granule.\n     *\n     *       This is done in two places.\n     *       If we do not need to know the blocktype, the copying\n     *       can be done here at the top of the program: we copy the data for\n     *       the last granule (computed during the last call) before it is\n     *       overwritten with the new data.  It looks like this:\n     *\n     *       0. static psymodel_data\n     *       1. calling_program_data = psymodel_data\n     *       2. compute psymodel_data\n     *\n     *       For data which needs to know the blocktype, the copying must be\n     *       done at the end of this loop, and the old values must be saved:\n     *\n     *       0. static psymodel_data_old\n     *       1. compute psymodel_data\n     *       2. compute possible block type of this granule\n     *       3. compute final block type of previous granule based on #2.\n     *       4. calling_program_data = psymodel_data_old\n     *       5. psymodel_data_old = psymodel_data\n     *     psycho_loudness_approx\n     *       jd - 2001 mar 12\n     *    in:  energy   - BLKSIZE/2 elements of frequency magnitudes ^ 2\n     *         gfp      - uses out_samplerate, ATHtype (also needed for ATHformula)\n     *    returns: loudness^2 approximation, a positive value roughly tuned for a value\n     *             of 1.0 for signals near clipping.\n     *    notes:   When calibrated, feeding this function binary white noise at sample\n     *             values +32767 or -32768 should return values that approach 3.\n     *             ATHformula is used to approximate an equal loudness curve.\n     *    future:  Data indicates that the shape of the equal loudness curve varies\n     *             with intensity.  This function might be improved by using an equal\n     *             loudness curve shaped for typical playback levels (instead of the\n     *             ATH, that is shaped for the threshold).  A flexible realization might\n     *             simply bend the existing ATH curve to achieve the desired shape.\n     *             However, the potential gain may not be enough to justify an effort.\n     * </PRE>\n     */\n    function psycho_loudness_approx(energy, gfc) {\n        var loudness_power = 0.0;\n        /* apply weights to power in freq. bands */\n        for (var i = 0; i < Encoder.BLKSIZE / 2; ++i)\n            loudness_power += energy[i] * gfc.ATH.eql_w[i];\n        loudness_power *= VO_SCALE;\n\n        return loudness_power;\n    }\n\n    function compute_ffts(gfp, fftenergy, fftenergy_s, wsamp_l, wsamp_lPos, wsamp_s, wsamp_sPos, gr_out, chn, buffer, bufPos) {\n        var gfc = gfp.internal_flags;\n        if (chn < 2) {\n            fft.fft_long(gfc, wsamp_l[wsamp_lPos], chn, buffer, bufPos);\n            fft.fft_short(gfc, wsamp_s[wsamp_sPos], chn, buffer, bufPos);\n        }\n        /* FFT data for mid and side channel is derived from L & R */\n        else if (chn == 2) {\n            for (var j = Encoder.BLKSIZE - 1; j >= 0; --j) {\n                var l = wsamp_l[wsamp_lPos + 0][j];\n                var r = wsamp_l[wsamp_lPos + 1][j];\n                wsamp_l[wsamp_lPos + 0][j] = (l + r) * Util.SQRT2 * 0.5;\n                wsamp_l[wsamp_lPos + 1][j] = (l - r) * Util.SQRT2 * 0.5;\n            }\n            for (var b = 2; b >= 0; --b) {\n                for (var j = Encoder.BLKSIZE_s - 1; j >= 0; --j) {\n                    var l = wsamp_s[wsamp_sPos + 0][b][j];\n                    var r = wsamp_s[wsamp_sPos + 1][b][j];\n                    wsamp_s[wsamp_sPos + 0][b][j] = (l + r) * Util.SQRT2 * 0.5;\n                    wsamp_s[wsamp_sPos + 1][b][j] = (l - r) * Util.SQRT2 * 0.5;\n                }\n            }\n        }\n\n        /*********************************************************************\n         * compute energies\n         *********************************************************************/\n        fftenergy[0] = NON_LINEAR_SCALE_ENERGY(wsamp_l[wsamp_lPos + 0][0]);\n        fftenergy[0] *= fftenergy[0];\n\n        for (var j = Encoder.BLKSIZE / 2 - 1; j >= 0; --j) {\n            var re = (wsamp_l[wsamp_lPos + 0])[Encoder.BLKSIZE / 2 - j];\n            var im = (wsamp_l[wsamp_lPos + 0])[Encoder.BLKSIZE / 2 + j];\n            fftenergy[Encoder.BLKSIZE / 2 - j] = NON_LINEAR_SCALE_ENERGY((re\n                * re + im * im) * 0.5);\n        }\n        for (var b = 2; b >= 0; --b) {\n            fftenergy_s[b][0] = (wsamp_s[wsamp_sPos + 0])[b][0];\n            fftenergy_s[b][0] *= fftenergy_s[b][0];\n            for (var j = Encoder.BLKSIZE_s / 2 - 1; j >= 0; --j) {\n                var re = (wsamp_s[wsamp_sPos + 0])[b][Encoder.BLKSIZE_s\n                / 2 - j];\n                var im = (wsamp_s[wsamp_sPos + 0])[b][Encoder.BLKSIZE_s\n                / 2 + j];\n                fftenergy_s[b][Encoder.BLKSIZE_s / 2 - j] = NON_LINEAR_SCALE_ENERGY((re\n                    * re + im * im) * 0.5);\n            }\n        }\n        /* total energy */\n        {\n            var totalenergy = 0.0;\n            for (var j = 11; j < Encoder.HBLKSIZE; j++)\n                totalenergy += fftenergy[j];\n\n            gfc.tot_ener[chn] = totalenergy;\n        }\n\n        if (gfp.analysis) {\n            for (var j = 0; j < Encoder.HBLKSIZE; j++) {\n                gfc.pinfo.energy[gr_out][chn][j] = gfc.pinfo.energy_save[chn][j];\n                gfc.pinfo.energy_save[chn][j] = fftenergy[j];\n            }\n            gfc.pinfo.pe[gr_out][chn] = gfc.pe[chn];\n        }\n\n        /*********************************************************************\n         * compute loudness approximation (used for ATH auto-level adjustment)\n         *********************************************************************/\n        if (gfp.athaa_loudapprox == 2 && chn < 2) {\n            // no loudness for mid/side ch\n            gfc.loudness_sq[gr_out][chn] = gfc.loudness_sq_save[chn];\n            gfc.loudness_sq_save[chn] = psycho_loudness_approx(fftenergy, gfc);\n        }\n    }\n\n    /* mask_add optimization */\n    /* init the limit values used to avoid computing log in mask_add when it is not necessary */\n\n    /**\n     * <PRE>\n     *  For example, with i = 10*log10(m2/m1)/10*16         (= log10(m2/m1)*16)\n     *\n     * abs(i)>8 is equivalent (as i is an integer) to\n     * abs(i)>=9\n     * i>=9 || i<=-9\n     * equivalent to (as i is the biggest integer smaller than log10(m2/m1)*16\n     * or the smallest integer bigger than log10(m2/m1)*16 depending on the sign of log10(m2/m1)*16)\n     * log10(m2/m1)>=9/16 || log10(m2/m1)<=-9/16\n     * exp10 is strictly increasing thus this is equivalent to\n     * m2/m1 >= 10^(9/16) || m2/m1<=10^(-9/16) which are comparisons to constants\n     * </PRE>\n     */\n\n    /**\n     * as in if(i>8)\n     */\n    var I1LIMIT = 8;\n    /**\n     * as in if(i>24) . changed 23\n     */\n    var I2LIMIT = 23;\n    /**\n     * as in if(m<15)\n     */\n    var MLIMIT = 15;\n\n    var ma_max_i1;\n    var ma_max_i2;\n    var ma_max_m;\n\n    /**\n     * This is the masking table:<BR>\n     * According to tonality, values are going from 0dB (TMN) to 9.3dB (NMT).<BR>\n     * After additive masking computation, 8dB are added, so final values are\n     * going from 8dB to 17.3dB\n     *\n     * pow(10, -0.0..-0.6)\n     */\n    var tab = [1.0, 0.79433, 0.63096, 0.63096,\n        0.63096, 0.63096, 0.63096, 0.25119, 0.11749];\n\n    function init_mask_add_max_values() {\n        ma_max_i1 = Math.pow(10, (I1LIMIT + 1) / 16.0);\n        ma_max_i2 = Math.pow(10, (I2LIMIT + 1) / 16.0);\n        ma_max_m = Math.pow(10, (MLIMIT) / 10.0);\n    }\n\n    var table1 = [3.3246 * 3.3246,\n        3.23837 * 3.23837, 3.15437 * 3.15437, 3.00412 * 3.00412,\n        2.86103 * 2.86103, 2.65407 * 2.65407, 2.46209 * 2.46209,\n        2.284 * 2.284, 2.11879 * 2.11879, 1.96552 * 1.96552,\n        1.82335 * 1.82335, 1.69146 * 1.69146, 1.56911 * 1.56911,\n        1.46658 * 1.46658, 1.37074 * 1.37074, 1.31036 * 1.31036,\n        1.25264 * 1.25264, 1.20648 * 1.20648, 1.16203 * 1.16203,\n        1.12765 * 1.12765, 1.09428 * 1.09428, 1.0659 * 1.0659,\n        1.03826 * 1.03826, 1.01895 * 1.01895, 1];\n\n    var table2 = [1.33352 * 1.33352,\n        1.35879 * 1.35879, 1.38454 * 1.38454, 1.39497 * 1.39497,\n        1.40548 * 1.40548, 1.3537 * 1.3537, 1.30382 * 1.30382,\n        1.22321 * 1.22321, 1.14758 * 1.14758, 1];\n\n    var table3 = [2.35364 * 2.35364,\n        2.29259 * 2.29259, 2.23313 * 2.23313, 2.12675 * 2.12675,\n        2.02545 * 2.02545, 1.87894 * 1.87894, 1.74303 * 1.74303,\n        1.61695 * 1.61695, 1.49999 * 1.49999, 1.39148 * 1.39148,\n        1.29083 * 1.29083, 1.19746 * 1.19746, 1.11084 * 1.11084,\n        1.03826 * 1.03826];\n\n    /**\n     * addition of simultaneous masking Naoki Shibata 2000/7\n     */\n    function mask_add(m1, m2, kk, b, gfc, shortblock) {\n        var ratio;\n\n        if (m2 > m1) {\n            if (m2 < (m1 * ma_max_i2))\n                ratio = m2 / m1;\n            else\n                return (m1 + m2);\n        } else {\n            if (m1 >= (m2 * ma_max_i2))\n                return (m1 + m2);\n            ratio = m1 / m2;\n        }\n\n        /* Should always be true, just checking */\n        assert(m1 >= 0);\n        assert(m2 >= 0);\n\n        m1 += m2;\n        //if (((long)(b + 3) & 0xffffffff) <= 3 + 3) {\n        if ((b + 3) <= 3 + 3) {\n            /* approximately, 1 bark = 3 partitions */\n            /* 65% of the cases */\n            /* originally 'if(i > 8)' */\n            if (ratio >= ma_max_i1) {\n                /* 43% of the total */\n                return m1;\n            }\n\n            /* 22% of the total */\n            var i = 0 | (Util.FAST_LOG10_X(ratio, 16.0));\n            return m1 * table2[i];\n        }\n\n        /**\n         * <PRE>\n         * m<15 equ log10((m1+m2)/gfc.ATH.cb[k])<1.5\n         * equ (m1+m2)/gfc.ATH.cb[k]<10^1.5\n         * equ (m1+m2)<10^1.5 * gfc.ATH.cb[k]\n         * </PRE>\n         */\n        var i = 0 | Util.FAST_LOG10_X(ratio, 16.0);\n        if (shortblock != 0) {\n            m2 = gfc.ATH.cb_s[kk] * gfc.ATH.adjust;\n        } else {\n            m2 = gfc.ATH.cb_l[kk] * gfc.ATH.adjust;\n        }\n        assert(m2 >= 0);\n        if (m1 < ma_max_m * m2) {\n            /* 3% of the total */\n            /* Originally if (m > 0) { */\n            if (m1 > m2) {\n                var f, r;\n\n                f = 1.0;\n                if (i <= 13)\n                    f = table3[i];\n\n                r = Util.FAST_LOG10_X(m1 / m2, 10.0 / 15.0);\n                return m1 * ((table1[i] - f) * r + f);\n            }\n\n            if (i > 13)\n                return m1;\n\n            return m1 * table3[i];\n        }\n\n        /* 10% of total */\n        return m1 * table1[i];\n    }\n\n    var table2_ = [1.33352 * 1.33352,\n        1.35879 * 1.35879, 1.38454 * 1.38454, 1.39497 * 1.39497,\n        1.40548 * 1.40548, 1.3537 * 1.3537, 1.30382 * 1.30382,\n        1.22321 * 1.22321, 1.14758 * 1.14758, 1];\n\n    /**\n     * addition of simultaneous masking Naoki Shibata 2000/7\n     */\n    function vbrpsy_mask_add(m1, m2, b) {\n        var ratio;\n\n        if (m1 < 0) {\n            m1 = 0;\n        }\n        if (m2 < 0) {\n            m2 = 0;\n        }\n        if (m1 <= 0) {\n            return m2;\n        }\n        if (m2 <= 0) {\n            return m1;\n        }\n        if (m2 > m1) {\n            ratio = m2 / m1;\n        } else {\n            ratio = m1 / m2;\n        }\n        if (-2 <= b && b <= 2) {\n            /* approximately, 1 bark = 3 partitions */\n            /* originally 'if(i > 8)' */\n            if (ratio >= ma_max_i1) {\n                return m1 + m2;\n            } else {\n                var i = 0 | (Util.FAST_LOG10_X(ratio, 16.0));\n                return (m1 + m2) * table2_[i];\n            }\n        }\n        if (ratio < ma_max_i2) {\n            return m1 + m2;\n        }\n        if (m1 < m2) {\n            m1 = m2;\n        }\n        return m1;\n    }\n\n    /**\n     * compute interchannel masking effects\n     */\n    function calc_interchannel_masking(gfp, ratio) {\n        var gfc = gfp.internal_flags;\n        if (gfc.channels_out > 1) {\n            for (var sb = 0; sb < Encoder.SBMAX_l; sb++) {\n                var l = gfc.thm[0].l[sb];\n                var r = gfc.thm[1].l[sb];\n                gfc.thm[0].l[sb] += r * ratio;\n                gfc.thm[1].l[sb] += l * ratio;\n            }\n            for (var sb = 0; sb < Encoder.SBMAX_s; sb++) {\n                for (var sblock = 0; sblock < 3; sblock++) {\n                    var l = gfc.thm[0].s[sb][sblock];\n                    var r = gfc.thm[1].s[sb][sblock];\n                    gfc.thm[0].s[sb][sblock] += r * ratio;\n                    gfc.thm[1].s[sb][sblock] += l * ratio;\n                }\n            }\n        }\n    }\n\n    /**\n     * compute M/S thresholds from Johnston & Ferreira 1992 ICASSP paper\n     */\n    function msfix1(gfc) {\n        for (var sb = 0; sb < Encoder.SBMAX_l; sb++) {\n            /* use this fix if L & R masking differs by 2db or less */\n            /* if db = 10*log10(x2/x1) < 2 */\n            /* if (x2 < 1.58*x1) { */\n            if (gfc.thm[0].l[sb] > 1.58 * gfc.thm[1].l[sb]\n                || gfc.thm[1].l[sb] > 1.58 * gfc.thm[0].l[sb])\n                continue;\n            var mld = gfc.mld_l[sb] * gfc.en[3].l[sb];\n            var rmid = Math.max(gfc.thm[2].l[sb],\n                Math.min(gfc.thm[3].l[sb], mld));\n\n            mld = gfc.mld_l[sb] * gfc.en[2].l[sb];\n            var rside = Math.max(gfc.thm[3].l[sb],\n                Math.min(gfc.thm[2].l[sb], mld));\n            gfc.thm[2].l[sb] = rmid;\n            gfc.thm[3].l[sb] = rside;\n        }\n\n        for (var sb = 0; sb < Encoder.SBMAX_s; sb++) {\n            for (var sblock = 0; sblock < 3; sblock++) {\n                if (gfc.thm[0].s[sb][sblock] > 1.58 * gfc.thm[1].s[sb][sblock]\n                    || gfc.thm[1].s[sb][sblock] > 1.58 * gfc.thm[0].s[sb][sblock])\n                    continue;\n                var mld = gfc.mld_s[sb] * gfc.en[3].s[sb][sblock];\n                var rmid = Math.max(gfc.thm[2].s[sb][sblock],\n                    Math.min(gfc.thm[3].s[sb][sblock], mld));\n\n                mld = gfc.mld_s[sb] * gfc.en[2].s[sb][sblock];\n                var rside = Math.max(gfc.thm[3].s[sb][sblock],\n                    Math.min(gfc.thm[2].s[sb][sblock], mld));\n\n                gfc.thm[2].s[sb][sblock] = rmid;\n                gfc.thm[3].s[sb][sblock] = rside;\n            }\n        }\n    }\n\n    /**\n     * Adjust M/S maskings if user set \"msfix\"\n     *\n     * Naoki Shibata 2000\n     */\n    function ns_msfix(gfc, msfix, athadjust) {\n        var msfix2 = msfix;\n        var athlower = Math.pow(10, athadjust);\n\n        msfix *= 2.0;\n        msfix2 *= 2.0;\n        for (var sb = 0; sb < Encoder.SBMAX_l; sb++) {\n            var thmLR, thmM, thmS, ath;\n            ath = (gfc.ATH.cb_l[gfc.bm_l[sb]]) * athlower;\n            thmLR = Math.min(Math.max(gfc.thm[0].l[sb], ath),\n                Math.max(gfc.thm[1].l[sb], ath));\n            thmM = Math.max(gfc.thm[2].l[sb], ath);\n            thmS = Math.max(gfc.thm[3].l[sb], ath);\n            if (thmLR * msfix < thmM + thmS) {\n                var f = thmLR * msfix2 / (thmM + thmS);\n                thmM *= f;\n                thmS *= f;\n                assert(thmM + thmS > 0);\n            }\n            gfc.thm[2].l[sb] = Math.min(thmM, gfc.thm[2].l[sb]);\n            gfc.thm[3].l[sb] = Math.min(thmS, gfc.thm[3].l[sb]);\n        }\n\n        athlower *= ( Encoder.BLKSIZE_s / Encoder.BLKSIZE);\n        for (var sb = 0; sb < Encoder.SBMAX_s; sb++) {\n            for (var sblock = 0; sblock < 3; sblock++) {\n                var thmLR, thmM, thmS, ath;\n                ath = (gfc.ATH.cb_s[gfc.bm_s[sb]]) * athlower;\n                thmLR = Math.min(Math.max(gfc.thm[0].s[sb][sblock], ath),\n                    Math.max(gfc.thm[1].s[sb][sblock], ath));\n                thmM = Math.max(gfc.thm[2].s[sb][sblock], ath);\n                thmS = Math.max(gfc.thm[3].s[sb][sblock], ath);\n\n                if (thmLR * msfix < thmM + thmS) {\n                    var f = thmLR * msfix / (thmM + thmS);\n                    thmM *= f;\n                    thmS *= f;\n                    assert(thmM + thmS > 0);\n                }\n                gfc.thm[2].s[sb][sblock] = Math.min(gfc.thm[2].s[sb][sblock],\n                    thmM);\n                gfc.thm[3].s[sb][sblock] = Math.min(gfc.thm[3].s[sb][sblock],\n                    thmS);\n            }\n        }\n    }\n\n    /**\n     * short block threshold calculation (part 2)\n     *\n     * partition band bo_s[sfb] is at the transition from scalefactor band sfb\n     * to the next one sfb+1; enn and thmm have to be split between them\n     */\n    function convert_partition2scalefac_s(gfc, eb, thr, chn, sblock) {\n        var sb, b;\n        var enn = 0.0;\n        var thmm = 0.0;\n        for (sb = b = 0; sb < Encoder.SBMAX_s; ++b, ++sb) {\n            var bo_s_sb = gfc.bo_s[sb];\n            var npart_s = gfc.npart_s;\n            var b_lim = bo_s_sb < npart_s ? bo_s_sb : npart_s;\n            while (b < b_lim) {\n                assert(eb[b] >= 0);\n                // iff failed, it may indicate some index error elsewhere\n                assert(thr[b] >= 0);\n                enn += eb[b];\n                thmm += thr[b];\n                b++;\n            }\n            gfc.en[chn].s[sb][sblock] = enn;\n            gfc.thm[chn].s[sb][sblock] = thmm;\n\n            if (b >= npart_s) {\n                ++sb;\n                break;\n            }\n            assert(eb[b] >= 0);\n            // iff failed, it may indicate some index error elsewhere\n            assert(thr[b] >= 0);\n            {\n                /* at transition sfb . sfb+1 */\n                var w_curr = gfc.PSY.bo_s_weight[sb];\n                var w_next = 1.0 - w_curr;\n                enn = w_curr * eb[b];\n                thmm = w_curr * thr[b];\n                gfc.en[chn].s[sb][sblock] += enn;\n                gfc.thm[chn].s[sb][sblock] += thmm;\n                enn = w_next * eb[b];\n                thmm = w_next * thr[b];\n            }\n        }\n        /* zero initialize the rest */\n        for (; sb < Encoder.SBMAX_s; ++sb) {\n            gfc.en[chn].s[sb][sblock] = 0;\n            gfc.thm[chn].s[sb][sblock] = 0;\n        }\n    }\n\n    /**\n     * longblock threshold calculation (part 2)\n     */\n    function convert_partition2scalefac_l(gfc, eb, thr, chn) {\n        var sb, b;\n        var enn = 0.0;\n        var thmm = 0.0;\n        for (sb = b = 0; sb < Encoder.SBMAX_l; ++b, ++sb) {\n            var bo_l_sb = gfc.bo_l[sb];\n            var npart_l = gfc.npart_l;\n            var b_lim = bo_l_sb < npart_l ? bo_l_sb : npart_l;\n            while (b < b_lim) {\n                assert(eb[b] >= 0);\n                // iff failed, it may indicate some index error elsewhere\n                assert(thr[b] >= 0);\n                enn += eb[b];\n                thmm += thr[b];\n                b++;\n            }\n            gfc.en[chn].l[sb] = enn;\n            gfc.thm[chn].l[sb] = thmm;\n\n            if (b >= npart_l) {\n                ++sb;\n                break;\n            }\n            assert(eb[b] >= 0);\n            assert(thr[b] >= 0);\n            {\n                /* at transition sfb . sfb+1 */\n                var w_curr = gfc.PSY.bo_l_weight[sb];\n                var w_next = 1.0 - w_curr;\n                enn = w_curr * eb[b];\n                thmm = w_curr * thr[b];\n                gfc.en[chn].l[sb] += enn;\n                gfc.thm[chn].l[sb] += thmm;\n                enn = w_next * eb[b];\n                thmm = w_next * thr[b];\n            }\n        }\n        /* zero initialize the rest */\n        for (; sb < Encoder.SBMAX_l; ++sb) {\n            gfc.en[chn].l[sb] = 0;\n            gfc.thm[chn].l[sb] = 0;\n        }\n    }\n\n    function compute_masking_s(gfp, fftenergy_s, eb, thr, chn, sblock) {\n        var gfc = gfp.internal_flags;\n        var j, b;\n\n        for (b = j = 0; b < gfc.npart_s; ++b) {\n            var ebb = 0, m = 0;\n            var n = gfc.numlines_s[b];\n            for (var i = 0; i < n; ++i, ++j) {\n                var el = fftenergy_s[sblock][j];\n                ebb += el;\n                if (m < el)\n                    m = el;\n            }\n            eb[b] = ebb;\n        }\n        assert(b == gfc.npart_s);\n        assert(j == 129);\n        for (j = b = 0; b < gfc.npart_s; b++) {\n            var kk = gfc.s3ind_s[b][0];\n            var ecb = gfc.s3_ss[j++] * eb[kk];\n            ++kk;\n            while (kk <= gfc.s3ind_s[b][1]) {\n                ecb += gfc.s3_ss[j] * eb[kk];\n                ++j;\n                ++kk;\n            }\n\n            { /* limit calculated threshold by previous granule */\n                var x = rpelev_s * gfc.nb_s1[chn][b];\n                thr[b] = Math.min(ecb, x);\n            }\n            if (gfc.blocktype_old[chn & 1] == Encoder.SHORT_TYPE) {\n                /* limit calculated threshold by even older granule */\n                var x = rpelev2_s * gfc.nb_s2[chn][b];\n                var y = thr[b];\n                thr[b] = Math.min(x, y);\n            }\n\n            gfc.nb_s2[chn][b] = gfc.nb_s1[chn][b];\n            gfc.nb_s1[chn][b] = ecb;\n            assert(thr[b] >= 0);\n        }\n        for (; b <= Encoder.CBANDS; ++b) {\n            eb[b] = 0;\n            thr[b] = 0;\n        }\n    }\n\n    function block_type_set(gfp, uselongblock, blocktype_d, blocktype) {\n        var gfc = gfp.internal_flags;\n\n        if (gfp.short_blocks == ShortBlock.short_block_coupled\n                /* force both channels to use the same block type */\n                /* this is necessary if the frame is to be encoded in ms_stereo. */\n                /* But even without ms_stereo, FhG does this */\n            && !(uselongblock[0] != 0 && uselongblock[1] != 0))\n            uselongblock[0] = uselongblock[1] = 0;\n\n        /*\n         * update the blocktype of the previous granule, since it depends on\n         * what happend in this granule\n         */\n        for (var chn = 0; chn < gfc.channels_out; chn++) {\n            blocktype[chn] = Encoder.NORM_TYPE;\n            /* disable short blocks */\n            if (gfp.short_blocks == ShortBlock.short_block_dispensed)\n                uselongblock[chn] = 1;\n            if (gfp.short_blocks == ShortBlock.short_block_forced)\n                uselongblock[chn] = 0;\n\n            if (uselongblock[chn] != 0) {\n                /* no attack : use long blocks */\n                assert(gfc.blocktype_old[chn] != Encoder.START_TYPE);\n                if (gfc.blocktype_old[chn] == Encoder.SHORT_TYPE)\n                    blocktype[chn] = Encoder.STOP_TYPE;\n            } else {\n                /* attack : use short blocks */\n                blocktype[chn] = Encoder.SHORT_TYPE;\n                if (gfc.blocktype_old[chn] == Encoder.NORM_TYPE) {\n                    gfc.blocktype_old[chn] = Encoder.START_TYPE;\n                }\n                if (gfc.blocktype_old[chn] == Encoder.STOP_TYPE)\n                    gfc.blocktype_old[chn] = Encoder.SHORT_TYPE;\n            }\n\n            blocktype_d[chn] = gfc.blocktype_old[chn];\n            // value returned to calling program\n            gfc.blocktype_old[chn] = blocktype[chn];\n            // save for next call to l3psy_anal\n        }\n    }\n\n    function NS_INTERP(x, y, r) {\n        /* was pow((x),(r))*pow((y),1-(r)) */\n        if (r >= 1.0) {\n            /* 99.7% of the time */\n            return x;\n        }\n        if (r <= 0.0)\n            return y;\n        if (y > 0.0) {\n            /* rest of the time */\n            return (Math.pow(x / y, r) * y);\n        }\n        /* never happens */\n        return 0.0;\n    }\n\n    /**\n     * these values are tuned only for 44.1kHz...\n     */\n    var regcoef_s = [11.8, 13.6, 17.2, 32, 46.5,\n        51.3, 57.5, 67.1, 71.5, 84.6, 97.6, 130,\n        /* 255.8 */\n    ];\n\n    function pecalc_s(mr, masking_lower) {\n        var pe_s = 1236.28 / 4;\n        for (var sb = 0; sb < Encoder.SBMAX_s - 1; sb++) {\n            for (var sblock = 0; sblock < 3; sblock++) {\n                var thm = mr.thm.s[sb][sblock];\n                assert(sb < regcoef_s.length);\n                if (thm > 0.0) {\n                    var x = thm * masking_lower;\n                    var en = mr.en.s[sb][sblock];\n                    if (en > x) {\n                        if (en > x * 1e10) {\n                            pe_s += regcoef_s[sb] * (10.0 * LOG10);\n                        } else {\n                            assert(x > 0);\n                            pe_s += regcoef_s[sb] * Util.FAST_LOG10(en / x);\n                        }\n                    }\n                }\n            }\n        }\n\n        return pe_s;\n    }\n\n    /**\n     * these values are tuned only for 44.1kHz...\n     */\n    var regcoef_l = [6.8, 5.8, 5.8, 6.4, 6.5, 9.9,\n        12.1, 14.4, 15, 18.9, 21.6, 26.9, 34.2, 40.2, 46.8, 56.5,\n        60.7, 73.9, 85.7, 93.4, 126.1,\n        /* 241.3 */\n    ];\n\n    function pecalc_l(mr, masking_lower) {\n        var pe_l = 1124.23 / 4;\n        for (var sb = 0; sb < Encoder.SBMAX_l - 1; sb++) {\n            var thm = mr.thm.l[sb];\n            assert(sb < regcoef_l.length);\n            if (thm > 0.0) {\n                var x = thm * masking_lower;\n                var en = mr.en.l[sb];\n                if (en > x) {\n                    if (en > x * 1e10) {\n                        pe_l += regcoef_l[sb] * (10.0 * LOG10);\n                    } else {\n                        assert(x > 0);\n                        pe_l += regcoef_l[sb] * Util.FAST_LOG10(en / x);\n                    }\n                }\n            }\n        }\n        return pe_l;\n    }\n\n    function calc_energy(gfc, fftenergy, eb, max, avg) {\n        var b, j;\n\n        for (b = j = 0; b < gfc.npart_l; ++b) {\n            var ebb = 0, m = 0;\n            var i;\n            for (i = 0; i < gfc.numlines_l[b]; ++i, ++j) {\n                var el = fftenergy[j];\n                assert(el >= 0);\n                ebb += el;\n                if (m < el)\n                    m = el;\n            }\n            eb[b] = ebb;\n            max[b] = m;\n            avg[b] = ebb * gfc.rnumlines_l[b];\n            assert(gfc.rnumlines_l[b] >= 0);\n            assert(ebb >= 0);\n            assert(eb[b] >= 0);\n            assert(max[b] >= 0);\n            assert(avg[b] >= 0);\n        }\n    }\n\n    function calc_mask_index_l(gfc, max, avg, mask_idx) {\n        var last_tab_entry = tab.length - 1;\n        var b = 0;\n        var a = avg[b] + avg[b + 1];\n        assert(a >= 0);\n        if (a > 0.0) {\n            var m = max[b];\n            if (m < max[b + 1])\n                m = max[b + 1];\n            assert((gfc.numlines_l[b] + gfc.numlines_l[b + 1] - 1) > 0);\n            a = 20.0 * (m * 2.0 - a)\n                / (a * (gfc.numlines_l[b] + gfc.numlines_l[b + 1] - 1));\n            var k = 0 | a;\n            if (k > last_tab_entry)\n                k = last_tab_entry;\n            mask_idx[b] = k;\n        } else {\n            mask_idx[b] = 0;\n        }\n\n        for (b = 1; b < gfc.npart_l - 1; b++) {\n            a = avg[b - 1] + avg[b] + avg[b + 1];\n            assert(a >= 0);\n            if (a > 0.0) {\n                var m = max[b - 1];\n                if (m < max[b])\n                    m = max[b];\n                if (m < max[b + 1])\n                    m = max[b + 1];\n                assert((gfc.numlines_l[b - 1] + gfc.numlines_l[b] + gfc.numlines_l[b + 1] - 1) > 0);\n                a = 20.0\n                    * (m * 3.0 - a)\n                    / (a * (gfc.numlines_l[b - 1] + gfc.numlines_l[b]\n                    + gfc.numlines_l[b + 1] - 1));\n                var k = 0 | a;\n                if (k > last_tab_entry)\n                    k = last_tab_entry;\n                mask_idx[b] = k;\n            } else {\n                mask_idx[b] = 0;\n            }\n        }\n        assert(b > 0);\n        assert(b == gfc.npart_l - 1);\n\n        a = avg[b - 1] + avg[b];\n        assert(a >= 0);\n        if (a > 0.0) {\n            var m = max[b - 1];\n            if (m < max[b])\n                m = max[b];\n            assert((gfc.numlines_l[b - 1] + gfc.numlines_l[b] - 1) > 0);\n            a = 20.0 * (m * 2.0 - a)\n                / (a * (gfc.numlines_l[b - 1] + gfc.numlines_l[b] - 1));\n            var k = 0 | a;\n            if (k > last_tab_entry)\n                k = last_tab_entry;\n            mask_idx[b] = k;\n        } else {\n            mask_idx[b] = 0;\n        }\n        assert(b == (gfc.npart_l - 1));\n    }\n\n    var fircoef = [\n        -8.65163e-18 * 2, -0.00851586 * 2, -6.74764e-18 * 2, 0.0209036 * 2,\n        -3.36639e-17 * 2, -0.0438162 * 2, -1.54175e-17 * 2, 0.0931738 * 2,\n        -5.52212e-17 * 2, -0.313819 * 2\n    ];\n\n    this.L3psycho_anal_ns = function (gfp, buffer, bufPos, gr_out, masking_ratio, masking_MS_ratio, percep_entropy, percep_MS_entropy, energy, blocktype_d) {\n        /*\n         * to get a good cache performance, one has to think about the sequence,\n         * in which the variables are used.\n         */\n        var gfc = gfp.internal_flags;\n\n        /* fft and energy calculation */\n        var wsamp_L = new_float_n([2, Encoder.BLKSIZE]);\n        var wsamp_S = new_float_n([2, 3, Encoder.BLKSIZE_s]);\n\n        /* convolution */\n        var eb_l = new_float(Encoder.CBANDS + 1);\n        var eb_s = new_float(Encoder.CBANDS + 1);\n        var thr = new_float(Encoder.CBANDS + 2);\n\n        /* block type */\n        var blocktype = new_int(2), uselongblock = new_int(2);\n\n        /* usual variables like loop indices, etc.. */\n        var numchn, chn;\n        var b, i, j, k;\n        var sb, sblock;\n\n        /* variables used for --nspsytune */\n        var ns_hpfsmpl = new_float_n([2, 576]);\n        var pcfact;\n        var mask_idx_l = new_int(Encoder.CBANDS + 2), mask_idx_s = new_int(Encoder.CBANDS + 2);\n\n        Arrays.fill(mask_idx_s, 0);\n\n        numchn = gfc.channels_out;\n        /* chn=2 and 3 = Mid and Side channels */\n        if (gfp.mode == MPEGMode.JOINT_STEREO)\n            numchn = 4;\n\n        if (gfp.VBR == VbrMode.vbr_off)\n            pcfact = gfc.ResvMax == 0 ? 0 : ( gfc.ResvSize)\n            / gfc.ResvMax * 0.5;\n        else if (gfp.VBR == VbrMode.vbr_rh || gfp.VBR == VbrMode.vbr_mtrh\n            || gfp.VBR == VbrMode.vbr_mt) {\n            pcfact = 0.6;\n        } else\n            pcfact = 1.0;\n\n        /**********************************************************************\n         * Apply HPF of fs/4 to the input signal. This is used for attack\n         * detection / handling.\n         **********************************************************************/\n        /* Don't copy the input buffer into a temporary buffer */\n        /* unroll the loop 2 times */\n        for (chn = 0; chn < gfc.channels_out; chn++) {\n            /* apply high pass filter of fs/4 */\n            var firbuf = buffer[chn];\n            var firbufPos = bufPos + 576 - 350 - NSFIRLEN + 192;\n            assert(fircoef.length == ((NSFIRLEN - 1) / 2));\n            for (i = 0; i < 576; i++) {\n                var sum1, sum2;\n                sum1 = firbuf[firbufPos + i + 10];\n                sum2 = 0.0;\n                for (j = 0; j < ((NSFIRLEN - 1) / 2) - 1; j += 2) {\n                    sum1 += fircoef[j]\n                        * (firbuf[firbufPos + i + j] + firbuf[firbufPos + i\n                        + NSFIRLEN - j]);\n                    sum2 += fircoef[j + 1]\n                        * (firbuf[firbufPos + i + j + 1] + firbuf[firbufPos\n                        + i + NSFIRLEN - j - 1]);\n                }\n                ns_hpfsmpl[chn][i] = sum1 + sum2;\n            }\n            masking_ratio[gr_out][chn].en.assign(gfc.en[chn]);\n            masking_ratio[gr_out][chn].thm.assign(gfc.thm[chn]);\n            if (numchn > 2) {\n                /* MS maskings */\n                /* percep_MS_entropy [chn-2] = gfc . pe [chn]; */\n                masking_MS_ratio[gr_out][chn].en.assign(gfc.en[chn + 2]);\n                masking_MS_ratio[gr_out][chn].thm.assign(gfc.thm[chn + 2]);\n            }\n        }\n\n        for (chn = 0; chn < numchn; chn++) {\n            var wsamp_l;\n            var wsamp_s;\n            var en_subshort = new_float(12);\n            var en_short = [0, 0, 0, 0];\n            var attack_intensity = new_float(12);\n            var ns_uselongblock = 1;\n            var attackThreshold;\n            var max = new_float(Encoder.CBANDS), avg = new_float(Encoder.CBANDS);\n            var ns_attacks = [0, 0, 0, 0];\n            var fftenergy = new_float(Encoder.HBLKSIZE);\n            var fftenergy_s = new_float_n([3, Encoder.HBLKSIZE_s]);\n\n            /*\n             * rh 20040301: the following loops do access one off the limits so\n             * I increase the array dimensions by one and initialize the\n             * accessed values to zero\n             */\n            assert(gfc.npart_s <= Encoder.CBANDS);\n            assert(gfc.npart_l <= Encoder.CBANDS);\n\n            /***************************************************************\n             * determine the block type (window type)\n             ***************************************************************/\n            /* calculate energies of each sub-shortblocks */\n            for (i = 0; i < 3; i++) {\n                en_subshort[i] = gfc.nsPsy.last_en_subshort[chn][i + 6];\n                assert(gfc.nsPsy.last_en_subshort[chn][i + 4] > 0);\n                attack_intensity[i] = en_subshort[i]\n                    / gfc.nsPsy.last_en_subshort[chn][i + 4];\n                en_short[0] += en_subshort[i];\n            }\n\n            if (chn == 2) {\n                for (i = 0; i < 576; i++) {\n                    var l, r;\n                    l = ns_hpfsmpl[0][i];\n                    r = ns_hpfsmpl[1][i];\n                    ns_hpfsmpl[0][i] = l + r;\n                    ns_hpfsmpl[1][i] = l - r;\n                }\n            }\n            {\n                var pf = ns_hpfsmpl[chn & 1];\n                var pfPos = 0;\n                for (i = 0; i < 9; i++) {\n                    var pfe = pfPos + 576 / 9;\n                    var p = 1.;\n                    for (; pfPos < pfe; pfPos++)\n                        if (p < Math.abs(pf[pfPos]))\n                            p = Math.abs(pf[pfPos]);\n\n                    gfc.nsPsy.last_en_subshort[chn][i] = en_subshort[i + 3] = p;\n                    en_short[1 + i / 3] += p;\n                    if (p > en_subshort[i + 3 - 2]) {\n                        assert(en_subshort[i + 3 - 2] > 0);\n                        p = p / en_subshort[i + 3 - 2];\n                    } else if (en_subshort[i + 3 - 2] > p * 10.0) {\n                        assert(p > 0);\n                        p = en_subshort[i + 3 - 2] / (p * 10.0);\n                    } else\n                        p = 0.0;\n                    attack_intensity[i + 3] = p;\n                }\n            }\n\n            if (gfp.analysis) {\n                var x = attack_intensity[0];\n                for (i = 1; i < 12; i++)\n                    if (x < attack_intensity[i])\n                        x = attack_intensity[i];\n                gfc.pinfo.ers[gr_out][chn] = gfc.pinfo.ers_save[chn];\n                gfc.pinfo.ers_save[chn] = x;\n            }\n\n            /* compare energies between sub-shortblocks */\n            attackThreshold = (chn == 3) ? gfc.nsPsy.attackthre_s\n                : gfc.nsPsy.attackthre;\n            for (i = 0; i < 12; i++)\n                if (0 == ns_attacks[i / 3]\n                    && attack_intensity[i] > attackThreshold)\n                    ns_attacks[i / 3] = (i % 3) + 1;\n\n            /*\n             * should have energy change between short blocks, in order to avoid\n             * periodic signals\n             */\n            for (i = 1; i < 4; i++) {\n                var ratio;\n                if (en_short[i - 1] > en_short[i]) {\n                    assert(en_short[i] > 0);\n                    ratio = en_short[i - 1] / en_short[i];\n                } else {\n                    assert(en_short[i - 1] > 0);\n                    ratio = en_short[i] / en_short[i - 1];\n                }\n                if (ratio < 1.7) {\n                    ns_attacks[i] = 0;\n                    if (i == 1)\n                        ns_attacks[0] = 0;\n                }\n            }\n\n            if (ns_attacks[0] != 0 && gfc.nsPsy.lastAttacks[chn] != 0)\n                ns_attacks[0] = 0;\n\n            if (gfc.nsPsy.lastAttacks[chn] == 3\n                || (ns_attacks[0] + ns_attacks[1] + ns_attacks[2] + ns_attacks[3]) != 0) {\n                ns_uselongblock = 0;\n\n                if (ns_attacks[1] != 0 && ns_attacks[0] != 0)\n                    ns_attacks[1] = 0;\n                if (ns_attacks[2] != 0 && ns_attacks[1] != 0)\n                    ns_attacks[2] = 0;\n                if (ns_attacks[3] != 0 && ns_attacks[2] != 0)\n                    ns_attacks[3] = 0;\n            }\n\n            if (chn < 2) {\n                uselongblock[chn] = ns_uselongblock;\n            } else {\n                if (ns_uselongblock == 0) {\n                    uselongblock[0] = uselongblock[1] = 0;\n                }\n            }\n\n            /*\n             * there is a one granule delay. Copy maskings computed last call\n             * into masking_ratio to return to calling program.\n             */\n            energy[chn] = gfc.tot_ener[chn];\n\n            /*********************************************************************\n             * compute FFTs\n             *********************************************************************/\n            wsamp_s = wsamp_S;\n            wsamp_l = wsamp_L;\n            compute_ffts(gfp, fftenergy, fftenergy_s, wsamp_l, (chn & 1),\n                wsamp_s, (chn & 1), gr_out, chn, buffer, bufPos);\n\n            /*********************************************************************\n             * Calculate the energy and the tonality of each partition.\n             *********************************************************************/\n            calc_energy(gfc, fftenergy, eb_l, max, avg);\n            calc_mask_index_l(gfc, max, avg, mask_idx_l);\n            /* compute masking thresholds for short blocks */\n            for (sblock = 0; sblock < 3; sblock++) {\n                var enn, thmm;\n                compute_masking_s(gfp, fftenergy_s, eb_s, thr, chn, sblock);\n                convert_partition2scalefac_s(gfc, eb_s, thr, chn, sblock);\n                /**** short block pre-echo control ****/\n                for (sb = 0; sb < Encoder.SBMAX_s; sb++) {\n                    thmm = gfc.thm[chn].s[sb][sblock];\n\n                    thmm *= NS_PREECHO_ATT0;\n                    if (ns_attacks[sblock] >= 2 || ns_attacks[sblock + 1] == 1) {\n                        var idx = (sblock != 0) ? sblock - 1 : 2;\n                        var p = NS_INTERP(gfc.thm[chn].s[sb][idx], thmm,\n                            NS_PREECHO_ATT1 * pcfact);\n                        thmm = Math.min(thmm, p);\n                    }\n\n                    if (ns_attacks[sblock] == 1) {\n                        var idx = (sblock != 0) ? sblock - 1 : 2;\n                        var p = NS_INTERP(gfc.thm[chn].s[sb][idx], thmm,\n                            NS_PREECHO_ATT2 * pcfact);\n                        thmm = Math.min(thmm, p);\n                    } else if ((sblock != 0 && ns_attacks[sblock - 1] == 3)\n                        || (sblock == 0 && gfc.nsPsy.lastAttacks[chn] == 3)) {\n                        var idx = (sblock != 2) ? sblock + 1 : 0;\n                        var p = NS_INTERP(gfc.thm[chn].s[sb][idx], thmm,\n                            NS_PREECHO_ATT2 * pcfact);\n                        thmm = Math.min(thmm, p);\n                    }\n\n                    /* pulse like signal detection for fatboy.wav and so on */\n                    enn = en_subshort[sblock * 3 + 3]\n                        + en_subshort[sblock * 3 + 4]\n                        + en_subshort[sblock * 3 + 5];\n                    if (en_subshort[sblock * 3 + 5] * 6 < enn) {\n                        thmm *= 0.5;\n                        if (en_subshort[sblock * 3 + 4] * 6 < enn)\n                            thmm *= 0.5;\n                    }\n\n                    gfc.thm[chn].s[sb][sblock] = thmm;\n                }\n            }\n            gfc.nsPsy.lastAttacks[chn] = ns_attacks[2];\n\n            /*********************************************************************\n             * convolve the partitioned energy and unpredictability with the\n             * spreading function, s3_l[b][k]\n             ********************************************************************/\n            k = 0;\n            {\n                for (b = 0; b < gfc.npart_l; b++) {\n                    /*\n                     * convolve the partitioned energy with the spreading\n                     * function\n                     */\n                    var kk = gfc.s3ind[b][0];\n                    var eb2 = eb_l[kk] * tab[mask_idx_l[kk]];\n                    var ecb = gfc.s3_ll[k++] * eb2;\n                    while (++kk <= gfc.s3ind[b][1]) {\n                        eb2 = eb_l[kk] * tab[mask_idx_l[kk]];\n                        ecb = mask_add(ecb, gfc.s3_ll[k++] * eb2, kk, kk - b,\n                            gfc, 0);\n                    }\n                    ecb *= 0.158489319246111;\n                    /* pow(10,-0.8) */\n\n                    /**** long block pre-echo control ****/\n                    /**\n                     * <PRE>\n                     * dont use long block pre-echo control if previous granule was\n                     * a short block.  This is to avoid the situation:\n                     * frame0:  quiet (very low masking)\n                     * frame1:  surge  (triggers short blocks)\n                     * frame2:  regular frame.  looks like pre-echo when compared to\n                     *          frame0, but all pre-echo was in frame1.\n                     * </PRE>\n                     */\n                    /*\n                     * chn=0,1 L and R channels\n                     *\n                     * chn=2,3 S and M channels.\n                     */\n\n                    if (gfc.blocktype_old[chn & 1] == Encoder.SHORT_TYPE)\n                        thr[b] = ecb;\n                    else\n                        thr[b] = NS_INTERP(\n                            Math.min(ecb, Math.min(rpelev\n                                * gfc.nb_1[chn][b], rpelev2\n                                * gfc.nb_2[chn][b])), ecb, pcfact);\n\n                    gfc.nb_2[chn][b] = gfc.nb_1[chn][b];\n                    gfc.nb_1[chn][b] = ecb;\n                }\n            }\n            for (; b <= Encoder.CBANDS; ++b) {\n                eb_l[b] = 0;\n                thr[b] = 0;\n            }\n            /* compute masking thresholds for long blocks */\n            convert_partition2scalefac_l(gfc, eb_l, thr, chn);\n        }\n        /* end loop over chn */\n\n        if (gfp.mode == MPEGMode.STEREO || gfp.mode == MPEGMode.JOINT_STEREO) {\n            if (gfp.interChRatio > 0.0) {\n                calc_interchannel_masking(gfp, gfp.interChRatio);\n            }\n        }\n\n        if (gfp.mode == MPEGMode.JOINT_STEREO) {\n            var msfix;\n            msfix1(gfc);\n            msfix = gfp.msfix;\n            if (Math.abs(msfix) > 0.0)\n                ns_msfix(gfc, msfix, gfp.ATHlower * gfc.ATH.adjust);\n        }\n\n        /***************************************************************\n         * determine final block type\n         ***************************************************************/\n        block_type_set(gfp, uselongblock, blocktype_d, blocktype);\n\n        /*********************************************************************\n         * compute the value of PE to return ... no delay and advance\n         *********************************************************************/\n        for (chn = 0; chn < numchn; chn++) {\n            var ppe;\n            var ppePos = 0;\n            var type;\n            var mr;\n\n            if (chn > 1) {\n                ppe = percep_MS_entropy;\n                ppePos = -2;\n                type = Encoder.NORM_TYPE;\n                if (blocktype_d[0] == Encoder.SHORT_TYPE\n                    || blocktype_d[1] == Encoder.SHORT_TYPE)\n                    type = Encoder.SHORT_TYPE;\n                mr = masking_MS_ratio[gr_out][chn - 2];\n            } else {\n                ppe = percep_entropy;\n                ppePos = 0;\n                type = blocktype_d[chn];\n                mr = masking_ratio[gr_out][chn];\n            }\n\n            if (type == Encoder.SHORT_TYPE)\n                ppe[ppePos + chn] = pecalc_s(mr, gfc.masking_lower);\n            else\n                ppe[ppePos + chn] = pecalc_l(mr, gfc.masking_lower);\n\n            if (gfp.analysis)\n                gfc.pinfo.pe[gr_out][chn] = ppe[ppePos + chn];\n\n        }\n        return 0;\n    }\n\n    function vbrpsy_compute_fft_l(gfp, buffer, bufPos, chn, gr_out, fftenergy, wsamp_l, wsamp_lPos) {\n        var gfc = gfp.internal_flags;\n        if (chn < 2) {\n            fft.fft_long(gfc, wsamp_l[wsamp_lPos], chn, buffer, bufPos);\n        } else if (chn == 2) {\n            /* FFT data for mid and side channel is derived from L & R */\n            for (var j = Encoder.BLKSIZE - 1; j >= 0; --j) {\n                var l = wsamp_l[wsamp_lPos + 0][j];\n                var r = wsamp_l[wsamp_lPos + 1][j];\n                wsamp_l[wsamp_lPos + 0][j] = (l + r) * Util.SQRT2 * 0.5;\n                wsamp_l[wsamp_lPos + 1][j] = (l - r) * Util.SQRT2 * 0.5;\n            }\n        }\n\n        /*********************************************************************\n         * compute energies\n         *********************************************************************/\n        fftenergy[0] = NON_LINEAR_SCALE_ENERGY(wsamp_l[wsamp_lPos + 0][0]);\n        fftenergy[0] *= fftenergy[0];\n\n        for (var j = Encoder.BLKSIZE / 2 - 1; j >= 0; --j) {\n            var re = wsamp_l[wsamp_lPos + 0][Encoder.BLKSIZE / 2 - j];\n            var im = wsamp_l[wsamp_lPos + 0][Encoder.BLKSIZE / 2 + j];\n            fftenergy[Encoder.BLKSIZE / 2 - j] = NON_LINEAR_SCALE_ENERGY((re\n                * re + im * im) * 0.5);\n        }\n        /* total energy */\n        {\n            var totalenergy = 0.0;\n            for (var j = 11; j < Encoder.HBLKSIZE; j++)\n                totalenergy += fftenergy[j];\n\n            gfc.tot_ener[chn] = totalenergy;\n        }\n\n        if (gfp.analysis) {\n            for (var j = 0; j < Encoder.HBLKSIZE; j++) {\n                gfc.pinfo.energy[gr_out][chn][j] = gfc.pinfo.energy_save[chn][j];\n                gfc.pinfo.energy_save[chn][j] = fftenergy[j];\n            }\n            gfc.pinfo.pe[gr_out][chn] = gfc.pe[chn];\n        }\n    }\n\n    function vbrpsy_compute_fft_s(gfp, buffer, bufPos, chn, sblock, fftenergy_s, wsamp_s, wsamp_sPos) {\n        var gfc = gfp.internal_flags;\n\n        if (sblock == 0 && chn < 2) {\n            fft.fft_short(gfc, wsamp_s[wsamp_sPos], chn, buffer, bufPos);\n        }\n        if (chn == 2) {\n            /* FFT data for mid and side channel is derived from L & R */\n            for (var j = Encoder.BLKSIZE_s - 1; j >= 0; --j) {\n                var l = wsamp_s[wsamp_sPos + 0][sblock][j];\n                var r = wsamp_s[wsamp_sPos + 1][sblock][j];\n                wsamp_s[wsamp_sPos + 0][sblock][j] = (l + r) * Util.SQRT2 * 0.5;\n                wsamp_s[wsamp_sPos + 1][sblock][j] = (l - r) * Util.SQRT2 * 0.5;\n            }\n        }\n\n        /*********************************************************************\n         * compute energies\n         *********************************************************************/\n        fftenergy_s[sblock][0] = wsamp_s[wsamp_sPos + 0][sblock][0];\n        fftenergy_s[sblock][0] *= fftenergy_s[sblock][0];\n        for (var j = Encoder.BLKSIZE_s / 2 - 1; j >= 0; --j) {\n            var re = wsamp_s[wsamp_sPos + 0][sblock][Encoder.BLKSIZE_s / 2 - j];\n            var im = wsamp_s[wsamp_sPos + 0][sblock][Encoder.BLKSIZE_s / 2 + j];\n            fftenergy_s[sblock][Encoder.BLKSIZE_s / 2 - j] = NON_LINEAR_SCALE_ENERGY((re\n                * re + im * im) * 0.5);\n        }\n    }\n\n    /**\n     * compute loudness approximation (used for ATH auto-level adjustment)\n     */\n    function vbrpsy_compute_loudness_approximation_l(gfp, gr_out, chn, fftenergy) {\n        var gfc = gfp.internal_flags;\n        if (gfp.athaa_loudapprox == 2 && chn < 2) {\n            // no loudness for mid/side ch\n            gfc.loudness_sq[gr_out][chn] = gfc.loudness_sq_save[chn];\n            gfc.loudness_sq_save[chn] = psycho_loudness_approx(fftenergy, gfc);\n        }\n    }\n\n    var fircoef_ = [-8.65163e-18 * 2,\n        -0.00851586 * 2, -6.74764e-18 * 2, 0.0209036 * 2,\n        -3.36639e-17 * 2, -0.0438162 * 2, -1.54175e-17 * 2,\n        0.0931738 * 2, -5.52212e-17 * 2, -0.313819 * 2];\n\n    /**\n     * Apply HPF of fs/4 to the input signal. This is used for attack detection\n     * / handling.\n     */\n    function vbrpsy_attack_detection(gfp, buffer, bufPos, gr_out, masking_ratio, masking_MS_ratio, energy, sub_short_factor, ns_attacks, uselongblock) {\n        var ns_hpfsmpl = new_float_n([2, 576]);\n        var gfc = gfp.internal_flags;\n        var n_chn_out = gfc.channels_out;\n        /* chn=2 and 3 = Mid and Side channels */\n        var n_chn_psy = (gfp.mode == MPEGMode.JOINT_STEREO) ? 4 : n_chn_out;\n        /* Don't copy the input buffer into a temporary buffer */\n        /* unroll the loop 2 times */\n        for (var chn = 0; chn < n_chn_out; chn++) {\n            /* apply high pass filter of fs/4 */\n            firbuf = buffer[chn];\n            var firbufPos = bufPos + 576 - 350 - NSFIRLEN + 192;\n            assert(fircoef_.length == ((NSFIRLEN - 1) / 2));\n            for (var i = 0; i < 576; i++) {\n                var sum1, sum2;\n                sum1 = firbuf[firbufPos + i + 10];\n                sum2 = 0.0;\n                for (var j = 0; j < ((NSFIRLEN - 1) / 2) - 1; j += 2) {\n                    sum1 += fircoef_[j]\n                        * (firbuf[firbufPos + i + j] + firbuf[firbufPos + i\n                        + NSFIRLEN - j]);\n                    sum2 += fircoef_[j + 1]\n                        * (firbuf[firbufPos + i + j + 1] + firbuf[firbufPos\n                        + i + NSFIRLEN - j - 1]);\n                }\n                ns_hpfsmpl[chn][i] = sum1 + sum2;\n            }\n            masking_ratio[gr_out][chn].en.assign(gfc.en[chn]);\n            masking_ratio[gr_out][chn].thm.assign(gfc.thm[chn]);\n            if (n_chn_psy > 2) {\n                /* MS maskings */\n                /* percep_MS_entropy [chn-2] = gfc . pe [chn]; */\n                masking_MS_ratio[gr_out][chn].en.assign(gfc.en[chn + 2]);\n                masking_MS_ratio[gr_out][chn].thm.assign(gfc.thm[chn + 2]);\n            }\n        }\n        for (var chn = 0; chn < n_chn_psy; chn++) {\n            var attack_intensity = new_float(12);\n            var en_subshort = new_float(12);\n            var en_short = [0, 0, 0, 0];\n            var pf = ns_hpfsmpl[chn & 1];\n            var pfPos = 0;\n            var attackThreshold = (chn == 3) ? gfc.nsPsy.attackthre_s\n                : gfc.nsPsy.attackthre;\n            var ns_uselongblock = 1;\n\n            if (chn == 2) {\n                for (var i = 0, j = 576; j > 0; ++i, --j) {\n                    var l = ns_hpfsmpl[0][i];\n                    var r = ns_hpfsmpl[1][i];\n                    ns_hpfsmpl[0][i] = l + r;\n                    ns_hpfsmpl[1][i] = l - r;\n                }\n            }\n            /***************************************************************\n             * determine the block type (window type)\n             ***************************************************************/\n            /* calculate energies of each sub-shortblocks */\n            for (var i = 0; i < 3; i++) {\n                en_subshort[i] = gfc.nsPsy.last_en_subshort[chn][i + 6];\n                assert(gfc.nsPsy.last_en_subshort[chn][i + 4] > 0);\n                attack_intensity[i] = en_subshort[i]\n                    / gfc.nsPsy.last_en_subshort[chn][i + 4];\n                en_short[0] += en_subshort[i];\n            }\n\n            for (var i = 0; i < 9; i++) {\n                var pfe = pfPos + 576 / 9;\n                var p = 1.;\n                for (; pfPos < pfe; pfPos++)\n                    if (p < Math.abs(pf[pfPos]))\n                        p = Math.abs(pf[pfPos]);\n\n                gfc.nsPsy.last_en_subshort[chn][i] = en_subshort[i + 3] = p;\n                en_short[1 + i / 3] += p;\n                if (p > en_subshort[i + 3 - 2]) {\n                    assert(en_subshort[i + 3 - 2] > 0);\n                    p = p / en_subshort[i + 3 - 2];\n                } else if (en_subshort[i + 3 - 2] > p * 10.0) {\n                    assert(p > 0);\n                    p = en_subshort[i + 3 - 2] / (p * 10.0);\n                } else {\n                    p = 0.0;\n                }\n                attack_intensity[i + 3] = p;\n            }\n            /* pulse like signal detection for fatboy.wav and so on */\n            for (var i = 0; i < 3; ++i) {\n                var enn = en_subshort[i * 3 + 3]\n                    + en_subshort[i * 3 + 4] + en_subshort[i * 3 + 5];\n                var factor = 1.;\n                if (en_subshort[i * 3 + 5] * 6 < enn) {\n                    factor *= 0.5;\n                    if (en_subshort[i * 3 + 4] * 6 < enn) {\n                        factor *= 0.5;\n                    }\n                }\n                sub_short_factor[chn][i] = factor;\n            }\n\n            if (gfp.analysis) {\n                var x = attack_intensity[0];\n                for (var i = 1; i < 12; i++) {\n                    if (x < attack_intensity[i]) {\n                        x = attack_intensity[i];\n                    }\n                }\n                gfc.pinfo.ers[gr_out][chn] = gfc.pinfo.ers_save[chn];\n                gfc.pinfo.ers_save[chn] = x;\n            }\n\n            /* compare energies between sub-shortblocks */\n            for (var i = 0; i < 12; i++) {\n                if (0 == ns_attacks[chn][i / 3]\n                    && attack_intensity[i] > attackThreshold) {\n                    ns_attacks[chn][i / 3] = (i % 3) + 1;\n                }\n            }\n\n            /*\n             * should have energy change between short blocks, in order to avoid\n             * periodic signals\n             */\n            /* Good samples to show the effect are Trumpet test songs */\n            /*\n             * GB: tuned (1) to avoid too many short blocks for test sample\n             * TRUMPET\n             */\n            /*\n             * RH: tuned (2) to let enough short blocks through for test sample\n             * FSOL and SNAPS\n             */\n            for (var i = 1; i < 4; i++) {\n                var u = en_short[i - 1];\n                var v = en_short[i];\n                var m = Math.max(u, v);\n                if (m < 40000) { /* (2) */\n                    if (u < 1.7 * v && v < 1.7 * u) { /* (1) */\n                        if (i == 1 && ns_attacks[chn][0] <= ns_attacks[chn][i]) {\n                            ns_attacks[chn][0] = 0;\n                        }\n                        ns_attacks[chn][i] = 0;\n                    }\n                }\n            }\n\n            if (ns_attacks[chn][0] <= gfc.nsPsy.lastAttacks[chn]) {\n                ns_attacks[chn][0] = 0;\n            }\n\n            if (gfc.nsPsy.lastAttacks[chn] == 3\n                || (ns_attacks[chn][0] + ns_attacks[chn][1]\n                + ns_attacks[chn][2] + ns_attacks[chn][3]) != 0) {\n                ns_uselongblock = 0;\n\n                if (ns_attacks[chn][1] != 0 && ns_attacks[chn][0] != 0) {\n                    ns_attacks[chn][1] = 0;\n                }\n                if (ns_attacks[chn][2] != 0 && ns_attacks[chn][1] != 0) {\n                    ns_attacks[chn][2] = 0;\n                }\n                if (ns_attacks[chn][3] != 0 && ns_attacks[chn][2] != 0) {\n                    ns_attacks[chn][3] = 0;\n                }\n            }\n            if (chn < 2) {\n                uselongblock[chn] = ns_uselongblock;\n            } else {\n                if (ns_uselongblock == 0) {\n                    uselongblock[0] = uselongblock[1] = 0;\n                }\n            }\n\n            /*\n             * there is a one granule delay. Copy maskings computed last call\n             * into masking_ratio to return to calling program.\n             */\n            energy[chn] = gfc.tot_ener[chn];\n        }\n    }\n\n    function vbrpsy_skip_masking_s(gfc, chn, sblock) {\n        if (sblock == 0) {\n            for (var b = 0; b < gfc.npart_s; b++) {\n                gfc.nb_s2[chn][b] = gfc.nb_s1[chn][b];\n                gfc.nb_s1[chn][b] = 0;\n            }\n        }\n    }\n\n    function vbrpsy_skip_masking_l(gfc, chn) {\n        for (var b = 0; b < gfc.npart_l; b++) {\n            gfc.nb_2[chn][b] = gfc.nb_1[chn][b];\n            gfc.nb_1[chn][b] = 0;\n        }\n    }\n\n    function psyvbr_calc_mask_index_s(gfc, max, avg, mask_idx) {\n        var last_tab_entry = tab.length - 1;\n        var b = 0;\n        var a = avg[b] + avg[b + 1];\n        assert(a >= 0);\n        if (a > 0.0) {\n            var m = max[b];\n            if (m < max[b + 1])\n                m = max[b + 1];\n            assert((gfc.numlines_s[b] + gfc.numlines_s[b + 1] - 1) > 0);\n            a = 20.0 * (m * 2.0 - a)\n                / (a * (gfc.numlines_s[b] + gfc.numlines_s[b + 1] - 1));\n            var k = 0 | a;\n            if (k > last_tab_entry)\n                k = last_tab_entry;\n            mask_idx[b] = k;\n        } else {\n            mask_idx[b] = 0;\n        }\n\n        for (b = 1; b < gfc.npart_s - 1; b++) {\n            a = avg[b - 1] + avg[b] + avg[b + 1];\n            assert(b + 1 < gfc.npart_s);\n            assert(a >= 0);\n            if (a > 0.0) {\n                var m = max[b - 1];\n                if (m < max[b])\n                    m = max[b];\n                if (m < max[b + 1])\n                    m = max[b + 1];\n                assert((gfc.numlines_s[b - 1] + gfc.numlines_s[b] + gfc.numlines_s[b + 1] - 1) > 0);\n                a = 20.0\n                    * (m * 3.0 - a)\n                    / (a * (gfc.numlines_s[b - 1] + gfc.numlines_s[b]\n                    + gfc.numlines_s[b + 1] - 1));\n                var k = 0 | a;\n                if (k > last_tab_entry)\n                    k = last_tab_entry;\n                mask_idx[b] = k;\n            } else {\n                mask_idx[b] = 0;\n            }\n        }\n        assert(b > 0);\n        assert(b == gfc.npart_s - 1);\n\n        a = avg[b - 1] + avg[b];\n        assert(a >= 0);\n        if (a > 0.0) {\n            var m = max[b - 1];\n            if (m < max[b])\n                m = max[b];\n            assert((gfc.numlines_s[b - 1] + gfc.numlines_s[b] - 1) > 0);\n            a = 20.0 * (m * 2.0 - a)\n                / (a * (gfc.numlines_s[b - 1] + gfc.numlines_s[b] - 1));\n            var k = 0 | a;\n            if (k > last_tab_entry)\n                k = last_tab_entry;\n            mask_idx[b] = k;\n        } else {\n            mask_idx[b] = 0;\n        }\n        assert(b == (gfc.npart_s - 1));\n    }\n\n    function vbrpsy_compute_masking_s(gfp, fftenergy_s, eb, thr, chn, sblock) {\n        var gfc = gfp.internal_flags;\n        var max = new float[Encoder.CBANDS], avg = new_float(Encoder.CBANDS);\n        var i, j, b;\n        var mask_idx_s = new int[Encoder.CBANDS];\n\n        for (b = j = 0; b < gfc.npart_s; ++b) {\n            var ebb = 0, m = 0;\n            var n = gfc.numlines_s[b];\n            for (i = 0; i < n; ++i, ++j) {\n                var el = fftenergy_s[sblock][j];\n                ebb += el;\n                if (m < el)\n                    m = el;\n            }\n            eb[b] = ebb;\n            assert(ebb >= 0);\n            max[b] = m;\n            assert(n > 0);\n            avg[b] = ebb / n;\n            assert(avg[b] >= 0);\n        }\n        assert(b == gfc.npart_s);\n        assert(j == 129);\n        for (; b < Encoder.CBANDS; ++b) {\n            max[b] = 0;\n            avg[b] = 0;\n        }\n        psyvbr_calc_mask_index_s(gfc, max, avg, mask_idx_s);\n        for (j = b = 0; b < gfc.npart_s; b++) {\n            var kk = gfc.s3ind_s[b][0];\n            var last = gfc.s3ind_s[b][1];\n            var dd, dd_n;\n            var x, ecb, avg_mask;\n            dd = mask_idx_s[kk];\n            dd_n = 1;\n            ecb = gfc.s3_ss[j] * eb[kk] * tab[mask_idx_s[kk]];\n            ++j;\n            ++kk;\n            while (kk <= last) {\n                dd += mask_idx_s[kk];\n                dd_n += 1;\n                x = gfc.s3_ss[j] * eb[kk] * tab[mask_idx_s[kk]];\n                ecb = vbrpsy_mask_add(ecb, x, kk - b);\n                ++j;\n                ++kk;\n            }\n            dd = (1 + 2 * dd) / (2 * dd_n);\n            avg_mask = tab[dd] * 0.5;\n            ecb *= avg_mask;\n            thr[b] = ecb;\n            gfc.nb_s2[chn][b] = gfc.nb_s1[chn][b];\n            gfc.nb_s1[chn][b] = ecb;\n            {\n                /*\n                 * if THR exceeds EB, the quantization routines will take the\n                 * difference from other bands. in case of strong tonal samples\n                 * (tonaltest.wav) this leads to heavy distortions. that's why\n                 * we limit THR here.\n                 */\n                x = max[b];\n                x *= gfc.minval_s[b];\n                x *= avg_mask;\n                if (thr[b] > x) {\n                    thr[b] = x;\n                }\n            }\n            if (gfc.masking_lower > 1) {\n                thr[b] *= gfc.masking_lower;\n            }\n            if (thr[b] > eb[b]) {\n                thr[b] = eb[b];\n            }\n            if (gfc.masking_lower < 1) {\n                thr[b] *= gfc.masking_lower;\n            }\n\n            assert(thr[b] >= 0);\n        }\n        for (; b < Encoder.CBANDS; ++b) {\n            eb[b] = 0;\n            thr[b] = 0;\n        }\n    }\n\n    function vbrpsy_compute_masking_l(gfc, fftenergy, eb_l, thr, chn) {\n        var max = new_float(Encoder.CBANDS), avg = new_float(Encoder.CBANDS);\n        var mask_idx_l = new_int(Encoder.CBANDS + 2);\n        var b;\n\n        /*********************************************************************\n         * Calculate the energy and the tonality of each partition.\n         *********************************************************************/\n        calc_energy(gfc, fftenergy, eb_l, max, avg);\n        calc_mask_index_l(gfc, max, avg, mask_idx_l);\n\n        /*********************************************************************\n         * convolve the partitioned energy and unpredictability with the\n         * spreading function, s3_l[b][k]\n         ********************************************************************/\n        var k = 0;\n        for (b = 0; b < gfc.npart_l; b++) {\n            var x, ecb, avg_mask, t;\n            /* convolve the partitioned energy with the spreading function */\n            var kk = gfc.s3ind[b][0];\n            var last = gfc.s3ind[b][1];\n            var dd = 0, dd_n = 0;\n            dd = mask_idx_l[kk];\n            dd_n += 1;\n            ecb = gfc.s3_ll[k] * eb_l[kk] * tab[mask_idx_l[kk]];\n            ++k;\n            ++kk;\n            while (kk <= last) {\n                dd += mask_idx_l[kk];\n                dd_n += 1;\n                x = gfc.s3_ll[k] * eb_l[kk] * tab[mask_idx_l[kk]];\n                t = vbrpsy_mask_add(ecb, x, kk - b);\n                ecb = t;\n                ++k;\n                ++kk;\n            }\n            dd = (1 + 2 * dd) / (2 * dd_n);\n            avg_mask = tab[dd] * 0.5;\n            ecb *= avg_mask;\n\n            /**** long block pre-echo control ****/\n            /**\n             * <PRE>\n             * dont use long block pre-echo control if previous granule was\n             * a short block.  This is to avoid the situation:\n             * frame0:  quiet (very low masking)\n             * frame1:  surge  (triggers short blocks)\n             * frame2:  regular frame.  looks like pre-echo when compared to\n             *          frame0, but all pre-echo was in frame1.\n             * </PRE>\n             */\n            /*\n             * chn=0,1 L and R channels chn=2,3 S and M channels.\n             */\n            if (gfc.blocktype_old[chn & 0x01] == Encoder.SHORT_TYPE) {\n                var ecb_limit = rpelev * gfc.nb_1[chn][b];\n                if (ecb_limit > 0) {\n                    thr[b] = Math.min(ecb, ecb_limit);\n                } else {\n                    /**\n                     * <PRE>\n                     * Robert 071209:\n                     * Because we don't calculate long block psy when we know a granule\n                     * should be of short blocks, we don't have any clue how the granule\n                     * before would have looked like as a long block. So we have to guess\n                     * a little bit for this END_TYPE block.\n                     * Most of the time we get away with this sloppyness. (fingers crossed :)\n                     * The speed increase is worth it.\n                     * </PRE>\n                     */\n                    thr[b] = Math.min(ecb, eb_l[b] * NS_PREECHO_ATT2);\n                }\n            } else {\n                var ecb_limit_2 = rpelev2 * gfc.nb_2[chn][b];\n                var ecb_limit_1 = rpelev * gfc.nb_1[chn][b];\n                var ecb_limit;\n                if (ecb_limit_2 <= 0) {\n                    ecb_limit_2 = ecb;\n                }\n                if (ecb_limit_1 <= 0) {\n                    ecb_limit_1 = ecb;\n                }\n                if (gfc.blocktype_old[chn & 0x01] == Encoder.NORM_TYPE) {\n                    ecb_limit = Math.min(ecb_limit_1, ecb_limit_2);\n                } else {\n                    ecb_limit = ecb_limit_1;\n                }\n                thr[b] = Math.min(ecb, ecb_limit);\n            }\n            gfc.nb_2[chn][b] = gfc.nb_1[chn][b];\n            gfc.nb_1[chn][b] = ecb;\n            {\n                /*\n                 * if THR exceeds EB, the quantization routines will take the\n                 * difference from other bands. in case of strong tonal samples\n                 * (tonaltest.wav) this leads to heavy distortions. that's why\n                 * we limit THR here.\n                 */\n                x = max[b];\n                x *= gfc.minval_l[b];\n                x *= avg_mask;\n                if (thr[b] > x) {\n                    thr[b] = x;\n                }\n            }\n            if (gfc.masking_lower > 1) {\n                thr[b] *= gfc.masking_lower;\n            }\n            if (thr[b] > eb_l[b]) {\n                thr[b] = eb_l[b];\n            }\n            if (gfc.masking_lower < 1) {\n                thr[b] *= gfc.masking_lower;\n            }\n            assert(thr[b] >= 0);\n        }\n        for (; b < Encoder.CBANDS; ++b) {\n            eb_l[b] = 0;\n            thr[b] = 0;\n        }\n    }\n\n    function vbrpsy_compute_block_type(gfp, uselongblock) {\n        var gfc = gfp.internal_flags;\n\n        if (gfp.short_blocks == ShortBlock.short_block_coupled\n                /* force both channels to use the same block type */\n                /* this is necessary if the frame is to be encoded in ms_stereo. */\n                /* But even without ms_stereo, FhG does this */\n            && !(uselongblock[0] != 0 && uselongblock[1] != 0))\n            uselongblock[0] = uselongblock[1] = 0;\n\n        for (var chn = 0; chn < gfc.channels_out; chn++) {\n            /* disable short blocks */\n            if (gfp.short_blocks == ShortBlock.short_block_dispensed) {\n                uselongblock[chn] = 1;\n            }\n            if (gfp.short_blocks == ShortBlock.short_block_forced) {\n                uselongblock[chn] = 0;\n            }\n        }\n    }\n\n    function vbrpsy_apply_block_type(gfp, uselongblock, blocktype_d) {\n        var gfc = gfp.internal_flags;\n\n        /*\n         * update the blocktype of the previous granule, since it depends on\n         * what happend in this granule\n         */\n        for (var chn = 0; chn < gfc.channels_out; chn++) {\n            var blocktype = Encoder.NORM_TYPE;\n            /* disable short blocks */\n\n            if (uselongblock[chn] != 0) {\n                /* no attack : use long blocks */\n                assert(gfc.blocktype_old[chn] != Encoder.START_TYPE);\n                if (gfc.blocktype_old[chn] == Encoder.SHORT_TYPE)\n                    blocktype = Encoder.STOP_TYPE;\n            } else {\n                /* attack : use short blocks */\n                blocktype = Encoder.SHORT_TYPE;\n                if (gfc.blocktype_old[chn] == Encoder.NORM_TYPE) {\n                    gfc.blocktype_old[chn] = Encoder.START_TYPE;\n                }\n                if (gfc.blocktype_old[chn] == Encoder.STOP_TYPE)\n                    gfc.blocktype_old[chn] = Encoder.SHORT_TYPE;\n            }\n\n            blocktype_d[chn] = gfc.blocktype_old[chn];\n            // value returned to calling program\n            gfc.blocktype_old[chn] = blocktype;\n            // save for next call to l3psy_anal\n        }\n    }\n\n    /**\n     * compute M/S thresholds from Johnston & Ferreira 1992 ICASSP paper\n     */\n    function vbrpsy_compute_MS_thresholds(eb, thr, cb_mld, ath_cb, athadjust, msfix, n) {\n        var msfix2 = msfix * 2;\n        var athlower = msfix > 0 ? Math.pow(10, athadjust) : 1;\n        var rside, rmid;\n        for (var b = 0; b < n; ++b) {\n            var ebM = eb[2][b];\n            var ebS = eb[3][b];\n            var thmL = thr[0][b];\n            var thmR = thr[1][b];\n            var thmM = thr[2][b];\n            var thmS = thr[3][b];\n\n            /* use this fix if L & R masking differs by 2db or less */\n            if (thmL <= 1.58 * thmR && thmR <= 1.58 * thmL) {\n                var mld_m = cb_mld[b] * ebS;\n                var mld_s = cb_mld[b] * ebM;\n                rmid = Math.max(thmM, Math.min(thmS, mld_m));\n                rside = Math.max(thmS, Math.min(thmM, mld_s));\n            } else {\n                rmid = thmM;\n                rside = thmS;\n            }\n            if (msfix > 0) {\n                /***************************************************************/\n                /* Adjust M/S maskings if user set \"msfix\" */\n                /***************************************************************/\n                /* Naoki Shibata 2000 */\n                var thmLR, thmMS;\n                var ath = ath_cb[b] * athlower;\n                thmLR = Math.min(Math.max(thmL, ath), Math.max(thmR, ath));\n                thmM = Math.max(rmid, ath);\n                thmS = Math.max(rside, ath);\n                thmMS = thmM + thmS;\n                if (thmMS > 0 && (thmLR * msfix2) < thmMS) {\n                    var f = thmLR * msfix2 / thmMS;\n                    thmM *= f;\n                    thmS *= f;\n                    assert(thmMS > 0);\n                }\n                rmid = Math.min(thmM, rmid);\n                rside = Math.min(thmS, rside);\n            }\n            if (rmid > ebM) {\n                rmid = ebM;\n            }\n            if (rside > ebS) {\n                rside = ebS;\n            }\n            thr[2][b] = rmid;\n            thr[3][b] = rside;\n        }\n    }\n\n    this.L3psycho_anal_vbr = function (gfp, buffer, bufPos, gr_out, masking_ratio, masking_MS_ratio, percep_entropy, percep_MS_entropy, energy, blocktype_d) {\n        var gfc = gfp.internal_flags;\n\n        /* fft and energy calculation */\n        var wsamp_l;\n        var wsamp_s;\n        var fftenergy = new_float(Encoder.HBLKSIZE);\n        var fftenergy_s = new_float_n([3, Encoder.HBLKSIZE_s]);\n        var wsamp_L = new_float_n([2, Encoder.BLKSIZE]);\n        var wsamp_S = new_float_n([2, 3, Encoder.BLKSIZE_s]);\n        var eb = new_float_n([4, Encoder.CBANDS]), thr = new_float_n([4, Encoder.CBANDS]);\n        var sub_short_factor = new_float_n([4, 3]);\n        var pcfact = 0.6;\n\n        /* block type */\n        var ns_attacks = [[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0],\n            [0, 0, 0, 0]];\n        var uselongblock = new_int(2);\n\n        /* usual variables like loop indices, etc.. */\n\n        /* chn=2 and 3 = Mid and Side channels */\n        var n_chn_psy = (gfp.mode == MPEGMode.JOINT_STEREO) ? 4\n            : gfc.channels_out;\n\n        vbrpsy_attack_detection(gfp, buffer, bufPos, gr_out, masking_ratio,\n            masking_MS_ratio, energy, sub_short_factor, ns_attacks,\n            uselongblock);\n\n        vbrpsy_compute_block_type(gfp, uselongblock);\n\n        /* LONG BLOCK CASE */\n        {\n            for (var chn = 0; chn < n_chn_psy; chn++) {\n                var ch01 = chn & 0x01;\n                wsamp_l = wsamp_L;\n                vbrpsy_compute_fft_l(gfp, buffer, bufPos, chn, gr_out,\n                    fftenergy, wsamp_l, ch01);\n\n                vbrpsy_compute_loudness_approximation_l(gfp, gr_out, chn,\n                    fftenergy);\n\n                if (uselongblock[ch01] != 0) {\n                    vbrpsy_compute_masking_l(gfc, fftenergy, eb[chn], thr[chn],\n                        chn);\n                } else {\n                    vbrpsy_skip_masking_l(gfc, chn);\n                }\n            }\n            if ((uselongblock[0] + uselongblock[1]) == 2) {\n                /* M/S channel */\n                if (gfp.mode == MPEGMode.JOINT_STEREO) {\n                    vbrpsy_compute_MS_thresholds(eb, thr, gfc.mld_cb_l,\n                        gfc.ATH.cb_l, gfp.ATHlower * gfc.ATH.adjust,\n                        gfp.msfix, gfc.npart_l);\n                }\n            }\n            /* TODO: apply adaptive ATH masking here ?? */\n            for (var chn = 0; chn < n_chn_psy; chn++) {\n                var ch01 = chn & 0x01;\n                if (uselongblock[ch01] != 0) {\n                    convert_partition2scalefac_l(gfc, eb[chn], thr[chn], chn);\n                }\n            }\n        }\n\n        /* SHORT BLOCKS CASE */\n        {\n            for (var sblock = 0; sblock < 3; sblock++) {\n                for (var chn = 0; chn < n_chn_psy; ++chn) {\n                    var ch01 = chn & 0x01;\n\n                    if (uselongblock[ch01] != 0) {\n                        vbrpsy_skip_masking_s(gfc, chn, sblock);\n                    } else {\n                        /* compute masking thresholds for short blocks */\n                        wsamp_s = wsamp_S;\n                        vbrpsy_compute_fft_s(gfp, buffer, bufPos, chn, sblock,\n                            fftenergy_s, wsamp_s, ch01);\n                        vbrpsy_compute_masking_s(gfp, fftenergy_s, eb[chn],\n                            thr[chn], chn, sblock);\n                    }\n                }\n                if ((uselongblock[0] + uselongblock[1]) == 0) {\n                    /* M/S channel */\n                    if (gfp.mode == MPEGMode.JOINT_STEREO) {\n                        vbrpsy_compute_MS_thresholds(eb, thr, gfc.mld_cb_s,\n                            gfc.ATH.cb_s, gfp.ATHlower * gfc.ATH.adjust,\n                            gfp.msfix, gfc.npart_s);\n                    }\n                    /* L/R channel */\n                }\n                /* TODO: apply adaptive ATH masking here ?? */\n                for (var chn = 0; chn < n_chn_psy; ++chn) {\n                    var ch01 = chn & 0x01;\n                    if (0 == uselongblock[ch01]) {\n                        convert_partition2scalefac_s(gfc, eb[chn], thr[chn],\n                            chn, sblock);\n                    }\n                }\n            }\n\n            /**** short block pre-echo control ****/\n            for (var chn = 0; chn < n_chn_psy; chn++) {\n                var ch01 = chn & 0x01;\n\n                if (uselongblock[ch01] != 0) {\n                    continue;\n                }\n                for (var sb = 0; sb < Encoder.SBMAX_s; sb++) {\n                    var new_thmm = new_float(3);\n                    for (var sblock = 0; sblock < 3; sblock++) {\n                        var thmm = gfc.thm[chn].s[sb][sblock];\n                        thmm *= NS_PREECHO_ATT0;\n\n                        if (ns_attacks[chn][sblock] >= 2\n                            || ns_attacks[chn][sblock + 1] == 1) {\n                            var idx = (sblock != 0) ? sblock - 1 : 2;\n                            var p = NS_INTERP(gfc.thm[chn].s[sb][idx], thmm,\n                                NS_PREECHO_ATT1 * pcfact);\n                            thmm = Math.min(thmm, p);\n                        } else if (ns_attacks[chn][sblock] == 1) {\n                            var idx = (sblock != 0) ? sblock - 1 : 2;\n                            var p = NS_INTERP(gfc.thm[chn].s[sb][idx], thmm,\n                                NS_PREECHO_ATT2 * pcfact);\n                            thmm = Math.min(thmm, p);\n                        } else if ((sblock != 0 && ns_attacks[chn][sblock - 1] == 3)\n                            || (sblock == 0 && gfc.nsPsy.lastAttacks[chn] == 3)) {\n                            var idx = (sblock != 2) ? sblock + 1 : 0;\n                            var p = NS_INTERP(gfc.thm[chn].s[sb][idx], thmm,\n                                NS_PREECHO_ATT2 * pcfact);\n                            thmm = Math.min(thmm, p);\n                        }\n\n                        /* pulse like signal detection for fatboy.wav and so on */\n                        thmm *= sub_short_factor[chn][sblock];\n\n                        new_thmm[sblock] = thmm;\n                    }\n                    for (var sblock = 0; sblock < 3; sblock++) {\n                        gfc.thm[chn].s[sb][sblock] = new_thmm[sblock];\n                    }\n                }\n            }\n        }\n        for (var chn = 0; chn < n_chn_psy; chn++) {\n            gfc.nsPsy.lastAttacks[chn] = ns_attacks[chn][2];\n        }\n\n        /***************************************************************\n         * determine final block type\n         ***************************************************************/\n        vbrpsy_apply_block_type(gfp, uselongblock, blocktype_d);\n\n        /*********************************************************************\n         * compute the value of PE to return ... no delay and advance\n         *********************************************************************/\n        for (var chn = 0; chn < n_chn_psy; chn++) {\n            var ppe;\n            var ppePos;\n            var type;\n            var mr;\n\n            if (chn > 1) {\n                ppe = percep_MS_entropy;\n                ppePos = -2;\n                type = Encoder.NORM_TYPE;\n                if (blocktype_d[0] == Encoder.SHORT_TYPE\n                    || blocktype_d[1] == Encoder.SHORT_TYPE)\n                    type = Encoder.SHORT_TYPE;\n                mr = masking_MS_ratio[gr_out][chn - 2];\n            } else {\n                ppe = percep_entropy;\n                ppePos = 0;\n                type = blocktype_d[chn];\n                mr = masking_ratio[gr_out][chn];\n            }\n\n            if (type == Encoder.SHORT_TYPE) {\n                ppe[ppePos + chn] = pecalc_s(mr, gfc.masking_lower);\n            } else {\n                ppe[ppePos + chn] = pecalc_l(mr, gfc.masking_lower);\n            }\n\n            if (gfp.analysis) {\n                gfc.pinfo.pe[gr_out][chn] = ppe[ppePos + chn];\n            }\n        }\n        return 0;\n    }\n\n    function s3_func_x(bark, hf_slope) {\n        var tempx = bark, tempy;\n\n        if (tempx >= 0) {\n            tempy = -tempx * 27;\n        } else {\n            tempy = tempx * hf_slope;\n        }\n        if (tempy <= -72.0) {\n            return 0;\n        }\n        return Math.exp(tempy * LN_TO_LOG10);\n    }\n\n    function norm_s3_func_x(hf_slope) {\n        var lim_a = 0, lim_b = 0;\n        {\n            var x = 0, l, h;\n            for (x = 0; s3_func_x(x, hf_slope) > 1e-20; x -= 1)\n                ;\n            l = x;\n            h = 0;\n            while (Math.abs(h - l) > 1e-12) {\n                x = (h + l) / 2;\n                if (s3_func_x(x, hf_slope) > 0) {\n                    h = x;\n                } else {\n                    l = x;\n                }\n            }\n            lim_a = l;\n        }\n        {\n            var x = 0, l, h;\n            for (x = 0; s3_func_x(x, hf_slope) > 1e-20; x += 1)\n                ;\n            l = 0;\n            h = x;\n            while (Math.abs(h - l) > 1e-12) {\n                x = (h + l) / 2;\n                if (s3_func_x(x, hf_slope) > 0) {\n                    l = x;\n                } else {\n                    h = x;\n                }\n            }\n            lim_b = h;\n        }\n        {\n            var sum = 0;\n            var m = 1000;\n            var i;\n            for (i = 0; i <= m; ++i) {\n                var x = lim_a + i * (lim_b - lim_a) / m;\n                var y = s3_func_x(x, hf_slope);\n                sum += y;\n            }\n            {\n                var norm = (m + 1) / (sum * (lim_b - lim_a));\n                /* printf( \"norm = %lf\\n\",norm); */\n                return norm;\n            }\n        }\n    }\n\n    /**\n     *   The spreading function.  Values returned in units of energy\n     */\n    function s3_func(bark) {\n        var tempx, x, tempy, temp;\n        tempx = bark;\n        if (tempx >= 0)\n            tempx *= 3;\n        else\n            tempx *= 1.5;\n\n        if (tempx >= 0.5 && tempx <= 2.5) {\n            temp = tempx - 0.5;\n            x = 8.0 * (temp * temp - 2.0 * temp);\n        } else\n            x = 0.0;\n        tempx += 0.474;\n        tempy = 15.811389 + 7.5 * tempx - 17.5\n            * Math.sqrt(1.0 + tempx * tempx);\n\n        if (tempy <= -60.0)\n            return 0.0;\n\n        tempx = Math.exp((x + tempy) * LN_TO_LOG10);\n\n        /**\n         * <PRE>\n         * Normalization.  The spreading function should be normalized so that:\n         * +inf\n         * /\n         * |  s3 [ bark ]  d(bark)   =  1\n         * /\n         * -inf\n         * </PRE>\n         */\n        tempx /= .6609193;\n        return tempx;\n    }\n\n    /**\n     * see for example \"Zwicker: Psychoakustik, 1982; ISBN 3-540-11401-7\n     */\n    function freq2bark(freq) {\n        /* input: freq in hz output: barks */\n        if (freq < 0)\n            freq = 0;\n        freq = freq * 0.001;\n        return 13.0 * Math.atan(.76 * freq) + 3.5\n            * Math.atan(freq * freq / (7.5 * 7.5));\n    }\n\n    function init_numline(numlines, bo, bm, bval, bval_width, mld, bo_w, sfreq, blksize, scalepos, deltafreq, sbmax) {\n        var b_frq = new_float(Encoder.CBANDS + 1);\n        var sample_freq_frac = sfreq / (sbmax > 15 ? 2 * 576 : 2 * 192);\n        var partition = new_int(Encoder.HBLKSIZE);\n        var i;\n        sfreq /= blksize;\n        var j = 0;\n        var ni = 0;\n        /* compute numlines, the number of spectral lines in each partition band */\n        /* each partition band should be about DELBARK wide. */\n        for (i = 0; i < Encoder.CBANDS; i++) {\n            var bark1;\n            var j2;\n            bark1 = freq2bark(sfreq * j);\n\n            b_frq[i] = sfreq * j;\n\n            for (j2 = j; freq2bark(sfreq * j2) - bark1 < DELBARK\n            && j2 <= blksize / 2; j2++)\n                ;\n\n            numlines[i] = j2 - j;\n            ni = i + 1;\n\n            while (j < j2) {\n                assert(j < Encoder.HBLKSIZE);\n                partition[j++] = i;\n            }\n            if (j > blksize / 2) {\n                j = blksize / 2;\n                ++i;\n                break;\n            }\n        }\n        assert(i < Encoder.CBANDS);\n        b_frq[i] = sfreq * j;\n\n        for (var sfb = 0; sfb < sbmax; sfb++) {\n            var i1, i2, start, end;\n            var arg;\n            start = scalepos[sfb];\n            end = scalepos[sfb + 1];\n\n            i1 = 0 | Math.floor(.5 + deltafreq * (start - .5));\n            if (i1 < 0)\n                i1 = 0;\n            i2 = 0 | Math.floor(.5 + deltafreq * (end - .5));\n\n            if (i2 > blksize / 2)\n                i2 = blksize / 2;\n\n            bm[sfb] = (partition[i1] + partition[i2]) / 2;\n            bo[sfb] = partition[i2];\n            var f_tmp = sample_freq_frac * end;\n            /*\n             * calculate how much of this band belongs to current scalefactor\n             * band\n             */\n            bo_w[sfb] = (f_tmp - b_frq[bo[sfb]])\n                / (b_frq[bo[sfb] + 1] - b_frq[bo[sfb]]);\n            if (bo_w[sfb] < 0) {\n                bo_w[sfb] = 0;\n            } else {\n                if (bo_w[sfb] > 1) {\n                    bo_w[sfb] = 1;\n                }\n            }\n            /* setup stereo demasking thresholds */\n            /* formula reverse enginerred from plot in paper */\n            arg = freq2bark(sfreq * scalepos[sfb] * deltafreq);\n            arg = ( Math.min(arg, 15.5) / 15.5);\n\n            mld[sfb] = Math.pow(10.0,\n                1.25 * (1 - Math.cos(Math.PI * arg)) - 2.5);\n        }\n\n        /* compute bark values of each critical band */\n        j = 0;\n        for (var k = 0; k < ni; k++) {\n            var w = numlines[k];\n            var bark1, bark2;\n\n            bark1 = freq2bark(sfreq * (j));\n            bark2 = freq2bark(sfreq * (j + w - 1));\n            bval[k] = .5 * (bark1 + bark2);\n\n            bark1 = freq2bark(sfreq * (j - .5));\n            bark2 = freq2bark(sfreq * (j + w - .5));\n            bval_width[k] = bark2 - bark1;\n            j += w;\n        }\n\n        return ni;\n    }\n\n    function init_s3_values(s3ind, npart, bval, bval_width, norm, use_old_s3) {\n        var s3 = new_float_n([Encoder.CBANDS, Encoder.CBANDS]);\n        /*\n         * The s3 array is not linear in the bark scale.\n         *\n         * bval[x] should be used to get the bark value.\n         */\n        var j;\n        var numberOfNoneZero = 0;\n\n        /**\n         * <PRE>\n         * s[i][j], the value of the spreading function,\n         * centered at band j (masker), for band i (maskee)\n         *\n         * i.e.: sum over j to spread into signal barkval=i\n         * NOTE: i and j are used opposite as in the ISO docs\n         * </PRE>\n         */\n        if (use_old_s3) {\n            for (var i = 0; i < npart; i++) {\n                for (j = 0; j < npart; j++) {\n                    var v = s3_func(bval[i] - bval[j]) * bval_width[j];\n                    s3[i][j] = v * norm[i];\n                }\n            }\n        } else {\n            for (j = 0; j < npart; j++) {\n                var hf_slope = 15 + Math.min(21 / bval[j], 12);\n                var s3_x_norm = norm_s3_func_x(hf_slope);\n                for (var i = 0; i < npart; i++) {\n                    var v = s3_x_norm\n                        * s3_func_x(bval[i] - bval[j], hf_slope)\n                        * bval_width[j];\n                    s3[i][j] = v * norm[i];\n                }\n            }\n        }\n        for (var i = 0; i < npart; i++) {\n            for (j = 0; j < npart; j++) {\n                if (s3[i][j] > 0.0)\n                    break;\n            }\n            s3ind[i][0] = j;\n\n            for (j = npart - 1; j > 0; j--) {\n                if (s3[i][j] > 0.0)\n                    break;\n            }\n            s3ind[i][1] = j;\n            numberOfNoneZero += (s3ind[i][1] - s3ind[i][0] + 1);\n        }\n\n        var p = new_float(numberOfNoneZero);\n        var k = 0;\n        for (var i = 0; i < npart; i++)\n            for (j = s3ind[i][0]; j <= s3ind[i][1]; j++)\n                p[k++] = s3[i][j];\n\n        return p;\n    }\n\n    function stereo_demask(f) {\n        /* setup stereo demasking thresholds */\n        /* formula reverse enginerred from plot in paper */\n        var arg = freq2bark(f);\n        arg = (Math.min(arg, 15.5) / 15.5);\n\n        return Math.pow(10.0,\n            1.25 * (1 - Math.cos(Math.PI * arg)) - 2.5);\n    }\n\n    /**\n     * NOTE: the bitrate reduction from the inter-channel masking effect is low\n     * compared to the chance of getting annyoing artefacts. L3psycho_anal_vbr\n     * does not use this feature. (Robert 071216)\n     */\n    this.psymodel_init = function (gfp) {\n        var gfc = gfp.internal_flags;\n        var i;\n        var useOldS3 = true;\n        var bvl_a = 13, bvl_b = 24;\n        var snr_l_a = 0, snr_l_b = 0;\n        var snr_s_a = -8.25, snr_s_b = -4.5;\n        var bval = new_float(Encoder.CBANDS);\n        var bval_width = new_float(Encoder.CBANDS);\n        var norm = new_float(Encoder.CBANDS);\n        var sfreq = gfp.out_samplerate;\n\n        switch (gfp.experimentalZ) {\n            default:\n            case 0:\n                useOldS3 = true;\n                break;\n            case 1:\n                useOldS3 = (gfp.VBR == VbrMode.vbr_mtrh || gfp.VBR == VbrMode.vbr_mt) ? false\n                    : true;\n                break;\n            case 2:\n                useOldS3 = false;\n                break;\n            case 3:\n                bvl_a = 8;\n                snr_l_a = -1.75;\n                snr_l_b = -0.0125;\n                snr_s_a = -8.25;\n                snr_s_b = -2.25;\n                break;\n        }\n        gfc.ms_ener_ratio_old = .25;\n        gfc.blocktype_old[0] = gfc.blocktype_old[1] = Encoder.NORM_TYPE;\n        // the vbr header is long blocks\n\n        for (i = 0; i < 4; ++i) {\n            for (var j = 0; j < Encoder.CBANDS; ++j) {\n                gfc.nb_1[i][j] = 1e20;\n                gfc.nb_2[i][j] = 1e20;\n                gfc.nb_s1[i][j] = gfc.nb_s2[i][j] = 1.0;\n            }\n            for (var sb = 0; sb < Encoder.SBMAX_l; sb++) {\n                gfc.en[i].l[sb] = 1e20;\n                gfc.thm[i].l[sb] = 1e20;\n            }\n            for (var j = 0; j < 3; ++j) {\n                for (var sb = 0; sb < Encoder.SBMAX_s; sb++) {\n                    gfc.en[i].s[sb][j] = 1e20;\n                    gfc.thm[i].s[sb][j] = 1e20;\n                }\n                gfc.nsPsy.lastAttacks[i] = 0;\n            }\n            for (var j = 0; j < 9; j++)\n                gfc.nsPsy.last_en_subshort[i][j] = 10.;\n        }\n\n        /* init. for loudness approx. -jd 2001 mar 27 */\n        gfc.loudness_sq_save[0] = gfc.loudness_sq_save[1] = 0.0;\n\n        /*************************************************************************\n         * now compute the psychoacoustic model specific constants\n         ************************************************************************/\n        /* compute numlines, bo, bm, bval, bval_width, mld */\n\n        gfc.npart_l = init_numline(gfc.numlines_l, gfc.bo_l, gfc.bm_l, bval,\n            bval_width, gfc.mld_l, gfc.PSY.bo_l_weight, sfreq,\n            Encoder.BLKSIZE, gfc.scalefac_band.l, Encoder.BLKSIZE\n            / (2.0 * 576), Encoder.SBMAX_l);\n        assert(gfc.npart_l < Encoder.CBANDS);\n        /* compute the spreading function */\n        for (i = 0; i < gfc.npart_l; i++) {\n            var snr = snr_l_a;\n            if (bval[i] >= bvl_a) {\n                snr = snr_l_b * (bval[i] - bvl_a) / (bvl_b - bvl_a) + snr_l_a\n                    * (bvl_b - bval[i]) / (bvl_b - bvl_a);\n            }\n            norm[i] = Math.pow(10.0, snr / 10.0);\n            if (gfc.numlines_l[i] > 0) {\n                gfc.rnumlines_l[i] = 1.0 / gfc.numlines_l[i];\n            } else {\n                gfc.rnumlines_l[i] = 0;\n            }\n        }\n        gfc.s3_ll = init_s3_values(gfc.s3ind, gfc.npart_l, bval, bval_width,\n            norm, useOldS3);\n\n        /* compute long block specific values, ATH and MINVAL */\n        var j = 0;\n        for (i = 0; i < gfc.npart_l; i++) {\n            var x;\n\n            /* ATH */\n            x = Float.MAX_VALUE;\n            for (var k = 0; k < gfc.numlines_l[i]; k++, j++) {\n                var freq = sfreq * j / (1000.0 * Encoder.BLKSIZE);\n                var level;\n                /*\n                 * ATH below 100 Hz constant, not further climbing\n                 */\n                level = this.ATHformula(freq * 1000, gfp) - 20;\n                // scale to FFT units; returned value is in dB\n                level = Math.pow(10., 0.1 * level);\n                // convert from dB . energy\n                level *= gfc.numlines_l[i];\n                if (x > level)\n                    x = level;\n            }\n            gfc.ATH.cb_l[i] = x;\n\n            /*\n             * MINVAL. For low freq, the strength of the masking is limited by\n             * minval this is an ISO MPEG1 thing, dont know if it is really\n             * needed\n             */\n            /*\n             * FIXME: it does work to reduce low-freq problems in S53-Wind-Sax\n             * and lead-voice samples, but introduces some 3 kbps bit bloat too.\n             * TODO: Further refinement of the shape of this hack.\n             */\n            x = -20 + bval[i] * 20 / 10;\n            if (x > 6) {\n                x = 100;\n            }\n            if (x < -15) {\n                x = -15;\n            }\n            x -= 8.;\n            gfc.minval_l[i] = (Math.pow(10.0, x / 10.) * gfc.numlines_l[i]);\n        }\n\n        /************************************************************************\n         * do the same things for short blocks\n         ************************************************************************/\n        gfc.npart_s = init_numline(gfc.numlines_s, gfc.bo_s, gfc.bm_s, bval,\n            bval_width, gfc.mld_s, gfc.PSY.bo_s_weight, sfreq,\n            Encoder.BLKSIZE_s, gfc.scalefac_band.s, Encoder.BLKSIZE_s\n            / (2.0 * 192), Encoder.SBMAX_s);\n        assert(gfc.npart_s < Encoder.CBANDS);\n\n        /* SNR formula. short block is normalized by SNR. is it still right ? */\n        j = 0;\n        for (i = 0; i < gfc.npart_s; i++) {\n            var x;\n            var snr = snr_s_a;\n            if (bval[i] >= bvl_a) {\n                snr = snr_s_b * (bval[i] - bvl_a) / (bvl_b - bvl_a) + snr_s_a\n                    * (bvl_b - bval[i]) / (bvl_b - bvl_a);\n            }\n            norm[i] = Math.pow(10.0, snr / 10.0);\n\n            /* ATH */\n            x = Float.MAX_VALUE;\n            for (var k = 0; k < gfc.numlines_s[i]; k++, j++) {\n                var freq = sfreq * j / (1000.0 * Encoder.BLKSIZE_s);\n                var level;\n                /* freq = Min(.1,freq); */\n                /*\n                 * ATH below 100 Hz constant, not\n                 * further climbing\n                 */\n                level = this.ATHformula(freq * 1000, gfp) - 20;\n                // scale to FFT units; returned value is in dB\n                level = Math.pow(10., 0.1 * level);\n                // convert from dB . energy\n                level *= gfc.numlines_s[i];\n                if (x > level)\n                    x = level;\n            }\n            gfc.ATH.cb_s[i] = x;\n\n            /*\n             * MINVAL. For low freq, the strength of the masking is limited by\n             * minval this is an ISO MPEG1 thing, dont know if it is really\n             * needed\n             */\n            x = (-7.0 + bval[i] * 7.0 / 12.0);\n            if (bval[i] > 12) {\n                x *= 1 + Math.log(1 + x) * 3.1;\n            }\n            if (bval[i] < 12) {\n                x *= 1 + Math.log(1 - x) * 2.3;\n            }\n            if (x < -15) {\n                x = -15;\n            }\n            x -= 8;\n            gfc.minval_s[i] = Math.pow(10.0, x / 10)\n                * gfc.numlines_s[i];\n        }\n\n        gfc.s3_ss = init_s3_values(gfc.s3ind_s, gfc.npart_s, bval, bval_width,\n            norm, useOldS3);\n\n        init_mask_add_max_values();\n        fft.init_fft(gfc);\n\n        /* setup temporal masking */\n        gfc.decay = Math.exp(-1.0 * LOG10\n            / (temporalmask_sustain_sec * sfreq / 192.0));\n\n        {\n            var msfix;\n            msfix = NS_MSFIX;\n            if ((gfp.exp_nspsytune & 2) != 0)\n                msfix = 1.0;\n            if (Math.abs(gfp.msfix) > 0.0)\n                msfix = gfp.msfix;\n            gfp.msfix = msfix;\n\n            /*\n             * spread only from npart_l bands. Normally, we use the spreading\n             * function to convolve from npart_l down to npart_l bands\n             */\n            for (var b = 0; b < gfc.npart_l; b++)\n                if (gfc.s3ind[b][1] > gfc.npart_l - 1)\n                    gfc.s3ind[b][1] = gfc.npart_l - 1;\n        }\n\n        /*\n         * prepare for ATH auto adjustment: we want to decrease the ATH by 12 dB\n         * per second\n         */\n        var frame_duration = (576. * gfc.mode_gr / sfreq);\n        gfc.ATH.decay = Math.pow(10., -12. / 10. * frame_duration);\n        gfc.ATH.adjust = 0.01;\n        /* minimum, for leading low loudness */\n        gfc.ATH.adjustLimit = 1.0;\n        /* on lead, allow adjust up to maximum */\n\n        assert(gfc.bo_l[Encoder.SBMAX_l - 1] <= gfc.npart_l);\n        assert(gfc.bo_s[Encoder.SBMAX_s - 1] <= gfc.npart_s);\n\n        if (gfp.ATHtype != -1) {\n            /* compute equal loudness weights (eql_w) */\n            var freq;\n            var freq_inc = gfp.out_samplerate\n                / (Encoder.BLKSIZE);\n            var eql_balance = 0.0;\n            freq = 0.0;\n            for (i = 0; i < Encoder.BLKSIZE / 2; ++i) {\n                /* convert ATH dB to relative power (not dB) */\n                /* to determine eql_w */\n                freq += freq_inc;\n                gfc.ATH.eql_w[i] = 1. / Math.pow(10, this.ATHformula(freq, gfp) / 10);\n                eql_balance += gfc.ATH.eql_w[i];\n            }\n            eql_balance = 1.0 / eql_balance;\n            for (i = Encoder.BLKSIZE / 2; --i >= 0;) { /* scale weights */\n                gfc.ATH.eql_w[i] *= eql_balance;\n            }\n        }\n        {\n            for (var b = j = 0; b < gfc.npart_s; ++b) {\n                for (i = 0; i < gfc.numlines_s[b]; ++i) {\n                    ++j;\n                }\n            }\n            assert(j == 129);\n            for (var b = j = 0; b < gfc.npart_l; ++b) {\n                for (i = 0; i < gfc.numlines_l[b]; ++i) {\n                    ++j;\n                }\n            }\n            assert(j == 513);\n        }\n        j = 0;\n        for (i = 0; i < gfc.npart_l; i++) {\n            var freq = sfreq * (j + gfc.numlines_l[i] / 2) / (1.0 * Encoder.BLKSIZE);\n            gfc.mld_cb_l[i] = stereo_demask(freq);\n            j += gfc.numlines_l[i];\n        }\n        for (; i < Encoder.CBANDS; ++i) {\n            gfc.mld_cb_l[i] = 1;\n        }\n        j = 0;\n        for (i = 0; i < gfc.npart_s; i++) {\n            var freq = sfreq * (j + gfc.numlines_s[i] / 2) / (1.0 * Encoder.BLKSIZE_s);\n            gfc.mld_cb_s[i] = stereo_demask(freq);\n            j += gfc.numlines_s[i];\n        }\n        for (; i < Encoder.CBANDS; ++i) {\n            gfc.mld_cb_s[i] = 1;\n        }\n        return 0;\n    }\n\n    /**\n     * Those ATH formulas are returning their minimum value for input = -1\n     */\n    function ATHformula_GB(f, value) {\n        /**\n         * <PRE>\n         *  from Painter & Spanias\n         *           modified by Gabriel Bouvigne to better fit the reality\n         *           ath =    3.640 * pow(f,-0.8)\n         *           - 6.800 * exp(-0.6*pow(f-3.4,2.0))\n         *           + 6.000 * exp(-0.15*pow(f-8.7,2.0))\n         *           + 0.6* 0.001 * pow(f,4.0);\n         *\n         *\n         *           In the past LAME was using the Painter &Spanias formula.\n         *           But we had some recurrent problems with HF content.\n         *           We measured real ATH values, and found the older formula\n         *           to be inaccurate in the higher part. So we made this new\n         *           formula and this solved most of HF problematic test cases.\n         *           The tradeoff is that in VBR mode it increases a lot the\n         *           bitrate.\n         * </PRE>\n         */\n\n        /*\n         * This curve can be adjusted according to the VBR scale: it adjusts\n         * from something close to Painter & Spanias on V9 up to Bouvigne's\n         * formula for V0. This way the VBR bitrate is more balanced according\n         * to the -V value.\n         */\n\n        // the following Hack allows to ask for the lowest value\n        if (f < -.3)\n            f = 3410;\n\n        // convert to khz\n        f /= 1000;\n        f = Math.max(0.1, f);\n        var ath = 3.640 * Math.pow(f, -0.8) - 6.800\n            * Math.exp(-0.6 * Math.pow(f - 3.4, 2.0)) + 6.000\n            * Math.exp(-0.15 * Math.pow(f - 8.7, 2.0))\n            + (0.6 + 0.04 * value) * 0.001 * Math.pow(f, 4.0);\n        return ath;\n    }\n\n    this.ATHformula = function (f, gfp) {\n        var ath;\n        switch (gfp.ATHtype) {\n            case 0:\n                ath = ATHformula_GB(f, 9);\n                break;\n            case 1:\n                // over sensitive, should probably be removed\n                ath = ATHformula_GB(f, -1);\n                break;\n            case 2:\n                ath = ATHformula_GB(f, 0);\n                break;\n            case 3:\n                // modification of GB formula by Roel\n                ath = ATHformula_GB(f, 1) + 6;\n                break;\n            case 4:\n                ath = ATHformula_GB(f, gfp.ATHcurve);\n                break;\n            default:\n                ath = ATHformula_GB(f, 0);\n                break;\n        }\n        return ath;\n    }\n\n}\n\nmodule.exports = PsyModel;\n","//package mp3;\n\n/* MPEG modes */\nfunction MPEGMode(ordinal) {\n    var _ordinal = ordinal;\n    this.ordinal = function () {\n        return _ordinal;\n    }\n}\n\nMPEGMode.STEREO = new MPEGMode(0);\nMPEGMode.JOINT_STEREO = new MPEGMode(1);\nMPEGMode.DUAL_CHANNEL = new MPEGMode(2);\nMPEGMode.MONO = new MPEGMode(3);\nMPEGMode.NOT_SET = new MPEGMode(4);\n\nmodule.exports = MPEGMode;\n","var MPEGMode = require('./MPEGMode.js');\n\nfunction LameGlobalFlags() {\n\n    this.class_id = 0;\n\n    /* input description */\n\n    /**\n     * number of samples. default=-1\n     */\n    this.num_samples = 0;\n    /**\n     * input number of channels. default=2\n     */\n    this.num_channels = 0;\n    /**\n     * input_samp_rate in Hz. default=44.1 kHz\n     */\n    this.in_samplerate = 0;\n    /**\n     * output_samp_rate. default: LAME picks best value at least not used for\n     * MP3 decoding: Remember 44.1 kHz MP3s and AC97\n     */\n    this.out_samplerate = 0;\n    /**\n     * scale input by this amount before encoding at least not used for MP3\n     * decoding\n     */\n    this.scale = 0.;\n    /**\n     * scale input of channel 0 (left) by this amount before encoding\n     */\n    this.scale_left = 0.;\n    /**\n     * scale input of channel 1 (right) by this amount before encoding\n     */\n    this.scale_right = 0.;\n\n    /* general control params */\n    /**\n     * collect data for a MP3 frame analyzer?\n     */\n    this.analysis = false;\n    /**\n     * add Xing VBR tag?\n     */\n    this.bWriteVbrTag = false;\n\n    /**\n     * use lame/mpglib to convert mp3 to wav\n     */\n    this.decode_only = false;\n    /**\n     * quality setting 0=best, 9=worst default=5\n     */\n    this.quality = 0;\n    /**\n     * see enum default = LAME picks best value\n     */\n    this.mode = MPEGMode.STEREO;\n    /**\n     * force M/S mode. requires mode=1\n     */\n    this.force_ms = false;\n    /**\n     * use free format? default=0\n     */\n    this.free_format = false;\n    /**\n     * find the RG value? default=0\n     */\n    this.findReplayGain = false;\n    /**\n     * decode on the fly? default=0\n     */\n    this.decode_on_the_fly = false;\n    /**\n     * 1 (default) writes ID3 tags, 0 not\n     */\n    this.write_id3tag_automatic = false;\n\n    /*\n     * set either brate>0 or compression_ratio>0, LAME will compute the value of\n     * the variable not set. Default is compression_ratio = 11.025\n     */\n    /**\n     * bitrate\n     */\n    this.brate = 0;\n    /**\n     * sizeof(wav file)/sizeof(mp3 file)\n     */\n    this.compression_ratio = 0.;\n\n    /* frame params */\n    /**\n     * mark as copyright. default=0\n     */\n    this.copyright = 0;\n    /**\n     * mark as original. default=1\n     */\n    this.original = 0;\n    /**\n     * the MP3 'private extension' bit. Meaningless\n     */\n    this.extension = 0;\n    /**\n     * Input PCM is emphased PCM (for instance from one of the rarely emphased\n     * CDs), it is STRONGLY not recommended to use this, because psycho does not\n     * take it into account, and last but not least many decoders don't care\n     * about these bits\n     */\n    this.emphasis = 0;\n    /**\n     * use 2 bytes per frame for a CRC checksum. default=0\n     */\n    this.error_protection = 0;\n    /**\n     * enforce ISO spec as much as possible\n     */\n    this.strict_ISO = false;\n\n    /**\n     * use bit reservoir?\n     */\n    this.disable_reservoir = false;\n\n    /* quantization/noise shaping */\n    this.quant_comp = 0;\n    this.quant_comp_short = 0;\n    this.experimentalY = false;\n    this.experimentalZ = 0;\n    this.exp_nspsytune = 0;\n\n    this.preset = 0;\n\n    /* VBR control */\n    this.VBR = null;\n    /**\n     * Range [0,...,1[\n     */\n    this.VBR_q_frac = 0.;\n    /**\n     * Range [0,...,9]\n     */\n    this.VBR_q = 0;\n    this.VBR_mean_bitrate_kbps = 0;\n    this.VBR_min_bitrate_kbps = 0;\n    this.VBR_max_bitrate_kbps = 0;\n    /**\n     * strictly enforce VBR_min_bitrate normaly, it will be violated for analog\n     * silence\n     */\n    this.VBR_hard_min = 0;\n\n    /* resampling and filtering */\n\n    /**\n     * freq in Hz. 0=lame choses. -1=no filter\n     */\n    this.lowpassfreq = 0;\n    /**\n     * freq in Hz. 0=lame choses. -1=no filter\n     */\n    this.highpassfreq = 0;\n    /**\n     * freq width of filter, in Hz (default=15%)\n     */\n    this.lowpasswidth = 0;\n    /**\n     * freq width of filter, in Hz (default=15%)\n     */\n    this.highpasswidth = 0;\n\n    /*\n     * psycho acoustics and other arguments which you should not change unless\n     * you know what you are doing\n     */\n\n    this.maskingadjust = 0.;\n    this.maskingadjust_short = 0.;\n    /**\n     * only use ATH\n     */\n    this.ATHonly = false;\n    /**\n     * only use ATH for short blocks\n     */\n    this.ATHshort = false;\n    /**\n     * disable ATH\n     */\n    this.noATH = false;\n    /**\n     * select ATH formula\n     */\n    this.ATHtype = 0;\n    /**\n     * change ATH formula 4 shape\n     */\n    this.ATHcurve = 0.;\n    /**\n     * lower ATH by this many db\n     */\n    this.ATHlower = 0.;\n    /**\n     * select ATH auto-adjust scheme\n     */\n    this.athaa_type = 0;\n    /**\n     * select ATH auto-adjust loudness calc\n     */\n    this.athaa_loudapprox = 0;\n    /**\n     * dB, tune active region of auto-level\n     */\n    this.athaa_sensitivity = 0.;\n    this.short_blocks = null;\n    /**\n     * use temporal masking effect\n     */\n    this.useTemporal = false;\n    this.interChRatio = 0.;\n    /**\n     * Naoki's adjustment of Mid/Side maskings\n     */\n    this.msfix = 0.;\n\n    /**\n     * 0 off, 1 on\n     */\n    this.tune = false;\n    /**\n     * used to pass values for debugging and stuff\n     */\n    this.tune_value_a = 0.;\n\n    /************************************************************************/\n    /* internal variables, do not set... */\n    /* provided because they may be of use to calling application */\n    /************************************************************************/\n\n    /**\n     * 0=MPEG-2/2.5 1=MPEG-1\n     */\n    this.version = 0;\n    this.encoder_delay = 0;\n    /**\n     * number of samples of padding appended to input\n     */\n    this.encoder_padding = 0;\n    this.framesize = 0;\n    /**\n     * number of frames encoded\n     */\n    this.frameNum = 0;\n    /**\n     * is this struct owned by calling program or lame?\n     */\n    this.lame_allocated_gfp = 0;\n    /**************************************************************************/\n    /* more internal variables are stored in this structure: */\n    /**************************************************************************/\n    this.internal_flags = null;\n}\n\nmodule.exports = LameGlobalFlags;\n","var Encoder = require('./Encoder.js');\n\nvar L3Side = {};\n\n\n\t/**\n\t * max scalefactor band, max(SBMAX_l, SBMAX_s*3, (SBMAX_s-3)*3+8)\n\t */\nL3Side.SFBMAX = (Encoder.SBMAX_s * 3);\n\nmodule.exports = L3Side;\n","//package mp3;\nvar common = require('./common.js');\nvar System = common.System;\nvar VbrMode = common.VbrMode;\nvar Float = common.Float;\nvar ShortBlock = common.ShortBlock;\nvar Util = common.Util;\nvar Arrays = common.Arrays;\nvar new_array_n = common.new_array_n;\nvar new_byte = common.new_byte;\nvar new_double = common.new_double;\nvar new_float = common.new_float;\nvar new_float_n = common.new_float_n;\nvar new_int = common.new_int;\nvar new_int_n = common.new_int_n;\nvar assert = common.assert;\n\nvar L3Side = require('./L3Side.js');\n\nfunction GrInfo() {\n    //float xr[] = new float[576];\n    this.xr = new_float(576);\n    //int l3_enc[] = new int[576];\n    this.l3_enc = new_int(576);\n    //int scalefac[] = new int[L3Side.SFBMAX];\n    this.scalefac = new_int(L3Side.SFBMAX);\n    this.xrpow_max = 0.;\n\n    this.part2_3_length = 0;\n    this.big_values = 0;\n    this.count1 = 0;\n    this.global_gain = 0;\n    this.scalefac_compress = 0;\n    this.block_type = 0;\n    this.mixed_block_flag = 0;\n    this.table_select = new_int(3);\n    this.subblock_gain = new_int(3 + 1);\n    this.region0_count = 0;\n    this.region1_count = 0;\n    this.preflag = 0;\n    this.scalefac_scale = 0;\n    this.count1table_select = 0;\n\n    this.part2_length = 0;\n    this.sfb_lmax = 0;\n    this.sfb_smin = 0;\n    this.psy_lmax = 0;\n    this.sfbmax = 0;\n    this.psymax = 0;\n    this.sfbdivide = 0;\n    this.width = new_int(L3Side.SFBMAX);\n    this.window = new_int(L3Side.SFBMAX);\n    this.count1bits = 0;\n    /**\n     * added for LSF\n     */\n    this.sfb_partition_table = null;\n    this.slen = new_int(4);\n\n    this.max_nonzero_coeff = 0;\n\n    var self = this;\n    function clone_int(array) {\n        return new Int32Array(array);\n    }\n    function clone_float(array) {\n        return new Float32Array(array);\n    }\n    this.assign = function (other) {\n        self.xr = clone_float(other.xr); //.slice(0); //clone();\n        self.l3_enc = clone_int(other.l3_enc); //.slice(0); //clone();\n        self.scalefac = clone_int(other.scalefac);//.slice(0); //clone();\n        self.xrpow_max = other.xrpow_max;\n\n        self.part2_3_length = other.part2_3_length;\n        self.big_values = other.big_values;\n        self.count1 = other.count1;\n        self.global_gain = other.global_gain;\n        self.scalefac_compress = other.scalefac_compress;\n        self.block_type = other.block_type;\n        self.mixed_block_flag = other.mixed_block_flag;\n        self.table_select = clone_int(other.table_select);//.slice(0); //clone();\n        self.subblock_gain = clone_int(other.subblock_gain); //.slice(0); //.clone();\n        self.region0_count = other.region0_count;\n        self.region1_count = other.region1_count;\n        self.preflag = other.preflag;\n        self.scalefac_scale = other.scalefac_scale;\n        self.count1table_select = other.count1table_select;\n\n        self.part2_length = other.part2_length;\n        self.sfb_lmax = other.sfb_lmax;\n        self.sfb_smin = other.sfb_smin;\n        self.psy_lmax = other.psy_lmax;\n        self.sfbmax = other.sfbmax;\n        self.psymax = other.psymax;\n        self.sfbdivide = other.sfbdivide;\n        self.width = clone_int(other.width); //.slice(0); //.clone();\n        self.window = clone_int(other.window); //.slice(0); //.clone();\n        self.count1bits = other.count1bits;\n\n        self.sfb_partition_table = other.sfb_partition_table.slice(0); //.clone();\n        self.slen = clone_int(other.slen); //.slice(0); //.clone();\n        self.max_nonzero_coeff = other.max_nonzero_coeff;\n    }\n}\n\nmodule.exports = GrInfo;\n","var common = require('./common.js');\nvar System = common.System;\nvar VbrMode = common.VbrMode;\nvar Float = common.Float;\nvar ShortBlock = common.ShortBlock;\nvar Util = common.Util;\nvar Arrays = common.Arrays;\nvar new_array_n = common.new_array_n;\nvar new_byte = common.new_byte;\nvar new_double = common.new_double;\nvar new_float = common.new_float;\nvar new_float_n = common.new_float_n;\nvar new_int = common.new_int;\nvar new_int_n = common.new_int_n;\nvar assert = common.assert;\n\nvar GrInfo = require('./GrInfo.js');\n\nfunction IIISideInfo() {\n    this.tt = [[null, null], [null, null]];\n    this.main_data_begin = 0;\n    this.private_bits = 0;\n    this.resvDrain_pre = 0;\n    this.resvDrain_post = 0;\n    this.scfsi = [new_int(4), new_int(4)];\n\n    for (var gr = 0; gr < 2; gr++) {\n        for (var ch = 0; ch < 2; ch++) {\n            this.tt[gr][ch] = new GrInfo();\n        }\n    }\n}\n\nmodule.exports = IIISideInfo;\n","//package mp3;\n\n/**\n * Layer III side information.\n *\n * @author Ken\n *\n */\n\nvar common = require('./common.js');\nvar System = common.System;\nvar VbrMode = common.VbrMode;\nvar Float = common.Float;\nvar ShortBlock = common.ShortBlock;\nvar Util = common.Util;\nvar Arrays = common.Arrays;\nvar new_array_n = common.new_array_n;\nvar new_byte = common.new_byte;\nvar new_double = common.new_double;\nvar new_float = common.new_float;\nvar new_float_n = common.new_float_n;\nvar new_int = common.new_int;\nvar new_int_n = common.new_int_n;\nvar assert = common.assert;\n\nvar Encoder = require('./Encoder.js');\n\nfunction ScaleFac(arrL, arrS, arr21, arr12) {\n\n    this.l = new_int(1 + Encoder.SBMAX_l);\n    this.s = new_int(1 + Encoder.SBMAX_s);\n    this.psfb21 = new_int(1 + Encoder.PSFB21);\n    this.psfb12 = new_int(1 + Encoder.PSFB12);\n    var l = this.l;\n    var s = this.s;\n\n    if (arguments.length == 4) {\n        //public ScaleFac(final int[] arrL, final int[] arrS, final int[] arr21,\n        //    final int[] arr12) {\n        this.arrL = arguments[0];\n        this.arrS = arguments[1];\n        this.arr21 = arguments[2];\n        this.arr12 = arguments[3];\n\n        System.arraycopy(this.arrL, 0, l, 0, Math.min(this.arrL.length, this.l.length));\n        System.arraycopy(this.arrS, 0, s, 0, Math.min(this.arrS.length, this.s.length));\n        System.arraycopy(this.arr21, 0, this.psfb21, 0, Math.min(this.arr21.length, this.psfb21.length));\n        System.arraycopy(this.arr12, 0, this.psfb12, 0, Math.min(this.arr12.length, this.psfb12.length));\n    }\n}\n\nmodule.exports = ScaleFac;\n","var common = require('./common.js');\nvar System = common.System;\nvar VbrMode = common.VbrMode;\nvar Float = common.Float;\nvar ShortBlock = common.ShortBlock;\nvar Util = common.Util;\nvar Arrays = common.Arrays;\nvar new_array_n = common.new_array_n;\nvar new_byte = common.new_byte;\nvar new_double = common.new_double;\nvar new_float = common.new_float;\nvar new_float_n = common.new_float_n;\nvar new_int = common.new_int;\nvar new_int_n = common.new_int_n;\nvar assert = common.assert;\n\nvar Encoder = require('./Encoder.js');\n\n//package mp3;\n\n/**\n * Variables used for --nspsytune\n *\n * @author Ken\n *\n */\nfunction NsPsy() {\n    this.last_en_subshort = new_float_n([4, 9]);\n    this.lastAttacks = new_int(4);\n    this.pefirbuf = new_float(19);\n    this.longfact = new_float(Encoder.SBMAX_l);\n    this.shortfact = new_float(Encoder.SBMAX_s);\n\n    /**\n     * short block tuning\n     */\n    this.attackthre = 0.;\n    this.attackthre_s = 0.;\n}\n\nmodule.exports = NsPsy;\n","//package mp3;\n\nfunction VBRSeekInfo() {\n    /**\n     * What we have seen so far.\n     */\n    this.sum = 0;\n    /**\n     * How many frames we have seen in this chunk.\n     */\n    this.seen = 0;\n    /**\n     * How many frames we want to collect into one chunk.\n     */\n    this.want = 0;\n    /**\n     * Actual position in our bag.\n     */\n    this.pos = 0;\n    /**\n     * Size of our bag.\n     */\n    this.size = 0;\n    /**\n     * Pointer to our bag.\n     */\n    this.bag = null;\n    this.nVbrNumFrames = 0;\n    this.nBytesWritten = 0;\n    /* VBR tag data */\n    this.TotalFrameSize = 0;\n}\n\nmodule.exports = VBRSeekInfo;\n","var common = require('./common.js');\nvar System = common.System;\nvar VbrMode = common.VbrMode;\nvar Float = common.Float;\nvar ShortBlock = common.ShortBlock;\nvar Util = common.Util;\nvar Arrays = common.Arrays;\nvar new_array_n = common.new_array_n;\nvar new_byte = common.new_byte;\nvar new_double = common.new_double;\nvar new_float = common.new_float;\nvar new_float_n = common.new_float_n;\nvar new_int = common.new_int;\nvar new_int_n = common.new_int_n;\nvar assert = common.assert;\n\nvar IIISideInfo = require('./IIISideInfo.js');\nvar ScaleFac = require('./ScaleFac.js');\nvar NsPsy = require('./NsPsy.js');\nvar VBRSeekInfo = require('./VBRSeekInfo.js');\nvar III_psy_xmin = require('./III_psy_xmin.js');\nvar Encoder = require('./Encoder.js');\nvar L3Side = require('./L3Side.js');\n\n\nLameInternalFlags.MFSIZE = (3 * 1152 + Encoder.ENCDELAY - Encoder.MDCTDELAY);\nLameInternalFlags.MAX_HEADER_BUF = 256;\nLameInternalFlags.MAX_BITS_PER_CHANNEL = 4095;\nLameInternalFlags.MAX_BITS_PER_GRANULE = 7680;\nLameInternalFlags.BPC = 320;\n\nfunction LameInternalFlags() {\n    var MAX_HEADER_LEN = 40;\n\n\n    /********************************************************************\n     * internal variables NOT set by calling program, and should not be *\n     * modified by the calling program *\n     ********************************************************************/\n\n    /**\n     * Some remarks to the Class_ID field: The Class ID is an Identifier for a\n     * pointer to this struct. It is very unlikely that a pointer to\n     * lame_global_flags has the same 32 bits in it's structure (large and other\n     * special properties, for instance prime).\n     *\n     * To test that the structure is right and initialized, use: if ( gfc .\n     * Class_ID == LAME_ID ) ... Other remark: If you set a flag to 0 for uninit\n     * data and 1 for init data, the right test should be \"if (flag == 1)\" and\n     * NOT \"if (flag)\". Unintended modification of this element will be\n     * otherwise misinterpreted as an init.\n     */\n    this.Class_ID = 0;\n\n    this.lame_encode_frame_init = 0;\n    this.iteration_init_init = 0;\n    this.fill_buffer_resample_init = 0;\n\n    //public float mfbuf[][] = new float[2][MFSIZE];\n    this.mfbuf = new_float_n([2, LameInternalFlags.MFSIZE]);\n\n    /**\n     * granules per frame\n     */\n    this.mode_gr = 0;\n    /**\n     * number of channels in the input data stream (PCM or decoded PCM)\n     */\n    this.channels_in = 0;\n    /**\n     * number of channels in the output data stream (not used for decoding)\n     */\n    this.channels_out = 0;\n    /**\n     * input_samp_rate/output_samp_rate\n     */\n        //public double resample_ratio;\n    this.resample_ratio = 0.;\n\n    this.mf_samples_to_encode = 0;\n    this.mf_size = 0;\n    /**\n     * min bitrate index\n     */\n    this.VBR_min_bitrate = 0;\n    /**\n     * max bitrate index\n     */\n    this.VBR_max_bitrate = 0;\n    this.bitrate_index = 0;\n    this.samplerate_index = 0;\n    this.mode_ext = 0;\n\n    /* lowpass and highpass filter control */\n    /**\n     * normalized frequency bounds of passband\n     */\n    this.lowpass1 = 0.;\n    this.lowpass2 = 0.;\n    /**\n     * normalized frequency bounds of passband\n     */\n    this.highpass1 = 0.;\n    this.highpass2 = 0.;\n\n    /**\n     * 0 = none 1 = ISO AAC model 2 = allow scalefac_select=1\n     */\n    this.noise_shaping = 0;\n\n    /**\n     * 0 = ISO model: amplify all distorted bands<BR>\n     * 1 = amplify within 50% of max (on db scale)<BR>\n     * 2 = amplify only most distorted band<BR>\n     * 3 = method 1 and refine with method 2<BR>\n     */\n    this.noise_shaping_amp = 0;\n    /**\n     * 0 = no substep<BR>\n     * 1 = use substep shaping at last step(VBR only)<BR>\n     * (not implemented yet)<BR>\n     * 2 = use substep inside loop<BR>\n     * 3 = use substep inside loop and last step<BR>\n     */\n    this.substep_shaping = 0;\n\n    /**\n     * 1 = gpsycho. 0 = none\n     */\n    this.psymodel = 0;\n    /**\n     * 0 = stop at over=0, all scalefacs amplified or<BR>\n     * a scalefac has reached max value<BR>\n     * 1 = stop when all scalefacs amplified or a scalefac has reached max value<BR>\n     * 2 = stop when all scalefacs amplified\n     */\n    this.noise_shaping_stop = 0;\n\n    /**\n     * 0 = no, 1 = yes\n     */\n    this.subblock_gain = 0;\n    /**\n     * 0 = no. 1=outside loop 2=inside loop(slow)\n     */\n    this.use_best_huffman = 0;\n\n    /**\n     * 0 = stop early after 0 distortion found. 1 = full search\n     */\n    this.full_outer_loop = 0;\n\n    //public IIISideInfo l3_side = new IIISideInfo();\n    this.l3_side = new IIISideInfo();\n    this.ms_ratio = new_float(2);\n\n    /* used for padding */\n    /**\n     * padding for the current frame?\n     */\n    this.padding = 0;\n    this.frac_SpF = 0;\n    this.slot_lag = 0;\n\n    /**\n     * optional ID3 tags\n     */\n        //public ID3TagSpec tag_spec;\n    this.tag_spec = null;\n    this.nMusicCRC = 0;\n\n    /* variables used by Quantize */\n    //public int OldValue[] = new int[2];\n    this.OldValue = new_int(2);\n    //public int CurrentStep[] = new int[2];\n    this.CurrentStep = new_int(2);\n\n    this.masking_lower = 0.;\n    //public int bv_scf[] = new int[576];\n    this.bv_scf = new_int(576);\n    //public int pseudohalf[] = new int[L3Side.SFBMAX];\n    this.pseudohalf = new_int(L3Side.SFBMAX);\n\n    /**\n     * will be set in lame_init_params\n     */\n    this.sfb21_extra = false;\n\n    /* BPC = maximum number of filter convolution windows to precompute */\n    //public float[][] inbuf_old = new float[2][];\n    this.inbuf_old = new Array(2);\n    //public float[][] blackfilt = new float[2 * BPC + 1][];\n    this.blackfilt = new Array(2 * LameInternalFlags.BPC + 1);\n    //public double itime[] = new double[2];\n    this.itime = new_double(2);\n    this.sideinfo_len = 0;\n\n    /* variables for newmdct.c */\n    //public float sb_sample[][][][] = new float[2][2][18][Encoder.SBLIMIT];\n    this.sb_sample = new_float_n([2, 2, 18, Encoder.SBLIMIT]);\n    this.amp_filter = new_float(32);\n\n    /* variables for BitStream */\n\n    /**\n     * <PRE>\n     * mpeg1: buffer=511 bytes  smallest frame: 96-38(sideinfo)=58\n     * max number of frames in reservoir:  8\n     * mpeg2: buffer=255 bytes.  smallest frame: 24-23bytes=1\n     * with VBR, if you are encoding all silence, it is possible to\n     * have 8kbs/24khz frames with 1byte of data each, which means we need\n     * to buffer up to 255 headers!\n     * </PRE>\n     */\n    /**\n     * also, max_header_buf has to be a power of two\n     */\n    /**\n     * max size of header is 38\n     */\n\n    function Header() {\n        this.write_timing = 0;\n        this.ptr = 0;\n        //public byte buf[] = new byte[MAX_HEADER_LEN];\n        this.buf = new_byte(MAX_HEADER_LEN);\n    }\n\n    this.header = new Array(LameInternalFlags.MAX_HEADER_BUF);\n\n    this.h_ptr = 0;\n    this.w_ptr = 0;\n    this.ancillary_flag = 0;\n\n    /* variables for Reservoir */\n    /**\n     * in bits\n     */\n    this.ResvSize = 0;\n    /**\n     * in bits\n     */\n    this.ResvMax = 0;\n\n    //public ScaleFac scalefac_band = new ScaleFac();\n    this.scalefac_band = new ScaleFac();\n\n    /* daa from PsyModel */\n    /* The static variables \"r\", \"phi_sav\", \"new\", \"old\" and \"oldest\" have */\n    /* to be remembered for the unpredictability measure. For \"r\" and */\n    /* \"phi_sav\", the first index from the left is the channel select and */\n    /* the second index is the \"age\" of the data. */\n    this.minval_l = new_float(Encoder.CBANDS);\n    this.minval_s = new_float(Encoder.CBANDS);\n    this.nb_1 = new_float_n([4, Encoder.CBANDS]);\n    this.nb_2 = new_float_n([4, Encoder.CBANDS]);\n    this.nb_s1 = new_float_n([4, Encoder.CBANDS]);\n    this.nb_s2 = new_float_n([4, Encoder.CBANDS]);\n    this.s3_ss = null;\n    this.s3_ll = null;\n    this.decay = 0.;\n\n    //public III_psy_xmin[] thm = new III_psy_xmin[4];\n    //public III_psy_xmin[] en = new III_psy_xmin[4];\n    this.thm = new Array(4);\n    this.en = new Array(4);\n\n    /**\n     * fft and energy calculation\n     */\n    this.tot_ener = new_float(4);\n\n    /* loudness calculation (for adaptive threshold of hearing) */\n    /**\n     * loudness^2 approx. per granule and channel\n     */\n    this.loudness_sq = new_float_n([2, 2]);\n    /**\n     * account for granule delay of L3psycho_anal\n     */\n    this.loudness_sq_save = new_float(2);\n\n    /**\n     * Scale Factor Bands\n     */\n    this.mld_l = new_float(Encoder.SBMAX_l);\n    this.mld_s = new_float(Encoder.SBMAX_s);\n    this.bm_l = new_int(Encoder.SBMAX_l);\n    this.bo_l = new_int(Encoder.SBMAX_l);\n    this.bm_s = new_int(Encoder.SBMAX_s);\n    this.bo_s = new_int(Encoder.SBMAX_s);\n    this.npart_l = 0;\n    this.npart_s = 0;\n\n    this.s3ind = new_int_n([Encoder.CBANDS, 2]);\n    this.s3ind_s = new_int_n([Encoder.CBANDS, 2]);\n\n    this.numlines_s = new_int(Encoder.CBANDS);\n    this.numlines_l = new_int(Encoder.CBANDS);\n    this.rnumlines_l = new_float(Encoder.CBANDS);\n    this.mld_cb_l = new_float(Encoder.CBANDS);\n    this.mld_cb_s = new_float(Encoder.CBANDS);\n    this.numlines_s_num1 = 0;\n    this.numlines_l_num1 = 0;\n\n    /* ratios */\n    this.pe = new_float(4);\n    this.ms_ratio_s_old = 0.;\n    this.ms_ratio_l_old = 0.;\n    this.ms_ener_ratio_old = 0.;\n\n    /**\n     * block type\n     */\n    this.blocktype_old = new_int(2);\n\n    /**\n     * variables used for --nspsytune\n     */\n    this.nsPsy = new NsPsy();\n\n    /**\n     * used for Xing VBR header\n     */\n    this.VBR_seek_table = new VBRSeekInfo();\n\n    /**\n     * all ATH related stuff\n     */\n        //public ATH ATH;\n    this.ATH = null;\n\n    this.PSY = null;\n\n    this.nogap_total = 0;\n    this.nogap_current = 0;\n\n    /* ReplayGain */\n    this.decode_on_the_fly = true;\n    this.findReplayGain = true;\n    this.findPeakSample = true;\n    this.PeakSample = 0.;\n    this.RadioGain = 0;\n    this.AudiophileGain = 0;\n    //public ReplayGain rgdata;\n    this.rgdata = null;\n\n    /**\n     * gain change required for preventing clipping\n     */\n    this.noclipGainChange = 0;\n    /**\n     * user-specified scale factor required for preventing clipping\n     */\n    this.noclipScale = 0.;\n\n    /* simple statistics */\n    this.bitrate_stereoMode_Hist = new_int_n([16, 4 + 1]);\n    /**\n     * norm/start/short/stop/mixed(short)/sum\n     */\n    this.bitrate_blockType_Hist = new_int_n([16, 4 + 1 + 1]);\n\n    //public PlottingData pinfo;\n    //public MPGLib.mpstr_tag hip;\n    this.pinfo = null;\n    this.hip = null;\n\n    this.in_buffer_nsamples = 0;\n    //public float[] in_buffer_0;\n    //public float[] in_buffer_1;\n    this.in_buffer_0 = null;\n    this.in_buffer_1 = null;\n\n    //public IIterationLoop iteration_loop;\n    this.iteration_loop = null;\n\n    for (var i = 0; i < this.en.length; i++) {\n        this.en[i] = new III_psy_xmin();\n    }\n    for (var i = 0; i < this.thm.length; i++) {\n        this.thm[i] = new III_psy_xmin();\n    }\n    for (var i = 0; i < this.header.length; i++) {\n        this.header[i] = new Header();\n    }\n\n}\n\nmodule.exports = LameInternalFlags;\n","var common = require('./common.js');\nvar System = common.System;\nvar VbrMode = common.VbrMode;\nvar Float = common.Float;\nvar ShortBlock = common.ShortBlock;\nvar Util = common.Util;\nvar Arrays = common.Arrays;\nvar new_array_n = common.new_array_n;\nvar new_byte = common.new_byte;\nvar new_double = common.new_double;\nvar new_float = common.new_float;\nvar new_float_n = common.new_float_n;\nvar new_int = common.new_int;\nvar new_int_n = common.new_int_n;\nvar assert = common.assert;\n\nvar Encoder = require('./Encoder.js');\n\n/**\n * ATH related stuff, if something new ATH related has to be added, please plug\n * it here into the ATH.\n */\nfunction ATH() {\n    /**\n     * Method for the auto adjustment.\n     */\n    this.useAdjust = 0;\n    /**\n     * factor for tuning the (sample power) point below which adaptive threshold\n     * of hearing adjustment occurs\n     */\n    this.aaSensitivityP = 0.;\n    /**\n     * Lowering based on peak volume, 1 = no lowering.\n     */\n    this.adjust = 0.;\n    /**\n     * Limit for dynamic ATH adjust.\n     */\n    this.adjustLimit = 0.;\n    /**\n     * Determined to lower x dB each second.\n     */\n    this.decay = 0.;\n    /**\n     * Lowest ATH value.\n     */\n    this.floor = 0.;\n    /**\n     * ATH for sfbs in long blocks.\n     */\n    this.l = new_float(Encoder.SBMAX_l);\n    /**\n     * ATH for sfbs in short blocks.\n     */\n    this.s = new_float(Encoder.SBMAX_s);\n    /**\n     * ATH for partitioned sfb21 in long blocks.\n     */\n    this.psfb21 = new_float(Encoder.PSFB21);\n    /**\n     * ATH for partitioned sfb12 in short blocks.\n     */\n    this.psfb12 = new_float(Encoder.PSFB12);\n    /**\n     * ATH for long block convolution bands.\n     */\n    this.cb_l = new_float(Encoder.CBANDS);\n    /**\n     * ATH for short block convolution bands.\n     */\n    this.cb_s = new_float(Encoder.CBANDS);\n    /**\n     * Equal loudness weights (based on ATH).\n     */\n    this.eql_w = new_float(Encoder.BLKSIZE / 2);\n}\n\nmodule.exports = ATH;\n","/*\n *  ReplayGainAnalysis - analyzes input samples and give the recommended dB change\n *  Copyright (C) 2001 David Robinson and Glen Sawyer\n *  Improvements and optimizations added by Frank Klemm, and by Marcel Muller \n *\n *  This library is free software; you can redistribute it and/or\n *  modify it under the terms of the GNU Lesser General Public\n *  License as published by the Free Software Foundation; either\n *  version 2.1 of the License, or (at your option) any later version.\n *\n *  This library is distributed in the hope that it will be useful,\n *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n *  Lesser General Public License for more details.\n *\n *  You should have received a copy of the GNU Lesser General Public\n *  License along with this library; if not, write to the Free Software\n *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n *\n *  concept and filter values by David Robinson (David@Robinson.org)\n *    -- blame him if you think the idea is flawed\n *  original coding by Glen Sawyer (mp3gain@hotmail.com)\n *    -- blame him if you think this runs too slowly, or the coding is otherwise flawed\n *\n *  lots of code improvements by Frank Klemm ( http://www.uni-jena.de/~pfk/mpp/ )\n *    -- credit him for all the _good_ programming ;)\n *\n *\n *  For an explanation of the concepts and the basic algorithms involved, go to:\n *    http://www.replaygain.org/\n */\n\n/*\n *  Here's the deal. Call\n *\n *    InitGainAnalysis ( long samplefreq );\n *\n *  to initialize everything. Call\n *\n *    AnalyzeSamples ( var Float_t*  left_samples,\n *                     var Float_t*  right_samples,\n *                     size_t          num_samples,\n *                     int             num_channels );\n *\n *  as many times as you want, with as many or as few samples as you want.\n *  If mono, pass the sample buffer in through left_samples, leave\n *  right_samples NULL, and make sure num_channels = 1.\n *\n *    GetTitleGain()\n *\n *  will return the recommended dB level change for all samples analyzed\n *  SINCE THE LAST TIME you called GetTitleGain() OR InitGainAnalysis().\n *\n *    GetAlbumGain()\n *\n *  will return the recommended dB level change for all samples analyzed\n *  since InitGainAnalysis() was called and finalized with GetTitleGain().\n *\n *  Pseudo-code to process an album:\n *\n *    Float_t       l_samples [4096];\n *    Float_t       r_samples [4096];\n *    size_t        num_samples;\n *    unsigned int  num_songs;\n *    unsigned int  i;\n *\n *    InitGainAnalysis ( 44100 );\n *    for ( i = 1; i <= num_songs; i++ ) {\n *        while ( ( num_samples = getSongSamples ( song[i], left_samples, right_samples ) ) > 0 )\n *            AnalyzeSamples ( left_samples, right_samples, num_samples, 2 );\n *        fprintf (\"Recommended dB change for song %2d: %+6.2 dB\\n\", i, GetTitleGain() );\n *    }\n *    fprintf (\"Recommended dB change for whole album: %+6.2 dB\\n\", GetAlbumGain() );\n */\n\n/*\n *  So here's the main source of potential code confusion:\n *\n *  The filters applied to the incoming samples are IIR filters,\n *  meaning they rely on up to <filter order> number of previous samples\n *  AND up to <filter order> number of previous filtered samples.\n *\n *  I set up the AnalyzeSamples routine to minimize memory usage and interface\n *  complexity. The speed isn't compromised too much (I don't think), but the\n *  internal complexity is higher than it should be for such a relatively\n *  simple routine.\n *\n *  Optimization/clarity suggestions are welcome.\n */\nvar common = require('./common.js');\nvar System = common.System;\nvar VbrMode = common.VbrMode;\nvar Float = common.Float;\nvar ShortBlock = common.ShortBlock;\nvar Util = common.Util;\nvar Arrays = common.Arrays;\nvar new_array_n = common.new_array_n;\nvar new_byte = common.new_byte;\nvar new_double = common.new_double;\nvar new_float = common.new_float;\nvar new_float_n = common.new_float_n;\nvar new_int = common.new_int;\nvar new_int_n = common.new_int_n;\nvar assert = common.assert;\n\n/**\n * Table entries per dB\n */\nGainAnalysis.STEPS_per_dB = 100.;\n/**\n * Table entries for 0...MAX_dB (normal max. values are 70...80 dB)\n */\nGainAnalysis.MAX_dB = 120.;\nGainAnalysis.GAIN_NOT_ENOUGH_SAMPLES = -24601;\nGainAnalysis.GAIN_ANALYSIS_ERROR = 0;\nGainAnalysis.GAIN_ANALYSIS_OK = 1;\nGainAnalysis.INIT_GAIN_ANALYSIS_ERROR = 0;\nGainAnalysis.INIT_GAIN_ANALYSIS_OK = 1;\n\nGainAnalysis.YULE_ORDER = 10;\nGainAnalysis.MAX_ORDER = GainAnalysis.YULE_ORDER;\n\nGainAnalysis.MAX_SAMP_FREQ = 48000;\nGainAnalysis.RMS_WINDOW_TIME_NUMERATOR = 1;\nGainAnalysis.RMS_WINDOW_TIME_DENOMINATOR = 20;\nGainAnalysis.MAX_SAMPLES_PER_WINDOW = ((GainAnalysis.MAX_SAMP_FREQ * GainAnalysis.RMS_WINDOW_TIME_NUMERATOR) / GainAnalysis.RMS_WINDOW_TIME_DENOMINATOR + 1);\n\nfunction GainAnalysis() {\n    /**\n     * calibration value for 89dB\n     */\n    var PINK_REF = 64.82;\n\n    var YULE_ORDER = GainAnalysis.YULE_ORDER;\n    /**\n     * percentile which is louder than the proposed level\n     */\n    var RMS_PERCENTILE = 0.95;\n    /**\n     * maximum allowed sample frequency [Hz]\n     */\n    var MAX_SAMP_FREQ = GainAnalysis.MAX_SAMP_FREQ;\n    var RMS_WINDOW_TIME_NUMERATOR = GainAnalysis.RMS_WINDOW_TIME_NUMERATOR;\n    /**\n     * numerator / denominator = time slice size [s]\n     */\n    var RMS_WINDOW_TIME_DENOMINATOR = GainAnalysis.RMS_WINDOW_TIME_DENOMINATOR;\n    /**\n     * max. Samples per Time slice\n     */\n    var MAX_SAMPLES_PER_WINDOW = GainAnalysis.MAX_SAMPLES_PER_WINDOW;\n\n\n    var ABYule = [\n        [0.03857599435200, -3.84664617118067, -0.02160367184185,\n            7.81501653005538, -0.00123395316851, -11.34170355132042,\n            -0.00009291677959, 13.05504219327545, -0.01655260341619,\n            -12.28759895145294, 0.02161526843274, 9.48293806319790,\n            -0.02074045215285, -5.87257861775999, 0.00594298065125,\n            2.75465861874613, 0.00306428023191, -0.86984376593551,\n            0.00012025322027, 0.13919314567432, 0.00288463683916],\n        [0.05418656406430, -3.47845948550071, -0.02911007808948,\n            6.36317777566148, -0.00848709379851, -8.54751527471874,\n            -0.00851165645469, 9.47693607801280, -0.00834990904936,\n            -8.81498681370155, 0.02245293253339, 6.85401540936998,\n            -0.02596338512915, -4.39470996079559, 0.01624864962975,\n            2.19611684890774, -0.00240879051584, -0.75104302451432,\n            0.00674613682247, 0.13149317958808, -0.00187763777362],\n        [0.15457299681924, -2.37898834973084, -0.09331049056315,\n            2.84868151156327, -0.06247880153653, -2.64577170229825,\n            0.02163541888798, 2.23697657451713, -0.05588393329856,\n            -1.67148153367602, 0.04781476674921, 1.00595954808547,\n            0.00222312597743, -0.45953458054983, 0.03174092540049,\n            0.16378164858596, -0.01390589421898, -0.05032077717131,\n            0.00651420667831, 0.02347897407020, -0.00881362733839],\n        [0.30296907319327, -1.61273165137247, -0.22613988682123,\n            1.07977492259970, -0.08587323730772, -0.25656257754070,\n            0.03282930172664, -0.16276719120440, -0.00915702933434,\n            -0.22638893773906, -0.02364141202522, 0.39120800788284,\n            -0.00584456039913, -0.22138138954925, 0.06276101321749,\n            0.04500235387352, -0.00000828086748, 0.02005851806501,\n            0.00205861885564, 0.00302439095741, -0.02950134983287],\n        [0.33642304856132, -1.49858979367799, -0.25572241425570,\n            0.87350271418188, -0.11828570177555, 0.12205022308084,\n            0.11921148675203, -0.80774944671438, -0.07834489609479,\n            0.47854794562326, -0.00469977914380, -0.12453458140019,\n            -0.00589500224440, -0.04067510197014, 0.05724228140351,\n            0.08333755284107, 0.00832043980773, -0.04237348025746,\n            -0.01635381384540, 0.02977207319925, -0.01760176568150],\n        [0.44915256608450, -0.62820619233671, -0.14351757464547,\n            0.29661783706366, -0.22784394429749, -0.37256372942400,\n            -0.01419140100551, 0.00213767857124, 0.04078262797139,\n            -0.42029820170918, -0.12398163381748, 0.22199650564824,\n            0.04097565135648, 0.00613424350682, 0.10478503600251,\n            0.06747620744683, -0.01863887810927, 0.05784820375801,\n            -0.03193428438915, 0.03222754072173, 0.00541907748707],\n        [0.56619470757641, -1.04800335126349, -0.75464456939302,\n            0.29156311971249, 0.16242137742230, -0.26806001042947,\n            0.16744243493672, 0.00819999645858, -0.18901604199609,\n            0.45054734505008, 0.30931782841830, -0.33032403314006,\n            -0.27562961986224, 0.06739368333110, 0.00647310677246,\n            -0.04784254229033, 0.08647503780351, 0.01639907836189,\n            -0.03788984554840, 0.01807364323573, -0.00588215443421],\n        [0.58100494960553, -0.51035327095184, -0.53174909058578,\n            -0.31863563325245, -0.14289799034253, -0.20256413484477,\n            0.17520704835522, 0.14728154134330, 0.02377945217615,\n            0.38952639978999, 0.15558449135573, -0.23313271880868,\n            -0.25344790059353, -0.05246019024463, 0.01628462406333,\n            -0.02505961724053, 0.06920467763959, 0.02442357316099,\n            -0.03721611395801, 0.01818801111503, -0.00749618797172],\n        [0.53648789255105, -0.25049871956020, -0.42163034350696,\n            -0.43193942311114, -0.00275953611929, -0.03424681017675,\n            0.04267842219415, -0.04678328784242, -0.10214864179676,\n            0.26408300200955, 0.14590772289388, 0.15113130533216,\n            -0.02459864859345, -0.17556493366449, -0.11202315195388,\n            -0.18823009262115, -0.04060034127000, 0.05477720428674,\n            0.04788665548180, 0.04704409688120, -0.02217936801134]];\n\n    var ABButter = [\n        [0.98621192462708, -1.97223372919527, -1.97242384925416,\n            0.97261396931306, 0.98621192462708],\n        [0.98500175787242, -1.96977855582618, -1.97000351574484,\n            0.97022847566350, 0.98500175787242],\n        [0.97938932735214, -1.95835380975398, -1.95877865470428,\n            0.95920349965459, 0.97938932735214],\n        [0.97531843204928, -1.95002759149878, -1.95063686409857,\n            0.95124613669835, 0.97531843204928],\n        [0.97316523498161, -1.94561023566527, -1.94633046996323,\n            0.94705070426118, 0.97316523498161],\n        [0.96454515552826, -1.92783286977036, -1.92909031105652,\n            0.93034775234268, 0.96454515552826],\n        [0.96009142950541, -1.91858953033784, -1.92018285901082,\n            0.92177618768381, 0.96009142950541],\n        [0.95856916599601, -1.91542108074780, -1.91713833199203,\n            0.91885558323625, 0.95856916599601],\n        [0.94597685600279, -1.88903307939452, -1.89195371200558,\n            0.89487434461664, 0.94597685600279]];\n\n\n    /**\n     * When calling this procedure, make sure that ip[-order] and op[-order]\n     * point to real data\n     */\n    //private void filterYule(final float[] input, int inputPos, float[] output,\n    //int outputPos, int nSamples, final float[] kernel) {\n    function filterYule(input, inputPos, output, outputPos, nSamples, kernel) {\n\n        while ((nSamples--) != 0) {\n            /* 1e-10 is a hack to avoid slowdown because of denormals */\n            output[outputPos] = 1e-10 + input[inputPos + 0] * kernel[0]\n                - output[outputPos - 1] * kernel[1] + input[inputPos - 1]\n                * kernel[2] - output[outputPos - 2] * kernel[3]\n                + input[inputPos - 2] * kernel[4] - output[outputPos - 3]\n                * kernel[5] + input[inputPos - 3] * kernel[6]\n                - output[outputPos - 4] * kernel[7] + input[inputPos - 4]\n                * kernel[8] - output[outputPos - 5] * kernel[9]\n                + input[inputPos - 5] * kernel[10] - output[outputPos - 6]\n                * kernel[11] + input[inputPos - 6] * kernel[12]\n                - output[outputPos - 7] * kernel[13] + input[inputPos - 7]\n                * kernel[14] - output[outputPos - 8] * kernel[15]\n                + input[inputPos - 8] * kernel[16] - output[outputPos - 9]\n                * kernel[17] + input[inputPos - 9] * kernel[18]\n                - output[outputPos - 10] * kernel[19]\n                + input[inputPos - 10] * kernel[20];\n            ++outputPos;\n            ++inputPos;\n        }\n    }\n\n//private void filterButter(final float[] input, int inputPos,\n//    float[] output, int outputPos, int nSamples, final float[] kernel) {\n    function filterButter(input, inputPos, output, outputPos, nSamples, kernel) {\n\n        while ((nSamples--) != 0) {\n            output[outputPos] = input[inputPos + 0] * kernel[0]\n                - output[outputPos - 1] * kernel[1] + input[inputPos - 1]\n                * kernel[2] - output[outputPos - 2] * kernel[3]\n                + input[inputPos - 2] * kernel[4];\n            ++outputPos;\n            ++inputPos;\n        }\n    }\n\n    /**\n     * @return INIT_GAIN_ANALYSIS_OK if successful, INIT_GAIN_ANALYSIS_ERROR if\n     *         not\n     */\n    function ResetSampleFrequency(rgData, samplefreq) {\n        /* zero out initial values */\n        for (var i = 0; i < MAX_ORDER; i++)\n            rgData.linprebuf[i] = rgData.lstepbuf[i] = rgData.loutbuf[i] = rgData.rinprebuf[i] = rgData.rstepbuf[i] = rgData.routbuf[i] = 0.;\n\n        switch (0 | (samplefreq)) {\n            case 48000:\n                rgData.reqindex = 0;\n                break;\n            case 44100:\n                rgData.reqindex = 1;\n                break;\n            case 32000:\n                rgData.reqindex = 2;\n                break;\n            case 24000:\n                rgData.reqindex = 3;\n                break;\n            case 22050:\n                rgData.reqindex = 4;\n                break;\n            case 16000:\n                rgData.reqindex = 5;\n                break;\n            case 12000:\n                rgData.reqindex = 6;\n                break;\n            case 11025:\n                rgData.reqindex = 7;\n                break;\n            case 8000:\n                rgData.reqindex = 8;\n                break;\n            default:\n                return INIT_GAIN_ANALYSIS_ERROR;\n        }\n\n        rgData.sampleWindow = 0 | ((samplefreq * RMS_WINDOW_TIME_NUMERATOR\n            + RMS_WINDOW_TIME_DENOMINATOR - 1) / RMS_WINDOW_TIME_DENOMINATOR);\n\n        rgData.lsum = 0.;\n        rgData.rsum = 0.;\n        rgData.totsamp = 0;\n\n        Arrays.ill(rgData.A, 0);\n\n        return INIT_GAIN_ANALYSIS_OK;\n    }\n\n    this.InitGainAnalysis = function (rgData, samplefreq) {\n        if (ResetSampleFrequency(rgData, samplefreq) != INIT_GAIN_ANALYSIS_OK) {\n            return INIT_GAIN_ANALYSIS_ERROR;\n        }\n\n        rgData.linpre = MAX_ORDER;\n        rgData.rinpre = MAX_ORDER;\n        rgData.lstep = MAX_ORDER;\n        rgData.rstep = MAX_ORDER;\n        rgData.lout = MAX_ORDER;\n        rgData.rout = MAX_ORDER;\n\n        Arrays.fill(rgData.B, 0);\n\n        return INIT_GAIN_ANALYSIS_OK;\n    };\n\n    /**\n     * square\n     */\n    function fsqr(d) {\n        return d * d;\n    }\n\n    this.AnalyzeSamples = function (rgData, left_samples, left_samplesPos, right_samples, right_samplesPos, num_samples,\n                                    num_channels) {\n        var curleft;\n        var curleftBase;\n        var curright;\n        var currightBase;\n        var batchsamples;\n        var cursamples;\n        var cursamplepos;\n\n        if (num_samples == 0)\n            return GAIN_ANALYSIS_OK;\n\n        cursamplepos = 0;\n        batchsamples = num_samples;\n\n        switch (num_channels) {\n            case 1:\n                right_samples = left_samples;\n                right_samplesPos = left_samplesPos;\n                break;\n            case 2:\n                break;\n            default:\n                return GAIN_ANALYSIS_ERROR;\n        }\n\n        if (num_samples < MAX_ORDER) {\n            System.arraycopy(left_samples, left_samplesPos, rgData.linprebuf,\n                MAX_ORDER, num_samples);\n            System.arraycopy(right_samples, right_samplesPos, rgData.rinprebuf,\n                MAX_ORDER, num_samples);\n        } else {\n            System.arraycopy(left_samples, left_samplesPos, rgData.linprebuf,\n                MAX_ORDER, MAX_ORDER);\n            System.arraycopy(right_samples, right_samplesPos, rgData.rinprebuf,\n                MAX_ORDER, MAX_ORDER);\n        }\n\n        while (batchsamples > 0) {\n            cursamples = batchsamples > rgData.sampleWindow - rgData.totsamp ? rgData.sampleWindow\n            - rgData.totsamp\n                : batchsamples;\n            if (cursamplepos < MAX_ORDER) {\n                curleft = rgData.linpre + cursamplepos;\n                curleftBase = rgData.linprebuf;\n                curright = rgData.rinpre + cursamplepos;\n                currightBase = rgData.rinprebuf;\n                if (cursamples > MAX_ORDER - cursamplepos)\n                    cursamples = MAX_ORDER - cursamplepos;\n            } else {\n                curleft = left_samplesPos + cursamplepos;\n                curleftBase = left_samples;\n                curright = right_samplesPos + cursamplepos;\n                currightBase = right_samples;\n            }\n\n            filterYule(curleftBase, curleft, rgData.lstepbuf, rgData.lstep\n                + rgData.totsamp, cursamples, ABYule[rgData.reqindex]);\n            filterYule(currightBase, curright, rgData.rstepbuf, rgData.rstep\n                + rgData.totsamp, cursamples, ABYule[rgData.reqindex]);\n\n            filterButter(rgData.lstepbuf, rgData.lstep + rgData.totsamp,\n                rgData.loutbuf, rgData.lout + rgData.totsamp, cursamples,\n                ABButter[rgData.reqindex]);\n            filterButter(rgData.rstepbuf, rgData.rstep + rgData.totsamp,\n                rgData.routbuf, rgData.rout + rgData.totsamp, cursamples,\n                ABButter[rgData.reqindex]);\n\n            curleft = rgData.lout + rgData.totsamp;\n            /* Get the squared values */\n            curleftBase = rgData.loutbuf;\n            curright = rgData.rout + rgData.totsamp;\n            currightBase = rgData.routbuf;\n\n            var i = cursamples % 8;\n            while ((i--) != 0) {\n                rgData.lsum += fsqr(curleftBase[curleft++]);\n                rgData.rsum += fsqr(currightBase[curright++]);\n            }\n            i = cursamples / 8;\n            while ((i--) != 0) {\n                rgData.lsum += fsqr(curleftBase[curleft + 0])\n                    + fsqr(curleftBase[curleft + 1])\n                    + fsqr(curleftBase[curleft + 2])\n                    + fsqr(curleftBase[curleft + 3])\n                    + fsqr(curleftBase[curleft + 4])\n                    + fsqr(curleftBase[curleft + 5])\n                    + fsqr(curleftBase[curleft + 6])\n                    + fsqr(curleftBase[curleft + 7]);\n                curleft += 8;\n                rgData.rsum += fsqr(currightBase[curright + 0])\n                    + fsqr(currightBase[curright + 1])\n                    + fsqr(currightBase[curright + 2])\n                    + fsqr(currightBase[curright + 3])\n                    + fsqr(currightBase[curright + 4])\n                    + fsqr(currightBase[curright + 5])\n                    + fsqr(currightBase[curright + 6])\n                    + fsqr(currightBase[curright + 7]);\n                curright += 8;\n            }\n\n            batchsamples -= cursamples;\n            cursamplepos += cursamples;\n            rgData.totsamp += cursamples;\n            if (rgData.totsamp == rgData.sampleWindow) {\n                /* Get the Root Mean Square (RMS) for this set of samples */\n                var val = GainAnalysis.STEPS_per_dB\n                    * 10.\n                    * Math.log10((rgData.lsum + rgData.rsum)\n                        / rgData.totsamp * 0.5 + 1.e-37);\n                var ival = (val <= 0) ? 0 : 0 | val;\n                if (ival >= rgData.A.length)\n                    ival = rgData.A.length - 1;\n                rgData.A[ival]++;\n                rgData.lsum = rgData.rsum = 0.;\n\n                System.arraycopy(rgData.loutbuf, rgData.totsamp,\n                    rgData.loutbuf, 0, MAX_ORDER);\n                System.arraycopy(rgData.routbuf, rgData.totsamp,\n                    rgData.routbuf, 0, MAX_ORDER);\n                System.arraycopy(rgData.lstepbuf, rgData.totsamp,\n                    rgData.lstepbuf, 0, MAX_ORDER);\n                System.arraycopy(rgData.rstepbuf, rgData.totsamp,\n                    rgData.rstepbuf, 0, MAX_ORDER);\n                rgData.totsamp = 0;\n            }\n            if (rgData.totsamp > rgData.sampleWindow) {\n                /*\n                 * somehow I really screwed up: Error in programming! Contact\n                 * author about totsamp > sampleWindow\n                 */\n                return GAIN_ANALYSIS_ERROR;\n            }\n        }\n        if (num_samples < MAX_ORDER) {\n            System.arraycopy(rgData.linprebuf, num_samples, rgData.linprebuf,\n                0, MAX_ORDER - num_samples);\n            System.arraycopy(rgData.rinprebuf, num_samples, rgData.rinprebuf,\n                0, MAX_ORDER - num_samples);\n            System.arraycopy(left_samples, left_samplesPos, rgData.linprebuf,\n                MAX_ORDER - num_samples, num_samples);\n            System.arraycopy(right_samples, right_samplesPos, rgData.rinprebuf,\n                MAX_ORDER - num_samples, num_samples);\n        } else {\n            System.arraycopy(left_samples, left_samplesPos + num_samples\n                - MAX_ORDER, rgData.linprebuf, 0, MAX_ORDER);\n            System.arraycopy(right_samples, right_samplesPos + num_samples\n                - MAX_ORDER, rgData.rinprebuf, 0, MAX_ORDER);\n        }\n\n        return GAIN_ANALYSIS_OK;\n    };\n\n    function analyzeResult(Array, len) {\n        var i;\n\n        var elems = 0;\n        for (i = 0; i < len; i++)\n            elems += Array[i];\n        if (elems == 0)\n            return GAIN_NOT_ENOUGH_SAMPLES;\n\n        var upper = 0 | Math.ceil(elems * (1. - RMS_PERCENTILE));\n        for (i = len; i-- > 0;) {\n            if ((upper -= Array[i]) <= 0)\n                break;\n        }\n\n        //return (float) ((float) PINK_REF - (float) i / (float) STEPS_per_dB);\n        return (PINK_REF - i / GainAnalysis.STEPS_per_dB);\n    }\n\n    this.GetTitleGain = function (rgData) {\n        var retval = analyzeResult(rgData.A, rgData.A.length);\n\n        for (var i = 0; i < rgData.A.length; i++) {\n            rgData.B[i] += rgData.A[i];\n            rgData.A[i] = 0;\n        }\n\n        for (var i = 0; i < MAX_ORDER; i++)\n            rgData.linprebuf[i] = rgData.lstepbuf[i] = rgData.loutbuf[i] = rgData.rinprebuf[i] = rgData.rstepbuf[i] = rgData.routbuf[i] = 0.;\n\n        rgData.totsamp = 0;\n        rgData.lsum = rgData.rsum = 0.;\n        return retval;\n    }\n\n}\n\nmodule.exports = GainAnalysis;\n","var common = require('./common.js');\nvar System = common.System;\nvar VbrMode = common.VbrMode;\nvar Float = common.Float;\nvar ShortBlock = common.ShortBlock;\nvar Util = common.Util;\nvar Arrays = common.Arrays;\nvar new_array_n = common.new_array_n;\nvar new_byte = common.new_byte;\nvar new_double = common.new_double;\nvar new_float = common.new_float;\nvar new_float_n = common.new_float_n;\nvar new_int = common.new_int;\nvar new_int_n = common.new_int_n;\nvar assert = common.assert;\n\nvar GainAnalysis = require('./GainAnalysis.js');\n\nfunction ReplayGain() {\n    this.linprebuf = new_float(GainAnalysis.MAX_ORDER * 2);\n    /**\n     * left input samples, with pre-buffer\n     */\n    this.linpre = 0;\n    this.lstepbuf = new_float(GainAnalysis.MAX_SAMPLES_PER_WINDOW + GainAnalysis.MAX_ORDER);\n    /**\n     * left \"first step\" (i.e. post first filter) samples\n     */\n    this.lstep = 0;\n    this.loutbuf = new_float(GainAnalysis.MAX_SAMPLES_PER_WINDOW + GainAnalysis.MAX_ORDER);\n    /**\n     * left \"out\" (i.e. post second filter) samples\n     */\n    this.lout = 0;\n    this.rinprebuf = new_float(GainAnalysis.MAX_ORDER * 2);\n    /**\n     * right input samples ...\n     */\n    this.rinpre = 0;\n    this.rstepbuf = new_float(GainAnalysis.MAX_SAMPLES_PER_WINDOW + GainAnalysis.MAX_ORDER);\n    this.rstep = 0;\n    this.routbuf = new_float(GainAnalysis.MAX_SAMPLES_PER_WINDOW + GainAnalysis.MAX_ORDER);\n    this.rout = 0;\n    /**\n     * number of samples required to reach number of milliseconds required\n     * for RMS window\n     */\n    this.sampleWindow = 0;\n    this.totsamp = 0;\n    this.lsum = 0.;\n    this.rsum = 0.;\n    this.freqindex = 0;\n    this.first = 0;\n    this.A = new_int(0 | (GainAnalysis.STEPS_per_dB * GainAnalysis.MAX_dB));\n    this.B = new_int(0 | (GainAnalysis.STEPS_per_dB * GainAnalysis.MAX_dB));\n\n}\n\nmodule.exports = ReplayGain;\n","function MeanBits(meanBits) {\n    this.bits = meanBits;\n}\n\nmodule.exports = MeanBits;\n","var common = require('./common.js');\nvar System = common.System;\nvar VbrMode = common.VbrMode;\nvar Float = common.Float;\nvar ShortBlock = common.ShortBlock;\nvar Util = common.Util;\nvar Arrays = common.Arrays;\nvar new_array_n = common.new_array_n;\nvar new_byte = common.new_byte;\nvar new_double = common.new_double;\nvar new_float = common.new_float;\nvar new_float_n = common.new_float_n;\nvar new_int = common.new_int;\nvar new_int_n = common.new_int_n;\nvar assert = common.assert;\n\nvar MeanBits = require('./MeanBits.js');\nvar Encoder = require('./Encoder.js');\nvar L3Side = require('./L3Side.js');\nvar LameInternalFlags = require('./LameInternalFlags.js');\n\nfunction CBRNewIterationLoop(_quantize)  {\n    var quantize = _quantize;\n    this.quantize = quantize;\n\tthis.iteration_loop = function(gfp, pe, ms_ener_ratio, ratio) {\n\t\tvar gfc = gfp.internal_flags;\n        var l3_xmin = new_float(L3Side.SFBMAX);\n\t\tvar xrpow = new_float(576);\n\t\tvar targ_bits = new_int(2);\n\t\tvar mean_bits = 0, max_bits;\n\t\tvar l3_side = gfc.l3_side;\n\n\t\tvar mb = new MeanBits(mean_bits);\n\t\tthis.quantize.rv.ResvFrameBegin(gfp, mb);\n\t\tmean_bits = mb.bits;\n\n\t\t/* quantize! */\n\t\tfor (var gr = 0; gr < gfc.mode_gr; gr++) {\n\n\t\t\t/*\n\t\t\t * calculate needed bits\n\t\t\t */\n\t\t\tmax_bits = this.quantize.qupvt.on_pe(gfp, pe, targ_bits, mean_bits,\n\t\t\t\t\tgr, gr);\n\n\t\t\tif (gfc.mode_ext == Encoder.MPG_MD_MS_LR) {\n\t\t\t\tthis.quantize.ms_convert(gfc.l3_side, gr);\n\t\t\t\tthis.quantize.qupvt.reduce_side(targ_bits, ms_ener_ratio[gr],\n\t\t\t\t\t\tmean_bits, max_bits);\n\t\t\t}\n\n\t\t\tfor (var ch = 0; ch < gfc.channels_out; ch++) {\n\t\t\t\tvar adjust, masking_lower_db;\n\t\t\t\tvar cod_info = l3_side.tt[gr][ch];\n\n\t\t\t\tif (cod_info.block_type != Encoder.SHORT_TYPE) {\n\t\t\t\t\t// NORM, START or STOP type\n\t\t\t\t\tadjust = 0;\n\t\t\t\t\tmasking_lower_db = gfc.PSY.mask_adjust - adjust;\n\t\t\t\t} else {\n\t\t\t\t\tadjust = 0;\n\t\t\t\t\tmasking_lower_db = gfc.PSY.mask_adjust_short - adjust;\n\t\t\t\t}\n\t\t\t\tgfc.masking_lower =  Math.pow(10.0,\n\t\t\t\t\t\tmasking_lower_db * 0.1);\n\n\t\t\t\t/*\n\t\t\t\t * init_outer_loop sets up cod_info, scalefac and xrpow\n\t\t\t\t */\n\t\t\t\tthis.quantize.init_outer_loop(gfc, cod_info);\n\t\t\t\tif (this.quantize.init_xrpow(gfc, cod_info, xrpow)) {\n\t\t\t\t\t/*\n\t\t\t\t\t * xr contains energy we will have to encode calculate the\n\t\t\t\t\t * masking abilities find some good quantization in\n\t\t\t\t\t * outer_loop\n\t\t\t\t\t */\n\t\t\t\t\tthis.quantize.qupvt.calc_xmin(gfp, ratio[gr][ch], cod_info,\n\t\t\t\t\t\t\tl3_xmin);\n\t\t\t\t\tthis.quantize.outer_loop(gfp, cod_info, l3_xmin, xrpow, ch,\n\t\t\t\t\t\t\ttarg_bits[ch]);\n\t\t\t\t}\n\n\t\t\t\tthis.quantize.iteration_finish_one(gfc, gr, ch);\n\t\t\t\tassert (cod_info.part2_3_length <= LameInternalFlags.MAX_BITS_PER_CHANNEL);\n\t\t\t\tassert (cod_info.part2_3_length <= targ_bits[ch]);\n\t\t\t} /* for ch */\n\t\t} /* for gr */\n\n\t\tthis.quantize.rv.ResvFrameEnd(gfc, mean_bits);\n\t}\n}\nmodule.exports = CBRNewIterationLoop;\n","function HuffCodeTab(len, max, tab, hl) {\n    this.xlen = len;\n    this.linmax = max;\n    this.table = tab;\n    this.hlen = hl;\n}\n\nvar Tables = {};\n\n\nTables.t1HB = [\n    1, 1,\n    1, 0\n];\n\nTables.t2HB = [\n    1, 2, 1,\n    3, 1, 1,\n    3, 2, 0\n];\n\nTables.t3HB = [\n    3, 2, 1,\n    1, 1, 1,\n    3, 2, 0\n];\n\nTables.t5HB = [\n    1, 2, 6, 5,\n    3, 1, 4, 4,\n    7, 5, 7, 1,\n    6, 1, 1, 0\n];\n\nTables.t6HB = [\n    7, 3, 5, 1,\n    6, 2, 3, 2,\n    5, 4, 4, 1,\n    3, 3, 2, 0\n];\n\nTables.t7HB = [\n    1, 2, 10, 19, 16, 10,\n    3, 3, 7, 10, 5, 3,\n    11, 4, 13, 17, 8, 4,\n    12, 11, 18, 15, 11, 2,\n    7, 6, 9, 14, 3, 1,\n    6, 4, 5, 3, 2, 0\n];\n\nTables.t8HB = [\n    3, 4, 6, 18, 12, 5,\n    5, 1, 2, 16, 9, 3,\n    7, 3, 5, 14, 7, 3,\n    19, 17, 15, 13, 10, 4,\n    13, 5, 8, 11, 5, 1,\n    12, 4, 4, 1, 1, 0\n];\n\nTables.t9HB = [\n    7, 5, 9, 14, 15, 7,\n    6, 4, 5, 5, 6, 7,\n    7, 6, 8, 8, 8, 5,\n    15, 6, 9, 10, 5, 1,\n    11, 7, 9, 6, 4, 1,\n    14, 4, 6, 2, 6, 0\n];\n\nTables.t10HB = [\n    1, 2, 10, 23, 35, 30, 12, 17,\n    3, 3, 8, 12, 18, 21, 12, 7,\n    11, 9, 15, 21, 32, 40, 19, 6,\n    14, 13, 22, 34, 46, 23, 18, 7,\n    20, 19, 33, 47, 27, 22, 9, 3,\n    31, 22, 41, 26, 21, 20, 5, 3,\n    14, 13, 10, 11, 16, 6, 5, 1,\n    9, 8, 7, 8, 4, 4, 2, 0\n];\n\nTables.t11HB = [\n    3, 4, 10, 24, 34, 33, 21, 15,\n    5, 3, 4, 10, 32, 17, 11, 10,\n    11, 7, 13, 18, 30, 31, 20, 5,\n    25, 11, 19, 59, 27, 18, 12, 5,\n    35, 33, 31, 58, 30, 16, 7, 5,\n    28, 26, 32, 19, 17, 15, 8, 14,\n    14, 12, 9, 13, 14, 9, 4, 1,\n    11, 4, 6, 6, 6, 3, 2, 0\n];\n\nTables.t12HB = [\n    9, 6, 16, 33, 41, 39, 38, 26,\n    7, 5, 6, 9, 23, 16, 26, 11,\n    17, 7, 11, 14, 21, 30, 10, 7,\n    17, 10, 15, 12, 18, 28, 14, 5,\n    32, 13, 22, 19, 18, 16, 9, 5,\n    40, 17, 31, 29, 17, 13, 4, 2,\n    27, 12, 11, 15, 10, 7, 4, 1,\n    27, 12, 8, 12, 6, 3, 1, 0\n];\n\nTables.t13HB = [\n    1, 5, 14, 21, 34, 51, 46, 71, 42, 52, 68, 52, 67, 44, 43, 19,\n    3, 4, 12, 19, 31, 26, 44, 33, 31, 24, 32, 24, 31, 35, 22, 14,\n    15, 13, 23, 36, 59, 49, 77, 65, 29, 40, 30, 40, 27, 33, 42, 16,\n    22, 20, 37, 61, 56, 79, 73, 64, 43, 76, 56, 37, 26, 31, 25, 14,\n    35, 16, 60, 57, 97, 75, 114, 91, 54, 73, 55, 41, 48, 53, 23, 24,\n    58, 27, 50, 96, 76, 70, 93, 84, 77, 58, 79, 29, 74, 49, 41, 17,\n    47, 45, 78, 74, 115, 94, 90, 79, 69, 83, 71, 50, 59, 38, 36, 15,\n    72, 34, 56, 95, 92, 85, 91, 90, 86, 73, 77, 65, 51, 44, 43, 42,\n    43, 20, 30, 44, 55, 78, 72, 87, 78, 61, 46, 54, 37, 30, 20, 16,\n    53, 25, 41, 37, 44, 59, 54, 81, 66, 76, 57, 54, 37, 18, 39, 11,\n    35, 33, 31, 57, 42, 82, 72, 80, 47, 58, 55, 21, 22, 26, 38, 22,\n    53, 25, 23, 38, 70, 60, 51, 36, 55, 26, 34, 23, 27, 14, 9, 7,\n    34, 32, 28, 39, 49, 75, 30, 52, 48, 40, 52, 28, 18, 17, 9, 5,\n    45, 21, 34, 64, 56, 50, 49, 45, 31, 19, 12, 15, 10, 7, 6, 3,\n    48, 23, 20, 39, 36, 35, 53, 21, 16, 23, 13, 10, 6, 1, 4, 2,\n    16, 15, 17, 27, 25, 20, 29, 11, 17, 12, 16, 8, 1, 1, 0, 1\n];\n\nTables.t15HB = [\n    7, 12, 18, 53, 47, 76, 124, 108, 89, 123, 108, 119, 107, 81, 122, 63,\n    13, 5, 16, 27, 46, 36, 61, 51, 42, 70, 52, 83, 65, 41, 59, 36,\n    19, 17, 15, 24, 41, 34, 59, 48, 40, 64, 50, 78, 62, 80, 56, 33,\n    29, 28, 25, 43, 39, 63, 55, 93, 76, 59, 93, 72, 54, 75, 50, 29,\n    52, 22, 42, 40, 67, 57, 95, 79, 72, 57, 89, 69, 49, 66, 46, 27,\n    77, 37, 35, 66, 58, 52, 91, 74, 62, 48, 79, 63, 90, 62, 40, 38,\n    125, 32, 60, 56, 50, 92, 78, 65, 55, 87, 71, 51, 73, 51, 70, 30,\n    109, 53, 49, 94, 88, 75, 66, 122, 91, 73, 56, 42, 64, 44, 21, 25,\n    90, 43, 41, 77, 73, 63, 56, 92, 77, 66, 47, 67, 48, 53, 36, 20,\n    71, 34, 67, 60, 58, 49, 88, 76, 67, 106, 71, 54, 38, 39, 23, 15,\n    109, 53, 51, 47, 90, 82, 58, 57, 48, 72, 57, 41, 23, 27, 62, 9,\n    86, 42, 40, 37, 70, 64, 52, 43, 70, 55, 42, 25, 29, 18, 11, 11,\n    118, 68, 30, 55, 50, 46, 74, 65, 49, 39, 24, 16, 22, 13, 14, 7,\n    91, 44, 39, 38, 34, 63, 52, 45, 31, 52, 28, 19, 14, 8, 9, 3,\n    123, 60, 58, 53, 47, 43, 32, 22, 37, 24, 17, 12, 15, 10, 2, 1,\n    71, 37, 34, 30, 28, 20, 17, 26, 21, 16, 10, 6, 8, 6, 2, 0\n];\n\nTables.t16HB = [\n    1, 5, 14, 44, 74, 63, 110, 93, 172, 149, 138, 242, 225, 195, 376, 17,\n    3, 4, 12, 20, 35, 62, 53, 47, 83, 75, 68, 119, 201, 107, 207, 9,\n    15, 13, 23, 38, 67, 58, 103, 90, 161, 72, 127, 117, 110, 209, 206, 16,\n    45, 21, 39, 69, 64, 114, 99, 87, 158, 140, 252, 212, 199, 387, 365, 26,\n    75, 36, 68, 65, 115, 101, 179, 164, 155, 264, 246, 226, 395, 382, 362, 9,\n    66, 30, 59, 56, 102, 185, 173, 265, 142, 253, 232, 400, 388, 378, 445, 16,\n    111, 54, 52, 100, 184, 178, 160, 133, 257, 244, 228, 217, 385, 366, 715, 10,\n    98, 48, 91, 88, 165, 157, 148, 261, 248, 407, 397, 372, 380, 889, 884, 8,\n    85, 84, 81, 159, 156, 143, 260, 249, 427, 401, 392, 383, 727, 713, 708, 7,\n    154, 76, 73, 141, 131, 256, 245, 426, 406, 394, 384, 735, 359, 710, 352, 11,\n    139, 129, 67, 125, 247, 233, 229, 219, 393, 743, 737, 720, 885, 882, 439, 4,\n    243, 120, 118, 115, 227, 223, 396, 746, 742, 736, 721, 712, 706, 223, 436, 6,\n    202, 224, 222, 218, 216, 389, 386, 381, 364, 888, 443, 707, 440, 437, 1728, 4,\n    747, 211, 210, 208, 370, 379, 734, 723, 714, 1735, 883, 877, 876, 3459, 865, 2,\n    377, 369, 102, 187, 726, 722, 358, 711, 709, 866, 1734, 871, 3458, 870, 434, 0,\n    12, 10, 7, 11, 10, 17, 11, 9, 13, 12, 10, 7, 5, 3, 1, 3\n];\n\nTables.t24HB = [\n    15, 13, 46, 80, 146, 262, 248, 434, 426, 669, 653, 649, 621, 517, 1032, 88,\n    14, 12, 21, 38, 71, 130, 122, 216, 209, 198, 327, 345, 319, 297, 279, 42,\n    47, 22, 41, 74, 68, 128, 120, 221, 207, 194, 182, 340, 315, 295, 541, 18,\n    81, 39, 75, 70, 134, 125, 116, 220, 204, 190, 178, 325, 311, 293, 271, 16,\n    147, 72, 69, 135, 127, 118, 112, 210, 200, 188, 352, 323, 306, 285, 540, 14,\n    263, 66, 129, 126, 119, 114, 214, 202, 192, 180, 341, 317, 301, 281, 262, 12,\n    249, 123, 121, 117, 113, 215, 206, 195, 185, 347, 330, 308, 291, 272, 520, 10,\n    435, 115, 111, 109, 211, 203, 196, 187, 353, 332, 313, 298, 283, 531, 381, 17,\n    427, 212, 208, 205, 201, 193, 186, 177, 169, 320, 303, 286, 268, 514, 377, 16,\n    335, 199, 197, 191, 189, 181, 174, 333, 321, 305, 289, 275, 521, 379, 371, 11,\n    668, 184, 183, 179, 175, 344, 331, 314, 304, 290, 277, 530, 383, 373, 366, 10,\n    652, 346, 171, 168, 164, 318, 309, 299, 287, 276, 263, 513, 375, 368, 362, 6,\n    648, 322, 316, 312, 307, 302, 292, 284, 269, 261, 512, 376, 370, 364, 359, 4,\n    620, 300, 296, 294, 288, 282, 273, 266, 515, 380, 374, 369, 365, 361, 357, 2,\n    1033, 280, 278, 274, 267, 264, 259, 382, 378, 372, 367, 363, 360, 358, 356, 0,\n    43, 20, 19, 17, 15, 13, 11, 9, 7, 6, 4, 7, 5, 3, 1, 3\n];\n\nTables.t32HB = [\n    1 << 0, 5 << 1, 4 << 1, 5 << 2, 6 << 1, 5 << 2, 4 << 2, 4 << 3,\n    7 << 1, 3 << 2, 6 << 2, 0 << 3, 7 << 2, 2 << 3, 3 << 3, 1 << 4\n];\n\nTables.t33HB = [\n    15 << 0, 14 << 1, 13 << 1, 12 << 2, 11 << 1, 10 << 2, 9 << 2, 8 << 3,\n    7 << 1, 6 << 2, 5 << 2, 4 << 3, 3 << 2, 2 << 3, 1 << 3, 0 << 4\n];\n\nTables.t1l = [\n    1, 4,\n    3, 5\n];\n\nTables.t2l = [\n    1, 4, 7,\n    4, 5, 7,\n    6, 7, 8\n];\n\nTables.t3l = [\n    2, 3, 7,\n    4, 4, 7,\n    6, 7, 8\n];\n\nTables.t5l = [\n    1, 4, 7, 8,\n    4, 5, 8, 9,\n    7, 8, 9, 10,\n    8, 8, 9, 10\n];\n\nTables.t6l = [\n    3, 4, 6, 8,\n    4, 4, 6, 7,\n    5, 6, 7, 8,\n    7, 7, 8, 9\n];\n\nTables.t7l = [\n    1, 4, 7, 9, 9, 10,\n    4, 6, 8, 9, 9, 10,\n    7, 7, 9, 10, 10, 11,\n    8, 9, 10, 11, 11, 11,\n    8, 9, 10, 11, 11, 12,\n    9, 10, 11, 12, 12, 12\n];\n\nTables.t8l = [\n    2, 4, 7, 9, 9, 10,\n    4, 4, 6, 10, 10, 10,\n    7, 6, 8, 10, 10, 11,\n    9, 10, 10, 11, 11, 12,\n    9, 9, 10, 11, 12, 12,\n    10, 10, 11, 11, 13, 13\n];\n\nTables.t9l = [\n    3, 4, 6, 7, 9, 10,\n    4, 5, 6, 7, 8, 10,\n    5, 6, 7, 8, 9, 10,\n    7, 7, 8, 9, 9, 10,\n    8, 8, 9, 9, 10, 11,\n    9, 9, 10, 10, 11, 11\n];\n\nTables.t10l = [\n    1, 4, 7, 9, 10, 10, 10, 11,\n    4, 6, 8, 9, 10, 11, 10, 10,\n    7, 8, 9, 10, 11, 12, 11, 11,\n    8, 9, 10, 11, 12, 12, 11, 12,\n    9, 10, 11, 12, 12, 12, 12, 12,\n    10, 11, 12, 12, 13, 13, 12, 13,\n    9, 10, 11, 12, 12, 12, 13, 13,\n    10, 10, 11, 12, 12, 13, 13, 13\n];\n\nTables.t11l = [\n    2, 4, 6, 8, 9, 10, 9, 10,\n    4, 5, 6, 8, 10, 10, 9, 10,\n    6, 7, 8, 9, 10, 11, 10, 10,\n    8, 8, 9, 11, 10, 12, 10, 11,\n    9, 10, 10, 11, 11, 12, 11, 12,\n    9, 10, 11, 12, 12, 13, 12, 13,\n    9, 9, 9, 10, 11, 12, 12, 12,\n    9, 9, 10, 11, 12, 12, 12, 12\n];\n\nTables.t12l = [\n    4, 4, 6, 8, 9, 10, 10, 10,\n    4, 5, 6, 7, 9, 9, 10, 10,\n    6, 6, 7, 8, 9, 10, 9, 10,\n    7, 7, 8, 8, 9, 10, 10, 10,\n    8, 8, 9, 9, 10, 10, 10, 11,\n    9, 9, 10, 10, 10, 11, 10, 11,\n    9, 9, 9, 10, 10, 11, 11, 12,\n    10, 10, 10, 11, 11, 11, 11, 12\n];\n\nTables.t13l = [\n    1, 5, 7, 8, 9, 10, 10, 11, 10, 11, 12, 12, 13, 13, 14, 14,\n    4, 6, 8, 9, 10, 10, 11, 11, 11, 11, 12, 12, 13, 14, 14, 14,\n    7, 8, 9, 10, 11, 11, 12, 12, 11, 12, 12, 13, 13, 14, 15, 15,\n    8, 9, 10, 11, 11, 12, 12, 12, 12, 13, 13, 13, 13, 14, 15, 15,\n    9, 9, 11, 11, 12, 12, 13, 13, 12, 13, 13, 14, 14, 15, 15, 16,\n    10, 10, 11, 12, 12, 12, 13, 13, 13, 13, 14, 13, 15, 15, 16, 16,\n    10, 11, 12, 12, 13, 13, 13, 13, 13, 14, 14, 14, 15, 15, 16, 16,\n    11, 11, 12, 13, 13, 13, 14, 14, 14, 14, 15, 15, 15, 16, 18, 18,\n    10, 10, 11, 12, 12, 13, 13, 14, 14, 14, 14, 15, 15, 16, 17, 17,\n    11, 11, 12, 12, 13, 13, 13, 15, 14, 15, 15, 16, 16, 16, 18, 17,\n    11, 12, 12, 13, 13, 14, 14, 15, 14, 15, 16, 15, 16, 17, 18, 19,\n    12, 12, 12, 13, 14, 14, 14, 14, 15, 15, 15, 16, 17, 17, 17, 18,\n    12, 13, 13, 14, 14, 15, 14, 15, 16, 16, 17, 17, 17, 18, 18, 18,\n    13, 13, 14, 15, 15, 15, 16, 16, 16, 16, 16, 17, 18, 17, 18, 18,\n    14, 14, 14, 15, 15, 15, 17, 16, 16, 19, 17, 17, 17, 19, 18, 18,\n    13, 14, 15, 16, 16, 16, 17, 16, 17, 17, 18, 18, 21, 20, 21, 18\n];\n\nTables.t15l = [\n    3, 5, 6, 8, 8, 9, 10, 10, 10, 11, 11, 12, 12, 12, 13, 14,\n    5, 5, 7, 8, 9, 9, 10, 10, 10, 11, 11, 12, 12, 12, 13, 13,\n    6, 7, 7, 8, 9, 9, 10, 10, 10, 11, 11, 12, 12, 13, 13, 13,\n    7, 8, 8, 9, 9, 10, 10, 11, 11, 11, 12, 12, 12, 13, 13, 13,\n    8, 8, 9, 9, 10, 10, 11, 11, 11, 11, 12, 12, 12, 13, 13, 13,\n    9, 9, 9, 10, 10, 10, 11, 11, 11, 11, 12, 12, 13, 13, 13, 14,\n    10, 9, 10, 10, 10, 11, 11, 11, 11, 12, 12, 12, 13, 13, 14, 14,\n    10, 10, 10, 11, 11, 11, 11, 12, 12, 12, 12, 12, 13, 13, 13, 14,\n    10, 10, 10, 11, 11, 11, 11, 12, 12, 12, 12, 13, 13, 14, 14, 14,\n    10, 10, 11, 11, 11, 11, 12, 12, 12, 13, 13, 13, 13, 14, 14, 14,\n    11, 11, 11, 11, 12, 12, 12, 12, 12, 13, 13, 13, 13, 14, 15, 14,\n    11, 11, 11, 11, 12, 12, 12, 12, 13, 13, 13, 13, 14, 14, 14, 15,\n    12, 12, 11, 12, 12, 12, 13, 13, 13, 13, 13, 13, 14, 14, 15, 15,\n    12, 12, 12, 12, 12, 13, 13, 13, 13, 14, 14, 14, 14, 14, 15, 15,\n    13, 13, 13, 13, 13, 13, 13, 13, 14, 14, 14, 14, 15, 15, 14, 15,\n    13, 13, 13, 13, 13, 13, 13, 14, 14, 14, 14, 14, 15, 15, 15, 15\n];\n\nTables.t16_5l = [\n    1, 5, 7, 9, 10, 10, 11, 11, 12, 12, 12, 13, 13, 13, 14, 11,\n    4, 6, 8, 9, 10, 11, 11, 11, 12, 12, 12, 13, 14, 13, 14, 11,\n    7, 8, 9, 10, 11, 11, 12, 12, 13, 12, 13, 13, 13, 14, 14, 12,\n    9, 9, 10, 11, 11, 12, 12, 12, 13, 13, 14, 14, 14, 15, 15, 13,\n    10, 10, 11, 11, 12, 12, 13, 13, 13, 14, 14, 14, 15, 15, 15, 12,\n    10, 10, 11, 11, 12, 13, 13, 14, 13, 14, 14, 15, 15, 15, 16, 13,\n    11, 11, 11, 12, 13, 13, 13, 13, 14, 14, 14, 14, 15, 15, 16, 13,\n    11, 11, 12, 12, 13, 13, 13, 14, 14, 15, 15, 15, 15, 17, 17, 13,\n    11, 12, 12, 13, 13, 13, 14, 14, 15, 15, 15, 15, 16, 16, 16, 13,\n    12, 12, 12, 13, 13, 14, 14, 15, 15, 15, 15, 16, 15, 16, 15, 14,\n    12, 13, 12, 13, 14, 14, 14, 14, 15, 16, 16, 16, 17, 17, 16, 13,\n    13, 13, 13, 13, 14, 14, 15, 16, 16, 16, 16, 16, 16, 15, 16, 14,\n    13, 14, 14, 14, 14, 15, 15, 15, 15, 17, 16, 16, 16, 16, 18, 14,\n    15, 14, 14, 14, 15, 15, 16, 16, 16, 18, 17, 17, 17, 19, 17, 14,\n    14, 15, 13, 14, 16, 16, 15, 16, 16, 17, 18, 17, 19, 17, 16, 14,\n    11, 11, 11, 12, 12, 13, 13, 13, 14, 14, 14, 14, 14, 14, 14, 12\n];\n\nTables.t16l = [\n    1, 5, 7, 9, 10, 10, 11, 11, 12, 12, 12, 13, 13, 13, 14, 10,\n    4, 6, 8, 9, 10, 11, 11, 11, 12, 12, 12, 13, 14, 13, 14, 10,\n    7, 8, 9, 10, 11, 11, 12, 12, 13, 12, 13, 13, 13, 14, 14, 11,\n    9, 9, 10, 11, 11, 12, 12, 12, 13, 13, 14, 14, 14, 15, 15, 12,\n    10, 10, 11, 11, 12, 12, 13, 13, 13, 14, 14, 14, 15, 15, 15, 11,\n    10, 10, 11, 11, 12, 13, 13, 14, 13, 14, 14, 15, 15, 15, 16, 12,\n    11, 11, 11, 12, 13, 13, 13, 13, 14, 14, 14, 14, 15, 15, 16, 12,\n    11, 11, 12, 12, 13, 13, 13, 14, 14, 15, 15, 15, 15, 17, 17, 12,\n    11, 12, 12, 13, 13, 13, 14, 14, 15, 15, 15, 15, 16, 16, 16, 12,\n    12, 12, 12, 13, 13, 14, 14, 15, 15, 15, 15, 16, 15, 16, 15, 13,\n    12, 13, 12, 13, 14, 14, 14, 14, 15, 16, 16, 16, 17, 17, 16, 12,\n    13, 13, 13, 13, 14, 14, 15, 16, 16, 16, 16, 16, 16, 15, 16, 13,\n    13, 14, 14, 14, 14, 15, 15, 15, 15, 17, 16, 16, 16, 16, 18, 13,\n    15, 14, 14, 14, 15, 15, 16, 16, 16, 18, 17, 17, 17, 19, 17, 13,\n    14, 15, 13, 14, 16, 16, 15, 16, 16, 17, 18, 17, 19, 17, 16, 13,\n    10, 10, 10, 11, 11, 12, 12, 12, 13, 13, 13, 13, 13, 13, 13, 10\n];\n\nTables.t24l = [\n    4, 5, 7, 8, 9, 10, 10, 11, 11, 12, 12, 12, 12, 12, 13, 10,\n    5, 6, 7, 8, 9, 10, 10, 11, 11, 11, 12, 12, 12, 12, 12, 10,\n    7, 7, 8, 9, 9, 10, 10, 11, 11, 11, 11, 12, 12, 12, 13, 9,\n    8, 8, 9, 9, 10, 10, 10, 11, 11, 11, 11, 12, 12, 12, 12, 9,\n    9, 9, 9, 10, 10, 10, 10, 11, 11, 11, 12, 12, 12, 12, 13, 9,\n    10, 9, 10, 10, 10, 10, 11, 11, 11, 11, 12, 12, 12, 12, 12, 9,\n    10, 10, 10, 10, 10, 11, 11, 11, 11, 12, 12, 12, 12, 12, 13, 9,\n    11, 10, 10, 10, 11, 11, 11, 11, 12, 12, 12, 12, 12, 13, 13, 10,\n    11, 11, 11, 11, 11, 11, 11, 11, 11, 12, 12, 12, 12, 13, 13, 10,\n    11, 11, 11, 11, 11, 11, 11, 12, 12, 12, 12, 12, 13, 13, 13, 10,\n    12, 11, 11, 11, 11, 12, 12, 12, 12, 12, 12, 13, 13, 13, 13, 10,\n    12, 12, 11, 11, 11, 12, 12, 12, 12, 12, 12, 13, 13, 13, 13, 10,\n    12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 13, 13, 13, 13, 13, 10,\n    12, 12, 12, 12, 12, 12, 12, 12, 13, 13, 13, 13, 13, 13, 13, 10,\n    13, 12, 12, 12, 12, 12, 12, 13, 13, 13, 13, 13, 13, 13, 13, 10,\n    9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 10, 10, 10, 10, 6\n];\n\nTables.t32l = [\n    1 + 0, 4 + 1, 4 + 1, 5 + 2, 4 + 1, 6 + 2, 5 + 2, 6 + 3,\n    4 + 1, 5 + 2, 5 + 2, 6 + 3, 5 + 2, 6 + 3, 6 + 3, 6 + 4\n];\n\nTables.t33l = [\n    4 + 0, 4 + 1, 4 + 1, 4 + 2, 4 + 1, 4 + 2, 4 + 2, 4 + 3,\n    4 + 1, 4 + 2, 4 + 2, 4 + 3, 4 + 2, 4 + 3, 4 + 3, 4 + 4\n];\n\nTables.ht = [\n    /* xlen, linmax, table, hlen */\n    new HuffCodeTab(0, 0, null, null),\n    new HuffCodeTab(2, 0, Tables.t1HB, Tables.t1l),\n    new HuffCodeTab(3, 0, Tables.t2HB, Tables.t2l),\n    new HuffCodeTab(3, 0, Tables.t3HB, Tables.t3l),\n    new HuffCodeTab(0, 0, null, null), /* Apparently not used */\n    new HuffCodeTab(4, 0, Tables.t5HB, Tables.t5l),\n    new HuffCodeTab(4, 0, Tables.t6HB, Tables.t6l),\n    new HuffCodeTab(6, 0, Tables.t7HB, Tables.t7l),\n    new HuffCodeTab(6, 0, Tables.t8HB, Tables.t8l),\n    new HuffCodeTab(6, 0, Tables.t9HB, Tables.t9l),\n    new HuffCodeTab(8, 0, Tables.t10HB, Tables.t10l),\n    new HuffCodeTab(8, 0, Tables.t11HB, Tables.t11l),\n    new HuffCodeTab(8, 0, Tables.t12HB, Tables.t12l),\n    new HuffCodeTab(16, 0, Tables.t13HB, Tables.t13l),\n    new HuffCodeTab(0, 0, null, Tables.t16_5l), /* Apparently not used */\n    new HuffCodeTab(16, 0, Tables.t15HB, Tables.t15l),\n\n    new HuffCodeTab(1, 1, Tables.t16HB, Tables.t16l),\n    new HuffCodeTab(2, 3, Tables.t16HB, Tables.t16l),\n    new HuffCodeTab(3, 7, Tables.t16HB, Tables.t16l),\n    new HuffCodeTab(4, 15, Tables.t16HB, Tables.t16l),\n    new HuffCodeTab(6, 63, Tables.t16HB, Tables.t16l),\n    new HuffCodeTab(8, 255, Tables.t16HB, Tables.t16l),\n    new HuffCodeTab(10, 1023, Tables.t16HB, Tables.t16l),\n    new HuffCodeTab(13, 8191, Tables.t16HB, Tables.t16l),\n\n    new HuffCodeTab(4, 15, Tables.t24HB, Tables.t24l),\n    new HuffCodeTab(5, 31, Tables.t24HB, Tables.t24l),\n    new HuffCodeTab(6, 63, Tables.t24HB, Tables.t24l),\n    new HuffCodeTab(7, 127, Tables.t24HB, Tables.t24l),\n    new HuffCodeTab(8, 255, Tables.t24HB, Tables.t24l),\n    new HuffCodeTab(9, 511, Tables.t24HB, Tables.t24l),\n    new HuffCodeTab(11, 2047, Tables.t24HB, Tables.t24l),\n    new HuffCodeTab(13, 8191, Tables.t24HB, Tables.t24l),\n\n    new HuffCodeTab(0, 0, Tables.t32HB, Tables.t32l),\n    new HuffCodeTab(0, 0, Tables.t33HB, Tables.t33l),\n];\n\n/**\n * <CODE>\n *  for (i = 0; i < 16*16; i++) [\n *      largetbl[i] = ((ht[16].hlen[i]) << 16) + ht[24].hlen[i];\n *  ]\n * </CODE>\n *\n */\nTables.largetbl = [\n    0x010004, 0x050005, 0x070007, 0x090008, 0x0a0009, 0x0a000a, 0x0b000a, 0x0b000b,\n    0x0c000b, 0x0c000c, 0x0c000c, 0x0d000c, 0x0d000c, 0x0d000c, 0x0e000d, 0x0a000a,\n    0x040005, 0x060006, 0x080007, 0x090008, 0x0a0009, 0x0b000a, 0x0b000a, 0x0b000b,\n    0x0c000b, 0x0c000b, 0x0c000c, 0x0d000c, 0x0e000c, 0x0d000c, 0x0e000c, 0x0a000a,\n    0x070007, 0x080007, 0x090008, 0x0a0009, 0x0b0009, 0x0b000a, 0x0c000a, 0x0c000b,\n    0x0d000b, 0x0c000b, 0x0d000b, 0x0d000c, 0x0d000c, 0x0e000c, 0x0e000d, 0x0b0009,\n    0x090008, 0x090008, 0x0a0009, 0x0b0009, 0x0b000a, 0x0c000a, 0x0c000a, 0x0c000b,\n    0x0d000b, 0x0d000b, 0x0e000b, 0x0e000c, 0x0e000c, 0x0f000c, 0x0f000c, 0x0c0009,\n    0x0a0009, 0x0a0009, 0x0b0009, 0x0b000a, 0x0c000a, 0x0c000a, 0x0d000a, 0x0d000b,\n    0x0d000b, 0x0e000b, 0x0e000c, 0x0e000c, 0x0f000c, 0x0f000c, 0x0f000d, 0x0b0009,\n    0x0a000a, 0x0a0009, 0x0b000a, 0x0b000a, 0x0c000a, 0x0d000a, 0x0d000b, 0x0e000b,\n    0x0d000b, 0x0e000b, 0x0e000c, 0x0f000c, 0x0f000c, 0x0f000c, 0x10000c, 0x0c0009,\n    0x0b000a, 0x0b000a, 0x0b000a, 0x0c000a, 0x0d000a, 0x0d000b, 0x0d000b, 0x0d000b,\n    0x0e000b, 0x0e000c, 0x0e000c, 0x0e000c, 0x0f000c, 0x0f000c, 0x10000d, 0x0c0009,\n    0x0b000b, 0x0b000a, 0x0c000a, 0x0c000a, 0x0d000b, 0x0d000b, 0x0d000b, 0x0e000b,\n    0x0e000c, 0x0f000c, 0x0f000c, 0x0f000c, 0x0f000c, 0x11000d, 0x11000d, 0x0c000a,\n    0x0b000b, 0x0c000b, 0x0c000b, 0x0d000b, 0x0d000b, 0x0d000b, 0x0e000b, 0x0e000b,\n    0x0f000b, 0x0f000c, 0x0f000c, 0x0f000c, 0x10000c, 0x10000d, 0x10000d, 0x0c000a,\n    0x0c000b, 0x0c000b, 0x0c000b, 0x0d000b, 0x0d000b, 0x0e000b, 0x0e000b, 0x0f000c,\n    0x0f000c, 0x0f000c, 0x0f000c, 0x10000c, 0x0f000d, 0x10000d, 0x0f000d, 0x0d000a,\n    0x0c000c, 0x0d000b, 0x0c000b, 0x0d000b, 0x0e000b, 0x0e000c, 0x0e000c, 0x0e000c,\n    0x0f000c, 0x10000c, 0x10000c, 0x10000d, 0x11000d, 0x11000d, 0x10000d, 0x0c000a,\n    0x0d000c, 0x0d000c, 0x0d000b, 0x0d000b, 0x0e000b, 0x0e000c, 0x0f000c, 0x10000c,\n    0x10000c, 0x10000c, 0x10000c, 0x10000d, 0x10000d, 0x0f000d, 0x10000d, 0x0d000a,\n    0x0d000c, 0x0e000c, 0x0e000c, 0x0e000c, 0x0e000c, 0x0f000c, 0x0f000c, 0x0f000c,\n    0x0f000c, 0x11000c, 0x10000d, 0x10000d, 0x10000d, 0x10000d, 0x12000d, 0x0d000a,\n    0x0f000c, 0x0e000c, 0x0e000c, 0x0e000c, 0x0f000c, 0x0f000c, 0x10000c, 0x10000c,\n    0x10000d, 0x12000d, 0x11000d, 0x11000d, 0x11000d, 0x13000d, 0x11000d, 0x0d000a,\n    0x0e000d, 0x0f000c, 0x0d000c, 0x0e000c, 0x10000c, 0x10000c, 0x0f000c, 0x10000d,\n    0x10000d, 0x11000d, 0x12000d, 0x11000d, 0x13000d, 0x11000d, 0x10000d, 0x0d000a,\n    0x0a0009, 0x0a0009, 0x0a0009, 0x0b0009, 0x0b0009, 0x0c0009, 0x0c0009, 0x0c0009,\n    0x0d0009, 0x0d0009, 0x0d0009, 0x0d000a, 0x0d000a, 0x0d000a, 0x0d000a, 0x0a0006\n];\n/**\n * <CODE>\n *  for (i = 0; i < 3*3; i++) [\n *      table23[i] = ((ht[2].hlen[i]) << 16) + ht[3].hlen[i];\n *  ]\n * </CODE>\n *\n */\nTables.table23 = [\n    0x010002, 0x040003, 0x070007,\n    0x040004, 0x050004, 0x070007,\n    0x060006, 0x070007, 0x080008\n];\n\n/**\n * <CODE>\n *  for (i = 0; i < 4*4; i++) [\n *       table56[i] = ((ht[5].hlen[i]) << 16) + ht[6].hlen[i];\n *   ]\n * </CODE>\n *\n */\nTables.table56 = [\n    0x010003, 0x040004, 0x070006, 0x080008, 0x040004, 0x050004, 0x080006, 0x090007,\n    0x070005, 0x080006, 0x090007, 0x0a0008, 0x080007, 0x080007, 0x090008, 0x0a0009\n];\n\nTables.bitrate_table = [\n    [0, 8, 16, 24, 32, 40, 48, 56, 64, 80, 96, 112, 128, 144, 160, -1], /* MPEG 2 */\n    [0, 32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320, -1], /* MPEG 1 */\n    [0, 8, 16, 24, 32, 40, 48, 56, 64, -1, -1, -1, -1, -1, -1, -1], /* MPEG 2.5 */\n];\n\n/**\n * MPEG 2, MPEG 1, MPEG 2.5.\n */\nTables.samplerate_table = [\n    [22050, 24000, 16000, -1],\n    [44100, 48000, 32000, -1],\n    [11025, 12000, 8000, -1],\n];\n\n/**\n * This is the scfsi_band table from 2.4.2.7 of the IS.\n */\nTables.scfsi_band = [0, 6, 11, 16, 21];\n\nmodule.exports = Tables;\n","/*\n *      quantize_pvt source file\n *\n *      Copyright (c) 1999-2002 Takehiro Tominaga\n *      Copyright (c) 2000-2002 Robert Hegemann\n *      Copyright (c) 2001 Naoki Shibata\n *      Copyright (c) 2002-2005 Gabriel Bouvigne\n *\n * This library is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 2 of the License, or (at your option) any later version.\n *\n * This library is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Library General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public\n * License along with this library; if not, write to the\n * Free Software Foundation, Inc., 59 Temple Place - Suite 330,\n * Boston, MA 02111-1307, USA.\n */\n\n/* $Id: QuantizePVT.java,v 1.24 2011/05/24 20:48:06 kenchis Exp $ */\nvar ScaleFac = require('./ScaleFac.js');\nvar common = require('./common.js');\nvar System = common.System;\nvar VbrMode = common.VbrMode;\nvar Float = common.Float;\nvar ShortBlock = common.ShortBlock;\nvar Util = common.Util;\nvar Arrays = common.Arrays;\nvar new_array_n = common.new_array_n;\nvar new_byte = common.new_byte;\nvar new_double = common.new_double;\nvar new_float = common.new_float;\nvar new_float_n = common.new_float_n;\nvar new_int = common.new_int;\nvar new_int_n = common.new_int_n;\nvar assert = common.assert;\n\nvar Encoder = require('./Encoder.js');\nvar MeanBits = require('./MeanBits.js');\nvar LameInternalFlags = require('./LameInternalFlags.js');\n\nQuantizePVT.Q_MAX = (256 + 1);\nQuantizePVT.Q_MAX2 = 116;\nQuantizePVT.LARGE_BITS = 100000;\nQuantizePVT.IXMAX_VAL = 8206;\n\nfunction QuantizePVT() {\n\n    var tak = null;\n    var rv = null;\n    var psy = null;\n\n    this.setModules = function (_tk, _rv, _psy) {\n        tak = _tk;\n        rv = _rv;\n        psy = _psy;\n    };\n\n    function POW20(x) {\n        assert(0 <= (x + QuantizePVT.Q_MAX2) && x < QuantizePVT.Q_MAX);\n        return pow20[x + QuantizePVT.Q_MAX2];\n    }\n\n    this.IPOW20 = function (x) {\n        assert(0 <= x && x < QuantizePVT.Q_MAX);\n        return ipow20[x];\n    }\n\n    /**\n     * smallest such that 1.0+DBL_EPSILON != 1.0\n     */\n    var DBL_EPSILON = 2.2204460492503131e-016;\n\n    /**\n     * ix always <= 8191+15. see count_bits()\n     */\n    var IXMAX_VAL = QuantizePVT.IXMAX_VAL;\n\n    var PRECALC_SIZE = (IXMAX_VAL + 2);\n\n    var Q_MAX = QuantizePVT.Q_MAX;\n\n\n    /**\n     * <CODE>\n     * minimum possible number of\n     * -cod_info.global_gain + ((scalefac[] + (cod_info.preflag ? pretab[sfb] : 0))\n     * << (cod_info.scalefac_scale + 1)) + cod_info.subblock_gain[cod_info.window[sfb]] * 8;\n     *\n     * for long block, 0+((15+3)<<2) = 18*4 = 72\n     * for short block, 0+(15<<2)+7*8 = 15*4+56 = 116\n     * </CODE>\n     */\n    var Q_MAX2 = QuantizePVT.Q_MAX2;\n\n    var LARGE_BITS = QuantizePVT.LARGE_BITS;\n\n\n    /**\n     * Assuming dynamic range=96dB, this value should be 92\n     */\n    var NSATHSCALE = 100;\n\n    /**\n     * The following table is used to implement the scalefactor partitioning for\n     * MPEG2 as described in section 2.4.3.2 of the IS. The indexing corresponds\n     * to the way the tables are presented in the IS:\n     *\n     * [table_number][row_in_table][column of nr_of_sfb]\n     */\n    this.nr_of_sfb_block = [\n        [[6, 5, 5, 5], [9, 9, 9, 9], [6, 9, 9, 9]],\n        [[6, 5, 7, 3], [9, 9, 12, 6], [6, 9, 12, 6]],\n        [[11, 10, 0, 0], [18, 18, 0, 0], [15, 18, 0, 0]],\n        [[7, 7, 7, 0], [12, 12, 12, 0], [6, 15, 12, 0]],\n        [[6, 6, 6, 3], [12, 9, 9, 6], [6, 12, 9, 6]],\n        [[8, 8, 5, 0], [15, 12, 9, 0], [6, 18, 9, 0]]];\n\n    /**\n     * Table B.6: layer3 preemphasis\n     */\n    var pretab = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1,\n        2, 2, 3, 3, 3, 2, 0];\n    this.pretab = pretab;\n\n    /**\n     * Here are MPEG1 Table B.8 and MPEG2 Table B.1 -- Layer III scalefactor\n     * bands. <BR>\n     * Index into this using a method such as:<BR>\n     * idx = fr_ps.header.sampling_frequency + (fr_ps.header.version * 3)\n     */\n    this.sfBandIndex = [\n        // Table B.2.b: 22.05 kHz\n        new ScaleFac([0, 6, 12, 18, 24, 30, 36, 44, 54, 66, 80, 96, 116, 140, 168, 200, 238, 284, 336, 396, 464,\n                522, 576],\n            [0, 4, 8, 12, 18, 24, 32, 42, 56, 74, 100, 132, 174, 192]\n            , [0, 0, 0, 0, 0, 0, 0] //  sfb21 pseudo sub bands\n            , [0, 0, 0, 0, 0, 0, 0] //  sfb12 pseudo sub bands\n        ),\n        /* Table B.2.c: 24 kHz */ /* docs: 332. mpg123(broken): 330 */\n        new ScaleFac([0, 6, 12, 18, 24, 30, 36, 44, 54, 66, 80, 96, 114, 136, 162, 194, 232, 278, 332, 394, 464,\n                540, 576],\n            [0, 4, 8, 12, 18, 26, 36, 48, 62, 80, 104, 136, 180, 192]\n            , [0, 0, 0, 0, 0, 0, 0] /*  sfb21 pseudo sub bands */\n            , [0, 0, 0, 0, 0, 0, 0] /*  sfb12 pseudo sub bands */\n        ),\n        /* Table B.2.a: 16 kHz */\n        new ScaleFac([0, 6, 12, 18, 24, 30, 36, 44, 54, 66, 80, 96, 116, 140, 168, 200, 238, 284, 336, 396, 464,\n                522, 576],\n            [0, 4, 8, 12, 18, 26, 36, 48, 62, 80, 104, 134, 174, 192]\n            , [0, 0, 0, 0, 0, 0, 0] /*  sfb21 pseudo sub bands */\n            , [0, 0, 0, 0, 0, 0, 0] /*  sfb12 pseudo sub bands */\n        ),\n        /* Table B.8.b: 44.1 kHz */\n        new ScaleFac([0, 4, 8, 12, 16, 20, 24, 30, 36, 44, 52, 62, 74, 90, 110, 134, 162, 196, 238, 288, 342, 418,\n                576],\n            [0, 4, 8, 12, 16, 22, 30, 40, 52, 66, 84, 106, 136, 192]\n            , [0, 0, 0, 0, 0, 0, 0] /*  sfb21 pseudo sub bands */\n            , [0, 0, 0, 0, 0, 0, 0] /*  sfb12 pseudo sub bands */\n        ),\n        /* Table B.8.c: 48 kHz */\n        new ScaleFac([0, 4, 8, 12, 16, 20, 24, 30, 36, 42, 50, 60, 72, 88, 106, 128, 156, 190, 230, 276, 330, 384,\n                576],\n            [0, 4, 8, 12, 16, 22, 28, 38, 50, 64, 80, 100, 126, 192]\n            , [0, 0, 0, 0, 0, 0, 0] /*  sfb21 pseudo sub bands */\n            , [0, 0, 0, 0, 0, 0, 0] /*  sfb12 pseudo sub bands */\n        ),\n        /* Table B.8.a: 32 kHz */\n        new ScaleFac([0, 4, 8, 12, 16, 20, 24, 30, 36, 44, 54, 66, 82, 102, 126, 156, 194, 240, 296, 364, 448, 550,\n                576],\n            [0, 4, 8, 12, 16, 22, 30, 42, 58, 78, 104, 138, 180, 192]\n            , [0, 0, 0, 0, 0, 0, 0] /*  sfb21 pseudo sub bands */\n            , [0, 0, 0, 0, 0, 0, 0] /*  sfb12 pseudo sub bands */\n        ),\n        /* MPEG-2.5 11.025 kHz */\n        new ScaleFac([0, 6, 12, 18, 24, 30, 36, 44, 54, 66, 80, 96, 116, 140, 168, 200, 238, 284, 336, 396, 464,\n                522, 576],\n            [0 / 3, 12 / 3, 24 / 3, 36 / 3, 54 / 3, 78 / 3, 108 / 3, 144 / 3, 186 / 3, 240 / 3, 312 / 3,\n                402 / 3, 522 / 3, 576 / 3]\n            , [0, 0, 0, 0, 0, 0, 0] /*  sfb21 pseudo sub bands */\n            , [0, 0, 0, 0, 0, 0, 0] /*  sfb12 pseudo sub bands */\n        ),\n        /* MPEG-2.5 12 kHz */\n        new ScaleFac([0, 6, 12, 18, 24, 30, 36, 44, 54, 66, 80, 96, 116, 140, 168, 200, 238, 284, 336, 396, 464,\n                522, 576],\n            [0 / 3, 12 / 3, 24 / 3, 36 / 3, 54 / 3, 78 / 3, 108 / 3, 144 / 3, 186 / 3, 240 / 3, 312 / 3,\n                402 / 3, 522 / 3, 576 / 3]\n            , [0, 0, 0, 0, 0, 0, 0] /*  sfb21 pseudo sub bands */\n            , [0, 0, 0, 0, 0, 0, 0] /*  sfb12 pseudo sub bands */\n        ),\n        /* MPEG-2.5 8 kHz */\n        new ScaleFac([0, 12, 24, 36, 48, 60, 72, 88, 108, 132, 160, 192, 232, 280, 336, 400, 476, 566, 568, 570,\n                572, 574, 576],\n            [0 / 3, 24 / 3, 48 / 3, 72 / 3, 108 / 3, 156 / 3, 216 / 3, 288 / 3, 372 / 3, 480 / 3, 486 / 3,\n                492 / 3, 498 / 3, 576 / 3]\n            , [0, 0, 0, 0, 0, 0, 0] /*  sfb21 pseudo sub bands */\n            , [0, 0, 0, 0, 0, 0, 0] /*  sfb12 pseudo sub bands */\n        )\n    ];\n\n    var pow20 = new_float(Q_MAX + Q_MAX2 + 1);\n    var ipow20 = new_float(Q_MAX);\n    var pow43 = new_float(PRECALC_SIZE);\n\n    var adj43 = new_float(PRECALC_SIZE);\n    this.adj43 = adj43;\n\n    /**\n     * <PRE>\n     * compute the ATH for each scalefactor band cd range: 0..96db\n     *\n     * Input: 3.3kHz signal 32767 amplitude (3.3kHz is where ATH is smallest =\n     * -5db) longblocks: sfb=12 en0/bw=-11db max_en0 = 1.3db shortblocks: sfb=5\n     * -9db 0db\n     *\n     * Input: 1 1 1 1 1 1 1 -1 -1 -1 -1 -1 -1 -1 (repeated) longblocks: amp=1\n     * sfb=12 en0/bw=-103 db max_en0 = -92db amp=32767 sfb=12 -12 db -1.4db\n     *\n     * Input: 1 1 1 1 1 1 1 -1 -1 -1 -1 -1 -1 -1 (repeated) shortblocks: amp=1\n     * sfb=5 en0/bw= -99 -86 amp=32767 sfb=5 -9 db 4db\n     *\n     *\n     * MAX energy of largest wave at 3.3kHz = 1db AVE energy of largest wave at\n     * 3.3kHz = -11db Let's take AVE: -11db = maximum signal in sfb=12. Dynamic\n     * range of CD: 96db. Therefor energy of smallest audible wave in sfb=12 =\n     * -11 - 96 = -107db = ATH at 3.3kHz.\n     *\n     * ATH formula for this wave: -5db. To adjust to LAME scaling, we need ATH =\n     * ATH_formula - 103 (db) ATH = ATH * 2.5e-10 (ener)\n     * </PRE>\n     */\n    function ATHmdct(gfp, f) {\n        var ath = psy.ATHformula(f, gfp);\n\n        ath -= NSATHSCALE;\n\n        /* modify the MDCT scaling for the ATH and convert to energy */\n        ath = Math.pow(10.0, ath / 10.0 + gfp.ATHlower);\n        return ath;\n    }\n\n    function compute_ath(gfp) {\n        var ATH_l = gfp.internal_flags.ATH.l;\n        var ATH_psfb21 = gfp.internal_flags.ATH.psfb21;\n        var ATH_s = gfp.internal_flags.ATH.s;\n        var ATH_psfb12 = gfp.internal_flags.ATH.psfb12;\n        var gfc = gfp.internal_flags;\n        var samp_freq = gfp.out_samplerate;\n\n        for (var sfb = 0; sfb < Encoder.SBMAX_l; sfb++) {\n            var start = gfc.scalefac_band.l[sfb];\n            var end = gfc.scalefac_band.l[sfb + 1];\n            ATH_l[sfb] = Float.MAX_VALUE;\n            for (var i = start; i < end; i++) {\n                var freq = i * samp_freq / (2 * 576);\n                var ATH_f = ATHmdct(gfp, freq);\n                /* freq in kHz */\n                ATH_l[sfb] = Math.min(ATH_l[sfb], ATH_f);\n            }\n        }\n\n        for (var sfb = 0; sfb < Encoder.PSFB21; sfb++) {\n            var start = gfc.scalefac_band.psfb21[sfb];\n            var end = gfc.scalefac_band.psfb21[sfb + 1];\n            ATH_psfb21[sfb] = Float.MAX_VALUE;\n            for (var i = start; i < end; i++) {\n                var freq = i * samp_freq / (2 * 576);\n                var ATH_f = ATHmdct(gfp, freq);\n                /* freq in kHz */\n                ATH_psfb21[sfb] = Math.min(ATH_psfb21[sfb], ATH_f);\n            }\n        }\n\n        for (var sfb = 0; sfb < Encoder.SBMAX_s; sfb++) {\n            var start = gfc.scalefac_band.s[sfb];\n            var end = gfc.scalefac_band.s[sfb + 1];\n            ATH_s[sfb] = Float.MAX_VALUE;\n            for (var i = start; i < end; i++) {\n                var freq = i * samp_freq / (2 * 192);\n                var ATH_f = ATHmdct(gfp, freq);\n                /* freq in kHz */\n                ATH_s[sfb] = Math.min(ATH_s[sfb], ATH_f);\n            }\n            ATH_s[sfb] *= (gfc.scalefac_band.s[sfb + 1] - gfc.scalefac_band.s[sfb]);\n        }\n\n        for (var sfb = 0; sfb < Encoder.PSFB12; sfb++) {\n            var start = gfc.scalefac_band.psfb12[sfb];\n            var end = gfc.scalefac_band.psfb12[sfb + 1];\n            ATH_psfb12[sfb] = Float.MAX_VALUE;\n            for (var i = start; i < end; i++) {\n                var freq = i * samp_freq / (2 * 192);\n                var ATH_f = ATHmdct(gfp, freq);\n                /* freq in kHz */\n                ATH_psfb12[sfb] = Math.min(ATH_psfb12[sfb], ATH_f);\n            }\n            /* not sure about the following */\n            ATH_psfb12[sfb] *= (gfc.scalefac_band.s[13] - gfc.scalefac_band.s[12]);\n        }\n\n        /*\n         * no-ATH mode: reduce ATH to -200 dB\n         */\n        if (gfp.noATH) {\n            for (var sfb = 0; sfb < Encoder.SBMAX_l; sfb++) {\n                ATH_l[sfb] = 1E-20;\n            }\n            for (var sfb = 0; sfb < Encoder.PSFB21; sfb++) {\n                ATH_psfb21[sfb] = 1E-20;\n            }\n            for (var sfb = 0; sfb < Encoder.SBMAX_s; sfb++) {\n                ATH_s[sfb] = 1E-20;\n            }\n            for (var sfb = 0; sfb < Encoder.PSFB12; sfb++) {\n                ATH_psfb12[sfb] = 1E-20;\n            }\n        }\n\n        /*\n         * work in progress, don't rely on it too much\n         */\n        gfc.ATH.floor = 10. * Math.log10(ATHmdct(gfp, -1.));\n    }\n\n    /**\n     * initialization for iteration_loop\n     */\n    this.iteration_init = function (gfp) {\n        var gfc = gfp.internal_flags;\n        var l3_side = gfc.l3_side;\n        var i;\n\n        if (gfc.iteration_init_init == 0) {\n            gfc.iteration_init_init = 1;\n\n            l3_side.main_data_begin = 0;\n            compute_ath(gfp);\n\n            pow43[0] = 0.0;\n            for (i = 1; i < PRECALC_SIZE; i++)\n                pow43[i] = Math.pow(i, 4.0 / 3.0);\n\n            for (i = 0; i < PRECALC_SIZE - 1; i++)\n                adj43[i] = ((i + 1) - Math.pow(\n                    0.5 * (pow43[i] + pow43[i + 1]), 0.75));\n            adj43[i] = 0.5;\n\n            for (i = 0; i < Q_MAX; i++)\n                ipow20[i] = Math.pow(2.0, (i - 210) * -0.1875);\n            for (i = 0; i <= Q_MAX + Q_MAX2; i++)\n                pow20[i] = Math.pow(2.0, (i - 210 - Q_MAX2) * 0.25);\n\n            tak.huffman_init(gfc);\n\n            {\n                var bass, alto, treble, sfb21;\n\n                i = (gfp.exp_nspsytune >> 2) & 63;\n                if (i >= 32)\n                    i -= 64;\n                bass = Math.pow(10, i / 4.0 / 10.0);\n\n                i = (gfp.exp_nspsytune >> 8) & 63;\n                if (i >= 32)\n                    i -= 64;\n                alto = Math.pow(10, i / 4.0 / 10.0);\n\n                i = (gfp.exp_nspsytune >> 14) & 63;\n                if (i >= 32)\n                    i -= 64;\n                treble = Math.pow(10, i / 4.0 / 10.0);\n\n                /*\n                 * to be compatible with Naoki's original code, the next 6 bits\n                 * define only the amount of changing treble for sfb21\n                 */\n                i = (gfp.exp_nspsytune >> 20) & 63;\n                if (i >= 32)\n                    i -= 64;\n                sfb21 = treble * Math.pow(10, i / 4.0 / 10.0);\n                for (i = 0; i < Encoder.SBMAX_l; i++) {\n                    var f;\n                    if (i <= 6)\n                        f = bass;\n                    else if (i <= 13)\n                        f = alto;\n                    else if (i <= 20)\n                        f = treble;\n                    else\n                        f = sfb21;\n\n                    gfc.nsPsy.longfact[i] = f;\n                }\n                for (i = 0; i < Encoder.SBMAX_s; i++) {\n                    var f;\n                    if (i <= 5)\n                        f = bass;\n                    else if (i <= 10)\n                        f = alto;\n                    else if (i <= 11)\n                        f = treble;\n                    else\n                        f = sfb21;\n\n                    gfc.nsPsy.shortfact[i] = f;\n                }\n            }\n        }\n    }\n\n    /**\n     * allocate bits among 2 channels based on PE<BR>\n     * mt 6/99<BR>\n     * bugfixes rh 8/01: often allocated more than the allowed 4095 bits\n     */\n    this.on_pe = function (gfp, pe,\n                           targ_bits, mean_bits, gr, cbr) {\n        var gfc = gfp.internal_flags;\n        var tbits = 0, bits;\n        var add_bits = new_int(2);\n        var ch;\n\n        /* allocate targ_bits for granule */\n        var mb = new MeanBits(tbits);\n        var extra_bits = rv.ResvMaxBits(gfp, mean_bits, mb, cbr);\n        tbits = mb.bits;\n        /* maximum allowed bits for this granule */\n        var max_bits = tbits + extra_bits;\n        if (max_bits > LameInternalFlags.MAX_BITS_PER_GRANULE) {\n            // hard limit per granule\n            max_bits = LameInternalFlags.MAX_BITS_PER_GRANULE;\n        }\n        for (bits = 0, ch = 0; ch < gfc.channels_out; ++ch) {\n            /******************************************************************\n             * allocate bits for each channel\n             ******************************************************************/\n            targ_bits[ch] = Math.min(LameInternalFlags.MAX_BITS_PER_CHANNEL,\n                tbits / gfc.channels_out);\n\n            add_bits[ch] = 0 | (targ_bits[ch] * pe[gr][ch] / 700.0 - targ_bits[ch]);\n\n            /* at most increase bits by 1.5*average */\n            if (add_bits[ch] > mean_bits * 3 / 4)\n                add_bits[ch] = mean_bits * 3 / 4;\n            if (add_bits[ch] < 0)\n                add_bits[ch] = 0;\n\n            if (add_bits[ch] + targ_bits[ch] > LameInternalFlags.MAX_BITS_PER_CHANNEL)\n                add_bits[ch] = Math.max(0,\n                    LameInternalFlags.MAX_BITS_PER_CHANNEL - targ_bits[ch]);\n\n            bits += add_bits[ch];\n        }\n        if (bits > extra_bits) {\n            for (ch = 0; ch < gfc.channels_out; ++ch) {\n                add_bits[ch] = extra_bits * add_bits[ch] / bits;\n            }\n        }\n\n        for (ch = 0; ch < gfc.channels_out; ++ch) {\n            targ_bits[ch] += add_bits[ch];\n            extra_bits -= add_bits[ch];\n        }\n\n        for (bits = 0, ch = 0; ch < gfc.channels_out; ++ch) {\n            bits += targ_bits[ch];\n        }\n        if (bits > LameInternalFlags.MAX_BITS_PER_GRANULE) {\n            var sum = 0;\n            for (ch = 0; ch < gfc.channels_out; ++ch) {\n                targ_bits[ch] *= LameInternalFlags.MAX_BITS_PER_GRANULE;\n                targ_bits[ch] /= bits;\n                sum += targ_bits[ch];\n            }\n            assert(sum <= LameInternalFlags.MAX_BITS_PER_GRANULE);\n        }\n\n        return max_bits;\n    }\n\n    this.reduce_side = function (targ_bits, ms_ener_ratio, mean_bits, max_bits) {\n        assert(max_bits <= LameInternalFlags.MAX_BITS_PER_GRANULE);\n        assert(targ_bits[0] + targ_bits[1] <= LameInternalFlags.MAX_BITS_PER_GRANULE);\n\n        /*\n         * ms_ener_ratio = 0: allocate 66/33 mid/side fac=.33 ms_ener_ratio =.5:\n         * allocate 50/50 mid/side fac= 0\n         */\n        /* 75/25 split is fac=.5 */\n        var fac = .33 * (.5 - ms_ener_ratio) / .5;\n        if (fac < 0)\n            fac = 0;\n        if (fac > .5)\n            fac = .5;\n\n        /* number of bits to move from side channel to mid channel */\n        /* move_bits = fac*targ_bits[1]; */\n        var move_bits = 0 | (fac * .5 * (targ_bits[0] + targ_bits[1]));\n\n        if (move_bits > LameInternalFlags.MAX_BITS_PER_CHANNEL - targ_bits[0]) {\n            move_bits = LameInternalFlags.MAX_BITS_PER_CHANNEL - targ_bits[0];\n        }\n        if (move_bits < 0)\n            move_bits = 0;\n\n        if (targ_bits[1] >= 125) {\n            /* dont reduce side channel below 125 bits */\n            if (targ_bits[1] - move_bits > 125) {\n\n                /* if mid channel already has 2x more than average, dont bother */\n                /* mean_bits = bits per granule (for both channels) */\n                if (targ_bits[0] < mean_bits)\n                    targ_bits[0] += move_bits;\n                targ_bits[1] -= move_bits;\n            } else {\n                targ_bits[0] += targ_bits[1] - 125;\n                targ_bits[1] = 125;\n            }\n        }\n\n        move_bits = targ_bits[0] + targ_bits[1];\n        if (move_bits > max_bits) {\n            targ_bits[0] = (max_bits * targ_bits[0]) / move_bits;\n            targ_bits[1] = (max_bits * targ_bits[1]) / move_bits;\n        }\n        assert(targ_bits[0] <= LameInternalFlags.MAX_BITS_PER_CHANNEL);\n        assert(targ_bits[1] <= LameInternalFlags.MAX_BITS_PER_CHANNEL);\n        assert(targ_bits[0] + targ_bits[1] <= LameInternalFlags.MAX_BITS_PER_GRANULE);\n    };\n\n    /**\n     *  Robert Hegemann 2001-04-27:\n     *  this adjusts the ATH, keeping the original noise floor\n     *  affects the higher frequencies more than the lower ones\n     */\n    this.athAdjust = function (a, x, athFloor) {\n        /*\n         * work in progress\n         */\n        var o = 90.30873362;\n        var p = 94.82444863;\n        var u = Util.FAST_LOG10_X(x, 10.0);\n        var v = a * a;\n        var w = 0.0;\n        u -= athFloor;\n        /* undo scaling */\n        if (v > 1E-20)\n            w = 1. + Util.FAST_LOG10_X(v, 10.0 / o);\n        if (w < 0)\n            w = 0.;\n        u *= w;\n        u += athFloor + o - p;\n        /* redo scaling */\n\n        return Math.pow(10., 0.1 * u);\n    };\n\n    /**\n     * Calculate the allowed distortion for each scalefactor band, as determined\n     * by the psychoacoustic model. xmin(sb) = ratio(sb) * en(sb) / bw(sb)\n     *\n     * returns number of sfb's with energy > ATH\n     */\n    this.calc_xmin = function (gfp, ratio, cod_info, pxmin) {\n        var pxminPos = 0;\n        var gfc = gfp.internal_flags;\n        var gsfb, j = 0, ath_over = 0;\n        var ATH = gfc.ATH;\n        var xr = cod_info.xr;\n        var enable_athaa_fix = (gfp.VBR == VbrMode.vbr_mtrh) ? 1 : 0;\n        var masking_lower = gfc.masking_lower;\n\n        if (gfp.VBR == VbrMode.vbr_mtrh || gfp.VBR == VbrMode.vbr_mt) {\n            /* was already done in PSY-Model */\n            masking_lower = 1.0;\n        }\n\n        for (gsfb = 0; gsfb < cod_info.psy_lmax; gsfb++) {\n            var en0, xmin;\n            var rh1, rh2;\n            var width, l;\n\n            if (gfp.VBR == VbrMode.vbr_rh || gfp.VBR == VbrMode.vbr_mtrh)\n                xmin = athAdjust(ATH.adjust, ATH.l[gsfb], ATH.floor);\n            else\n                xmin = ATH.adjust * ATH.l[gsfb];\n\n            width = cod_info.width[gsfb];\n            rh1 = xmin / width;\n            rh2 = DBL_EPSILON;\n            l = width >> 1;\n            en0 = 0.0;\n            do {\n                var xa, xb;\n                xa = xr[j] * xr[j];\n                en0 += xa;\n                rh2 += (xa < rh1) ? xa : rh1;\n                j++;\n                xb = xr[j] * xr[j];\n                en0 += xb;\n                rh2 += (xb < rh1) ? xb : rh1;\n                j++;\n            } while (--l > 0);\n            if (en0 > xmin)\n                ath_over++;\n\n            if (gsfb == Encoder.SBPSY_l) {\n                var x = xmin * gfc.nsPsy.longfact[gsfb];\n                if (rh2 < x) {\n                    rh2 = x;\n                }\n            }\n            if (enable_athaa_fix != 0) {\n                xmin = rh2;\n            }\n            if (!gfp.ATHonly) {\n                var e = ratio.en.l[gsfb];\n                if (e > 0.0) {\n                    var x;\n                    x = en0 * ratio.thm.l[gsfb] * masking_lower / e;\n                    if (enable_athaa_fix != 0)\n                        x *= gfc.nsPsy.longfact[gsfb];\n                    if (xmin < x)\n                        xmin = x;\n                }\n            }\n            if (enable_athaa_fix != 0)\n                pxmin[pxminPos++] = xmin;\n            else\n                pxmin[pxminPos++] = xmin * gfc.nsPsy.longfact[gsfb];\n        }\n        /* end of long block loop */\n\n        /* use this function to determine the highest non-zero coeff */\n        var max_nonzero = 575;\n        if (cod_info.block_type != Encoder.SHORT_TYPE) {\n            // NORM, START or STOP type, but not SHORT\n            var k = 576;\n            while (k-- != 0 && BitStream.EQ(xr[k], 0)) {\n                max_nonzero = k;\n            }\n        }\n        cod_info.max_nonzero_coeff = max_nonzero;\n\n        for (var sfb = cod_info.sfb_smin; gsfb < cod_info.psymax; sfb++, gsfb += 3) {\n            var width, b;\n            var tmpATH;\n            if (gfp.VBR == VbrMode.vbr_rh || gfp.VBR == VbrMode.vbr_mtrh)\n                tmpATH = athAdjust(ATH.adjust, ATH.s[sfb], ATH.floor);\n            else\n                tmpATH = ATH.adjust * ATH.s[sfb];\n\n            width = cod_info.width[gsfb];\n            for (b = 0; b < 3; b++) {\n                var en0 = 0.0, xmin;\n                var rh1, rh2;\n                var l = width >> 1;\n\n                rh1 = tmpATH / width;\n                rh2 = DBL_EPSILON;\n                do {\n                    var xa, xb;\n                    xa = xr[j] * xr[j];\n                    en0 += xa;\n                    rh2 += (xa < rh1) ? xa : rh1;\n                    j++;\n                    xb = xr[j] * xr[j];\n                    en0 += xb;\n                    rh2 += (xb < rh1) ? xb : rh1;\n                    j++;\n                } while (--l > 0);\n                if (en0 > tmpATH)\n                    ath_over++;\n                if (sfb == Encoder.SBPSY_s) {\n                    var x = tmpATH * gfc.nsPsy.shortfact[sfb];\n                    if (rh2 < x) {\n                        rh2 = x;\n                    }\n                }\n                if (enable_athaa_fix != 0)\n                    xmin = rh2;\n                else\n                    xmin = tmpATH;\n\n                if (!gfp.ATHonly && !gfp.ATHshort) {\n                    var e = ratio.en.s[sfb][b];\n                    if (e > 0.0) {\n                        var x;\n                        x = en0 * ratio.thm.s[sfb][b] * masking_lower / e;\n                        if (enable_athaa_fix != 0)\n                            x *= gfc.nsPsy.shortfact[sfb];\n                        if (xmin < x)\n                            xmin = x;\n                    }\n                }\n                if (enable_athaa_fix != 0)\n                    pxmin[pxminPos++] = xmin;\n                else\n                    pxmin[pxminPos++] = xmin * gfc.nsPsy.shortfact[sfb];\n            }\n            /* b */\n            if (gfp.useTemporal) {\n                if (pxmin[pxminPos - 3] > pxmin[pxminPos - 3 + 1])\n                    pxmin[pxminPos - 3 + 1] += (pxmin[pxminPos - 3] - pxmin[pxminPos - 3 + 1])\n                        * gfc.decay;\n                if (pxmin[pxminPos - 3 + 1] > pxmin[pxminPos - 3 + 2])\n                    pxmin[pxminPos - 3 + 2] += (pxmin[pxminPos - 3 + 1] - pxmin[pxminPos - 3 + 2])\n                        * gfc.decay;\n            }\n        }\n        /* end of short block sfb loop */\n\n        return ath_over;\n    };\n\n    function StartLine(j) {\n        this.s = j;\n    }\n\n    this.calc_noise_core = function (cod_info, startline, l, step) {\n        var noise = 0;\n        var j = startline.s;\n        var ix = cod_info.l3_enc;\n\n        if (j > cod_info.count1) {\n            while ((l--) != 0) {\n                var temp;\n                temp = cod_info.xr[j];\n                j++;\n                noise += temp * temp;\n                temp = cod_info.xr[j];\n                j++;\n                noise += temp * temp;\n            }\n        } else if (j > cod_info.big_values) {\n            var ix01 = new_float(2);\n            ix01[0] = 0;\n            ix01[1] = step;\n            while ((l--) != 0) {\n                var temp;\n                temp = Math.abs(cod_info.xr[j]) - ix01[ix[j]];\n                j++;\n                noise += temp * temp;\n                temp = Math.abs(cod_info.xr[j]) - ix01[ix[j]];\n                j++;\n                noise += temp * temp;\n            }\n        } else {\n            while ((l--) != 0) {\n                var temp;\n                temp = Math.abs(cod_info.xr[j]) - pow43[ix[j]] * step;\n                j++;\n                noise += temp * temp;\n                temp = Math.abs(cod_info.xr[j]) - pow43[ix[j]] * step;\n                j++;\n                noise += temp * temp;\n            }\n        }\n\n        startline.s = j;\n        return noise;\n    }\n\n    /**\n     * <PRE>\n     * -oo dB  =>  -1.00\n     * - 6 dB  =>  -0.97\n     * - 3 dB  =>  -0.80\n     * - 2 dB  =>  -0.64\n     * - 1 dB  =>  -0.38\n     *   0 dB  =>   0.00\n     * + 1 dB  =>  +0.49\n     * + 2 dB  =>  +1.06\n     * + 3 dB  =>  +1.68\n     * + 6 dB  =>  +3.69\n     * +10 dB  =>  +6.45\n     * </PRE>\n     */\n    this.calc_noise = function (cod_info, l3_xmin, distort, res, prev_noise) {\n        var distortPos = 0;\n        var l3_xminPos = 0;\n        var sfb, l, over = 0;\n        var over_noise_db = 0;\n        /* 0 dB relative to masking */\n        var tot_noise_db = 0;\n        /* -200 dB relative to masking */\n        var max_noise = -20.0;\n        var j = 0;\n        var scalefac = cod_info.scalefac;\n        var scalefacPos = 0;\n\n        res.over_SSD = 0;\n\n        for (sfb = 0; sfb < cod_info.psymax; sfb++) {\n            var s = cod_info.global_gain\n                - (((scalefac[scalefacPos++]) + (cod_info.preflag != 0 ? pretab[sfb]\n                    : 0)) << (cod_info.scalefac_scale + 1))\n                - cod_info.subblock_gain[cod_info.window[sfb]] * 8;\n            var noise = 0.0;\n\n            if (prev_noise != null && (prev_noise.step[sfb] == s)) {\n\n                /* use previously computed values */\n                noise = prev_noise.noise[sfb];\n                j += cod_info.width[sfb];\n                distort[distortPos++] = noise / l3_xmin[l3_xminPos++];\n\n                noise = prev_noise.noise_log[sfb];\n\n            } else {\n                var step = POW20(s);\n                l = cod_info.width[sfb] >> 1;\n\n                if ((j + cod_info.width[sfb]) > cod_info.max_nonzero_coeff) {\n                    var usefullsize;\n                    usefullsize = cod_info.max_nonzero_coeff - j + 1;\n\n                    if (usefullsize > 0)\n                        l = usefullsize >> 1;\n                    else\n                        l = 0;\n                }\n\n                var sl = new StartLine(j);\n                noise = this.calc_noise_core(cod_info, sl, l, step);\n                j = sl.s;\n\n                if (prev_noise != null) {\n                    /* save noise values */\n                    prev_noise.step[sfb] = s;\n                    prev_noise.noise[sfb] = noise;\n                }\n\n                noise = distort[distortPos++] = noise / l3_xmin[l3_xminPos++];\n\n                /* multiplying here is adding in dB, but can overflow */\n                noise = Util.FAST_LOG10(Math.max(noise, 1E-20));\n\n                if (prev_noise != null) {\n                    /* save noise values */\n                    prev_noise.noise_log[sfb] = noise;\n                }\n            }\n\n            if (prev_noise != null) {\n                /* save noise values */\n                prev_noise.global_gain = cod_info.global_gain;\n            }\n\n            tot_noise_db += noise;\n\n            if (noise > 0.0) {\n                var tmp;\n\n                tmp = Math.max(0 | (noise * 10 + .5), 1);\n                res.over_SSD += tmp * tmp;\n\n                over++;\n                /* multiplying here is adding in dB -but can overflow */\n                /* over_noise *= noise; */\n                over_noise_db += noise;\n            }\n            max_noise = Math.max(max_noise, noise);\n\n        }\n\n        res.over_count = over;\n        res.tot_noise = tot_noise_db;\n        res.over_noise = over_noise_db;\n        res.max_noise = max_noise;\n\n        return over;\n    }\n\n    /**\n     * updates plotting data\n     *\n     * Mark Taylor 2000-??-??\n     *\n     * Robert Hegemann: moved noise/distortion calc into it\n     */\n    this.set_pinfo = function (gfp, cod_info, ratio, gr, ch) {\n        var gfc = gfp.internal_flags;\n        var sfb, sfb2;\n        var l;\n        var en0, en1;\n        var ifqstep = (cod_info.scalefac_scale == 0) ? .5 : 1.0;\n        var scalefac = cod_info.scalefac;\n\n        var l3_xmin = new_float(L3Side.SFBMAX);\n        var xfsf = new_float(L3Side.SFBMAX);\n        var noise = new CalcNoiseResult();\n\n        calc_xmin(gfp, ratio, cod_info, l3_xmin);\n        calc_noise(cod_info, l3_xmin, xfsf, noise, null);\n\n        var j = 0;\n        sfb2 = cod_info.sfb_lmax;\n        if (cod_info.block_type != Encoder.SHORT_TYPE\n            && 0 == cod_info.mixed_block_flag)\n            sfb2 = 22;\n        for (sfb = 0; sfb < sfb2; sfb++) {\n            var start = gfc.scalefac_band.l[sfb];\n            var end = gfc.scalefac_band.l[sfb + 1];\n            var bw = end - start;\n            for (en0 = 0.0; j < end; j++)\n                en0 += cod_info.xr[j] * cod_info.xr[j];\n            en0 /= bw;\n            /* convert to MDCT units */\n            /* scaling so it shows up on FFT plot */\n            en1 = 1e15;\n            gfc.pinfo.en[gr][ch][sfb] = en1 * en0;\n            gfc.pinfo.xfsf[gr][ch][sfb] = en1 * l3_xmin[sfb] * xfsf[sfb] / bw;\n\n            if (ratio.en.l[sfb] > 0 && !gfp.ATHonly)\n                en0 = en0 / ratio.en.l[sfb];\n            else\n                en0 = 0.0;\n\n            gfc.pinfo.thr[gr][ch][sfb] = en1\n                * Math.max(en0 * ratio.thm.l[sfb], gfc.ATH.l[sfb]);\n\n            /* there is no scalefactor bands >= SBPSY_l */\n            gfc.pinfo.LAMEsfb[gr][ch][sfb] = 0;\n            if (cod_info.preflag != 0 && sfb >= 11)\n                gfc.pinfo.LAMEsfb[gr][ch][sfb] = -ifqstep * pretab[sfb];\n\n            if (sfb < Encoder.SBPSY_l) {\n                /* scfsi should be decoded by caller side */\n                assert(scalefac[sfb] >= 0);\n                gfc.pinfo.LAMEsfb[gr][ch][sfb] -= ifqstep * scalefac[sfb];\n            }\n        }\n        /* for sfb */\n\n        if (cod_info.block_type == Encoder.SHORT_TYPE) {\n            sfb2 = sfb;\n            for (sfb = cod_info.sfb_smin; sfb < Encoder.SBMAX_s; sfb++) {\n                var start = gfc.scalefac_band.s[sfb];\n                var end = gfc.scalefac_band.s[sfb + 1];\n                var bw = end - start;\n                for (var i = 0; i < 3; i++) {\n                    for (en0 = 0.0, l = start; l < end; l++) {\n                        en0 += cod_info.xr[j] * cod_info.xr[j];\n                        j++;\n                    }\n                    en0 = Math.max(en0 / bw, 1e-20);\n                    /* convert to MDCT units */\n                    /* scaling so it shows up on FFT plot */\n                    en1 = 1e15;\n\n                    gfc.pinfo.en_s[gr][ch][3 * sfb + i] = en1 * en0;\n                    gfc.pinfo.xfsf_s[gr][ch][3 * sfb + i] = en1 * l3_xmin[sfb2]\n                        * xfsf[sfb2] / bw;\n                    if (ratio.en.s[sfb][i] > 0)\n                        en0 = en0 / ratio.en.s[sfb][i];\n                    else\n                        en0 = 0.0;\n                    if (gfp.ATHonly || gfp.ATHshort)\n                        en0 = 0;\n\n                    gfc.pinfo.thr_s[gr][ch][3 * sfb + i] = en1\n                        * Math.max(en0 * ratio.thm.s[sfb][i],\n                            gfc.ATH.s[sfb]);\n\n                    /* there is no scalefactor bands >= SBPSY_s */\n                    gfc.pinfo.LAMEsfb_s[gr][ch][3 * sfb + i] = -2.0\n                        * cod_info.subblock_gain[i];\n                    if (sfb < Encoder.SBPSY_s) {\n                        gfc.pinfo.LAMEsfb_s[gr][ch][3 * sfb + i] -= ifqstep\n                            * scalefac[sfb2];\n                    }\n                    sfb2++;\n                }\n            }\n        }\n        /* block type short */\n        gfc.pinfo.LAMEqss[gr][ch] = cod_info.global_gain;\n        gfc.pinfo.LAMEmainbits[gr][ch] = cod_info.part2_3_length\n            + cod_info.part2_length;\n        gfc.pinfo.LAMEsfbits[gr][ch] = cod_info.part2_length;\n\n        gfc.pinfo.over[gr][ch] = noise.over_count;\n        gfc.pinfo.max_noise[gr][ch] = noise.max_noise * 10.0;\n        gfc.pinfo.over_noise[gr][ch] = noise.over_noise * 10.0;\n        gfc.pinfo.tot_noise[gr][ch] = noise.tot_noise * 10.0;\n        gfc.pinfo.over_SSD[gr][ch] = noise.over_SSD;\n    }\n\n    /**\n     * updates plotting data for a whole frame\n     *\n     * Robert Hegemann 2000-10-21\n     */\n    function set_frame_pinfo(gfp, ratio) {\n        var gfc = gfp.internal_flags;\n\n        gfc.masking_lower = 1.0;\n\n        /*\n         * for every granule and channel patch l3_enc and set info\n         */\n        for (var gr = 0; gr < gfc.mode_gr; gr++) {\n            for (var ch = 0; ch < gfc.channels_out; ch++) {\n                var cod_info = gfc.l3_side.tt[gr][ch];\n                var scalefac_sav = new_int(L3Side.SFBMAX);\n                System.arraycopy(cod_info.scalefac, 0, scalefac_sav, 0,\n                    scalefac_sav.length);\n\n                /*\n                 * reconstruct the scalefactors in case SCFSI was used\n                 */\n                if (gr == 1) {\n                    var sfb;\n                    for (sfb = 0; sfb < cod_info.sfb_lmax; sfb++) {\n                        if (cod_info.scalefac[sfb] < 0) /* scfsi */\n                            cod_info.scalefac[sfb] = gfc.l3_side.tt[0][ch].scalefac[sfb];\n                    }\n                }\n\n                set_pinfo(gfp, cod_info, ratio[gr][ch], gr, ch);\n                System.arraycopy(scalefac_sav, 0, cod_info.scalefac, 0,\n                    scalefac_sav.length);\n            }\n            /* for ch */\n        }\n        /* for gr */\n    }\n\n}\n\nmodule.exports = QuantizePVT;\n","/*\n *\tMP3 huffman table selecting and bit counting\n *\n *\tCopyright (c) 1999-2005 Takehiro TOMINAGA\n *\tCopyright (c) 2002-2005 Gabriel Bouvigne\n *\n * This library is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 2 of the License, or (at your option) any later version.\n *\n * This library is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\t See the GNU\n * Library General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public\n * License along with this library; if not, write to the\n * Free Software Foundation, Inc., 59 Temple Place - Suite 330,\n * Boston, MA 02111-1307, USA.\n */\n\n/* $Id: Takehiro.java,v 1.26 2011/05/24 20:48:06 kenchis Exp $ */\n\n//package mp3;\n\n//import java.util.Arrays;\nvar common = require('./common.js');\nvar System = common.System;\nvar VbrMode = common.VbrMode;\nvar Float = common.Float;\nvar ShortBlock = common.ShortBlock;\nvar Util = common.Util;\nvar Arrays = common.Arrays;\nvar new_array_n = common.new_array_n;\nvar new_byte = common.new_byte;\nvar new_double = common.new_double;\nvar new_float = common.new_float;\nvar new_float_n = common.new_float_n;\nvar new_int = common.new_int;\nvar new_int_n = common.new_int_n;\nvar assert = common.assert;\n\nvar Encoder = require('./Encoder.js');\nvar Tables = require('./Tables.js');\nvar GrInfo = require('./GrInfo.js');\nvar QuantizePVT = require('./QuantizePVT.js');\n\n\nfunction Takehiro() {\n\n    var qupvt = null;\n    this.qupvt = null;\n\n    this.setModules = function (_qupvt) {\n        this.qupvt = _qupvt;\n        qupvt = _qupvt;\n    }\n\n    function Bits(b) {\n        this.bits = 0 | b;\n    }\n\n    var subdv_table = [[0, 0], /* 0 bands */\n        [0, 0], /* 1 bands */\n        [0, 0], /* 2 bands */\n        [0, 0], /* 3 bands */\n        [0, 0], /* 4 bands */\n        [0, 1], /* 5 bands */\n        [1, 1], /* 6 bands */\n        [1, 1], /* 7 bands */\n        [1, 2], /* 8 bands */\n        [2, 2], /* 9 bands */\n        [2, 3], /* 10 bands */\n        [2, 3], /* 11 bands */\n        [3, 4], /* 12 bands */\n        [3, 4], /* 13 bands */\n        [3, 4], /* 14 bands */\n        [4, 5], /* 15 bands */\n        [4, 5], /* 16 bands */\n        [4, 6], /* 17 bands */\n        [5, 6], /* 18 bands */\n        [5, 6], /* 19 bands */\n        [5, 7], /* 20 bands */\n        [6, 7], /* 21 bands */\n        [6, 7], /* 22 bands */\n    ];\n\n    /**\n     * nonlinear quantization of xr More accurate formula than the ISO formula.\n     * Takes into account the fact that we are quantizing xr . ix, but we want\n     * ix^4/3 to be as close as possible to x^4/3. (taking the nearest int would\n     * mean ix is as close as possible to xr, which is different.)\n     *\n     * From Segher Boessenkool <segher@eastsite.nl> 11/1999\n     *\n     * 09/2000: ASM code removed in favor of IEEE754 hack by Takehiro Tominaga.\n     * If you need the ASM code, check CVS circa Aug 2000.\n     *\n     * 01/2004: Optimizations by Gabriel Bouvigne\n     */\n    function quantize_lines_xrpow_01(l, istep, xr, xrPos, ix, ixPos) {\n        var compareval0 = (1.0 - 0.4054) / istep;\n\n        assert(l > 0);\n        l = l >> 1;\n        while ((l--) != 0) {\n            ix[ixPos++] = (compareval0 > xr[xrPos++]) ? 0 : 1;\n            ix[ixPos++] = (compareval0 > xr[xrPos++]) ? 0 : 1;\n        }\n    }\n\n    /**\n     * XRPOW_FTOI is a macro to convert floats to ints.<BR>\n     * if XRPOW_FTOI(x) = nearest_int(x), then QUANTFAC(x)=adj43asm[x]<BR>\n     * ROUNDFAC= -0.0946<BR>\n     *\n     * if XRPOW_FTOI(x) = floor(x), then QUANTFAC(x)=asj43[x]<BR>\n     * ROUNDFAC=0.4054<BR>\n     *\n     * Note: using floor() or 0| is extremely slow. On machines where the\n     * TAKEHIRO_IEEE754_HACK code above does not work, it is worthwile to write\n     * some ASM for XRPOW_FTOI().\n     */\n    function quantize_lines_xrpow(l, istep, xr, xrPos, ix, ixPos) {\n        assert(l > 0);\n\n        l = l >> 1;\n        var remaining = l % 2;\n        l = l >> 1;\n        while (l-- != 0) {\n            var x0, x1, x2, x3;\n            var rx0, rx1, rx2, rx3;\n\n            x0 = xr[xrPos++] * istep;\n            x1 = xr[xrPos++] * istep;\n            rx0 = 0 | x0;\n            x2 = xr[xrPos++] * istep;\n            rx1 = 0 | x1;\n            x3 = xr[xrPos++] * istep;\n            rx2 = 0 | x2;\n            x0 += qupvt.adj43[rx0];\n            rx3 = 0 | x3;\n            x1 += qupvt.adj43[rx1];\n            ix[ixPos++] = 0 | x0;\n            x2 += qupvt.adj43[rx2];\n            ix[ixPos++] = 0 | x1;\n            x3 += qupvt.adj43[rx3];\n            ix[ixPos++] = 0 | x2;\n            ix[ixPos++] = 0 | x3;\n        }\n        if (remaining != 0) {\n            var x0, x1;\n            var rx0, rx1;\n\n            x0 = xr[xrPos++] * istep;\n            x1 = xr[xrPos++] * istep;\n            rx0 = 0 | x0;\n            rx1 = 0 | x1;\n            x0 += qupvt.adj43[rx0];\n            x1 += qupvt.adj43[rx1];\n            ix[ixPos++] = 0 | x0;\n            ix[ixPos++] = 0 | x1;\n        }\n    }\n\n    /**\n     * Quantization function This function will select which lines to quantize\n     * and call the proper quantization function\n     */\n    function quantize_xrpow(xp, pi, istep, codInfo, prevNoise) {\n        /* quantize on xr^(3/4) instead of xr */\n        var sfb;\n        var sfbmax;\n        var j = 0;\n        var prev_data_use;\n        var accumulate = 0;\n        var accumulate01 = 0;\n        var xpPos = 0;\n        var iData = pi;\n        var iDataPos = 0;\n        var acc_iData = iData;\n        var acc_iDataPos = 0;\n        var acc_xp = xp;\n        var acc_xpPos = 0;\n\n        /*\n         * Reusing previously computed data does not seems to work if global\n         * gain is changed. Finding why it behaves this way would allow to use a\n         * cache of previously computed values (let's 10 cached values per sfb)\n         * that would probably provide a noticeable speedup\n         */\n        prev_data_use = (prevNoise != null && (codInfo.global_gain == prevNoise.global_gain));\n\n        if (codInfo.block_type == Encoder.SHORT_TYPE)\n            sfbmax = 38;\n        else\n            sfbmax = 21;\n\n        for (sfb = 0; sfb <= sfbmax; sfb++) {\n            var step = -1;\n\n            if (prev_data_use || codInfo.block_type == Encoder.NORM_TYPE) {\n                step = codInfo.global_gain\n                    - ((codInfo.scalefac[sfb] + (codInfo.preflag != 0 ? qupvt.pretab[sfb]\n                        : 0)) << (codInfo.scalefac_scale + 1))\n                    - codInfo.subblock_gain[codInfo.window[sfb]] * 8;\n            }\n            assert(codInfo.width[sfb] >= 0);\n            if (prev_data_use && (prevNoise.step[sfb] == step)) {\n                /*\n                 * do not recompute this part, but compute accumulated lines\n                 */\n                if (accumulate != 0) {\n                    quantize_lines_xrpow(accumulate, istep, acc_xp, acc_xpPos,\n                        acc_iData, acc_iDataPos);\n                    accumulate = 0;\n                }\n                if (accumulate01 != 0) {\n                    quantize_lines_xrpow_01(accumulate01, istep, acc_xp,\n                        acc_xpPos, acc_iData, acc_iDataPos);\n                    accumulate01 = 0;\n                }\n            } else { /* should compute this part */\n                var l = codInfo.width[sfb];\n\n                if ((j + codInfo.width[sfb]) > codInfo.max_nonzero_coeff) {\n                    /* do not compute upper zero part */\n                    var usefullsize;\n                    usefullsize = codInfo.max_nonzero_coeff - j + 1;\n                    Arrays.fill(pi, codInfo.max_nonzero_coeff, 576, 0);\n                    l = usefullsize;\n\n                    if (l < 0) {\n                        l = 0;\n                    }\n\n                    /* no need to compute higher sfb values */\n                    sfb = sfbmax + 1;\n                }\n\n                /* accumulate lines to quantize */\n                if (0 == accumulate && 0 == accumulate01) {\n                    acc_iData = iData;\n                    acc_iDataPos = iDataPos;\n                    acc_xp = xp;\n                    acc_xpPos = xpPos;\n                }\n                if (prevNoise != null && prevNoise.sfb_count1 > 0\n                    && sfb >= prevNoise.sfb_count1\n                    && prevNoise.step[sfb] > 0\n                    && step >= prevNoise.step[sfb]) {\n\n                    if (accumulate != 0) {\n                        quantize_lines_xrpow(accumulate, istep, acc_xp,\n                            acc_xpPos, acc_iData, acc_iDataPos);\n                        accumulate = 0;\n                        acc_iData = iData;\n                        acc_iDataPos = iDataPos;\n                        acc_xp = xp;\n                        acc_xpPos = xpPos;\n                    }\n                    accumulate01 += l;\n                } else {\n                    if (accumulate01 != 0) {\n                        quantize_lines_xrpow_01(accumulate01, istep, acc_xp,\n                            acc_xpPos, acc_iData, acc_iDataPos);\n                        accumulate01 = 0;\n                        acc_iData = iData;\n                        acc_iDataPos = iDataPos;\n                        acc_xp = xp;\n                        acc_xpPos = xpPos;\n                    }\n                    accumulate += l;\n                }\n\n                if (l <= 0) {\n                    /*\n                     * rh: 20040215 may happen due to \"prev_data_use\"\n                     * optimization\n                     */\n                    if (accumulate01 != 0) {\n                        quantize_lines_xrpow_01(accumulate01, istep, acc_xp,\n                            acc_xpPos, acc_iData, acc_iDataPos);\n                        accumulate01 = 0;\n                    }\n                    if (accumulate != 0) {\n                        quantize_lines_xrpow(accumulate, istep, acc_xp,\n                            acc_xpPos, acc_iData, acc_iDataPos);\n                        accumulate = 0;\n                    }\n\n                    break;\n                    /* ends for-loop */\n                }\n            }\n            if (sfb <= sfbmax) {\n                iDataPos += codInfo.width[sfb];\n                xpPos += codInfo.width[sfb];\n                j += codInfo.width[sfb];\n            }\n        }\n        if (accumulate != 0) { /* last data part */\n            quantize_lines_xrpow(accumulate, istep, acc_xp, acc_xpPos,\n                acc_iData, acc_iDataPos);\n            accumulate = 0;\n        }\n        if (accumulate01 != 0) { /* last data part */\n            quantize_lines_xrpow_01(accumulate01, istep, acc_xp, acc_xpPos,\n                acc_iData, acc_iDataPos);\n            accumulate01 = 0;\n        }\n\n    }\n\n    /**\n     * ix_max\n     */\n    function ix_max(ix, ixPos, endPos) {\n        var max1 = 0, max2 = 0;\n\n        do {\n            var x1 = ix[ixPos++];\n            var x2 = ix[ixPos++];\n            if (max1 < x1)\n                max1 = x1;\n\n            if (max2 < x2)\n                max2 = x2;\n        } while (ixPos < endPos);\n        if (max1 < max2)\n            max1 = max2;\n        return max1;\n    }\n\n    function count_bit_ESC(ix, ixPos, end, t1, t2, s) {\n        /* ESC-table is used */\n        var linbits = Tables.ht[t1].xlen * 65536 + Tables.ht[t2].xlen;\n        var sum = 0, sum2;\n\n        do {\n            var x = ix[ixPos++];\n            var y = ix[ixPos++];\n\n            if (x != 0) {\n                if (x > 14) {\n                    x = 15;\n                    sum += linbits;\n                }\n                x *= 16;\n            }\n\n            if (y != 0) {\n                if (y > 14) {\n                    y = 15;\n                    sum += linbits;\n                }\n                x += y;\n            }\n\n            sum += Tables.largetbl[x];\n        } while (ixPos < end);\n\n        sum2 = sum & 0xffff;\n        sum >>= 16;\n\n        if (sum > sum2) {\n            sum = sum2;\n            t1 = t2;\n        }\n\n        s.bits += sum;\n        return t1;\n    }\n\n    function count_bit_noESC(ix, ixPos, end, s) {\n        /* No ESC-words */\n        var sum1 = 0;\n        var hlen1 = Tables.ht[1].hlen;\n\n        do {\n            var x = ix[ixPos + 0] * 2 + ix[ixPos + 1];\n            ixPos += 2;\n            sum1 += hlen1[x];\n        } while (ixPos < end);\n\n        s.bits += sum1;\n        return 1;\n    }\n\n    function count_bit_noESC_from2(ix, ixPos, end, t1, s) {\n        /* No ESC-words */\n        var sum = 0, sum2;\n        var xlen = Tables.ht[t1].xlen;\n        var hlen;\n        if (t1 == 2)\n            hlen = Tables.table23;\n        else\n            hlen = Tables.table56;\n\n        do {\n            var x = ix[ixPos + 0] * xlen + ix[ixPos + 1];\n            ixPos += 2;\n            sum += hlen[x];\n        } while (ixPos < end);\n\n        sum2 = sum & 0xffff;\n        sum >>= 16;\n\n        if (sum > sum2) {\n            sum = sum2;\n            t1++;\n        }\n\n        s.bits += sum;\n        return t1;\n    }\n\n    function count_bit_noESC_from3(ix, ixPos, end, t1, s) {\n        /* No ESC-words */\n        var sum1 = 0;\n        var sum2 = 0;\n        var sum3 = 0;\n        var xlen = Tables.ht[t1].xlen;\n        var hlen1 = Tables.ht[t1].hlen;\n        var hlen2 = Tables.ht[t1 + 1].hlen;\n        var hlen3 = Tables.ht[t1 + 2].hlen;\n\n        do {\n            var x = ix[ixPos + 0] * xlen + ix[ixPos + 1];\n            ixPos += 2;\n            sum1 += hlen1[x];\n            sum2 += hlen2[x];\n            sum3 += hlen3[x];\n        } while (ixPos < end);\n        var t = t1;\n        if (sum1 > sum2) {\n            sum1 = sum2;\n            t++;\n        }\n        if (sum1 > sum3) {\n            sum1 = sum3;\n            t = t1 + 2;\n        }\n        s.bits += sum1;\n\n        return t;\n    }\n\n    /*************************************************************************/\n    /* choose table */\n    /*************************************************************************/\n\n    var huf_tbl_noESC = [1, 2, 5, 7, 7, 10, 10, 13, 13,\n        13, 13, 13, 13, 13, 13];\n\n    /**\n     * Choose the Huffman table that will encode ix[begin..end] with the fewest\n     * bits.\n     *\n     * Note: This code contains knowledge about the sizes and characteristics of\n     * the Huffman tables as defined in the IS (Table B.7), and will not work\n     * with any arbitrary tables.\n     */\n    function choose_table(ix, ixPos, endPos, s) {\n        var max = ix_max(ix, ixPos, endPos);\n\n        switch (max) {\n            case 0:\n                return max;\n\n            case 1:\n                return count_bit_noESC(ix, ixPos, endPos, s);\n\n            case 2:\n            case 3:\n                return count_bit_noESC_from2(ix, ixPos, endPos,\n                    huf_tbl_noESC[max - 1], s);\n\n            case 4:\n            case 5:\n            case 6:\n            case 7:\n            case 8:\n            case 9:\n            case 10:\n            case 11:\n            case 12:\n            case 13:\n            case 14:\n            case 15:\n                return count_bit_noESC_from3(ix, ixPos, endPos,\n                    huf_tbl_noESC[max - 1], s);\n\n            default:\n                /* try tables with linbits */\n                if (max > QuantizePVT.IXMAX_VAL) {\n                    s.bits = QuantizePVT.LARGE_BITS;\n                    return -1;\n                }\n                max -= 15;\n                var choice2;\n                for (choice2 = 24; choice2 < 32; choice2++) {\n                    if (Tables.ht[choice2].linmax >= max) {\n                        break;\n                    }\n                }\n                var choice;\n                for (choice = choice2 - 8; choice < 24; choice++) {\n                    if (Tables.ht[choice].linmax >= max) {\n                        break;\n                    }\n                }\n                return count_bit_ESC(ix, ixPos, endPos, choice, choice2, s);\n        }\n    }\n\n    /**\n     * count_bit\n     */\n    this.noquant_count_bits = function (gfc, gi, prev_noise) {\n        var ix = gi.l3_enc;\n        var i = Math.min(576, ((gi.max_nonzero_coeff + 2) >> 1) << 1);\n\n        if (prev_noise != null)\n            prev_noise.sfb_count1 = 0;\n\n        /* Determine count1 region */\n        for (; i > 1; i -= 2)\n            if ((ix[i - 1] | ix[i - 2]) != 0)\n                break;\n        gi.count1 = i;\n\n        /* Determines the number of bits to encode the quadruples. */\n        var a1 = 0;\n        var a2 = 0;\n        for (; i > 3; i -= 4) {\n            var p;\n            /* hack to check if all values <= 1 */\n            //throw \"TODO: HACK         if ((((long) ix[i - 1] | (long) ix[i - 2] | (long) ix[i - 3] | (long) ix[i - 4]) & 0xffffffffL) > 1L        \"\n            //if (true) {\n            if (((ix[i - 1] | ix[i - 2] | ix[i - 3] | ix[i - 4]) & 0x7fffffff) > 1) {\n                break;\n            }\n            p = ((ix[i - 4] * 2 + ix[i - 3]) * 2 + ix[i - 2]) * 2 + ix[i - 1];\n            a1 += Tables.t32l[p];\n            a2 += Tables.t33l[p];\n        }\n        var bits = a1;\n        gi.count1table_select = 0;\n        if (a1 > a2) {\n            bits = a2;\n            gi.count1table_select = 1;\n        }\n\n        gi.count1bits = bits;\n        gi.big_values = i;\n        if (i == 0)\n            return bits;\n\n        if (gi.block_type == Encoder.SHORT_TYPE) {\n            a1 = 3 * gfc.scalefac_band.s[3];\n            if (a1 > gi.big_values)\n                a1 = gi.big_values;\n            a2 = gi.big_values;\n\n        } else if (gi.block_type == Encoder.NORM_TYPE) {\n            assert(i <= 576);\n            /* bv_scf has 576 entries (0..575) */\n            a1 = gi.region0_count = gfc.bv_scf[i - 2];\n            a2 = gi.region1_count = gfc.bv_scf[i - 1];\n\n            assert(a1 + a2 + 2 < Encoder.SBPSY_l);\n            a2 = gfc.scalefac_band.l[a1 + a2 + 2];\n            a1 = gfc.scalefac_band.l[a1 + 1];\n            if (a2 < i) {\n                var bi = new Bits(bits);\n                gi.table_select[2] = choose_table(ix, a2, i, bi);\n                bits = bi.bits;\n            }\n        } else {\n            gi.region0_count = 7;\n            /* gi.region1_count = SBPSY_l - 7 - 1; */\n            gi.region1_count = Encoder.SBMAX_l - 1 - 7 - 1;\n            a1 = gfc.scalefac_band.l[7 + 1];\n            a2 = i;\n            if (a1 > a2) {\n                a1 = a2;\n            }\n        }\n\n        /* have to allow for the case when bigvalues < region0 < region1 */\n        /* (and region0, region1 are ignored) */\n        a1 = Math.min(a1, i);\n        a2 = Math.min(a2, i);\n\n        assert(a1 >= 0);\n        assert(a2 >= 0);\n\n        /* Count the number of bits necessary to code the bigvalues region. */\n        if (0 < a1) {\n            var bi = new Bits(bits);\n            gi.table_select[0] = choose_table(ix, 0, a1, bi);\n            bits = bi.bits;\n        }\n        if (a1 < a2) {\n            var bi = new Bits(bits);\n            gi.table_select[1] = choose_table(ix, a1, a2, bi);\n            bits = bi.bits;\n        }\n        if (gfc.use_best_huffman == 2) {\n            gi.part2_3_length = bits;\n            best_huffman_divide(gfc, gi);\n            bits = gi.part2_3_length;\n        }\n\n        if (prev_noise != null) {\n            if (gi.block_type == Encoder.NORM_TYPE) {\n                var sfb = 0;\n                while (gfc.scalefac_band.l[sfb] < gi.big_values) {\n                    sfb++;\n                }\n                prev_noise.sfb_count1 = sfb;\n            }\n        }\n\n        return bits;\n    }\n\n    this.count_bits = function (gfc, xr, gi, prev_noise) {\n        var ix = gi.l3_enc;\n\n        /* since quantize_xrpow uses table lookup, we need to check this first: */\n        var w = (QuantizePVT.IXMAX_VAL) / qupvt.IPOW20(gi.global_gain);\n\n        if (gi.xrpow_max > w)\n            return QuantizePVT.LARGE_BITS;\n\n        quantize_xrpow(xr, ix, qupvt.IPOW20(gi.global_gain), gi, prev_noise);\n\n        if ((gfc.substep_shaping & 2) != 0) {\n            var j = 0;\n            /* 0.634521682242439 = 0.5946*2**(.5*0.1875) */\n            var gain = gi.global_gain + gi.scalefac_scale;\n            var roundfac = 0.634521682242439 / qupvt.IPOW20(gain);\n            for (var sfb = 0; sfb < gi.sfbmax; sfb++) {\n                var width = gi.width[sfb];\n                assert(width >= 0);\n                if (0 == gfc.pseudohalf[sfb]) {\n                    j += width;\n                } else {\n                    var k;\n                    for (k = j, j += width; k < j; ++k) {\n                        ix[k] = (xr[k] >= roundfac) ? ix[k] : 0;\n                    }\n                }\n            }\n        }\n        return this.noquant_count_bits(gfc, gi, prev_noise);\n    }\n\n    /**\n     * re-calculate the best scalefac_compress using scfsi the saved bits are\n     * kept in the bit reservoir.\n     */\n    function recalc_divide_init(gfc, cod_info, ix, r01_bits, r01_div, r0_tbl, r1_tbl) {\n        var bigv = cod_info.big_values;\n\n        for (var r0 = 0; r0 <= 7 + 15; r0++) {\n            r01_bits[r0] = QuantizePVT.LARGE_BITS;\n        }\n\n        for (var r0 = 0; r0 < 16; r0++) {\n            var a1 = gfc.scalefac_band.l[r0 + 1];\n            if (a1 >= bigv)\n                break;\n            var r0bits = 0;\n            var bi = new Bits(r0bits);\n            var r0t = choose_table(ix, 0, a1, bi);\n            r0bits = bi.bits;\n\n            for (var r1 = 0; r1 < 8; r1++) {\n                var a2 = gfc.scalefac_band.l[r0 + r1 + 2];\n                if (a2 >= bigv)\n                    break;\n                var bits = r0bits;\n                bi = new Bits(bits);\n                var r1t = choose_table(ix, a1, a2, bi);\n                bits = bi.bits;\n                if (r01_bits[r0 + r1] > bits) {\n                    r01_bits[r0 + r1] = bits;\n                    r01_div[r0 + r1] = r0;\n                    r0_tbl[r0 + r1] = r0t;\n                    r1_tbl[r0 + r1] = r1t;\n                }\n            }\n        }\n    }\n\n    function recalc_divide_sub(gfc, cod_info2, gi, ix, r01_bits, r01_div, r0_tbl, r1_tbl) {\n        var bigv = cod_info2.big_values;\n\n        for (var r2 = 2; r2 < Encoder.SBMAX_l + 1; r2++) {\n            var a2 = gfc.scalefac_band.l[r2];\n            if (a2 >= bigv)\n                break;\n            var bits = r01_bits[r2 - 2] + cod_info2.count1bits;\n            if (gi.part2_3_length <= bits)\n                break;\n\n            var bi = new Bits(bits);\n            var r2t = choose_table(ix, a2, bigv, bi);\n            bits = bi.bits;\n            if (gi.part2_3_length <= bits)\n                continue;\n\n            gi.assign(cod_info2);\n            gi.part2_3_length = bits;\n            gi.region0_count = r01_div[r2 - 2];\n            gi.region1_count = r2 - 2 - r01_div[r2 - 2];\n            gi.table_select[0] = r0_tbl[r2 - 2];\n            gi.table_select[1] = r1_tbl[r2 - 2];\n            gi.table_select[2] = r2t;\n        }\n    }\n\n    this.best_huffman_divide = function (gfc, gi) {\n        var cod_info2 = new GrInfo();\n        var ix = gi.l3_enc;\n        var r01_bits = new_int(7 + 15 + 1);\n        var r01_div = new_int(7 + 15 + 1);\n        var r0_tbl = new_int(7 + 15 + 1);\n        var r1_tbl = new_int(7 + 15 + 1);\n\n        /* SHORT BLOCK stuff fails for MPEG2 */\n        if (gi.block_type == Encoder.SHORT_TYPE && gfc.mode_gr == 1)\n            return;\n\n        cod_info2.assign(gi);\n        if (gi.block_type == Encoder.NORM_TYPE) {\n            recalc_divide_init(gfc, gi, ix, r01_bits, r01_div, r0_tbl, r1_tbl);\n            recalc_divide_sub(gfc, cod_info2, gi, ix, r01_bits, r01_div,\n                r0_tbl, r1_tbl);\n        }\n        var i = cod_info2.big_values;\n        if (i == 0 || (ix[i - 2] | ix[i - 1]) > 1)\n            return;\n\n        i = gi.count1 + 2;\n        if (i > 576)\n            return;\n\n        /* Determines the number of bits to encode the quadruples. */\n        cod_info2.assign(gi);\n        cod_info2.count1 = i;\n        var a1 = 0;\n        var a2 = 0;\n\n        assert(i <= 576);\n\n        for (; i > cod_info2.big_values; i -= 4) {\n            var p = ((ix[i - 4] * 2 + ix[i - 3]) * 2 + ix[i - 2]) * 2\n                + ix[i - 1];\n            a1 += Tables.t32l[p];\n            a2 += Tables.t33l[p];\n        }\n        cod_info2.big_values = i;\n\n        cod_info2.count1table_select = 0;\n        if (a1 > a2) {\n            a1 = a2;\n            cod_info2.count1table_select = 1;\n        }\n\n        cod_info2.count1bits = a1;\n\n        if (cod_info2.block_type == Encoder.NORM_TYPE)\n            recalc_divide_sub(gfc, cod_info2, gi, ix, r01_bits, r01_div,\n                r0_tbl, r1_tbl);\n        else {\n            /* Count the number of bits necessary to code the bigvalues region. */\n            cod_info2.part2_3_length = a1;\n            a1 = gfc.scalefac_band.l[7 + 1];\n            if (a1 > i) {\n                a1 = i;\n            }\n            if (a1 > 0) {\n                var bi = new Bits(cod_info2.part2_3_length);\n                cod_info2.table_select[0] = choose_table(ix, 0, a1, bi);\n                cod_info2.part2_3_length = bi.bits;\n            }\n            if (i > a1) {\n                var bi = new Bits(cod_info2.part2_3_length);\n                cod_info2.table_select[1] = choose_table(ix, a1, i, bi);\n                cod_info2.part2_3_length = bi.bits;\n            }\n            if (gi.part2_3_length > cod_info2.part2_3_length)\n                gi.assign(cod_info2);\n        }\n    }\n\n    var slen1_n = [1, 1, 1, 1, 8, 2, 2, 2, 4, 4, 4, 8, 8, 8, 16, 16];\n    var slen2_n = [1, 2, 4, 8, 1, 2, 4, 8, 2, 4, 8, 2, 4, 8, 4, 8];\n    var slen1_tab = [0, 0, 0, 0, 3, 1, 1, 1, 2, 2, 2, 3, 3, 3, 4, 4];\n    var slen2_tab = [0, 1, 2, 3, 0, 1, 2, 3, 1, 2, 3, 1, 2, 3, 2, 3];\n    Takehiro.slen1_tab = slen1_tab;\n    Takehiro.slen2_tab = slen2_tab;\n\n    function scfsi_calc(ch, l3_side) {\n        var sfb;\n        var gi = l3_side.tt[1][ch];\n        var g0 = l3_side.tt[0][ch];\n\n        for (var i = 0; i < Tables.scfsi_band.length - 1; i++) {\n            for (sfb = Tables.scfsi_band[i]; sfb < Tables.scfsi_band[i + 1]; sfb++) {\n                if (g0.scalefac[sfb] != gi.scalefac[sfb]\n                    && gi.scalefac[sfb] >= 0)\n                    break;\n            }\n            if (sfb == Tables.scfsi_band[i + 1]) {\n                for (sfb = Tables.scfsi_band[i]; sfb < Tables.scfsi_band[i + 1]; sfb++) {\n                    gi.scalefac[sfb] = -1;\n                }\n                l3_side.scfsi[ch][i] = 1;\n            }\n        }\n        var s1 = 0;\n        var c1 = 0;\n        for (sfb = 0; sfb < 11; sfb++) {\n            if (gi.scalefac[sfb] == -1)\n                continue;\n            c1++;\n            if (s1 < gi.scalefac[sfb])\n                s1 = gi.scalefac[sfb];\n        }\n        var s2 = 0;\n        var c2 = 0;\n        for (; sfb < Encoder.SBPSY_l; sfb++) {\n            if (gi.scalefac[sfb] == -1)\n                continue;\n            c2++;\n            if (s2 < gi.scalefac[sfb])\n                s2 = gi.scalefac[sfb];\n        }\n\n        for (var i = 0; i < 16; i++) {\n            if (s1 < slen1_n[i] && s2 < slen2_n[i]) {\n                var c = slen1_tab[i] * c1 + slen2_tab[i] * c2;\n                if (gi.part2_length > c) {\n                    gi.part2_length = c;\n                    gi.scalefac_compress = i;\n                }\n            }\n        }\n    }\n\n    /**\n     * Find the optimal way to store the scalefactors. Only call this routine\n     * after final scalefactors have been chosen and the channel/granule will\n     * not be re-encoded.\n     */\n    this.best_scalefac_store = function (gfc, gr, ch, l3_side) {\n        /* use scalefac_scale if we can */\n        var gi = l3_side.tt[gr][ch];\n        var sfb, i, j, l;\n        var recalc = 0;\n\n        /*\n         * remove scalefacs from bands with ix=0. This idea comes from the AAC\n         * ISO docs. added mt 3/00\n         */\n        /* check if l3_enc=0 */\n        j = 0;\n        for (sfb = 0; sfb < gi.sfbmax; sfb++) {\n            var width = gi.width[sfb];\n            assert(width >= 0);\n            j += width;\n            for (l = -width; l < 0; l++) {\n                if (gi.l3_enc[l + j] != 0)\n                    break;\n            }\n            if (l == 0)\n                gi.scalefac[sfb] = recalc = -2;\n            /* anything goes. */\n            /*\n             * only best_scalefac_store and calc_scfsi know--and only they\n             * should know--about the magic number -2.\n             */\n        }\n\n        if (0 == gi.scalefac_scale && 0 == gi.preflag) {\n            var s = 0;\n            for (sfb = 0; sfb < gi.sfbmax; sfb++)\n                if (gi.scalefac[sfb] > 0)\n                    s |= gi.scalefac[sfb];\n\n            if (0 == (s & 1) && s != 0) {\n                for (sfb = 0; sfb < gi.sfbmax; sfb++)\n                    if (gi.scalefac[sfb] > 0)\n                        gi.scalefac[sfb] >>= 1;\n\n                gi.scalefac_scale = recalc = 1;\n            }\n        }\n\n        if (0 == gi.preflag && gi.block_type != Encoder.SHORT_TYPE\n            && gfc.mode_gr == 2) {\n            for (sfb = 11; sfb < Encoder.SBPSY_l; sfb++)\n                if (gi.scalefac[sfb] < qupvt.pretab[sfb]\n                    && gi.scalefac[sfb] != -2)\n                    break;\n            if (sfb == Encoder.SBPSY_l) {\n                for (sfb = 11; sfb < Encoder.SBPSY_l; sfb++)\n                    if (gi.scalefac[sfb] > 0)\n                        gi.scalefac[sfb] -= qupvt.pretab[sfb];\n\n                gi.preflag = recalc = 1;\n            }\n        }\n\n        for (i = 0; i < 4; i++)\n            l3_side.scfsi[ch][i] = 0;\n\n        if (gfc.mode_gr == 2 && gr == 1\n            && l3_side.tt[0][ch].block_type != Encoder.SHORT_TYPE\n            && l3_side.tt[1][ch].block_type != Encoder.SHORT_TYPE) {\n            scfsi_calc(ch, l3_side);\n            recalc = 0;\n        }\n        for (sfb = 0; sfb < gi.sfbmax; sfb++) {\n            if (gi.scalefac[sfb] == -2) {\n                gi.scalefac[sfb] = 0;\n                /* if anything goes, then 0 is a good choice */\n            }\n        }\n        if (recalc != 0) {\n            if (gfc.mode_gr == 2) {\n                this.scale_bitcount(gi);\n            } else {\n                this.scale_bitcount_lsf(gfc, gi);\n            }\n        }\n    }\n\n    function all_scalefactors_not_negative(scalefac, n) {\n        for (var i = 0; i < n; ++i) {\n            if (scalefac[i] < 0)\n                return false;\n        }\n        return true;\n    }\n\n    /**\n     * number of bits used to encode scalefacs.\n     *\n     * 18*slen1_tab[i] + 18*slen2_tab[i]\n     */\n    var scale_short = [0, 18, 36, 54, 54, 36, 54, 72,\n        54, 72, 90, 72, 90, 108, 108, 126];\n\n    /**\n     * number of bits used to encode scalefacs.\n     *\n     * 17*slen1_tab[i] + 18*slen2_tab[i]\n     */\n    var scale_mixed = [0, 18, 36, 54, 51, 35, 53, 71,\n        52, 70, 88, 69, 87, 105, 104, 122];\n\n    /**\n     * number of bits used to encode scalefacs.\n     *\n     * 11*slen1_tab[i] + 10*slen2_tab[i]\n     */\n    var scale_long = [0, 10, 20, 30, 33, 21, 31, 41, 32, 42,\n        52, 43, 53, 63, 64, 74];\n\n    /**\n     * Also calculates the number of bits necessary to code the scalefactors.\n     */\n    this.scale_bitcount = function (cod_info) {\n        var k, sfb, max_slen1 = 0, max_slen2 = 0;\n\n        /* maximum values */\n        var tab;\n        var scalefac = cod_info.scalefac;\n\n        assert(all_scalefactors_not_negative(scalefac, cod_info.sfbmax));\n\n        if (cod_info.block_type == Encoder.SHORT_TYPE) {\n            tab = scale_short;\n            if (cod_info.mixed_block_flag != 0)\n                tab = scale_mixed;\n        } else { /* block_type == 1,2,or 3 */\n            tab = scale_long;\n            if (0 == cod_info.preflag) {\n                for (sfb = 11; sfb < Encoder.SBPSY_l; sfb++)\n                    if (scalefac[sfb] < qupvt.pretab[sfb])\n                        break;\n\n                if (sfb == Encoder.SBPSY_l) {\n                    cod_info.preflag = 1;\n                    for (sfb = 11; sfb < Encoder.SBPSY_l; sfb++)\n                        scalefac[sfb] -= qupvt.pretab[sfb];\n                }\n            }\n        }\n\n        for (sfb = 0; sfb < cod_info.sfbdivide; sfb++)\n            if (max_slen1 < scalefac[sfb])\n                max_slen1 = scalefac[sfb];\n\n        for (; sfb < cod_info.sfbmax; sfb++)\n            if (max_slen2 < scalefac[sfb])\n                max_slen2 = scalefac[sfb];\n\n        /*\n         * from Takehiro TOMINAGA <tominaga@isoternet.org> 10/99 loop over *all*\n         * posible values of scalefac_compress to find the one which uses the\n         * smallest number of bits. ISO would stop at first valid index\n         */\n        cod_info.part2_length = QuantizePVT.LARGE_BITS;\n        for (k = 0; k < 16; k++) {\n            if (max_slen1 < slen1_n[k] && max_slen2 < slen2_n[k]\n                && cod_info.part2_length > tab[k]) {\n                cod_info.part2_length = tab[k];\n                cod_info.scalefac_compress = k;\n            }\n        }\n        return cod_info.part2_length == QuantizePVT.LARGE_BITS;\n    }\n\n    /**\n     * table of largest scalefactor values for MPEG2\n     */\n    var max_range_sfac_tab = [[15, 15, 7, 7],\n        [15, 15, 7, 0], [7, 3, 0, 0], [15, 31, 31, 0],\n        [7, 7, 7, 0], [3, 3, 0, 0]];\n\n    /**\n     * Also counts the number of bits to encode the scalefacs but for MPEG 2\n     * Lower sampling frequencies (24, 22.05 and 16 kHz.)\n     *\n     * This is reverse-engineered from section 2.4.3.2 of the MPEG2 IS,\n     * \"Audio Decoding Layer III\"\n     */\n    this.scale_bitcount_lsf = function (gfc, cod_info) {\n        var table_number, row_in_table, partition, nr_sfb, window;\n        var over;\n        var i, sfb;\n        var max_sfac = new_int(4);\n//var partition_table;\n        var scalefac = cod_info.scalefac;\n\n        /*\n         * Set partition table. Note that should try to use table one, but do\n         * not yet...\n         */\n        if (cod_info.preflag != 0)\n            table_number = 2;\n        else\n            table_number = 0;\n\n        for (i = 0; i < 4; i++)\n            max_sfac[i] = 0;\n\n        if (cod_info.block_type == Encoder.SHORT_TYPE) {\n            row_in_table = 1;\n            var partition_table = qupvt.nr_of_sfb_block[table_number][row_in_table];\n            for (sfb = 0, partition = 0; partition < 4; partition++) {\n                nr_sfb = partition_table[partition] / 3;\n                for (i = 0; i < nr_sfb; i++, sfb++)\n                    for (window = 0; window < 3; window++)\n                        if (scalefac[sfb * 3 + window] > max_sfac[partition])\n                            max_sfac[partition] = scalefac[sfb * 3 + window];\n            }\n        } else {\n            row_in_table = 0;\n            var partition_table = qupvt.nr_of_sfb_block[table_number][row_in_table];\n            for (sfb = 0, partition = 0; partition < 4; partition++) {\n                nr_sfb = partition_table[partition];\n                for (i = 0; i < nr_sfb; i++, sfb++)\n                    if (scalefac[sfb] > max_sfac[partition])\n                        max_sfac[partition] = scalefac[sfb];\n            }\n        }\n\n        for (over = false, partition = 0; partition < 4; partition++) {\n            if (max_sfac[partition] > max_range_sfac_tab[table_number][partition])\n                over = true;\n        }\n        if (!over) {\n            var slen1, slen2, slen3, slen4;\n\n            cod_info.sfb_partition_table = qupvt.nr_of_sfb_block[table_number][row_in_table];\n            for (partition = 0; partition < 4; partition++)\n                cod_info.slen[partition] = log2tab[max_sfac[partition]];\n\n            /* set scalefac_compress */\n            slen1 = cod_info.slen[0];\n            slen2 = cod_info.slen[1];\n            slen3 = cod_info.slen[2];\n            slen4 = cod_info.slen[3];\n\n            switch (table_number) {\n                case 0:\n                    cod_info.scalefac_compress = (((slen1 * 5) + slen2) << 4)\n                        + (slen3 << 2) + slen4;\n                    break;\n\n                case 1:\n                    cod_info.scalefac_compress = 400 + (((slen1 * 5) + slen2) << 2)\n                        + slen3;\n                    break;\n\n                case 2:\n                    cod_info.scalefac_compress = 500 + (slen1 * 3) + slen2;\n                    break;\n\n                default:\n                    System.err.printf(\"intensity stereo not implemented yet\\n\");\n                    break;\n            }\n        }\n        if (!over) {\n            assert(cod_info.sfb_partition_table != null);\n            cod_info.part2_length = 0;\n            for (partition = 0; partition < 4; partition++)\n                cod_info.part2_length += cod_info.slen[partition]\n                    * cod_info.sfb_partition_table[partition];\n        }\n        return over;\n    }\n\n    /*\n     * Since no bands have been over-amplified, we can set scalefac_compress and\n     * slen[] for the formatter\n     */\n    var log2tab = [0, 1, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4,\n        4, 4, 4, 4];\n\n    this.huffman_init = function (gfc) {\n        for (var i = 2; i <= 576; i += 2) {\n            var scfb_anz = 0, bv_index;\n            while (gfc.scalefac_band.l[++scfb_anz] < i)\n                ;\n\n            bv_index = subdv_table[scfb_anz][0]; // .region0_count\n            while (gfc.scalefac_band.l[bv_index + 1] > i)\n                bv_index--;\n\n            if (bv_index < 0) {\n                /*\n                 * this is an indication that everything is going to be encoded\n                 * as region0: bigvalues < region0 < region1 so lets set\n                 * region0, region1 to some value larger than bigvalues\n                 */\n                bv_index = subdv_table[scfb_anz][0]; // .region0_count\n            }\n\n            gfc.bv_scf[i - 2] = bv_index;\n\n            bv_index = subdv_table[scfb_anz][1]; // .region1_count\n            while (gfc.scalefac_band.l[bv_index + gfc.bv_scf[i - 2] + 2] > i)\n                bv_index--;\n\n            if (bv_index < 0) {\n                bv_index = subdv_table[scfb_anz][1]; // .region1_count\n            }\n\n            gfc.bv_scf[i - 1] = bv_index;\n        }\n    }\n}\n\nmodule.exports = Takehiro;\n","var common = require('./common.js');\nvar System = common.System;\nvar VbrMode = common.VbrMode;\nvar Float = common.Float;\nvar ShortBlock = common.ShortBlock;\nvar Util = common.Util;\nvar Arrays = common.Arrays;\nvar new_array_n = common.new_array_n;\nvar new_byte = common.new_byte;\nvar new_double = common.new_double;\nvar new_float = common.new_float;\nvar new_float_n = common.new_float_n;\nvar new_int = common.new_int;\nvar new_int_n = common.new_int_n;\nvar assert = common.assert;\n\nvar Takehiro = require('./Takehiro.js');\nvar Tables = require('./Tables.js');\nvar Encoder = require('./Encoder.js');\nvar LameInternalFlags = require('./LameInternalFlags.js');\n\nBitStream.EQ = function (a, b) {\n    return (Math.abs(a) > Math.abs(b)) ? (Math.abs((a) - (b)) <= (Math\n        .abs(a) * 1e-6))\n        : (Math.abs((a) - (b)) <= (Math.abs(b) * 1e-6));\n};\n\nBitStream.NEQ = function (a, b) {\n    return !BitStream.EQ(a, b);\n};\n\nfunction BitStream() {\n    var self = this;\n    var CRC16_POLYNOMIAL = 0x8005;\n\n    /*\n     * we work with ints, so when doing bit manipulation, we limit ourselves to\n     * MAX_LENGTH-2 just to be on the safe side\n     */\n    var MAX_LENGTH = 32;\n\n    //GainAnalysis ga;\n    //MPGLib mpg;\n    //Version ver;\n    //VBRTag vbr;\n    var ga = null;\n    var mpg = null;\n    var ver = null;\n    var vbr = null;\n\n    //public final void setModules(GainAnalysis ga, MPGLib mpg, Version ver,\n    //\tVBRTag vbr) {\n\n    this.setModules = function (_ga, _mpg, _ver, _vbr) {\n        ga = _ga;\n        mpg = _mpg;\n        ver = _ver;\n        vbr = _vbr;\n    };\n\n    /**\n     * Bit stream buffer.\n     */\n    //private byte[] buf;\n    var buf = null;\n    /**\n     * Bit counter of bit stream.\n     */\n    var totbit = 0;\n    /**\n     * Pointer to top byte in buffer.\n     */\n    var bufByteIdx = 0;\n    /**\n     * Pointer to top bit of top byte in buffer.\n     */\n    var bufBitIdx = 0;\n\n    /**\n     * compute bitsperframe and mean_bits for a layer III frame\n     */\n    this.getframebits = function (gfp) {\n        var gfc = gfp.internal_flags;\n        var bit_rate;\n\n        /* get bitrate in kbps [?] */\n        if (gfc.bitrate_index != 0)\n            bit_rate = Tables.bitrate_table[gfp.version][gfc.bitrate_index];\n        else\n            bit_rate = gfp.brate;\n        assert(8 <= bit_rate && bit_rate <= 640);\n\n        /* main encoding routine toggles padding on and off */\n        /* one Layer3 Slot consists of 8 bits */\n        var bytes = 0 | (gfp.version + 1) * 72000 * bit_rate / gfp.out_samplerate + gfc.padding;\n        return 8 * bytes;\n    };\n\n    function putheader_bits(gfc) {\n        System.arraycopy(gfc.header[gfc.w_ptr].buf, 0, buf, bufByteIdx, gfc.sideinfo_len);\n        bufByteIdx += gfc.sideinfo_len;\n        totbit += gfc.sideinfo_len * 8;\n        gfc.w_ptr = (gfc.w_ptr + 1) & (LameInternalFlags.MAX_HEADER_BUF - 1);\n    }\n\n    /**\n     * write j bits into the bit stream\n     */\n    function putbits2(gfc, val, j) {\n        assert(j < MAX_LENGTH - 2);\n\n        while (j > 0) {\n            var k;\n            if (bufBitIdx == 0) {\n                bufBitIdx = 8;\n                bufByteIdx++;\n                assert(bufByteIdx < Lame.LAME_MAXMP3BUFFER);\n                assert(gfc.header[gfc.w_ptr].write_timing >= totbit);\n                if (gfc.header[gfc.w_ptr].write_timing == totbit) {\n                    putheader_bits(gfc);\n                }\n                buf[bufByteIdx] = 0;\n            }\n\n            k = Math.min(j, bufBitIdx);\n            j -= k;\n\n            bufBitIdx -= k;\n\n            assert(j < MAX_LENGTH);\n            /* 32 too large on 32 bit machines */\n            assert(bufBitIdx < MAX_LENGTH);\n\n            buf[bufByteIdx] |= ((val >> j) << bufBitIdx);\n            totbit += k;\n        }\n    }\n\n    /**\n     * write j bits into the bit stream, ignoring frame headers\n     */\n    function putbits_noheaders(gfc, val, j) {\n        assert(j < MAX_LENGTH - 2);\n\n        while (j > 0) {\n            var k;\n            if (bufBitIdx == 0) {\n                bufBitIdx = 8;\n                bufByteIdx++;\n                assert(bufByteIdx < Lame.LAME_MAXMP3BUFFER);\n                buf[bufByteIdx] = 0;\n            }\n\n            k = Math.min(j, bufBitIdx);\n            j -= k;\n\n            bufBitIdx -= k;\n\n            assert(j < MAX_LENGTH);\n            /* 32 too large on 32 bit machines */\n            assert(bufBitIdx < MAX_LENGTH);\n\n            buf[bufByteIdx] |= ((val >> j) << bufBitIdx);\n            totbit += k;\n        }\n    }\n\n    /**\n     * Some combinations of bitrate, Fs, and stereo make it impossible to stuff\n     * out a frame using just main_data, due to the limited number of bits to\n     * indicate main_data_length. In these situations, we put stuffing bits into\n     * the ancillary data...\n     */\n    function drain_into_ancillary(gfp, remainingBits) {\n        var gfc = gfp.internal_flags;\n        var i;\n        assert(remainingBits >= 0);\n\n        if (remainingBits >= 8) {\n            putbits2(gfc, 0x4c, 8);\n            remainingBits -= 8;\n        }\n        if (remainingBits >= 8) {\n            putbits2(gfc, 0x41, 8);\n            remainingBits -= 8;\n        }\n        if (remainingBits >= 8) {\n            putbits2(gfc, 0x4d, 8);\n            remainingBits -= 8;\n        }\n        if (remainingBits >= 8) {\n            putbits2(gfc, 0x45, 8);\n            remainingBits -= 8;\n        }\n\n        if (remainingBits >= 32) {\n            var version = ver.getLameShortVersion();\n            if (remainingBits >= 32)\n                for (i = 0; i < version.length && remainingBits >= 8; ++i) {\n                    remainingBits -= 8;\n                    putbits2(gfc, version.charAt(i), 8);\n                }\n        }\n\n        for (; remainingBits >= 1; remainingBits -= 1) {\n            putbits2(gfc, gfc.ancillary_flag, 1);\n            gfc.ancillary_flag ^= (!gfp.disable_reservoir ? 1 : 0);\n        }\n\n        assert(remainingBits == 0);\n\n    }\n\n    /**\n     * write N bits into the header\n     */\n    function writeheader(gfc, val, j) {\n        var ptr = gfc.header[gfc.h_ptr].ptr;\n\n        while (j > 0) {\n            var k = Math.min(j, 8 - (ptr & 7));\n            j -= k;\n            assert(j < MAX_LENGTH);\n            /* >> 32 too large for 32 bit machines */\n\n            gfc.header[gfc.h_ptr].buf[ptr >> 3] |= ((val >> j)) << (8 - (ptr & 7) - k);\n            ptr += k;\n        }\n        gfc.header[gfc.h_ptr].ptr = ptr;\n    }\n\n    function CRC_update(value, crc) {\n        value <<= 8;\n        for (var i = 0; i < 8; i++) {\n            value <<= 1;\n            crc <<= 1;\n\n            if ((((crc ^ value) & 0x10000) != 0))\n                crc ^= CRC16_POLYNOMIAL;\n        }\n        return crc;\n    }\n\n    this.CRC_writeheader = function (gfc, header) {\n        var crc = 0xffff;\n        /* (jo) init crc16 for error_protection */\n\n        crc = CRC_update(header[2] & 0xff, crc);\n        crc = CRC_update(header[3] & 0xff, crc);\n        for (var i = 6; i < gfc.sideinfo_len; i++) {\n            crc = CRC_update(header[i] & 0xff, crc);\n        }\n\n        header[4] = (byte)(crc >> 8);\n        header[5] = (byte)(crc & 255);\n    };\n\n    function encodeSideInfo2(gfp, bitsPerFrame) {\n        var gfc = gfp.internal_flags;\n        var l3_side;\n        var gr, ch;\n\n        l3_side = gfc.l3_side;\n        gfc.header[gfc.h_ptr].ptr = 0;\n        Arrays.fill(gfc.header[gfc.h_ptr].buf, 0, gfc.sideinfo_len, 0);\n        if (gfp.out_samplerate < 16000)\n            writeheader(gfc, 0xffe, 12);\n        else\n            writeheader(gfc, 0xfff, 12);\n        writeheader(gfc, (gfp.version), 1);\n        writeheader(gfc, 4 - 3, 2);\n        writeheader(gfc, (!gfp.error_protection ? 1 : 0), 1);\n        writeheader(gfc, (gfc.bitrate_index), 4);\n        writeheader(gfc, (gfc.samplerate_index), 2);\n        writeheader(gfc, (gfc.padding), 1);\n        writeheader(gfc, (gfp.extension), 1);\n        writeheader(gfc, (gfp.mode.ordinal()), 2);\n        writeheader(gfc, (gfc.mode_ext), 2);\n        writeheader(gfc, (gfp.copyright), 1);\n        writeheader(gfc, (gfp.original), 1);\n        writeheader(gfc, (gfp.emphasis), 2);\n        if (gfp.error_protection) {\n            writeheader(gfc, 0, 16);\n            /* dummy */\n        }\n\n        if (gfp.version == 1) {\n            /* MPEG1 */\n            assert(l3_side.main_data_begin >= 0);\n            writeheader(gfc, (l3_side.main_data_begin), 9);\n\n            if (gfc.channels_out == 2)\n                writeheader(gfc, l3_side.private_bits, 3);\n            else\n                writeheader(gfc, l3_side.private_bits, 5);\n\n            for (ch = 0; ch < gfc.channels_out; ch++) {\n                var band;\n                for (band = 0; band < 4; band++) {\n                    writeheader(gfc, l3_side.scfsi[ch][band], 1);\n                }\n            }\n\n            for (gr = 0; gr < 2; gr++) {\n                for (ch = 0; ch < gfc.channels_out; ch++) {\n                    var gi = l3_side.tt[gr][ch];\n                    writeheader(gfc, gi.part2_3_length + gi.part2_length, 12);\n                    writeheader(gfc, gi.big_values / 2, 9);\n                    writeheader(gfc, gi.global_gain, 8);\n                    writeheader(gfc, gi.scalefac_compress, 4);\n\n                    if (gi.block_type != Encoder.NORM_TYPE) {\n                        writeheader(gfc, 1, 1);\n                        /* window_switching_flag */\n                        writeheader(gfc, gi.block_type, 2);\n                        writeheader(gfc, gi.mixed_block_flag, 1);\n\n                        if (gi.table_select[0] == 14)\n                            gi.table_select[0] = 16;\n                        writeheader(gfc, gi.table_select[0], 5);\n                        if (gi.table_select[1] == 14)\n                            gi.table_select[1] = 16;\n                        writeheader(gfc, gi.table_select[1], 5);\n\n                        writeheader(gfc, gi.subblock_gain[0], 3);\n                        writeheader(gfc, gi.subblock_gain[1], 3);\n                        writeheader(gfc, gi.subblock_gain[2], 3);\n                    } else {\n                        writeheader(gfc, 0, 1);\n                        /* window_switching_flag */\n                        if (gi.table_select[0] == 14)\n                            gi.table_select[0] = 16;\n                        writeheader(gfc, gi.table_select[0], 5);\n                        if (gi.table_select[1] == 14)\n                            gi.table_select[1] = 16;\n                        writeheader(gfc, gi.table_select[1], 5);\n                        if (gi.table_select[2] == 14)\n                            gi.table_select[2] = 16;\n                        writeheader(gfc, gi.table_select[2], 5);\n\n                        assert(0 <= gi.region0_count && gi.region0_count < 16);\n                        assert(0 <= gi.region1_count && gi.region1_count < 8);\n                        writeheader(gfc, gi.region0_count, 4);\n                        writeheader(gfc, gi.region1_count, 3);\n                    }\n                    writeheader(gfc, gi.preflag, 1);\n                    writeheader(gfc, gi.scalefac_scale, 1);\n                    writeheader(gfc, gi.count1table_select, 1);\n                }\n            }\n        } else {\n            /* MPEG2 */\n            assert(l3_side.main_data_begin >= 0);\n            writeheader(gfc, (l3_side.main_data_begin), 8);\n            writeheader(gfc, l3_side.private_bits, gfc.channels_out);\n\n            gr = 0;\n            for (ch = 0; ch < gfc.channels_out; ch++) {\n                var gi = l3_side.tt[gr][ch];\n                writeheader(gfc, gi.part2_3_length + gi.part2_length, 12);\n                writeheader(gfc, gi.big_values / 2, 9);\n                writeheader(gfc, gi.global_gain, 8);\n                writeheader(gfc, gi.scalefac_compress, 9);\n\n                if (gi.block_type != Encoder.NORM_TYPE) {\n                    writeheader(gfc, 1, 1);\n                    /* window_switching_flag */\n                    writeheader(gfc, gi.block_type, 2);\n                    writeheader(gfc, gi.mixed_block_flag, 1);\n\n                    if (gi.table_select[0] == 14)\n                        gi.table_select[0] = 16;\n                    writeheader(gfc, gi.table_select[0], 5);\n                    if (gi.table_select[1] == 14)\n                        gi.table_select[1] = 16;\n                    writeheader(gfc, gi.table_select[1], 5);\n\n                    writeheader(gfc, gi.subblock_gain[0], 3);\n                    writeheader(gfc, gi.subblock_gain[1], 3);\n                    writeheader(gfc, gi.subblock_gain[2], 3);\n                } else {\n                    writeheader(gfc, 0, 1);\n                    /* window_switching_flag */\n                    if (gi.table_select[0] == 14)\n                        gi.table_select[0] = 16;\n                    writeheader(gfc, gi.table_select[0], 5);\n                    if (gi.table_select[1] == 14)\n                        gi.table_select[1] = 16;\n                    writeheader(gfc, gi.table_select[1], 5);\n                    if (gi.table_select[2] == 14)\n                        gi.table_select[2] = 16;\n                    writeheader(gfc, gi.table_select[2], 5);\n\n                    assert(0 <= gi.region0_count && gi.region0_count < 16);\n                    assert(0 <= gi.region1_count && gi.region1_count < 8);\n                    writeheader(gfc, gi.region0_count, 4);\n                    writeheader(gfc, gi.region1_count, 3);\n                }\n\n                writeheader(gfc, gi.scalefac_scale, 1);\n                writeheader(gfc, gi.count1table_select, 1);\n            }\n        }\n\n        if (gfp.error_protection) {\n            /* (jo) error_protection: add crc16 information to header */\n            CRC_writeheader(gfc, gfc.header[gfc.h_ptr].buf);\n        }\n\n        {\n            var old = gfc.h_ptr;\n            assert(gfc.header[old].ptr == gfc.sideinfo_len * 8);\n\n            gfc.h_ptr = (old + 1) & (LameInternalFlags.MAX_HEADER_BUF - 1);\n            gfc.header[gfc.h_ptr].write_timing = gfc.header[old].write_timing\n                + bitsPerFrame;\n\n            if (gfc.h_ptr == gfc.w_ptr) {\n                /* yikes! we are out of header buffer space */\n                System.err\n                    .println(\"Error: MAX_HEADER_BUF too small in bitstream.c \\n\");\n            }\n\n        }\n    }\n\n    function huffman_coder_count1(gfc, gi) {\n        /* Write count1 area */\n        var h = Tables.ht[gi.count1table_select + 32];\n        var i, bits = 0;\n\n        var ix = gi.big_values;\n        var xr = gi.big_values;\n        assert(gi.count1table_select < 2);\n\n        for (i = (gi.count1 - gi.big_values) / 4; i > 0; --i) {\n            var huffbits = 0;\n            var p = 0, v;\n\n            v = gi.l3_enc[ix + 0];\n            if (v != 0) {\n                p += 8;\n                if (gi.xr[xr + 0] < 0)\n                    huffbits++;\n                assert(v <= 1);\n            }\n\n            v = gi.l3_enc[ix + 1];\n            if (v != 0) {\n                p += 4;\n                huffbits *= 2;\n                if (gi.xr[xr + 1] < 0)\n                    huffbits++;\n                assert(v <= 1);\n            }\n\n            v = gi.l3_enc[ix + 2];\n            if (v != 0) {\n                p += 2;\n                huffbits *= 2;\n                if (gi.xr[xr + 2] < 0)\n                    huffbits++;\n                assert(v <= 1);\n            }\n\n            v = gi.l3_enc[ix + 3];\n            if (v != 0) {\n                p++;\n                huffbits *= 2;\n                if (gi.xr[xr + 3] < 0)\n                    huffbits++;\n                assert(v <= 1);\n            }\n\n            ix += 4;\n            xr += 4;\n            putbits2(gfc, huffbits + h.table[p], h.hlen[p]);\n            bits += h.hlen[p];\n        }\n        return bits;\n    }\n\n    /**\n     * Implements the pseudocode of page 98 of the IS\n     */\n    function Huffmancode(gfc, tableindex, start, end, gi) {\n        var h = Tables.ht[tableindex];\n        var bits = 0;\n\n        assert(tableindex < 32);\n        if (0 == tableindex)\n            return bits;\n\n        for (var i = start; i < end; i += 2) {\n            var cbits = 0;\n            var xbits = 0;\n            var linbits = h.xlen;\n            var xlen = h.xlen;\n            var ext = 0;\n            var x1 = gi.l3_enc[i];\n            var x2 = gi.l3_enc[i + 1];\n\n            if (x1 != 0) {\n                if (gi.xr[i] < 0)\n                    ext++;\n                cbits--;\n            }\n\n            if (tableindex > 15) {\n                /* use ESC-words */\n                if (x1 > 14) {\n                    var linbits_x1 = x1 - 15;\n                    assert(linbits_x1 <= h.linmax);\n                    ext |= linbits_x1 << 1;\n                    xbits = linbits;\n                    x1 = 15;\n                }\n\n                if (x2 > 14) {\n                    var linbits_x2 = x2 - 15;\n                    assert(linbits_x2 <= h.linmax);\n                    ext <<= linbits;\n                    ext |= linbits_x2;\n                    xbits += linbits;\n                    x2 = 15;\n                }\n                xlen = 16;\n            }\n\n            if (x2 != 0) {\n                ext <<= 1;\n                if (gi.xr[i + 1] < 0)\n                    ext++;\n                cbits--;\n            }\n\n            assert((x1 | x2) < 16);\n\n            x1 = x1 * xlen + x2;\n            xbits -= cbits;\n            cbits += h.hlen[x1];\n\n            assert(cbits <= MAX_LENGTH);\n            assert(xbits <= MAX_LENGTH);\n\n            putbits2(gfc, h.table[x1], cbits);\n            putbits2(gfc, ext, xbits);\n            bits += cbits + xbits;\n        }\n        return bits;\n    }\n\n    /**\n     * Note the discussion of huffmancodebits() on pages 28 and 29 of the IS, as\n     * well as the definitions of the side information on pages 26 and 27.\n     */\n    function ShortHuffmancodebits(gfc, gi) {\n        var region1Start = 3 * gfc.scalefac_band.s[3];\n        if (region1Start > gi.big_values)\n            region1Start = gi.big_values;\n\n        /* short blocks do not have a region2 */\n        var bits = Huffmancode(gfc, gi.table_select[0], 0, region1Start, gi);\n        bits += Huffmancode(gfc, gi.table_select[1], region1Start,\n            gi.big_values, gi);\n        return bits;\n    }\n\n    function LongHuffmancodebits(gfc, gi) {\n        var bigvalues, bits;\n        var region1Start, region2Start;\n\n        bigvalues = gi.big_values;\n        assert(0 <= bigvalues && bigvalues <= 576);\n\n        var i = gi.region0_count + 1;\n        assert(0 <= i);\n        assert(i < gfc.scalefac_band.l.length);\n        region1Start = gfc.scalefac_band.l[i];\n        i += gi.region1_count + 1;\n        assert(0 <= i);\n        assert(i < gfc.scalefac_band.l.length);\n        region2Start = gfc.scalefac_band.l[i];\n\n        if (region1Start > bigvalues)\n            region1Start = bigvalues;\n\n        if (region2Start > bigvalues)\n            region2Start = bigvalues;\n\n        bits = Huffmancode(gfc, gi.table_select[0], 0, region1Start, gi);\n        bits += Huffmancode(gfc, gi.table_select[1], region1Start,\n            region2Start, gi);\n        bits += Huffmancode(gfc, gi.table_select[2], region2Start, bigvalues,\n            gi);\n        return bits;\n    }\n\n    function writeMainData(gfp) {\n        var gr, ch, sfb, data_bits, tot_bits = 0;\n        var gfc = gfp.internal_flags;\n        var l3_side = gfc.l3_side;\n\n        if (gfp.version == 1) {\n            /* MPEG 1 */\n            for (gr = 0; gr < 2; gr++) {\n                for (ch = 0; ch < gfc.channels_out; ch++) {\n                    var gi = l3_side.tt[gr][ch];\n                    var slen1 = Takehiro.slen1_tab[gi.scalefac_compress];\n                    var slen2 = Takehiro.slen2_tab[gi.scalefac_compress];\n                    data_bits = 0;\n                    for (sfb = 0; sfb < gi.sfbdivide; sfb++) {\n                        if (gi.scalefac[sfb] == -1)\n                            continue;\n                        /* scfsi is used */\n                        putbits2(gfc, gi.scalefac[sfb], slen1);\n                        data_bits += slen1;\n                    }\n                    for (; sfb < gi.sfbmax; sfb++) {\n                        if (gi.scalefac[sfb] == -1)\n                            continue;\n                        /* scfsi is used */\n                        putbits2(gfc, gi.scalefac[sfb], slen2);\n                        data_bits += slen2;\n                    }\n                    assert(data_bits == gi.part2_length);\n\n                    if (gi.block_type == Encoder.SHORT_TYPE) {\n                        data_bits += ShortHuffmancodebits(gfc, gi);\n                    } else {\n                        data_bits += LongHuffmancodebits(gfc, gi);\n                    }\n                    data_bits += huffman_coder_count1(gfc, gi);\n                    /* does bitcount in quantize.c agree with actual bit count? */\n                    assert(data_bits == gi.part2_3_length + gi.part2_length);\n                    tot_bits += data_bits;\n                }\n                /* for ch */\n            }\n            /* for gr */\n        } else {\n            /* MPEG 2 */\n            gr = 0;\n            for (ch = 0; ch < gfc.channels_out; ch++) {\n                var gi = l3_side.tt[gr][ch];\n                var i, sfb_partition, scale_bits = 0;\n                assert(gi.sfb_partition_table != null);\n                data_bits = 0;\n                sfb = 0;\n                sfb_partition = 0;\n\n                if (gi.block_type == Encoder.SHORT_TYPE) {\n                    for (; sfb_partition < 4; sfb_partition++) {\n                        var sfbs = gi.sfb_partition_table[sfb_partition] / 3;\n                        var slen = gi.slen[sfb_partition];\n                        for (i = 0; i < sfbs; i++, sfb++) {\n                            putbits2(gfc,\n                                Math.max(gi.scalefac[sfb * 3 + 0], 0), slen);\n                            putbits2(gfc,\n                                Math.max(gi.scalefac[sfb * 3 + 1], 0), slen);\n                            putbits2(gfc,\n                                Math.max(gi.scalefac[sfb * 3 + 2], 0), slen);\n                            scale_bits += 3 * slen;\n                        }\n                    }\n                    data_bits += ShortHuffmancodebits(gfc, gi);\n                } else {\n                    for (; sfb_partition < 4; sfb_partition++) {\n                        var sfbs = gi.sfb_partition_table[sfb_partition];\n                        var slen = gi.slen[sfb_partition];\n                        for (i = 0; i < sfbs; i++, sfb++) {\n                            putbits2(gfc, Math.max(gi.scalefac[sfb], 0), slen);\n                            scale_bits += slen;\n                        }\n                    }\n                    data_bits += LongHuffmancodebits(gfc, gi);\n                }\n                data_bits += huffman_coder_count1(gfc, gi);\n                /* does bitcount in quantize.c agree with actual bit count? */\n                assert(data_bits == gi.part2_3_length);\n                assert(scale_bits == gi.part2_length);\n                tot_bits += scale_bits + data_bits;\n            }\n            /* for ch */\n        }\n        /* for gf */\n        return tot_bits;\n    }\n\n    /* main_data */\n\n    function TotalBytes() {\n        this.total = 0;\n    }\n\n    /*\n     * compute the number of bits required to flush all mp3 frames currently in\n     * the buffer. This should be the same as the reservoir size. Only call this\n     * routine between frames - i.e. only after all headers and data have been\n     * added to the buffer by format_bitstream().\n     *\n     * Also compute total_bits_output = size of mp3 buffer (including frame\n     * headers which may not have yet been send to the mp3 buffer) + number of\n     * bits needed to flush all mp3 frames.\n     *\n     * total_bytes_output is the size of the mp3 output buffer if\n     * lame_encode_flush_nogap() was called right now.\n     */\n    function compute_flushbits(gfp, total_bytes_output) {\n        var gfc = gfp.internal_flags;\n        var flushbits, remaining_headers;\n        var bitsPerFrame;\n        var last_ptr, first_ptr;\n        first_ptr = gfc.w_ptr;\n        /* first header to add to bitstream */\n        last_ptr = gfc.h_ptr - 1;\n        /* last header to add to bitstream */\n        if (last_ptr == -1)\n            last_ptr = LameInternalFlags.MAX_HEADER_BUF - 1;\n\n        /* add this many bits to bitstream so we can flush all headers */\n        flushbits = gfc.header[last_ptr].write_timing - totbit;\n        total_bytes_output.total = flushbits;\n\n        if (flushbits >= 0) {\n            /* if flushbits >= 0, some headers have not yet been written */\n            /* reduce flushbits by the size of the headers */\n            remaining_headers = 1 + last_ptr - first_ptr;\n            if (last_ptr < first_ptr)\n                remaining_headers = 1 + last_ptr - first_ptr\n                    + LameInternalFlags.MAX_HEADER_BUF;\n            flushbits -= remaining_headers * 8 * gfc.sideinfo_len;\n        }\n\n        /*\n         * finally, add some bits so that the last frame is complete these bits\n         * are not necessary to decode the last frame, but some decoders will\n         * ignore last frame if these bits are missing\n         */\n        bitsPerFrame = self.getframebits(gfp);\n        flushbits += bitsPerFrame;\n        total_bytes_output.total += bitsPerFrame;\n        /* round up: */\n        if ((total_bytes_output.total % 8) != 0)\n            total_bytes_output.total = 1 + (total_bytes_output.total / 8);\n        else\n            total_bytes_output.total = (total_bytes_output.total / 8);\n        total_bytes_output.total += bufByteIdx + 1;\n\n        if (flushbits < 0) {\n            System.err.println(\"strange error flushing buffer ... \\n\");\n        }\n        return flushbits;\n    }\n\n    this.flush_bitstream = function (gfp) {\n        var gfc = gfp.internal_flags;\n        var l3_side;\n        var flushbits;\n        var last_ptr = gfc.h_ptr - 1;\n        /* last header to add to bitstream */\n        if (last_ptr == -1)\n            last_ptr = LameInternalFlags.MAX_HEADER_BUF - 1;\n        l3_side = gfc.l3_side;\n\n        if ((flushbits = compute_flushbits(gfp, new TotalBytes())) < 0)\n            return;\n        drain_into_ancillary(gfp, flushbits);\n\n        /* check that the 100% of the last frame has been written to bitstream */\n        assert(gfc.header[last_ptr].write_timing + this.getframebits(gfp) == totbit);\n\n        /*\n         * we have padded out all frames with ancillary data, which is the same\n         * as filling the bitreservoir with ancillary data, so :\n         */\n        gfc.ResvSize = 0;\n        l3_side.main_data_begin = 0;\n\n        /* save the ReplayGain value */\n        if (gfc.findReplayGain) {\n            var RadioGain = ga.GetTitleGain(gfc.rgdata);\n            assert(NEQ(RadioGain, GainAnalysis.GAIN_NOT_ENOUGH_SAMPLES));\n            gfc.RadioGain = Math.floor(RadioGain * 10.0 + 0.5) | 0;\n            /* round to nearest */\n        }\n\n        /* find the gain and scale change required for no clipping */\n        if (gfc.findPeakSample) {\n            gfc.noclipGainChange = Math.ceil(Math\n                        .log10(gfc.PeakSample / 32767.0) * 20.0 * 10.0) | 0;\n            /* round up */\n\n            if (gfc.noclipGainChange > 0) {\n                /* clipping occurs */\n                if (EQ(gfp.scale, 1.0) || EQ(gfp.scale, 0.0))\n                    gfc.noclipScale = (Math\n                        .floor((32767.0 / gfc.PeakSample) * 100.0) / 100.0);\n                /* round down */\n                else {\n                    /*\n                     * the user specified his own scaling factor. We could\n                     * suggest the scaling factor of\n                     * (32767.0/gfp.PeakSample)*(gfp.scale) but it's usually\n                     * very inaccurate. So we'd rather not advice him on the\n                     * scaling factor.\n                     */\n                    gfc.noclipScale = -1;\n                }\n            } else\n            /* no clipping */\n                gfc.noclipScale = -1;\n        }\n    };\n\n    this.add_dummy_byte = function (gfp, val, n) {\n        var gfc = gfp.internal_flags;\n        var i;\n\n        while (n-- > 0) {\n            putbits_noheaders(gfc, val, 8);\n\n            for (i = 0; i < LameInternalFlags.MAX_HEADER_BUF; ++i)\n                gfc.header[i].write_timing += 8;\n        }\n    };\n\n    /**\n     * This is called after a frame of audio has been quantized and coded. It\n     * will write the encoded audio to the bitstream. Note that from a layer3\n     * encoder's perspective the bit stream is primarily a series of main_data()\n     * blocks, with header and side information inserted at the proper locations\n     * to maintain framing. (See Figure A.7 in the IS).\n     */\n    this.format_bitstream = function (gfp) {\n        var gfc = gfp.internal_flags;\n        var l3_side;\n        l3_side = gfc.l3_side;\n\n        var bitsPerFrame = this.getframebits(gfp);\n        drain_into_ancillary(gfp, l3_side.resvDrain_pre);\n\n        encodeSideInfo2(gfp, bitsPerFrame);\n        var bits = 8 * gfc.sideinfo_len;\n        bits += writeMainData(gfp);\n        drain_into_ancillary(gfp, l3_side.resvDrain_post);\n        bits += l3_side.resvDrain_post;\n\n        l3_side.main_data_begin += (bitsPerFrame - bits) / 8;\n\n        /*\n         * compare number of bits needed to clear all buffered mp3 frames with\n         * what we think the resvsize is:\n         */\n        if (compute_flushbits(gfp, new TotalBytes()) != gfc.ResvSize) {\n            System.err.println(\"Internal buffer inconsistency. flushbits <> ResvSize\");\n        }\n\n        /*\n         * compare main_data_begin for the next frame with what we think the\n         * resvsize is:\n         */\n        if ((l3_side.main_data_begin * 8) != gfc.ResvSize) {\n            System.err.printf(\"bit reservoir error: \\n\"\n                + \"l3_side.main_data_begin: %d \\n\"\n                + \"Resvoir size:             %d \\n\"\n                + \"resv drain (post)         %d \\n\"\n                + \"resv drain (pre)          %d \\n\"\n                + \"header and sideinfo:      %d \\n\"\n                + \"data bits:                %d \\n\"\n                + \"total bits:               %d (remainder: %d) \\n\"\n                + \"bitsperframe:             %d \\n\",\n                8 * l3_side.main_data_begin, gfc.ResvSize,\n                l3_side.resvDrain_post, l3_side.resvDrain_pre,\n                8 * gfc.sideinfo_len, bits - l3_side.resvDrain_post - 8\n                * gfc.sideinfo_len, bits, bits % 8, bitsPerFrame);\n\n            System.err.println(\"This is a fatal error.  It has several possible causes:\");\n            System.err.println(\"90%%  LAME compiled with buggy version of gcc using advanced optimizations\");\n            System.err.println(\" 9%%  Your system is overclocked\");\n            System.err.println(\" 1%%  bug in LAME encoding library\");\n\n            gfc.ResvSize = l3_side.main_data_begin * 8;\n        }\n        //;\n        assert(totbit % 8 == 0);\n\n        if (totbit > 1000000000) {\n            /*\n             * to avoid totbit overflow, (at 8h encoding at 128kbs) lets reset\n             * bit counter\n             */\n            var i;\n            for (i = 0; i < LameInternalFlags.MAX_HEADER_BUF; ++i)\n                gfc.header[i].write_timing -= totbit;\n            totbit = 0;\n        }\n\n        return 0;\n    };\n\n    /**\n     * <PRE>\n     * copy data out of the internal MP3 bit buffer into a user supplied\n     *       unsigned char buffer.\n     *\n     *       mp3data=0      indicates data in buffer is an id3tags and VBR tags\n     *       mp3data=1      data is real mp3 frame data.\n     * </PRE>\n     */\n    this.copy_buffer = function (gfc, buffer, bufferPos, size, mp3data) {\n        var minimum = bufByteIdx + 1;\n        if (minimum <= 0)\n            return 0;\n        if (size != 0 && minimum > size) {\n            /* buffer is too small */\n            return -1;\n        }\n        System.arraycopy(buf, 0, buffer, bufferPos, minimum);\n        bufByteIdx = -1;\n        bufBitIdx = 0;\n\n        if (mp3data != 0) {\n            var crc = new_int(1);\n            crc[0] = gfc.nMusicCRC;\n            vbr.updateMusicCRC(crc, buffer, bufferPos, minimum);\n            gfc.nMusicCRC = crc[0];\n\n            /**\n             * sum number of bytes belonging to the mp3 stream this info will be\n             * written into the Xing/LAME header for seeking\n             */\n            if (minimum > 0) {\n                gfc.VBR_seek_table.nBytesWritten += minimum;\n            }\n\n            if (gfc.decode_on_the_fly) { /* decode the frame */\n                var pcm_buf = new_float_n([2, 1152]);\n                var mp3_in = minimum;\n                var samples_out = -1;\n                var i;\n\n                /* re-synthesis to pcm. Repeat until we get a samples_out=0 */\n                while (samples_out != 0) {\n\n                    samples_out = mpg.hip_decode1_unclipped(gfc.hip, buffer,\n                        bufferPos, mp3_in, pcm_buf[0], pcm_buf[1]);\n                    /*\n                     * samples_out = 0: need more data to decode samples_out =\n                     * -1: error. Lets assume 0 pcm output samples_out = number\n                     * of samples output\n                     */\n\n                    /*\n                     * set the lenght of the mp3 input buffer to zero, so that\n                     * in the next iteration of the loop we will be querying\n                     * mpglib about buffered data\n                     */\n                    mp3_in = 0;\n\n                    if (samples_out == -1) {\n                        /*\n                         * error decoding. Not fatal, but might screw up the\n                         * ReplayGain tag. What should we do? Ignore for now\n                         */\n                        samples_out = 0;\n                    }\n                    if (samples_out > 0) {\n                        /* process the PCM data */\n\n                        /*\n                         * this should not be possible, and indicates we have\n                         * overflown the pcm_buf buffer\n                         */\n                        assert(samples_out <= 1152);\n\n                        if (gfc.findPeakSample) {\n                            for (i = 0; i < samples_out; i++) {\n                                if (pcm_buf[0][i] > gfc.PeakSample)\n                                    gfc.PeakSample = pcm_buf[0][i];\n                                else if (-pcm_buf[0][i] > gfc.PeakSample)\n                                    gfc.PeakSample = -pcm_buf[0][i];\n                            }\n                            if (gfc.channels_out > 1)\n                                for (i = 0; i < samples_out; i++) {\n                                    if (pcm_buf[1][i] > gfc.PeakSample)\n                                        gfc.PeakSample = pcm_buf[1][i];\n                                    else if (-pcm_buf[1][i] > gfc.PeakSample)\n                                        gfc.PeakSample = -pcm_buf[1][i];\n                                }\n                        }\n\n                        if (gfc.findReplayGain)\n                            if (ga.AnalyzeSamples(gfc.rgdata, pcm_buf[0], 0,\n                                    pcm_buf[1], 0, samples_out,\n                                    gfc.channels_out) == GainAnalysis.GAIN_ANALYSIS_ERROR)\n                                return -6;\n\n                    }\n                    /* if (samples_out>0) */\n                }\n                /* while (samples_out!=0) */\n            }\n            /* if (gfc.decode_on_the_fly) */\n\n        }\n        /* if (mp3data) */\n        return minimum;\n    };\n\n    this.init_bit_stream_w = function (gfc) {\n        buf = new_byte(Lame.LAME_MAXMP3BUFFER);\n\n        gfc.h_ptr = gfc.w_ptr = 0;\n        gfc.header[gfc.h_ptr].write_timing = 0;\n        bufByteIdx = -1;\n        bufBitIdx = 0;\n        totbit = 0;\n    };\n\n    // From machine.h\n\n\n}\n\nmodule.exports = BitStream;\n","var common = require('./common.js');\nvar System = common.System;\nvar VbrMode = common.VbrMode;\nvar Float = common.Float;\nvar ShortBlock = common.ShortBlock;\nvar Util = common.Util;\nvar Arrays = common.Arrays;\nvar new_array_n = common.new_array_n;\nvar new_byte = common.new_byte;\nvar new_double = common.new_double;\nvar new_float = common.new_float;\nvar new_float_n = common.new_float_n;\nvar new_int = common.new_int;\nvar new_int_n = common.new_int_n;\nvar new_short_n = common.new_short_n;\nvar assert = common.assert;\n\nvar PsyModel = require('./PsyModel.js');\nvar LameGlobalFlags = require('./LameGlobalFlags.js');\nvar LameInternalFlags = require('./LameInternalFlags.js');\nvar ATH = require('./ATH.js');\nvar ReplayGain = require('./ReplayGain.js');\nvar CBRNewIterationLoop = require('./CBRNewIterationLoop.js');\nvar BitStream = require('./BitStream.js');\nvar Tables = require('./Tables.js');\nvar Encoder = require('./Encoder.js');\n\nfunction Lame() {\n    var self = this;\n    var LAME_MAXALBUMART = (128 * 1024);\n\n    Lame.V9 = 410;\n    Lame.V8 = 420;\n    Lame.V7 = 430;\n    Lame.V6 = 440;\n    Lame.V5 = 450;\n    Lame.V4 = 460;\n    Lame.V3 = 470;\n    Lame.V2 = 480;\n    Lame.V1 = 490;\n    Lame.V0 = 500;\n\n    /* still there for compatibility */\n\n    Lame.R3MIX = 1000;\n    Lame.STANDARD = 1001;\n    Lame.EXTREME = 1002;\n    Lame.INSANE = 1003;\n    Lame.STANDARD_FAST = 1004;\n    Lame.EXTREME_FAST = 1005;\n    Lame.MEDIUM = 1006;\n    Lame.MEDIUM_FAST = 1007;\n\n    /**\n     * maximum size of mp3buffer needed if you encode at most 1152 samples for\n     * each call to lame_encode_buffer. see lame_encode_buffer() below\n     * (LAME_MAXMP3BUFFER is now obsolete)\n     */\n    var LAME_MAXMP3BUFFER = (16384 + LAME_MAXALBUMART);\n    Lame.LAME_MAXMP3BUFFER = LAME_MAXMP3BUFFER;\n\n    var ga;\n    var bs;\n    var p;\n    var qupvt;\n    var qu;\n    var psy = new PsyModel();\n    var vbr;\n    var ver;\n    var id3;\n    var mpglib;\n    this.enc = new Encoder();\n\n    this.setModules = function (_ga, _bs, _p, _qupvt, _qu, _vbr, _ver, _id3, _mpglib) {\n        ga = _ga;\n        bs = _bs;\n        p = _p;\n        qupvt = _qupvt;\n        qu = _qu;\n        vbr = _vbr;\n        ver = _ver;\n        id3 = _id3;\n        mpglib = _mpglib;\n        this.enc.setModules(bs, psy, qupvt, vbr);\n    }\n\n    /**\n     * PSY Model related stuff\n     */\n    function PSY() {\n        /**\n         * The dbQ stuff.\n         */\n        this.mask_adjust = 0.;\n        /**\n         * The dbQ stuff.\n         */\n        this.mask_adjust_short = 0.;\n        /* at transition from one scalefactor band to next */\n        /**\n         * Band weight long scalefactor bands.\n         */\n        this.bo_l_weight = new_float(Encoder.SBMAX_l);\n        /**\n         * Band weight short scalefactor bands.\n         */\n        this.bo_s_weight = new_float(Encoder.SBMAX_s);\n    }\n\n    function LowPassHighPass() {\n        this.lowerlimit = 0.;\n    }\n\n    function BandPass(bitrate, lPass) {\n        this.lowpass = lPass;\n    }\n\n    var LAME_ID = 0xFFF88E3B;\n\n    function lame_init_old(gfp) {\n        var gfc;\n\n        gfp.class_id = LAME_ID;\n\n        gfc = gfp.internal_flags = new LameInternalFlags();\n\n        /* Global flags. set defaults here for non-zero values */\n        /* see lame.h for description */\n        /*\n         * set integer values to -1 to mean that LAME will compute the best\n         * value, UNLESS the calling program as set it (and the value is no\n         * longer -1)\n         */\n\n        gfp.mode = MPEGMode.NOT_SET;\n        gfp.original = 1;\n        gfp.in_samplerate = 44100;\n        gfp.num_channels = 2;\n        gfp.num_samples = -1;\n\n        gfp.bWriteVbrTag = true;\n        gfp.quality = -1;\n        gfp.short_blocks = null;\n        gfc.subblock_gain = -1;\n\n        gfp.lowpassfreq = 0;\n        gfp.highpassfreq = 0;\n        gfp.lowpasswidth = -1;\n        gfp.highpasswidth = -1;\n\n        gfp.VBR = VbrMode.vbr_off;\n        gfp.VBR_q = 4;\n        gfp.ATHcurve = -1;\n        gfp.VBR_mean_bitrate_kbps = 128;\n        gfp.VBR_min_bitrate_kbps = 0;\n        gfp.VBR_max_bitrate_kbps = 0;\n        gfp.VBR_hard_min = 0;\n        gfc.VBR_min_bitrate = 1;\n        /* not 0 ????? */\n        gfc.VBR_max_bitrate = 13;\n        /* not 14 ????? */\n\n        gfp.quant_comp = -1;\n        gfp.quant_comp_short = -1;\n\n        gfp.msfix = -1;\n\n        gfc.resample_ratio = 1;\n\n        gfc.OldValue[0] = 180;\n        gfc.OldValue[1] = 180;\n        gfc.CurrentStep[0] = 4;\n        gfc.CurrentStep[1] = 4;\n        gfc.masking_lower = 1;\n        gfc.nsPsy.attackthre = -1;\n        gfc.nsPsy.attackthre_s = -1;\n\n        gfp.scale = -1;\n\n        gfp.athaa_type = -1;\n        gfp.ATHtype = -1;\n        /* default = -1 = set in lame_init_params */\n        gfp.athaa_loudapprox = -1;\n        /* 1 = flat loudness approx. (total energy) */\n        /* 2 = equal loudness curve */\n        gfp.athaa_sensitivity = 0.0;\n        /* no offset */\n        gfp.useTemporal = null;\n        gfp.interChRatio = -1;\n\n        /*\n         * The reason for int mf_samples_to_encode = ENCDELAY + POSTDELAY;\n         * ENCDELAY = internal encoder delay. And then we have to add\n         * POSTDELAY=288 because of the 50% MDCT overlap. A 576 MDCT granule\n         * decodes to 1152 samples. To synthesize the 576 samples centered under\n         * this granule we need the previous granule for the first 288 samples\n         * (no problem), and the next granule for the next 288 samples (not\n         * possible if this is last granule). So we need to pad with 288 samples\n         * to make sure we can encode the 576 samples we are interested in.\n         */\n        gfc.mf_samples_to_encode = Encoder.ENCDELAY + Encoder.POSTDELAY;\n        gfp.encoder_padding = 0;\n        gfc.mf_size = Encoder.ENCDELAY - Encoder.MDCTDELAY;\n        /*\n         * we pad input with this many 0's\n         */\n\n        gfp.findReplayGain = false;\n        gfp.decode_on_the_fly = false;\n\n        gfc.decode_on_the_fly = false;\n        gfc.findReplayGain = false;\n        gfc.findPeakSample = false;\n\n        gfc.RadioGain = 0;\n        gfc.AudiophileGain = 0;\n        gfc.noclipGainChange = 0;\n        gfc.noclipScale = -1.0;\n\n        gfp.preset = 0;\n\n        gfp.write_id3tag_automatic = true;\n        return 0;\n    }\n\n    this.lame_init = function () {\n        var gfp = new LameGlobalFlags();\n\n        var ret = lame_init_old(gfp);\n        if (ret != 0) {\n            return null;\n        }\n\n        gfp.lame_allocated_gfp = 1;\n        return gfp;\n    }\n\n    function filter_coef(x) {\n        if (x > 1.0)\n            return 0.0;\n        if (x <= 0.0)\n            return 1.0;\n\n        return Math.cos(Math.PI / 2 * x);\n    }\n\n    this.nearestBitrateFullIndex = function (bitrate) {\n        /* borrowed from DM abr presets */\n\n        var full_bitrate_table = [8, 16, 24, 32, 40, 48, 56, 64, 80,\n            96, 112, 128, 160, 192, 224, 256, 320];\n\n        var lower_range = 0, lower_range_kbps = 0, upper_range = 0, upper_range_kbps = 0;\n\n        /* We assume specified bitrate will be 320kbps */\n        upper_range_kbps = full_bitrate_table[16];\n        upper_range = 16;\n        lower_range_kbps = full_bitrate_table[16];\n        lower_range = 16;\n\n        /*\n         * Determine which significant bitrates the value specified falls\n         * between, if loop ends without breaking then we were correct above\n         * that the value was 320\n         */\n        for (var b = 0; b < 16; b++) {\n            if ((Math.max(bitrate, full_bitrate_table[b + 1])) != bitrate) {\n                upper_range_kbps = full_bitrate_table[b + 1];\n                upper_range = b + 1;\n                lower_range_kbps = full_bitrate_table[b];\n                lower_range = (b);\n                break;\n                /* We found upper range */\n            }\n        }\n\n        /* Determine which range the value specified is closer to */\n        if ((upper_range_kbps - bitrate) > (bitrate - lower_range_kbps)) {\n            return lower_range;\n        }\n        return upper_range;\n    }\n\n    function optimum_samplefreq(lowpassfreq, input_samplefreq) {\n        /*\n         * Rules:\n         *\n         * - if possible, sfb21 should NOT be used\n         */\n        var suggested_samplefreq = 44100;\n\n        if (input_samplefreq >= 48000)\n            suggested_samplefreq = 48000;\n        else if (input_samplefreq >= 44100)\n            suggested_samplefreq = 44100;\n        else if (input_samplefreq >= 32000)\n            suggested_samplefreq = 32000;\n        else if (input_samplefreq >= 24000)\n            suggested_samplefreq = 24000;\n        else if (input_samplefreq >= 22050)\n            suggested_samplefreq = 22050;\n        else if (input_samplefreq >= 16000)\n            suggested_samplefreq = 16000;\n        else if (input_samplefreq >= 12000)\n            suggested_samplefreq = 12000;\n        else if (input_samplefreq >= 11025)\n            suggested_samplefreq = 11025;\n        else if (input_samplefreq >= 8000)\n            suggested_samplefreq = 8000;\n\n        if (lowpassfreq == -1)\n            return suggested_samplefreq;\n\n        if (lowpassfreq <= 15960)\n            suggested_samplefreq = 44100;\n        if (lowpassfreq <= 15250)\n            suggested_samplefreq = 32000;\n        if (lowpassfreq <= 11220)\n            suggested_samplefreq = 24000;\n        if (lowpassfreq <= 9970)\n            suggested_samplefreq = 22050;\n        if (lowpassfreq <= 7230)\n            suggested_samplefreq = 16000;\n        if (lowpassfreq <= 5420)\n            suggested_samplefreq = 12000;\n        if (lowpassfreq <= 4510)\n            suggested_samplefreq = 11025;\n        if (lowpassfreq <= 3970)\n            suggested_samplefreq = 8000;\n\n        if (input_samplefreq < suggested_samplefreq) {\n            /*\n             * choose a valid MPEG sample frequency above the input sample\n             * frequency to avoid SFB21/12 bitrate bloat rh 061115\n             */\n            if (input_samplefreq > 44100) {\n                return 48000;\n            }\n            if (input_samplefreq > 32000) {\n                return 44100;\n            }\n            if (input_samplefreq > 24000) {\n                return 32000;\n            }\n            if (input_samplefreq > 22050) {\n                return 24000;\n            }\n            if (input_samplefreq > 16000) {\n                return 22050;\n            }\n            if (input_samplefreq > 12000) {\n                return 16000;\n            }\n            if (input_samplefreq > 11025) {\n                return 12000;\n            }\n            if (input_samplefreq > 8000) {\n                return 11025;\n            }\n            return 8000;\n        }\n        return suggested_samplefreq;\n    }\n\n    /**\n     * convert samp freq in Hz to index\n     */\n    function SmpFrqIndex(sample_freq, gpf) {\n        switch (sample_freq) {\n            case 44100:\n                gpf.version = 1;\n                return 0;\n            case 48000:\n                gpf.version = 1;\n                return 1;\n            case 32000:\n                gpf.version = 1;\n                return 2;\n            case 22050:\n                gpf.version = 0;\n                return 0;\n            case 24000:\n                gpf.version = 0;\n                return 1;\n            case 16000:\n                gpf.version = 0;\n                return 2;\n            case 11025:\n                gpf.version = 0;\n                return 0;\n            case 12000:\n                gpf.version = 0;\n                return 1;\n            case 8000:\n                gpf.version = 0;\n                return 2;\n            default:\n                gpf.version = 0;\n                return -1;\n        }\n    }\n\n    /**\n     * @param bRate\n     *            legal rates from 8 to 320\n     */\n    function FindNearestBitrate(bRate, version, samplerate) {\n        /* MPEG-1 or MPEG-2 LSF */\n        if (samplerate < 16000)\n            version = 2;\n\n        var bitrate = Tables.bitrate_table[version][1];\n\n        for (var i = 2; i <= 14; i++) {\n            if (Tables.bitrate_table[version][i] > 0) {\n                if (Math.abs(Tables.bitrate_table[version][i] - bRate) < Math\n                        .abs(bitrate - bRate))\n                    bitrate = Tables.bitrate_table[version][i];\n            }\n        }\n        return bitrate;\n    }\n\n    /**\n     * @param bRate\n     *            legal rates from 32 to 448 kbps\n     * @param version\n     *            MPEG-1 or MPEG-2/2.5 LSF\n     */\n    function BitrateIndex(bRate, version, samplerate) {\n        /* convert bitrate in kbps to index */\n        if (samplerate < 16000)\n            version = 2;\n        for (var i = 0; i <= 14; i++) {\n            if (Tables.bitrate_table[version][i] > 0) {\n                if (Tables.bitrate_table[version][i] == bRate) {\n                    return i;\n                }\n            }\n        }\n        return -1;\n    }\n\n    function optimum_bandwidth(lh, bitrate) {\n        /**\n         * <PRE>\n         *  Input:\n         *      bitrate     total bitrate in kbps\n         *\n         *   Output:\n         *      lowerlimit: best lowpass frequency limit for input filter in Hz\n         *      upperlimit: best highpass frequency limit for input filter in Hz\n         * </PRE>\n         */\n        var freq_map = [new BandPass(8, 2000),\n            new BandPass(16, 3700), new BandPass(24, 3900),\n            new BandPass(32, 5500), new BandPass(40, 7000),\n            new BandPass(48, 7500), new BandPass(56, 10000),\n            new BandPass(64, 11000), new BandPass(80, 13500),\n            new BandPass(96, 15100), new BandPass(112, 15600),\n            new BandPass(128, 17000), new BandPass(160, 17500),\n            new BandPass(192, 18600), new BandPass(224, 19400),\n            new BandPass(256, 19700), new BandPass(320, 20500)];\n\n        var table_index = self.nearestBitrateFullIndex(bitrate);\n        lh.lowerlimit = freq_map[table_index].lowpass;\n    }\n\n    function lame_init_params_ppflt(gfp) {\n        var gfc = gfp.internal_flags;\n        /***************************************************************/\n        /* compute info needed for polyphase filter (filter type==0, default) */\n        /***************************************************************/\n\n        var lowpass_band = 32;\n        var highpass_band = -1;\n\n        if (gfc.lowpass1 > 0) {\n            var minband = 999;\n            for (var band = 0; band <= 31; band++) {\n                var freq = (band / 31.0);\n                /* this band and above will be zeroed: */\n                if (freq >= gfc.lowpass2) {\n                    lowpass_band = Math.min(lowpass_band, band);\n                }\n                if (gfc.lowpass1 < freq && freq < gfc.lowpass2) {\n                    minband = Math.min(minband, band);\n                }\n            }\n\n            /*\n             * compute the *actual* transition band implemented by the polyphase\n             * filter\n             */\n            if (minband == 999) {\n                gfc.lowpass1 = (lowpass_band - .75) / 31.0;\n            } else {\n                gfc.lowpass1 = (minband - .75) / 31.0;\n            }\n            gfc.lowpass2 = lowpass_band / 31.0;\n        }\n\n        /*\n         * make sure highpass filter is within 90% of what the effective\n         * highpass frequency will be\n         */\n        if (gfc.highpass2 > 0) {\n            if (gfc.highpass2 < .9 * (.75 / 31.0)) {\n                gfc.highpass1 = 0;\n                gfc.highpass2 = 0;\n                System.err.println(\"Warning: highpass filter disabled.  \"\n                    + \"highpass frequency too small\\n\");\n            }\n        }\n\n        if (gfc.highpass2 > 0) {\n            var maxband = -1;\n            for (var band = 0; band <= 31; band++) {\n                var freq = band / 31.0;\n                /* this band and below will be zereod */\n                if (freq <= gfc.highpass1) {\n                    highpass_band = Math.max(highpass_band, band);\n                }\n                if (gfc.highpass1 < freq && freq < gfc.highpass2) {\n                    maxband = Math.max(maxband, band);\n                }\n            }\n            /*\n             * compute the *actual* transition band implemented by the polyphase\n             * filter\n             */\n            gfc.highpass1 = highpass_band / 31.0;\n            if (maxband == -1) {\n                gfc.highpass2 = (highpass_band + .75) / 31.0;\n            } else {\n                gfc.highpass2 = (maxband + .75) / 31.0;\n            }\n        }\n\n        for (var band = 0; band < 32; band++) {\n            var fc1, fc2;\n            var freq = band / 31.0;\n            if (gfc.highpass2 > gfc.highpass1) {\n                fc1 = filter_coef((gfc.highpass2 - freq)\n                    / (gfc.highpass2 - gfc.highpass1 + 1e-20));\n            } else {\n                fc1 = 1.0;\n            }\n            if (gfc.lowpass2 > gfc.lowpass1) {\n                fc2 = filter_coef((freq - gfc.lowpass1)\n                    / (gfc.lowpass2 - gfc.lowpass1 + 1e-20));\n            } else {\n                fc2 = 1.0;\n            }\n            gfc.amp_filter[band] = (fc1 * fc2);\n        }\n    }\n\n    function lame_init_qval(gfp) {\n        var gfc = gfp.internal_flags;\n\n        switch (gfp.quality) {\n            default:\n            case 9: /* no psymodel, no noise shaping */\n                gfc.psymodel = 0;\n                gfc.noise_shaping = 0;\n                gfc.noise_shaping_amp = 0;\n                gfc.noise_shaping_stop = 0;\n                gfc.use_best_huffman = 0;\n                gfc.full_outer_loop = 0;\n                break;\n\n            case 8:\n                gfp.quality = 7;\n            //$FALL-THROUGH$\n            case 7:\n                /*\n                 * use psymodel (for short block and m/s switching), but no noise\n                 * shapping\n                 */\n                gfc.psymodel = 1;\n                gfc.noise_shaping = 0;\n                gfc.noise_shaping_amp = 0;\n                gfc.noise_shaping_stop = 0;\n                gfc.use_best_huffman = 0;\n                gfc.full_outer_loop = 0;\n                break;\n\n            case 6:\n                gfc.psymodel = 1;\n                if (gfc.noise_shaping == 0)\n                    gfc.noise_shaping = 1;\n                gfc.noise_shaping_amp = 0;\n                gfc.noise_shaping_stop = 0;\n                if (gfc.subblock_gain == -1)\n                    gfc.subblock_gain = 1;\n                gfc.use_best_huffman = 0;\n                gfc.full_outer_loop = 0;\n                break;\n\n            case 5:\n                gfc.psymodel = 1;\n                if (gfc.noise_shaping == 0)\n                    gfc.noise_shaping = 1;\n                gfc.noise_shaping_amp = 0;\n                gfc.noise_shaping_stop = 0;\n                if (gfc.subblock_gain == -1)\n                    gfc.subblock_gain = 1;\n                gfc.use_best_huffman = 0;\n                gfc.full_outer_loop = 0;\n                break;\n\n            case 4:\n                gfc.psymodel = 1;\n                if (gfc.noise_shaping == 0)\n                    gfc.noise_shaping = 1;\n                gfc.noise_shaping_amp = 0;\n                gfc.noise_shaping_stop = 0;\n                if (gfc.subblock_gain == -1)\n                    gfc.subblock_gain = 1;\n                gfc.use_best_huffman = 1;\n                gfc.full_outer_loop = 0;\n                break;\n\n            case 3:\n                gfc.psymodel = 1;\n                if (gfc.noise_shaping == 0)\n                    gfc.noise_shaping = 1;\n                gfc.noise_shaping_amp = 1;\n                gfc.noise_shaping_stop = 1;\n                if (gfc.subblock_gain == -1)\n                    gfc.subblock_gain = 1;\n                gfc.use_best_huffman = 1;\n                gfc.full_outer_loop = 0;\n                break;\n\n            case 2:\n                gfc.psymodel = 1;\n                if (gfc.noise_shaping == 0)\n                    gfc.noise_shaping = 1;\n                if (gfc.substep_shaping == 0)\n                    gfc.substep_shaping = 2;\n                gfc.noise_shaping_amp = 1;\n                gfc.noise_shaping_stop = 1;\n                if (gfc.subblock_gain == -1)\n                    gfc.subblock_gain = 1;\n                gfc.use_best_huffman = 1;\n                /* inner loop */\n                gfc.full_outer_loop = 0;\n                break;\n\n            case 1:\n                gfc.psymodel = 1;\n                if (gfc.noise_shaping == 0)\n                    gfc.noise_shaping = 1;\n                if (gfc.substep_shaping == 0)\n                    gfc.substep_shaping = 2;\n                gfc.noise_shaping_amp = 2;\n                gfc.noise_shaping_stop = 1;\n                if (gfc.subblock_gain == -1)\n                    gfc.subblock_gain = 1;\n                gfc.use_best_huffman = 1;\n                gfc.full_outer_loop = 0;\n                break;\n\n            case 0:\n                gfc.psymodel = 1;\n                if (gfc.noise_shaping == 0)\n                    gfc.noise_shaping = 1;\n                if (gfc.substep_shaping == 0)\n                    gfc.substep_shaping = 2;\n                gfc.noise_shaping_amp = 2;\n                gfc.noise_shaping_stop = 1;\n                if (gfc.subblock_gain == -1)\n                    gfc.subblock_gain = 1;\n                gfc.use_best_huffman = 1;\n                /*\n                 * type 2 disabled because of it slowness, in favor of full outer\n                 * loop search\n                 */\n                gfc.full_outer_loop = 0;\n                /*\n                 * full outer loop search disabled because of audible distortions it\n                 * may generate rh 060629\n                 */\n                break;\n        }\n\n    }\n\n    function lame_init_bitstream(gfp) {\n        var gfc = gfp.internal_flags;\n        gfp.frameNum = 0;\n\n        if (gfp.write_id3tag_automatic) {\n            id3.id3tag_write_v2(gfp);\n        }\n        /* initialize histogram data optionally used by frontend */\n\n        gfc.bitrate_stereoMode_Hist = new_int_n([16, 4 + 1]);\n        gfc.bitrate_blockType_Hist = new_int_n([16, 4 + 1 + 1]);\n\n        gfc.PeakSample = 0.0;\n\n        /* Write initial VBR Header to bitstream and init VBR data */\n        if (gfp.bWriteVbrTag)\n            vbr.InitVbrTag(gfp);\n    }\n\n    /********************************************************************\n     * initialize internal params based on data in gf (globalflags struct filled\n     * in by calling program)\n     *\n     * OUTLINE:\n     *\n     * We first have some complex code to determine bitrate, output samplerate\n     * and mode. It is complicated by the fact that we allow the user to set\n     * some or all of these parameters, and need to determine best possible\n     * values for the rest of them:\n     *\n     * 1. set some CPU related flags 2. check if we are mono.mono, stereo.mono\n     * or stereo.stereo 3. compute bitrate and output samplerate: user may have\n     * set compression ratio user may have set a bitrate user may have set a\n     * output samplerate 4. set some options which depend on output samplerate\n     * 5. compute the actual compression ratio 6. set mode based on compression\n     * ratio\n     *\n     * The remaining code is much simpler - it just sets options based on the\n     * mode & compression ratio:\n     *\n     * set allow_diff_short based on mode select lowpass filter based on\n     * compression ratio & mode set the bitrate index, and min/max bitrates for\n     * VBR modes disable VBR tag if it is not appropriate initialize the\n     * bitstream initialize scalefac_band data set sideinfo_len (based on\n     * channels, CRC, out_samplerate) write an id3v2 tag into the bitstream\n     * write VBR tag into the bitstream set mpeg1/2 flag estimate the number of\n     * frames (based on a lot of data)\n     *\n     * now we set more flags: nspsytune: see code VBR modes see code CBR/ABR see\n     * code\n     *\n     * Finally, we set the algorithm flags based on the gfp.quality value\n     * lame_init_qval(gfp);\n     *\n     ********************************************************************/\n    this.lame_init_params = function (gfp) {\n        var gfc = gfp.internal_flags;\n\n        gfc.Class_ID = 0;\n        if (gfc.ATH == null)\n            gfc.ATH = new ATH();\n        if (gfc.PSY == null)\n            gfc.PSY = new PSY();\n        if (gfc.rgdata == null)\n            gfc.rgdata = new ReplayGain();\n\n        gfc.channels_in = gfp.num_channels;\n        if (gfc.channels_in == 1)\n            gfp.mode = MPEGMode.MONO;\n        gfc.channels_out = (gfp.mode == MPEGMode.MONO) ? 1 : 2;\n        gfc.mode_ext = Encoder.MPG_MD_MS_LR;\n        if (gfp.mode == MPEGMode.MONO)\n            gfp.force_ms = false;\n        /*\n         * don't allow forced mid/side stereo for mono output\n         */\n\n        if (gfp.VBR == VbrMode.vbr_off && gfp.VBR_mean_bitrate_kbps != 128\n            && gfp.brate == 0)\n            gfp.brate = gfp.VBR_mean_bitrate_kbps;\n\n        if (gfp.VBR == VbrMode.vbr_off || gfp.VBR == VbrMode.vbr_mtrh\n            || gfp.VBR == VbrMode.vbr_mt) {\n            /* these modes can handle free format condition */\n        } else {\n            gfp.free_format = false;\n            /* mode can't be mixed with free format */\n        }\n\n        if (gfp.VBR == VbrMode.vbr_off && gfp.brate == 0) {\n            /* no bitrate or compression ratio specified, use 11.025 */\n            if (BitStream.EQ(gfp.compression_ratio, 0))\n                gfp.compression_ratio = 11.025;\n            /*\n             * rate to compress a CD down to exactly 128000 bps\n             */\n        }\n\n        /* find bitrate if user specify a compression ratio */\n        if (gfp.VBR == VbrMode.vbr_off && gfp.compression_ratio > 0) {\n\n            if (gfp.out_samplerate == 0)\n                gfp.out_samplerate = map2MP3Frequency((int)(0.97 * gfp.in_samplerate));\n            /*\n             * round up with a margin of 3 %\n             */\n\n            /*\n             * choose a bitrate for the output samplerate which achieves\n             * specified compression ratio\n             */\n            gfp.brate = 0 | (gfp.out_samplerate * 16 * gfc.channels_out / (1.e3 * gfp.compression_ratio));\n\n            /* we need the version for the bitrate table look up */\n            gfc.samplerate_index = SmpFrqIndex(gfp.out_samplerate, gfp);\n\n            if (!gfp.free_format) /*\n             * for non Free Format find the nearest allowed\n             * bitrate\n             */\n                gfp.brate = FindNearestBitrate(gfp.brate, gfp.version,\n                    gfp.out_samplerate);\n        }\n\n        if (gfp.out_samplerate != 0) {\n            if (gfp.out_samplerate < 16000) {\n                gfp.VBR_mean_bitrate_kbps = Math.max(gfp.VBR_mean_bitrate_kbps,\n                    8);\n                gfp.VBR_mean_bitrate_kbps = Math.min(gfp.VBR_mean_bitrate_kbps,\n                    64);\n            } else if (gfp.out_samplerate < 32000) {\n                gfp.VBR_mean_bitrate_kbps = Math.max(gfp.VBR_mean_bitrate_kbps,\n                    8);\n                gfp.VBR_mean_bitrate_kbps = Math.min(gfp.VBR_mean_bitrate_kbps,\n                    160);\n            } else {\n                gfp.VBR_mean_bitrate_kbps = Math.max(gfp.VBR_mean_bitrate_kbps,\n                    32);\n                gfp.VBR_mean_bitrate_kbps = Math.min(gfp.VBR_mean_bitrate_kbps,\n                    320);\n            }\n        }\n\n        /****************************************************************/\n        /* if a filter has not been enabled, see if we should add one: */\n        /****************************************************************/\n        if (gfp.lowpassfreq == 0) {\n            var lowpass = 16000.;\n\n            switch (gfp.VBR) {\n                case VbrMode.vbr_off:\n                {\n                    var lh = new LowPassHighPass();\n                    optimum_bandwidth(lh, gfp.brate);\n                    lowpass = lh.lowerlimit;\n                    break;\n                }\n                case VbrMode.vbr_abr:\n                {\n                    var lh = new LowPassHighPass();\n                    optimum_bandwidth(lh, gfp.VBR_mean_bitrate_kbps);\n                    lowpass = lh.lowerlimit;\n                    break;\n                }\n                case VbrMode.vbr_rh:\n                {\n                    var x = [19500, 19000, 18600, 18000, 17500, 16000,\n                        15600, 14900, 12500, 10000, 3950];\n                    if (0 <= gfp.VBR_q && gfp.VBR_q <= 9) {\n                        var a = x[gfp.VBR_q], b = x[gfp.VBR_q + 1], m = gfp.VBR_q_frac;\n                        lowpass = linear_int(a, b, m);\n                    } else {\n                        lowpass = 19500;\n                    }\n                    break;\n                }\n                default:\n                {\n                    var x = [19500, 19000, 18500, 18000, 17500, 16500,\n                        15500, 14500, 12500, 9500, 3950];\n                    if (0 <= gfp.VBR_q && gfp.VBR_q <= 9) {\n                        var a = x[gfp.VBR_q], b = x[gfp.VBR_q + 1], m = gfp.VBR_q_frac;\n                        lowpass = linear_int(a, b, m);\n                    } else {\n                        lowpass = 19500;\n                    }\n                }\n            }\n            if (gfp.mode == MPEGMode.MONO\n                && (gfp.VBR == VbrMode.vbr_off || gfp.VBR == VbrMode.vbr_abr))\n                lowpass *= 1.5;\n\n            gfp.lowpassfreq = lowpass | 0;\n        }\n\n        if (gfp.out_samplerate == 0) {\n            if (2 * gfp.lowpassfreq > gfp.in_samplerate) {\n                gfp.lowpassfreq = gfp.in_samplerate / 2;\n            }\n            gfp.out_samplerate = optimum_samplefreq(gfp.lowpassfreq | 0,\n                gfp.in_samplerate);\n        }\n\n        gfp.lowpassfreq = Math.min(20500, gfp.lowpassfreq);\n        gfp.lowpassfreq = Math.min(gfp.out_samplerate / 2, gfp.lowpassfreq);\n\n        if (gfp.VBR == VbrMode.vbr_off) {\n            gfp.compression_ratio = gfp.out_samplerate * 16 * gfc.channels_out\n                / (1.e3 * gfp.brate);\n        }\n        if (gfp.VBR == VbrMode.vbr_abr) {\n            gfp.compression_ratio = gfp.out_samplerate * 16 * gfc.channels_out\n                / (1.e3 * gfp.VBR_mean_bitrate_kbps);\n        }\n\n        /*\n         * do not compute ReplayGain values and do not find the peak sample if\n         * we can't store them\n         */\n        if (!gfp.bWriteVbrTag) {\n            gfp.findReplayGain = false;\n            gfp.decode_on_the_fly = false;\n            gfc.findPeakSample = false;\n        }\n        gfc.findReplayGain = gfp.findReplayGain;\n        gfc.decode_on_the_fly = gfp.decode_on_the_fly;\n\n        if (gfc.decode_on_the_fly)\n            gfc.findPeakSample = true;\n\n        if (gfc.findReplayGain) {\n            if (ga.InitGainAnalysis(gfc.rgdata, gfp.out_samplerate) == GainAnalysis.INIT_GAIN_ANALYSIS_ERROR) {\n                gfp.internal_flags = null;\n                return -6;\n            }\n        }\n\n        if (gfc.decode_on_the_fly && !gfp.decode_only) {\n            if (gfc.hip != null) {\n                mpglib.hip_decode_exit(gfc.hip);\n            }\n            gfc.hip = mpglib.hip_decode_init();\n        }\n\n        gfc.mode_gr = gfp.out_samplerate <= 24000 ? 1 : 2;\n        /*\n         * Number of granules per frame\n         */\n        gfp.framesize = 576 * gfc.mode_gr;\n        gfp.encoder_delay = Encoder.ENCDELAY;\n\n        gfc.resample_ratio = gfp.in_samplerate / gfp.out_samplerate;\n\n        /**\n         * <PRE>\n         *  sample freq       bitrate     compression ratio\n         *     [kHz]      [kbps/channel]   for 16 bit input\n         *     44.1            56               12.6\n         *     44.1            64               11.025\n         *     44.1            80                8.82\n         *     22.05           24               14.7\n         *     22.05           32               11.025\n         *     22.05           40                8.82\n         *     16              16               16.0\n         *     16              24               10.667\n         * </PRE>\n         */\n        /**\n         * <PRE>\n         *  For VBR, take a guess at the compression_ratio.\n         *  For example:\n         *\n         *    VBR_q    compression     like\n         *     -        4.4         320 kbps/44 kHz\n         *   0...1      5.5         256 kbps/44 kHz\n         *     2        7.3         192 kbps/44 kHz\n         *     4        8.8         160 kbps/44 kHz\n         *     6       11           128 kbps/44 kHz\n         *     9       14.7          96 kbps\n         *\n         *  for lower bitrates, downsample with --resample\n         * </PRE>\n         */\n        switch (gfp.VBR) {\n            case VbrMode.vbr_mt:\n            case VbrMode.vbr_rh:\n            case VbrMode.vbr_mtrh:\n            {\n                /* numbers are a bit strange, but they determine the lowpass value */\n                var cmp = [5.7, 6.5, 7.3, 8.2, 10, 11.9, 13, 14,\n                    15, 16.5];\n                gfp.compression_ratio = cmp[gfp.VBR_q];\n            }\n                break;\n            case VbrMode.vbr_abr:\n                gfp.compression_ratio = gfp.out_samplerate * 16 * gfc.channels_out\n                    / (1.e3 * gfp.VBR_mean_bitrate_kbps);\n                break;\n            default:\n                gfp.compression_ratio = gfp.out_samplerate * 16 * gfc.channels_out\n                    / (1.e3 * gfp.brate);\n                break;\n        }\n\n        /*\n         * mode = -1 (not set by user) or mode = MONO (because of only 1 input\n         * channel). If mode has not been set, then select J-STEREO\n         */\n        if (gfp.mode == MPEGMode.NOT_SET) {\n            gfp.mode = MPEGMode.JOINT_STEREO;\n        }\n\n        /* apply user driven high pass filter */\n        if (gfp.highpassfreq > 0) {\n            gfc.highpass1 = 2. * gfp.highpassfreq;\n\n            if (gfp.highpasswidth >= 0)\n                gfc.highpass2 = 2. * (gfp.highpassfreq + gfp.highpasswidth);\n            else\n            /* 0% above on default */\n                gfc.highpass2 = (1 + 0.00) * 2. * gfp.highpassfreq;\n\n            gfc.highpass1 /= gfp.out_samplerate;\n            gfc.highpass2 /= gfp.out_samplerate;\n        } else {\n            gfc.highpass1 = 0;\n            gfc.highpass2 = 0;\n        }\n        /* apply user driven low pass filter */\n        if (gfp.lowpassfreq > 0) {\n            gfc.lowpass2 = 2. * gfp.lowpassfreq;\n            if (gfp.lowpasswidth >= 0) {\n                gfc.lowpass1 = 2. * (gfp.lowpassfreq - gfp.lowpasswidth);\n                if (gfc.lowpass1 < 0) /* has to be >= 0 */\n                    gfc.lowpass1 = 0;\n            } else { /* 0% below on default */\n                gfc.lowpass1 = (1 - 0.00) * 2. * gfp.lowpassfreq;\n            }\n            gfc.lowpass1 /= gfp.out_samplerate;\n            gfc.lowpass2 /= gfp.out_samplerate;\n        } else {\n            gfc.lowpass1 = 0;\n            gfc.lowpass2 = 0;\n        }\n\n        /**********************************************************************/\n        /* compute info needed for polyphase filter (filter type==0, default) */\n        /**********************************************************************/\n        lame_init_params_ppflt(gfp);\n        /*******************************************************\n         * samplerate and bitrate index\n         *******************************************************/\n        gfc.samplerate_index = SmpFrqIndex(gfp.out_samplerate, gfp);\n        if (gfc.samplerate_index < 0) {\n            gfp.internal_flags = null;\n            return -1;\n        }\n\n        if (gfp.VBR == VbrMode.vbr_off) {\n            if (gfp.free_format) {\n                gfc.bitrate_index = 0;\n            } else {\n                gfp.brate = FindNearestBitrate(gfp.brate, gfp.version,\n                    gfp.out_samplerate);\n                gfc.bitrate_index = BitrateIndex(gfp.brate, gfp.version,\n                    gfp.out_samplerate);\n                if (gfc.bitrate_index <= 0) {\n                    gfp.internal_flags = null;\n                    return -1;\n                }\n            }\n        } else {\n            gfc.bitrate_index = 1;\n        }\n\n        /* for CBR, we will write an \"info\" tag. */\n\n        if (gfp.analysis)\n            gfp.bWriteVbrTag = false;\n\n        /* some file options not allowed if output is: not specified or stdout */\n        if (gfc.pinfo != null)\n            gfp.bWriteVbrTag = false;\n        /* disable Xing VBR tag */\n\n        bs.init_bit_stream_w(gfc);\n\n        var j = gfc.samplerate_index + (3 * gfp.version) + 6\n            * (gfp.out_samplerate < 16000 ? 1 : 0);\n        for (var i = 0; i < Encoder.SBMAX_l + 1; i++)\n            gfc.scalefac_band.l[i] = qupvt.sfBandIndex[j].l[i];\n\n        for (var i = 0; i < Encoder.PSFB21 + 1; i++) {\n            var size = (gfc.scalefac_band.l[22] - gfc.scalefac_band.l[21])\n                / Encoder.PSFB21;\n            var start = gfc.scalefac_band.l[21] + i * size;\n            gfc.scalefac_band.psfb21[i] = start;\n        }\n        gfc.scalefac_band.psfb21[Encoder.PSFB21] = 576;\n\n        for (var i = 0; i < Encoder.SBMAX_s + 1; i++)\n            gfc.scalefac_band.s[i] = qupvt.sfBandIndex[j].s[i];\n\n        for (var i = 0; i < Encoder.PSFB12 + 1; i++) {\n            var size = (gfc.scalefac_band.s[13] - gfc.scalefac_band.s[12])\n                / Encoder.PSFB12;\n            var start = gfc.scalefac_band.s[12] + i * size;\n            gfc.scalefac_band.psfb12[i] = start;\n        }\n        gfc.scalefac_band.psfb12[Encoder.PSFB12] = 192;\n        /* determine the mean bitrate for main data */\n        if (gfp.version == 1) /* MPEG 1 */\n            gfc.sideinfo_len = (gfc.channels_out == 1) ? 4 + 17 : 4 + 32;\n        else\n        /* MPEG 2 */\n            gfc.sideinfo_len = (gfc.channels_out == 1) ? 4 + 9 : 4 + 17;\n\n        if (gfp.error_protection)\n            gfc.sideinfo_len += 2;\n\n        lame_init_bitstream(gfp);\n\n        gfc.Class_ID = LAME_ID;\n\n        {\n            var k;\n\n            for (k = 0; k < 19; k++)\n                gfc.nsPsy.pefirbuf[k] = 700 * gfc.mode_gr * gfc.channels_out;\n\n            if (gfp.ATHtype == -1)\n                gfp.ATHtype = 4;\n        }\n        assert(gfp.VBR_q <= 9);\n        assert(gfp.VBR_q >= 0);\n\n        switch (gfp.VBR) {\n\n            case VbrMode.vbr_mt:\n                gfp.VBR = VbrMode.vbr_mtrh;\n            //$FALL-THROUGH$\n            case VbrMode.vbr_mtrh:\n            {\n                if (gfp.useTemporal == null) {\n                    gfp.useTemporal = false;\n                    /* off by default for this VBR mode */\n                }\n\n                p.apply_preset(gfp, 500 - (gfp.VBR_q * 10), 0);\n                /**\n                 * <PRE>\n                 *   The newer VBR code supports only a limited\n                 *     subset of quality levels:\n                 *     9-5=5 are the same, uses x^3/4 quantization\n                 *   4-0=0 are the same  5 plus best huffman divide code\n                 * </PRE>\n                 */\n                if (gfp.quality < 0)\n                    gfp.quality = LAME_DEFAULT_QUALITY;\n                if (gfp.quality < 5)\n                    gfp.quality = 0;\n                if (gfp.quality > 5)\n                    gfp.quality = 5;\n\n                gfc.PSY.mask_adjust = gfp.maskingadjust;\n                gfc.PSY.mask_adjust_short = gfp.maskingadjust_short;\n\n                /*\n                 * sfb21 extra only with MPEG-1 at higher sampling rates\n                 */\n                if (gfp.experimentalY)\n                    gfc.sfb21_extra = false;\n                else\n                    gfc.sfb21_extra = (gfp.out_samplerate > 44000);\n\n                gfc.iteration_loop = new VBRNewIterationLoop(qu);\n                break;\n\n            }\n            case VbrMode.vbr_rh:\n            {\n\n                p.apply_preset(gfp, 500 - (gfp.VBR_q * 10), 0);\n\n                gfc.PSY.mask_adjust = gfp.maskingadjust;\n                gfc.PSY.mask_adjust_short = gfp.maskingadjust_short;\n\n                /*\n                 * sfb21 extra only with MPEG-1 at higher sampling rates\n                 */\n                if (gfp.experimentalY)\n                    gfc.sfb21_extra = false;\n                else\n                    gfc.sfb21_extra = (gfp.out_samplerate > 44000);\n\n                /*\n                 * VBR needs at least the output of GPSYCHO, so we have to garantee\n                 * that by setting a minimum quality level, actually level 6 does\n                 * it. down to level 6\n                 */\n                if (gfp.quality > 6)\n                    gfp.quality = 6;\n\n                if (gfp.quality < 0)\n                    gfp.quality = LAME_DEFAULT_QUALITY;\n\n                gfc.iteration_loop = new VBROldIterationLoop(qu);\n                break;\n            }\n\n            default: /* cbr/abr */\n            {\n                var vbrmode;\n\n                /*\n                 * no sfb21 extra with CBR code\n                 */\n                gfc.sfb21_extra = false;\n\n                if (gfp.quality < 0)\n                    gfp.quality = LAME_DEFAULT_QUALITY;\n\n                vbrmode = gfp.VBR;\n                if (vbrmode == VbrMode.vbr_off)\n                    gfp.VBR_mean_bitrate_kbps = gfp.brate;\n                /* second, set parameters depending on bitrate */\n                p.apply_preset(gfp, gfp.VBR_mean_bitrate_kbps, 0);\n                gfp.VBR = vbrmode;\n\n                gfc.PSY.mask_adjust = gfp.maskingadjust;\n                gfc.PSY.mask_adjust_short = gfp.maskingadjust_short;\n\n                if (vbrmode == VbrMode.vbr_off) {\n                    gfc.iteration_loop = new CBRNewIterationLoop(qu);\n                } else {\n                    gfc.iteration_loop = new ABRIterationLoop(qu);\n                }\n                break;\n            }\n        }\n        assert(gfp.scale >= 0);\n        /* initialize default values common for all modes */\n\n        if (gfp.VBR != VbrMode.vbr_off) { /* choose a min/max bitrate for VBR */\n            /* if the user didn't specify VBR_max_bitrate: */\n            gfc.VBR_min_bitrate = 1;\n            /*\n             * default: allow 8 kbps (MPEG-2) or 32 kbps (MPEG-1)\n             */\n            gfc.VBR_max_bitrate = 14;\n            /*\n             * default: allow 160 kbps (MPEG-2) or 320 kbps (MPEG-1)\n             */\n            if (gfp.out_samplerate < 16000)\n                gfc.VBR_max_bitrate = 8;\n            /* default: allow 64 kbps (MPEG-2.5) */\n            if (gfp.VBR_min_bitrate_kbps != 0) {\n                gfp.VBR_min_bitrate_kbps = FindNearestBitrate(\n                    gfp.VBR_min_bitrate_kbps, gfp.version,\n                    gfp.out_samplerate);\n                gfc.VBR_min_bitrate = BitrateIndex(gfp.VBR_min_bitrate_kbps,\n                    gfp.version, gfp.out_samplerate);\n                if (gfc.VBR_min_bitrate < 0)\n                    return -1;\n            }\n            if (gfp.VBR_max_bitrate_kbps != 0) {\n                gfp.VBR_max_bitrate_kbps = FindNearestBitrate(\n                    gfp.VBR_max_bitrate_kbps, gfp.version,\n                    gfp.out_samplerate);\n                gfc.VBR_max_bitrate = BitrateIndex(gfp.VBR_max_bitrate_kbps,\n                    gfp.version, gfp.out_samplerate);\n                if (gfc.VBR_max_bitrate < 0)\n                    return -1;\n            }\n            gfp.VBR_min_bitrate_kbps = Tables.bitrate_table[gfp.version][gfc.VBR_min_bitrate];\n            gfp.VBR_max_bitrate_kbps = Tables.bitrate_table[gfp.version][gfc.VBR_max_bitrate];\n            gfp.VBR_mean_bitrate_kbps = Math.min(\n                Tables.bitrate_table[gfp.version][gfc.VBR_max_bitrate],\n                gfp.VBR_mean_bitrate_kbps);\n            gfp.VBR_mean_bitrate_kbps = Math.max(\n                Tables.bitrate_table[gfp.version][gfc.VBR_min_bitrate],\n                gfp.VBR_mean_bitrate_kbps);\n        }\n\n        /* just another daily changing developer switch */\n        if (gfp.tune) {\n            gfc.PSY.mask_adjust += gfp.tune_value_a;\n            gfc.PSY.mask_adjust_short += gfp.tune_value_a;\n        }\n\n        /* initialize internal qval settings */\n        lame_init_qval(gfp);\n        assert(gfp.scale >= 0);\n        /*\n         * automatic ATH adjustment on\n         */\n        if (gfp.athaa_type < 0)\n            gfc.ATH.useAdjust = 3;\n        else\n            gfc.ATH.useAdjust = gfp.athaa_type;\n\n        /* initialize internal adaptive ATH settings -jd */\n        gfc.ATH.aaSensitivityP = Math.pow(10.0, gfp.athaa_sensitivity\n            / -10.0);\n\n        if (gfp.short_blocks == null) {\n            gfp.short_blocks = ShortBlock.short_block_allowed;\n        }\n\n        /*\n         * Note Jan/2003: Many hardware decoders cannot handle short blocks in\n         * regular stereo mode unless they are coupled (same type in both\n         * channels) it is a rare event (1 frame per min. or so) that LAME would\n         * use uncoupled short blocks, so lets turn them off until we decide how\n         * to handle this. No other encoders allow uncoupled short blocks, even\n         * though it is in the standard.\n         */\n        /*\n         * rh 20040217: coupling makes no sense for mono and dual-mono streams\n         */\n        if (gfp.short_blocks == ShortBlock.short_block_allowed\n            && (gfp.mode == MPEGMode.JOINT_STEREO || gfp.mode == MPEGMode.STEREO)) {\n            gfp.short_blocks = ShortBlock.short_block_coupled;\n        }\n\n        if (gfp.quant_comp < 0)\n            gfp.quant_comp = 1;\n        if (gfp.quant_comp_short < 0)\n            gfp.quant_comp_short = 0;\n\n        if (gfp.msfix < 0)\n            gfp.msfix = 0;\n\n        /* select psychoacoustic model */\n        gfp.exp_nspsytune = gfp.exp_nspsytune | 1;\n\n        if (gfp.internal_flags.nsPsy.attackthre < 0)\n            gfp.internal_flags.nsPsy.attackthre = PsyModel.NSATTACKTHRE;\n        if (gfp.internal_flags.nsPsy.attackthre_s < 0)\n            gfp.internal_flags.nsPsy.attackthre_s = PsyModel.NSATTACKTHRE_S;\n\n        assert(gfp.scale >= 0);\n\n        if (gfp.scale < 0)\n            gfp.scale = 1;\n\n        if (gfp.ATHtype < 0)\n            gfp.ATHtype = 4;\n\n        if (gfp.ATHcurve < 0)\n            gfp.ATHcurve = 4;\n\n        if (gfp.athaa_loudapprox < 0)\n            gfp.athaa_loudapprox = 2;\n\n        if (gfp.interChRatio < 0)\n            gfp.interChRatio = 0;\n\n        if (gfp.useTemporal == null)\n            gfp.useTemporal = true;\n        /* on by default */\n\n        /*\n         * padding method as described in\n         * \"MPEG-Layer3 / Bitstream Syntax and Decoding\" by Martin Sieler, Ralph\n         * Sperschneider\n         *\n         * note: there is no padding for the very first frame\n         *\n         * Robert Hegemann 2000-06-22\n         */\n        gfc.slot_lag = gfc.frac_SpF = 0;\n        if (gfp.VBR == VbrMode.vbr_off)\n            gfc.slot_lag = gfc.frac_SpF = (((gfp.version + 1) * 72000 * gfp.brate) % gfp.out_samplerate) | 0;\n\n        qupvt.iteration_init(gfp);\n        psy.psymodel_init(gfp);\n        assert(gfp.scale >= 0);\n        return 0;\n    }\n\n    function update_inbuffer_size(gfc, nsamples) {\n        if (gfc.in_buffer_0 == null || gfc.in_buffer_nsamples < nsamples) {\n            gfc.in_buffer_0 = new_float(nsamples);\n            gfc.in_buffer_1 = new_float(nsamples);\n            gfc.in_buffer_nsamples = nsamples;\n        }\n    }\n\n    this.lame_encode_flush = function (gfp, mp3buffer, mp3bufferPos, mp3buffer_size) {\n        var gfc = gfp.internal_flags;\n        var buffer = new_short_n([2, 1152]);\n        var imp3 = 0, mp3count, mp3buffer_size_remaining;\n\n        /*\n         * we always add POSTDELAY=288 padding to make sure granule with real\n         * data can be complety decoded (because of 50% overlap with next\n         * granule\n         */\n        var end_padding;\n        var frames_left;\n        var samples_to_encode = gfc.mf_samples_to_encode - Encoder.POSTDELAY;\n        var mf_needed = calcNeeded(gfp);\n\n        /* Was flush already called? */\n        if (gfc.mf_samples_to_encode < 1) {\n            return 0;\n        }\n        mp3count = 0;\n\n        if (gfp.in_samplerate != gfp.out_samplerate) {\n            /*\n             * delay due to resampling; needs to be fixed, if resampling code\n             * gets changed\n             */\n            samples_to_encode += 16. * gfp.out_samplerate / gfp.in_samplerate;\n        }\n        end_padding = gfp.framesize - (samples_to_encode % gfp.framesize);\n        if (end_padding < 576)\n            end_padding += gfp.framesize;\n        gfp.encoder_padding = end_padding;\n\n        frames_left = (samples_to_encode + end_padding) / gfp.framesize;\n\n        /*\n         * send in a frame of 0 padding until all internal sample buffers are\n         * flushed\n         */\n        while (frames_left > 0 && imp3 >= 0) {\n            var bunch = mf_needed - gfc.mf_size;\n            var frame_num = gfp.frameNum;\n\n            bunch *= gfp.in_samplerate;\n            bunch /= gfp.out_samplerate;\n            if (bunch > 1152)\n                bunch = 1152;\n            if (bunch < 1)\n                bunch = 1;\n\n            mp3buffer_size_remaining = mp3buffer_size - mp3count;\n\n            /* if user specifed buffer size = 0, dont check size */\n            if (mp3buffer_size == 0)\n                mp3buffer_size_remaining = 0;\n\n            imp3 = this.lame_encode_buffer(gfp, buffer[0], buffer[1], bunch,\n                mp3buffer, mp3bufferPos, mp3buffer_size_remaining);\n\n            mp3bufferPos += imp3;\n            mp3count += imp3;\n            frames_left -= (frame_num != gfp.frameNum) ? 1 : 0;\n        }\n        /*\n         * Set gfc.mf_samples_to_encode to 0, so we may detect and break loops\n         * calling it more than once in a row.\n         */\n        gfc.mf_samples_to_encode = 0;\n\n        if (imp3 < 0) {\n            /* some type of fatal error */\n            return imp3;\n        }\n\n        mp3buffer_size_remaining = mp3buffer_size - mp3count;\n        /* if user specifed buffer size = 0, dont check size */\n        if (mp3buffer_size == 0)\n            mp3buffer_size_remaining = 0;\n\n        /* mp3 related stuff. bit buffer might still contain some mp3 data */\n        bs.flush_bitstream(gfp);\n        imp3 = bs.copy_buffer(gfc, mp3buffer, mp3bufferPos,\n            mp3buffer_size_remaining, 1);\n        if (imp3 < 0) {\n            /* some type of fatal error */\n            return imp3;\n        }\n        mp3bufferPos += imp3;\n        mp3count += imp3;\n        mp3buffer_size_remaining = mp3buffer_size - mp3count;\n        /* if user specifed buffer size = 0, dont check size */\n        if (mp3buffer_size == 0)\n            mp3buffer_size_remaining = 0;\n\n        if (gfp.write_id3tag_automatic) {\n            /* write a id3 tag to the bitstream */\n            id3.id3tag_write_v1(gfp);\n\n            imp3 = bs.copy_buffer(gfc, mp3buffer, mp3bufferPos,\n                mp3buffer_size_remaining, 0);\n\n            if (imp3 < 0) {\n                return imp3;\n            }\n            mp3count += imp3;\n        }\n        return mp3count;\n    };\n\n    this.lame_encode_buffer = function (gfp, buffer_l, buffer_r, nsamples, mp3buf, mp3bufPos, mp3buf_size) {\n        var gfc = gfp.internal_flags;\n        var in_buffer = [null, null];\n\n        if (gfc.Class_ID != LAME_ID)\n            return -3;\n\n        if (nsamples == 0)\n            return 0;\n\n        update_inbuffer_size(gfc, nsamples);\n\n        in_buffer[0] = gfc.in_buffer_0;\n        in_buffer[1] = gfc.in_buffer_1;\n\n        /* make a copy of input buffer, changing type to sample_t */\n        for (var i = 0; i < nsamples; i++) {\n            in_buffer[0][i] = buffer_l[i];\n            if (gfc.channels_in > 1)\n                in_buffer[1][i] = buffer_r[i];\n        }\n\n        return lame_encode_buffer_sample(gfp, in_buffer[0], in_buffer[1],\n            nsamples, mp3buf, mp3bufPos, mp3buf_size);\n    }\n\n    function calcNeeded(gfp) {\n        var mf_needed = Encoder.BLKSIZE + gfp.framesize - Encoder.FFTOFFSET;\n        /*\n         * amount needed for FFT\n         */\n        mf_needed = Math.max(mf_needed, 512 + gfp.framesize - 32);\n        assert(LameInternalFlags.MFSIZE >= mf_needed);\n\n        return mf_needed;\n    }\n\n    function lame_encode_buffer_sample(gfp, buffer_l, buffer_r, nsamples, mp3buf, mp3bufPos, mp3buf_size) {\n        var gfc = gfp.internal_flags;\n        var mp3size = 0, ret, i, ch, mf_needed;\n        var mp3out;\n        var mfbuf = [null, null];\n        var in_buffer = [null, null];\n\n        if (gfc.Class_ID != LAME_ID)\n            return -3;\n\n        if (nsamples == 0)\n            return 0;\n\n        /* copy out any tags that may have been written into bitstream */\n        mp3out = bs.copy_buffer(gfc, mp3buf, mp3bufPos, mp3buf_size, 0);\n        if (mp3out < 0)\n            return mp3out;\n        /* not enough buffer space */\n        mp3bufPos += mp3out;\n        mp3size += mp3out;\n\n        in_buffer[0] = buffer_l;\n        in_buffer[1] = buffer_r;\n\n        /* Apply user defined re-scaling */\n\n        /* user selected scaling of the samples */\n        if (BitStream.NEQ(gfp.scale, 0) && BitStream.NEQ(gfp.scale, 1.0)) {\n            for (i = 0; i < nsamples; ++i) {\n                in_buffer[0][i] *= gfp.scale;\n                if (gfc.channels_out == 2)\n                    in_buffer[1][i] *= gfp.scale;\n            }\n        }\n\n        /* user selected scaling of the channel 0 (left) samples */\n        if (BitStream.NEQ(gfp.scale_left, 0)\n            && BitStream.NEQ(gfp.scale_left, 1.0)) {\n            for (i = 0; i < nsamples; ++i) {\n                in_buffer[0][i] *= gfp.scale_left;\n            }\n        }\n\n        /* user selected scaling of the channel 1 (right) samples */\n        if (BitStream.NEQ(gfp.scale_right, 0)\n            && BitStream.NEQ(gfp.scale_right, 1.0)) {\n            for (i = 0; i < nsamples; ++i) {\n                in_buffer[1][i] *= gfp.scale_right;\n            }\n        }\n\n        /* Downsample to Mono if 2 channels in and 1 channel out */\n        if (gfp.num_channels == 2 && gfc.channels_out == 1) {\n            for (i = 0; i < nsamples; ++i) {\n                in_buffer[0][i] = 0.5 * ( in_buffer[0][i] + in_buffer[1][i]);\n                in_buffer[1][i] = 0.0;\n            }\n        }\n\n        mf_needed = calcNeeded(gfp);\n\n        mfbuf[0] = gfc.mfbuf[0];\n        mfbuf[1] = gfc.mfbuf[1];\n\n        var in_bufferPos = 0;\n        while (nsamples > 0) {\n            var in_buffer_ptr = [null, null];\n            var n_in = 0;\n            /* number of input samples processed with fill_buffer */\n            var n_out = 0;\n            /* number of samples output with fill_buffer */\n            /* n_in <> n_out if we are resampling */\n\n            in_buffer_ptr[0] = in_buffer[0];\n            in_buffer_ptr[1] = in_buffer[1];\n            /* copy in new samples into mfbuf, with resampling */\n            var inOut = new InOut();\n            fill_buffer(gfp, mfbuf, in_buffer_ptr, in_bufferPos, nsamples,\n                inOut);\n            n_in = inOut.n_in;\n            n_out = inOut.n_out;\n\n            /* compute ReplayGain of resampled input if requested */\n            if (gfc.findReplayGain && !gfc.decode_on_the_fly)\n                if (ga.AnalyzeSamples(gfc.rgdata, mfbuf[0], gfc.mf_size,\n                        mfbuf[1], gfc.mf_size, n_out, gfc.channels_out) == GainAnalysis.GAIN_ANALYSIS_ERROR)\n                    return -6;\n\n            /* update in_buffer counters */\n            nsamples -= n_in;\n            in_bufferPos += n_in;\n            if (gfc.channels_out == 2)\n                ;// in_bufferPos += n_in;\n\n            /* update mfbuf[] counters */\n            gfc.mf_size += n_out;\n            assert(gfc.mf_size <= LameInternalFlags.MFSIZE);\n\n            /*\n             * lame_encode_flush may have set gfc.mf_sample_to_encode to 0 so we\n             * have to reinitialize it here when that happened.\n             */\n            if (gfc.mf_samples_to_encode < 1) {\n                gfc.mf_samples_to_encode = Encoder.ENCDELAY + Encoder.POSTDELAY;\n            }\n            gfc.mf_samples_to_encode += n_out;\n\n            if (gfc.mf_size >= mf_needed) {\n                /* encode the frame. */\n                /* mp3buf = pointer to current location in buffer */\n                /* mp3buf_size = size of original mp3 output buffer */\n                /* = 0 if we should not worry about the */\n                /* buffer size because calling program is */\n                /* to lazy to compute it */\n                /* mp3size = size of data written to buffer so far */\n                /* mp3buf_size-mp3size = amount of space avalable */\n\n                var buf_size = mp3buf_size - mp3size;\n                if (mp3buf_size == 0)\n                    buf_size = 0;\n\n                ret = lame_encode_frame(gfp, mfbuf[0], mfbuf[1], mp3buf,\n                    mp3bufPos, buf_size);\n\n                if (ret < 0)\n                    return ret;\n                mp3bufPos += ret;\n                mp3size += ret;\n\n                /* shift out old samples */\n                gfc.mf_size -= gfp.framesize;\n                gfc.mf_samples_to_encode -= gfp.framesize;\n                for (ch = 0; ch < gfc.channels_out; ch++)\n                    for (i = 0; i < gfc.mf_size; i++)\n                        mfbuf[ch][i] = mfbuf[ch][i + gfp.framesize];\n            }\n        }\n        assert(nsamples == 0);\n\n        return mp3size;\n    }\n\n    function lame_encode_frame(gfp, inbuf_l, inbuf_r, mp3buf, mp3bufPos, mp3buf_size) {\n        var ret = self.enc.lame_encode_mp3_frame(gfp, inbuf_l, inbuf_r, mp3buf,\n            mp3bufPos, mp3buf_size);\n        gfp.frameNum++;\n        return ret;\n    }\n\n    function InOut() {\n        this.n_in = 0;\n        this.n_out = 0;\n    }\n\n\n    function NumUsed() {\n        this.num_used = 0;\n    }\n\n    /**\n     * Greatest common divisor.\n     * <p>\n     * Joint work of Euclid and M. Hendry\n     */\n    function gcd(i, j) {\n        return j != 0 ? gcd(j, i % j) : i;\n    }\n\n    /**\n     * Resampling via FIR filter, blackman window.\n     */\n    function blackman(x, fcn, l) {\n        /*\n         * This algorithm from: SIGNAL PROCESSING ALGORITHMS IN FORTRAN AND C\n         * S.D. Stearns and R.A. David, Prentice-Hall, 1992\n         */\n        var wcn = (Math.PI * fcn);\n\n        x /= l;\n        if (x < 0)\n            x = 0;\n        if (x > 1)\n            x = 1;\n        var x2 = x - .5;\n\n        var bkwn = 0.42 - 0.5 * Math.cos(2 * x * Math.PI) + 0.08 * Math.cos(4 * x * Math.PI);\n        if (Math.abs(x2) < 1e-9)\n            return (wcn / Math.PI);\n        else\n            return (bkwn * Math.sin(l * wcn * x2) / (Math.PI * l * x2));\n    }\n\n    function fill_buffer_resample(gfp, outbuf, outbufPos, desired_len, inbuf, in_bufferPos, len, num_used, ch) {\n        var gfc = gfp.internal_flags;\n        var i, j = 0, k;\n        /* number of convolution functions to pre-compute */\n        var bpc = gfp.out_samplerate\n            / gcd(gfp.out_samplerate, gfp.in_samplerate);\n        if (bpc > LameInternalFlags.BPC)\n            bpc = LameInternalFlags.BPC;\n\n        var intratio = (Math.abs(gfc.resample_ratio\n            - Math.floor(.5 + gfc.resample_ratio)) < .0001) ? 1 : 0;\n        var fcn = 1.00 / gfc.resample_ratio;\n        if (fcn > 1.00)\n            fcn = 1.00;\n        var filter_l = 31;\n        if (0 == filter_l % 2)\n            --filter_l;\n        /* must be odd */\n        filter_l += intratio;\n        /* unless resample_ratio=int, it must be even */\n\n        var BLACKSIZE = filter_l + 1;\n        /* size of data needed for FIR */\n\n        if (gfc.fill_buffer_resample_init == 0) {\n            gfc.inbuf_old[0] = new_float(BLACKSIZE);\n            gfc.inbuf_old[1] = new_float(BLACKSIZE);\n            for (i = 0; i <= 2 * bpc; ++i)\n                gfc.blackfilt[i] = new_float(BLACKSIZE);\n\n            gfc.itime[0] = 0;\n            gfc.itime[1] = 0;\n\n            /* precompute blackman filter coefficients */\n            for (j = 0; j <= 2 * bpc; j++) {\n                var sum = 0.;\n                var offset = (j - bpc) / (2. * bpc);\n                for (i = 0; i <= filter_l; i++)\n                    sum += gfc.blackfilt[j][i] = blackman(i - offset, fcn,\n                        filter_l);\n                for (i = 0; i <= filter_l; i++)\n                    gfc.blackfilt[j][i] /= sum;\n            }\n            gfc.fill_buffer_resample_init = 1;\n        }\n\n        var inbuf_old = gfc.inbuf_old[ch];\n\n        /* time of j'th element in inbuf = itime + j/ifreq; */\n        /* time of k'th element in outbuf = j/ofreq */\n        for (k = 0; k < desired_len; k++) {\n            var time0;\n            var joff;\n\n            time0 = k * gfc.resample_ratio;\n            /* time of k'th output sample */\n            j = 0 | Math.floor(time0 - gfc.itime[ch]);\n\n            /* check if we need more input data */\n            if ((filter_l + j - filter_l / 2) >= len)\n                break;\n\n            /* blackman filter. by default, window centered at j+.5(filter_l%2) */\n            /* but we want a window centered at time0. */\n            var offset = (time0 - gfc.itime[ch] - (j + .5 * (filter_l % 2)));\n            assert(Math.abs(offset) <= .501);\n\n            /* find the closest precomputed window for this offset: */\n            joff = 0 | Math.floor((offset * 2 * bpc) + bpc + .5);\n            var xvalue = 0.;\n            for (i = 0; i <= filter_l; ++i) {\n                var j2 = i + j - filter_l / 2;\n                var y;\n                assert(j2 < len);\n                assert(j2 + BLACKSIZE >= 0);\n                y = (j2 < 0) ? inbuf_old[BLACKSIZE + j2] : inbuf[in_bufferPos\n                + j2];\n                xvalue += y * gfc.blackfilt[joff][i];\n            }\n            outbuf[outbufPos + k] = xvalue;\n        }\n\n        /* k = number of samples added to outbuf */\n        /* last k sample used data from [j-filter_l/2,j+filter_l-filter_l/2] */\n\n        /* how many samples of input data were used: */\n        num_used.num_used = Math.min(len, filter_l + j - filter_l / 2);\n\n        /*\n         * adjust our input time counter. Incriment by the number of samples\n         * used, then normalize so that next output sample is at time 0, next\n         * input buffer is at time itime[ch]\n         */\n        gfc.itime[ch] += num_used.num_used - k * gfc.resample_ratio;\n\n        /* save the last BLACKSIZE samples into the inbuf_old buffer */\n        if (num_used.num_used >= BLACKSIZE) {\n            for (i = 0; i < BLACKSIZE; i++)\n                inbuf_old[i] = inbuf[in_bufferPos + num_used.num_used + i\n                - BLACKSIZE];\n        } else {\n            /* shift in num_used.num_used samples into inbuf_old */\n            var n_shift = BLACKSIZE - num_used.num_used;\n            /*\n             * number of samples to\n             * shift\n             */\n\n            /*\n             * shift n_shift samples by num_used.num_used, to make room for the\n             * num_used new samples\n             */\n            for (i = 0; i < n_shift; ++i)\n                inbuf_old[i] = inbuf_old[i + num_used.num_used];\n\n            /* shift in the num_used.num_used samples */\n            for (j = 0; i < BLACKSIZE; ++i, ++j)\n                inbuf_old[i] = inbuf[in_bufferPos + j];\n\n            assert(j == num_used.num_used);\n        }\n        return k;\n        /* return the number samples created at the new samplerate */\n    }\n\n    function fill_buffer(gfp, mfbuf, in_buffer, in_bufferPos, nsamples, io) {\n        var gfc = gfp.internal_flags;\n\n        /* copy in new samples into mfbuf, with resampling if necessary */\n        if ((gfc.resample_ratio < .9999) || (gfc.resample_ratio > 1.0001)) {\n            for (var ch = 0; ch < gfc.channels_out; ch++) {\n                var numUsed = new NumUsed();\n                io.n_out = fill_buffer_resample(gfp, mfbuf[ch], gfc.mf_size,\n                    gfp.framesize, in_buffer[ch], in_bufferPos, nsamples,\n                    numUsed, ch);\n                io.n_in = numUsed.num_used;\n            }\n        } else {\n            io.n_out = Math.min(gfp.framesize, nsamples);\n            io.n_in = io.n_out;\n            for (var i = 0; i < io.n_out; ++i) {\n                mfbuf[0][gfc.mf_size + i] = in_buffer[0][in_bufferPos + i];\n                if (gfc.channels_out == 2)\n                    mfbuf[1][gfc.mf_size + i] = in_buffer[1][in_bufferPos + i];\n            }\n        }\n    }\n\n}\n\nmodule.exports = Lame;\n","var common = require('./common.js');\nvar System = common.System;\nvar VbrMode = common.VbrMode;\nvar Float = common.Float;\nvar ShortBlock = common.ShortBlock;\nvar Util = common.Util;\nvar Arrays = common.Arrays;\nvar new_array_n = common.new_array_n;\nvar new_byte = common.new_byte;\nvar new_double = common.new_double;\nvar new_float = common.new_float;\nvar new_float_n = common.new_float_n;\nvar new_int = common.new_int;\nvar new_int_n = common.new_int_n;\nvar assert = common.assert;\n\nfunction Presets() {\n    function VBRPresets(qual, comp, compS,\n                        y, shThreshold, shThresholdS,\n                        adj, adjShort, lower,\n                        curve, sens, inter,\n                        joint, mod, fix) {\n        this.vbr_q = qual;\n        this.quant_comp = comp;\n        this.quant_comp_s = compS;\n        this.expY = y;\n        this.st_lrm = shThreshold;\n        this.st_s = shThresholdS;\n        this.masking_adj = adj;\n        this.masking_adj_short = adjShort;\n        this.ath_lower = lower;\n        this.ath_curve = curve;\n        this.ath_sensitivity = sens;\n        this.interch = inter;\n        this.safejoint = joint;\n        this.sfb21mod = mod;\n        this.msfix = fix;\n    }\n\n    function ABRPresets(kbps, comp, compS,\n                        joint, fix, shThreshold,\n                        shThresholdS, bass, sc,\n                        mask, lower, curve,\n                        interCh, sfScale) {\n        this.quant_comp = comp;\n        this.quant_comp_s = compS;\n        this.safejoint = joint;\n        this.nsmsfix = fix;\n        this.st_lrm = shThreshold;\n        this.st_s = shThresholdS;\n        this.nsbass = bass;\n        this.scale = sc;\n        this.masking_adj = mask;\n        this.ath_lower = lower;\n        this.ath_curve = curve;\n        this.interch = interCh;\n        this.sfscale = sfScale;\n    }\n\n    var lame;\n\n    this.setModules = function (_lame) {\n        lame = _lame;\n    };\n\n    /**\n     * <PRE>\n     * Switch mappings for VBR mode VBR_RH\n     *             vbr_q  qcomp_l  qcomp_s  expY  st_lrm   st_s  mask adj_l  adj_s  ath_lower  ath_curve  ath_sens  interChR  safejoint sfb21mod  msfix\n     * </PRE>\n     */\n    var vbr_old_switch_map = [\n        new VBRPresets(0, 9, 9, 0, 5.20, 125.0, -4.2, -6.3, 4.8, 1, 0, 0, 2, 21, 0.97),\n        new VBRPresets(1, 9, 9, 0, 5.30, 125.0, -3.6, -5.6, 4.5, 1.5, 0, 0, 2, 21, 1.35),\n        new VBRPresets(2, 9, 9, 0, 5.60, 125.0, -2.2, -3.5, 2.8, 2, 0, 0, 2, 21, 1.49),\n        new VBRPresets(3, 9, 9, 1, 5.80, 130.0, -1.8, -2.8, 2.6, 3, -4, 0, 2, 20, 1.64),\n        new VBRPresets(4, 9, 9, 1, 6.00, 135.0, -0.7, -1.1, 1.1, 3.5, -8, 0, 2, 0, 1.79),\n        new VBRPresets(5, 9, 9, 1, 6.40, 140.0, 0.5, 0.4, -7.5, 4, -12, 0.0002, 0, 0, 1.95),\n        new VBRPresets(6, 9, 9, 1, 6.60, 145.0, 0.67, 0.65, -14.7, 6.5, -19, 0.0004, 0, 0, 2.30),\n        new VBRPresets(7, 9, 9, 1, 6.60, 145.0, 0.8, 0.75, -19.7, 8, -22, 0.0006, 0, 0, 2.70),\n        new VBRPresets(8, 9, 9, 1, 6.60, 145.0, 1.2, 1.15, -27.5, 10, -23, 0.0007, 0, 0, 0),\n        new VBRPresets(9, 9, 9, 1, 6.60, 145.0, 1.6, 1.6, -36, 11, -25, 0.0008, 0, 0, 0),\n        new VBRPresets(10, 9, 9, 1, 6.60, 145.0, 2.0, 2.0, -36, 12, -25, 0.0008, 0, 0, 0)\n    ];\n\n    /**\n     * <PRE>\n     *                 vbr_q  qcomp_l  qcomp_s  expY  st_lrm   st_s  mask adj_l  adj_s  ath_lower  ath_curve  ath_sens  interChR  safejoint sfb21mod  msfix\n     * </PRE>\n     */\n    var vbr_psy_switch_map = [\n        new VBRPresets(0, 9, 9, 0, 4.20, 25.0, -7.0, -4.0, 7.5, 1, 0, 0, 2, 26, 0.97),\n        new VBRPresets(1, 9, 9, 0, 4.20, 25.0, -5.6, -3.6, 4.5, 1.5, 0, 0, 2, 21, 1.35),\n        new VBRPresets(2, 9, 9, 0, 4.20, 25.0, -4.4, -1.8, 2, 2, 0, 0, 2, 18, 1.49),\n        new VBRPresets(3, 9, 9, 1, 4.20, 25.0, -3.4, -1.25, 1.1, 3, -4, 0, 2, 15, 1.64),\n        new VBRPresets(4, 9, 9, 1, 4.20, 25.0, -2.2, 0.1, 0, 3.5, -8, 0, 2, 0, 1.79),\n        new VBRPresets(5, 9, 9, 1, 4.20, 25.0, -1.0, 1.65, -7.7, 4, -12, 0.0002, 0, 0, 1.95),\n        new VBRPresets(6, 9, 9, 1, 4.20, 25.0, -0.0, 2.47, -7.7, 6.5, -19, 0.0004, 0, 0, 2),\n        new VBRPresets(7, 9, 9, 1, 4.20, 25.0, 0.5, 2.0, -14.5, 8, -22, 0.0006, 0, 0, 2),\n        new VBRPresets(8, 9, 9, 1, 4.20, 25.0, 1.0, 2.4, -22.0, 10, -23, 0.0007, 0, 0, 2),\n        new VBRPresets(9, 9, 9, 1, 4.20, 25.0, 1.5, 2.95, -30.0, 11, -25, 0.0008, 0, 0, 2),\n        new VBRPresets(10, 9, 9, 1, 4.20, 25.0, 2.0, 2.95, -36.0, 12, -30, 0.0008, 0, 0, 2)\n    ];\n\n    function apply_vbr_preset(gfp, a, enforce) {\n        var vbr_preset = gfp.VBR == VbrMode.vbr_rh ? vbr_old_switch_map\n            : vbr_psy_switch_map;\n\n        var x = gfp.VBR_q_frac;\n        var p = vbr_preset[a];\n        var q = vbr_preset[a + 1];\n        var set = p;\n\n        // NOOP(vbr_q);\n        // NOOP(quant_comp);\n        // NOOP(quant_comp_s);\n        // NOOP(expY);\n        p.st_lrm = p.st_lrm + x * (q.st_lrm - p.st_lrm);\n        // LERP(st_lrm);\n        p.st_s = p.st_s + x * (q.st_s - p.st_s);\n        // LERP(st_s);\n        p.masking_adj = p.masking_adj + x * (q.masking_adj - p.masking_adj);\n        // LERP(masking_adj);\n        p.masking_adj_short = p.masking_adj_short + x\n            * (q.masking_adj_short - p.masking_adj_short);\n        // LERP(masking_adj_short);\n        p.ath_lower = p.ath_lower + x * (q.ath_lower - p.ath_lower);\n        // LERP(ath_lower);\n        p.ath_curve = p.ath_curve + x * (q.ath_curve - p.ath_curve);\n        // LERP(ath_curve);\n        p.ath_sensitivity = p.ath_sensitivity + x\n            * (q.ath_sensitivity - p.ath_sensitivity);\n        // LERP(ath_sensitivity);\n        p.interch = p.interch + x * (q.interch - p.interch);\n        // LERP(interch);\n        // NOOP(safejoint);\n        // NOOP(sfb21mod);\n        p.msfix = p.msfix + x * (q.msfix - p.msfix);\n        // LERP(msfix);\n\n        lame_set_VBR_q(gfp, set.vbr_q);\n\n        if (enforce != 0)\n            gfp.quant_comp = set.quant_comp;\n        else if (!(Math.abs(gfp.quant_comp - -1) > 0))\n            gfp.quant_comp = set.quant_comp;\n        // SET_OPTION(quant_comp, set.quant_comp, -1);\n        if (enforce != 0)\n            gfp.quant_comp_short = set.quant_comp_s;\n        else if (!(Math.abs(gfp.quant_comp_short - -1) > 0))\n            gfp.quant_comp_short = set.quant_comp_s;\n        // SET_OPTION(quant_comp_short, set.quant_comp_s, -1);\n        if (set.expY != 0) {\n            gfp.experimentalY = set.expY != 0;\n        }\n        if (enforce != 0)\n            gfp.internal_flags.nsPsy.attackthre = set.st_lrm;\n        else if (!(Math.abs(gfp.internal_flags.nsPsy.attackthre - -1) > 0))\n            gfp.internal_flags.nsPsy.attackthre = set.st_lrm;\n        // SET_OPTION(short_threshold_lrm, set.st_lrm, -1);\n        if (enforce != 0)\n            gfp.internal_flags.nsPsy.attackthre_s = set.st_s;\n        else if (!(Math.abs(gfp.internal_flags.nsPsy.attackthre_s - -1) > 0))\n            gfp.internal_flags.nsPsy.attackthre_s = set.st_s;\n        // SET_OPTION(short_threshold_s, set.st_s, -1);\n        if (enforce != 0)\n            gfp.maskingadjust = set.masking_adj;\n        else if (!(Math.abs(gfp.maskingadjust - 0) > 0))\n            gfp.maskingadjust = set.masking_adj;\n        // SET_OPTION(maskingadjust, set.masking_adj, 0);\n        if (enforce != 0)\n            gfp.maskingadjust_short = set.masking_adj_short;\n        else if (!(Math.abs(gfp.maskingadjust_short - 0) > 0))\n            gfp.maskingadjust_short = set.masking_adj_short;\n        // SET_OPTION(maskingadjust_short, set.masking_adj_short, 0);\n        if (enforce != 0)\n            gfp.ATHlower = -set.ath_lower / 10.0;\n        else if (!(Math.abs((-gfp.ATHlower * 10.0) - 0) > 0))\n            gfp.ATHlower = -set.ath_lower / 10.0;\n        // SET_OPTION(ATHlower, set.ath_lower, 0);\n        if (enforce != 0)\n            gfp.ATHcurve = set.ath_curve;\n        else if (!(Math.abs(gfp.ATHcurve - -1) > 0))\n            gfp.ATHcurve = set.ath_curve;\n        // SET_OPTION(ATHcurve, set.ath_curve, -1);\n        if (enforce != 0)\n            gfp.athaa_sensitivity = set.ath_sensitivity;\n        else if (!(Math.abs(gfp.athaa_sensitivity - -1) > 0))\n            gfp.athaa_sensitivity = set.ath_sensitivity;\n        // SET_OPTION(athaa_sensitivity, set.ath_sensitivity, 0);\n        if (set.interch > 0) {\n            if (enforce != 0)\n                gfp.interChRatio = set.interch;\n            else if (!(Math.abs(gfp.interChRatio - -1) > 0))\n                gfp.interChRatio = set.interch;\n            // SET_OPTION(interChRatio, set.interch, -1);\n        }\n\n        /* parameters for which there is no proper set/get interface */\n        if (set.safejoint > 0) {\n            gfp.exp_nspsytune = gfp.exp_nspsytune | set.safejoint;\n        }\n        if (set.sfb21mod > 0) {\n            gfp.exp_nspsytune = gfp.exp_nspsytune | (set.sfb21mod << 20);\n        }\n        if (enforce != 0)\n            gfp.msfix = set.msfix;\n        else if (!(Math.abs(gfp.msfix - -1) > 0))\n            gfp.msfix = set.msfix;\n        // SET_OPTION(msfix, set.msfix, -1);\n\n        if (enforce == 0) {\n            gfp.VBR_q = a;\n            gfp.VBR_q_frac = x;\n        }\n    }\n\n    /**\n     * <PRE>\n     *  Switch mappings for ABR mode\n     *\n     *              kbps  quant q_s safejoint nsmsfix st_lrm  st_s  ns-bass scale   msk ath_lwr ath_curve  interch , sfscale\n     * </PRE>\n     */\n    var abr_switch_map = [\n        new ABRPresets(8, 9, 9, 0, 0, 6.60, 145, 0, 0.95, 0, -30.0, 11, 0.0012, 1), /*   8, impossible to use in stereo */\n        new ABRPresets(16, 9, 9, 0, 0, 6.60, 145, 0, 0.95, 0, -25.0, 11, 0.0010, 1), /*  16 */\n        new ABRPresets(24, 9, 9, 0, 0, 6.60, 145, 0, 0.95, 0, -20.0, 11, 0.0010, 1), /*  24 */\n        new ABRPresets(32, 9, 9, 0, 0, 6.60, 145, 0, 0.95, 0, -15.0, 11, 0.0010, 1), /*  32 */\n        new ABRPresets(40, 9, 9, 0, 0, 6.60, 145, 0, 0.95, 0, -10.0, 11, 0.0009, 1), /*  40 */\n        new ABRPresets(48, 9, 9, 0, 0, 6.60, 145, 0, 0.95, 0, -10.0, 11, 0.0009, 1), /*  48 */\n        new ABRPresets(56, 9, 9, 0, 0, 6.60, 145, 0, 0.95, 0, -6.0, 11, 0.0008, 1), /*  56 */\n        new ABRPresets(64, 9, 9, 0, 0, 6.60, 145, 0, 0.95, 0, -2.0, 11, 0.0008, 1), /*  64 */\n        new ABRPresets(80, 9, 9, 0, 0, 6.60, 145, 0, 0.95, 0, .0, 8, 0.0007, 1), /*  80 */\n        new ABRPresets(96, 9, 9, 0, 2.50, 6.60, 145, 0, 0.95, 0, 1.0, 5.5, 0.0006, 1), /*  96 */\n        new ABRPresets(112, 9, 9, 0, 2.25, 6.60, 145, 0, 0.95, 0, 2.0, 4.5, 0.0005, 1), /* 112 */\n        new ABRPresets(128, 9, 9, 0, 1.95, 6.40, 140, 0, 0.95, 0, 3.0, 4, 0.0002, 1), /* 128 */\n        new ABRPresets(160, 9, 9, 1, 1.79, 6.00, 135, 0, 0.95, -2, 5.0, 3.5, 0, 1), /* 160 */\n        new ABRPresets(192, 9, 9, 1, 1.49, 5.60, 125, 0, 0.97, -4, 7.0, 3, 0, 0), /* 192 */\n        new ABRPresets(224, 9, 9, 1, 1.25, 5.20, 125, 0, 0.98, -6, 9.0, 2, 0, 0), /* 224 */\n        new ABRPresets(256, 9, 9, 1, 0.97, 5.20, 125, 0, 1.00, -8, 10.0, 1, 0, 0), /* 256 */\n        new ABRPresets(320, 9, 9, 1, 0.90, 5.20, 125, 0, 1.00, -10, 12.0, 0, 0, 0)  /* 320 */\n    ];\n\n    function apply_abr_preset(gfp, preset, enforce) {\n        /* Variables for the ABR stuff */\n        var actual_bitrate = preset;\n\n        var r = lame.nearestBitrateFullIndex(preset);\n\n        gfp.VBR = VbrMode.vbr_abr;\n        gfp.VBR_mean_bitrate_kbps = actual_bitrate;\n        gfp.VBR_mean_bitrate_kbps = Math.min(gfp.VBR_mean_bitrate_kbps, 320);\n        gfp.VBR_mean_bitrate_kbps = Math.max(gfp.VBR_mean_bitrate_kbps, 8);\n        gfp.brate = gfp.VBR_mean_bitrate_kbps;\n        if (gfp.VBR_mean_bitrate_kbps > 320) {\n            gfp.disable_reservoir = true;\n        }\n\n        /* parameters for which there is no proper set/get interface */\n        if (abr_switch_map[r].safejoint > 0)\n            gfp.exp_nspsytune = gfp.exp_nspsytune | 2;\n        /* safejoint */\n\n        if (abr_switch_map[r].sfscale > 0) {\n            gfp.internal_flags.noise_shaping = 2;\n        }\n        /* ns-bass tweaks */\n        if (Math.abs(abr_switch_map[r].nsbass) > 0) {\n            var k = (int)(abr_switch_map[r].nsbass * 4);\n            if (k < 0)\n                k += 64;\n            gfp.exp_nspsytune = gfp.exp_nspsytune | (k << 2);\n        }\n\n        if (enforce != 0)\n            gfp.quant_comp = abr_switch_map[r].quant_comp;\n        else if (!(Math.abs(gfp.quant_comp - -1) > 0))\n            gfp.quant_comp = abr_switch_map[r].quant_comp;\n        // SET_OPTION(quant_comp, abr_switch_map[r].quant_comp, -1);\n        if (enforce != 0)\n            gfp.quant_comp_short = abr_switch_map[r].quant_comp_s;\n        else if (!(Math.abs(gfp.quant_comp_short - -1) > 0))\n            gfp.quant_comp_short = abr_switch_map[r].quant_comp_s;\n        // SET_OPTION(quant_comp_short, abr_switch_map[r].quant_comp_s, -1);\n\n        if (enforce != 0)\n            gfp.msfix = abr_switch_map[r].nsmsfix;\n        else if (!(Math.abs(gfp.msfix - -1) > 0))\n            gfp.msfix = abr_switch_map[r].nsmsfix;\n        // SET_OPTION(msfix, abr_switch_map[r].nsmsfix, -1);\n\n        if (enforce != 0)\n            gfp.internal_flags.nsPsy.attackthre = abr_switch_map[r].st_lrm;\n        else if (!(Math.abs(gfp.internal_flags.nsPsy.attackthre - -1) > 0))\n            gfp.internal_flags.nsPsy.attackthre = abr_switch_map[r].st_lrm;\n        // SET_OPTION(short_threshold_lrm, abr_switch_map[r].st_lrm, -1);\n        if (enforce != 0)\n            gfp.internal_flags.nsPsy.attackthre_s = abr_switch_map[r].st_s;\n        else if (!(Math.abs(gfp.internal_flags.nsPsy.attackthre_s - -1) > 0))\n            gfp.internal_flags.nsPsy.attackthre_s = abr_switch_map[r].st_s;\n        // SET_OPTION(short_threshold_s, abr_switch_map[r].st_s, -1);\n\n        /*\n         * ABR seems to have big problems with clipping, especially at low\n         * bitrates\n         */\n        /*\n         * so we compensate for that here by using a scale value depending on\n         * bitrate\n         */\n        if (enforce != 0)\n            gfp.scale = abr_switch_map[r].scale;\n        else if (!(Math.abs(gfp.scale - -1) > 0))\n            gfp.scale = abr_switch_map[r].scale;\n        // SET_OPTION(scale, abr_switch_map[r].scale, -1);\n\n        if (enforce != 0)\n            gfp.maskingadjust = abr_switch_map[r].masking_adj;\n        else if (!(Math.abs(gfp.maskingadjust - 0) > 0))\n            gfp.maskingadjust = abr_switch_map[r].masking_adj;\n        // SET_OPTION(maskingadjust, abr_switch_map[r].masking_adj, 0);\n        if (abr_switch_map[r].masking_adj > 0) {\n            if (enforce != 0)\n                gfp.maskingadjust_short = (abr_switch_map[r].masking_adj * .9);\n            else if (!(Math.abs(gfp.maskingadjust_short - 0) > 0))\n                gfp.maskingadjust_short = (abr_switch_map[r].masking_adj * .9);\n            // SET_OPTION(maskingadjust_short, abr_switch_map[r].masking_adj *\n            // .9, 0);\n        } else {\n            if (enforce != 0)\n                gfp.maskingadjust_short = (abr_switch_map[r].masking_adj * 1.1);\n            else if (!(Math.abs(gfp.maskingadjust_short - 0) > 0))\n                gfp.maskingadjust_short = (abr_switch_map[r].masking_adj * 1.1);\n            // SET_OPTION(maskingadjust_short, abr_switch_map[r].masking_adj *\n            // 1.1, 0);\n        }\n\n        if (enforce != 0)\n            gfp.ATHlower = -abr_switch_map[r].ath_lower / 10.;\n        else if (!(Math.abs((-gfp.ATHlower * 10.) - 0) > 0))\n            gfp.ATHlower = -abr_switch_map[r].ath_lower / 10.;\n        // SET_OPTION(ATHlower, abr_switch_map[r].ath_lower, 0);\n        if (enforce != 0)\n            gfp.ATHcurve = abr_switch_map[r].ath_curve;\n        else if (!(Math.abs(gfp.ATHcurve - -1) > 0))\n            gfp.ATHcurve = abr_switch_map[r].ath_curve;\n        // SET_OPTION(ATHcurve, abr_switch_map[r].ath_curve, -1);\n\n        if (enforce != 0)\n            gfp.interChRatio = abr_switch_map[r].interch;\n        else if (!(Math.abs(gfp.interChRatio - -1) > 0))\n            gfp.interChRatio = abr_switch_map[r].interch;\n        // SET_OPTION(interChRatio, abr_switch_map[r].interch, -1);\n\n        return preset;\n    }\n\n    this.apply_preset = function(gfp, preset, enforce) {\n        /* translate legacy presets */\n        switch (preset) {\n            case Lame.R3MIX:\n            {\n                preset = Lame.V3;\n                gfp.VBR = VbrMode.vbr_mtrh;\n                break;\n            }\n            case Lame.MEDIUM:\n            {\n                preset = Lame.V4;\n                gfp.VBR = VbrMode.vbr_rh;\n                break;\n            }\n            case Lame.MEDIUM_FAST:\n            {\n                preset = Lame.V4;\n                gfp.VBR = VbrMode.vbr_mtrh;\n                break;\n            }\n            case Lame.STANDARD:\n            {\n                preset = Lame.V2;\n                gfp.VBR = VbrMode.vbr_rh;\n                break;\n            }\n            case Lame.STANDARD_FAST:\n            {\n                preset = Lame.V2;\n                gfp.VBR = VbrMode.vbr_mtrh;\n                break;\n            }\n            case Lame.EXTREME:\n            {\n                preset = Lame.V0;\n                gfp.VBR = VbrMode.vbr_rh;\n                break;\n            }\n            case Lame.EXTREME_FAST:\n            {\n                preset = Lame.V0;\n                gfp.VBR = VbrMode.vbr_mtrh;\n                break;\n            }\n            case Lame.INSANE:\n            {\n                preset = 320;\n                gfp.preset = preset;\n                apply_abr_preset(gfp, preset, enforce);\n                gfp.VBR = VbrMode.vbr_off;\n                return preset;\n            }\n        }\n\n        gfp.preset = preset;\n        {\n            switch (preset) {\n                case Lame.V9:\n                    apply_vbr_preset(gfp, 9, enforce);\n                    return preset;\n                case Lame.V8:\n                    apply_vbr_preset(gfp, 8, enforce);\n                    return preset;\n                case Lame.V7:\n                    apply_vbr_preset(gfp, 7, enforce);\n                    return preset;\n                case Lame.V6:\n                    apply_vbr_preset(gfp, 6, enforce);\n                    return preset;\n                case Lame.V5:\n                    apply_vbr_preset(gfp, 5, enforce);\n                    return preset;\n                case Lame.V4:\n                    apply_vbr_preset(gfp, 4, enforce);\n                    return preset;\n                case Lame.V3:\n                    apply_vbr_preset(gfp, 3, enforce);\n                    return preset;\n                case Lame.V2:\n                    apply_vbr_preset(gfp, 2, enforce);\n                    return preset;\n                case Lame.V1:\n                    apply_vbr_preset(gfp, 1, enforce);\n                    return preset;\n                case Lame.V0:\n                    apply_vbr_preset(gfp, 0, enforce);\n                    return preset;\n                default:\n                    break;\n            }\n        }\n        if (8 <= preset && preset <= 320) {\n            return apply_abr_preset(gfp, preset, enforce);\n        }\n\n        /* no corresponding preset found */\n        gfp.preset = 0;\n        return preset;\n    }\n\n    // Rest from getset.c:\n\n    /**\n     * VBR quality level.<BR>\n     * 0 = highest<BR>\n     * 9 = lowest\n     */\n    function lame_set_VBR_q(gfp, VBR_q) {\n        var ret = 0;\n\n        if (0 > VBR_q) {\n            /* Unknown VBR quality level! */\n            ret = -1;\n            VBR_q = 0;\n        }\n        if (9 < VBR_q) {\n            ret = -1;\n            VBR_q = 9;\n        }\n\n        gfp.VBR_q = VBR_q;\n        gfp.VBR_q_frac = 0;\n        return ret;\n    }\n\n}\n\nmodule.exports = Presets;\n","function VBRQuantize() {\n    var qupvt;\n    var tak;\n\n    this.setModules = function (_qupvt, _tk) {\n        qupvt = _qupvt;\n        tak = _tk;\n    }\n    //TODO\n\n}\n\nmodule.exports = VBRQuantize;\n","//package mp3;\n\nfunction CalcNoiseResult() {\n    /**\n     * sum of quantization noise > masking\n     */\n    this.over_noise = 0.;\n    /**\n     * sum of all quantization noise\n     */\n    this.tot_noise = 0.;\n    /**\n     * max quantization noise\n     */\n    this.max_noise = 0.;\n    /**\n     * number of quantization noise > masking\n     */\n    this.over_count = 0;\n    /**\n     * SSD-like cost of distorted bands\n     */\n    this.over_SSD = 0;\n    this.bits = 0;\n}\n\nmodule.exports = CalcNoiseResult;\n","var common = require('./common.js');\nvar new_float = common.new_float;\nvar new_int = common.new_int;\nvar assert = common.assert;\n\nfunction CalcNoiseData() {\n    this.global_gain = 0;\n    this.sfb_count1 = 0;\n    this.step = new_int(39);\n    this.noise = new_float(39);\n    this.noise_log = new_float(39);\n}\n\nmodule.exports = CalcNoiseData;\n","/*\n * MP3 quantization\n *\n *      Copyright (c) 1999-2000 Mark Taylor\n *      Copyright (c) 1999-2003 Takehiro Tominaga\n *      Copyright (c) 2000-2007 Robert Hegemann\n *      Copyright (c) 2001-2005 Gabriel Bouvigne\n *\n * This library is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 2 of the License, or (at your option) any later version.\n *\n * This library is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.     See the GNU\n * Library General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public\n * License along with this library; if not, write to the\n * Free Software Foundation, Inc., 59 Temple Place - Suite 330,\n * Boston, MA 02111-1307, USA.\n */\n\n/* $Id: Quantize.java,v 1.24 2011/05/24 20:48:06 kenchis Exp $ */\n\n//package mp3;\n\n//import java.util.Arrays;\nvar common = require('./common.js');\nvar System = common.System;\nvar VbrMode = common.VbrMode;\nvar Float = common.Float;\nvar ShortBlock = common.ShortBlock;\nvar Util = common.Util;\nvar Arrays = common.Arrays;\nvar new_array_n = common.new_array_n;\nvar new_byte = common.new_byte;\nvar new_double = common.new_double;\nvar new_float = common.new_float;\nvar new_float_n = common.new_float_n;\nvar new_int = common.new_int;\nvar new_int_n = common.new_int_n;\nvar assert = common.assert;\n\nvar VBRQuantize = require('./VBRQuantize.js');\nvar CalcNoiseResult = require('./CalcNoiseResult.js');\nvar CalcNoiseData = require('./CalcNoiseData.js');\nvar Encoder = require('./Encoder.js');\nvar GrInfo = require('./GrInfo.js');\nvar L3Side = require('./L3Side.js');\n\nfunction Quantize() {\n    var bs;\n    this.rv = null;\n    var rv;\n    this.qupvt = null;\n    var qupvt;\n\n    var vbr = new VBRQuantize();\n    var tk;\n\n    this.setModules = function (_bs, _rv, _qupvt, _tk) {\n        bs = _bs;\n        rv = _rv;\n        this.rv = _rv;\n        qupvt = _qupvt;\n        this.qupvt = _qupvt;\n        tk = _tk;\n        vbr.setModules(qupvt, tk);\n    }\n\n    /**\n     * convert from L/R <. Mid/Side\n     */\n    this.ms_convert = function (l3_side, gr) {\n        for (var i = 0; i < 576; ++i) {\n            var l = l3_side.tt[gr][0].xr[i];\n            var r = l3_side.tt[gr][1].xr[i];\n            l3_side.tt[gr][0].xr[i] = (l + r) * (Util.SQRT2 * 0.5);\n            l3_side.tt[gr][1].xr[i] = (l - r) * (Util.SQRT2 * 0.5);\n        }\n    };\n\n    /**\n     * mt 6/99\n     *\n     * initializes cod_info, scalefac and xrpow\n     *\n     * returns 0 if all energies in xr are zero, else 1\n     */\n    function init_xrpow_core(cod_info, xrpow, upper, sum) {\n        sum = 0;\n        for (var i = 0; i <= upper; ++i) {\n            var tmp = Math.abs(cod_info.xr[i]);\n            sum += tmp;\n            xrpow[i] = Math.sqrt(tmp * Math.sqrt(tmp));\n\n            if (xrpow[i] > cod_info.xrpow_max)\n                cod_info.xrpow_max = xrpow[i];\n        }\n        return sum;\n    }\n\n    this.init_xrpow = function (gfc, cod_info, xrpow) {\n        var sum = 0;\n        var upper = 0 | cod_info.max_nonzero_coeff;\n\n        assert(xrpow != null);\n        cod_info.xrpow_max = 0;\n\n        /*\n         * check if there is some energy we have to quantize and calculate xrpow\n         * matching our fresh scalefactors\n         */\n        assert(0 <= upper && upper <= 575);\n\n        Arrays.fill(xrpow, upper, 576, 0);\n\n        sum = init_xrpow_core(cod_info, xrpow, upper, sum);\n\n        /*\n         * return 1 if we have something to quantize, else 0\n         */\n        if (sum > 1E-20) {\n            var j = 0;\n            if ((gfc.substep_shaping & 2) != 0)\n                j = 1;\n\n            for (var i = 0; i < cod_info.psymax; i++)\n                gfc.pseudohalf[i] = j;\n\n            return true;\n        }\n\n        Arrays.fill(cod_info.l3_enc, 0, 576, 0);\n        return false;\n    }\n\n    /**\n     * Gabriel Bouvigne feb/apr 2003<BR>\n     * Analog silence detection in partitionned sfb21 or sfb12 for short blocks\n     *\n     * From top to bottom of sfb, changes to 0 coeffs which are below ath. It\n     * stops on the first coeff higher than ath.\n     */\n    function psfb21_analogsilence(gfc, cod_info) {\n        var ath = gfc.ATH;\n        var xr = cod_info.xr;\n\n        if (cod_info.block_type != Encoder.SHORT_TYPE) {\n            /* NORM, START or STOP type, but not SHORT blocks */\n            var stop = false;\n            for (var gsfb = Encoder.PSFB21 - 1; gsfb >= 0 && !stop; gsfb--) {\n                var start = gfc.scalefac_band.psfb21[gsfb];\n                var end = gfc.scalefac_band.psfb21[gsfb + 1];\n                var ath21 = qupvt.athAdjust(ath.adjust, ath.psfb21[gsfb],\n                    ath.floor);\n\n                if (gfc.nsPsy.longfact[21] > 1e-12)\n                    ath21 *= gfc.nsPsy.longfact[21];\n\n                for (var j = end - 1; j >= start; j--) {\n                    if (Math.abs(xr[j]) < ath21)\n                        xr[j] = 0;\n                    else {\n                        stop = true;\n                        break;\n                    }\n                }\n            }\n        } else {\n            /* note: short blocks coeffs are reordered */\n            for (var block = 0; block < 3; block++) {\n                var stop = false;\n                for (var gsfb = Encoder.PSFB12 - 1; gsfb >= 0 && !stop; gsfb--) {\n                    var start = gfc.scalefac_band.s[12]\n                        * 3\n                        + (gfc.scalefac_band.s[13] - gfc.scalefac_band.s[12])\n                        * block\n                        + (gfc.scalefac_band.psfb12[gsfb] - gfc.scalefac_band.psfb12[0]);\n                    var end = start\n                        + (gfc.scalefac_band.psfb12[gsfb + 1] - gfc.scalefac_band.psfb12[gsfb]);\n                    var ath12 = qupvt.athAdjust(ath.adjust, ath.psfb12[gsfb],\n                        ath.floor);\n\n                    if (gfc.nsPsy.shortfact[12] > 1e-12)\n                        ath12 *= gfc.nsPsy.shortfact[12];\n\n                    for (var j = end - 1; j >= start; j--) {\n                        if (Math.abs(xr[j]) < ath12)\n                            xr[j] = 0;\n                        else {\n                            stop = true;\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n\n    }\n\n    this.init_outer_loop = function (gfc, cod_info) {\n        /*\n         * initialize fresh cod_info\n         */\n        cod_info.part2_3_length = 0;\n        cod_info.big_values = 0;\n        cod_info.count1 = 0;\n        cod_info.global_gain = 210;\n        cod_info.scalefac_compress = 0;\n        /* mixed_block_flag, block_type was set in psymodel.c */\n        cod_info.table_select[0] = 0;\n        cod_info.table_select[1] = 0;\n        cod_info.table_select[2] = 0;\n        cod_info.subblock_gain[0] = 0;\n        cod_info.subblock_gain[1] = 0;\n        cod_info.subblock_gain[2] = 0;\n        cod_info.subblock_gain[3] = 0;\n        /* this one is always 0 */\n        cod_info.region0_count = 0;\n        cod_info.region1_count = 0;\n        cod_info.preflag = 0;\n        cod_info.scalefac_scale = 0;\n        cod_info.count1table_select = 0;\n        cod_info.part2_length = 0;\n        cod_info.sfb_lmax = Encoder.SBPSY_l;\n        cod_info.sfb_smin = Encoder.SBPSY_s;\n        cod_info.psy_lmax = gfc.sfb21_extra ? Encoder.SBMAX_l : Encoder.SBPSY_l;\n        cod_info.psymax = cod_info.psy_lmax;\n        cod_info.sfbmax = cod_info.sfb_lmax;\n        cod_info.sfbdivide = 11;\n        for (var sfb = 0; sfb < Encoder.SBMAX_l; sfb++) {\n            cod_info.width[sfb] = gfc.scalefac_band.l[sfb + 1]\n                - gfc.scalefac_band.l[sfb];\n            /* which is always 0. */\n            cod_info.window[sfb] = 3;\n        }\n        if (cod_info.block_type == Encoder.SHORT_TYPE) {\n            var ixwork = new_float(576);\n\n            cod_info.sfb_smin = 0;\n            cod_info.sfb_lmax = 0;\n            if (cod_info.mixed_block_flag != 0) {\n                /*\n                 * MPEG-1: sfbs 0-7 long block, 3-12 short blocks MPEG-2(.5):\n                 * sfbs 0-5 long block, 3-12 short blocks\n                 */\n                cod_info.sfb_smin = 3;\n                cod_info.sfb_lmax = gfc.mode_gr * 2 + 4;\n            }\n            cod_info.psymax = cod_info.sfb_lmax\n                + 3\n                * ((gfc.sfb21_extra ? Encoder.SBMAX_s : Encoder.SBPSY_s) - cod_info.sfb_smin);\n            cod_info.sfbmax = cod_info.sfb_lmax + 3\n                * (Encoder.SBPSY_s - cod_info.sfb_smin);\n            cod_info.sfbdivide = cod_info.sfbmax - 18;\n            cod_info.psy_lmax = cod_info.sfb_lmax;\n            /* re-order the short blocks, for more efficient encoding below */\n            /* By Takehiro TOMINAGA */\n            /*\n             * Within each scalefactor band, data is given for successive time\n             * windows, beginning with window 0 and ending with window 2. Within\n             * each window, the quantized values are then arranged in order of\n             * increasing frequency...\n             */\n            var ix = gfc.scalefac_band.l[cod_info.sfb_lmax];\n            System.arraycopy(cod_info.xr, 0, ixwork, 0, 576);\n            for (var sfb = cod_info.sfb_smin; sfb < Encoder.SBMAX_s; sfb++) {\n                var start = gfc.scalefac_band.s[sfb];\n                var end = gfc.scalefac_band.s[sfb + 1];\n                for (var window = 0; window < 3; window++) {\n                    for (var l = start; l < end; l++) {\n                        cod_info.xr[ix++] = ixwork[3 * l + window];\n                    }\n                }\n            }\n\n            var j = cod_info.sfb_lmax;\n            for (var sfb = cod_info.sfb_smin; sfb < Encoder.SBMAX_s; sfb++) {\n                cod_info.width[j] = cod_info.width[j + 1] = cod_info.width[j + 2] = gfc.scalefac_band.s[sfb + 1]\n                    - gfc.scalefac_band.s[sfb];\n                cod_info.window[j] = 0;\n                cod_info.window[j + 1] = 1;\n                cod_info.window[j + 2] = 2;\n                j += 3;\n            }\n        }\n\n        cod_info.count1bits = 0;\n        cod_info.sfb_partition_table = qupvt.nr_of_sfb_block[0][0];\n        cod_info.slen[0] = 0;\n        cod_info.slen[1] = 0;\n        cod_info.slen[2] = 0;\n        cod_info.slen[3] = 0;\n\n        cod_info.max_nonzero_coeff = 575;\n\n        /*\n         * fresh scalefactors are all zero\n         */\n        Arrays.fill(cod_info.scalefac, 0);\n\n        psfb21_analogsilence(gfc, cod_info);\n    };\n\n    function BinSearchDirection(ordinal) {\n        this.ordinal = ordinal;\n    }\n\n    BinSearchDirection.BINSEARCH_NONE = new BinSearchDirection(0);\n    BinSearchDirection.BINSEARCH_UP = new BinSearchDirection(1);\n    BinSearchDirection.BINSEARCH_DOWN = new BinSearchDirection(2);\n\n    /**\n     * author/date??\n     *\n     * binary step size search used by outer_loop to get a quantizer step size\n     * to start with\n     */\n    function bin_search_StepSize(gfc, cod_info, desired_rate, ch, xrpow) {\n        var nBits;\n        var CurrentStep = gfc.CurrentStep[ch];\n        var flagGoneOver = false;\n        var start = gfc.OldValue[ch];\n        var Direction = BinSearchDirection.BINSEARCH_NONE;\n        cod_info.global_gain = start;\n        desired_rate -= cod_info.part2_length;\n\n        assert(CurrentStep != 0);\n        for (; ;) {\n            var step;\n            nBits = tk.count_bits(gfc, xrpow, cod_info, null);\n\n            if (CurrentStep == 1 || nBits == desired_rate)\n                break;\n            /* nothing to adjust anymore */\n\n            if (nBits > desired_rate) {\n                /* increase Quantize_StepSize */\n                if (Direction == BinSearchDirection.BINSEARCH_DOWN)\n                    flagGoneOver = true;\n\n                if (flagGoneOver)\n                    CurrentStep /= 2;\n                Direction = BinSearchDirection.BINSEARCH_UP;\n                step = CurrentStep;\n            } else {\n                /* decrease Quantize_StepSize */\n                if (Direction == BinSearchDirection.BINSEARCH_UP)\n                    flagGoneOver = true;\n\n                if (flagGoneOver)\n                    CurrentStep /= 2;\n                Direction = BinSearchDirection.BINSEARCH_DOWN;\n                step = -CurrentStep;\n            }\n            cod_info.global_gain += step;\n            if (cod_info.global_gain < 0) {\n                cod_info.global_gain = 0;\n                flagGoneOver = true;\n            }\n            if (cod_info.global_gain > 255) {\n                cod_info.global_gain = 255;\n                flagGoneOver = true;\n            }\n        }\n\n        assert(cod_info.global_gain >= 0);\n        assert(cod_info.global_gain < 256);\n\n        while (nBits > desired_rate && cod_info.global_gain < 255) {\n            cod_info.global_gain++;\n            nBits = tk.count_bits(gfc, xrpow, cod_info, null);\n        }\n        gfc.CurrentStep[ch] = (start - cod_info.global_gain >= 4) ? 4 : 2;\n        gfc.OldValue[ch] = cod_info.global_gain;\n        cod_info.part2_3_length = nBits;\n        return nBits;\n    }\n\n    this.trancate_smallspectrums = function (gfc, gi, l3_xmin, work) {\n        var distort = new_float(L3Side.SFBMAX);\n\n        if ((0 == (gfc.substep_shaping & 4) && gi.block_type == Encoder.SHORT_TYPE)\n            || (gfc.substep_shaping & 0x80) != 0)\n            return;\n        qupvt.calc_noise(gi, l3_xmin, distort, new CalcNoiseResult(), null);\n        for (var j = 0; j < 576; j++) {\n            var xr = 0.0;\n            if (gi.l3_enc[j] != 0)\n                xr = Math.abs(gi.xr[j]);\n            work[j] = xr;\n        }\n\n        var j = 0;\n        var sfb = 8;\n        if (gi.block_type == Encoder.SHORT_TYPE)\n            sfb = 6;\n        do {\n            var allowedNoise, trancateThreshold;\n            var nsame, start;\n\n            var width = gi.width[sfb];\n            j += width;\n            if (distort[sfb] >= 1.0)\n                continue;\n\n            Arrays.sort(work, j - width, width);\n            if (BitStream.EQ(work[j - 1], 0.0))\n                continue;\n            /* all zero sfb */\n\n            allowedNoise = (1.0 - distort[sfb]) * l3_xmin[sfb];\n            trancateThreshold = 0.0;\n            start = 0;\n            do {\n                var noise;\n                for (nsame = 1; start + nsame < width; nsame++)\n                    if (BitStream.NEQ(work[start + j - width], work[start + j\n                        + nsame - width]))\n                        break;\n\n                noise = work[start + j - width] * work[start + j - width]\n                    * nsame;\n                if (allowedNoise < noise) {\n                    if (start != 0)\n                        trancateThreshold = work[start + j - width - 1];\n                    break;\n                }\n                allowedNoise -= noise;\n                start += nsame;\n            } while (start < width);\n            if (BitStream.EQ(trancateThreshold, 0.0))\n                continue;\n\n            do {\n                if (Math.abs(gi.xr[j - width]) <= trancateThreshold)\n                    gi.l3_enc[j - width] = 0;\n            } while (--width > 0);\n        } while (++sfb < gi.psymax);\n\n        gi.part2_3_length = tk.noquant_count_bits(gfc, gi, null);\n    };\n\n    /**\n     * author/date??\n     *\n     * Function: Returns zero if there is a scalefac which has not been\n     * amplified. Otherwise it returns one.\n     */\n    function loop_break(cod_info) {\n        for (var sfb = 0; sfb < cod_info.sfbmax; sfb++)\n            if (cod_info.scalefac[sfb]\n                + cod_info.subblock_gain[cod_info.window[sfb]] == 0)\n                return false;\n\n        return true;\n    }\n\n    /* mt 5/99: Function: Improved calc_noise for a single channel */\n\n    function penalties(noise) {\n        return Util.FAST_LOG10((0.368 + 0.632 * noise * noise * noise));\n    }\n\n    /**\n     * author/date??\n     *\n     * several different codes to decide which quantization is better\n     */\n    function get_klemm_noise(distort, gi) {\n        var klemm_noise = 1E-37;\n        for (var sfb = 0; sfb < gi.psymax; sfb++)\n            klemm_noise += penalties(distort[sfb]);\n\n        return Math.max(1e-20, klemm_noise);\n    }\n\n    function quant_compare(quant_comp, best, calc, gi, distort) {\n        /**\n         * noise is given in decibels (dB) relative to masking thesholds.<BR>\n         *\n         * over_noise: ??? (the previous comment is fully wrong)<BR>\n         * tot_noise: ??? (the previous comment is fully wrong)<BR>\n         * max_noise: max quantization noise\n         */\n        var better;\n\n        switch (quant_comp) {\n            default:\n            case 9:\n            {\n                if (best.over_count > 0) {\n                    /* there are distorted sfb */\n                    better = calc.over_SSD <= best.over_SSD;\n                    if (calc.over_SSD == best.over_SSD)\n                        better = calc.bits < best.bits;\n                } else {\n                    /* no distorted sfb */\n                    better = ((calc.max_noise < 0) && ((calc.max_noise * 10 + calc.bits) <= (best.max_noise * 10 + best.bits)));\n                }\n                break;\n            }\n\n            case 0:\n                better = calc.over_count < best.over_count\n                    || (calc.over_count == best.over_count && calc.over_noise < best.over_noise)\n                    || (calc.over_count == best.over_count\n                    && BitStream.EQ(calc.over_noise, best.over_noise) && calc.tot_noise < best.tot_noise);\n                break;\n\n            case 8:\n                calc.max_noise = get_klemm_noise(distort, gi);\n            //$FALL-THROUGH$\n            case 1:\n                better = calc.max_noise < best.max_noise;\n                break;\n            case 2:\n                better = calc.tot_noise < best.tot_noise;\n                break;\n            case 3:\n                better = (calc.tot_noise < best.tot_noise)\n                    && (calc.max_noise < best.max_noise);\n                break;\n            case 4:\n                better = (calc.max_noise <= 0.0 && best.max_noise > 0.2)\n                    || (calc.max_noise <= 0.0 && best.max_noise < 0.0\n                    && best.max_noise > calc.max_noise - 0.2 && calc.tot_noise < best.tot_noise)\n                    || (calc.max_noise <= 0.0 && best.max_noise > 0.0\n                    && best.max_noise > calc.max_noise - 0.2 && calc.tot_noise < best.tot_noise\n                    + best.over_noise)\n                    || (calc.max_noise > 0.0 && best.max_noise > -0.05\n                    && best.max_noise > calc.max_noise - 0.1 && calc.tot_noise\n                    + calc.over_noise < best.tot_noise\n                    + best.over_noise)\n                    || (calc.max_noise > 0.0 && best.max_noise > -0.1\n                    && best.max_noise > calc.max_noise - 0.15 && calc.tot_noise\n                    + calc.over_noise + calc.over_noise < best.tot_noise\n                    + best.over_noise + best.over_noise);\n                break;\n            case 5:\n                better = calc.over_noise < best.over_noise\n                    || (BitStream.EQ(calc.over_noise, best.over_noise) && calc.tot_noise < best.tot_noise);\n                break;\n            case 6:\n                better = calc.over_noise < best.over_noise\n                    || (BitStream.EQ(calc.over_noise, best.over_noise) && (calc.max_noise < best.max_noise || (BitStream\n                        .EQ(calc.max_noise, best.max_noise) && calc.tot_noise <= best.tot_noise)));\n                break;\n            case 7:\n                better = calc.over_count < best.over_count\n                    || calc.over_noise < best.over_noise;\n                break;\n        }\n\n        if (best.over_count == 0) {\n            /*\n             * If no distorted bands, only use this quantization if it is\n             * better, and if it uses less bits. Unfortunately, part2_3_length\n             * is sometimes a poor estimator of the final size at low bitrates.\n             */\n            better = better && calc.bits < best.bits;\n        }\n\n        return better;\n    }\n\n    /**\n     * author/date??\n     *\n     * <PRE>\n     *  Amplify the scalefactor bands that violate the masking threshold.\n     *  See ISO 11172-3 Section C.1.5.4.3.5\n     *\n     *  distort[] = noise/masking\n     *  distort[] > 1   ==> noise is not masked\n     *  distort[] < 1   ==> noise is masked\n     *  max_dist = maximum value of distort[]\n     *\n     *  Three algorithms:\n     *  noise_shaping_amp\n     *        0             Amplify all bands with distort[]>1.\n     *\n     *        1             Amplify all bands with distort[] >= max_dist^(.5);\n     *                     ( 50% in the db scale)\n     *\n     *        2             Amplify first band with distort[] >= max_dist;\n     *\n     *\n     *  For algorithms 0 and 1, if max_dist < 1, then amplify all bands\n     *  with distort[] >= .95*max_dist.  This is to make sure we always\n     *  amplify at least one band.\n     * </PRE>\n     */\n    function amp_scalefac_bands(gfp, cod_info, distort, xrpow, bRefine) {\n        var gfc = gfp.internal_flags;\n        var ifqstep34;\n\n        if (cod_info.scalefac_scale == 0) {\n            ifqstep34 = 1.29683955465100964055;\n            /* 2**(.75*.5) */\n        } else {\n            ifqstep34 = 1.68179283050742922612;\n            /* 2**(.75*1) */\n        }\n\n        /* compute maximum value of distort[] */\n        var trigger = 0;\n        for (var sfb = 0; sfb < cod_info.sfbmax; sfb++) {\n            if (trigger < distort[sfb])\n                trigger = distort[sfb];\n        }\n\n        var noise_shaping_amp = gfc.noise_shaping_amp;\n        if (noise_shaping_amp == 3) {\n            if (bRefine)\n                noise_shaping_amp = 2;\n            else\n                noise_shaping_amp = 1;\n        }\n        switch (noise_shaping_amp) {\n            case 2:\n                /* amplify exactly 1 band */\n                break;\n\n            case 1:\n                /* amplify bands within 50% of max (on db scale) */\n                if (trigger > 1.0)\n                    trigger = Math.pow(trigger, .5);\n                else\n                    trigger *= .95;\n                break;\n\n            case 0:\n            default:\n                /* ISO algorithm. amplify all bands with distort>1 */\n                if (trigger > 1.0)\n                    trigger = 1.0;\n                else\n                    trigger *= .95;\n                break;\n        }\n\n        var j = 0;\n        for (var sfb = 0; sfb < cod_info.sfbmax; sfb++) {\n            var width = cod_info.width[sfb];\n            var l;\n            j += width;\n            if (distort[sfb] < trigger)\n                continue;\n\n            if ((gfc.substep_shaping & 2) != 0) {\n                gfc.pseudohalf[sfb] = (0 == gfc.pseudohalf[sfb]) ? 1 : 0;\n                if (0 == gfc.pseudohalf[sfb] && gfc.noise_shaping_amp == 2)\n                    return;\n            }\n            cod_info.scalefac[sfb]++;\n            for (l = -width; l < 0; l++) {\n                xrpow[j + l] *= ifqstep34;\n                if (xrpow[j + l] > cod_info.xrpow_max)\n                    cod_info.xrpow_max = xrpow[j + l];\n            }\n\n            if (gfc.noise_shaping_amp == 2)\n                return;\n        }\n    }\n\n    /**\n     * Takehiro Tominaga 2000-xx-xx\n     *\n     * turns on scalefac scale and adjusts scalefactors\n     */\n    function inc_scalefac_scale(cod_info, xrpow) {\n        var ifqstep34 = 1.29683955465100964055;\n\n        var j = 0;\n        for (var sfb = 0; sfb < cod_info.sfbmax; sfb++) {\n            var width = cod_info.width[sfb];\n            var s = cod_info.scalefac[sfb];\n            if (cod_info.preflag != 0)\n                s += qupvt.pretab[sfb];\n            j += width;\n            if ((s & 1) != 0) {\n                s++;\n                for (var l = -width; l < 0; l++) {\n                    xrpow[j + l] *= ifqstep34;\n                    if (xrpow[j + l] > cod_info.xrpow_max)\n                        cod_info.xrpow_max = xrpow[j + l];\n                }\n            }\n            cod_info.scalefac[sfb] = s >> 1;\n        }\n        cod_info.preflag = 0;\n        cod_info.scalefac_scale = 1;\n    }\n\n    /**\n     * Takehiro Tominaga 2000-xx-xx\n     *\n     * increases the subblock gain and adjusts scalefactors\n     */\n    function inc_subblock_gain(gfc, cod_info, xrpow) {\n        var sfb;\n        var scalefac = cod_info.scalefac;\n\n        /* subbloc_gain can't do anything in the long block region */\n        for (sfb = 0; sfb < cod_info.sfb_lmax; sfb++) {\n            if (scalefac[sfb] >= 16)\n                return true;\n        }\n\n        for (var window = 0; window < 3; window++) {\n            var s1 = 0;\n            var s2 = 0;\n\n            for (sfb = cod_info.sfb_lmax + window; sfb < cod_info.sfbdivide; sfb += 3) {\n                if (s1 < scalefac[sfb])\n                    s1 = scalefac[sfb];\n            }\n            for (; sfb < cod_info.sfbmax; sfb += 3) {\n                if (s2 < scalefac[sfb])\n                    s2 = scalefac[sfb];\n            }\n\n            if (s1 < 16 && s2 < 8)\n                continue;\n\n            if (cod_info.subblock_gain[window] >= 7)\n                return true;\n\n            /*\n             * even though there is no scalefactor for sfb12 subblock gain\n             * affects upper frequencies too, that's why we have to go up to\n             * SBMAX_s\n             */\n            cod_info.subblock_gain[window]++;\n            var j = gfc.scalefac_band.l[cod_info.sfb_lmax];\n            for (sfb = cod_info.sfb_lmax + window; sfb < cod_info.sfbmax; sfb += 3) {\n                var amp;\n                var width = cod_info.width[sfb];\n                var s = scalefac[sfb];\n                assert(s >= 0);\n                s = s - (4 >> cod_info.scalefac_scale);\n                if (s >= 0) {\n                    scalefac[sfb] = s;\n                    j += width * 3;\n                    continue;\n                }\n\n                scalefac[sfb] = 0;\n                {\n                    var gain = 210 + (s << (cod_info.scalefac_scale + 1));\n                    amp = qupvt.IPOW20(gain);\n                }\n                j += width * (window + 1);\n                for (var l = -width; l < 0; l++) {\n                    xrpow[j + l] *= amp;\n                    if (xrpow[j + l] > cod_info.xrpow_max)\n                        cod_info.xrpow_max = xrpow[j + l];\n                }\n                j += width * (3 - window - 1);\n            }\n\n            {\n                var amp = qupvt.IPOW20(202);\n                j += cod_info.width[sfb] * (window + 1);\n                for (var l = -cod_info.width[sfb]; l < 0; l++) {\n                    xrpow[j + l] *= amp;\n                    if (xrpow[j + l] > cod_info.xrpow_max)\n                        cod_info.xrpow_max = xrpow[j + l];\n                }\n            }\n        }\n        return false;\n    }\n\n    /**\n     * <PRE>\n     *  Takehiro Tominaga /date??\n     *  Robert Hegemann 2000-09-06: made a function of it\n     *\n     *  amplifies scalefactor bands,\n     *   - if all are already amplified returns 0\n     *   - if some bands are amplified too much:\n     *      * try to increase scalefac_scale\n     *      * if already scalefac_scale was set\n     *          try on short blocks to increase subblock gain\n     * </PRE>\n     */\n    function balance_noise(gfp, cod_info, distort, xrpow, bRefine) {\n        var gfc = gfp.internal_flags;\n\n        amp_scalefac_bands(gfp, cod_info, distort, xrpow, bRefine);\n\n        /*\n         * check to make sure we have not amplified too much loop_break returns\n         * 0 if there is an unamplified scalefac scale_bitcount returns 0 if no\n         * scalefactors are too large\n         */\n\n        var status = loop_break(cod_info);\n\n        if (status)\n            return false;\n        /* all bands amplified */\n\n        /*\n         * not all scalefactors have been amplified. so these scalefacs are\n         * possibly valid. encode them:\n         */\n        if (gfc.mode_gr == 2)\n            status = tk.scale_bitcount(cod_info);\n        else\n            status = tk.scale_bitcount_lsf(gfc, cod_info);\n\n        if (!status)\n            return true;\n        /* amplified some bands not exceeding limits */\n\n        /*\n         * some scalefactors are too large. lets try setting scalefac_scale=1\n         */\n        if (gfc.noise_shaping > 1) {\n            Arrays.fill(gfc.pseudohalf, 0);\n            if (0 == cod_info.scalefac_scale) {\n                inc_scalefac_scale(cod_info, xrpow);\n                status = false;\n            } else {\n                if (cod_info.block_type == Encoder.SHORT_TYPE\n                    && gfc.subblock_gain > 0) {\n                    status = (inc_subblock_gain(gfc, cod_info, xrpow) || loop_break(cod_info));\n                }\n            }\n        }\n\n        if (!status) {\n            if (gfc.mode_gr == 2)\n                status = tk.scale_bitcount(cod_info);\n            else\n                status = tk.scale_bitcount_lsf(gfc, cod_info);\n        }\n        return !status;\n    }\n\n    /**\n     * <PRE>\n     *  Function: The outer iteration loop controls the masking conditions\n     *  of all scalefactorbands. It computes the best scalefac and\n     *  global gain. This module calls the inner iteration loop\n     *\n     *  mt 5/99 completely rewritten to allow for bit reservoir control,\n     *  mid/side channels with L/R or mid/side masking thresholds,\n     *  and chooses best quantization instead of last quantization when\n     *  no distortion free quantization can be found.\n     *\n     *  added VBR support mt 5/99\n     *\n     *  some code shuffle rh 9/00\n     * </PRE>\n     *\n     * @param l3_xmin\n     *            allowed distortion\n     * @param xrpow\n     *            coloured magnitudes of spectral\n     * @param targ_bits\n     *            maximum allowed bits\n     */\n    this.outer_loop = function (gfp, cod_info, l3_xmin, xrpow, ch, targ_bits) {\n        var gfc = gfp.internal_flags;\n        var cod_info_w = new GrInfo();\n        var save_xrpow = new_float(576);\n        var distort = new_float(L3Side.SFBMAX);\n        var best_noise_info = new CalcNoiseResult();\n        var better;\n        var prev_noise = new CalcNoiseData();\n        var best_part2_3_length = 9999999;\n        var bEndOfSearch = false;\n        var bRefine = false;\n        var best_ggain_pass1 = 0;\n\n        bin_search_StepSize(gfc, cod_info, targ_bits, ch, xrpow);\n\n        if (0 == gfc.noise_shaping)\n        /* fast mode, no noise shaping, we are ready */\n            return 100;\n        /* default noise_info.over_count */\n\n        /* compute the distortion in this quantization */\n        /* coefficients and thresholds both l/r (or both mid/side) */\n        qupvt.calc_noise(cod_info, l3_xmin, distort, best_noise_info,\n            prev_noise);\n        best_noise_info.bits = cod_info.part2_3_length;\n\n        cod_info_w.assign(cod_info);\n        var age = 0;\n        System.arraycopy(xrpow, 0, save_xrpow, 0, 576);\n\n        while (!bEndOfSearch) {\n            /* BEGIN MAIN LOOP */\n            do {\n                var noise_info = new CalcNoiseResult();\n                var search_limit;\n                var maxggain = 255;\n\n                /*\n                 * When quantization with no distorted bands is found, allow up\n                 * to X new unsuccesful tries in serial. This gives us more\n                 * possibilities for different quant_compare modes. Much more\n                 * than 3 makes not a big difference, it is only slower.\n                 */\n\n                if ((gfc.substep_shaping & 2) != 0) {\n                    search_limit = 20;\n                } else {\n                    search_limit = 3;\n                }\n\n                /*\n                 * Check if the last scalefactor band is distorted. in VBR mode\n                 * we can't get rid of the distortion, so quit now and VBR mode\n                 * will try again with more bits. (makes a 10% speed increase,\n                 * the files I tested were binary identical, 2000/05/20 Robert\n                 * Hegemann) distort[] > 1 means noise > allowed noise\n                 */\n                if (gfc.sfb21_extra) {\n                    if (distort[cod_info_w.sfbmax] > 1.0)\n                        break;\n                    if (cod_info_w.block_type == Encoder.SHORT_TYPE\n                        && (distort[cod_info_w.sfbmax + 1] > 1.0 || distort[cod_info_w.sfbmax + 2] > 1.0))\n                        break;\n                }\n\n                /* try a new scalefactor conbination on cod_info_w */\n                if (!balance_noise(gfp, cod_info_w, distort, xrpow, bRefine))\n                    break;\n                if (cod_info_w.scalefac_scale != 0)\n                    maxggain = 254;\n\n                /*\n                 * inner_loop starts with the initial quantization step computed\n                 * above and slowly increases until the bits < huff_bits. Thus\n                 * it is important not to start with too large of an inital\n                 * quantization step. Too small is ok, but inner_loop will take\n                 * longer\n                 */\n                var huff_bits = targ_bits - cod_info_w.part2_length;\n                if (huff_bits <= 0)\n                    break;\n\n                /*\n                 * increase quantizer stepsize until needed bits are below\n                 * maximum\n                 */\n                while ((cod_info_w.part2_3_length = tk.count_bits(gfc, xrpow,\n                    cod_info_w, prev_noise)) > huff_bits\n                && cod_info_w.global_gain <= maxggain)\n                    cod_info_w.global_gain++;\n\n                if (cod_info_w.global_gain > maxggain)\n                    break;\n\n                if (best_noise_info.over_count == 0) {\n\n                    while ((cod_info_w.part2_3_length = tk.count_bits(gfc,\n                        xrpow, cod_info_w, prev_noise)) > best_part2_3_length\n                    && cod_info_w.global_gain <= maxggain)\n                        cod_info_w.global_gain++;\n\n                    if (cod_info_w.global_gain > maxggain)\n                        break;\n                }\n\n                /* compute the distortion in this quantization */\n                qupvt.calc_noise(cod_info_w, l3_xmin, distort, noise_info,\n                    prev_noise);\n                noise_info.bits = cod_info_w.part2_3_length;\n\n                /*\n                 * check if this quantization is better than our saved\n                 * quantization\n                 */\n                if (cod_info.block_type != Encoder.SHORT_TYPE) {\n                    // NORM, START or STOP type\n                    better = gfp.quant_comp;\n                } else\n                    better = gfp.quant_comp_short;\n\n                better = quant_compare(better, best_noise_info, noise_info,\n                    cod_info_w, distort) ? 1 : 0;\n\n                /* save data so we can restore this quantization later */\n                if (better != 0) {\n                    best_part2_3_length = cod_info.part2_3_length;\n                    best_noise_info = noise_info;\n                    cod_info.assign(cod_info_w);\n                    age = 0;\n                    /* save data so we can restore this quantization later */\n                    /* store for later reuse */\n                    System.arraycopy(xrpow, 0, save_xrpow, 0, 576);\n                } else {\n                    /* early stop? */\n                    if (gfc.full_outer_loop == 0) {\n                        if (++age > search_limit\n                            && best_noise_info.over_count == 0)\n                            break;\n                        if ((gfc.noise_shaping_amp == 3) && bRefine && age > 30)\n                            break;\n                        if ((gfc.noise_shaping_amp == 3)\n                            && bRefine\n                            && (cod_info_w.global_gain - best_ggain_pass1) > 15)\n                            break;\n                    }\n                }\n            } while ((cod_info_w.global_gain + cod_info_w.scalefac_scale) < 255);\n\n            if (gfc.noise_shaping_amp == 3) {\n                if (!bRefine) {\n                    /* refine search */\n                    cod_info_w.assign(cod_info);\n                    System.arraycopy(save_xrpow, 0, xrpow, 0, 576);\n                    age = 0;\n                    best_ggain_pass1 = cod_info_w.global_gain;\n\n                    bRefine = true;\n                } else {\n                    /* search already refined, stop */\n                    bEndOfSearch = true;\n                }\n\n            } else {\n                bEndOfSearch = true;\n            }\n        }\n\n        assert((cod_info.global_gain + cod_info.scalefac_scale) <= 255);\n        /*\n         * finish up\n         */\n        if (gfp.VBR == VbrMode.vbr_rh || gfp.VBR == VbrMode.vbr_mtrh)\n        /* restore for reuse on next try */\n            System.arraycopy(save_xrpow, 0, xrpow, 0, 576);\n        /*\n         * do the 'substep shaping'\n         */\n        else if ((gfc.substep_shaping & 1) != 0)\n            trancate_smallspectrums(gfc, cod_info, l3_xmin, xrpow);\n\n        return best_noise_info.over_count;\n    }\n\n    /**\n     * Robert Hegemann 2000-09-06\n     *\n     * update reservoir status after FINAL quantization/bitrate\n     */\n    this.iteration_finish_one = function (gfc, gr, ch) {\n        var l3_side = gfc.l3_side;\n        var cod_info = l3_side.tt[gr][ch];\n\n        /*\n         * try some better scalefac storage\n         */\n        tk.best_scalefac_store(gfc, gr, ch, l3_side);\n\n        /*\n         * best huffman_divide may save some bits too\n         */\n        if (gfc.use_best_huffman == 1)\n            tk.best_huffman_divide(gfc, cod_info);\n\n        /*\n         * update reservoir status after FINAL quantization/bitrate\n         */\n        rv.ResvAdjust(gfc, cod_info);\n    };\n\n    /**\n     *\n     * 2000-09-04 Robert Hegemann\n     *\n     * @param l3_xmin\n     *            allowed distortion of the scalefactor\n     * @param xrpow\n     *            coloured magnitudes of spectral values\n     */\n    this.VBR_encode_granule = function (gfp, cod_info, l3_xmin, xrpow, ch, min_bits, max_bits) {\n        var gfc = gfp.internal_flags;\n        var bst_cod_info = new GrInfo();\n        var bst_xrpow = new_float(576);\n        var Max_bits = max_bits;\n        var real_bits = max_bits + 1;\n        var this_bits = (max_bits + min_bits) / 2;\n        var dbits, over, found = 0;\n        var sfb21_extra = gfc.sfb21_extra;\n\n        assert(Max_bits <= LameInternalFlags.MAX_BITS_PER_CHANNEL);\n        Arrays.fill(bst_cod_info.l3_enc, 0);\n\n        /*\n         * search within round about 40 bits of optimal\n         */\n        do {\n            assert(this_bits >= min_bits);\n            assert(this_bits <= max_bits);\n            assert(min_bits <= max_bits);\n\n            if (this_bits > Max_bits - 42)\n                gfc.sfb21_extra = false;\n            else\n                gfc.sfb21_extra = sfb21_extra;\n\n            over = outer_loop(gfp, cod_info, l3_xmin, xrpow, ch, this_bits);\n\n            /*\n             * is quantization as good as we are looking for ? in this case: is\n             * no scalefactor band distorted?\n             */\n            if (over <= 0) {\n                found = 1;\n                /*\n                 * now we know it can be done with \"real_bits\" and maybe we can\n                 * skip some iterations\n                 */\n                real_bits = cod_info.part2_3_length;\n\n                /*\n                 * store best quantization so far\n                 */\n                bst_cod_info.assign(cod_info);\n                System.arraycopy(xrpow, 0, bst_xrpow, 0, 576);\n\n                /*\n                 * try with fewer bits\n                 */\n                max_bits = real_bits - 32;\n                dbits = max_bits - min_bits;\n                this_bits = (max_bits + min_bits) / 2;\n            } else {\n                /*\n                 * try with more bits\n                 */\n                min_bits = this_bits + 32;\n                dbits = max_bits - min_bits;\n                this_bits = (max_bits + min_bits) / 2;\n\n                if (found != 0) {\n                    found = 2;\n                    /*\n                     * start again with best quantization so far\n                     */\n                    cod_info.assign(bst_cod_info);\n                    System.arraycopy(bst_xrpow, 0, xrpow, 0, 576);\n                }\n            }\n        } while (dbits > 12);\n\n        gfc.sfb21_extra = sfb21_extra;\n\n        /*\n         * found=0 => nothing found, use last one found=1 => we just found the\n         * best and left the loop found=2 => we restored a good one and have now\n         * l3_enc to restore too\n         */\n        if (found == 2) {\n            System.arraycopy(bst_cod_info.l3_enc, 0, cod_info.l3_enc, 0, 576);\n        }\n        assert(cod_info.part2_3_length <= Max_bits);\n    }\n\n    /**\n     * Robert Hegemann 2000-09-05\n     *\n     * calculates * how many bits are available for analog silent granules * how\n     * many bits to use for the lowest allowed bitrate * how many bits each\n     * bitrate would provide\n     */\n    this.get_framebits = function (gfp, frameBits) {\n        var gfc = gfp.internal_flags;\n\n        /*\n         * always use at least this many bits per granule per channel unless we\n         * detect analog silence, see below\n         */\n        gfc.bitrate_index = gfc.VBR_min_bitrate;\n        var bitsPerFrame = bs.getframebits(gfp);\n\n        /*\n         * bits for analog silence\n         */\n        gfc.bitrate_index = 1;\n        bitsPerFrame = bs.getframebits(gfp);\n\n        for (var i = 1; i <= gfc.VBR_max_bitrate; i++) {\n            gfc.bitrate_index = i;\n            var mb = new MeanBits(bitsPerFrame);\n            frameBits[i] = rv.ResvFrameBegin(gfp, mb);\n            bitsPerFrame = mb.bits;\n        }\n    };\n\n    /* RH: this one needs to be overhauled sometime */\n\n    /**\n     * <PRE>\n     *  2000-09-04 Robert Hegemann\n     *\n     *  * converts LR to MS coding when necessary\n     *  * calculates allowed/adjusted quantization noise amounts\n     *  * detects analog silent frames\n     *\n     *  some remarks:\n     *  - lower masking depending on Quality setting\n     *  - quality control together with adjusted ATH MDCT scaling\n     *    on lower quality setting allocate more noise from\n     *    ATH masking, and on higher quality setting allocate\n     *    less noise from ATH masking.\n     *  - experiments show that going more than 2dB over GPSYCHO's\n     *    limits ends up in very annoying artefacts\n     * </PRE>\n     */\n    this.VBR_old_prepare = function (gfp, pe, ms_ener_ratio, ratio, l3_xmin, frameBits, min_bits,\n                                     max_bits, bands) {\n        var gfc = gfp.internal_flags;\n\n        var masking_lower_db, adjust = 0.0;\n        var analog_silence = 1;\n        var bits = 0;\n\n        gfc.bitrate_index = gfc.VBR_max_bitrate;\n        var avg = rv.ResvFrameBegin(gfp, new MeanBits(0)) / gfc.mode_gr;\n\n        get_framebits(gfp, frameBits);\n\n        for (var gr = 0; gr < gfc.mode_gr; gr++) {\n            var mxb = qupvt.on_pe(gfp, pe, max_bits[gr], avg, gr, 0);\n            if (gfc.mode_ext == Encoder.MPG_MD_MS_LR) {\n                ms_convert(gfc.l3_side, gr);\n                qupvt.reduce_side(max_bits[gr], ms_ener_ratio[gr], avg, mxb);\n            }\n            for (var ch = 0; ch < gfc.channels_out; ++ch) {\n                var cod_info = gfc.l3_side.tt[gr][ch];\n\n                if (cod_info.block_type != Encoder.SHORT_TYPE) {\n                    // NORM, START or STOP type\n                    adjust = 1.28 / (1 + Math\n                            .exp(3.5 - pe[gr][ch] / 300.)) - 0.05;\n                    masking_lower_db = gfc.PSY.mask_adjust - adjust;\n                } else {\n                    adjust = 2.56 / (1 + Math\n                            .exp(3.5 - pe[gr][ch] / 300.)) - 0.14;\n                    masking_lower_db = gfc.PSY.mask_adjust_short - adjust;\n                }\n                gfc.masking_lower = Math.pow(10.0,\n                    masking_lower_db * 0.1);\n\n                init_outer_loop(gfc, cod_info);\n                bands[gr][ch] = qupvt.calc_xmin(gfp, ratio[gr][ch], cod_info,\n                    l3_xmin[gr][ch]);\n                if (bands[gr][ch] != 0)\n                    analog_silence = 0;\n\n                min_bits[gr][ch] = 126;\n\n                bits += max_bits[gr][ch];\n            }\n        }\n        for (var gr = 0; gr < gfc.mode_gr; gr++) {\n            for (var ch = 0; ch < gfc.channels_out; ch++) {\n                if (bits > frameBits[gfc.VBR_max_bitrate]) {\n                    max_bits[gr][ch] *= frameBits[gfc.VBR_max_bitrate];\n                    max_bits[gr][ch] /= bits;\n                }\n                if (min_bits[gr][ch] > max_bits[gr][ch])\n                    min_bits[gr][ch] = max_bits[gr][ch];\n\n            }\n            /* for ch */\n        }\n        /* for gr */\n\n        return analog_silence;\n    };\n\n    this.bitpressure_strategy = function (gfc, l3_xmin, min_bits, max_bits) {\n        for (var gr = 0; gr < gfc.mode_gr; gr++) {\n            for (var ch = 0; ch < gfc.channels_out; ch++) {\n                var gi = gfc.l3_side.tt[gr][ch];\n                var pxmin = l3_xmin[gr][ch];\n                var pxminPos = 0;\n                for (var sfb = 0; sfb < gi.psy_lmax; sfb++)\n                    pxmin[pxminPos++] *= 1. + .029 * sfb * sfb\n                        / Encoder.SBMAX_l / Encoder.SBMAX_l;\n\n                if (gi.block_type == Encoder.SHORT_TYPE) {\n                    for (var sfb = gi.sfb_smin; sfb < Encoder.SBMAX_s; sfb++) {\n                        pxmin[pxminPos++] *= 1. + .029 * sfb * sfb\n                            / Encoder.SBMAX_s / Encoder.SBMAX_s;\n                        pxmin[pxminPos++] *= 1. + .029 * sfb * sfb\n                            / Encoder.SBMAX_s / Encoder.SBMAX_s;\n                        pxmin[pxminPos++] *= 1. + .029 * sfb * sfb\n                            / Encoder.SBMAX_s / Encoder.SBMAX_s;\n                    }\n                }\n                max_bits[gr][ch] = 0 | Math.max(min_bits[gr][ch],\n                        0.9 * max_bits[gr][ch]);\n            }\n        }\n    };\n\n    this.VBR_new_prepare = function (gfp, pe, ratio, l3_xmin, frameBits, max_bits) {\n        var gfc = gfp.internal_flags;\n\n        var analog_silence = 1;\n        var avg = 0, bits = 0;\n        var maximum_framebits;\n\n        if (!gfp.free_format) {\n            gfc.bitrate_index = gfc.VBR_max_bitrate;\n\n            var mb = new MeanBits(avg);\n            rv.ResvFrameBegin(gfp, mb);\n            avg = mb.bits;\n\n            get_framebits(gfp, frameBits);\n            maximum_framebits = frameBits[gfc.VBR_max_bitrate];\n        } else {\n            gfc.bitrate_index = 0;\n            var mb = new MeanBits(avg);\n            maximum_framebits = rv.ResvFrameBegin(gfp, mb);\n            avg = mb.bits;\n            frameBits[0] = maximum_framebits;\n        }\n\n        for (var gr = 0; gr < gfc.mode_gr; gr++) {\n            qupvt.on_pe(gfp, pe, max_bits[gr], avg, gr, 0);\n            if (gfc.mode_ext == Encoder.MPG_MD_MS_LR) {\n                ms_convert(gfc.l3_side, gr);\n            }\n            for (var ch = 0; ch < gfc.channels_out; ++ch) {\n                var cod_info = gfc.l3_side.tt[gr][ch];\n\n                gfc.masking_lower = Math.pow(10.0,\n                    gfc.PSY.mask_adjust * 0.1);\n\n                init_outer_loop(gfc, cod_info);\n                if (0 != qupvt.calc_xmin(gfp, ratio[gr][ch], cod_info,\n                        l3_xmin[gr][ch]))\n                    analog_silence = 0;\n\n                bits += max_bits[gr][ch];\n            }\n        }\n        for (var gr = 0; gr < gfc.mode_gr; gr++) {\n            for (var ch = 0; ch < gfc.channels_out; ch++) {\n                if (bits > maximum_framebits) {\n                    max_bits[gr][ch] *= maximum_framebits;\n                    max_bits[gr][ch] /= bits;\n                }\n\n            }\n            /* for ch */\n        }\n        /* for gr */\n\n        return analog_silence;\n    };\n\n    /**\n     * calculates target bits for ABR encoding\n     *\n     * mt 2000/05/31\n     */\n    this.calc_target_bits = function (gfp, pe, ms_ener_ratio, targ_bits, analog_silence_bits, max_frame_bits) {\n        var gfc = gfp.internal_flags;\n        var l3_side = gfc.l3_side;\n        var res_factor;\n        var gr, ch, totbits, mean_bits = 0;\n\n        gfc.bitrate_index = gfc.VBR_max_bitrate;\n        var mb = new MeanBits(mean_bits);\n        max_frame_bits[0] = rv.ResvFrameBegin(gfp, mb);\n        mean_bits = mb.bits;\n\n        gfc.bitrate_index = 1;\n        mean_bits = bs.getframebits(gfp) - gfc.sideinfo_len * 8;\n        analog_silence_bits[0] = mean_bits / (gfc.mode_gr * gfc.channels_out);\n\n        mean_bits = gfp.VBR_mean_bitrate_kbps * gfp.framesize * 1000;\n        if ((gfc.substep_shaping & 1) != 0)\n            mean_bits *= 1.09;\n        mean_bits /= gfp.out_samplerate;\n        mean_bits -= gfc.sideinfo_len * 8;\n        mean_bits /= (gfc.mode_gr * gfc.channels_out);\n\n        /**\n         * <PRE>\n         *           res_factor is the percentage of the target bitrate that should\n         *           be used on average.  the remaining bits are added to the\n         *           bitreservoir and used for difficult to encode frames.\n         *\n         *           Since we are tracking the average bitrate, we should adjust\n         *           res_factor \"on the fly\", increasing it if the average bitrate\n         *           is greater than the requested bitrate, and decreasing it\n         *           otherwise.  Reasonable ranges are from .9 to 1.0\n         *\n         *           Until we get the above suggestion working, we use the following\n         *           tuning:\n         *           compression ratio    res_factor\n         *           5.5  (256kbps)         1.0      no need for bitreservoir\n         *           11   (128kbps)         .93      7% held for reservoir\n         *\n         *           with linear interpolation for other values.\n         * </PRE>\n         */\n        res_factor = .93 + .07 * (11.0 - gfp.compression_ratio)\n            / (11.0 - 5.5);\n        if (res_factor < .90)\n            res_factor = .90;\n        if (res_factor > 1.00)\n            res_factor = 1.00;\n\n        for (gr = 0; gr < gfc.mode_gr; gr++) {\n            var sum = 0;\n            for (ch = 0; ch < gfc.channels_out; ch++) {\n                targ_bits[gr][ch] = (int)(res_factor * mean_bits);\n\n                if (pe[gr][ch] > 700) {\n                    var add_bits = (int)((pe[gr][ch] - 700) / 1.4);\n\n                    var cod_info = l3_side.tt[gr][ch];\n                    targ_bits[gr][ch] = (int)(res_factor * mean_bits);\n\n                    /* short blocks use a little extra, no matter what the pe */\n                    if (cod_info.block_type == Encoder.SHORT_TYPE) {\n                        if (add_bits < mean_bits / 2)\n                            add_bits = mean_bits / 2;\n                    }\n                    /* at most increase bits by 1.5*average */\n                    if (add_bits > mean_bits * 3 / 2)\n                        add_bits = mean_bits * 3 / 2;\n                    else if (add_bits < 0)\n                        add_bits = 0;\n\n                    targ_bits[gr][ch] += add_bits;\n                }\n                if (targ_bits[gr][ch] > LameInternalFlags.MAX_BITS_PER_CHANNEL) {\n                    targ_bits[gr][ch] = LameInternalFlags.MAX_BITS_PER_CHANNEL;\n                }\n                sum += targ_bits[gr][ch];\n            }\n            /* for ch */\n            if (sum > LameInternalFlags.MAX_BITS_PER_GRANULE) {\n                for (ch = 0; ch < gfc.channels_out; ++ch) {\n                    targ_bits[gr][ch] *= LameInternalFlags.MAX_BITS_PER_GRANULE;\n                    targ_bits[gr][ch] /= sum;\n                }\n            }\n        }\n        /* for gr */\n\n        if (gfc.mode_ext == Encoder.MPG_MD_MS_LR)\n            for (gr = 0; gr < gfc.mode_gr; gr++) {\n                qupvt.reduce_side(targ_bits[gr], ms_ener_ratio[gr], mean_bits\n                    * gfc.channels_out,\n                    LameInternalFlags.MAX_BITS_PER_GRANULE);\n            }\n\n        /*\n         * sum target bits\n         */\n        totbits = 0;\n        for (gr = 0; gr < gfc.mode_gr; gr++) {\n            for (ch = 0; ch < gfc.channels_out; ch++) {\n                if (targ_bits[gr][ch] > LameInternalFlags.MAX_BITS_PER_CHANNEL)\n                    targ_bits[gr][ch] = LameInternalFlags.MAX_BITS_PER_CHANNEL;\n                totbits += targ_bits[gr][ch];\n            }\n        }\n\n        /*\n         * repartion target bits if needed\n         */\n        if (totbits > max_frame_bits[0]) {\n            for (gr = 0; gr < gfc.mode_gr; gr++) {\n                for (ch = 0; ch < gfc.channels_out; ch++) {\n                    targ_bits[gr][ch] *= max_frame_bits[0];\n                    targ_bits[gr][ch] /= totbits;\n                }\n            }\n        }\n    }\n\n}\n\nmodule.exports = Quantize;\n","/*\n *      bit reservoir source file\n *\n *      Copyright (c) 1999-2000 Mark Taylor\n *\n * This library is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 2 of the License, or (at your option) any later version.\n *\n * This library is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Library General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public\n * License along with this library; if not, write to the\n * Free Software Foundation, Inc., 59 Temple Place - Suite 330,\n * Boston, MA 02111-1307, USA.\n */\n\n/* $Id: Reservoir.java,v 1.9 2011/05/24 20:48:06 kenchis Exp $ */\n\n//package mp3;\n\n/**\n * ResvFrameBegin:<BR>\n * Called (repeatedly) at the beginning of a frame. Updates the maximum size of\n * the reservoir, and checks to make sure main_data_begin was set properly by\n * the formatter<BR>\n * Background information:\n * \n * This is the original text from the ISO standard. Because of sooo many bugs\n * and irritations correcting comments are added in brackets []. A '^W' means\n * you should remove the last word.\n * \n * <PRE>\n *  1. The following rule can be used to calculate the maximum\n *     number of bits used for one granule [^W frame]:<BR>\n *     At the highest possible bitrate of Layer III (320 kbps\n *     per stereo signal [^W^W^W], 48 kHz) the frames must be of\n *     [^W^W^W are designed to have] constant length, i.e.\n *     one buffer [^W^W the frame] length is:<BR>\n * \n *         320 kbps * 1152/48 kHz = 7680 bit = 960 byte\n * \n *     This value is used as the maximum buffer per channel [^W^W] at\n *     lower bitrates [than 320 kbps]. At 64 kbps mono or 128 kbps\n *     stereo the main granule length is 64 kbps * 576/48 kHz = 768 bit\n *     [per granule and channel] at 48 kHz sampling frequency.\n *     This means that there is a maximum deviation (short time buffer\n *     [= reservoir]) of 7680 - 2*2*768 = 4608 bits is allowed at 64 kbps.\n *     The actual deviation is equal to the number of bytes [with the\n *     meaning of octets] denoted by the main_data_end offset pointer.\n *     The actual maximum deviation is (2^9-1)*8 bit = 4088 bits\n *     [for MPEG-1 and (2^8-1)*8 bit for MPEG-2, both are hard limits].\n *     ... The xchange of buffer bits between the left and right channel\n *     is allowed without restrictions [exception: dual channel].\n *     Because of the [constructed] constraint on the buffer size\n *     main_data_end is always set to 0 in the case of bit_rate_index==14,\n *     i.e. data rate 320 kbps per stereo signal [^W^W^W]. In this case\n *     all data are allocated between adjacent header [^W sync] words\n *     [, i.e. there is no buffering at all].\n * </PRE>\n */\n\nvar common = require('./common.js');\nvar assert = common.assert;\n\nfunction Reservoir() {\n\tvar bs;\n\n\tthis.setModules  = function(_bs) {\n\t\tbs = _bs;\n\t}\n\n\tthis.ResvFrameBegin = function(gfp, mean_bits) {\n\t\tvar gfc = gfp.internal_flags;\n\t\tvar maxmp3buf;\n\t\tvar l3_side = gfc.l3_side;\n\n\t\tvar frameLength = bs.getframebits(gfp);\n\t\tmean_bits.bits = (frameLength - gfc.sideinfo_len * 8) / gfc.mode_gr;\n\n\t\t/**\n\t\t * <PRE>\n\t\t *  Meaning of the variables:\n\t\t *      resvLimit: (0, 8, ..., 8*255 (MPEG-2), 8*511 (MPEG-1))\n\t\t *          Number of bits can be stored in previous frame(s) due to\n\t\t *          counter size constaints\n\t\t *      maxmp3buf: ( ??? ... 8*1951 (MPEG-1 and 2), 8*2047 (MPEG-2.5))\n\t\t *          Number of bits allowed to encode one frame (you can take 8*511 bit\n\t\t *          from the bit reservoir and at most 8*1440 bit from the current\n\t\t *          frame (320 kbps, 32 kHz), so 8*1951 bit is the largest possible\n\t\t *          value for MPEG-1 and -2)\n\t\t * \n\t\t *          maximum allowed granule/channel size times 4 = 8*2047 bits.,\n\t\t *          so this is the absolute maximum supported by the format.\n\t\t * \n\t\t * \n\t\t *      fullFrameBits:  maximum number of bits available for encoding\n\t\t *                      the current frame.\n\t\t * \n\t\t *      mean_bits:      target number of bits per granule.\n\t\t * \n\t\t *      frameLength:\n\t\t * \n\t\t *      gfc.ResvMax:   maximum allowed reservoir\n\t\t * \n\t\t *      gfc.ResvSize:  current reservoir size\n\t\t * \n\t\t *      l3_side.resvDrain_pre:\n\t\t *         ancillary data to be added to previous frame:\n\t\t *         (only usefull in VBR modes if it is possible to have\n\t\t *         maxmp3buf < fullFrameBits)).  Currently disabled,\n\t\t *         see #define NEW_DRAIN\n\t\t *         2010-02-13: RH now enabled, it seems to be needed for CBR too,\n\t\t *                     as there exists one example, where the FhG decoder\n\t\t *                     can't decode a -b320 CBR file anymore.\n\t\t * \n\t\t *      l3_side.resvDrain_post:\n\t\t *         ancillary data to be added to this frame:\n\t\t * \n\t\t * </PRE>\n\t\t */\n\n\t\t/* main_data_begin has 9 bits in MPEG-1, 8 bits MPEG-2 */\n\t\tvar resvLimit = (8 * 256) * gfc.mode_gr - 8;\n\n\t\t/*\n\t\t * maximum allowed frame size. dont use more than this number of bits,\n\t\t * even if the frame has the space for them:\n\t\t */\n\t\tif (gfp.brate > 320) {\n\t\t\t/* in freeformat the buffer is constant */\n\t\t\tmaxmp3buf = 8 * ((int) ((gfp.brate * 1000)\n\t\t\t\t\t/ (gfp.out_samplerate / 1152) / 8 + .5));\n\t\t} else {\n\t\t\t/*\n\t\t\t * all mp3 decoders should have enough buffer to handle this value:\n\t\t\t * size of a 320kbps 32kHz frame\n\t\t\t */\n\t\t\tmaxmp3buf = 8 * 1440;\n\n\t\t\t/*\n\t\t\t * Bouvigne suggests this more lax interpretation of the ISO doc\n\t\t\t * instead of using 8*960.\n\t\t\t */\n\n\t\t\tif (gfp.strict_ISO) {\n\t\t\t\tmaxmp3buf = 8 * ((int) (320000 / (gfp.out_samplerate / 1152) / 8 + .5));\n\t\t\t}\n\t\t}\n\n\t\tgfc.ResvMax = maxmp3buf - frameLength;\n\t\tif (gfc.ResvMax > resvLimit)\n\t\t\tgfc.ResvMax = resvLimit;\n\t\tif (gfc.ResvMax < 0 || gfp.disable_reservoir)\n\t\t\tgfc.ResvMax = 0;\n\n\t\tvar fullFrameBits = mean_bits.bits * gfc.mode_gr\n\t\t\t\t+ Math.min(gfc.ResvSize, gfc.ResvMax);\n\n\t\tif (fullFrameBits > maxmp3buf)\n\t\t\tfullFrameBits = maxmp3buf;\n\n\t\tassert (0 == gfc.ResvMax % 8);\n\t\tassert (gfc.ResvMax >= 0);\n\n\t\tl3_side.resvDrain_pre = 0;\n\n\t\t// frame analyzer code\n\t\tif (gfc.pinfo != null) {\n\t\t\t/*\n\t\t\t * expected bits per channel per granule [is this also right for\n\t\t\t * mono/stereo, MPEG-1/2 ?]\n\t\t\t */\n\t\t\tgfc.pinfo.mean_bits = mean_bits.bits / 2;\n\t\t\tgfc.pinfo.resvsize = gfc.ResvSize;\n\t\t}\n\n\t\treturn fullFrameBits;\n\t}\n\n\t/**\n\t * returns targ_bits: target number of bits to use for 1 granule<BR>\n\t * extra_bits: amount extra available from reservoir<BR>\n\t * Mark Taylor 4/99\n\t */\n\tthis.ResvMaxBits = function(gfp, mean_bits, targ_bits, cbr) {\n\t\tvar gfc = gfp.internal_flags;\n\t\tvar add_bits;\n        var ResvSize = gfc.ResvSize, ResvMax = gfc.ResvMax;\n\n\t\t/* compensate the saved bits used in the 1st granule */\n\t\tif (cbr != 0)\n\t\t\tResvSize += mean_bits;\n\n\t\tif ((gfc.substep_shaping & 1) != 0)\n\t\t\tResvMax *= 0.9;\n\n\t\ttarg_bits.bits = mean_bits;\n\n\t\t/* extra bits if the reservoir is almost full */\n\t\tif (ResvSize * 10 > ResvMax * 9) {\n\t\t\tadd_bits = ResvSize - (ResvMax * 9) / 10;\n\t\t\ttarg_bits.bits += add_bits;\n\t\t\tgfc.substep_shaping |= 0x80;\n\t\t} else {\n\t\t\tadd_bits = 0;\n\t\t\tgfc.substep_shaping &= 0x7f;\n\t\t\t/*\n\t\t\t * build up reservoir. this builds the reservoir a little slower\n\t\t\t * than FhG. It could simple be mean_bits/15, but this was rigged to\n\t\t\t * always produce 100 (the old value) at 128kbs\n\t\t\t */\n\t\t\tif (!gfp.disable_reservoir && 0 == (gfc.substep_shaping & 1))\n\t\t\t\ttarg_bits.bits -= .1 * mean_bits;\n\t\t}\n\n\t\t/* amount from the reservoir we are allowed to use. ISO says 6/10 */\n\t\tvar extra_bits = (ResvSize < (gfc.ResvMax * 6) / 10 ? ResvSize\n\t\t\t\t: (gfc.ResvMax * 6) / 10);\n\t\textra_bits -= add_bits;\n\n\t\tif (extra_bits < 0)\n\t\t\textra_bits = 0;\n\t\treturn extra_bits;\n\t}\n\n\t/**\n\t * Called after a granule's bit allocation. Readjusts the size of the\n\t * reservoir to reflect the granule's usage.\n\t */\n\tthis.ResvAdjust = function(gfc, gi) {\n\t\tgfc.ResvSize -= gi.part2_3_length + gi.part2_length;\n\t}\n\n\t/**\n\t * Called after all granules in a frame have been allocated. Makes sure that\n\t * the reservoir size is within limits, possibly by adding stuffing bits.\n\t */\n\tthis.ResvFrameEnd = function(gfc, mean_bits) {\n\t\tvar over_bits;\n\t\tvar l3_side = gfc.l3_side;\n\n\t\tgfc.ResvSize += mean_bits * gfc.mode_gr;\n\t\tvar stuffingBits = 0;\n\t\tl3_side.resvDrain_post = 0;\n\t\tl3_side.resvDrain_pre = 0;\n\n\t\t/* we must be byte aligned */\n\t\tif ((over_bits = gfc.ResvSize % 8) != 0)\n\t\t\tstuffingBits += over_bits;\n\n\t\tover_bits = (gfc.ResvSize - stuffingBits) - gfc.ResvMax;\n\t\tif (over_bits > 0) {\n\t\t\tassert (0 == over_bits % 8);\n\t\t\tassert (over_bits >= 0);\n\t\t\tstuffingBits += over_bits;\n\t\t}\n\n\t\t/*\n\t\t * NOTE: enabling the NEW_DRAIN code fixes some problems with FhG\n\t\t * decoder shipped with MS Windows operating systems. Using this, it is\n\t\t * even possible to use Gabriel's lax buffer consideration again, which\n\t\t * assumes, any decoder should have a buffer large enough for a 320 kbps\n\t\t * frame at 32 kHz sample rate.\n\t\t * \n\t\t * old drain code: lame -b320 BlackBird.wav --. does not play with\n\t\t * GraphEdit.exe using FhG decoder V1.5 Build 50\n\t\t * \n\t\t * new drain code: lame -b320 BlackBird.wav --. plays fine with\n\t\t * GraphEdit.exe using FhG decoder V1.5 Build 50\n\t\t * \n\t\t * Robert Hegemann, 2010-02-13.\n\t\t */\n\t\t/*\n\t\t * drain as many bits as possible into previous frame ancillary data In\n\t\t * particular, in VBR mode ResvMax may have changed, and we have to make\n\t\t * sure main_data_begin does not create a reservoir bigger than ResvMax\n\t\t * mt 4/00\n\t\t */\n\t\t{\n\t\t\tvar mdb_bytes = Math.min(l3_side.main_data_begin * 8, stuffingBits) / 8;\n\t\t\tl3_side.resvDrain_pre += 8 * mdb_bytes;\n\t\t\tstuffingBits -= 8 * mdb_bytes;\n\t\t\tgfc.ResvSize -= 8 * mdb_bytes;\n\t\t\tl3_side.main_data_begin -= mdb_bytes;\n\t\t}\n\t\t/* drain the rest into this frames ancillary data */\n\t\tl3_side.resvDrain_post += stuffingBits;\n\t\tgfc.ResvSize -= stuffingBits;\n\t}\n}\n\nmodule.exports = Reservoir;\n","function Version() {\n\n    /**\n     * URL for the LAME website.\n     */\n    var LAME_URL = \"http://www.mp3dev.org/\";\n\n    /**\n     * Major version number.\n     */\n    var LAME_MAJOR_VERSION = 3;\n    /**\n     * Minor version number.\n     */\n    var LAME_MINOR_VERSION = 98;\n    /**\n     * Patch level.\n     */\n    var LAME_PATCH_VERSION = 4;\n\n    /**\n     * Major version number.\n     */\n    var PSY_MAJOR_VERSION = 0;\n    /**\n     * Minor version number.\n     */\n    var PSY_MINOR_VERSION = 93;\n\n    /**\n     * A string which describes the version of LAME.\n     *\n     * @return string which describes the version of LAME\n     */\n    this.getLameVersion = function () {\n        // primary to write screen reports\n        return (LAME_MAJOR_VERSION + \".\" + LAME_MINOR_VERSION + \".\" + LAME_PATCH_VERSION);\n    }\n\n    /**\n     * The short version of the LAME version string.\n     *\n     * @return short version of the LAME version string\n     */\n    this.getLameShortVersion = function () {\n        // Adding date and time to version string makes it harder for output\n        // validation\n        return (LAME_MAJOR_VERSION + \".\" + LAME_MINOR_VERSION + \".\" + LAME_PATCH_VERSION);\n    }\n\n    /**\n     * The shortest version of the LAME version string.\n     *\n     * @return shortest version of the LAME version string\n     */\n    this.getLameVeryShortVersion = function () {\n        // Adding date and time to version string makes it harder for output\n        return (\"LAME\" + LAME_MAJOR_VERSION + \".\" + LAME_MINOR_VERSION + \"r\");\n    }\n\n    /**\n     * String which describes the version of GPSYCHO\n     *\n     * @return string which describes the version of GPSYCHO\n     */\n    this.getPsyVersion = function () {\n        return (PSY_MAJOR_VERSION + \".\" + PSY_MINOR_VERSION);\n    }\n\n    /**\n     * String which is a URL for the LAME website.\n     *\n     * @return string which is a URL for the LAME website\n     */\n    this.getLameUrl = function () {\n        return LAME_URL;\n    }\n\n    /**\n     * Quite useless for a java version, however we are compatible ;-)\n     *\n     * @return \"32bits\"\n     */\n    this.getLameOsBitness = function () {\n        return \"32bits\";\n    }\n\n}\n\nmodule.exports = Version;\n","var common = require('./common.js');\nvar System = common.System;\nvar VbrMode = common.VbrMode;\nvar Float = common.Float;\nvar ShortBlock = common.ShortBlock;\nvar Util = common.Util;\nvar Arrays = common.Arrays;\nvar new_array_n = common.new_array_n;\nvar new_byte = common.new_byte;\nvar new_double = common.new_double;\nvar new_float = common.new_float;\nvar new_float_n = common.new_float_n;\nvar new_int = common.new_int;\nvar new_int_n = common.new_int_n;\nvar assert = common.assert;\n\n/**\n * A Vbr header may be present in the ancillary data field of the first frame of\n * an mp3 bitstream<BR>\n * The Vbr header (optionally) contains\n * <UL>\n * <LI>frames total number of audio frames in the bitstream\n * <LI>bytes total number of bytes in the bitstream\n * <LI>toc table of contents\n * </UL>\n *\n * toc (table of contents) gives seek points for random access.<BR>\n * The ith entry determines the seek point for i-percent duration.<BR>\n * seek point in bytes = (toc[i]/256.0) * total_bitstream_bytes<BR>\n * e.g. half duration seek point = (toc[50]/256.0) * total_bitstream_bytes\n */\nVBRTag.NUMTOCENTRIES = 100;\nVBRTag.MAXFRAMESIZE = 2880;\n\nfunction VBRTag() {\n\n    var lame;\n    var bs;\n    var v;\n\n    this.setModules = function (_lame, _bs, _v) {\n        lame = _lame;\n        bs = _bs;\n        v = _v;\n    };\n\n    var FRAMES_FLAG = 0x0001;\n    var BYTES_FLAG = 0x0002;\n    var TOC_FLAG = 0x0004;\n    var VBR_SCALE_FLAG = 0x0008;\n\n    var NUMTOCENTRIES = VBRTag.NUMTOCENTRIES;\n\n    /**\n     * (0xB40) the max freeformat 640 32kHz framesize.\n     */\n    var MAXFRAMESIZE = VBRTag.MAXFRAMESIZE;\n\n    /**\n     * <PRE>\n     *    4 bytes for Header Tag\n     *    4 bytes for Header Flags\n     *  100 bytes for entry (toc)\n     *    4 bytes for frame size\n     *    4 bytes for stream size\n     *    4 bytes for VBR scale. a VBR quality indicator: 0=best 100=worst\n     *   20 bytes for LAME tag.  for example, \"LAME3.12 (beta 6)\"\n     * ___________\n     *  140 bytes\n     * </PRE>\n     */\n    var VBRHEADERSIZE = (NUMTOCENTRIES + 4 + 4 + 4 + 4 + 4);\n\n    var LAMEHEADERSIZE = (VBRHEADERSIZE + 9 + 1 + 1 + 8\n    + 1 + 1 + 3 + 1 + 1 + 2 + 4 + 2 + 2);\n\n    /**\n     * The size of the Xing header MPEG-1, bit rate in kbps.\n     */\n    var XING_BITRATE1 = 128;\n    /**\n     * The size of the Xing header MPEG-2, bit rate in kbps.\n     */\n    var XING_BITRATE2 = 64;\n    /**\n     * The size of the Xing header MPEG-2.5, bit rate in kbps.\n     */\n    var XING_BITRATE25 = 32;\n\n    /**\n     * ISO-8859-1 charset for byte to string operations.\n     */\n    var ISO_8859_1 = null; //Charset.forName(\"ISO-8859-1\");\n\n    /**\n     * VBR header magic string.\n     */\n    var VBRTag0 = \"Xing\";\n    /**\n     * VBR header magic string (VBR == VBRMode.vbr_off).\n     */\n    var VBRTag1 = \"Info\";\n\n    /**\n     * Lookup table for fast CRC-16 computation. Uses the polynomial\n     * x^16+x^15+x^2+1\n     */\n    var crc16Lookup = [0x0000, 0xC0C1, 0xC181, 0x0140,\n        0xC301, 0x03C0, 0x0280, 0xC241, 0xC601, 0x06C0, 0x0780, 0xC741,\n        0x0500, 0xC5C1, 0xC481, 0x0440, 0xCC01, 0x0CC0, 0x0D80, 0xCD41,\n        0x0F00, 0xCFC1, 0xCE81, 0x0E40, 0x0A00, 0xCAC1, 0xCB81, 0x0B40,\n        0xC901, 0x09C0, 0x0880, 0xC841, 0xD801, 0x18C0, 0x1980, 0xD941,\n        0x1B00, 0xDBC1, 0xDA81, 0x1A40, 0x1E00, 0xDEC1, 0xDF81, 0x1F40,\n        0xDD01, 0x1DC0, 0x1C80, 0xDC41, 0x1400, 0xD4C1, 0xD581, 0x1540,\n        0xD701, 0x17C0, 0x1680, 0xD641, 0xD201, 0x12C0, 0x1380, 0xD341,\n        0x1100, 0xD1C1, 0xD081, 0x1040, 0xF001, 0x30C0, 0x3180, 0xF141,\n        0x3300, 0xF3C1, 0xF281, 0x3240, 0x3600, 0xF6C1, 0xF781, 0x3740,\n        0xF501, 0x35C0, 0x3480, 0xF441, 0x3C00, 0xFCC1, 0xFD81, 0x3D40,\n        0xFF01, 0x3FC0, 0x3E80, 0xFE41, 0xFA01, 0x3AC0, 0x3B80, 0xFB41,\n        0x3900, 0xF9C1, 0xF881, 0x3840, 0x2800, 0xE8C1, 0xE981, 0x2940,\n        0xEB01, 0x2BC0, 0x2A80, 0xEA41, 0xEE01, 0x2EC0, 0x2F80, 0xEF41,\n        0x2D00, 0xEDC1, 0xEC81, 0x2C40, 0xE401, 0x24C0, 0x2580, 0xE541,\n        0x2700, 0xE7C1, 0xE681, 0x2640, 0x2200, 0xE2C1, 0xE381, 0x2340,\n        0xE101, 0x21C0, 0x2080, 0xE041, 0xA001, 0x60C0, 0x6180, 0xA141,\n        0x6300, 0xA3C1, 0xA281, 0x6240, 0x6600, 0xA6C1, 0xA781, 0x6740,\n        0xA501, 0x65C0, 0x6480, 0xA441, 0x6C00, 0xACC1, 0xAD81, 0x6D40,\n        0xAF01, 0x6FC0, 0x6E80, 0xAE41, 0xAA01, 0x6AC0, 0x6B80, 0xAB41,\n        0x6900, 0xA9C1, 0xA881, 0x6840, 0x7800, 0xB8C1, 0xB981, 0x7940,\n        0xBB01, 0x7BC0, 0x7A80, 0xBA41, 0xBE01, 0x7EC0, 0x7F80, 0xBF41,\n        0x7D00, 0xBDC1, 0xBC81, 0x7C40, 0xB401, 0x74C0, 0x7580, 0xB541,\n        0x7700, 0xB7C1, 0xB681, 0x7640, 0x7200, 0xB2C1, 0xB381, 0x7340,\n        0xB101, 0x71C0, 0x7080, 0xB041, 0x5000, 0x90C1, 0x9181, 0x5140,\n        0x9301, 0x53C0, 0x5280, 0x9241, 0x9601, 0x56C0, 0x5780, 0x9741,\n        0x5500, 0x95C1, 0x9481, 0x5440, 0x9C01, 0x5CC0, 0x5D80, 0x9D41,\n        0x5F00, 0x9FC1, 0x9E81, 0x5E40, 0x5A00, 0x9AC1, 0x9B81, 0x5B40,\n        0x9901, 0x59C0, 0x5880, 0x9841, 0x8801, 0x48C0, 0x4980, 0x8941,\n        0x4B00, 0x8BC1, 0x8A81, 0x4A40, 0x4E00, 0x8EC1, 0x8F81, 0x4F40,\n        0x8D01, 0x4DC0, 0x4C80, 0x8C41, 0x4400, 0x84C1, 0x8581, 0x4540,\n        0x8701, 0x47C0, 0x4680, 0x8641, 0x8201, 0x42C0, 0x4380, 0x8341,\n        0x4100, 0x81C1, 0x8081, 0x4040];\n\n    /***********************************************************************\n     * Robert Hegemann 2001-01-17\n     ***********************************************************************/\n\n    function addVbr(v, bitrate) {\n        v.nVbrNumFrames++;\n        v.sum += bitrate;\n        v.seen++;\n\n        if (v.seen < v.want) {\n            return;\n        }\n\n        if (v.pos < v.size) {\n            v.bag[v.pos] = v.sum;\n            v.pos++;\n            v.seen = 0;\n        }\n        if (v.pos == v.size) {\n            for (var i = 1; i < v.size; i += 2) {\n                v.bag[i / 2] = v.bag[i];\n            }\n            v.want *= 2;\n            v.pos /= 2;\n        }\n    }\n\n    function xingSeekTable(v, t) {\n        if (v.pos <= 0)\n            return;\n\n        for (var i = 1; i < NUMTOCENTRIES; ++i) {\n            var j = i / NUMTOCENTRIES, act, sum;\n            var indx = 0 | (Math.floor(j * v.pos));\n            if (indx > v.pos - 1)\n                indx = v.pos - 1;\n            act = v.bag[indx];\n            sum = v.sum;\n            var seek_point = 0 | (256. * act / sum);\n            if (seek_point > 255)\n                seek_point = 255;\n            t[i] = 0xff & seek_point;\n        }\n    }\n\n    /**\n     * Add VBR entry, used to fill the VBR TOC entries.\n     *\n     * @param gfp\n     *            global flags\n     */\n    this.addVbrFrame = function (gfp) {\n        var gfc = gfp.internal_flags;\n        var kbps = Tables.bitrate_table[gfp.version][gfc.bitrate_index];\n        assert(gfc.VBR_seek_table.bag != null);\n        addVbr(gfc.VBR_seek_table, kbps);\n    }\n\n    /**\n     * Read big endian integer (4-bytes) from header.\n     *\n     * @param buf\n     *            header containing the integer\n     * @param bufPos\n     *            offset into the header\n     * @return extracted integer\n     */\n    function extractInteger(buf, bufPos) {\n        var x = buf[bufPos + 0] & 0xff;\n        x <<= 8;\n        x |= buf[bufPos + 1] & 0xff;\n        x <<= 8;\n        x |= buf[bufPos + 2] & 0xff;\n        x <<= 8;\n        x |= buf[bufPos + 3] & 0xff;\n        return x;\n    }\n\n    /**\n     * Write big endian integer (4-bytes) in the header.\n     *\n     * @param buf\n     *            header to write the integer into\n     * @param bufPos\n     *            offset into the header\n     * @param value\n     *            integer value to write\n     */\n    function createInteger(buf, bufPos, value) {\n        buf[bufPos + 0] = 0xff & ((value >> 24) & 0xff);\n        buf[bufPos + 1] = 0xff & ((value >> 16) & 0xff);\n        buf[bufPos + 2] = 0xff & ((value >> 8) & 0xff);\n        buf[bufPos + 3] = 0xff & (value & 0xff);\n    }\n\n    /**\n     * Write big endian short (2-bytes) in the header.\n     *\n     * @param buf\n     *            header to write the integer into\n     * @param bufPos\n     *            offset into the header\n     * @param value\n     *            integer value to write\n     */\n    function createShort(buf, bufPos, value) {\n        buf[bufPos + 0] = 0xff & ((value >> 8) & 0xff);\n        buf[bufPos + 1] = 0xff & (value & 0xff);\n    }\n\n    /**\n     * Check for magic strings (Xing/Info).\n     *\n     * @param buf\n     *            header to check\n     * @param bufPos\n     *            header offset to check\n     * @return magic string found\n     */\n    function isVbrTag(buf, bufPos) {\n        return new String(buf, bufPos, VBRTag0.length(), ISO_8859_1)\n                .equals(VBRTag0)\n            || new String(buf, bufPos, VBRTag1.length(), ISO_8859_1)\n                .equals(VBRTag1);\n    }\n\n    function shiftInBitsValue(x, n, v) {\n        return 0xff & ((x << n) | (v & ~(-1 << n)));\n    }\n\n    /**\n     * Construct the MP3 header using the settings of the global flags.\n     *\n     * <img src=\"1000px-Mp3filestructure.svg.png\">\n     *\n     * @param gfp\n     *            global flags\n     * @param buffer\n     *            header\n     */\n    function setLameTagFrameHeader(gfp, buffer) {\n        var gfc = gfp.internal_flags;\n\n        // MP3 Sync Word\n        buffer[0] = shiftInBitsValue(buffer[0], 8, 0xff);\n\n        buffer[1] = shiftInBitsValue(buffer[1], 3, 7);\n        buffer[1] = shiftInBitsValue(buffer[1], 1,\n            (gfp.out_samplerate < 16000) ? 0 : 1);\n        // Version\n        buffer[1] = shiftInBitsValue(buffer[1], 1, gfp.version);\n        // 01 == Layer 3\n        buffer[1] = shiftInBitsValue(buffer[1], 2, 4 - 3);\n        // Error protection\n        buffer[1] = shiftInBitsValue(buffer[1], 1, (!gfp.error_protection) ? 1\n            : 0);\n\n        // Bit rate\n        buffer[2] = shiftInBitsValue(buffer[2], 4, gfc.bitrate_index);\n        // Frequency\n        buffer[2] = shiftInBitsValue(buffer[2], 2, gfc.samplerate_index);\n        // Pad. Bit\n        buffer[2] = shiftInBitsValue(buffer[2], 1, 0);\n        // Priv. Bit\n        buffer[2] = shiftInBitsValue(buffer[2], 1, gfp.extension);\n\n        // Mode\n        buffer[3] = shiftInBitsValue(buffer[3], 2, gfp.mode.ordinal());\n        // Mode extension (Used with Joint Stereo)\n        buffer[3] = shiftInBitsValue(buffer[3], 2, gfc.mode_ext);\n        // Copy\n        buffer[3] = shiftInBitsValue(buffer[3], 1, gfp.copyright);\n        // Original\n        buffer[3] = shiftInBitsValue(buffer[3], 1, gfp.original);\n        // Emphasis\n        buffer[3] = shiftInBitsValue(buffer[3], 2, gfp.emphasis);\n\n        /* the default VBR header. 48 kbps layer III, no padding, no crc */\n        /* but sampling freq, mode and copyright/copy protection taken */\n        /* from first valid frame */\n        buffer[0] = 0xff;\n        var abyte = 0xff & (buffer[1] & 0xf1);\n        var bitrate;\n        if (1 == gfp.version) {\n            bitrate = XING_BITRATE1;\n        } else {\n            if (gfp.out_samplerate < 16000)\n                bitrate = XING_BITRATE25;\n            else\n                bitrate = XING_BITRATE2;\n        }\n\n        if (gfp.VBR == VbrMode.vbr_off)\n            bitrate = gfp.brate;\n\n        var bbyte;\n        if (gfp.free_format)\n            bbyte = 0x00;\n        else\n            bbyte = 0xff & (16 * lame.BitrateIndex(bitrate, gfp.version,\n                    gfp.out_samplerate));\n\n        /*\n         * Use as much of the info from the real frames in the Xing header:\n         * samplerate, channels, crc, etc...\n         */\n        if (gfp.version == 1) {\n            /* MPEG1 */\n            buffer[1] = 0xff & (abyte | 0x0a);\n            /* was 0x0b; */\n            abyte = 0xff & (buffer[2] & 0x0d);\n            /* AF keep also private bit */\n            buffer[2] = 0xff & (bbyte | abyte);\n            /* 64kbs MPEG1 frame */\n        } else {\n            /* MPEG2 */\n            buffer[1] = 0xff & (abyte | 0x02);\n            /* was 0x03; */\n            abyte = 0xff & (buffer[2] & 0x0d);\n            /* AF keep also private bit */\n            buffer[2] = 0xff & (bbyte | abyte);\n            /* 64kbs MPEG2 frame */\n        }\n    }\n\n    /**\n     * Get VBR tag information\n     *\n     * @param buf\n     *            header to analyze\n     * @param bufPos\n     *            offset into the header\n     * @return VBR tag data\n     */\n    this.getVbrTag = function (buf) {\n        var pTagData = new VBRTagData();\n        var bufPos = 0;\n\n        /* get Vbr header data */\n        pTagData.flags = 0;\n\n        /* get selected MPEG header data */\n        var hId = (buf[bufPos + 1] >> 3) & 1;\n        var hSrIndex = (buf[bufPos + 2] >> 2) & 3;\n        var hMode = (buf[bufPos + 3] >> 6) & 3;\n        var hBitrate = ((buf[bufPos + 2] >> 4) & 0xf);\n        hBitrate = Tables.bitrate_table[hId][hBitrate];\n\n        /* check for FFE syncword */\n        if ((buf[bufPos + 1] >> 4) == 0xE)\n            pTagData.samprate = Tables.samplerate_table[2][hSrIndex];\n        else\n            pTagData.samprate = Tables.samplerate_table[hId][hSrIndex];\n\n        /* determine offset of header */\n        if (hId != 0) {\n            /* mpeg1 */\n            if (hMode != 3)\n                bufPos += (32 + 4);\n            else\n                bufPos += (17 + 4);\n        } else {\n            /* mpeg2 */\n            if (hMode != 3)\n                bufPos += (17 + 4);\n            else\n                bufPos += (9 + 4);\n        }\n\n        if (!isVbrTag(buf, bufPos))\n            return null;\n\n        bufPos += 4;\n\n        pTagData.hId = hId;\n\n        /* get flags */\n        var head_flags = pTagData.flags = extractInteger(buf, bufPos);\n        bufPos += 4;\n\n        if ((head_flags & FRAMES_FLAG) != 0) {\n            pTagData.frames = extractInteger(buf, bufPos);\n            bufPos += 4;\n        }\n\n        if ((head_flags & BYTES_FLAG) != 0) {\n            pTagData.bytes = extractInteger(buf, bufPos);\n            bufPos += 4;\n        }\n\n        if ((head_flags & TOC_FLAG) != 0) {\n            if (pTagData.toc != null) {\n                for (var i = 0; i < NUMTOCENTRIES; i++)\n                    pTagData.toc[i] = buf[bufPos + i];\n            }\n            bufPos += NUMTOCENTRIES;\n        }\n\n        pTagData.vbrScale = -1;\n\n        if ((head_flags & VBR_SCALE_FLAG) != 0) {\n            pTagData.vbrScale = extractInteger(buf, bufPos);\n            bufPos += 4;\n        }\n\n        pTagData.headersize = ((hId + 1) * 72000 * hBitrate)\n            / pTagData.samprate;\n\n        bufPos += 21;\n        var encDelay = buf[bufPos + 0] << 4;\n        encDelay += buf[bufPos + 1] >> 4;\n        var encPadding = (buf[bufPos + 1] & 0x0F) << 8;\n        encPadding += buf[bufPos + 2] & 0xff;\n        /* check for reasonable values (this may be an old Xing header, */\n        /* not a INFO tag) */\n        if (encDelay < 0 || encDelay > 3000)\n            encDelay = -1;\n        if (encPadding < 0 || encPadding > 3000)\n            encPadding = -1;\n\n        pTagData.encDelay = encDelay;\n        pTagData.encPadding = encPadding;\n\n        /* success */\n        return pTagData;\n    }\n\n    /**\n     * Initializes the header\n     *\n     * @param gfp\n     *            global flags\n     */\n    this.InitVbrTag = function (gfp) {\n        var gfc = gfp.internal_flags;\n\n        /**\n         * <PRE>\n         * Xing VBR pretends to be a 48kbs layer III frame.  (at 44.1kHz).\n         * (at 48kHz they use 56kbs since 48kbs frame not big enough for\n         * table of contents)\n         * let's always embed Xing header inside a 64kbs layer III frame.\n         * this gives us enough room for a LAME version string too.\n         * size determined by sampling frequency (MPEG1)\n         * 32kHz:    216 bytes@48kbs    288bytes@ 64kbs\n         * 44.1kHz:  156 bytes          208bytes@64kbs     (+1 if padding = 1)\n         * 48kHz:    144 bytes          192\n         *\n         * MPEG 2 values are the same since the framesize and samplerate\n         * are each reduced by a factor of 2.\n         * </PRE>\n         */\n        var kbps_header;\n        if (1 == gfp.version) {\n            kbps_header = XING_BITRATE1;\n        } else {\n            if (gfp.out_samplerate < 16000)\n                kbps_header = XING_BITRATE25;\n            else\n                kbps_header = XING_BITRATE2;\n        }\n\n        if (gfp.VBR == VbrMode.vbr_off)\n            kbps_header = gfp.brate;\n\n        // make sure LAME Header fits into Frame\n        var totalFrameSize = ((gfp.version + 1) * 72000 * kbps_header)\n            / gfp.out_samplerate;\n        var headerSize = (gfc.sideinfo_len + LAMEHEADERSIZE);\n        gfc.VBR_seek_table.TotalFrameSize = totalFrameSize;\n        if (totalFrameSize < headerSize || totalFrameSize > MAXFRAMESIZE) {\n            /* disable tag, it wont fit */\n            gfp.bWriteVbrTag = false;\n            return;\n        }\n\n        gfc.VBR_seek_table.nVbrNumFrames = 0;\n        gfc.VBR_seek_table.nBytesWritten = 0;\n        gfc.VBR_seek_table.sum = 0;\n\n        gfc.VBR_seek_table.seen = 0;\n        gfc.VBR_seek_table.want = 1;\n        gfc.VBR_seek_table.pos = 0;\n\n        if (gfc.VBR_seek_table.bag == null) {\n            gfc.VBR_seek_table.bag = new int[400];\n            gfc.VBR_seek_table.size = 400;\n        }\n\n        // write dummy VBR tag of all 0's into bitstream\n        var buffer = new_byte(MAXFRAMESIZE);\n\n        setLameTagFrameHeader(gfp, buffer);\n        var n = gfc.VBR_seek_table.TotalFrameSize;\n        for (var i = 0; i < n; ++i) {\n            bs.add_dummy_byte(gfp, buffer[i] & 0xff, 1);\n        }\n    }\n\n    /**\n     * Fast CRC-16 computation (uses table crc16Lookup).\n     *\n     * @param value\n     * @param crc\n     * @return\n     */\n    function crcUpdateLookup(value, crc) {\n        var tmp = crc ^ value;\n        crc = (crc >> 8) ^ crc16Lookup[tmp & 0xff];\n        return crc;\n    }\n\n    this.updateMusicCRC = function (crc, buffer, bufferPos, size) {\n        for (var i = 0; i < size; ++i)\n            crc[0] = crcUpdateLookup(buffer[bufferPos + i], crc[0]);\n    }\n\n    /**\n     * Write LAME info: mini version + info on various switches used (Jonathan\n     * Dee 2001/08/31).\n     *\n     * @param gfp\n     *            global flags\n     * @param musicLength\n     *            music length\n     * @param streamBuffer\n     *            pointer to output buffer\n     * @param streamBufferPos\n     *            offset into the output buffer\n     * @param crc\n     *            computation of CRC-16 of Lame Tag so far (starting at frame\n     *            sync)\n     * @return number of bytes written to the stream\n     */\n    function putLameVBR(gfp, musicLength, streamBuffer, streamBufferPos, crc) {\n        var gfc = gfp.internal_flags;\n        var bytesWritten = 0;\n\n        /* encoder delay */\n        var encDelay = gfp.encoder_delay;\n        /* encoder padding */\n        var encPadding = gfp.encoder_padding;\n\n        /* recall: gfp.VBR_q is for example set by the switch -V */\n        /* gfp.quality by -q, -h, -f, etc */\n        var quality = (100 - 10 * gfp.VBR_q - gfp.quality);\n\n        var version = v.getLameVeryShortVersion();\n        var vbr;\n        var revision = 0x00;\n        var revMethod;\n        // numbering different in vbr_mode vs. Lame tag\n        var vbrTypeTranslator = [1, 5, 3, 2, 4, 0, 3];\n        var lowpass = 0 | (((gfp.lowpassfreq / 100.0) + .5) > 255 ? 255\n                : (gfp.lowpassfreq / 100.0) + .5);\n        var peakSignalAmplitude = 0;\n        var radioReplayGain = 0;\n        var audiophileReplayGain = 0;\n        var noiseShaping = gfp.internal_flags.noise_shaping;\n        var stereoMode = 0;\n        var nonOptimal = 0;\n        var sourceFreq = 0;\n        var misc = 0;\n        var musicCRC = 0;\n\n        // psy model type: Gpsycho or NsPsytune\n        var expNPsyTune = (gfp.exp_nspsytune & 1) != 0;\n        var safeJoint = (gfp.exp_nspsytune & 2) != 0;\n        var noGapMore = false;\n        var noGapPrevious = false;\n        var noGapCount = gfp.internal_flags.nogap_total;\n        var noGapCurr = gfp.internal_flags.nogap_current;\n\n        // 4 bits\n        var athType = gfp.ATHtype;\n        var flags = 0;\n\n        // vbr modes\n        var abrBitrate;\n        switch (gfp.VBR) {\n            case vbr_abr:\n                abrBitrate = gfp.VBR_mean_bitrate_kbps;\n                break;\n            case vbr_off:\n                abrBitrate = gfp.brate;\n                break;\n            default:\n                abrBitrate = gfp.VBR_min_bitrate_kbps;\n        }\n\n        // revision and vbr method\n        if (gfp.VBR.ordinal() < vbrTypeTranslator.length)\n            vbr = vbrTypeTranslator[gfp.VBR.ordinal()];\n        else\n            vbr = 0x00; // unknown\n\n        revMethod = 0x10 * revision + vbr;\n\n        // ReplayGain\n        if (gfc.findReplayGain) {\n            if (gfc.RadioGain > 0x1FE)\n                gfc.RadioGain = 0x1FE;\n            if (gfc.RadioGain < -0x1FE)\n                gfc.RadioGain = -0x1FE;\n\n            // set name code\n            radioReplayGain = 0x2000;\n            // set originator code to `determined automatically'\n            radioReplayGain |= 0xC00;\n\n            if (gfc.RadioGain >= 0) {\n                // set gain adjustment\n                radioReplayGain |= gfc.RadioGain;\n            } else {\n                // set the sign bit\n                radioReplayGain |= 0x200;\n                // set gain adjustment\n                radioReplayGain |= -gfc.RadioGain;\n            }\n        }\n\n        // peak sample\n        if (gfc.findPeakSample)\n            peakSignalAmplitude = Math\n                .abs(0 | ((( gfc.PeakSample) / 32767.0) * Math.pow(2, 23) + .5));\n\n        // nogap\n        if (noGapCount != -1) {\n            if (noGapCurr > 0)\n                noGapPrevious = true;\n\n            if (noGapCurr < noGapCount - 1)\n                noGapMore = true;\n        }\n\n        // flags\n        flags = athType + ((expNPsyTune ? 1 : 0) << 4)\n            + ((safeJoint ? 1 : 0) << 5) + ((noGapMore ? 1 : 0) << 6)\n            + ((noGapPrevious ? 1 : 0) << 7);\n\n        if (quality < 0)\n            quality = 0;\n\n        // stereo mode field (Intensity stereo is not implemented)\n        switch (gfp.mode) {\n            case MONO:\n                stereoMode = 0;\n                break;\n            case STEREO:\n                stereoMode = 1;\n                break;\n            case DUAL_CHANNEL:\n                stereoMode = 2;\n                break;\n            case JOINT_STEREO:\n                if (gfp.force_ms)\n                    stereoMode = 4;\n                else\n                    stereoMode = 3;\n                break;\n            case NOT_SET:\n            //$FALL-THROUGH$\n            default:\n                stereoMode = 7;\n                break;\n        }\n\n        if (gfp.in_samplerate <= 32000)\n            sourceFreq = 0x00;\n        else if (gfp.in_samplerate == 48000)\n            sourceFreq = 0x02;\n        else if (gfp.in_samplerate > 48000)\n            sourceFreq = 0x03;\n        else {\n            // default is 44100Hz\n            sourceFreq = 0x01;\n        }\n\n        // Check if the user overrided the default LAME behavior with some\n        // nasty options\n        if (gfp.short_blocks == ShortBlock.short_block_forced\n            || gfp.short_blocks == ShortBlock.short_block_dispensed\n            || ((gfp.lowpassfreq == -1) && (gfp.highpassfreq == -1)) || /* \"-k\" */\n            (gfp.scale_left < gfp.scale_right)\n            || (gfp.scale_left > gfp.scale_right)\n            || (gfp.disable_reservoir && gfp.brate < 320) || gfp.noATH\n            || gfp.ATHonly || (athType == 0) || gfp.in_samplerate <= 32000)\n            nonOptimal = 1;\n\n        misc = noiseShaping + (stereoMode << 2) + (nonOptimal << 5)\n            + (sourceFreq << 6);\n\n        musicCRC = gfc.nMusicCRC;\n\n        // Write all this information into the stream\n\n        createInteger(streamBuffer, streamBufferPos + bytesWritten, quality);\n        bytesWritten += 4;\n\n        for (var j = 0; j < 9; j++) {\n            streamBuffer[streamBufferPos + bytesWritten + j] = 0xff & version .charAt(j);\n        }\n        bytesWritten += 9;\n\n        streamBuffer[streamBufferPos + bytesWritten] = 0xff & revMethod;\n        bytesWritten++;\n\n        streamBuffer[streamBufferPos + bytesWritten] = 0xff & lowpass;\n        bytesWritten++;\n\n        createInteger(streamBuffer, streamBufferPos + bytesWritten,\n            peakSignalAmplitude);\n        bytesWritten += 4;\n\n        createShort(streamBuffer, streamBufferPos + bytesWritten,\n            radioReplayGain);\n        bytesWritten += 2;\n\n        createShort(streamBuffer, streamBufferPos + bytesWritten,\n            audiophileReplayGain);\n        bytesWritten += 2;\n\n        streamBuffer[streamBufferPos + bytesWritten] = 0xff & flags;\n        bytesWritten++;\n\n        if (abrBitrate >= 255)\n            streamBuffer[streamBufferPos + bytesWritten] = 0xFF;\n        else\n            streamBuffer[streamBufferPos + bytesWritten] = 0xff & abrBitrate;\n        bytesWritten++;\n\n        streamBuffer[streamBufferPos + bytesWritten] = 0xff & (encDelay >> 4);\n        streamBuffer[streamBufferPos + bytesWritten + 1] = 0xff & ((encDelay << 4) + (encPadding >> 8));\n        streamBuffer[streamBufferPos + bytesWritten + 2] = 0xff & encPadding;\n\n        bytesWritten += 3;\n\n        streamBuffer[streamBufferPos + bytesWritten] = 0xff & misc;\n        bytesWritten++;\n\n        // unused in rev0\n        streamBuffer[streamBufferPos + bytesWritten++] = 0;\n\n        createShort(streamBuffer, streamBufferPos + bytesWritten, gfp.preset);\n        bytesWritten += 2;\n\n        createInteger(streamBuffer, streamBufferPos + bytesWritten, musicLength);\n        bytesWritten += 4;\n\n        createShort(streamBuffer, streamBufferPos + bytesWritten, musicCRC);\n        bytesWritten += 2;\n\n        // Calculate tag CRC.... must be done here, since it includes previous\n        // information\n\n        for (var i = 0; i < bytesWritten; i++)\n            crc = crcUpdateLookup(streamBuffer[streamBufferPos + i], crc);\n\n        createShort(streamBuffer, streamBufferPos + bytesWritten, crc);\n        bytesWritten += 2;\n\n        return bytesWritten;\n    }\n\n    function skipId3v2(fpStream) {\n        // seek to the beginning of the stream\n        fpStream.seek(0);\n        // read 10 bytes in case there's an ID3 version 2 header here\n        var id3v2Header = new_byte(10);\n        fpStream.readFully(id3v2Header);\n        /* does the stream begin with the ID3 version 2 file identifier? */\n        var id3v2TagSize;\n        if (!new String(id3v2Header, \"ISO-8859-1\").startsWith(\"ID3\")) {\n            /*\n             * the tag size (minus the 10-byte header) is encoded into four\n             * bytes where the most significant bit is clear in each byte\n             */\n            id3v2TagSize = (((id3v2Header[6] & 0x7f) << 21)\n                | ((id3v2Header[7] & 0x7f) << 14)\n                | ((id3v2Header[8] & 0x7f) << 7) | (id3v2Header[9] & 0x7f))\n                + id3v2Header.length;\n        } else {\n            /* no ID3 version 2 tag in this stream */\n            id3v2TagSize = 0;\n        }\n        return id3v2TagSize;\n    }\n\n    this.getLameTagFrame = function (gfp, buffer) {\n        var gfc = gfp.internal_flags;\n\n        if (!gfp.bWriteVbrTag) {\n            return 0;\n        }\n        if (gfc.Class_ID != Lame.LAME_ID) {\n            return 0;\n        }\n        if (gfc.VBR_seek_table.pos <= 0) {\n            return 0;\n        }\n        if (buffer.length < gfc.VBR_seek_table.TotalFrameSize) {\n            return gfc.VBR_seek_table.TotalFrameSize;\n        }\n\n        Arrays.fill(buffer, 0, gfc.VBR_seek_table.TotalFrameSize, 0);\n\n        // 4 bytes frame header\n        setLameTagFrameHeader(gfp, buffer);\n\n        // Create TOC entries\n        var toc = new_byte(NUMTOCENTRIES);\n\n        if (gfp.free_format) {\n            for (var i = 1; i < NUMTOCENTRIES; ++i)\n                toc[i] = 0xff & (255 * i / 100);\n        } else {\n            xingSeekTable(gfc.VBR_seek_table, toc);\n        }\n\n        // Start writing the tag after the zero frame\n        var streamIndex = gfc.sideinfo_len;\n        /**\n         * Note: Xing header specifies that Xing data goes in the ancillary data\n         * with NO ERROR PROTECTION. If error protecton in enabled, the Xing\n         * data still starts at the same offset, and now it is in sideinfo data\n         * block, and thus will not decode correctly by non-Xing tag aware\n         * players\n         */\n        if (gfp.error_protection)\n            streamIndex -= 2;\n\n        // Put Vbr tag\n        if (gfp.VBR == VbrMode.vbr_off) {\n            buffer[streamIndex++] = 0xff & VBRTag1.charAt(0);\n            buffer[streamIndex++] = 0xff & VBRTag1.charAt(1);\n            buffer[streamIndex++] = 0xff & VBRTag1.charAt(2);\n            buffer[streamIndex++] = 0xff & VBRTag1.charAt(3);\n\n        } else {\n            buffer[streamIndex++] = 0xff & VBRTag0.charAt(0);\n            buffer[streamIndex++] = 0xff & VBRTag0.charAt(1);\n            buffer[streamIndex++] = 0xff & VBRTag0.charAt(2);\n            buffer[streamIndex++] = 0xff & VBRTag0.charAt(3);\n        }\n\n        // Put header flags\n        createInteger(buffer, streamIndex, FRAMES_FLAG + BYTES_FLAG + TOC_FLAG\n            + VBR_SCALE_FLAG);\n        streamIndex += 4;\n\n        // Put Total Number of frames\n        createInteger(buffer, streamIndex, gfc.VBR_seek_table.nVbrNumFrames);\n        streamIndex += 4;\n\n        // Put total audio stream size, including Xing/LAME Header\n        var streamSize = (gfc.VBR_seek_table.nBytesWritten + gfc.VBR_seek_table.TotalFrameSize);\n        createInteger(buffer, streamIndex, 0 | streamSize);\n        streamIndex += 4;\n\n        /* Put TOC */\n        System.arraycopy(toc, 0, buffer, streamIndex, toc.length);\n        streamIndex += toc.length;\n\n        if (gfp.error_protection) {\n            // (jo) error_protection: add crc16 information to header\n            bs.CRC_writeheader(gfc, buffer);\n        }\n\n        // work out CRC so far: initially crc = 0\n        var crc = 0x00;\n        for (var i = 0; i < streamIndex; i++)\n            crc = crcUpdateLookup(buffer[i], crc);\n        // Put LAME VBR info\n        streamIndex += putLameVBR(gfp, streamSize, buffer, streamIndex, crc);\n\n        return gfc.VBR_seek_table.TotalFrameSize;\n    }\n\n    /**\n     * Write final VBR tag to the file.\n     *\n     * @param gfp\n     *            global flags\n     * @param stream\n     *            stream to add the VBR tag to\n     * @return 0 (OK), -1 else\n     * @throws IOException\n     *             I/O error\n     */\n    this.putVbrTag = function (gfp, stream) {\n        var gfc = gfp.internal_flags;\n\n        if (gfc.VBR_seek_table.pos <= 0)\n            return -1;\n\n        // Seek to end of file\n        stream.seek(stream.length());\n\n        // Get file size, abort if file has zero length.\n        if (stream.length() == 0)\n            return -1;\n\n        // The VBR tag may NOT be located at the beginning of the stream. If an\n        // ID3 version 2 tag was added, then it must be skipped to write the VBR\n        // tag data.\n        var id3v2TagSize = skipId3v2(stream);\n\n        // Seek to the beginning of the stream\n        stream.seek(id3v2TagSize);\n\n        var buffer = new_byte(MAXFRAMESIZE);\n        var bytes = getLameTagFrame(gfp, buffer);\n        if (bytes > buffer.length) {\n            return -1;\n        }\n\n        if (bytes < 1) {\n            return 0;\n        }\n\n        // Put it all to disk again\n        stream.write(buffer, 0, bytes);\n        // success\n        return 0;\n    }\n\n}\n\nmodule.exports = VBRTag;\n","var common = require('./common.js');\nvar System = common.System;\nvar VbrMode = common.VbrMode;\nvar Float = common.Float;\nvar ShortBlock = common.ShortBlock;\nvar Util = common.Util;\nvar Arrays = common.Arrays;\nvar new_array_n = common.new_array_n;\nvar new_byte = common.new_byte;\nvar new_double = common.new_double;\nvar new_float = common.new_float;\nvar new_float_n = common.new_float_n;\nvar new_int = common.new_int;\nvar new_int_n = common.new_int_n;\nvar assert = common.assert;\n\nLame = require('./Lame.js');\nPresets = require('./Presets.js');\nGainAnalysis = require('./GainAnalysis.js');\nQuantizePVT = require('./QuantizePVT.js');\nQuantize = require('./Quantize.js');\nTakehiro = require('./Takehiro.js');\nReservoir = require('./Reservoir.js');\nMPEGMode = require('./MPEGMode.js');\nBitStream = require('./BitStream.js');\nvar Encoder = require('./Encoder.js');\nvar Version = require('./Version.js');\nvar VBRTag = require('./VBRTag.js');\n\nfunction GetAudio() {\n    var parse;\n    var mpg;\n\n    this.setModules = function (parse2, mpg2) {\n        parse = parse2;\n        mpg = mpg2;\n    }\n}\n\n\nfunction Parse() {\n    var ver;\n    var id3;\n    var pre;\n\n    this.setModules = function (ver2, id32, pre2) {\n        ver = ver2;\n        id3 = id32;\n        pre = pre2;\n    }\n}\n\nfunction MPGLib() {\n}\n\nfunction ID3Tag() {\n    var bits;\n    var ver;\n\n    this.setModules = function (_bits, _ver) {\n        bits = _bits;\n        ver = _ver;\n    }\n}\n\nfunction Mp3Encoder(channels, samplerate, kbps) {\n    if (arguments.length != 3) {\n        console.error('WARN: Mp3Encoder(channels, samplerate, kbps) not specified');\n        channels = 1;\n        samplerate = 44100;\n        kbps = 128;\n    }\n    var lame = new Lame();\n    var gaud = new GetAudio();\n    var ga = new GainAnalysis();\n    var bs = new BitStream();\n    var p = new Presets();\n    var qupvt = new QuantizePVT();\n    var qu = new Quantize();\n    var vbr = new VBRTag();\n    var ver = new Version();\n    var id3 = new ID3Tag();\n    var rv = new Reservoir();\n    var tak = new Takehiro();\n    var parse = new Parse();\n    var mpg = new MPGLib();\n\n    lame.setModules(ga, bs, p, qupvt, qu, vbr, ver, id3, mpg);\n    bs.setModules(ga, mpg, ver, vbr);\n    id3.setModules(bs, ver);\n    p.setModules(lame);\n    qu.setModules(bs, rv, qupvt, tak);\n    qupvt.setModules(tak, rv, lame.enc.psy);\n    rv.setModules(bs);\n    tak.setModules(qupvt);\n    vbr.setModules(lame, bs, ver);\n    gaud.setModules(parse, mpg);\n    parse.setModules(ver, id3, p);\n\n    var gfp = lame.lame_init();\n\n    gfp.num_channels = channels;\n    gfp.in_samplerate = samplerate;\n    gfp.brate = kbps;\n    gfp.mode = MPEGMode.STEREO;\n    gfp.quality = 3;\n    gfp.bWriteVbrTag = false;\n    gfp.disable_reservoir = true;\n    gfp.write_id3tag_automatic = false;\n\n    var retcode = lame.lame_init_params(gfp);\n    assert(0 == retcode);\n    var maxSamples = 1152;\n    var mp3buf_size = 0 | (1.25 * maxSamples + 7200);\n    var mp3buf = new_byte(mp3buf_size);\n\n    this.encodeBuffer = function (left, right) {\n        if (channels == 1) {\n            right = left;\n        }\n        assert(left.length == right.length);\n        if (left.length > maxSamples) {\n            maxSamples = left.length;\n            mp3buf_size = 0 | (1.25 * maxSamples + 7200);\n            mp3buf = new_byte(mp3buf_size);\n        }\n\n        var _sz = lame.lame_encode_buffer(gfp, left, right, left.length, mp3buf, 0, mp3buf_size);\n        return new Int8Array(mp3buf.subarray(0, _sz));\n    };\n\n    this.flush = function () {\n        var _sz = lame.lame_encode_flush(gfp, mp3buf, 0, mp3buf_size);\n        return new Int8Array(mp3buf.subarray(0, _sz));\n    };\n}\n\nfunction WavHeader() {\n    this.dataOffset = 0;\n    this.dataLen = 0;\n    this.channels = 0;\n    this.sampleRate = 0;\n}\n\nfunction fourccToInt(fourcc) {\n    return fourcc.charCodeAt(0) << 24 | fourcc.charCodeAt(1) << 16 | fourcc.charCodeAt(2) << 8 | fourcc.charCodeAt(3);\n}\n\nWavHeader.RIFF = fourccToInt(\"RIFF\");\nWavHeader.WAVE = fourccToInt(\"WAVE\");\nWavHeader.fmt_ = fourccToInt(\"fmt \");\nWavHeader.data = fourccToInt(\"data\");\n\nWavHeader.readHeader = function (dataView) {\n    var w = new WavHeader();\n\n    var header = dataView.getUint32(0, false);\n    if (WavHeader.RIFF != header) {\n        return;\n    }\n    var fileLen = dataView.getUint32(4, true);\n    if (WavHeader.WAVE != dataView.getUint32(8, false)) {\n        return;\n    }\n    if (WavHeader.fmt_ != dataView.getUint32(12, false)) {\n        return;\n    }\n    var fmtLen = dataView.getUint32(16, true);\n    var pos = 16 + 4;\n    switch (fmtLen) {\n        case 16:\n        case 18:\n            w.channels = dataView.getUint16(pos + 2, true);\n            w.sampleRate = dataView.getUint32(pos + 4, true);\n            break;\n        default:\n            throw 'extended fmt chunk not implemented';\n    }\n    pos += fmtLen;\n    var data = WavHeader.data;\n    var len = 0;\n    while (data != header) {\n        header = dataView.getUint32(pos, false);\n        len = dataView.getUint32(pos + 4, true);\n        if (data == header) {\n            break;\n        }\n        pos += (len + 8);\n    }\n    w.dataLen = len;\n    w.dataOffset = pos + 8;\n    return w;\n};\n\nmodule.exports.Mp3Encoder = Mp3Encoder;\nmodule.exports.WavHeader = WavHeader;\n","import { Mp3Encoder } from 'lamejs';\n\nclass Encoder {\n  constructor(config) {\n    this.config = {\n      sampleRate: 44100,\n      bitRate: 128\n    };\n\n    Object.assign(this.config, config);\n\n    this.mp3Encoder = new Mp3Encoder(\n      1,\n      this.config.sampleRate,\n      this.config.bitRate\n    );\n\n    // Audio is processed by frames of 1152 samples per audio channel\n    // http://lame.sourceforge.net/tech-FAQ.txt\n    this.maxSamples = 1152;\n\n    this.samplesMono = null;\n    this.clearBuffer();\n  }\n\n  /**\n   * Clear active buffer\n   */\n  clearBuffer() {\n    this.dataBuffer = [];\n  }\n\n  /**\n   * Append new audio buffer to current active buffer\n   * @param {Buffer} buffer\n   */\n  appendToBuffer(buffer) {\n    this.dataBuffer.push(new Int8Array(buffer));\n  }\n\n  /**\n   * Float current data to 16 bits PCM\n   * @param {Float32Array} input\n   * @param {Int16Array} output\n   */\n  floatTo16BitPCM(input, output) {\n    for (let i = 0; i < input.length; i++) {\n      const s = Math.max(-1, Math.min(1, input[i]));\n      output[i] = (s < 0 ? s * 0x8000 : s * 0x7FFF);\n    }\n  }\n\n  /**\n   * Convert buffer to proper format\n   * @param {Array} arrayBuffer\n   */\n  convertBuffer(arrayBuffer) {\n    const data = new Float32Array(arrayBuffer);\n    const out = new Int16Array(arrayBuffer.length);\n    this.floatTo16BitPCM(data, out);\n\n    return out;\n  }\n\n  /**\n   * Encode and append current buffer to dataBuffer\n   * @param {Array} arrayBuffer\n   */\n  encode(arrayBuffer) {\n    this.samplesMono = this.convertBuffer(arrayBuffer);\n    let remaining = this.samplesMono.length;\n\n    for (let i = 0; remaining >= 0; i += this.maxSamples) {\n      const left = this.samplesMono.subarray(i, i + this.maxSamples);\n      const mp3buffer = this.mp3Encoder.encodeBuffer(left);\n      this.appendToBuffer(mp3buffer);\n      remaining -= this.maxSamples;\n    }\n  }\n\n  /**\n   * Return full dataBuffer\n   */\n  finish() {\n    this.appendToBuffer(this.mp3Encoder.flush());\n\n    return this.dataBuffer;\n  }\n};\n\nexport default Encoder;\n","import Encoder from './encoder';\n\nclass MicRecorder {\n  constructor(config) {\n    this.config = {\n      // 128 or 160 kbit/s – mid-range bitrate quality\n      bitRate: 128,\n\n      // There is a known issue with some macOS machines, where the recording\n      // will sometimes have a loud 'pop' or 'pop-click' sound. This flag\n      // prevents getting audio from the microphone a few milliseconds after\n      // the begining of the recording. It also helps to remove the mouse\n      // \"click\" sound from the output mp3 file.\n      startRecordingAt: 300,\n      deviceId: null,\n    };\n\n    this.activeStream = null;\n    this.context = null;\n    this.microphone = null;\n    this.processor = null;\n    this.startTime = 0;\n\n    Object.assign(this.config, config);\n  }\n\n  /**\n   * Starts to listen for the microphone sound\n   * @param {MediaStream} stream\n   */\n  addMicrophoneListener(stream) {\n    this.activeStream = stream;\n\n    // This prevents the weird noise once you start listening to the microphone\n    this.timerToStart = setTimeout(() => {\n      delete this.timerToStart;\n    }, this.config.startRecordingAt);\n\n    // Set up Web Audio API to process data from the media stream (microphone).\n    this.microphone = this.context.createMediaStreamSource(stream);\n\n    // Settings a bufferSize of 0 instructs the browser to choose the best bufferSize\n    this.processor = this.context.createScriptProcessor(0, 1, 1);\n\n    // Add all buffers from LAME into an array.\n    this.processor.onaudioprocess = (event) => {\n      if (this.timerToStart) {\n        return;\n      }\n\n      // Send microphone data to LAME for MP3 encoding while recording.\n      this.lameEncoder.encode(event.inputBuffer.getChannelData(0));\n    };\n\n    // Begin retrieving microphone data.\n    this.microphone.connect(this.processor);\n    this.processor.connect(this.context.destination);\n  };\n\n  /**\n   * Disconnect microphone, processor and remove activeStream\n   */\n  stop() {\n    if (this.processor && this.microphone) {\n      // Clean up the Web Audio API resources.\n      this.microphone.disconnect();\n      this.processor.disconnect();\n\n      // If all references using this.context are destroyed, context is closed\n      // automatically. DOMException is fired when trying to close again\n      if (this.context && this.context.state !== 'closed') {\n        this.context.close();\n      }\n\n      this.processor.onaudioprocess = null;\n\n      // Stop all audio tracks. Also, removes recording icon from chrome tab\n      this.activeStream.getAudioTracks().forEach(track => track.stop());\n    }\n\n    return this;\n  };\n\n  /**\n   * Requests access to the microphone and start recording\n   * @return Promise\n   */\n  start() {\n    const AudioContext = window.AudioContext || window.webkitAudioContext;\n    this.context = new AudioContext();\n    this.config.sampleRate = this.context.sampleRate;\n    this.lameEncoder = new Encoder(this.config);\n\n    const audio = this.config.deviceId ? { deviceId: { exact: this.config.deviceId } } : true;\n\n    return new Promise((resolve, reject) => {\n      navigator.mediaDevices.getUserMedia({ audio })\n        .then(stream => {\n          this.addMicrophoneListener(stream);\n          resolve(stream);\n        }).catch(function(err) {\n          reject(err);\n        });\n    })\n  };\n\n  /**\n   * Return Mp3 Buffer and Blob with type mp3\n   * @return {Promise}\n   */\n  getMp3() {\n    const finalBuffer = this.lameEncoder.finish();\n\n    return new Promise((resolve, reject) => {\n      if (finalBuffer.length === 0) {\n        reject(new Error('No buffer to send'));\n      } else {\n        resolve([finalBuffer, new Blob(finalBuffer, { type: 'audio/mp3' })]);\n        this.lameEncoder.clearBuffer();\n      }\n    });\n  };\n};\n\nexport default MicRecorder;\n","//! moment.js\n//! version : 2.29.4\n//! authors : Tim Wood, Iskren Chernev, Moment.js contributors\n//! license : MIT\n//! momentjs.com\n\n;(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    global.moment = factory()\n}(this, (function () { 'use strict';\n\n    var hookCallback;\n\n    function hooks() {\n        return hookCallback.apply(null, arguments);\n    }\n\n    // This is done to register the method called with moment()\n    // without creating circular dependencies.\n    function setHookCallback(callback) {\n        hookCallback = callback;\n    }\n\n    function isArray(input) {\n        return (\n            input instanceof Array ||\n            Object.prototype.toString.call(input) === '[object Array]'\n        );\n    }\n\n    function isObject(input) {\n        // IE8 will treat undefined and null as object if it wasn't for\n        // input != null\n        return (\n            input != null &&\n            Object.prototype.toString.call(input) === '[object Object]'\n        );\n    }\n\n    function hasOwnProp(a, b) {\n        return Object.prototype.hasOwnProperty.call(a, b);\n    }\n\n    function isObjectEmpty(obj) {\n        if (Object.getOwnPropertyNames) {\n            return Object.getOwnPropertyNames(obj).length === 0;\n        } else {\n            var k;\n            for (k in obj) {\n                if (hasOwnProp(obj, k)) {\n                    return false;\n                }\n            }\n            return true;\n        }\n    }\n\n    function isUndefined(input) {\n        return input === void 0;\n    }\n\n    function isNumber(input) {\n        return (\n            typeof input === 'number' ||\n            Object.prototype.toString.call(input) === '[object Number]'\n        );\n    }\n\n    function isDate(input) {\n        return (\n            input instanceof Date ||\n            Object.prototype.toString.call(input) === '[object Date]'\n        );\n    }\n\n    function map(arr, fn) {\n        var res = [],\n            i,\n            arrLen = arr.length;\n        for (i = 0; i < arrLen; ++i) {\n            res.push(fn(arr[i], i));\n        }\n        return res;\n    }\n\n    function extend(a, b) {\n        for (var i in b) {\n            if (hasOwnProp(b, i)) {\n                a[i] = b[i];\n            }\n        }\n\n        if (hasOwnProp(b, 'toString')) {\n            a.toString = b.toString;\n        }\n\n        if (hasOwnProp(b, 'valueOf')) {\n            a.valueOf = b.valueOf;\n        }\n\n        return a;\n    }\n\n    function createUTC(input, format, locale, strict) {\n        return createLocalOrUTC(input, format, locale, strict, true).utc();\n    }\n\n    function defaultParsingFlags() {\n        // We need to deep clone this object.\n        return {\n            empty: false,\n            unusedTokens: [],\n            unusedInput: [],\n            overflow: -2,\n            charsLeftOver: 0,\n            nullInput: false,\n            invalidEra: null,\n            invalidMonth: null,\n            invalidFormat: false,\n            userInvalidated: false,\n            iso: false,\n            parsedDateParts: [],\n            era: null,\n            meridiem: null,\n            rfc2822: false,\n            weekdayMismatch: false,\n        };\n    }\n\n    function getParsingFlags(m) {\n        if (m._pf == null) {\n            m._pf = defaultParsingFlags();\n        }\n        return m._pf;\n    }\n\n    var some;\n    if (Array.prototype.some) {\n        some = Array.prototype.some;\n    } else {\n        some = function (fun) {\n            var t = Object(this),\n                len = t.length >>> 0,\n                i;\n\n            for (i = 0; i < len; i++) {\n                if (i in t && fun.call(this, t[i], i, t)) {\n                    return true;\n                }\n            }\n\n            return false;\n        };\n    }\n\n    function isValid(m) {\n        if (m._isValid == null) {\n            var flags = getParsingFlags(m),\n                parsedParts = some.call(flags.parsedDateParts, function (i) {\n                    return i != null;\n                }),\n                isNowValid =\n                    !isNaN(m._d.getTime()) &&\n                    flags.overflow < 0 &&\n                    !flags.empty &&\n                    !flags.invalidEra &&\n                    !flags.invalidMonth &&\n                    !flags.invalidWeekday &&\n                    !flags.weekdayMismatch &&\n                    !flags.nullInput &&\n                    !flags.invalidFormat &&\n                    !flags.userInvalidated &&\n                    (!flags.meridiem || (flags.meridiem && parsedParts));\n\n            if (m._strict) {\n                isNowValid =\n                    isNowValid &&\n                    flags.charsLeftOver === 0 &&\n                    flags.unusedTokens.length === 0 &&\n                    flags.bigHour === undefined;\n            }\n\n            if (Object.isFrozen == null || !Object.isFrozen(m)) {\n                m._isValid = isNowValid;\n            } else {\n                return isNowValid;\n            }\n        }\n        return m._isValid;\n    }\n\n    function createInvalid(flags) {\n        var m = createUTC(NaN);\n        if (flags != null) {\n            extend(getParsingFlags(m), flags);\n        } else {\n            getParsingFlags(m).userInvalidated = true;\n        }\n\n        return m;\n    }\n\n    // Plugins that add properties should also add the key here (null value),\n    // so we can properly clone ourselves.\n    var momentProperties = (hooks.momentProperties = []),\n        updateInProgress = false;\n\n    function copyConfig(to, from) {\n        var i,\n            prop,\n            val,\n            momentPropertiesLen = momentProperties.length;\n\n        if (!isUndefined(from._isAMomentObject)) {\n            to._isAMomentObject = from._isAMomentObject;\n        }\n        if (!isUndefined(from._i)) {\n            to._i = from._i;\n        }\n        if (!isUndefined(from._f)) {\n            to._f = from._f;\n        }\n        if (!isUndefined(from._l)) {\n            to._l = from._l;\n        }\n        if (!isUndefined(from._strict)) {\n            to._strict = from._strict;\n        }\n        if (!isUndefined(from._tzm)) {\n            to._tzm = from._tzm;\n        }\n        if (!isUndefined(from._isUTC)) {\n            to._isUTC = from._isUTC;\n        }\n        if (!isUndefined(from._offset)) {\n            to._offset = from._offset;\n        }\n        if (!isUndefined(from._pf)) {\n            to._pf = getParsingFlags(from);\n        }\n        if (!isUndefined(from._locale)) {\n            to._locale = from._locale;\n        }\n\n        if (momentPropertiesLen > 0) {\n            for (i = 0; i < momentPropertiesLen; i++) {\n                prop = momentProperties[i];\n                val = from[prop];\n                if (!isUndefined(val)) {\n                    to[prop] = val;\n                }\n            }\n        }\n\n        return to;\n    }\n\n    // Moment prototype object\n    function Moment(config) {\n        copyConfig(this, config);\n        this._d = new Date(config._d != null ? config._d.getTime() : NaN);\n        if (!this.isValid()) {\n            this._d = new Date(NaN);\n        }\n        // Prevent infinite loop in case updateOffset creates new moment\n        // objects.\n        if (updateInProgress === false) {\n            updateInProgress = true;\n            hooks.updateOffset(this);\n            updateInProgress = false;\n        }\n    }\n\n    function isMoment(obj) {\n        return (\n            obj instanceof Moment || (obj != null && obj._isAMomentObject != null)\n        );\n    }\n\n    function warn(msg) {\n        if (\n            hooks.suppressDeprecationWarnings === false &&\n            typeof console !== 'undefined' &&\n            console.warn\n        ) {\n            console.warn('Deprecation warning: ' + msg);\n        }\n    }\n\n    function deprecate(msg, fn) {\n        var firstTime = true;\n\n        return extend(function () {\n            if (hooks.deprecationHandler != null) {\n                hooks.deprecationHandler(null, msg);\n            }\n            if (firstTime) {\n                var args = [],\n                    arg,\n                    i,\n                    key,\n                    argLen = arguments.length;\n                for (i = 0; i < argLen; i++) {\n                    arg = '';\n                    if (typeof arguments[i] === 'object') {\n                        arg += '\\n[' + i + '] ';\n                        for (key in arguments[0]) {\n                            if (hasOwnProp(arguments[0], key)) {\n                                arg += key + ': ' + arguments[0][key] + ', ';\n                            }\n                        }\n                        arg = arg.slice(0, -2); // Remove trailing comma and space\n                    } else {\n                        arg = arguments[i];\n                    }\n                    args.push(arg);\n                }\n                warn(\n                    msg +\n                        '\\nArguments: ' +\n                        Array.prototype.slice.call(args).join('') +\n                        '\\n' +\n                        new Error().stack\n                );\n                firstTime = false;\n            }\n            return fn.apply(this, arguments);\n        }, fn);\n    }\n\n    var deprecations = {};\n\n    function deprecateSimple(name, msg) {\n        if (hooks.deprecationHandler != null) {\n            hooks.deprecationHandler(name, msg);\n        }\n        if (!deprecations[name]) {\n            warn(msg);\n            deprecations[name] = true;\n        }\n    }\n\n    hooks.suppressDeprecationWarnings = false;\n    hooks.deprecationHandler = null;\n\n    function isFunction(input) {\n        return (\n            (typeof Function !== 'undefined' && input instanceof Function) ||\n            Object.prototype.toString.call(input) === '[object Function]'\n        );\n    }\n\n    function set(config) {\n        var prop, i;\n        for (i in config) {\n            if (hasOwnProp(config, i)) {\n                prop = config[i];\n                if (isFunction(prop)) {\n                    this[i] = prop;\n                } else {\n                    this['_' + i] = prop;\n                }\n            }\n        }\n        this._config = config;\n        // Lenient ordinal parsing accepts just a number in addition to\n        // number + (possibly) stuff coming from _dayOfMonthOrdinalParse.\n        // TODO: Remove \"ordinalParse\" fallback in next major release.\n        this._dayOfMonthOrdinalParseLenient = new RegExp(\n            (this._dayOfMonthOrdinalParse.source || this._ordinalParse.source) +\n                '|' +\n                /\\d{1,2}/.source\n        );\n    }\n\n    function mergeConfigs(parentConfig, childConfig) {\n        var res = extend({}, parentConfig),\n            prop;\n        for (prop in childConfig) {\n            if (hasOwnProp(childConfig, prop)) {\n                if (isObject(parentConfig[prop]) && isObject(childConfig[prop])) {\n                    res[prop] = {};\n                    extend(res[prop], parentConfig[prop]);\n                    extend(res[prop], childConfig[prop]);\n                } else if (childConfig[prop] != null) {\n                    res[prop] = childConfig[prop];\n                } else {\n                    delete res[prop];\n                }\n            }\n        }\n        for (prop in parentConfig) {\n            if (\n                hasOwnProp(parentConfig, prop) &&\n                !hasOwnProp(childConfig, prop) &&\n                isObject(parentConfig[prop])\n            ) {\n                // make sure changes to properties don't modify parent config\n                res[prop] = extend({}, res[prop]);\n            }\n        }\n        return res;\n    }\n\n    function Locale(config) {\n        if (config != null) {\n            this.set(config);\n        }\n    }\n\n    var keys;\n\n    if (Object.keys) {\n        keys = Object.keys;\n    } else {\n        keys = function (obj) {\n            var i,\n                res = [];\n            for (i in obj) {\n                if (hasOwnProp(obj, i)) {\n                    res.push(i);\n                }\n            }\n            return res;\n        };\n    }\n\n    var defaultCalendar = {\n        sameDay: '[Today at] LT',\n        nextDay: '[Tomorrow at] LT',\n        nextWeek: 'dddd [at] LT',\n        lastDay: '[Yesterday at] LT',\n        lastWeek: '[Last] dddd [at] LT',\n        sameElse: 'L',\n    };\n\n    function calendar(key, mom, now) {\n        var output = this._calendar[key] || this._calendar['sameElse'];\n        return isFunction(output) ? output.call(mom, now) : output;\n    }\n\n    function zeroFill(number, targetLength, forceSign) {\n        var absNumber = '' + Math.abs(number),\n            zerosToFill = targetLength - absNumber.length,\n            sign = number >= 0;\n        return (\n            (sign ? (forceSign ? '+' : '') : '-') +\n            Math.pow(10, Math.max(0, zerosToFill)).toString().substr(1) +\n            absNumber\n        );\n    }\n\n    var formattingTokens =\n            /(\\[[^\\[]*\\])|(\\\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,\n        localFormattingTokens = /(\\[[^\\[]*\\])|(\\\\)?(LTS|LT|LL?L?L?|l{1,4})/g,\n        formatFunctions = {},\n        formatTokenFunctions = {};\n\n    // token:    'M'\n    // padded:   ['MM', 2]\n    // ordinal:  'Mo'\n    // callback: function () { this.month() + 1 }\n    function addFormatToken(token, padded, ordinal, callback) {\n        var func = callback;\n        if (typeof callback === 'string') {\n            func = function () {\n                return this[callback]();\n            };\n        }\n        if (token) {\n            formatTokenFunctions[token] = func;\n        }\n        if (padded) {\n            formatTokenFunctions[padded[0]] = function () {\n                return zeroFill(func.apply(this, arguments), padded[1], padded[2]);\n            };\n        }\n        if (ordinal) {\n            formatTokenFunctions[ordinal] = function () {\n                return this.localeData().ordinal(\n                    func.apply(this, arguments),\n                    token\n                );\n            };\n        }\n    }\n\n    function removeFormattingTokens(input) {\n        if (input.match(/\\[[\\s\\S]/)) {\n            return input.replace(/^\\[|\\]$/g, '');\n        }\n        return input.replace(/\\\\/g, '');\n    }\n\n    function makeFormatFunction(format) {\n        var array = format.match(formattingTokens),\n            i,\n            length;\n\n        for (i = 0, length = array.length; i < length; i++) {\n            if (formatTokenFunctions[array[i]]) {\n                array[i] = formatTokenFunctions[array[i]];\n            } else {\n                array[i] = removeFormattingTokens(array[i]);\n            }\n        }\n\n        return function (mom) {\n            var output = '',\n                i;\n            for (i = 0; i < length; i++) {\n                output += isFunction(array[i])\n                    ? array[i].call(mom, format)\n                    : array[i];\n            }\n            return output;\n        };\n    }\n\n    // format date using native date object\n    function formatMoment(m, format) {\n        if (!m.isValid()) {\n            return m.localeData().invalidDate();\n        }\n\n        format = expandFormat(format, m.localeData());\n        formatFunctions[format] =\n            formatFunctions[format] || makeFormatFunction(format);\n\n        return formatFunctions[format](m);\n    }\n\n    function expandFormat(format, locale) {\n        var i = 5;\n\n        function replaceLongDateFormatTokens(input) {\n            return locale.longDateFormat(input) || input;\n        }\n\n        localFormattingTokens.lastIndex = 0;\n        while (i >= 0 && localFormattingTokens.test(format)) {\n            format = format.replace(\n                localFormattingTokens,\n                replaceLongDateFormatTokens\n            );\n            localFormattingTokens.lastIndex = 0;\n            i -= 1;\n        }\n\n        return format;\n    }\n\n    var defaultLongDateFormat = {\n        LTS: 'h:mm:ss A',\n        LT: 'h:mm A',\n        L: 'MM/DD/YYYY',\n        LL: 'MMMM D, YYYY',\n        LLL: 'MMMM D, YYYY h:mm A',\n        LLLL: 'dddd, MMMM D, YYYY h:mm A',\n    };\n\n    function longDateFormat(key) {\n        var format = this._longDateFormat[key],\n            formatUpper = this._longDateFormat[key.toUpperCase()];\n\n        if (format || !formatUpper) {\n            return format;\n        }\n\n        this._longDateFormat[key] = formatUpper\n            .match(formattingTokens)\n            .map(function (tok) {\n                if (\n                    tok === 'MMMM' ||\n                    tok === 'MM' ||\n                    tok === 'DD' ||\n                    tok === 'dddd'\n                ) {\n                    return tok.slice(1);\n                }\n                return tok;\n            })\n            .join('');\n\n        return this._longDateFormat[key];\n    }\n\n    var defaultInvalidDate = 'Invalid date';\n\n    function invalidDate() {\n        return this._invalidDate;\n    }\n\n    var defaultOrdinal = '%d',\n        defaultDayOfMonthOrdinalParse = /\\d{1,2}/;\n\n    function ordinal(number) {\n        return this._ordinal.replace('%d', number);\n    }\n\n    var defaultRelativeTime = {\n        future: 'in %s',\n        past: '%s ago',\n        s: 'a few seconds',\n        ss: '%d seconds',\n        m: 'a minute',\n        mm: '%d minutes',\n        h: 'an hour',\n        hh: '%d hours',\n        d: 'a day',\n        dd: '%d days',\n        w: 'a week',\n        ww: '%d weeks',\n        M: 'a month',\n        MM: '%d months',\n        y: 'a year',\n        yy: '%d years',\n    };\n\n    function relativeTime(number, withoutSuffix, string, isFuture) {\n        var output = this._relativeTime[string];\n        return isFunction(output)\n            ? output(number, withoutSuffix, string, isFuture)\n            : output.replace(/%d/i, number);\n    }\n\n    function pastFuture(diff, output) {\n        var format = this._relativeTime[diff > 0 ? 'future' : 'past'];\n        return isFunction(format) ? format(output) : format.replace(/%s/i, output);\n    }\n\n    var aliases = {};\n\n    function addUnitAlias(unit, shorthand) {\n        var lowerCase = unit.toLowerCase();\n        aliases[lowerCase] = aliases[lowerCase + 's'] = aliases[shorthand] = unit;\n    }\n\n    function normalizeUnits(units) {\n        return typeof units === 'string'\n            ? aliases[units] || aliases[units.toLowerCase()]\n            : undefined;\n    }\n\n    function normalizeObjectUnits(inputObject) {\n        var normalizedInput = {},\n            normalizedProp,\n            prop;\n\n        for (prop in inputObject) {\n            if (hasOwnProp(inputObject, prop)) {\n                normalizedProp = normalizeUnits(prop);\n                if (normalizedProp) {\n                    normalizedInput[normalizedProp] = inputObject[prop];\n                }\n            }\n        }\n\n        return normalizedInput;\n    }\n\n    var priorities = {};\n\n    function addUnitPriority(unit, priority) {\n        priorities[unit] = priority;\n    }\n\n    function getPrioritizedUnits(unitsObj) {\n        var units = [],\n            u;\n        for (u in unitsObj) {\n            if (hasOwnProp(unitsObj, u)) {\n                units.push({ unit: u, priority: priorities[u] });\n            }\n        }\n        units.sort(function (a, b) {\n            return a.priority - b.priority;\n        });\n        return units;\n    }\n\n    function isLeapYear(year) {\n        return (year % 4 === 0 && year % 100 !== 0) || year % 400 === 0;\n    }\n\n    function absFloor(number) {\n        if (number < 0) {\n            // -0 -> 0\n            return Math.ceil(number) || 0;\n        } else {\n            return Math.floor(number);\n        }\n    }\n\n    function toInt(argumentForCoercion) {\n        var coercedNumber = +argumentForCoercion,\n            value = 0;\n\n        if (coercedNumber !== 0 && isFinite(coercedNumber)) {\n            value = absFloor(coercedNumber);\n        }\n\n        return value;\n    }\n\n    function makeGetSet(unit, keepTime) {\n        return function (value) {\n            if (value != null) {\n                set$1(this, unit, value);\n                hooks.updateOffset(this, keepTime);\n                return this;\n            } else {\n                return get(this, unit);\n            }\n        };\n    }\n\n    function get(mom, unit) {\n        return mom.isValid()\n            ? mom._d['get' + (mom._isUTC ? 'UTC' : '') + unit]()\n            : NaN;\n    }\n\n    function set$1(mom, unit, value) {\n        if (mom.isValid() && !isNaN(value)) {\n            if (\n                unit === 'FullYear' &&\n                isLeapYear(mom.year()) &&\n                mom.month() === 1 &&\n                mom.date() === 29\n            ) {\n                value = toInt(value);\n                mom._d['set' + (mom._isUTC ? 'UTC' : '') + unit](\n                    value,\n                    mom.month(),\n                    daysInMonth(value, mom.month())\n                );\n            } else {\n                mom._d['set' + (mom._isUTC ? 'UTC' : '') + unit](value);\n            }\n        }\n    }\n\n    // MOMENTS\n\n    function stringGet(units) {\n        units = normalizeUnits(units);\n        if (isFunction(this[units])) {\n            return this[units]();\n        }\n        return this;\n    }\n\n    function stringSet(units, value) {\n        if (typeof units === 'object') {\n            units = normalizeObjectUnits(units);\n            var prioritized = getPrioritizedUnits(units),\n                i,\n                prioritizedLen = prioritized.length;\n            for (i = 0; i < prioritizedLen; i++) {\n                this[prioritized[i].unit](units[prioritized[i].unit]);\n            }\n        } else {\n            units = normalizeUnits(units);\n            if (isFunction(this[units])) {\n                return this[units](value);\n            }\n        }\n        return this;\n    }\n\n    var match1 = /\\d/, //       0 - 9\n        match2 = /\\d\\d/, //      00 - 99\n        match3 = /\\d{3}/, //     000 - 999\n        match4 = /\\d{4}/, //    0000 - 9999\n        match6 = /[+-]?\\d{6}/, // -999999 - 999999\n        match1to2 = /\\d\\d?/, //       0 - 99\n        match3to4 = /\\d\\d\\d\\d?/, //     999 - 9999\n        match5to6 = /\\d\\d\\d\\d\\d\\d?/, //   99999 - 999999\n        match1to3 = /\\d{1,3}/, //       0 - 999\n        match1to4 = /\\d{1,4}/, //       0 - 9999\n        match1to6 = /[+-]?\\d{1,6}/, // -999999 - 999999\n        matchUnsigned = /\\d+/, //       0 - inf\n        matchSigned = /[+-]?\\d+/, //    -inf - inf\n        matchOffset = /Z|[+-]\\d\\d:?\\d\\d/gi, // +00:00 -00:00 +0000 -0000 or Z\n        matchShortOffset = /Z|[+-]\\d\\d(?::?\\d\\d)?/gi, // +00 -00 +00:00 -00:00 +0000 -0000 or Z\n        matchTimestamp = /[+-]?\\d+(\\.\\d{1,3})?/, // 123456789 123456789.123\n        // any word (or two) characters or numbers including two/three word month in arabic.\n        // includes scottish gaelic two word and hyphenated months\n        matchWord =\n            /[0-9]{0,256}['a-z\\u00A0-\\u05FF\\u0700-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFF07\\uFF10-\\uFFEF]{1,256}|[\\u0600-\\u06FF\\/]{1,256}(\\s*?[\\u0600-\\u06FF]{1,256}){1,2}/i,\n        regexes;\n\n    regexes = {};\n\n    function addRegexToken(token, regex, strictRegex) {\n        regexes[token] = isFunction(regex)\n            ? regex\n            : function (isStrict, localeData) {\n                  return isStrict && strictRegex ? strictRegex : regex;\n              };\n    }\n\n    function getParseRegexForToken(token, config) {\n        if (!hasOwnProp(regexes, token)) {\n            return new RegExp(unescapeFormat(token));\n        }\n\n        return regexes[token](config._strict, config._locale);\n    }\n\n    // Code from http://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript\n    function unescapeFormat(s) {\n        return regexEscape(\n            s\n                .replace('\\\\', '')\n                .replace(\n                    /\\\\(\\[)|\\\\(\\])|\\[([^\\]\\[]*)\\]|\\\\(.)/g,\n                    function (matched, p1, p2, p3, p4) {\n                        return p1 || p2 || p3 || p4;\n                    }\n                )\n        );\n    }\n\n    function regexEscape(s) {\n        return s.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n    }\n\n    var tokens = {};\n\n    function addParseToken(token, callback) {\n        var i,\n            func = callback,\n            tokenLen;\n        if (typeof token === 'string') {\n            token = [token];\n        }\n        if (isNumber(callback)) {\n            func = function (input, array) {\n                array[callback] = toInt(input);\n            };\n        }\n        tokenLen = token.length;\n        for (i = 0; i < tokenLen; i++) {\n            tokens[token[i]] = func;\n        }\n    }\n\n    function addWeekParseToken(token, callback) {\n        addParseToken(token, function (input, array, config, token) {\n            config._w = config._w || {};\n            callback(input, config._w, config, token);\n        });\n    }\n\n    function addTimeToArrayFromToken(token, input, config) {\n        if (input != null && hasOwnProp(tokens, token)) {\n            tokens[token](input, config._a, config, token);\n        }\n    }\n\n    var YEAR = 0,\n        MONTH = 1,\n        DATE = 2,\n        HOUR = 3,\n        MINUTE = 4,\n        SECOND = 5,\n        MILLISECOND = 6,\n        WEEK = 7,\n        WEEKDAY = 8;\n\n    function mod(n, x) {\n        return ((n % x) + x) % x;\n    }\n\n    var indexOf;\n\n    if (Array.prototype.indexOf) {\n        indexOf = Array.prototype.indexOf;\n    } else {\n        indexOf = function (o) {\n            // I know\n            var i;\n            for (i = 0; i < this.length; ++i) {\n                if (this[i] === o) {\n                    return i;\n                }\n            }\n            return -1;\n        };\n    }\n\n    function daysInMonth(year, month) {\n        if (isNaN(year) || isNaN(month)) {\n            return NaN;\n        }\n        var modMonth = mod(month, 12);\n        year += (month - modMonth) / 12;\n        return modMonth === 1\n            ? isLeapYear(year)\n                ? 29\n                : 28\n            : 31 - ((modMonth % 7) % 2);\n    }\n\n    // FORMATTING\n\n    addFormatToken('M', ['MM', 2], 'Mo', function () {\n        return this.month() + 1;\n    });\n\n    addFormatToken('MMM', 0, 0, function (format) {\n        return this.localeData().monthsShort(this, format);\n    });\n\n    addFormatToken('MMMM', 0, 0, function (format) {\n        return this.localeData().months(this, format);\n    });\n\n    // ALIASES\n\n    addUnitAlias('month', 'M');\n\n    // PRIORITY\n\n    addUnitPriority('month', 8);\n\n    // PARSING\n\n    addRegexToken('M', match1to2);\n    addRegexToken('MM', match1to2, match2);\n    addRegexToken('MMM', function (isStrict, locale) {\n        return locale.monthsShortRegex(isStrict);\n    });\n    addRegexToken('MMMM', function (isStrict, locale) {\n        return locale.monthsRegex(isStrict);\n    });\n\n    addParseToken(['M', 'MM'], function (input, array) {\n        array[MONTH] = toInt(input) - 1;\n    });\n\n    addParseToken(['MMM', 'MMMM'], function (input, array, config, token) {\n        var month = config._locale.monthsParse(input, token, config._strict);\n        // if we didn't find a month name, mark the date as invalid.\n        if (month != null) {\n            array[MONTH] = month;\n        } else {\n            getParsingFlags(config).invalidMonth = input;\n        }\n    });\n\n    // LOCALES\n\n    var defaultLocaleMonths =\n            'January_February_March_April_May_June_July_August_September_October_November_December'.split(\n                '_'\n            ),\n        defaultLocaleMonthsShort =\n            'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),\n        MONTHS_IN_FORMAT = /D[oD]?(\\[[^\\[\\]]*\\]|\\s)+MMMM?/,\n        defaultMonthsShortRegex = matchWord,\n        defaultMonthsRegex = matchWord;\n\n    function localeMonths(m, format) {\n        if (!m) {\n            return isArray(this._months)\n                ? this._months\n                : this._months['standalone'];\n        }\n        return isArray(this._months)\n            ? this._months[m.month()]\n            : this._months[\n                  (this._months.isFormat || MONTHS_IN_FORMAT).test(format)\n                      ? 'format'\n                      : 'standalone'\n              ][m.month()];\n    }\n\n    function localeMonthsShort(m, format) {\n        if (!m) {\n            return isArray(this._monthsShort)\n                ? this._monthsShort\n                : this._monthsShort['standalone'];\n        }\n        return isArray(this._monthsShort)\n            ? this._monthsShort[m.month()]\n            : this._monthsShort[\n                  MONTHS_IN_FORMAT.test(format) ? 'format' : 'standalone'\n              ][m.month()];\n    }\n\n    function handleStrictParse(monthName, format, strict) {\n        var i,\n            ii,\n            mom,\n            llc = monthName.toLocaleLowerCase();\n        if (!this._monthsParse) {\n            // this is not used\n            this._monthsParse = [];\n            this._longMonthsParse = [];\n            this._shortMonthsParse = [];\n            for (i = 0; i < 12; ++i) {\n                mom = createUTC([2000, i]);\n                this._shortMonthsParse[i] = this.monthsShort(\n                    mom,\n                    ''\n                ).toLocaleLowerCase();\n                this._longMonthsParse[i] = this.months(mom, '').toLocaleLowerCase();\n            }\n        }\n\n        if (strict) {\n            if (format === 'MMM') {\n                ii = indexOf.call(this._shortMonthsParse, llc);\n                return ii !== -1 ? ii : null;\n            } else {\n                ii = indexOf.call(this._longMonthsParse, llc);\n                return ii !== -1 ? ii : null;\n            }\n        } else {\n            if (format === 'MMM') {\n                ii = indexOf.call(this._shortMonthsParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._longMonthsParse, llc);\n                return ii !== -1 ? ii : null;\n            } else {\n                ii = indexOf.call(this._longMonthsParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._shortMonthsParse, llc);\n                return ii !== -1 ? ii : null;\n            }\n        }\n    }\n\n    function localeMonthsParse(monthName, format, strict) {\n        var i, mom, regex;\n\n        if (this._monthsParseExact) {\n            return handleStrictParse.call(this, monthName, format, strict);\n        }\n\n        if (!this._monthsParse) {\n            this._monthsParse = [];\n            this._longMonthsParse = [];\n            this._shortMonthsParse = [];\n        }\n\n        // TODO: add sorting\n        // Sorting makes sure if one month (or abbr) is a prefix of another\n        // see sorting in computeMonthsParse\n        for (i = 0; i < 12; i++) {\n            // make the regex if we don't have it already\n            mom = createUTC([2000, i]);\n            if (strict && !this._longMonthsParse[i]) {\n                this._longMonthsParse[i] = new RegExp(\n                    '^' + this.months(mom, '').replace('.', '') + '$',\n                    'i'\n                );\n                this._shortMonthsParse[i] = new RegExp(\n                    '^' + this.monthsShort(mom, '').replace('.', '') + '$',\n                    'i'\n                );\n            }\n            if (!strict && !this._monthsParse[i]) {\n                regex =\n                    '^' + this.months(mom, '') + '|^' + this.monthsShort(mom, '');\n                this._monthsParse[i] = new RegExp(regex.replace('.', ''), 'i');\n            }\n            // test the regex\n            if (\n                strict &&\n                format === 'MMMM' &&\n                this._longMonthsParse[i].test(monthName)\n            ) {\n                return i;\n            } else if (\n                strict &&\n                format === 'MMM' &&\n                this._shortMonthsParse[i].test(monthName)\n            ) {\n                return i;\n            } else if (!strict && this._monthsParse[i].test(monthName)) {\n                return i;\n            }\n        }\n    }\n\n    // MOMENTS\n\n    function setMonth(mom, value) {\n        var dayOfMonth;\n\n        if (!mom.isValid()) {\n            // No op\n            return mom;\n        }\n\n        if (typeof value === 'string') {\n            if (/^\\d+$/.test(value)) {\n                value = toInt(value);\n            } else {\n                value = mom.localeData().monthsParse(value);\n                // TODO: Another silent failure?\n                if (!isNumber(value)) {\n                    return mom;\n                }\n            }\n        }\n\n        dayOfMonth = Math.min(mom.date(), daysInMonth(mom.year(), value));\n        mom._d['set' + (mom._isUTC ? 'UTC' : '') + 'Month'](value, dayOfMonth);\n        return mom;\n    }\n\n    function getSetMonth(value) {\n        if (value != null) {\n            setMonth(this, value);\n            hooks.updateOffset(this, true);\n            return this;\n        } else {\n            return get(this, 'Month');\n        }\n    }\n\n    function getDaysInMonth() {\n        return daysInMonth(this.year(), this.month());\n    }\n\n    function monthsShortRegex(isStrict) {\n        if (this._monthsParseExact) {\n            if (!hasOwnProp(this, '_monthsRegex')) {\n                computeMonthsParse.call(this);\n            }\n            if (isStrict) {\n                return this._monthsShortStrictRegex;\n            } else {\n                return this._monthsShortRegex;\n            }\n        } else {\n            if (!hasOwnProp(this, '_monthsShortRegex')) {\n                this._monthsShortRegex = defaultMonthsShortRegex;\n            }\n            return this._monthsShortStrictRegex && isStrict\n                ? this._monthsShortStrictRegex\n                : this._monthsShortRegex;\n        }\n    }\n\n    function monthsRegex(isStrict) {\n        if (this._monthsParseExact) {\n            if (!hasOwnProp(this, '_monthsRegex')) {\n                computeMonthsParse.call(this);\n            }\n            if (isStrict) {\n                return this._monthsStrictRegex;\n            } else {\n                return this._monthsRegex;\n            }\n        } else {\n            if (!hasOwnProp(this, '_monthsRegex')) {\n                this._monthsRegex = defaultMonthsRegex;\n            }\n            return this._monthsStrictRegex && isStrict\n                ? this._monthsStrictRegex\n                : this._monthsRegex;\n        }\n    }\n\n    function computeMonthsParse() {\n        function cmpLenRev(a, b) {\n            return b.length - a.length;\n        }\n\n        var shortPieces = [],\n            longPieces = [],\n            mixedPieces = [],\n            i,\n            mom;\n        for (i = 0; i < 12; i++) {\n            // make the regex if we don't have it already\n            mom = createUTC([2000, i]);\n            shortPieces.push(this.monthsShort(mom, ''));\n            longPieces.push(this.months(mom, ''));\n            mixedPieces.push(this.months(mom, ''));\n            mixedPieces.push(this.monthsShort(mom, ''));\n        }\n        // Sorting makes sure if one month (or abbr) is a prefix of another it\n        // will match the longer piece.\n        shortPieces.sort(cmpLenRev);\n        longPieces.sort(cmpLenRev);\n        mixedPieces.sort(cmpLenRev);\n        for (i = 0; i < 12; i++) {\n            shortPieces[i] = regexEscape(shortPieces[i]);\n            longPieces[i] = regexEscape(longPieces[i]);\n        }\n        for (i = 0; i < 24; i++) {\n            mixedPieces[i] = regexEscape(mixedPieces[i]);\n        }\n\n        this._monthsRegex = new RegExp('^(' + mixedPieces.join('|') + ')', 'i');\n        this._monthsShortRegex = this._monthsRegex;\n        this._monthsStrictRegex = new RegExp(\n            '^(' + longPieces.join('|') + ')',\n            'i'\n        );\n        this._monthsShortStrictRegex = new RegExp(\n            '^(' + shortPieces.join('|') + ')',\n            'i'\n        );\n    }\n\n    // FORMATTING\n\n    addFormatToken('Y', 0, 0, function () {\n        var y = this.year();\n        return y <= 9999 ? zeroFill(y, 4) : '+' + y;\n    });\n\n    addFormatToken(0, ['YY', 2], 0, function () {\n        return this.year() % 100;\n    });\n\n    addFormatToken(0, ['YYYY', 4], 0, 'year');\n    addFormatToken(0, ['YYYYY', 5], 0, 'year');\n    addFormatToken(0, ['YYYYYY', 6, true], 0, 'year');\n\n    // ALIASES\n\n    addUnitAlias('year', 'y');\n\n    // PRIORITIES\n\n    addUnitPriority('year', 1);\n\n    // PARSING\n\n    addRegexToken('Y', matchSigned);\n    addRegexToken('YY', match1to2, match2);\n    addRegexToken('YYYY', match1to4, match4);\n    addRegexToken('YYYYY', match1to6, match6);\n    addRegexToken('YYYYYY', match1to6, match6);\n\n    addParseToken(['YYYYY', 'YYYYYY'], YEAR);\n    addParseToken('YYYY', function (input, array) {\n        array[YEAR] =\n            input.length === 2 ? hooks.parseTwoDigitYear(input) : toInt(input);\n    });\n    addParseToken('YY', function (input, array) {\n        array[YEAR] = hooks.parseTwoDigitYear(input);\n    });\n    addParseToken('Y', function (input, array) {\n        array[YEAR] = parseInt(input, 10);\n    });\n\n    // HELPERS\n\n    function daysInYear(year) {\n        return isLeapYear(year) ? 366 : 365;\n    }\n\n    // HOOKS\n\n    hooks.parseTwoDigitYear = function (input) {\n        return toInt(input) + (toInt(input) > 68 ? 1900 : 2000);\n    };\n\n    // MOMENTS\n\n    var getSetYear = makeGetSet('FullYear', true);\n\n    function getIsLeapYear() {\n        return isLeapYear(this.year());\n    }\n\n    function createDate(y, m, d, h, M, s, ms) {\n        // can't just apply() to create a date:\n        // https://stackoverflow.com/q/181348\n        var date;\n        // the date constructor remaps years 0-99 to 1900-1999\n        if (y < 100 && y >= 0) {\n            // preserve leap years using a full 400 year cycle, then reset\n            date = new Date(y + 400, m, d, h, M, s, ms);\n            if (isFinite(date.getFullYear())) {\n                date.setFullYear(y);\n            }\n        } else {\n            date = new Date(y, m, d, h, M, s, ms);\n        }\n\n        return date;\n    }\n\n    function createUTCDate(y) {\n        var date, args;\n        // the Date.UTC function remaps years 0-99 to 1900-1999\n        if (y < 100 && y >= 0) {\n            args = Array.prototype.slice.call(arguments);\n            // preserve leap years using a full 400 year cycle, then reset\n            args[0] = y + 400;\n            date = new Date(Date.UTC.apply(null, args));\n            if (isFinite(date.getUTCFullYear())) {\n                date.setUTCFullYear(y);\n            }\n        } else {\n            date = new Date(Date.UTC.apply(null, arguments));\n        }\n\n        return date;\n    }\n\n    // start-of-first-week - start-of-year\n    function firstWeekOffset(year, dow, doy) {\n        var // first-week day -- which january is always in the first week (4 for iso, 1 for other)\n            fwd = 7 + dow - doy,\n            // first-week day local weekday -- which local weekday is fwd\n            fwdlw = (7 + createUTCDate(year, 0, fwd).getUTCDay() - dow) % 7;\n\n        return -fwdlw + fwd - 1;\n    }\n\n    // https://en.wikipedia.org/wiki/ISO_week_date#Calculating_a_date_given_the_year.2C_week_number_and_weekday\n    function dayOfYearFromWeeks(year, week, weekday, dow, doy) {\n        var localWeekday = (7 + weekday - dow) % 7,\n            weekOffset = firstWeekOffset(year, dow, doy),\n            dayOfYear = 1 + 7 * (week - 1) + localWeekday + weekOffset,\n            resYear,\n            resDayOfYear;\n\n        if (dayOfYear <= 0) {\n            resYear = year - 1;\n            resDayOfYear = daysInYear(resYear) + dayOfYear;\n        } else if (dayOfYear > daysInYear(year)) {\n            resYear = year + 1;\n            resDayOfYear = dayOfYear - daysInYear(year);\n        } else {\n            resYear = year;\n            resDayOfYear = dayOfYear;\n        }\n\n        return {\n            year: resYear,\n            dayOfYear: resDayOfYear,\n        };\n    }\n\n    function weekOfYear(mom, dow, doy) {\n        var weekOffset = firstWeekOffset(mom.year(), dow, doy),\n            week = Math.floor((mom.dayOfYear() - weekOffset - 1) / 7) + 1,\n            resWeek,\n            resYear;\n\n        if (week < 1) {\n            resYear = mom.year() - 1;\n            resWeek = week + weeksInYear(resYear, dow, doy);\n        } else if (week > weeksInYear(mom.year(), dow, doy)) {\n            resWeek = week - weeksInYear(mom.year(), dow, doy);\n            resYear = mom.year() + 1;\n        } else {\n            resYear = mom.year();\n            resWeek = week;\n        }\n\n        return {\n            week: resWeek,\n            year: resYear,\n        };\n    }\n\n    function weeksInYear(year, dow, doy) {\n        var weekOffset = firstWeekOffset(year, dow, doy),\n            weekOffsetNext = firstWeekOffset(year + 1, dow, doy);\n        return (daysInYear(year) - weekOffset + weekOffsetNext) / 7;\n    }\n\n    // FORMATTING\n\n    addFormatToken('w', ['ww', 2], 'wo', 'week');\n    addFormatToken('W', ['WW', 2], 'Wo', 'isoWeek');\n\n    // ALIASES\n\n    addUnitAlias('week', 'w');\n    addUnitAlias('isoWeek', 'W');\n\n    // PRIORITIES\n\n    addUnitPriority('week', 5);\n    addUnitPriority('isoWeek', 5);\n\n    // PARSING\n\n    addRegexToken('w', match1to2);\n    addRegexToken('ww', match1to2, match2);\n    addRegexToken('W', match1to2);\n    addRegexToken('WW', match1to2, match2);\n\n    addWeekParseToken(\n        ['w', 'ww', 'W', 'WW'],\n        function (input, week, config, token) {\n            week[token.substr(0, 1)] = toInt(input);\n        }\n    );\n\n    // HELPERS\n\n    // LOCALES\n\n    function localeWeek(mom) {\n        return weekOfYear(mom, this._week.dow, this._week.doy).week;\n    }\n\n    var defaultLocaleWeek = {\n        dow: 0, // Sunday is the first day of the week.\n        doy: 6, // The week that contains Jan 6th is the first week of the year.\n    };\n\n    function localeFirstDayOfWeek() {\n        return this._week.dow;\n    }\n\n    function localeFirstDayOfYear() {\n        return this._week.doy;\n    }\n\n    // MOMENTS\n\n    function getSetWeek(input) {\n        var week = this.localeData().week(this);\n        return input == null ? week : this.add((input - week) * 7, 'd');\n    }\n\n    function getSetISOWeek(input) {\n        var week = weekOfYear(this, 1, 4).week;\n        return input == null ? week : this.add((input - week) * 7, 'd');\n    }\n\n    // FORMATTING\n\n    addFormatToken('d', 0, 'do', 'day');\n\n    addFormatToken('dd', 0, 0, function (format) {\n        return this.localeData().weekdaysMin(this, format);\n    });\n\n    addFormatToken('ddd', 0, 0, function (format) {\n        return this.localeData().weekdaysShort(this, format);\n    });\n\n    addFormatToken('dddd', 0, 0, function (format) {\n        return this.localeData().weekdays(this, format);\n    });\n\n    addFormatToken('e', 0, 0, 'weekday');\n    addFormatToken('E', 0, 0, 'isoWeekday');\n\n    // ALIASES\n\n    addUnitAlias('day', 'd');\n    addUnitAlias('weekday', 'e');\n    addUnitAlias('isoWeekday', 'E');\n\n    // PRIORITY\n    addUnitPriority('day', 11);\n    addUnitPriority('weekday', 11);\n    addUnitPriority('isoWeekday', 11);\n\n    // PARSING\n\n    addRegexToken('d', match1to2);\n    addRegexToken('e', match1to2);\n    addRegexToken('E', match1to2);\n    addRegexToken('dd', function (isStrict, locale) {\n        return locale.weekdaysMinRegex(isStrict);\n    });\n    addRegexToken('ddd', function (isStrict, locale) {\n        return locale.weekdaysShortRegex(isStrict);\n    });\n    addRegexToken('dddd', function (isStrict, locale) {\n        return locale.weekdaysRegex(isStrict);\n    });\n\n    addWeekParseToken(['dd', 'ddd', 'dddd'], function (input, week, config, token) {\n        var weekday = config._locale.weekdaysParse(input, token, config._strict);\n        // if we didn't get a weekday name, mark the date as invalid\n        if (weekday != null) {\n            week.d = weekday;\n        } else {\n            getParsingFlags(config).invalidWeekday = input;\n        }\n    });\n\n    addWeekParseToken(['d', 'e', 'E'], function (input, week, config, token) {\n        week[token] = toInt(input);\n    });\n\n    // HELPERS\n\n    function parseWeekday(input, locale) {\n        if (typeof input !== 'string') {\n            return input;\n        }\n\n        if (!isNaN(input)) {\n            return parseInt(input, 10);\n        }\n\n        input = locale.weekdaysParse(input);\n        if (typeof input === 'number') {\n            return input;\n        }\n\n        return null;\n    }\n\n    function parseIsoWeekday(input, locale) {\n        if (typeof input === 'string') {\n            return locale.weekdaysParse(input) % 7 || 7;\n        }\n        return isNaN(input) ? null : input;\n    }\n\n    // LOCALES\n    function shiftWeekdays(ws, n) {\n        return ws.slice(n, 7).concat(ws.slice(0, n));\n    }\n\n    var defaultLocaleWeekdays =\n            'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),\n        defaultLocaleWeekdaysShort = 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),\n        defaultLocaleWeekdaysMin = 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),\n        defaultWeekdaysRegex = matchWord,\n        defaultWeekdaysShortRegex = matchWord,\n        defaultWeekdaysMinRegex = matchWord;\n\n    function localeWeekdays(m, format) {\n        var weekdays = isArray(this._weekdays)\n            ? this._weekdays\n            : this._weekdays[\n                  m && m !== true && this._weekdays.isFormat.test(format)\n                      ? 'format'\n                      : 'standalone'\n              ];\n        return m === true\n            ? shiftWeekdays(weekdays, this._week.dow)\n            : m\n            ? weekdays[m.day()]\n            : weekdays;\n    }\n\n    function localeWeekdaysShort(m) {\n        return m === true\n            ? shiftWeekdays(this._weekdaysShort, this._week.dow)\n            : m\n            ? this._weekdaysShort[m.day()]\n            : this._weekdaysShort;\n    }\n\n    function localeWeekdaysMin(m) {\n        return m === true\n            ? shiftWeekdays(this._weekdaysMin, this._week.dow)\n            : m\n            ? this._weekdaysMin[m.day()]\n            : this._weekdaysMin;\n    }\n\n    function handleStrictParse$1(weekdayName, format, strict) {\n        var i,\n            ii,\n            mom,\n            llc = weekdayName.toLocaleLowerCase();\n        if (!this._weekdaysParse) {\n            this._weekdaysParse = [];\n            this._shortWeekdaysParse = [];\n            this._minWeekdaysParse = [];\n\n            for (i = 0; i < 7; ++i) {\n                mom = createUTC([2000, 1]).day(i);\n                this._minWeekdaysParse[i] = this.weekdaysMin(\n                    mom,\n                    ''\n                ).toLocaleLowerCase();\n                this._shortWeekdaysParse[i] = this.weekdaysShort(\n                    mom,\n                    ''\n                ).toLocaleLowerCase();\n                this._weekdaysParse[i] = this.weekdays(mom, '').toLocaleLowerCase();\n            }\n        }\n\n        if (strict) {\n            if (format === 'dddd') {\n                ii = indexOf.call(this._weekdaysParse, llc);\n                return ii !== -1 ? ii : null;\n            } else if (format === 'ddd') {\n                ii = indexOf.call(this._shortWeekdaysParse, llc);\n                return ii !== -1 ? ii : null;\n            } else {\n                ii = indexOf.call(this._minWeekdaysParse, llc);\n                return ii !== -1 ? ii : null;\n            }\n        } else {\n            if (format === 'dddd') {\n                ii = indexOf.call(this._weekdaysParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._shortWeekdaysParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._minWeekdaysParse, llc);\n                return ii !== -1 ? ii : null;\n            } else if (format === 'ddd') {\n                ii = indexOf.call(this._shortWeekdaysParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._weekdaysParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._minWeekdaysParse, llc);\n                return ii !== -1 ? ii : null;\n            } else {\n                ii = indexOf.call(this._minWeekdaysParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._weekdaysParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._shortWeekdaysParse, llc);\n                return ii !== -1 ? ii : null;\n            }\n        }\n    }\n\n    function localeWeekdaysParse(weekdayName, format, strict) {\n        var i, mom, regex;\n\n        if (this._weekdaysParseExact) {\n            return handleStrictParse$1.call(this, weekdayName, format, strict);\n        }\n\n        if (!this._weekdaysParse) {\n            this._weekdaysParse = [];\n            this._minWeekdaysParse = [];\n            this._shortWeekdaysParse = [];\n            this._fullWeekdaysParse = [];\n        }\n\n        for (i = 0; i < 7; i++) {\n            // make the regex if we don't have it already\n\n            mom = createUTC([2000, 1]).day(i);\n            if (strict && !this._fullWeekdaysParse[i]) {\n                this._fullWeekdaysParse[i] = new RegExp(\n                    '^' + this.weekdays(mom, '').replace('.', '\\\\.?') + '$',\n                    'i'\n                );\n                this._shortWeekdaysParse[i] = new RegExp(\n                    '^' + this.weekdaysShort(mom, '').replace('.', '\\\\.?') + '$',\n                    'i'\n                );\n                this._minWeekdaysParse[i] = new RegExp(\n                    '^' + this.weekdaysMin(mom, '').replace('.', '\\\\.?') + '$',\n                    'i'\n                );\n            }\n            if (!this._weekdaysParse[i]) {\n                regex =\n                    '^' +\n                    this.weekdays(mom, '') +\n                    '|^' +\n                    this.weekdaysShort(mom, '') +\n                    '|^' +\n                    this.weekdaysMin(mom, '');\n                this._weekdaysParse[i] = new RegExp(regex.replace('.', ''), 'i');\n            }\n            // test the regex\n            if (\n                strict &&\n                format === 'dddd' &&\n                this._fullWeekdaysParse[i].test(weekdayName)\n            ) {\n                return i;\n            } else if (\n                strict &&\n                format === 'ddd' &&\n                this._shortWeekdaysParse[i].test(weekdayName)\n            ) {\n                return i;\n            } else if (\n                strict &&\n                format === 'dd' &&\n                this._minWeekdaysParse[i].test(weekdayName)\n            ) {\n                return i;\n            } else if (!strict && this._weekdaysParse[i].test(weekdayName)) {\n                return i;\n            }\n        }\n    }\n\n    // MOMENTS\n\n    function getSetDayOfWeek(input) {\n        if (!this.isValid()) {\n            return input != null ? this : NaN;\n        }\n        var day = this._isUTC ? this._d.getUTCDay() : this._d.getDay();\n        if (input != null) {\n            input = parseWeekday(input, this.localeData());\n            return this.add(input - day, 'd');\n        } else {\n            return day;\n        }\n    }\n\n    function getSetLocaleDayOfWeek(input) {\n        if (!this.isValid()) {\n            return input != null ? this : NaN;\n        }\n        var weekday = (this.day() + 7 - this.localeData()._week.dow) % 7;\n        return input == null ? weekday : this.add(input - weekday, 'd');\n    }\n\n    function getSetISODayOfWeek(input) {\n        if (!this.isValid()) {\n            return input != null ? this : NaN;\n        }\n\n        // behaves the same as moment#day except\n        // as a getter, returns 7 instead of 0 (1-7 range instead of 0-6)\n        // as a setter, sunday should belong to the previous week.\n\n        if (input != null) {\n            var weekday = parseIsoWeekday(input, this.localeData());\n            return this.day(this.day() % 7 ? weekday : weekday - 7);\n        } else {\n            return this.day() || 7;\n        }\n    }\n\n    function weekdaysRegex(isStrict) {\n        if (this._weekdaysParseExact) {\n            if (!hasOwnProp(this, '_weekdaysRegex')) {\n                computeWeekdaysParse.call(this);\n            }\n            if (isStrict) {\n                return this._weekdaysStrictRegex;\n            } else {\n                return this._weekdaysRegex;\n            }\n        } else {\n            if (!hasOwnProp(this, '_weekdaysRegex')) {\n                this._weekdaysRegex = defaultWeekdaysRegex;\n            }\n            return this._weekdaysStrictRegex && isStrict\n                ? this._weekdaysStrictRegex\n                : this._weekdaysRegex;\n        }\n    }\n\n    function weekdaysShortRegex(isStrict) {\n        if (this._weekdaysParseExact) {\n            if (!hasOwnProp(this, '_weekdaysRegex')) {\n                computeWeekdaysParse.call(this);\n            }\n            if (isStrict) {\n                return this._weekdaysShortStrictRegex;\n            } else {\n                return this._weekdaysShortRegex;\n            }\n        } else {\n            if (!hasOwnProp(this, '_weekdaysShortRegex')) {\n                this._weekdaysShortRegex = defaultWeekdaysShortRegex;\n            }\n            return this._weekdaysShortStrictRegex && isStrict\n                ? this._weekdaysShortStrictRegex\n                : this._weekdaysShortRegex;\n        }\n    }\n\n    function weekdaysMinRegex(isStrict) {\n        if (this._weekdaysParseExact) {\n            if (!hasOwnProp(this, '_weekdaysRegex')) {\n                computeWeekdaysParse.call(this);\n            }\n            if (isStrict) {\n                return this._weekdaysMinStrictRegex;\n            } else {\n                return this._weekdaysMinRegex;\n            }\n        } else {\n            if (!hasOwnProp(this, '_weekdaysMinRegex')) {\n                this._weekdaysMinRegex = defaultWeekdaysMinRegex;\n            }\n            return this._weekdaysMinStrictRegex && isStrict\n                ? this._weekdaysMinStrictRegex\n                : this._weekdaysMinRegex;\n        }\n    }\n\n    function computeWeekdaysParse() {\n        function cmpLenRev(a, b) {\n            return b.length - a.length;\n        }\n\n        var minPieces = [],\n            shortPieces = [],\n            longPieces = [],\n            mixedPieces = [],\n            i,\n            mom,\n            minp,\n            shortp,\n            longp;\n        for (i = 0; i < 7; i++) {\n            // make the regex if we don't have it already\n            mom = createUTC([2000, 1]).day(i);\n            minp = regexEscape(this.weekdaysMin(mom, ''));\n            shortp = regexEscape(this.weekdaysShort(mom, ''));\n            longp = regexEscape(this.weekdays(mom, ''));\n            minPieces.push(minp);\n            shortPieces.push(shortp);\n            longPieces.push(longp);\n            mixedPieces.push(minp);\n            mixedPieces.push(shortp);\n            mixedPieces.push(longp);\n        }\n        // Sorting makes sure if one weekday (or abbr) is a prefix of another it\n        // will match the longer piece.\n        minPieces.sort(cmpLenRev);\n        shortPieces.sort(cmpLenRev);\n        longPieces.sort(cmpLenRev);\n        mixedPieces.sort(cmpLenRev);\n\n        this._weekdaysRegex = new RegExp('^(' + mixedPieces.join('|') + ')', 'i');\n        this._weekdaysShortRegex = this._weekdaysRegex;\n        this._weekdaysMinRegex = this._weekdaysRegex;\n\n        this._weekdaysStrictRegex = new RegExp(\n            '^(' + longPieces.join('|') + ')',\n            'i'\n        );\n        this._weekdaysShortStrictRegex = new RegExp(\n            '^(' + shortPieces.join('|') + ')',\n            'i'\n        );\n        this._weekdaysMinStrictRegex = new RegExp(\n            '^(' + minPieces.join('|') + ')',\n            'i'\n        );\n    }\n\n    // FORMATTING\n\n    function hFormat() {\n        return this.hours() % 12 || 12;\n    }\n\n    function kFormat() {\n        return this.hours() || 24;\n    }\n\n    addFormatToken('H', ['HH', 2], 0, 'hour');\n    addFormatToken('h', ['hh', 2], 0, hFormat);\n    addFormatToken('k', ['kk', 2], 0, kFormat);\n\n    addFormatToken('hmm', 0, 0, function () {\n        return '' + hFormat.apply(this) + zeroFill(this.minutes(), 2);\n    });\n\n    addFormatToken('hmmss', 0, 0, function () {\n        return (\n            '' +\n            hFormat.apply(this) +\n            zeroFill(this.minutes(), 2) +\n            zeroFill(this.seconds(), 2)\n        );\n    });\n\n    addFormatToken('Hmm', 0, 0, function () {\n        return '' + this.hours() + zeroFill(this.minutes(), 2);\n    });\n\n    addFormatToken('Hmmss', 0, 0, function () {\n        return (\n            '' +\n            this.hours() +\n            zeroFill(this.minutes(), 2) +\n            zeroFill(this.seconds(), 2)\n        );\n    });\n\n    function meridiem(token, lowercase) {\n        addFormatToken(token, 0, 0, function () {\n            return this.localeData().meridiem(\n                this.hours(),\n                this.minutes(),\n                lowercase\n            );\n        });\n    }\n\n    meridiem('a', true);\n    meridiem('A', false);\n\n    // ALIASES\n\n    addUnitAlias('hour', 'h');\n\n    // PRIORITY\n    addUnitPriority('hour', 13);\n\n    // PARSING\n\n    function matchMeridiem(isStrict, locale) {\n        return locale._meridiemParse;\n    }\n\n    addRegexToken('a', matchMeridiem);\n    addRegexToken('A', matchMeridiem);\n    addRegexToken('H', match1to2);\n    addRegexToken('h', match1to2);\n    addRegexToken('k', match1to2);\n    addRegexToken('HH', match1to2, match2);\n    addRegexToken('hh', match1to2, match2);\n    addRegexToken('kk', match1to2, match2);\n\n    addRegexToken('hmm', match3to4);\n    addRegexToken('hmmss', match5to6);\n    addRegexToken('Hmm', match3to4);\n    addRegexToken('Hmmss', match5to6);\n\n    addParseToken(['H', 'HH'], HOUR);\n    addParseToken(['k', 'kk'], function (input, array, config) {\n        var kInput = toInt(input);\n        array[HOUR] = kInput === 24 ? 0 : kInput;\n    });\n    addParseToken(['a', 'A'], function (input, array, config) {\n        config._isPm = config._locale.isPM(input);\n        config._meridiem = input;\n    });\n    addParseToken(['h', 'hh'], function (input, array, config) {\n        array[HOUR] = toInt(input);\n        getParsingFlags(config).bigHour = true;\n    });\n    addParseToken('hmm', function (input, array, config) {\n        var pos = input.length - 2;\n        array[HOUR] = toInt(input.substr(0, pos));\n        array[MINUTE] = toInt(input.substr(pos));\n        getParsingFlags(config).bigHour = true;\n    });\n    addParseToken('hmmss', function (input, array, config) {\n        var pos1 = input.length - 4,\n            pos2 = input.length - 2;\n        array[HOUR] = toInt(input.substr(0, pos1));\n        array[MINUTE] = toInt(input.substr(pos1, 2));\n        array[SECOND] = toInt(input.substr(pos2));\n        getParsingFlags(config).bigHour = true;\n    });\n    addParseToken('Hmm', function (input, array, config) {\n        var pos = input.length - 2;\n        array[HOUR] = toInt(input.substr(0, pos));\n        array[MINUTE] = toInt(input.substr(pos));\n    });\n    addParseToken('Hmmss', function (input, array, config) {\n        var pos1 = input.length - 4,\n            pos2 = input.length - 2;\n        array[HOUR] = toInt(input.substr(0, pos1));\n        array[MINUTE] = toInt(input.substr(pos1, 2));\n        array[SECOND] = toInt(input.substr(pos2));\n    });\n\n    // LOCALES\n\n    function localeIsPM(input) {\n        // IE8 Quirks Mode & IE7 Standards Mode do not allow accessing strings like arrays\n        // Using charAt should be more compatible.\n        return (input + '').toLowerCase().charAt(0) === 'p';\n    }\n\n    var defaultLocaleMeridiemParse = /[ap]\\.?m?\\.?/i,\n        // Setting the hour should keep the time, because the user explicitly\n        // specified which hour they want. So trying to maintain the same hour (in\n        // a new timezone) makes sense. Adding/subtracting hours does not follow\n        // this rule.\n        getSetHour = makeGetSet('Hours', true);\n\n    function localeMeridiem(hours, minutes, isLower) {\n        if (hours > 11) {\n            return isLower ? 'pm' : 'PM';\n        } else {\n            return isLower ? 'am' : 'AM';\n        }\n    }\n\n    var baseConfig = {\n        calendar: defaultCalendar,\n        longDateFormat: defaultLongDateFormat,\n        invalidDate: defaultInvalidDate,\n        ordinal: defaultOrdinal,\n        dayOfMonthOrdinalParse: defaultDayOfMonthOrdinalParse,\n        relativeTime: defaultRelativeTime,\n\n        months: defaultLocaleMonths,\n        monthsShort: defaultLocaleMonthsShort,\n\n        week: defaultLocaleWeek,\n\n        weekdays: defaultLocaleWeekdays,\n        weekdaysMin: defaultLocaleWeekdaysMin,\n        weekdaysShort: defaultLocaleWeekdaysShort,\n\n        meridiemParse: defaultLocaleMeridiemParse,\n    };\n\n    // internal storage for locale config files\n    var locales = {},\n        localeFamilies = {},\n        globalLocale;\n\n    function commonPrefix(arr1, arr2) {\n        var i,\n            minl = Math.min(arr1.length, arr2.length);\n        for (i = 0; i < minl; i += 1) {\n            if (arr1[i] !== arr2[i]) {\n                return i;\n            }\n        }\n        return minl;\n    }\n\n    function normalizeLocale(key) {\n        return key ? key.toLowerCase().replace('_', '-') : key;\n    }\n\n    // pick the locale from the array\n    // try ['en-au', 'en-gb'] as 'en-au', 'en-gb', 'en', as in move through the list trying each\n    // substring from most specific to least, but move to the next array item if it's a more specific variant than the current root\n    function chooseLocale(names) {\n        var i = 0,\n            j,\n            next,\n            locale,\n            split;\n\n        while (i < names.length) {\n            split = normalizeLocale(names[i]).split('-');\n            j = split.length;\n            next = normalizeLocale(names[i + 1]);\n            next = next ? next.split('-') : null;\n            while (j > 0) {\n                locale = loadLocale(split.slice(0, j).join('-'));\n                if (locale) {\n                    return locale;\n                }\n                if (\n                    next &&\n                    next.length >= j &&\n                    commonPrefix(split, next) >= j - 1\n                ) {\n                    //the next array item is better than a shallower substring of this one\n                    break;\n                }\n                j--;\n            }\n            i++;\n        }\n        return globalLocale;\n    }\n\n    function isLocaleNameSane(name) {\n        // Prevent names that look like filesystem paths, i.e contain '/' or '\\'\n        return name.match('^[^/\\\\\\\\]*$') != null;\n    }\n\n    function loadLocale(name) {\n        var oldLocale = null,\n            aliasedRequire;\n        // TODO: Find a better way to register and load all the locales in Node\n        if (\n            locales[name] === undefined &&\n            typeof module !== 'undefined' &&\n            module &&\n            module.exports &&\n            isLocaleNameSane(name)\n        ) {\n            try {\n                oldLocale = globalLocale._abbr;\n                aliasedRequire = require;\n                aliasedRequire('./locale/' + name);\n                getSetGlobalLocale(oldLocale);\n            } catch (e) {\n                // mark as not found to avoid repeating expensive file require call causing high CPU\n                // when trying to find en-US, en_US, en-us for every format call\n                locales[name] = null; // null means not found\n            }\n        }\n        return locales[name];\n    }\n\n    // This function will load locale and then set the global locale.  If\n    // no arguments are passed in, it will simply return the current global\n    // locale key.\n    function getSetGlobalLocale(key, values) {\n        var data;\n        if (key) {\n            if (isUndefined(values)) {\n                data = getLocale(key);\n            } else {\n                data = defineLocale(key, values);\n            }\n\n            if (data) {\n                // moment.duration._locale = moment._locale = data;\n                globalLocale = data;\n            } else {\n                if (typeof console !== 'undefined' && console.warn) {\n                    //warn user if arguments are passed but the locale could not be set\n                    console.warn(\n                        'Locale ' + key + ' not found. Did you forget to load it?'\n                    );\n                }\n            }\n        }\n\n        return globalLocale._abbr;\n    }\n\n    function defineLocale(name, config) {\n        if (config !== null) {\n            var locale,\n                parentConfig = baseConfig;\n            config.abbr = name;\n            if (locales[name] != null) {\n                deprecateSimple(\n                    'defineLocaleOverride',\n                    'use moment.updateLocale(localeName, config) to change ' +\n                        'an existing locale. moment.defineLocale(localeName, ' +\n                        'config) should only be used for creating a new locale ' +\n                        'See http://momentjs.com/guides/#/warnings/define-locale/ for more info.'\n                );\n                parentConfig = locales[name]._config;\n            } else if (config.parentLocale != null) {\n                if (locales[config.parentLocale] != null) {\n                    parentConfig = locales[config.parentLocale]._config;\n                } else {\n                    locale = loadLocale(config.parentLocale);\n                    if (locale != null) {\n                        parentConfig = locale._config;\n                    } else {\n                        if (!localeFamilies[config.parentLocale]) {\n                            localeFamilies[config.parentLocale] = [];\n                        }\n                        localeFamilies[config.parentLocale].push({\n                            name: name,\n                            config: config,\n                        });\n                        return null;\n                    }\n                }\n            }\n            locales[name] = new Locale(mergeConfigs(parentConfig, config));\n\n            if (localeFamilies[name]) {\n                localeFamilies[name].forEach(function (x) {\n                    defineLocale(x.name, x.config);\n                });\n            }\n\n            // backwards compat for now: also set the locale\n            // make sure we set the locale AFTER all child locales have been\n            // created, so we won't end up with the child locale set.\n            getSetGlobalLocale(name);\n\n            return locales[name];\n        } else {\n            // useful for testing\n            delete locales[name];\n            return null;\n        }\n    }\n\n    function updateLocale(name, config) {\n        if (config != null) {\n            var locale,\n                tmpLocale,\n                parentConfig = baseConfig;\n\n            if (locales[name] != null && locales[name].parentLocale != null) {\n                // Update existing child locale in-place to avoid memory-leaks\n                locales[name].set(mergeConfigs(locales[name]._config, config));\n            } else {\n                // MERGE\n                tmpLocale = loadLocale(name);\n                if (tmpLocale != null) {\n                    parentConfig = tmpLocale._config;\n                }\n                config = mergeConfigs(parentConfig, config);\n                if (tmpLocale == null) {\n                    // updateLocale is called for creating a new locale\n                    // Set abbr so it will have a name (getters return\n                    // undefined otherwise).\n                    config.abbr = name;\n                }\n                locale = new Locale(config);\n                locale.parentLocale = locales[name];\n                locales[name] = locale;\n            }\n\n            // backwards compat for now: also set the locale\n            getSetGlobalLocale(name);\n        } else {\n            // pass null for config to unupdate, useful for tests\n            if (locales[name] != null) {\n                if (locales[name].parentLocale != null) {\n                    locales[name] = locales[name].parentLocale;\n                    if (name === getSetGlobalLocale()) {\n                        getSetGlobalLocale(name);\n                    }\n                } else if (locales[name] != null) {\n                    delete locales[name];\n                }\n            }\n        }\n        return locales[name];\n    }\n\n    // returns locale data\n    function getLocale(key) {\n        var locale;\n\n        if (key && key._locale && key._locale._abbr) {\n            key = key._locale._abbr;\n        }\n\n        if (!key) {\n            return globalLocale;\n        }\n\n        if (!isArray(key)) {\n            //short-circuit everything else\n            locale = loadLocale(key);\n            if (locale) {\n                return locale;\n            }\n            key = [key];\n        }\n\n        return chooseLocale(key);\n    }\n\n    function listLocales() {\n        return keys(locales);\n    }\n\n    function checkOverflow(m) {\n        var overflow,\n            a = m._a;\n\n        if (a && getParsingFlags(m).overflow === -2) {\n            overflow =\n                a[MONTH] < 0 || a[MONTH] > 11\n                    ? MONTH\n                    : a[DATE] < 1 || a[DATE] > daysInMonth(a[YEAR], a[MONTH])\n                    ? DATE\n                    : a[HOUR] < 0 ||\n                      a[HOUR] > 24 ||\n                      (a[HOUR] === 24 &&\n                          (a[MINUTE] !== 0 ||\n                              a[SECOND] !== 0 ||\n                              a[MILLISECOND] !== 0))\n                    ? HOUR\n                    : a[MINUTE] < 0 || a[MINUTE] > 59\n                    ? MINUTE\n                    : a[SECOND] < 0 || a[SECOND] > 59\n                    ? SECOND\n                    : a[MILLISECOND] < 0 || a[MILLISECOND] > 999\n                    ? MILLISECOND\n                    : -1;\n\n            if (\n                getParsingFlags(m)._overflowDayOfYear &&\n                (overflow < YEAR || overflow > DATE)\n            ) {\n                overflow = DATE;\n            }\n            if (getParsingFlags(m)._overflowWeeks && overflow === -1) {\n                overflow = WEEK;\n            }\n            if (getParsingFlags(m)._overflowWeekday && overflow === -1) {\n                overflow = WEEKDAY;\n            }\n\n            getParsingFlags(m).overflow = overflow;\n        }\n\n        return m;\n    }\n\n    // iso 8601 regex\n    // 0000-00-00 0000-W00 or 0000-W00-0 + T + 00 or 00:00 or 00:00:00 or 00:00:00.000 + +00:00 or +0000 or +00)\n    var extendedIsoRegex =\n            /^\\s*((?:[+-]\\d{6}|\\d{4})-(?:\\d\\d-\\d\\d|W\\d\\d-\\d|W\\d\\d|\\d\\d\\d|\\d\\d))(?:(T| )(\\d\\d(?::\\d\\d(?::\\d\\d(?:[.,]\\d+)?)?)?)([+-]\\d\\d(?::?\\d\\d)?|\\s*Z)?)?$/,\n        basicIsoRegex =\n            /^\\s*((?:[+-]\\d{6}|\\d{4})(?:\\d\\d\\d\\d|W\\d\\d\\d|W\\d\\d|\\d\\d\\d|\\d\\d|))(?:(T| )(\\d\\d(?:\\d\\d(?:\\d\\d(?:[.,]\\d+)?)?)?)([+-]\\d\\d(?::?\\d\\d)?|\\s*Z)?)?$/,\n        tzRegex = /Z|[+-]\\d\\d(?::?\\d\\d)?/,\n        isoDates = [\n            ['YYYYYY-MM-DD', /[+-]\\d{6}-\\d\\d-\\d\\d/],\n            ['YYYY-MM-DD', /\\d{4}-\\d\\d-\\d\\d/],\n            ['GGGG-[W]WW-E', /\\d{4}-W\\d\\d-\\d/],\n            ['GGGG-[W]WW', /\\d{4}-W\\d\\d/, false],\n            ['YYYY-DDD', /\\d{4}-\\d{3}/],\n            ['YYYY-MM', /\\d{4}-\\d\\d/, false],\n            ['YYYYYYMMDD', /[+-]\\d{10}/],\n            ['YYYYMMDD', /\\d{8}/],\n            ['GGGG[W]WWE', /\\d{4}W\\d{3}/],\n            ['GGGG[W]WW', /\\d{4}W\\d{2}/, false],\n            ['YYYYDDD', /\\d{7}/],\n            ['YYYYMM', /\\d{6}/, false],\n            ['YYYY', /\\d{4}/, false],\n        ],\n        // iso time formats and regexes\n        isoTimes = [\n            ['HH:mm:ss.SSSS', /\\d\\d:\\d\\d:\\d\\d\\.\\d+/],\n            ['HH:mm:ss,SSSS', /\\d\\d:\\d\\d:\\d\\d,\\d+/],\n            ['HH:mm:ss', /\\d\\d:\\d\\d:\\d\\d/],\n            ['HH:mm', /\\d\\d:\\d\\d/],\n            ['HHmmss.SSSS', /\\d\\d\\d\\d\\d\\d\\.\\d+/],\n            ['HHmmss,SSSS', /\\d\\d\\d\\d\\d\\d,\\d+/],\n            ['HHmmss', /\\d\\d\\d\\d\\d\\d/],\n            ['HHmm', /\\d\\d\\d\\d/],\n            ['HH', /\\d\\d/],\n        ],\n        aspNetJsonRegex = /^\\/?Date\\((-?\\d+)/i,\n        // RFC 2822 regex: For details see https://tools.ietf.org/html/rfc2822#section-3.3\n        rfc2822 =\n            /^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\\s)?(\\d{1,2})\\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\\s(\\d{2,4})\\s(\\d\\d):(\\d\\d)(?::(\\d\\d))?\\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\\d{4}))$/,\n        obsOffsets = {\n            UT: 0,\n            GMT: 0,\n            EDT: -4 * 60,\n            EST: -5 * 60,\n            CDT: -5 * 60,\n            CST: -6 * 60,\n            MDT: -6 * 60,\n            MST: -7 * 60,\n            PDT: -7 * 60,\n            PST: -8 * 60,\n        };\n\n    // date from iso format\n    function configFromISO(config) {\n        var i,\n            l,\n            string = config._i,\n            match = extendedIsoRegex.exec(string) || basicIsoRegex.exec(string),\n            allowTime,\n            dateFormat,\n            timeFormat,\n            tzFormat,\n            isoDatesLen = isoDates.length,\n            isoTimesLen = isoTimes.length;\n\n        if (match) {\n            getParsingFlags(config).iso = true;\n            for (i = 0, l = isoDatesLen; i < l; i++) {\n                if (isoDates[i][1].exec(match[1])) {\n                    dateFormat = isoDates[i][0];\n                    allowTime = isoDates[i][2] !== false;\n                    break;\n                }\n            }\n            if (dateFormat == null) {\n                config._isValid = false;\n                return;\n            }\n            if (match[3]) {\n                for (i = 0, l = isoTimesLen; i < l; i++) {\n                    if (isoTimes[i][1].exec(match[3])) {\n                        // match[2] should be 'T' or space\n                        timeFormat = (match[2] || ' ') + isoTimes[i][0];\n                        break;\n                    }\n                }\n                if (timeFormat == null) {\n                    config._isValid = false;\n                    return;\n                }\n            }\n            if (!allowTime && timeFormat != null) {\n                config._isValid = false;\n                return;\n            }\n            if (match[4]) {\n                if (tzRegex.exec(match[4])) {\n                    tzFormat = 'Z';\n                } else {\n                    config._isValid = false;\n                    return;\n                }\n            }\n            config._f = dateFormat + (timeFormat || '') + (tzFormat || '');\n            configFromStringAndFormat(config);\n        } else {\n            config._isValid = false;\n        }\n    }\n\n    function extractFromRFC2822Strings(\n        yearStr,\n        monthStr,\n        dayStr,\n        hourStr,\n        minuteStr,\n        secondStr\n    ) {\n        var result = [\n            untruncateYear(yearStr),\n            defaultLocaleMonthsShort.indexOf(monthStr),\n            parseInt(dayStr, 10),\n            parseInt(hourStr, 10),\n            parseInt(minuteStr, 10),\n        ];\n\n        if (secondStr) {\n            result.push(parseInt(secondStr, 10));\n        }\n\n        return result;\n    }\n\n    function untruncateYear(yearStr) {\n        var year = parseInt(yearStr, 10);\n        if (year <= 49) {\n            return 2000 + year;\n        } else if (year <= 999) {\n            return 1900 + year;\n        }\n        return year;\n    }\n\n    function preprocessRFC2822(s) {\n        // Remove comments and folding whitespace and replace multiple-spaces with a single space\n        return s\n            .replace(/\\([^()]*\\)|[\\n\\t]/g, ' ')\n            .replace(/(\\s\\s+)/g, ' ')\n            .replace(/^\\s\\s*/, '')\n            .replace(/\\s\\s*$/, '');\n    }\n\n    function checkWeekday(weekdayStr, parsedInput, config) {\n        if (weekdayStr) {\n            // TODO: Replace the vanilla JS Date object with an independent day-of-week check.\n            var weekdayProvided = defaultLocaleWeekdaysShort.indexOf(weekdayStr),\n                weekdayActual = new Date(\n                    parsedInput[0],\n                    parsedInput[1],\n                    parsedInput[2]\n                ).getDay();\n            if (weekdayProvided !== weekdayActual) {\n                getParsingFlags(config).weekdayMismatch = true;\n                config._isValid = false;\n                return false;\n            }\n        }\n        return true;\n    }\n\n    function calculateOffset(obsOffset, militaryOffset, numOffset) {\n        if (obsOffset) {\n            return obsOffsets[obsOffset];\n        } else if (militaryOffset) {\n            // the only allowed military tz is Z\n            return 0;\n        } else {\n            var hm = parseInt(numOffset, 10),\n                m = hm % 100,\n                h = (hm - m) / 100;\n            return h * 60 + m;\n        }\n    }\n\n    // date and time from ref 2822 format\n    function configFromRFC2822(config) {\n        var match = rfc2822.exec(preprocessRFC2822(config._i)),\n            parsedArray;\n        if (match) {\n            parsedArray = extractFromRFC2822Strings(\n                match[4],\n                match[3],\n                match[2],\n                match[5],\n                match[6],\n                match[7]\n            );\n            if (!checkWeekday(match[1], parsedArray, config)) {\n                return;\n            }\n\n            config._a = parsedArray;\n            config._tzm = calculateOffset(match[8], match[9], match[10]);\n\n            config._d = createUTCDate.apply(null, config._a);\n            config._d.setUTCMinutes(config._d.getUTCMinutes() - config._tzm);\n\n            getParsingFlags(config).rfc2822 = true;\n        } else {\n            config._isValid = false;\n        }\n    }\n\n    // date from 1) ASP.NET, 2) ISO, 3) RFC 2822 formats, or 4) optional fallback if parsing isn't strict\n    function configFromString(config) {\n        var matched = aspNetJsonRegex.exec(config._i);\n        if (matched !== null) {\n            config._d = new Date(+matched[1]);\n            return;\n        }\n\n        configFromISO(config);\n        if (config._isValid === false) {\n            delete config._isValid;\n        } else {\n            return;\n        }\n\n        configFromRFC2822(config);\n        if (config._isValid === false) {\n            delete config._isValid;\n        } else {\n            return;\n        }\n\n        if (config._strict) {\n            config._isValid = false;\n        } else {\n            // Final attempt, use Input Fallback\n            hooks.createFromInputFallback(config);\n        }\n    }\n\n    hooks.createFromInputFallback = deprecate(\n        'value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), ' +\n            'which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are ' +\n            'discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.',\n        function (config) {\n            config._d = new Date(config._i + (config._useUTC ? ' UTC' : ''));\n        }\n    );\n\n    // Pick the first defined of two or three arguments.\n    function defaults(a, b, c) {\n        if (a != null) {\n            return a;\n        }\n        if (b != null) {\n            return b;\n        }\n        return c;\n    }\n\n    function currentDateArray(config) {\n        // hooks is actually the exported moment object\n        var nowValue = new Date(hooks.now());\n        if (config._useUTC) {\n            return [\n                nowValue.getUTCFullYear(),\n                nowValue.getUTCMonth(),\n                nowValue.getUTCDate(),\n            ];\n        }\n        return [nowValue.getFullYear(), nowValue.getMonth(), nowValue.getDate()];\n    }\n\n    // convert an array to a date.\n    // the array should mirror the parameters below\n    // note: all values past the year are optional and will default to the lowest possible value.\n    // [year, month, day , hour, minute, second, millisecond]\n    function configFromArray(config) {\n        var i,\n            date,\n            input = [],\n            currentDate,\n            expectedWeekday,\n            yearToUse;\n\n        if (config._d) {\n            return;\n        }\n\n        currentDate = currentDateArray(config);\n\n        //compute day of the year from weeks and weekdays\n        if (config._w && config._a[DATE] == null && config._a[MONTH] == null) {\n            dayOfYearFromWeekInfo(config);\n        }\n\n        //if the day of the year is set, figure out what it is\n        if (config._dayOfYear != null) {\n            yearToUse = defaults(config._a[YEAR], currentDate[YEAR]);\n\n            if (\n                config._dayOfYear > daysInYear(yearToUse) ||\n                config._dayOfYear === 0\n            ) {\n                getParsingFlags(config)._overflowDayOfYear = true;\n            }\n\n            date = createUTCDate(yearToUse, 0, config._dayOfYear);\n            config._a[MONTH] = date.getUTCMonth();\n            config._a[DATE] = date.getUTCDate();\n        }\n\n        // Default to current date.\n        // * if no year, month, day of month are given, default to today\n        // * if day of month is given, default month and year\n        // * if month is given, default only year\n        // * if year is given, don't default anything\n        for (i = 0; i < 3 && config._a[i] == null; ++i) {\n            config._a[i] = input[i] = currentDate[i];\n        }\n\n        // Zero out whatever was not defaulted, including time\n        for (; i < 7; i++) {\n            config._a[i] = input[i] =\n                config._a[i] == null ? (i === 2 ? 1 : 0) : config._a[i];\n        }\n\n        // Check for 24:00:00.000\n        if (\n            config._a[HOUR] === 24 &&\n            config._a[MINUTE] === 0 &&\n            config._a[SECOND] === 0 &&\n            config._a[MILLISECOND] === 0\n        ) {\n            config._nextDay = true;\n            config._a[HOUR] = 0;\n        }\n\n        config._d = (config._useUTC ? createUTCDate : createDate).apply(\n            null,\n            input\n        );\n        expectedWeekday = config._useUTC\n            ? config._d.getUTCDay()\n            : config._d.getDay();\n\n        // Apply timezone offset from input. The actual utcOffset can be changed\n        // with parseZone.\n        if (config._tzm != null) {\n            config._d.setUTCMinutes(config._d.getUTCMinutes() - config._tzm);\n        }\n\n        if (config._nextDay) {\n            config._a[HOUR] = 24;\n        }\n\n        // check for mismatching day of week\n        if (\n            config._w &&\n            typeof config._w.d !== 'undefined' &&\n            config._w.d !== expectedWeekday\n        ) {\n            getParsingFlags(config).weekdayMismatch = true;\n        }\n    }\n\n    function dayOfYearFromWeekInfo(config) {\n        var w, weekYear, week, weekday, dow, doy, temp, weekdayOverflow, curWeek;\n\n        w = config._w;\n        if (w.GG != null || w.W != null || w.E != null) {\n            dow = 1;\n            doy = 4;\n\n            // TODO: We need to take the current isoWeekYear, but that depends on\n            // how we interpret now (local, utc, fixed offset). So create\n            // a now version of current config (take local/utc/offset flags, and\n            // create now).\n            weekYear = defaults(\n                w.GG,\n                config._a[YEAR],\n                weekOfYear(createLocal(), 1, 4).year\n            );\n            week = defaults(w.W, 1);\n            weekday = defaults(w.E, 1);\n            if (weekday < 1 || weekday > 7) {\n                weekdayOverflow = true;\n            }\n        } else {\n            dow = config._locale._week.dow;\n            doy = config._locale._week.doy;\n\n            curWeek = weekOfYear(createLocal(), dow, doy);\n\n            weekYear = defaults(w.gg, config._a[YEAR], curWeek.year);\n\n            // Default to current week.\n            week = defaults(w.w, curWeek.week);\n\n            if (w.d != null) {\n                // weekday -- low day numbers are considered next week\n                weekday = w.d;\n                if (weekday < 0 || weekday > 6) {\n                    weekdayOverflow = true;\n                }\n            } else if (w.e != null) {\n                // local weekday -- counting starts from beginning of week\n                weekday = w.e + dow;\n                if (w.e < 0 || w.e > 6) {\n                    weekdayOverflow = true;\n                }\n            } else {\n                // default to beginning of week\n                weekday = dow;\n            }\n        }\n        if (week < 1 || week > weeksInYear(weekYear, dow, doy)) {\n            getParsingFlags(config)._overflowWeeks = true;\n        } else if (weekdayOverflow != null) {\n            getParsingFlags(config)._overflowWeekday = true;\n        } else {\n            temp = dayOfYearFromWeeks(weekYear, week, weekday, dow, doy);\n            config._a[YEAR] = temp.year;\n            config._dayOfYear = temp.dayOfYear;\n        }\n    }\n\n    // constant that refers to the ISO standard\n    hooks.ISO_8601 = function () {};\n\n    // constant that refers to the RFC 2822 form\n    hooks.RFC_2822 = function () {};\n\n    // date from string and format string\n    function configFromStringAndFormat(config) {\n        // TODO: Move this to another part of the creation flow to prevent circular deps\n        if (config._f === hooks.ISO_8601) {\n            configFromISO(config);\n            return;\n        }\n        if (config._f === hooks.RFC_2822) {\n            configFromRFC2822(config);\n            return;\n        }\n        config._a = [];\n        getParsingFlags(config).empty = true;\n\n        // This array is used to make a Date, either with `new Date` or `Date.UTC`\n        var string = '' + config._i,\n            i,\n            parsedInput,\n            tokens,\n            token,\n            skipped,\n            stringLength = string.length,\n            totalParsedInputLength = 0,\n            era,\n            tokenLen;\n\n        tokens =\n            expandFormat(config._f, config._locale).match(formattingTokens) || [];\n        tokenLen = tokens.length;\n        for (i = 0; i < tokenLen; i++) {\n            token = tokens[i];\n            parsedInput = (string.match(getParseRegexForToken(token, config)) ||\n                [])[0];\n            if (parsedInput) {\n                skipped = string.substr(0, string.indexOf(parsedInput));\n                if (skipped.length > 0) {\n                    getParsingFlags(config).unusedInput.push(skipped);\n                }\n                string = string.slice(\n                    string.indexOf(parsedInput) + parsedInput.length\n                );\n                totalParsedInputLength += parsedInput.length;\n            }\n            // don't parse if it's not a known token\n            if (formatTokenFunctions[token]) {\n                if (parsedInput) {\n                    getParsingFlags(config).empty = false;\n                } else {\n                    getParsingFlags(config).unusedTokens.push(token);\n                }\n                addTimeToArrayFromToken(token, parsedInput, config);\n            } else if (config._strict && !parsedInput) {\n                getParsingFlags(config).unusedTokens.push(token);\n            }\n        }\n\n        // add remaining unparsed input length to the string\n        getParsingFlags(config).charsLeftOver =\n            stringLength - totalParsedInputLength;\n        if (string.length > 0) {\n            getParsingFlags(config).unusedInput.push(string);\n        }\n\n        // clear _12h flag if hour is <= 12\n        if (\n            config._a[HOUR] <= 12 &&\n            getParsingFlags(config).bigHour === true &&\n            config._a[HOUR] > 0\n        ) {\n            getParsingFlags(config).bigHour = undefined;\n        }\n\n        getParsingFlags(config).parsedDateParts = config._a.slice(0);\n        getParsingFlags(config).meridiem = config._meridiem;\n        // handle meridiem\n        config._a[HOUR] = meridiemFixWrap(\n            config._locale,\n            config._a[HOUR],\n            config._meridiem\n        );\n\n        // handle era\n        era = getParsingFlags(config).era;\n        if (era !== null) {\n            config._a[YEAR] = config._locale.erasConvertYear(era, config._a[YEAR]);\n        }\n\n        configFromArray(config);\n        checkOverflow(config);\n    }\n\n    function meridiemFixWrap(locale, hour, meridiem) {\n        var isPm;\n\n        if (meridiem == null) {\n            // nothing to do\n            return hour;\n        }\n        if (locale.meridiemHour != null) {\n            return locale.meridiemHour(hour, meridiem);\n        } else if (locale.isPM != null) {\n            // Fallback\n            isPm = locale.isPM(meridiem);\n            if (isPm && hour < 12) {\n                hour += 12;\n            }\n            if (!isPm && hour === 12) {\n                hour = 0;\n            }\n            return hour;\n        } else {\n            // this is not supposed to happen\n            return hour;\n        }\n    }\n\n    // date from string and array of format strings\n    function configFromStringAndArray(config) {\n        var tempConfig,\n            bestMoment,\n            scoreToBeat,\n            i,\n            currentScore,\n            validFormatFound,\n            bestFormatIsValid = false,\n            configfLen = config._f.length;\n\n        if (configfLen === 0) {\n            getParsingFlags(config).invalidFormat = true;\n            config._d = new Date(NaN);\n            return;\n        }\n\n        for (i = 0; i < configfLen; i++) {\n            currentScore = 0;\n            validFormatFound = false;\n            tempConfig = copyConfig({}, config);\n            if (config._useUTC != null) {\n                tempConfig._useUTC = config._useUTC;\n            }\n            tempConfig._f = config._f[i];\n            configFromStringAndFormat(tempConfig);\n\n            if (isValid(tempConfig)) {\n                validFormatFound = true;\n            }\n\n            // if there is any input that was not parsed add a penalty for that format\n            currentScore += getParsingFlags(tempConfig).charsLeftOver;\n\n            //or tokens\n            currentScore += getParsingFlags(tempConfig).unusedTokens.length * 10;\n\n            getParsingFlags(tempConfig).score = currentScore;\n\n            if (!bestFormatIsValid) {\n                if (\n                    scoreToBeat == null ||\n                    currentScore < scoreToBeat ||\n                    validFormatFound\n                ) {\n                    scoreToBeat = currentScore;\n                    bestMoment = tempConfig;\n                    if (validFormatFound) {\n                        bestFormatIsValid = true;\n                    }\n                }\n            } else {\n                if (currentScore < scoreToBeat) {\n                    scoreToBeat = currentScore;\n                    bestMoment = tempConfig;\n                }\n            }\n        }\n\n        extend(config, bestMoment || tempConfig);\n    }\n\n    function configFromObject(config) {\n        if (config._d) {\n            return;\n        }\n\n        var i = normalizeObjectUnits(config._i),\n            dayOrDate = i.day === undefined ? i.date : i.day;\n        config._a = map(\n            [i.year, i.month, dayOrDate, i.hour, i.minute, i.second, i.millisecond],\n            function (obj) {\n                return obj && parseInt(obj, 10);\n            }\n        );\n\n        configFromArray(config);\n    }\n\n    function createFromConfig(config) {\n        var res = new Moment(checkOverflow(prepareConfig(config)));\n        if (res._nextDay) {\n            // Adding is smart enough around DST\n            res.add(1, 'd');\n            res._nextDay = undefined;\n        }\n\n        return res;\n    }\n\n    function prepareConfig(config) {\n        var input = config._i,\n            format = config._f;\n\n        config._locale = config._locale || getLocale(config._l);\n\n        if (input === null || (format === undefined && input === '')) {\n            return createInvalid({ nullInput: true });\n        }\n\n        if (typeof input === 'string') {\n            config._i = input = config._locale.preparse(input);\n        }\n\n        if (isMoment(input)) {\n            return new Moment(checkOverflow(input));\n        } else if (isDate(input)) {\n            config._d = input;\n        } else if (isArray(format)) {\n            configFromStringAndArray(config);\n        } else if (format) {\n            configFromStringAndFormat(config);\n        } else {\n            configFromInput(config);\n        }\n\n        if (!isValid(config)) {\n            config._d = null;\n        }\n\n        return config;\n    }\n\n    function configFromInput(config) {\n        var input = config._i;\n        if (isUndefined(input)) {\n            config._d = new Date(hooks.now());\n        } else if (isDate(input)) {\n            config._d = new Date(input.valueOf());\n        } else if (typeof input === 'string') {\n            configFromString(config);\n        } else if (isArray(input)) {\n            config._a = map(input.slice(0), function (obj) {\n                return parseInt(obj, 10);\n            });\n            configFromArray(config);\n        } else if (isObject(input)) {\n            configFromObject(config);\n        } else if (isNumber(input)) {\n            // from milliseconds\n            config._d = new Date(input);\n        } else {\n            hooks.createFromInputFallback(config);\n        }\n    }\n\n    function createLocalOrUTC(input, format, locale, strict, isUTC) {\n        var c = {};\n\n        if (format === true || format === false) {\n            strict = format;\n            format = undefined;\n        }\n\n        if (locale === true || locale === false) {\n            strict = locale;\n            locale = undefined;\n        }\n\n        if (\n            (isObject(input) && isObjectEmpty(input)) ||\n            (isArray(input) && input.length === 0)\n        ) {\n            input = undefined;\n        }\n        // object construction must be done this way.\n        // https://github.com/moment/moment/issues/1423\n        c._isAMomentObject = true;\n        c._useUTC = c._isUTC = isUTC;\n        c._l = locale;\n        c._i = input;\n        c._f = format;\n        c._strict = strict;\n\n        return createFromConfig(c);\n    }\n\n    function createLocal(input, format, locale, strict) {\n        return createLocalOrUTC(input, format, locale, strict, false);\n    }\n\n    var prototypeMin = deprecate(\n            'moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/',\n            function () {\n                var other = createLocal.apply(null, arguments);\n                if (this.isValid() && other.isValid()) {\n                    return other < this ? this : other;\n                } else {\n                    return createInvalid();\n                }\n            }\n        ),\n        prototypeMax = deprecate(\n            'moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/',\n            function () {\n                var other = createLocal.apply(null, arguments);\n                if (this.isValid() && other.isValid()) {\n                    return other > this ? this : other;\n                } else {\n                    return createInvalid();\n                }\n            }\n        );\n\n    // Pick a moment m from moments so that m[fn](other) is true for all\n    // other. This relies on the function fn to be transitive.\n    //\n    // moments should either be an array of moment objects or an array, whose\n    // first element is an array of moment objects.\n    function pickBy(fn, moments) {\n        var res, i;\n        if (moments.length === 1 && isArray(moments[0])) {\n            moments = moments[0];\n        }\n        if (!moments.length) {\n            return createLocal();\n        }\n        res = moments[0];\n        for (i = 1; i < moments.length; ++i) {\n            if (!moments[i].isValid() || moments[i][fn](res)) {\n                res = moments[i];\n            }\n        }\n        return res;\n    }\n\n    // TODO: Use [].sort instead?\n    function min() {\n        var args = [].slice.call(arguments, 0);\n\n        return pickBy('isBefore', args);\n    }\n\n    function max() {\n        var args = [].slice.call(arguments, 0);\n\n        return pickBy('isAfter', args);\n    }\n\n    var now = function () {\n        return Date.now ? Date.now() : +new Date();\n    };\n\n    var ordering = [\n        'year',\n        'quarter',\n        'month',\n        'week',\n        'day',\n        'hour',\n        'minute',\n        'second',\n        'millisecond',\n    ];\n\n    function isDurationValid(m) {\n        var key,\n            unitHasDecimal = false,\n            i,\n            orderLen = ordering.length;\n        for (key in m) {\n            if (\n                hasOwnProp(m, key) &&\n                !(\n                    indexOf.call(ordering, key) !== -1 &&\n                    (m[key] == null || !isNaN(m[key]))\n                )\n            ) {\n                return false;\n            }\n        }\n\n        for (i = 0; i < orderLen; ++i) {\n            if (m[ordering[i]]) {\n                if (unitHasDecimal) {\n                    return false; // only allow non-integers for smallest unit\n                }\n                if (parseFloat(m[ordering[i]]) !== toInt(m[ordering[i]])) {\n                    unitHasDecimal = true;\n                }\n            }\n        }\n\n        return true;\n    }\n\n    function isValid$1() {\n        return this._isValid;\n    }\n\n    function createInvalid$1() {\n        return createDuration(NaN);\n    }\n\n    function Duration(duration) {\n        var normalizedInput = normalizeObjectUnits(duration),\n            years = normalizedInput.year || 0,\n            quarters = normalizedInput.quarter || 0,\n            months = normalizedInput.month || 0,\n            weeks = normalizedInput.week || normalizedInput.isoWeek || 0,\n            days = normalizedInput.day || 0,\n            hours = normalizedInput.hour || 0,\n            minutes = normalizedInput.minute || 0,\n            seconds = normalizedInput.second || 0,\n            milliseconds = normalizedInput.millisecond || 0;\n\n        this._isValid = isDurationValid(normalizedInput);\n\n        // representation for dateAddRemove\n        this._milliseconds =\n            +milliseconds +\n            seconds * 1e3 + // 1000\n            minutes * 6e4 + // 1000 * 60\n            hours * 1000 * 60 * 60; //using 1000 * 60 * 60 instead of 36e5 to avoid floating point rounding errors https://github.com/moment/moment/issues/2978\n        // Because of dateAddRemove treats 24 hours as different from a\n        // day when working around DST, we need to store them separately\n        this._days = +days + weeks * 7;\n        // It is impossible to translate months into days without knowing\n        // which months you are are talking about, so we have to store\n        // it separately.\n        this._months = +months + quarters * 3 + years * 12;\n\n        this._data = {};\n\n        this._locale = getLocale();\n\n        this._bubble();\n    }\n\n    function isDuration(obj) {\n        return obj instanceof Duration;\n    }\n\n    function absRound(number) {\n        if (number < 0) {\n            return Math.round(-1 * number) * -1;\n        } else {\n            return Math.round(number);\n        }\n    }\n\n    // compare two arrays, return the number of differences\n    function compareArrays(array1, array2, dontConvert) {\n        var len = Math.min(array1.length, array2.length),\n            lengthDiff = Math.abs(array1.length - array2.length),\n            diffs = 0,\n            i;\n        for (i = 0; i < len; i++) {\n            if (\n                (dontConvert && array1[i] !== array2[i]) ||\n                (!dontConvert && toInt(array1[i]) !== toInt(array2[i]))\n            ) {\n                diffs++;\n            }\n        }\n        return diffs + lengthDiff;\n    }\n\n    // FORMATTING\n\n    function offset(token, separator) {\n        addFormatToken(token, 0, 0, function () {\n            var offset = this.utcOffset(),\n                sign = '+';\n            if (offset < 0) {\n                offset = -offset;\n                sign = '-';\n            }\n            return (\n                sign +\n                zeroFill(~~(offset / 60), 2) +\n                separator +\n                zeroFill(~~offset % 60, 2)\n            );\n        });\n    }\n\n    offset('Z', ':');\n    offset('ZZ', '');\n\n    // PARSING\n\n    addRegexToken('Z', matchShortOffset);\n    addRegexToken('ZZ', matchShortOffset);\n    addParseToken(['Z', 'ZZ'], function (input, array, config) {\n        config._useUTC = true;\n        config._tzm = offsetFromString(matchShortOffset, input);\n    });\n\n    // HELPERS\n\n    // timezone chunker\n    // '+10:00' > ['10',  '00']\n    // '-1530'  > ['-15', '30']\n    var chunkOffset = /([\\+\\-]|\\d\\d)/gi;\n\n    function offsetFromString(matcher, string) {\n        var matches = (string || '').match(matcher),\n            chunk,\n            parts,\n            minutes;\n\n        if (matches === null) {\n            return null;\n        }\n\n        chunk = matches[matches.length - 1] || [];\n        parts = (chunk + '').match(chunkOffset) || ['-', 0, 0];\n        minutes = +(parts[1] * 60) + toInt(parts[2]);\n\n        return minutes === 0 ? 0 : parts[0] === '+' ? minutes : -minutes;\n    }\n\n    // Return a moment from input, that is local/utc/zone equivalent to model.\n    function cloneWithOffset(input, model) {\n        var res, diff;\n        if (model._isUTC) {\n            res = model.clone();\n            diff =\n                (isMoment(input) || isDate(input)\n                    ? input.valueOf()\n                    : createLocal(input).valueOf()) - res.valueOf();\n            // Use low-level api, because this fn is low-level api.\n            res._d.setTime(res._d.valueOf() + diff);\n            hooks.updateOffset(res, false);\n            return res;\n        } else {\n            return createLocal(input).local();\n        }\n    }\n\n    function getDateOffset(m) {\n        // On Firefox.24 Date#getTimezoneOffset returns a floating point.\n        // https://github.com/moment/moment/pull/1871\n        return -Math.round(m._d.getTimezoneOffset());\n    }\n\n    // HOOKS\n\n    // This function will be called whenever a moment is mutated.\n    // It is intended to keep the offset in sync with the timezone.\n    hooks.updateOffset = function () {};\n\n    // MOMENTS\n\n    // keepLocalTime = true means only change the timezone, without\n    // affecting the local hour. So 5:31:26 +0300 --[utcOffset(2, true)]-->\n    // 5:31:26 +0200 It is possible that 5:31:26 doesn't exist with offset\n    // +0200, so we adjust the time as needed, to be valid.\n    //\n    // Keeping the time actually adds/subtracts (one hour)\n    // from the actual represented time. That is why we call updateOffset\n    // a second time. In case it wants us to change the offset again\n    // _changeInProgress == true case, then we have to adjust, because\n    // there is no such time in the given timezone.\n    function getSetOffset(input, keepLocalTime, keepMinutes) {\n        var offset = this._offset || 0,\n            localAdjust;\n        if (!this.isValid()) {\n            return input != null ? this : NaN;\n        }\n        if (input != null) {\n            if (typeof input === 'string') {\n                input = offsetFromString(matchShortOffset, input);\n                if (input === null) {\n                    return this;\n                }\n            } else if (Math.abs(input) < 16 && !keepMinutes) {\n                input = input * 60;\n            }\n            if (!this._isUTC && keepLocalTime) {\n                localAdjust = getDateOffset(this);\n            }\n            this._offset = input;\n            this._isUTC = true;\n            if (localAdjust != null) {\n                this.add(localAdjust, 'm');\n            }\n            if (offset !== input) {\n                if (!keepLocalTime || this._changeInProgress) {\n                    addSubtract(\n                        this,\n                        createDuration(input - offset, 'm'),\n                        1,\n                        false\n                    );\n                } else if (!this._changeInProgress) {\n                    this._changeInProgress = true;\n                    hooks.updateOffset(this, true);\n                    this._changeInProgress = null;\n                }\n            }\n            return this;\n        } else {\n            return this._isUTC ? offset : getDateOffset(this);\n        }\n    }\n\n    function getSetZone(input, keepLocalTime) {\n        if (input != null) {\n            if (typeof input !== 'string') {\n                input = -input;\n            }\n\n            this.utcOffset(input, keepLocalTime);\n\n            return this;\n        } else {\n            return -this.utcOffset();\n        }\n    }\n\n    function setOffsetToUTC(keepLocalTime) {\n        return this.utcOffset(0, keepLocalTime);\n    }\n\n    function setOffsetToLocal(keepLocalTime) {\n        if (this._isUTC) {\n            this.utcOffset(0, keepLocalTime);\n            this._isUTC = false;\n\n            if (keepLocalTime) {\n                this.subtract(getDateOffset(this), 'm');\n            }\n        }\n        return this;\n    }\n\n    function setOffsetToParsedOffset() {\n        if (this._tzm != null) {\n            this.utcOffset(this._tzm, false, true);\n        } else if (typeof this._i === 'string') {\n            var tZone = offsetFromString(matchOffset, this._i);\n            if (tZone != null) {\n                this.utcOffset(tZone);\n            } else {\n                this.utcOffset(0, true);\n            }\n        }\n        return this;\n    }\n\n    function hasAlignedHourOffset(input) {\n        if (!this.isValid()) {\n            return false;\n        }\n        input = input ? createLocal(input).utcOffset() : 0;\n\n        return (this.utcOffset() - input) % 60 === 0;\n    }\n\n    function isDaylightSavingTime() {\n        return (\n            this.utcOffset() > this.clone().month(0).utcOffset() ||\n            this.utcOffset() > this.clone().month(5).utcOffset()\n        );\n    }\n\n    function isDaylightSavingTimeShifted() {\n        if (!isUndefined(this._isDSTShifted)) {\n            return this._isDSTShifted;\n        }\n\n        var c = {},\n            other;\n\n        copyConfig(c, this);\n        c = prepareConfig(c);\n\n        if (c._a) {\n            other = c._isUTC ? createUTC(c._a) : createLocal(c._a);\n            this._isDSTShifted =\n                this.isValid() && compareArrays(c._a, other.toArray()) > 0;\n        } else {\n            this._isDSTShifted = false;\n        }\n\n        return this._isDSTShifted;\n    }\n\n    function isLocal() {\n        return this.isValid() ? !this._isUTC : false;\n    }\n\n    function isUtcOffset() {\n        return this.isValid() ? this._isUTC : false;\n    }\n\n    function isUtc() {\n        return this.isValid() ? this._isUTC && this._offset === 0 : false;\n    }\n\n    // ASP.NET json date format regex\n    var aspNetRegex = /^(-|\\+)?(?:(\\d*)[. ])?(\\d+):(\\d+)(?::(\\d+)(\\.\\d*)?)?$/,\n        // from http://docs.closure-library.googlecode.com/git/closure_goog_date_date.js.source.html\n        // somewhat more in line with 4.4.3.2 2004 spec, but allows decimal anywhere\n        // and further modified to allow for strings containing both week and day\n        isoRegex =\n            /^(-|\\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;\n\n    function createDuration(input, key) {\n        var duration = input,\n            // matching against regexp is expensive, do it on demand\n            match = null,\n            sign,\n            ret,\n            diffRes;\n\n        if (isDuration(input)) {\n            duration = {\n                ms: input._milliseconds,\n                d: input._days,\n                M: input._months,\n            };\n        } else if (isNumber(input) || !isNaN(+input)) {\n            duration = {};\n            if (key) {\n                duration[key] = +input;\n            } else {\n                duration.milliseconds = +input;\n            }\n        } else if ((match = aspNetRegex.exec(input))) {\n            sign = match[1] === '-' ? -1 : 1;\n            duration = {\n                y: 0,\n                d: toInt(match[DATE]) * sign,\n                h: toInt(match[HOUR]) * sign,\n                m: toInt(match[MINUTE]) * sign,\n                s: toInt(match[SECOND]) * sign,\n                ms: toInt(absRound(match[MILLISECOND] * 1000)) * sign, // the millisecond decimal point is included in the match\n            };\n        } else if ((match = isoRegex.exec(input))) {\n            sign = match[1] === '-' ? -1 : 1;\n            duration = {\n                y: parseIso(match[2], sign),\n                M: parseIso(match[3], sign),\n                w: parseIso(match[4], sign),\n                d: parseIso(match[5], sign),\n                h: parseIso(match[6], sign),\n                m: parseIso(match[7], sign),\n                s: parseIso(match[8], sign),\n            };\n        } else if (duration == null) {\n            // checks for null or undefined\n            duration = {};\n        } else if (\n            typeof duration === 'object' &&\n            ('from' in duration || 'to' in duration)\n        ) {\n            diffRes = momentsDifference(\n                createLocal(duration.from),\n                createLocal(duration.to)\n            );\n\n            duration = {};\n            duration.ms = diffRes.milliseconds;\n            duration.M = diffRes.months;\n        }\n\n        ret = new Duration(duration);\n\n        if (isDuration(input) && hasOwnProp(input, '_locale')) {\n            ret._locale = input._locale;\n        }\n\n        if (isDuration(input) && hasOwnProp(input, '_isValid')) {\n            ret._isValid = input._isValid;\n        }\n\n        return ret;\n    }\n\n    createDuration.fn = Duration.prototype;\n    createDuration.invalid = createInvalid$1;\n\n    function parseIso(inp, sign) {\n        // We'd normally use ~~inp for this, but unfortunately it also\n        // converts floats to ints.\n        // inp may be undefined, so careful calling replace on it.\n        var res = inp && parseFloat(inp.replace(',', '.'));\n        // apply sign while we're at it\n        return (isNaN(res) ? 0 : res) * sign;\n    }\n\n    function positiveMomentsDifference(base, other) {\n        var res = {};\n\n        res.months =\n            other.month() - base.month() + (other.year() - base.year()) * 12;\n        if (base.clone().add(res.months, 'M').isAfter(other)) {\n            --res.months;\n        }\n\n        res.milliseconds = +other - +base.clone().add(res.months, 'M');\n\n        return res;\n    }\n\n    function momentsDifference(base, other) {\n        var res;\n        if (!(base.isValid() && other.isValid())) {\n            return { milliseconds: 0, months: 0 };\n        }\n\n        other = cloneWithOffset(other, base);\n        if (base.isBefore(other)) {\n            res = positiveMomentsDifference(base, other);\n        } else {\n            res = positiveMomentsDifference(other, base);\n            res.milliseconds = -res.milliseconds;\n            res.months = -res.months;\n        }\n\n        return res;\n    }\n\n    // TODO: remove 'name' arg after deprecation is removed\n    function createAdder(direction, name) {\n        return function (val, period) {\n            var dur, tmp;\n            //invert the arguments, but complain about it\n            if (period !== null && !isNaN(+period)) {\n                deprecateSimple(\n                    name,\n                    'moment().' +\n                        name +\n                        '(period, number) is deprecated. Please use moment().' +\n                        name +\n                        '(number, period). ' +\n                        'See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.'\n                );\n                tmp = val;\n                val = period;\n                period = tmp;\n            }\n\n            dur = createDuration(val, period);\n            addSubtract(this, dur, direction);\n            return this;\n        };\n    }\n\n    function addSubtract(mom, duration, isAdding, updateOffset) {\n        var milliseconds = duration._milliseconds,\n            days = absRound(duration._days),\n            months = absRound(duration._months);\n\n        if (!mom.isValid()) {\n            // No op\n            return;\n        }\n\n        updateOffset = updateOffset == null ? true : updateOffset;\n\n        if (months) {\n            setMonth(mom, get(mom, 'Month') + months * isAdding);\n        }\n        if (days) {\n            set$1(mom, 'Date', get(mom, 'Date') + days * isAdding);\n        }\n        if (milliseconds) {\n            mom._d.setTime(mom._d.valueOf() + milliseconds * isAdding);\n        }\n        if (updateOffset) {\n            hooks.updateOffset(mom, days || months);\n        }\n    }\n\n    var add = createAdder(1, 'add'),\n        subtract = createAdder(-1, 'subtract');\n\n    function isString(input) {\n        return typeof input === 'string' || input instanceof String;\n    }\n\n    // type MomentInput = Moment | Date | string | number | (number | string)[] | MomentInputObject | void; // null | undefined\n    function isMomentInput(input) {\n        return (\n            isMoment(input) ||\n            isDate(input) ||\n            isString(input) ||\n            isNumber(input) ||\n            isNumberOrStringArray(input) ||\n            isMomentInputObject(input) ||\n            input === null ||\n            input === undefined\n        );\n    }\n\n    function isMomentInputObject(input) {\n        var objectTest = isObject(input) && !isObjectEmpty(input),\n            propertyTest = false,\n            properties = [\n                'years',\n                'year',\n                'y',\n                'months',\n                'month',\n                'M',\n                'days',\n                'day',\n                'd',\n                'dates',\n                'date',\n                'D',\n                'hours',\n                'hour',\n                'h',\n                'minutes',\n                'minute',\n                'm',\n                'seconds',\n                'second',\n                's',\n                'milliseconds',\n                'millisecond',\n                'ms',\n            ],\n            i,\n            property,\n            propertyLen = properties.length;\n\n        for (i = 0; i < propertyLen; i += 1) {\n            property = properties[i];\n            propertyTest = propertyTest || hasOwnProp(input, property);\n        }\n\n        return objectTest && propertyTest;\n    }\n\n    function isNumberOrStringArray(input) {\n        var arrayTest = isArray(input),\n            dataTypeTest = false;\n        if (arrayTest) {\n            dataTypeTest =\n                input.filter(function (item) {\n                    return !isNumber(item) && isString(input);\n                }).length === 0;\n        }\n        return arrayTest && dataTypeTest;\n    }\n\n    function isCalendarSpec(input) {\n        var objectTest = isObject(input) && !isObjectEmpty(input),\n            propertyTest = false,\n            properties = [\n                'sameDay',\n                'nextDay',\n                'lastDay',\n                'nextWeek',\n                'lastWeek',\n                'sameElse',\n            ],\n            i,\n            property;\n\n        for (i = 0; i < properties.length; i += 1) {\n            property = properties[i];\n            propertyTest = propertyTest || hasOwnProp(input, property);\n        }\n\n        return objectTest && propertyTest;\n    }\n\n    function getCalendarFormat(myMoment, now) {\n        var diff = myMoment.diff(now, 'days', true);\n        return diff < -6\n            ? 'sameElse'\n            : diff < -1\n            ? 'lastWeek'\n            : diff < 0\n            ? 'lastDay'\n            : diff < 1\n            ? 'sameDay'\n            : diff < 2\n            ? 'nextDay'\n            : diff < 7\n            ? 'nextWeek'\n            : 'sameElse';\n    }\n\n    function calendar$1(time, formats) {\n        // Support for single parameter, formats only overload to the calendar function\n        if (arguments.length === 1) {\n            if (!arguments[0]) {\n                time = undefined;\n                formats = undefined;\n            } else if (isMomentInput(arguments[0])) {\n                time = arguments[0];\n                formats = undefined;\n            } else if (isCalendarSpec(arguments[0])) {\n                formats = arguments[0];\n                time = undefined;\n            }\n        }\n        // We want to compare the start of today, vs this.\n        // Getting start-of-today depends on whether we're local/utc/offset or not.\n        var now = time || createLocal(),\n            sod = cloneWithOffset(now, this).startOf('day'),\n            format = hooks.calendarFormat(this, sod) || 'sameElse',\n            output =\n                formats &&\n                (isFunction(formats[format])\n                    ? formats[format].call(this, now)\n                    : formats[format]);\n\n        return this.format(\n            output || this.localeData().calendar(format, this, createLocal(now))\n        );\n    }\n\n    function clone() {\n        return new Moment(this);\n    }\n\n    function isAfter(input, units) {\n        var localInput = isMoment(input) ? input : createLocal(input);\n        if (!(this.isValid() && localInput.isValid())) {\n            return false;\n        }\n        units = normalizeUnits(units) || 'millisecond';\n        if (units === 'millisecond') {\n            return this.valueOf() > localInput.valueOf();\n        } else {\n            return localInput.valueOf() < this.clone().startOf(units).valueOf();\n        }\n    }\n\n    function isBefore(input, units) {\n        var localInput = isMoment(input) ? input : createLocal(input);\n        if (!(this.isValid() && localInput.isValid())) {\n            return false;\n        }\n        units = normalizeUnits(units) || 'millisecond';\n        if (units === 'millisecond') {\n            return this.valueOf() < localInput.valueOf();\n        } else {\n            return this.clone().endOf(units).valueOf() < localInput.valueOf();\n        }\n    }\n\n    function isBetween(from, to, units, inclusivity) {\n        var localFrom = isMoment(from) ? from : createLocal(from),\n            localTo = isMoment(to) ? to : createLocal(to);\n        if (!(this.isValid() && localFrom.isValid() && localTo.isValid())) {\n            return false;\n        }\n        inclusivity = inclusivity || '()';\n        return (\n            (inclusivity[0] === '('\n                ? this.isAfter(localFrom, units)\n                : !this.isBefore(localFrom, units)) &&\n            (inclusivity[1] === ')'\n                ? this.isBefore(localTo, units)\n                : !this.isAfter(localTo, units))\n        );\n    }\n\n    function isSame(input, units) {\n        var localInput = isMoment(input) ? input : createLocal(input),\n            inputMs;\n        if (!(this.isValid() && localInput.isValid())) {\n            return false;\n        }\n        units = normalizeUnits(units) || 'millisecond';\n        if (units === 'millisecond') {\n            return this.valueOf() === localInput.valueOf();\n        } else {\n            inputMs = localInput.valueOf();\n            return (\n                this.clone().startOf(units).valueOf() <= inputMs &&\n                inputMs <= this.clone().endOf(units).valueOf()\n            );\n        }\n    }\n\n    function isSameOrAfter(input, units) {\n        return this.isSame(input, units) || this.isAfter(input, units);\n    }\n\n    function isSameOrBefore(input, units) {\n        return this.isSame(input, units) || this.isBefore(input, units);\n    }\n\n    function diff(input, units, asFloat) {\n        var that, zoneDelta, output;\n\n        if (!this.isValid()) {\n            return NaN;\n        }\n\n        that = cloneWithOffset(input, this);\n\n        if (!that.isValid()) {\n            return NaN;\n        }\n\n        zoneDelta = (that.utcOffset() - this.utcOffset()) * 6e4;\n\n        units = normalizeUnits(units);\n\n        switch (units) {\n            case 'year':\n                output = monthDiff(this, that) / 12;\n                break;\n            case 'month':\n                output = monthDiff(this, that);\n                break;\n            case 'quarter':\n                output = monthDiff(this, that) / 3;\n                break;\n            case 'second':\n                output = (this - that) / 1e3;\n                break; // 1000\n            case 'minute':\n                output = (this - that) / 6e4;\n                break; // 1000 * 60\n            case 'hour':\n                output = (this - that) / 36e5;\n                break; // 1000 * 60 * 60\n            case 'day':\n                output = (this - that - zoneDelta) / 864e5;\n                break; // 1000 * 60 * 60 * 24, negate dst\n            case 'week':\n                output = (this - that - zoneDelta) / 6048e5;\n                break; // 1000 * 60 * 60 * 24 * 7, negate dst\n            default:\n                output = this - that;\n        }\n\n        return asFloat ? output : absFloor(output);\n    }\n\n    function monthDiff(a, b) {\n        if (a.date() < b.date()) {\n            // end-of-month calculations work correct when the start month has more\n            // days than the end month.\n            return -monthDiff(b, a);\n        }\n        // difference in months\n        var wholeMonthDiff = (b.year() - a.year()) * 12 + (b.month() - a.month()),\n            // b is in (anchor - 1 month, anchor + 1 month)\n            anchor = a.clone().add(wholeMonthDiff, 'months'),\n            anchor2,\n            adjust;\n\n        if (b - anchor < 0) {\n            anchor2 = a.clone().add(wholeMonthDiff - 1, 'months');\n            // linear across the month\n            adjust = (b - anchor) / (anchor - anchor2);\n        } else {\n            anchor2 = a.clone().add(wholeMonthDiff + 1, 'months');\n            // linear across the month\n            adjust = (b - anchor) / (anchor2 - anchor);\n        }\n\n        //check for negative zero, return zero if negative zero\n        return -(wholeMonthDiff + adjust) || 0;\n    }\n\n    hooks.defaultFormat = 'YYYY-MM-DDTHH:mm:ssZ';\n    hooks.defaultFormatUtc = 'YYYY-MM-DDTHH:mm:ss[Z]';\n\n    function toString() {\n        return this.clone().locale('en').format('ddd MMM DD YYYY HH:mm:ss [GMT]ZZ');\n    }\n\n    function toISOString(keepOffset) {\n        if (!this.isValid()) {\n            return null;\n        }\n        var utc = keepOffset !== true,\n            m = utc ? this.clone().utc() : this;\n        if (m.year() < 0 || m.year() > 9999) {\n            return formatMoment(\n                m,\n                utc\n                    ? 'YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]'\n                    : 'YYYYYY-MM-DD[T]HH:mm:ss.SSSZ'\n            );\n        }\n        if (isFunction(Date.prototype.toISOString)) {\n            // native implementation is ~50x faster, use it when we can\n            if (utc) {\n                return this.toDate().toISOString();\n            } else {\n                return new Date(this.valueOf() + this.utcOffset() * 60 * 1000)\n                    .toISOString()\n                    .replace('Z', formatMoment(m, 'Z'));\n            }\n        }\n        return formatMoment(\n            m,\n            utc ? 'YYYY-MM-DD[T]HH:mm:ss.SSS[Z]' : 'YYYY-MM-DD[T]HH:mm:ss.SSSZ'\n        );\n    }\n\n    /**\n     * Return a human readable representation of a moment that can\n     * also be evaluated to get a new moment which is the same\n     *\n     * @link https://nodejs.org/dist/latest/docs/api/util.html#util_custom_inspect_function_on_objects\n     */\n    function inspect() {\n        if (!this.isValid()) {\n            return 'moment.invalid(/* ' + this._i + ' */)';\n        }\n        var func = 'moment',\n            zone = '',\n            prefix,\n            year,\n            datetime,\n            suffix;\n        if (!this.isLocal()) {\n            func = this.utcOffset() === 0 ? 'moment.utc' : 'moment.parseZone';\n            zone = 'Z';\n        }\n        prefix = '[' + func + '(\"]';\n        year = 0 <= this.year() && this.year() <= 9999 ? 'YYYY' : 'YYYYYY';\n        datetime = '-MM-DD[T]HH:mm:ss.SSS';\n        suffix = zone + '[\")]';\n\n        return this.format(prefix + year + datetime + suffix);\n    }\n\n    function format(inputString) {\n        if (!inputString) {\n            inputString = this.isUtc()\n                ? hooks.defaultFormatUtc\n                : hooks.defaultFormat;\n        }\n        var output = formatMoment(this, inputString);\n        return this.localeData().postformat(output);\n    }\n\n    function from(time, withoutSuffix) {\n        if (\n            this.isValid() &&\n            ((isMoment(time) && time.isValid()) || createLocal(time).isValid())\n        ) {\n            return createDuration({ to: this, from: time })\n                .locale(this.locale())\n                .humanize(!withoutSuffix);\n        } else {\n            return this.localeData().invalidDate();\n        }\n    }\n\n    function fromNow(withoutSuffix) {\n        return this.from(createLocal(), withoutSuffix);\n    }\n\n    function to(time, withoutSuffix) {\n        if (\n            this.isValid() &&\n            ((isMoment(time) && time.isValid()) || createLocal(time).isValid())\n        ) {\n            return createDuration({ from: this, to: time })\n                .locale(this.locale())\n                .humanize(!withoutSuffix);\n        } else {\n            return this.localeData().invalidDate();\n        }\n    }\n\n    function toNow(withoutSuffix) {\n        return this.to(createLocal(), withoutSuffix);\n    }\n\n    // If passed a locale key, it will set the locale for this\n    // instance.  Otherwise, it will return the locale configuration\n    // variables for this instance.\n    function locale(key) {\n        var newLocaleData;\n\n        if (key === undefined) {\n            return this._locale._abbr;\n        } else {\n            newLocaleData = getLocale(key);\n            if (newLocaleData != null) {\n                this._locale = newLocaleData;\n            }\n            return this;\n        }\n    }\n\n    var lang = deprecate(\n        'moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.',\n        function (key) {\n            if (key === undefined) {\n                return this.localeData();\n            } else {\n                return this.locale(key);\n            }\n        }\n    );\n\n    function localeData() {\n        return this._locale;\n    }\n\n    var MS_PER_SECOND = 1000,\n        MS_PER_MINUTE = 60 * MS_PER_SECOND,\n        MS_PER_HOUR = 60 * MS_PER_MINUTE,\n        MS_PER_400_YEARS = (365 * 400 + 97) * 24 * MS_PER_HOUR;\n\n    // actual modulo - handles negative numbers (for dates before 1970):\n    function mod$1(dividend, divisor) {\n        return ((dividend % divisor) + divisor) % divisor;\n    }\n\n    function localStartOfDate(y, m, d) {\n        // the date constructor remaps years 0-99 to 1900-1999\n        if (y < 100 && y >= 0) {\n            // preserve leap years using a full 400 year cycle, then reset\n            return new Date(y + 400, m, d) - MS_PER_400_YEARS;\n        } else {\n            return new Date(y, m, d).valueOf();\n        }\n    }\n\n    function utcStartOfDate(y, m, d) {\n        // Date.UTC remaps years 0-99 to 1900-1999\n        if (y < 100 && y >= 0) {\n            // preserve leap years using a full 400 year cycle, then reset\n            return Date.UTC(y + 400, m, d) - MS_PER_400_YEARS;\n        } else {\n            return Date.UTC(y, m, d);\n        }\n    }\n\n    function startOf(units) {\n        var time, startOfDate;\n        units = normalizeUnits(units);\n        if (units === undefined || units === 'millisecond' || !this.isValid()) {\n            return this;\n        }\n\n        startOfDate = this._isUTC ? utcStartOfDate : localStartOfDate;\n\n        switch (units) {\n            case 'year':\n                time = startOfDate(this.year(), 0, 1);\n                break;\n            case 'quarter':\n                time = startOfDate(\n                    this.year(),\n                    this.month() - (this.month() % 3),\n                    1\n                );\n                break;\n            case 'month':\n                time = startOfDate(this.year(), this.month(), 1);\n                break;\n            case 'week':\n                time = startOfDate(\n                    this.year(),\n                    this.month(),\n                    this.date() - this.weekday()\n                );\n                break;\n            case 'isoWeek':\n                time = startOfDate(\n                    this.year(),\n                    this.month(),\n                    this.date() - (this.isoWeekday() - 1)\n                );\n                break;\n            case 'day':\n            case 'date':\n                time = startOfDate(this.year(), this.month(), this.date());\n                break;\n            case 'hour':\n                time = this._d.valueOf();\n                time -= mod$1(\n                    time + (this._isUTC ? 0 : this.utcOffset() * MS_PER_MINUTE),\n                    MS_PER_HOUR\n                );\n                break;\n            case 'minute':\n                time = this._d.valueOf();\n                time -= mod$1(time, MS_PER_MINUTE);\n                break;\n            case 'second':\n                time = this._d.valueOf();\n                time -= mod$1(time, MS_PER_SECOND);\n                break;\n        }\n\n        this._d.setTime(time);\n        hooks.updateOffset(this, true);\n        return this;\n    }\n\n    function endOf(units) {\n        var time, startOfDate;\n        units = normalizeUnits(units);\n        if (units === undefined || units === 'millisecond' || !this.isValid()) {\n            return this;\n        }\n\n        startOfDate = this._isUTC ? utcStartOfDate : localStartOfDate;\n\n        switch (units) {\n            case 'year':\n                time = startOfDate(this.year() + 1, 0, 1) - 1;\n                break;\n            case 'quarter':\n                time =\n                    startOfDate(\n                        this.year(),\n                        this.month() - (this.month() % 3) + 3,\n                        1\n                    ) - 1;\n                break;\n            case 'month':\n                time = startOfDate(this.year(), this.month() + 1, 1) - 1;\n                break;\n            case 'week':\n                time =\n                    startOfDate(\n                        this.year(),\n                        this.month(),\n                        this.date() - this.weekday() + 7\n                    ) - 1;\n                break;\n            case 'isoWeek':\n                time =\n                    startOfDate(\n                        this.year(),\n                        this.month(),\n                        this.date() - (this.isoWeekday() - 1) + 7\n                    ) - 1;\n                break;\n            case 'day':\n            case 'date':\n                time = startOfDate(this.year(), this.month(), this.date() + 1) - 1;\n                break;\n            case 'hour':\n                time = this._d.valueOf();\n                time +=\n                    MS_PER_HOUR -\n                    mod$1(\n                        time + (this._isUTC ? 0 : this.utcOffset() * MS_PER_MINUTE),\n                        MS_PER_HOUR\n                    ) -\n                    1;\n                break;\n            case 'minute':\n                time = this._d.valueOf();\n                time += MS_PER_MINUTE - mod$1(time, MS_PER_MINUTE) - 1;\n                break;\n            case 'second':\n                time = this._d.valueOf();\n                time += MS_PER_SECOND - mod$1(time, MS_PER_SECOND) - 1;\n                break;\n        }\n\n        this._d.setTime(time);\n        hooks.updateOffset(this, true);\n        return this;\n    }\n\n    function valueOf() {\n        return this._d.valueOf() - (this._offset || 0) * 60000;\n    }\n\n    function unix() {\n        return Math.floor(this.valueOf() / 1000);\n    }\n\n    function toDate() {\n        return new Date(this.valueOf());\n    }\n\n    function toArray() {\n        var m = this;\n        return [\n            m.year(),\n            m.month(),\n            m.date(),\n            m.hour(),\n            m.minute(),\n            m.second(),\n            m.millisecond(),\n        ];\n    }\n\n    function toObject() {\n        var m = this;\n        return {\n            years: m.year(),\n            months: m.month(),\n            date: m.date(),\n            hours: m.hours(),\n            minutes: m.minutes(),\n            seconds: m.seconds(),\n            milliseconds: m.milliseconds(),\n        };\n    }\n\n    function toJSON() {\n        // new Date(NaN).toJSON() === null\n        return this.isValid() ? this.toISOString() : null;\n    }\n\n    function isValid$2() {\n        return isValid(this);\n    }\n\n    function parsingFlags() {\n        return extend({}, getParsingFlags(this));\n    }\n\n    function invalidAt() {\n        return getParsingFlags(this).overflow;\n    }\n\n    function creationData() {\n        return {\n            input: this._i,\n            format: this._f,\n            locale: this._locale,\n            isUTC: this._isUTC,\n            strict: this._strict,\n        };\n    }\n\n    addFormatToken('N', 0, 0, 'eraAbbr');\n    addFormatToken('NN', 0, 0, 'eraAbbr');\n    addFormatToken('NNN', 0, 0, 'eraAbbr');\n    addFormatToken('NNNN', 0, 0, 'eraName');\n    addFormatToken('NNNNN', 0, 0, 'eraNarrow');\n\n    addFormatToken('y', ['y', 1], 'yo', 'eraYear');\n    addFormatToken('y', ['yy', 2], 0, 'eraYear');\n    addFormatToken('y', ['yyy', 3], 0, 'eraYear');\n    addFormatToken('y', ['yyyy', 4], 0, 'eraYear');\n\n    addRegexToken('N', matchEraAbbr);\n    addRegexToken('NN', matchEraAbbr);\n    addRegexToken('NNN', matchEraAbbr);\n    addRegexToken('NNNN', matchEraName);\n    addRegexToken('NNNNN', matchEraNarrow);\n\n    addParseToken(\n        ['N', 'NN', 'NNN', 'NNNN', 'NNNNN'],\n        function (input, array, config, token) {\n            var era = config._locale.erasParse(input, token, config._strict);\n            if (era) {\n                getParsingFlags(config).era = era;\n            } else {\n                getParsingFlags(config).invalidEra = input;\n            }\n        }\n    );\n\n    addRegexToken('y', matchUnsigned);\n    addRegexToken('yy', matchUnsigned);\n    addRegexToken('yyy', matchUnsigned);\n    addRegexToken('yyyy', matchUnsigned);\n    addRegexToken('yo', matchEraYearOrdinal);\n\n    addParseToken(['y', 'yy', 'yyy', 'yyyy'], YEAR);\n    addParseToken(['yo'], function (input, array, config, token) {\n        var match;\n        if (config._locale._eraYearOrdinalRegex) {\n            match = input.match(config._locale._eraYearOrdinalRegex);\n        }\n\n        if (config._locale.eraYearOrdinalParse) {\n            array[YEAR] = config._locale.eraYearOrdinalParse(input, match);\n        } else {\n            array[YEAR] = parseInt(input, 10);\n        }\n    });\n\n    function localeEras(m, format) {\n        var i,\n            l,\n            date,\n            eras = this._eras || getLocale('en')._eras;\n        for (i = 0, l = eras.length; i < l; ++i) {\n            switch (typeof eras[i].since) {\n                case 'string':\n                    // truncate time\n                    date = hooks(eras[i].since).startOf('day');\n                    eras[i].since = date.valueOf();\n                    break;\n            }\n\n            switch (typeof eras[i].until) {\n                case 'undefined':\n                    eras[i].until = +Infinity;\n                    break;\n                case 'string':\n                    // truncate time\n                    date = hooks(eras[i].until).startOf('day').valueOf();\n                    eras[i].until = date.valueOf();\n                    break;\n            }\n        }\n        return eras;\n    }\n\n    function localeErasParse(eraName, format, strict) {\n        var i,\n            l,\n            eras = this.eras(),\n            name,\n            abbr,\n            narrow;\n        eraName = eraName.toUpperCase();\n\n        for (i = 0, l = eras.length; i < l; ++i) {\n            name = eras[i].name.toUpperCase();\n            abbr = eras[i].abbr.toUpperCase();\n            narrow = eras[i].narrow.toUpperCase();\n\n            if (strict) {\n                switch (format) {\n                    case 'N':\n                    case 'NN':\n                    case 'NNN':\n                        if (abbr === eraName) {\n                            return eras[i];\n                        }\n                        break;\n\n                    case 'NNNN':\n                        if (name === eraName) {\n                            return eras[i];\n                        }\n                        break;\n\n                    case 'NNNNN':\n                        if (narrow === eraName) {\n                            return eras[i];\n                        }\n                        break;\n                }\n            } else if ([name, abbr, narrow].indexOf(eraName) >= 0) {\n                return eras[i];\n            }\n        }\n    }\n\n    function localeErasConvertYear(era, year) {\n        var dir = era.since <= era.until ? +1 : -1;\n        if (year === undefined) {\n            return hooks(era.since).year();\n        } else {\n            return hooks(era.since).year() + (year - era.offset) * dir;\n        }\n    }\n\n    function getEraName() {\n        var i,\n            l,\n            val,\n            eras = this.localeData().eras();\n        for (i = 0, l = eras.length; i < l; ++i) {\n            // truncate time\n            val = this.clone().startOf('day').valueOf();\n\n            if (eras[i].since <= val && val <= eras[i].until) {\n                return eras[i].name;\n            }\n            if (eras[i].until <= val && val <= eras[i].since) {\n                return eras[i].name;\n            }\n        }\n\n        return '';\n    }\n\n    function getEraNarrow() {\n        var i,\n            l,\n            val,\n            eras = this.localeData().eras();\n        for (i = 0, l = eras.length; i < l; ++i) {\n            // truncate time\n            val = this.clone().startOf('day').valueOf();\n\n            if (eras[i].since <= val && val <= eras[i].until) {\n                return eras[i].narrow;\n            }\n            if (eras[i].until <= val && val <= eras[i].since) {\n                return eras[i].narrow;\n            }\n        }\n\n        return '';\n    }\n\n    function getEraAbbr() {\n        var i,\n            l,\n            val,\n            eras = this.localeData().eras();\n        for (i = 0, l = eras.length; i < l; ++i) {\n            // truncate time\n            val = this.clone().startOf('day').valueOf();\n\n            if (eras[i].since <= val && val <= eras[i].until) {\n                return eras[i].abbr;\n            }\n            if (eras[i].until <= val && val <= eras[i].since) {\n                return eras[i].abbr;\n            }\n        }\n\n        return '';\n    }\n\n    function getEraYear() {\n        var i,\n            l,\n            dir,\n            val,\n            eras = this.localeData().eras();\n        for (i = 0, l = eras.length; i < l; ++i) {\n            dir = eras[i].since <= eras[i].until ? +1 : -1;\n\n            // truncate time\n            val = this.clone().startOf('day').valueOf();\n\n            if (\n                (eras[i].since <= val && val <= eras[i].until) ||\n                (eras[i].until <= val && val <= eras[i].since)\n            ) {\n                return (\n                    (this.year() - hooks(eras[i].since).year()) * dir +\n                    eras[i].offset\n                );\n            }\n        }\n\n        return this.year();\n    }\n\n    function erasNameRegex(isStrict) {\n        if (!hasOwnProp(this, '_erasNameRegex')) {\n            computeErasParse.call(this);\n        }\n        return isStrict ? this._erasNameRegex : this._erasRegex;\n    }\n\n    function erasAbbrRegex(isStrict) {\n        if (!hasOwnProp(this, '_erasAbbrRegex')) {\n            computeErasParse.call(this);\n        }\n        return isStrict ? this._erasAbbrRegex : this._erasRegex;\n    }\n\n    function erasNarrowRegex(isStrict) {\n        if (!hasOwnProp(this, '_erasNarrowRegex')) {\n            computeErasParse.call(this);\n        }\n        return isStrict ? this._erasNarrowRegex : this._erasRegex;\n    }\n\n    function matchEraAbbr(isStrict, locale) {\n        return locale.erasAbbrRegex(isStrict);\n    }\n\n    function matchEraName(isStrict, locale) {\n        return locale.erasNameRegex(isStrict);\n    }\n\n    function matchEraNarrow(isStrict, locale) {\n        return locale.erasNarrowRegex(isStrict);\n    }\n\n    function matchEraYearOrdinal(isStrict, locale) {\n        return locale._eraYearOrdinalRegex || matchUnsigned;\n    }\n\n    function computeErasParse() {\n        var abbrPieces = [],\n            namePieces = [],\n            narrowPieces = [],\n            mixedPieces = [],\n            i,\n            l,\n            eras = this.eras();\n\n        for (i = 0, l = eras.length; i < l; ++i) {\n            namePieces.push(regexEscape(eras[i].name));\n            abbrPieces.push(regexEscape(eras[i].abbr));\n            narrowPieces.push(regexEscape(eras[i].narrow));\n\n            mixedPieces.push(regexEscape(eras[i].name));\n            mixedPieces.push(regexEscape(eras[i].abbr));\n            mixedPieces.push(regexEscape(eras[i].narrow));\n        }\n\n        this._erasRegex = new RegExp('^(' + mixedPieces.join('|') + ')', 'i');\n        this._erasNameRegex = new RegExp('^(' + namePieces.join('|') + ')', 'i');\n        this._erasAbbrRegex = new RegExp('^(' + abbrPieces.join('|') + ')', 'i');\n        this._erasNarrowRegex = new RegExp(\n            '^(' + narrowPieces.join('|') + ')',\n            'i'\n        );\n    }\n\n    // FORMATTING\n\n    addFormatToken(0, ['gg', 2], 0, function () {\n        return this.weekYear() % 100;\n    });\n\n    addFormatToken(0, ['GG', 2], 0, function () {\n        return this.isoWeekYear() % 100;\n    });\n\n    function addWeekYearFormatToken(token, getter) {\n        addFormatToken(0, [token, token.length], 0, getter);\n    }\n\n    addWeekYearFormatToken('gggg', 'weekYear');\n    addWeekYearFormatToken('ggggg', 'weekYear');\n    addWeekYearFormatToken('GGGG', 'isoWeekYear');\n    addWeekYearFormatToken('GGGGG', 'isoWeekYear');\n\n    // ALIASES\n\n    addUnitAlias('weekYear', 'gg');\n    addUnitAlias('isoWeekYear', 'GG');\n\n    // PRIORITY\n\n    addUnitPriority('weekYear', 1);\n    addUnitPriority('isoWeekYear', 1);\n\n    // PARSING\n\n    addRegexToken('G', matchSigned);\n    addRegexToken('g', matchSigned);\n    addRegexToken('GG', match1to2, match2);\n    addRegexToken('gg', match1to2, match2);\n    addRegexToken('GGGG', match1to4, match4);\n    addRegexToken('gggg', match1to4, match4);\n    addRegexToken('GGGGG', match1to6, match6);\n    addRegexToken('ggggg', match1to6, match6);\n\n    addWeekParseToken(\n        ['gggg', 'ggggg', 'GGGG', 'GGGGG'],\n        function (input, week, config, token) {\n            week[token.substr(0, 2)] = toInt(input);\n        }\n    );\n\n    addWeekParseToken(['gg', 'GG'], function (input, week, config, token) {\n        week[token] = hooks.parseTwoDigitYear(input);\n    });\n\n    // MOMENTS\n\n    function getSetWeekYear(input) {\n        return getSetWeekYearHelper.call(\n            this,\n            input,\n            this.week(),\n            this.weekday(),\n            this.localeData()._week.dow,\n            this.localeData()._week.doy\n        );\n    }\n\n    function getSetISOWeekYear(input) {\n        return getSetWeekYearHelper.call(\n            this,\n            input,\n            this.isoWeek(),\n            this.isoWeekday(),\n            1,\n            4\n        );\n    }\n\n    function getISOWeeksInYear() {\n        return weeksInYear(this.year(), 1, 4);\n    }\n\n    function getISOWeeksInISOWeekYear() {\n        return weeksInYear(this.isoWeekYear(), 1, 4);\n    }\n\n    function getWeeksInYear() {\n        var weekInfo = this.localeData()._week;\n        return weeksInYear(this.year(), weekInfo.dow, weekInfo.doy);\n    }\n\n    function getWeeksInWeekYear() {\n        var weekInfo = this.localeData()._week;\n        return weeksInYear(this.weekYear(), weekInfo.dow, weekInfo.doy);\n    }\n\n    function getSetWeekYearHelper(input, week, weekday, dow, doy) {\n        var weeksTarget;\n        if (input == null) {\n            return weekOfYear(this, dow, doy).year;\n        } else {\n            weeksTarget = weeksInYear(input, dow, doy);\n            if (week > weeksTarget) {\n                week = weeksTarget;\n            }\n            return setWeekAll.call(this, input, week, weekday, dow, doy);\n        }\n    }\n\n    function setWeekAll(weekYear, week, weekday, dow, doy) {\n        var dayOfYearData = dayOfYearFromWeeks(weekYear, week, weekday, dow, doy),\n            date = createUTCDate(dayOfYearData.year, 0, dayOfYearData.dayOfYear);\n\n        this.year(date.getUTCFullYear());\n        this.month(date.getUTCMonth());\n        this.date(date.getUTCDate());\n        return this;\n    }\n\n    // FORMATTING\n\n    addFormatToken('Q', 0, 'Qo', 'quarter');\n\n    // ALIASES\n\n    addUnitAlias('quarter', 'Q');\n\n    // PRIORITY\n\n    addUnitPriority('quarter', 7);\n\n    // PARSING\n\n    addRegexToken('Q', match1);\n    addParseToken('Q', function (input, array) {\n        array[MONTH] = (toInt(input) - 1) * 3;\n    });\n\n    // MOMENTS\n\n    function getSetQuarter(input) {\n        return input == null\n            ? Math.ceil((this.month() + 1) / 3)\n            : this.month((input - 1) * 3 + (this.month() % 3));\n    }\n\n    // FORMATTING\n\n    addFormatToken('D', ['DD', 2], 'Do', 'date');\n\n    // ALIASES\n\n    addUnitAlias('date', 'D');\n\n    // PRIORITY\n    addUnitPriority('date', 9);\n\n    // PARSING\n\n    addRegexToken('D', match1to2);\n    addRegexToken('DD', match1to2, match2);\n    addRegexToken('Do', function (isStrict, locale) {\n        // TODO: Remove \"ordinalParse\" fallback in next major release.\n        return isStrict\n            ? locale._dayOfMonthOrdinalParse || locale._ordinalParse\n            : locale._dayOfMonthOrdinalParseLenient;\n    });\n\n    addParseToken(['D', 'DD'], DATE);\n    addParseToken('Do', function (input, array) {\n        array[DATE] = toInt(input.match(match1to2)[0]);\n    });\n\n    // MOMENTS\n\n    var getSetDayOfMonth = makeGetSet('Date', true);\n\n    // FORMATTING\n\n    addFormatToken('DDD', ['DDDD', 3], 'DDDo', 'dayOfYear');\n\n    // ALIASES\n\n    addUnitAlias('dayOfYear', 'DDD');\n\n    // PRIORITY\n    addUnitPriority('dayOfYear', 4);\n\n    // PARSING\n\n    addRegexToken('DDD', match1to3);\n    addRegexToken('DDDD', match3);\n    addParseToken(['DDD', 'DDDD'], function (input, array, config) {\n        config._dayOfYear = toInt(input);\n    });\n\n    // HELPERS\n\n    // MOMENTS\n\n    function getSetDayOfYear(input) {\n        var dayOfYear =\n            Math.round(\n                (this.clone().startOf('day') - this.clone().startOf('year')) / 864e5\n            ) + 1;\n        return input == null ? dayOfYear : this.add(input - dayOfYear, 'd');\n    }\n\n    // FORMATTING\n\n    addFormatToken('m', ['mm', 2], 0, 'minute');\n\n    // ALIASES\n\n    addUnitAlias('minute', 'm');\n\n    // PRIORITY\n\n    addUnitPriority('minute', 14);\n\n    // PARSING\n\n    addRegexToken('m', match1to2);\n    addRegexToken('mm', match1to2, match2);\n    addParseToken(['m', 'mm'], MINUTE);\n\n    // MOMENTS\n\n    var getSetMinute = makeGetSet('Minutes', false);\n\n    // FORMATTING\n\n    addFormatToken('s', ['ss', 2], 0, 'second');\n\n    // ALIASES\n\n    addUnitAlias('second', 's');\n\n    // PRIORITY\n\n    addUnitPriority('second', 15);\n\n    // PARSING\n\n    addRegexToken('s', match1to2);\n    addRegexToken('ss', match1to2, match2);\n    addParseToken(['s', 'ss'], SECOND);\n\n    // MOMENTS\n\n    var getSetSecond = makeGetSet('Seconds', false);\n\n    // FORMATTING\n\n    addFormatToken('S', 0, 0, function () {\n        return ~~(this.millisecond() / 100);\n    });\n\n    addFormatToken(0, ['SS', 2], 0, function () {\n        return ~~(this.millisecond() / 10);\n    });\n\n    addFormatToken(0, ['SSS', 3], 0, 'millisecond');\n    addFormatToken(0, ['SSSS', 4], 0, function () {\n        return this.millisecond() * 10;\n    });\n    addFormatToken(0, ['SSSSS', 5], 0, function () {\n        return this.millisecond() * 100;\n    });\n    addFormatToken(0, ['SSSSSS', 6], 0, function () {\n        return this.millisecond() * 1000;\n    });\n    addFormatToken(0, ['SSSSSSS', 7], 0, function () {\n        return this.millisecond() * 10000;\n    });\n    addFormatToken(0, ['SSSSSSSS', 8], 0, function () {\n        return this.millisecond() * 100000;\n    });\n    addFormatToken(0, ['SSSSSSSSS', 9], 0, function () {\n        return this.millisecond() * 1000000;\n    });\n\n    // ALIASES\n\n    addUnitAlias('millisecond', 'ms');\n\n    // PRIORITY\n\n    addUnitPriority('millisecond', 16);\n\n    // PARSING\n\n    addRegexToken('S', match1to3, match1);\n    addRegexToken('SS', match1to3, match2);\n    addRegexToken('SSS', match1to3, match3);\n\n    var token, getSetMillisecond;\n    for (token = 'SSSS'; token.length <= 9; token += 'S') {\n        addRegexToken(token, matchUnsigned);\n    }\n\n    function parseMs(input, array) {\n        array[MILLISECOND] = toInt(('0.' + input) * 1000);\n    }\n\n    for (token = 'S'; token.length <= 9; token += 'S') {\n        addParseToken(token, parseMs);\n    }\n\n    getSetMillisecond = makeGetSet('Milliseconds', false);\n\n    // FORMATTING\n\n    addFormatToken('z', 0, 0, 'zoneAbbr');\n    addFormatToken('zz', 0, 0, 'zoneName');\n\n    // MOMENTS\n\n    function getZoneAbbr() {\n        return this._isUTC ? 'UTC' : '';\n    }\n\n    function getZoneName() {\n        return this._isUTC ? 'Coordinated Universal Time' : '';\n    }\n\n    var proto = Moment.prototype;\n\n    proto.add = add;\n    proto.calendar = calendar$1;\n    proto.clone = clone;\n    proto.diff = diff;\n    proto.endOf = endOf;\n    proto.format = format;\n    proto.from = from;\n    proto.fromNow = fromNow;\n    proto.to = to;\n    proto.toNow = toNow;\n    proto.get = stringGet;\n    proto.invalidAt = invalidAt;\n    proto.isAfter = isAfter;\n    proto.isBefore = isBefore;\n    proto.isBetween = isBetween;\n    proto.isSame = isSame;\n    proto.isSameOrAfter = isSameOrAfter;\n    proto.isSameOrBefore = isSameOrBefore;\n    proto.isValid = isValid$2;\n    proto.lang = lang;\n    proto.locale = locale;\n    proto.localeData = localeData;\n    proto.max = prototypeMax;\n    proto.min = prototypeMin;\n    proto.parsingFlags = parsingFlags;\n    proto.set = stringSet;\n    proto.startOf = startOf;\n    proto.subtract = subtract;\n    proto.toArray = toArray;\n    proto.toObject = toObject;\n    proto.toDate = toDate;\n    proto.toISOString = toISOString;\n    proto.inspect = inspect;\n    if (typeof Symbol !== 'undefined' && Symbol.for != null) {\n        proto[Symbol.for('nodejs.util.inspect.custom')] = function () {\n            return 'Moment<' + this.format() + '>';\n        };\n    }\n    proto.toJSON = toJSON;\n    proto.toString = toString;\n    proto.unix = unix;\n    proto.valueOf = valueOf;\n    proto.creationData = creationData;\n    proto.eraName = getEraName;\n    proto.eraNarrow = getEraNarrow;\n    proto.eraAbbr = getEraAbbr;\n    proto.eraYear = getEraYear;\n    proto.year = getSetYear;\n    proto.isLeapYear = getIsLeapYear;\n    proto.weekYear = getSetWeekYear;\n    proto.isoWeekYear = getSetISOWeekYear;\n    proto.quarter = proto.quarters = getSetQuarter;\n    proto.month = getSetMonth;\n    proto.daysInMonth = getDaysInMonth;\n    proto.week = proto.weeks = getSetWeek;\n    proto.isoWeek = proto.isoWeeks = getSetISOWeek;\n    proto.weeksInYear = getWeeksInYear;\n    proto.weeksInWeekYear = getWeeksInWeekYear;\n    proto.isoWeeksInYear = getISOWeeksInYear;\n    proto.isoWeeksInISOWeekYear = getISOWeeksInISOWeekYear;\n    proto.date = getSetDayOfMonth;\n    proto.day = proto.days = getSetDayOfWeek;\n    proto.weekday = getSetLocaleDayOfWeek;\n    proto.isoWeekday = getSetISODayOfWeek;\n    proto.dayOfYear = getSetDayOfYear;\n    proto.hour = proto.hours = getSetHour;\n    proto.minute = proto.minutes = getSetMinute;\n    proto.second = proto.seconds = getSetSecond;\n    proto.millisecond = proto.milliseconds = getSetMillisecond;\n    proto.utcOffset = getSetOffset;\n    proto.utc = setOffsetToUTC;\n    proto.local = setOffsetToLocal;\n    proto.parseZone = setOffsetToParsedOffset;\n    proto.hasAlignedHourOffset = hasAlignedHourOffset;\n    proto.isDST = isDaylightSavingTime;\n    proto.isLocal = isLocal;\n    proto.isUtcOffset = isUtcOffset;\n    proto.isUtc = isUtc;\n    proto.isUTC = isUtc;\n    proto.zoneAbbr = getZoneAbbr;\n    proto.zoneName = getZoneName;\n    proto.dates = deprecate(\n        'dates accessor is deprecated. Use date instead.',\n        getSetDayOfMonth\n    );\n    proto.months = deprecate(\n        'months accessor is deprecated. Use month instead',\n        getSetMonth\n    );\n    proto.years = deprecate(\n        'years accessor is deprecated. Use year instead',\n        getSetYear\n    );\n    proto.zone = deprecate(\n        'moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/',\n        getSetZone\n    );\n    proto.isDSTShifted = deprecate(\n        'isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information',\n        isDaylightSavingTimeShifted\n    );\n\n    function createUnix(input) {\n        return createLocal(input * 1000);\n    }\n\n    function createInZone() {\n        return createLocal.apply(null, arguments).parseZone();\n    }\n\n    function preParsePostFormat(string) {\n        return string;\n    }\n\n    var proto$1 = Locale.prototype;\n\n    proto$1.calendar = calendar;\n    proto$1.longDateFormat = longDateFormat;\n    proto$1.invalidDate = invalidDate;\n    proto$1.ordinal = ordinal;\n    proto$1.preparse = preParsePostFormat;\n    proto$1.postformat = preParsePostFormat;\n    proto$1.relativeTime = relativeTime;\n    proto$1.pastFuture = pastFuture;\n    proto$1.set = set;\n    proto$1.eras = localeEras;\n    proto$1.erasParse = localeErasParse;\n    proto$1.erasConvertYear = localeErasConvertYear;\n    proto$1.erasAbbrRegex = erasAbbrRegex;\n    proto$1.erasNameRegex = erasNameRegex;\n    proto$1.erasNarrowRegex = erasNarrowRegex;\n\n    proto$1.months = localeMonths;\n    proto$1.monthsShort = localeMonthsShort;\n    proto$1.monthsParse = localeMonthsParse;\n    proto$1.monthsRegex = monthsRegex;\n    proto$1.monthsShortRegex = monthsShortRegex;\n    proto$1.week = localeWeek;\n    proto$1.firstDayOfYear = localeFirstDayOfYear;\n    proto$1.firstDayOfWeek = localeFirstDayOfWeek;\n\n    proto$1.weekdays = localeWeekdays;\n    proto$1.weekdaysMin = localeWeekdaysMin;\n    proto$1.weekdaysShort = localeWeekdaysShort;\n    proto$1.weekdaysParse = localeWeekdaysParse;\n\n    proto$1.weekdaysRegex = weekdaysRegex;\n    proto$1.weekdaysShortRegex = weekdaysShortRegex;\n    proto$1.weekdaysMinRegex = weekdaysMinRegex;\n\n    proto$1.isPM = localeIsPM;\n    proto$1.meridiem = localeMeridiem;\n\n    function get$1(format, index, field, setter) {\n        var locale = getLocale(),\n            utc = createUTC().set(setter, index);\n        return locale[field](utc, format);\n    }\n\n    function listMonthsImpl(format, index, field) {\n        if (isNumber(format)) {\n            index = format;\n            format = undefined;\n        }\n\n        format = format || '';\n\n        if (index != null) {\n            return get$1(format, index, field, 'month');\n        }\n\n        var i,\n            out = [];\n        for (i = 0; i < 12; i++) {\n            out[i] = get$1(format, i, field, 'month');\n        }\n        return out;\n    }\n\n    // ()\n    // (5)\n    // (fmt, 5)\n    // (fmt)\n    // (true)\n    // (true, 5)\n    // (true, fmt, 5)\n    // (true, fmt)\n    function listWeekdaysImpl(localeSorted, format, index, field) {\n        if (typeof localeSorted === 'boolean') {\n            if (isNumber(format)) {\n                index = format;\n                format = undefined;\n            }\n\n            format = format || '';\n        } else {\n            format = localeSorted;\n            index = format;\n            localeSorted = false;\n\n            if (isNumber(format)) {\n                index = format;\n                format = undefined;\n            }\n\n            format = format || '';\n        }\n\n        var locale = getLocale(),\n            shift = localeSorted ? locale._week.dow : 0,\n            i,\n            out = [];\n\n        if (index != null) {\n            return get$1(format, (index + shift) % 7, field, 'day');\n        }\n\n        for (i = 0; i < 7; i++) {\n            out[i] = get$1(format, (i + shift) % 7, field, 'day');\n        }\n        return out;\n    }\n\n    function listMonths(format, index) {\n        return listMonthsImpl(format, index, 'months');\n    }\n\n    function listMonthsShort(format, index) {\n        return listMonthsImpl(format, index, 'monthsShort');\n    }\n\n    function listWeekdays(localeSorted, format, index) {\n        return listWeekdaysImpl(localeSorted, format, index, 'weekdays');\n    }\n\n    function listWeekdaysShort(localeSorted, format, index) {\n        return listWeekdaysImpl(localeSorted, format, index, 'weekdaysShort');\n    }\n\n    function listWeekdaysMin(localeSorted, format, index) {\n        return listWeekdaysImpl(localeSorted, format, index, 'weekdaysMin');\n    }\n\n    getSetGlobalLocale('en', {\n        eras: [\n            {\n                since: '0001-01-01',\n                until: +Infinity,\n                offset: 1,\n                name: 'Anno Domini',\n                narrow: 'AD',\n                abbr: 'AD',\n            },\n            {\n                since: '0000-12-31',\n                until: -Infinity,\n                offset: 1,\n                name: 'Before Christ',\n                narrow: 'BC',\n                abbr: 'BC',\n            },\n        ],\n        dayOfMonthOrdinalParse: /\\d{1,2}(th|st|nd|rd)/,\n        ordinal: function (number) {\n            var b = number % 10,\n                output =\n                    toInt((number % 100) / 10) === 1\n                        ? 'th'\n                        : b === 1\n                        ? 'st'\n                        : b === 2\n                        ? 'nd'\n                        : b === 3\n                        ? 'rd'\n                        : 'th';\n            return number + output;\n        },\n    });\n\n    // Side effect imports\n\n    hooks.lang = deprecate(\n        'moment.lang is deprecated. Use moment.locale instead.',\n        getSetGlobalLocale\n    );\n    hooks.langData = deprecate(\n        'moment.langData is deprecated. Use moment.localeData instead.',\n        getLocale\n    );\n\n    var mathAbs = Math.abs;\n\n    function abs() {\n        var data = this._data;\n\n        this._milliseconds = mathAbs(this._milliseconds);\n        this._days = mathAbs(this._days);\n        this._months = mathAbs(this._months);\n\n        data.milliseconds = mathAbs(data.milliseconds);\n        data.seconds = mathAbs(data.seconds);\n        data.minutes = mathAbs(data.minutes);\n        data.hours = mathAbs(data.hours);\n        data.months = mathAbs(data.months);\n        data.years = mathAbs(data.years);\n\n        return this;\n    }\n\n    function addSubtract$1(duration, input, value, direction) {\n        var other = createDuration(input, value);\n\n        duration._milliseconds += direction * other._milliseconds;\n        duration._days += direction * other._days;\n        duration._months += direction * other._months;\n\n        return duration._bubble();\n    }\n\n    // supports only 2.0-style add(1, 's') or add(duration)\n    function add$1(input, value) {\n        return addSubtract$1(this, input, value, 1);\n    }\n\n    // supports only 2.0-style subtract(1, 's') or subtract(duration)\n    function subtract$1(input, value) {\n        return addSubtract$1(this, input, value, -1);\n    }\n\n    function absCeil(number) {\n        if (number < 0) {\n            return Math.floor(number);\n        } else {\n            return Math.ceil(number);\n        }\n    }\n\n    function bubble() {\n        var milliseconds = this._milliseconds,\n            days = this._days,\n            months = this._months,\n            data = this._data,\n            seconds,\n            minutes,\n            hours,\n            years,\n            monthsFromDays;\n\n        // if we have a mix of positive and negative values, bubble down first\n        // check: https://github.com/moment/moment/issues/2166\n        if (\n            !(\n                (milliseconds >= 0 && days >= 0 && months >= 0) ||\n                (milliseconds <= 0 && days <= 0 && months <= 0)\n            )\n        ) {\n            milliseconds += absCeil(monthsToDays(months) + days) * 864e5;\n            days = 0;\n            months = 0;\n        }\n\n        // The following code bubbles up values, see the tests for\n        // examples of what that means.\n        data.milliseconds = milliseconds % 1000;\n\n        seconds = absFloor(milliseconds / 1000);\n        data.seconds = seconds % 60;\n\n        minutes = absFloor(seconds / 60);\n        data.minutes = minutes % 60;\n\n        hours = absFloor(minutes / 60);\n        data.hours = hours % 24;\n\n        days += absFloor(hours / 24);\n\n        // convert days to months\n        monthsFromDays = absFloor(daysToMonths(days));\n        months += monthsFromDays;\n        days -= absCeil(monthsToDays(monthsFromDays));\n\n        // 12 months -> 1 year\n        years = absFloor(months / 12);\n        months %= 12;\n\n        data.days = days;\n        data.months = months;\n        data.years = years;\n\n        return this;\n    }\n\n    function daysToMonths(days) {\n        // 400 years have 146097 days (taking into account leap year rules)\n        // 400 years have 12 months === 4800\n        return (days * 4800) / 146097;\n    }\n\n    function monthsToDays(months) {\n        // the reverse of daysToMonths\n        return (months * 146097) / 4800;\n    }\n\n    function as(units) {\n        if (!this.isValid()) {\n            return NaN;\n        }\n        var days,\n            months,\n            milliseconds = this._milliseconds;\n\n        units = normalizeUnits(units);\n\n        if (units === 'month' || units === 'quarter' || units === 'year') {\n            days = this._days + milliseconds / 864e5;\n            months = this._months + daysToMonths(days);\n            switch (units) {\n                case 'month':\n                    return months;\n                case 'quarter':\n                    return months / 3;\n                case 'year':\n                    return months / 12;\n            }\n        } else {\n            // handle milliseconds separately because of floating point math errors (issue #1867)\n            days = this._days + Math.round(monthsToDays(this._months));\n            switch (units) {\n                case 'week':\n                    return days / 7 + milliseconds / 6048e5;\n                case 'day':\n                    return days + milliseconds / 864e5;\n                case 'hour':\n                    return days * 24 + milliseconds / 36e5;\n                case 'minute':\n                    return days * 1440 + milliseconds / 6e4;\n                case 'second':\n                    return days * 86400 + milliseconds / 1000;\n                // Math.floor prevents floating point math errors here\n                case 'millisecond':\n                    return Math.floor(days * 864e5) + milliseconds;\n                default:\n                    throw new Error('Unknown unit ' + units);\n            }\n        }\n    }\n\n    // TODO: Use this.as('ms')?\n    function valueOf$1() {\n        if (!this.isValid()) {\n            return NaN;\n        }\n        return (\n            this._milliseconds +\n            this._days * 864e5 +\n            (this._months % 12) * 2592e6 +\n            toInt(this._months / 12) * 31536e6\n        );\n    }\n\n    function makeAs(alias) {\n        return function () {\n            return this.as(alias);\n        };\n    }\n\n    var asMilliseconds = makeAs('ms'),\n        asSeconds = makeAs('s'),\n        asMinutes = makeAs('m'),\n        asHours = makeAs('h'),\n        asDays = makeAs('d'),\n        asWeeks = makeAs('w'),\n        asMonths = makeAs('M'),\n        asQuarters = makeAs('Q'),\n        asYears = makeAs('y');\n\n    function clone$1() {\n        return createDuration(this);\n    }\n\n    function get$2(units) {\n        units = normalizeUnits(units);\n        return this.isValid() ? this[units + 's']() : NaN;\n    }\n\n    function makeGetter(name) {\n        return function () {\n            return this.isValid() ? this._data[name] : NaN;\n        };\n    }\n\n    var milliseconds = makeGetter('milliseconds'),\n        seconds = makeGetter('seconds'),\n        minutes = makeGetter('minutes'),\n        hours = makeGetter('hours'),\n        days = makeGetter('days'),\n        months = makeGetter('months'),\n        years = makeGetter('years');\n\n    function weeks() {\n        return absFloor(this.days() / 7);\n    }\n\n    var round = Math.round,\n        thresholds = {\n            ss: 44, // a few seconds to seconds\n            s: 45, // seconds to minute\n            m: 45, // minutes to hour\n            h: 22, // hours to day\n            d: 26, // days to month/week\n            w: null, // weeks to month\n            M: 11, // months to year\n        };\n\n    // helper function for moment.fn.from, moment.fn.fromNow, and moment.duration.fn.humanize\n    function substituteTimeAgo(string, number, withoutSuffix, isFuture, locale) {\n        return locale.relativeTime(number || 1, !!withoutSuffix, string, isFuture);\n    }\n\n    function relativeTime$1(posNegDuration, withoutSuffix, thresholds, locale) {\n        var duration = createDuration(posNegDuration).abs(),\n            seconds = round(duration.as('s')),\n            minutes = round(duration.as('m')),\n            hours = round(duration.as('h')),\n            days = round(duration.as('d')),\n            months = round(duration.as('M')),\n            weeks = round(duration.as('w')),\n            years = round(duration.as('y')),\n            a =\n                (seconds <= thresholds.ss && ['s', seconds]) ||\n                (seconds < thresholds.s && ['ss', seconds]) ||\n                (minutes <= 1 && ['m']) ||\n                (minutes < thresholds.m && ['mm', minutes]) ||\n                (hours <= 1 && ['h']) ||\n                (hours < thresholds.h && ['hh', hours]) ||\n                (days <= 1 && ['d']) ||\n                (days < thresholds.d && ['dd', days]);\n\n        if (thresholds.w != null) {\n            a =\n                a ||\n                (weeks <= 1 && ['w']) ||\n                (weeks < thresholds.w && ['ww', weeks]);\n        }\n        a = a ||\n            (months <= 1 && ['M']) ||\n            (months < thresholds.M && ['MM', months]) ||\n            (years <= 1 && ['y']) || ['yy', years];\n\n        a[2] = withoutSuffix;\n        a[3] = +posNegDuration > 0;\n        a[4] = locale;\n        return substituteTimeAgo.apply(null, a);\n    }\n\n    // This function allows you to set the rounding function for relative time strings\n    function getSetRelativeTimeRounding(roundingFunction) {\n        if (roundingFunction === undefined) {\n            return round;\n        }\n        if (typeof roundingFunction === 'function') {\n            round = roundingFunction;\n            return true;\n        }\n        return false;\n    }\n\n    // This function allows you to set a threshold for relative time strings\n    function getSetRelativeTimeThreshold(threshold, limit) {\n        if (thresholds[threshold] === undefined) {\n            return false;\n        }\n        if (limit === undefined) {\n            return thresholds[threshold];\n        }\n        thresholds[threshold] = limit;\n        if (threshold === 's') {\n            thresholds.ss = limit - 1;\n        }\n        return true;\n    }\n\n    function humanize(argWithSuffix, argThresholds) {\n        if (!this.isValid()) {\n            return this.localeData().invalidDate();\n        }\n\n        var withSuffix = false,\n            th = thresholds,\n            locale,\n            output;\n\n        if (typeof argWithSuffix === 'object') {\n            argThresholds = argWithSuffix;\n            argWithSuffix = false;\n        }\n        if (typeof argWithSuffix === 'boolean') {\n            withSuffix = argWithSuffix;\n        }\n        if (typeof argThresholds === 'object') {\n            th = Object.assign({}, thresholds, argThresholds);\n            if (argThresholds.s != null && argThresholds.ss == null) {\n                th.ss = argThresholds.s - 1;\n            }\n        }\n\n        locale = this.localeData();\n        output = relativeTime$1(this, !withSuffix, th, locale);\n\n        if (withSuffix) {\n            output = locale.pastFuture(+this, output);\n        }\n\n        return locale.postformat(output);\n    }\n\n    var abs$1 = Math.abs;\n\n    function sign(x) {\n        return (x > 0) - (x < 0) || +x;\n    }\n\n    function toISOString$1() {\n        // for ISO strings we do not use the normal bubbling rules:\n        //  * milliseconds bubble up until they become hours\n        //  * days do not bubble at all\n        //  * months bubble up until they become years\n        // This is because there is no context-free conversion between hours and days\n        // (think of clock changes)\n        // and also not between days and months (28-31 days per month)\n        if (!this.isValid()) {\n            return this.localeData().invalidDate();\n        }\n\n        var seconds = abs$1(this._milliseconds) / 1000,\n            days = abs$1(this._days),\n            months = abs$1(this._months),\n            minutes,\n            hours,\n            years,\n            s,\n            total = this.asSeconds(),\n            totalSign,\n            ymSign,\n            daysSign,\n            hmsSign;\n\n        if (!total) {\n            // this is the same as C#'s (Noda) and python (isodate)...\n            // but not other JS (goog.date)\n            return 'P0D';\n        }\n\n        // 3600 seconds -> 60 minutes -> 1 hour\n        minutes = absFloor(seconds / 60);\n        hours = absFloor(minutes / 60);\n        seconds %= 60;\n        minutes %= 60;\n\n        // 12 months -> 1 year\n        years = absFloor(months / 12);\n        months %= 12;\n\n        // inspired by https://github.com/dordille/moment-isoduration/blob/master/moment.isoduration.js\n        s = seconds ? seconds.toFixed(3).replace(/\\.?0+$/, '') : '';\n\n        totalSign = total < 0 ? '-' : '';\n        ymSign = sign(this._months) !== sign(total) ? '-' : '';\n        daysSign = sign(this._days) !== sign(total) ? '-' : '';\n        hmsSign = sign(this._milliseconds) !== sign(total) ? '-' : '';\n\n        return (\n            totalSign +\n            'P' +\n            (years ? ymSign + years + 'Y' : '') +\n            (months ? ymSign + months + 'M' : '') +\n            (days ? daysSign + days + 'D' : '') +\n            (hours || minutes || seconds ? 'T' : '') +\n            (hours ? hmsSign + hours + 'H' : '') +\n            (minutes ? hmsSign + minutes + 'M' : '') +\n            (seconds ? hmsSign + s + 'S' : '')\n        );\n    }\n\n    var proto$2 = Duration.prototype;\n\n    proto$2.isValid = isValid$1;\n    proto$2.abs = abs;\n    proto$2.add = add$1;\n    proto$2.subtract = subtract$1;\n    proto$2.as = as;\n    proto$2.asMilliseconds = asMilliseconds;\n    proto$2.asSeconds = asSeconds;\n    proto$2.asMinutes = asMinutes;\n    proto$2.asHours = asHours;\n    proto$2.asDays = asDays;\n    proto$2.asWeeks = asWeeks;\n    proto$2.asMonths = asMonths;\n    proto$2.asQuarters = asQuarters;\n    proto$2.asYears = asYears;\n    proto$2.valueOf = valueOf$1;\n    proto$2._bubble = bubble;\n    proto$2.clone = clone$1;\n    proto$2.get = get$2;\n    proto$2.milliseconds = milliseconds;\n    proto$2.seconds = seconds;\n    proto$2.minutes = minutes;\n    proto$2.hours = hours;\n    proto$2.days = days;\n    proto$2.weeks = weeks;\n    proto$2.months = months;\n    proto$2.years = years;\n    proto$2.humanize = humanize;\n    proto$2.toISOString = toISOString$1;\n    proto$2.toString = toISOString$1;\n    proto$2.toJSON = toISOString$1;\n    proto$2.locale = locale;\n    proto$2.localeData = localeData;\n\n    proto$2.toIsoString = deprecate(\n        'toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)',\n        toISOString$1\n    );\n    proto$2.lang = lang;\n\n    // FORMATTING\n\n    addFormatToken('X', 0, 0, 'unix');\n    addFormatToken('x', 0, 0, 'valueOf');\n\n    // PARSING\n\n    addRegexToken('x', matchSigned);\n    addRegexToken('X', matchTimestamp);\n    addParseToken('X', function (input, array, config) {\n        config._d = new Date(parseFloat(input) * 1000);\n    });\n    addParseToken('x', function (input, array, config) {\n        config._d = new Date(toInt(input));\n    });\n\n    //! moment.js\n\n    hooks.version = '2.29.4';\n\n    setHookCallback(createLocal);\n\n    hooks.fn = proto;\n    hooks.min = min;\n    hooks.max = max;\n    hooks.now = now;\n    hooks.utc = createUTC;\n    hooks.unix = createUnix;\n    hooks.months = listMonths;\n    hooks.isDate = isDate;\n    hooks.locale = getSetGlobalLocale;\n    hooks.invalid = createInvalid;\n    hooks.duration = createDuration;\n    hooks.isMoment = isMoment;\n    hooks.weekdays = listWeekdays;\n    hooks.parseZone = createInZone;\n    hooks.localeData = getLocale;\n    hooks.isDuration = isDuration;\n    hooks.monthsShort = listMonthsShort;\n    hooks.weekdaysMin = listWeekdaysMin;\n    hooks.defineLocale = defineLocale;\n    hooks.updateLocale = updateLocale;\n    hooks.locales = listLocales;\n    hooks.weekdaysShort = listWeekdaysShort;\n    hooks.normalizeUnits = normalizeUnits;\n    hooks.relativeTimeRounding = getSetRelativeTimeRounding;\n    hooks.relativeTimeThreshold = getSetRelativeTimeThreshold;\n    hooks.calendarFormat = getCalendarFormat;\n    hooks.prototype = proto;\n\n    // currently HTML5 input type only supports 24-hour formats\n    hooks.HTML5_FMT = {\n        DATETIME_LOCAL: 'YYYY-MM-DDTHH:mm', // <input type=\"datetime-local\" />\n        DATETIME_LOCAL_SECONDS: 'YYYY-MM-DDTHH:mm:ss', // <input type=\"datetime-local\" step=\"1\" />\n        DATETIME_LOCAL_MS: 'YYYY-MM-DDTHH:mm:ss.SSS', // <input type=\"datetime-local\" step=\"0.001\" />\n        DATE: 'YYYY-MM-DD', // <input type=\"date\" />\n        TIME: 'HH:mm', // <input type=\"time\" />\n        TIME_SECONDS: 'HH:mm:ss', // <input type=\"time\" step=\"1\" />\n        TIME_MS: 'HH:mm:ss.SSS', // <input type=\"time\" step=\"0.001\" />\n        WEEK: 'GGGG-[W]WW', // <input type=\"week\" />\n        MONTH: 'YYYY-MM', // <input type=\"month\" />\n    };\n\n    return hooks;\n\n})));\n","(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@babel/runtime/helpers/slicedToArray'), require('@babel/runtime/helpers/classCallCheck'), require('@babel/runtime/helpers/createClass')) :\n    typeof define === 'function' && define.amd ? define(['exports', '@babel/runtime/helpers/slicedToArray', '@babel/runtime/helpers/classCallCheck', '@babel/runtime/helpers/createClass'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.multiBufferDataView = {}, global._slicedToArray, global._classCallCheck, global._createClass));\n})(this, (function (exports, _slicedToArray, _classCallCheck, _createClass) { 'use strict';\n\n    function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }\n\n    var _slicedToArray__default = /*#__PURE__*/_interopDefaultLegacy(_slicedToArray);\n    var _classCallCheck__default = /*#__PURE__*/_interopDefaultLegacy(_classCallCheck);\n    var _createClass__default = /*#__PURE__*/_interopDefaultLegacy(_createClass);\n\n    function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n    function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n    function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n    var MultiBufferDataView = /*#__PURE__*/function () {\n      function MultiBufferDataView(buffers) {\n        var byteOffset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n        var byteLength = arguments.length > 2 ? arguments[2] : undefined;\n        _classCallCheck__default[\"default\"](this, MultiBufferDataView);\n        if (byteOffset < 0 || byteLength !== undefined && byteLength < 0) {\n          throw new RangeError();\n        }\n        var availableBytes = buffers.reduce(function (length, buffer) {\n          return length + buffer.byteLength;\n        }, 0);\n        if (byteOffset > availableBytes || byteLength !== undefined && byteOffset + byteLength > availableBytes) {\n          throw new RangeError();\n        }\n        var dataViews = [];\n        var effectiveByteLength = byteLength === undefined ? availableBytes - byteOffset : byteLength;\n        var truncatedBuffers = [];\n        var consumedByteLength = 0;\n        var truncatedByteOffset = byteOffset;\n        var _iterator = _createForOfIteratorHelper(buffers),\n          _step;\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var buffer = _step.value;\n            if (truncatedBuffers.length === 0) {\n              if (buffer.byteLength > truncatedByteOffset) {\n                consumedByteLength = buffer.byteLength - truncatedByteOffset;\n                var byteLengthOfDataView = consumedByteLength > effectiveByteLength ? effectiveByteLength : consumedByteLength;\n                dataViews.push(new DataView(buffer, truncatedByteOffset, byteLengthOfDataView));\n                truncatedBuffers.push(buffer);\n              } else {\n                truncatedByteOffset -= buffer.byteLength;\n              }\n            } else if (consumedByteLength < effectiveByteLength) {\n              consumedByteLength += buffer.byteLength;\n              var _byteLengthOfDataView = consumedByteLength > effectiveByteLength ? buffer.byteLength - consumedByteLength + effectiveByteLength : buffer.byteLength;\n              dataViews.push(new DataView(buffer, 0, _byteLengthOfDataView));\n              truncatedBuffers.push(buffer);\n            }\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n        this._buffers = truncatedBuffers;\n        this._byteLength = effectiveByteLength;\n        this._byteOffset = truncatedByteOffset;\n        this._dataViews = dataViews;\n        this._internalBuffer = new DataView(new ArrayBuffer(8));\n      }\n      _createClass__default[\"default\"](MultiBufferDataView, [{\n        key: \"buffers\",\n        get: function get() {\n          return this._buffers;\n        }\n      }, {\n        key: \"byteLength\",\n        get: function get() {\n          return this._byteLength;\n        }\n      }, {\n        key: \"byteOffset\",\n        get: function get() {\n          return this._byteOffset;\n        }\n      }, {\n        key: \"getFloat32\",\n        value: function getFloat32(byteOffset, littleEndian) {\n          this._internalBuffer.setUint8(0, this.getUint8(byteOffset + 0));\n          this._internalBuffer.setUint8(1, this.getUint8(byteOffset + 1));\n          this._internalBuffer.setUint8(2, this.getUint8(byteOffset + 2));\n          this._internalBuffer.setUint8(3, this.getUint8(byteOffset + 3));\n          return this._internalBuffer.getFloat32(0, littleEndian);\n        }\n      }, {\n        key: \"getFloat64\",\n        value: function getFloat64(byteOffset, littleEndian) {\n          this._internalBuffer.setUint8(0, this.getUint8(byteOffset + 0));\n          this._internalBuffer.setUint8(1, this.getUint8(byteOffset + 1));\n          this._internalBuffer.setUint8(2, this.getUint8(byteOffset + 2));\n          this._internalBuffer.setUint8(3, this.getUint8(byteOffset + 3));\n          this._internalBuffer.setUint8(4, this.getUint8(byteOffset + 4));\n          this._internalBuffer.setUint8(5, this.getUint8(byteOffset + 5));\n          this._internalBuffer.setUint8(6, this.getUint8(byteOffset + 6));\n          this._internalBuffer.setUint8(7, this.getUint8(byteOffset + 7));\n          return this._internalBuffer.getFloat64(0, littleEndian);\n        }\n      }, {\n        key: \"getInt16\",\n        value: function getInt16(byteOffset, littleEndian) {\n          this._internalBuffer.setUint8(0, this.getUint8(byteOffset + 0));\n          this._internalBuffer.setUint8(1, this.getUint8(byteOffset + 1));\n          return this._internalBuffer.getInt16(0, littleEndian);\n        }\n      }, {\n        key: \"getInt32\",\n        value: function getInt32(byteOffset, littleEndian) {\n          this._internalBuffer.setUint8(0, this.getUint8(byteOffset + 0));\n          this._internalBuffer.setUint8(1, this.getUint8(byteOffset + 1));\n          this._internalBuffer.setUint8(2, this.getUint8(byteOffset + 2));\n          this._internalBuffer.setUint8(3, this.getUint8(byteOffset + 3));\n          return this._internalBuffer.getInt32(0, littleEndian);\n        }\n      }, {\n        key: \"getInt8\",\n        value: function getInt8(byteOffset) {\n          var _this$_findDataViewWi = this._findDataViewWithOffset(byteOffset),\n            _this$_findDataViewWi2 = _slicedToArray__default[\"default\"](_this$_findDataViewWi, 2),\n            dataView = _this$_findDataViewWi2[0],\n            byteOffsetOfDataView = _this$_findDataViewWi2[1];\n          return dataView.getInt8(byteOffset - byteOffsetOfDataView);\n        }\n      }, {\n        key: \"getUint16\",\n        value: function getUint16(byteOffset, littleEndian) {\n          this._internalBuffer.setUint8(0, this.getUint8(byteOffset + 0));\n          this._internalBuffer.setUint8(1, this.getUint8(byteOffset + 1));\n          return this._internalBuffer.getUint16(0, littleEndian);\n        }\n      }, {\n        key: \"getUint32\",\n        value: function getUint32(byteOffset, littleEndian) {\n          this._internalBuffer.setUint8(0, this.getUint8(byteOffset + 0));\n          this._internalBuffer.setUint8(1, this.getUint8(byteOffset + 1));\n          this._internalBuffer.setUint8(2, this.getUint8(byteOffset + 2));\n          this._internalBuffer.setUint8(3, this.getUint8(byteOffset + 3));\n          return this._internalBuffer.getUint32(0, littleEndian);\n        }\n      }, {\n        key: \"getUint8\",\n        value: function getUint8(byteOffset) {\n          var _this$_findDataViewWi3 = this._findDataViewWithOffset(byteOffset),\n            _this$_findDataViewWi4 = _slicedToArray__default[\"default\"](_this$_findDataViewWi3, 2),\n            dataView = _this$_findDataViewWi4[0],\n            byteOffsetOfDataView = _this$_findDataViewWi4[1];\n          return dataView.getUint8(byteOffset - byteOffsetOfDataView);\n        }\n      }, {\n        key: \"setFloat32\",\n        value: function setFloat32(byteOffset, value, littleEndian) {\n          this._internalBuffer.setFloat32(0, value, littleEndian);\n          this.setUint8(byteOffset, this._internalBuffer.getUint8(0));\n          this.setUint8(byteOffset + 1, this._internalBuffer.getUint8(1));\n          this.setUint8(byteOffset + 2, this._internalBuffer.getUint8(2));\n          this.setUint8(byteOffset + 3, this._internalBuffer.getUint8(3));\n        }\n      }, {\n        key: \"setFloat64\",\n        value: function setFloat64(byteOffset, value, littleEndian) {\n          this._internalBuffer.setFloat64(0, value, littleEndian);\n          this.setUint8(byteOffset, this._internalBuffer.getUint8(0));\n          this.setUint8(byteOffset + 1, this._internalBuffer.getUint8(1));\n          this.setUint8(byteOffset + 2, this._internalBuffer.getUint8(2));\n          this.setUint8(byteOffset + 3, this._internalBuffer.getUint8(3));\n          this.setUint8(byteOffset + 4, this._internalBuffer.getUint8(4));\n          this.setUint8(byteOffset + 5, this._internalBuffer.getUint8(5));\n          this.setUint8(byteOffset + 6, this._internalBuffer.getUint8(6));\n          this.setUint8(byteOffset + 7, this._internalBuffer.getUint8(7));\n        }\n      }, {\n        key: \"setInt16\",\n        value: function setInt16(byteOffset, value, littleEndian) {\n          this._internalBuffer.setInt16(0, value, littleEndian);\n          this.setUint8(byteOffset, this._internalBuffer.getUint8(0));\n          this.setUint8(byteOffset + 1, this._internalBuffer.getUint8(1));\n        }\n      }, {\n        key: \"setInt32\",\n        value: function setInt32(byteOffset, value, littleEndian) {\n          this._internalBuffer.setInt32(0, value, littleEndian);\n          this.setUint8(byteOffset, this._internalBuffer.getUint8(0));\n          this.setUint8(byteOffset + 1, this._internalBuffer.getUint8(1));\n          this.setUint8(byteOffset + 2, this._internalBuffer.getUint8(2));\n          this.setUint8(byteOffset + 3, this._internalBuffer.getUint8(3));\n        }\n      }, {\n        key: \"setInt8\",\n        value: function setInt8(byteOffset, value) {\n          var _this$_findDataViewWi5 = this._findDataViewWithOffset(byteOffset),\n            _this$_findDataViewWi6 = _slicedToArray__default[\"default\"](_this$_findDataViewWi5, 2),\n            dataView = _this$_findDataViewWi6[0],\n            byteOffsetOfDataView = _this$_findDataViewWi6[1];\n          dataView.setInt8(byteOffset - byteOffsetOfDataView, value);\n        }\n      }, {\n        key: \"setUint16\",\n        value: function setUint16(byteOffset, value, littleEndian) {\n          this._internalBuffer.setUint16(0, value, littleEndian);\n          this.setUint8(byteOffset, this._internalBuffer.getUint8(0));\n          this.setUint8(byteOffset + 1, this._internalBuffer.getUint8(1));\n        }\n      }, {\n        key: \"setUint32\",\n        value: function setUint32(byteOffset, value, littleEndian) {\n          this._internalBuffer.setUint32(0, value, littleEndian);\n          this.setUint8(byteOffset, this._internalBuffer.getUint8(0));\n          this.setUint8(byteOffset + 1, this._internalBuffer.getUint8(1));\n          this.setUint8(byteOffset + 2, this._internalBuffer.getUint8(2));\n          this.setUint8(byteOffset + 3, this._internalBuffer.getUint8(3));\n        }\n      }, {\n        key: \"setUint8\",\n        value: function setUint8(byteOffset, value) {\n          var _this$_findDataViewWi7 = this._findDataViewWithOffset(byteOffset),\n            _this$_findDataViewWi8 = _slicedToArray__default[\"default\"](_this$_findDataViewWi7, 2),\n            dataView = _this$_findDataViewWi8[0],\n            byteOffsetOfDataView = _this$_findDataViewWi8[1];\n          dataView.setUint8(byteOffset - byteOffsetOfDataView, value);\n        }\n      }, {\n        key: \"_findDataViewWithOffset\",\n        value: function _findDataViewWithOffset(byteOffset) {\n          var byteOffsetOfDataView = 0;\n          var _iterator2 = _createForOfIteratorHelper(this._dataViews),\n            _step2;\n          try {\n            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n              var dataView = _step2.value;\n              var byteOffsetOfNextDataView = byteOffsetOfDataView + dataView.byteLength;\n              if (byteOffset >= byteOffsetOfDataView && byteOffset < byteOffsetOfNextDataView) {\n                return [dataView, byteOffsetOfDataView];\n              }\n              byteOffsetOfDataView = byteOffsetOfNextDataView;\n            }\n          } catch (err) {\n            _iterator2.e(err);\n          } finally {\n            _iterator2.f();\n          }\n          throw new RangeError();\n        }\n      }]);\n      return MultiBufferDataView;\n    }();\n\n    exports.MultiBufferDataView = MultiBufferDataView;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n","import _objectSpread from '@babel/runtime/helpers/esm/objectSpread2';\n\n/**\n * Adapted from React: https://github.com/facebook/react/blob/master/packages/shared/formatProdErrorMessage.js\n *\n * Do not require this module directly! Use normal throw error calls. These messages will be replaced with error codes\n * during build.\n * @param {number} code\n */\nfunction formatProdErrorMessage(code) {\n  return \"Minified Redux error #\" + code + \"; visit https://redux.js.org/Errors?code=\" + code + \" for the full message or \" + 'use the non-minified dev environment for full errors. ';\n}\n\n// Inlined version of the `symbol-observable` polyfill\nvar $$observable = (function () {\n  return typeof Symbol === 'function' && Symbol.observable || '@@observable';\n})();\n\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\nvar randomString = function randomString() {\n  return Math.random().toString(36).substring(7).split('').join('.');\n};\n\nvar ActionTypes = {\n  INIT: \"@@redux/INIT\" + randomString(),\n  REPLACE: \"@@redux/REPLACE\" + randomString(),\n  PROBE_UNKNOWN_ACTION: function PROBE_UNKNOWN_ACTION() {\n    return \"@@redux/PROBE_UNKNOWN_ACTION\" + randomString();\n  }\n};\n\n/**\n * @param {any} obj The object to inspect.\n * @returns {boolean} True if the argument appears to be a plain object.\n */\nfunction isPlainObject(obj) {\n  if (typeof obj !== 'object' || obj === null) return false;\n  var proto = obj;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(obj) === proto;\n}\n\n// Inlined / shortened version of `kindOf` from https://github.com/jonschlinkert/kind-of\nfunction miniKindOf(val) {\n  if (val === void 0) return 'undefined';\n  if (val === null) return 'null';\n  var type = typeof val;\n\n  switch (type) {\n    case 'boolean':\n    case 'string':\n    case 'number':\n    case 'symbol':\n    case 'function':\n      {\n        return type;\n      }\n  }\n\n  if (Array.isArray(val)) return 'array';\n  if (isDate(val)) return 'date';\n  if (isError(val)) return 'error';\n  var constructorName = ctorName(val);\n\n  switch (constructorName) {\n    case 'Symbol':\n    case 'Promise':\n    case 'WeakMap':\n    case 'WeakSet':\n    case 'Map':\n    case 'Set':\n      return constructorName;\n  } // other\n\n\n  return type.slice(8, -1).toLowerCase().replace(/\\s/g, '');\n}\n\nfunction ctorName(val) {\n  return typeof val.constructor === 'function' ? val.constructor.name : null;\n}\n\nfunction isError(val) {\n  return val instanceof Error || typeof val.message === 'string' && val.constructor && typeof val.constructor.stackTraceLimit === 'number';\n}\n\nfunction isDate(val) {\n  if (val instanceof Date) return true;\n  return typeof val.toDateString === 'function' && typeof val.getDate === 'function' && typeof val.setDate === 'function';\n}\n\nfunction kindOf(val) {\n  var typeOfVal = typeof val;\n\n  if (process.env.NODE_ENV !== 'production') {\n    typeOfVal = miniKindOf(val);\n  }\n\n  return typeOfVal;\n}\n\n/**\n * @deprecated\n *\n * **We recommend using the `configureStore` method\n * of the `@reduxjs/toolkit` package**, which replaces `createStore`.\n *\n * Redux Toolkit is our recommended approach for writing Redux logic today,\n * including store setup, reducers, data fetching, and more.\n *\n * **For more details, please read this Redux docs page:**\n * **https://redux.js.org/introduction/why-rtk-is-redux-today**\n *\n * `configureStore` from Redux Toolkit is an improved version of `createStore` that\n * simplifies setup and helps avoid common bugs.\n *\n * You should not be using the `redux` core package by itself today, except for learning purposes.\n * The `createStore` method from the core `redux` package will not be removed, but we encourage\n * all users to migrate to using Redux Toolkit for all Redux code.\n *\n * If you want to use `createStore` without this visual deprecation warning, use\n * the `legacy_createStore` import instead:\n *\n * `import { legacy_createStore as createStore} from 'redux'`\n *\n */\n\nfunction createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'function' || typeof enhancer === 'function' && typeof arguments[3] === 'function') {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(0) : 'It looks like you are passing several store enhancers to ' + 'createStore(). This is not supported. Instead, compose them ' + 'together to a single function. See https://redux.js.org/tutorials/fundamentals/part-4-store#creating-a-store-with-enhancers for an example.');\n  }\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(1) : \"Expected the enhancer to be a function. Instead, received: '\" + kindOf(enhancer) + \"'\");\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(2) : \"Expected the root reducer to be a function. Instead, received: '\" + kindOf(reducer) + \"'\");\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n  /**\n   * This makes a shallow copy of currentListeners so we can use\n   * nextListeners as a temporary list while dispatching.\n   *\n   * This prevents any bugs around consumers calling\n   * subscribe/unsubscribe in the middle of a dispatch.\n   */\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n\n\n  function getState() {\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(3) : 'You may not call store.getState() while the reducer is executing. ' + 'The reducer has already received the state as an argument. ' + 'Pass it down from the top reducer instead of reading it from the store.');\n    }\n\n    return currentState;\n  }\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n\n\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(4) : \"Expected the listener to be a function. Instead, received: '\" + kindOf(listener) + \"'\");\n    }\n\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(5) : 'You may not call store.subscribe() while the reducer is executing. ' + 'If you would like to be notified after the store has been updated, subscribe from a ' + 'component and invoke store.getState() in the callback to access the latest state. ' + 'See https://redux.js.org/api/store#subscribelistener for more details.');\n    }\n\n    var isSubscribed = true;\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      if (isDispatching) {\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(6) : 'You may not unsubscribe from a store listener while the reducer is executing. ' + 'See https://redux.js.org/api/store#subscribelistener for more details.');\n      }\n\n      isSubscribed = false;\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n      currentListeners = null;\n    };\n  }\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing “what changed”. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n\n\n  function dispatch(action) {\n    if (!isPlainObject(action)) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(7) : \"Actions must be plain objects. Instead, the actual type was: '\" + kindOf(action) + \"'. You may need to add middleware to your store setup to handle dispatching other values, such as 'redux-thunk' to handle dispatching functions. See https://redux.js.org/tutorials/fundamentals/part-4-store#middleware and https://redux.js.org/tutorials/fundamentals/part-6-async-logic#using-the-redux-thunk-middleware for examples.\");\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(8) : 'Actions may not have an undefined \"type\" property. You may have misspelled an action type string constant.');\n    }\n\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(9) : 'Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n\n    return action;\n  }\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n\n\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(10) : \"Expected the nextReducer to be a function. Instead, received: '\" + kindOf(nextReducer));\n    }\n\n    currentReducer = nextReducer; // This action has a similiar effect to ActionTypes.INIT.\n    // Any reducers that existed in both the new and old rootReducer\n    // will receive the previous state. This effectively populates\n    // the new state tree with any relevant data from the old one.\n\n    dispatch({\n      type: ActionTypes.REPLACE\n    });\n  }\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/tc39/proposal-observable\n   */\n\n\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if (typeof observer !== 'object' || observer === null) {\n          throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(11) : \"Expected the observer to be an object. Instead, received: '\" + kindOf(observer) + \"'\");\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return {\n          unsubscribe: unsubscribe\n        };\n      }\n    }, _ref[$$observable] = function () {\n      return this;\n    }, _ref;\n  } // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n\n\n  dispatch({\n    type: ActionTypes.INIT\n  });\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[$$observable] = observable, _ref2;\n}\n/**\n * Creates a Redux store that holds the state tree.\n *\n * **We recommend using `configureStore` from the\n * `@reduxjs/toolkit` package**, which replaces `createStore`:\n * **https://redux.js.org/introduction/why-rtk-is-redux-today**\n *\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [preloadedState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n * to enhance the store with third-party capabilities such as middleware,\n * time travel, persistence, etc. The only store enhancer that ships with Redux\n * is `applyMiddleware()`.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\n\nvar legacy_createStore = createStore;\n\n/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\nfunction warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n\n\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n  } catch (e) {} // eslint-disable-line no-empty\n\n}\n\nfunction getUnexpectedStateShapeWarningMessage(inputState, reducers, action, unexpectedKeyCache) {\n  var reducerKeys = Object.keys(reducers);\n  var argumentName = action && action.type === ActionTypes.INIT ? 'preloadedState argument passed to createStore' : 'previous state received by the reducer';\n\n  if (reducerKeys.length === 0) {\n    return 'Store does not have a valid reducer. Make sure the argument passed ' + 'to combineReducers is an object whose values are reducers.';\n  }\n\n  if (!isPlainObject(inputState)) {\n    return \"The \" + argumentName + \" has unexpected type of \\\"\" + kindOf(inputState) + \"\\\". Expected argument to be an object with the following \" + (\"keys: \\\"\" + reducerKeys.join('\", \"') + \"\\\"\");\n  }\n\n  var unexpectedKeys = Object.keys(inputState).filter(function (key) {\n    return !reducers.hasOwnProperty(key) && !unexpectedKeyCache[key];\n  });\n  unexpectedKeys.forEach(function (key) {\n    unexpectedKeyCache[key] = true;\n  });\n  if (action && action.type === ActionTypes.REPLACE) return;\n\n  if (unexpectedKeys.length > 0) {\n    return \"Unexpected \" + (unexpectedKeys.length > 1 ? 'keys' : 'key') + \" \" + (\"\\\"\" + unexpectedKeys.join('\", \"') + \"\\\" found in \" + argumentName + \". \") + \"Expected to find one of the known reducer keys instead: \" + (\"\\\"\" + reducerKeys.join('\", \"') + \"\\\". Unexpected keys will be ignored.\");\n  }\n}\n\nfunction assertReducerShape(reducers) {\n  Object.keys(reducers).forEach(function (key) {\n    var reducer = reducers[key];\n    var initialState = reducer(undefined, {\n      type: ActionTypes.INIT\n    });\n\n    if (typeof initialState === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(12) : \"The slice reducer for key \\\"\" + key + \"\\\" returned undefined during initialization. \" + \"If the state passed to the reducer is undefined, you must \" + \"explicitly return the initial state. The initial state may \" + \"not be undefined. If you don't want to set a value for this reducer, \" + \"you can use null instead of undefined.\");\n    }\n\n    if (typeof reducer(undefined, {\n      type: ActionTypes.PROBE_UNKNOWN_ACTION()\n    }) === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(13) : \"The slice reducer for key \\\"\" + key + \"\\\" returned undefined when probed with a random type. \" + (\"Don't try to handle '\" + ActionTypes.INIT + \"' or other actions in \\\"redux/*\\\" \") + \"namespace. They are considered private. Instead, you must return the \" + \"current state for any unknown actions, unless it is undefined, \" + \"in which case you must return the initial state, regardless of the \" + \"action type. The initial state may not be undefined, but can be null.\");\n    }\n  });\n}\n/**\n * Turns an object whose values are different reducer functions, into a single\n * reducer function. It will call every child reducer, and gather their results\n * into a single state object, whose keys correspond to the keys of the passed\n * reducer functions.\n *\n * @param {Object} reducers An object whose values correspond to different\n * reducer functions that need to be combined into one. One handy way to obtain\n * it is to use ES6 `import * as reducers` syntax. The reducers may never return\n * undefined for any action. Instead, they should return their initial state\n * if the state passed to them was undefined, and the current state for any\n * unrecognized action.\n *\n * @returns {Function} A reducer function that invokes every reducer inside the\n * passed object, and builds a state object with the same shape.\n */\n\n\nfunction combineReducers(reducers) {\n  var reducerKeys = Object.keys(reducers);\n  var finalReducers = {};\n\n  for (var i = 0; i < reducerKeys.length; i++) {\n    var key = reducerKeys[i];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof reducers[key] === 'undefined') {\n        warning(\"No reducer provided for key \\\"\" + key + \"\\\"\");\n      }\n    }\n\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key];\n    }\n  }\n\n  var finalReducerKeys = Object.keys(finalReducers); // This is used to make sure we don't warn about the same\n  // keys multiple times.\n\n  var unexpectedKeyCache;\n\n  if (process.env.NODE_ENV !== 'production') {\n    unexpectedKeyCache = {};\n  }\n\n  var shapeAssertionError;\n\n  try {\n    assertReducerShape(finalReducers);\n  } catch (e) {\n    shapeAssertionError = e;\n  }\n\n  return function combination(state, action) {\n    if (state === void 0) {\n      state = {};\n    }\n\n    if (shapeAssertionError) {\n      throw shapeAssertionError;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      var warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action, unexpectedKeyCache);\n\n      if (warningMessage) {\n        warning(warningMessage);\n      }\n    }\n\n    var hasChanged = false;\n    var nextState = {};\n\n    for (var _i = 0; _i < finalReducerKeys.length; _i++) {\n      var _key = finalReducerKeys[_i];\n      var reducer = finalReducers[_key];\n      var previousStateForKey = state[_key];\n      var nextStateForKey = reducer(previousStateForKey, action);\n\n      if (typeof nextStateForKey === 'undefined') {\n        var actionType = action && action.type;\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(14) : \"When called with an action of type \" + (actionType ? \"\\\"\" + String(actionType) + \"\\\"\" : '(unknown type)') + \", the slice reducer for key \\\"\" + _key + \"\\\" returned undefined. \" + \"To ignore an action, you must explicitly return the previous state. \" + \"If you want this reducer to hold no value, you can return null instead of undefined.\");\n      }\n\n      nextState[_key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n\n    hasChanged = hasChanged || finalReducerKeys.length !== Object.keys(state).length;\n    return hasChanged ? nextState : state;\n  };\n}\n\nfunction bindActionCreator(actionCreator, dispatch) {\n  return function () {\n    return dispatch(actionCreator.apply(this, arguments));\n  };\n}\n/**\n * Turns an object whose values are action creators, into an object with the\n * same keys, but with every function wrapped into a `dispatch` call so they\n * may be invoked directly. This is just a convenience method, as you can call\n * `store.dispatch(MyActionCreators.doSomething())` yourself just fine.\n *\n * For convenience, you can also pass an action creator as the first argument,\n * and get a dispatch wrapped function in return.\n *\n * @param {Function|Object} actionCreators An object whose values are action\n * creator functions. One handy way to obtain it is to use ES6 `import * as`\n * syntax. You may also pass a single function.\n *\n * @param {Function} dispatch The `dispatch` function available on your Redux\n * store.\n *\n * @returns {Function|Object} The object mimicking the original object, but with\n * every action creator wrapped into the `dispatch` call. If you passed a\n * function as `actionCreators`, the return value will also be a single\n * function.\n */\n\n\nfunction bindActionCreators(actionCreators, dispatch) {\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch);\n  }\n\n  if (typeof actionCreators !== 'object' || actionCreators === null) {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(16) : \"bindActionCreators expected an object or a function, but instead received: '\" + kindOf(actionCreators) + \"'. \" + \"Did you write \\\"import ActionCreators from\\\" instead of \\\"import * as ActionCreators from\\\"?\");\n  }\n\n  var boundActionCreators = {};\n\n  for (var key in actionCreators) {\n    var actionCreator = actionCreators[key];\n\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch);\n    }\n  }\n\n  return boundActionCreators;\n}\n\n/**\n * Composes single-argument functions from right to left. The rightmost\n * function can take multiple arguments as it provides the signature for\n * the resulting composite function.\n *\n * @param {...Function} funcs The functions to compose.\n * @returns {Function} A function obtained by composing the argument functions\n * from right to left. For example, compose(f, g, h) is identical to doing\n * (...args) => f(g(h(...args))).\n */\nfunction compose() {\n  for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  return funcs.reduce(function (a, b) {\n    return function () {\n      return a(b.apply(void 0, arguments));\n    };\n  });\n}\n\n/**\n * Creates a store enhancer that applies middleware to the dispatch method\n * of the Redux store. This is handy for a variety of tasks, such as expressing\n * asynchronous actions in a concise manner, or logging every action payload.\n *\n * See `redux-thunk` package as an example of the Redux middleware.\n *\n * Because middleware is potentially asynchronous, this should be the first\n * store enhancer in the composition chain.\n *\n * Note that each middleware will be given the `dispatch` and `getState` functions\n * as named arguments.\n *\n * @param {...Function} middlewares The middleware chain to be applied.\n * @returns {Function} A store enhancer applying the middleware.\n */\n\nfunction applyMiddleware() {\n  for (var _len = arguments.length, middlewares = new Array(_len), _key = 0; _key < _len; _key++) {\n    middlewares[_key] = arguments[_key];\n  }\n\n  return function (createStore) {\n    return function () {\n      var store = createStore.apply(void 0, arguments);\n\n      var _dispatch = function dispatch() {\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(15) : 'Dispatching while constructing your middleware is not allowed. ' + 'Other middleware would not be applied to this dispatch.');\n      };\n\n      var middlewareAPI = {\n        getState: store.getState,\n        dispatch: function dispatch() {\n          return _dispatch.apply(void 0, arguments);\n        }\n      };\n      var chain = middlewares.map(function (middleware) {\n        return middleware(middlewareAPI);\n      });\n      _dispatch = compose.apply(void 0, chain)(store.dispatch);\n      return _objectSpread(_objectSpread({}, store), {}, {\n        dispatch: _dispatch\n      });\n    };\n  };\n}\n\nexport { ActionTypes as __DO_NOT_USE__ActionTypes, applyMiddleware, bindActionCreators, combineReducers, compose, createStore, legacy_createStore };\n","import React from 'react';\nexport var ReactReduxContext = /*#__PURE__*/React.createContext(null);\n\nif (process.env.NODE_ENV !== 'production') {\n  ReactReduxContext.displayName = 'ReactRedux';\n}\n\nexport default ReactReduxContext;","// Default to a dummy \"batch\" implementation that just runs the callback\nfunction defaultNoopBatch(callback) {\n  callback();\n}\n\nvar batch = defaultNoopBatch; // Allow injecting another batching function later\n\nexport var setBatch = function setBatch(newBatch) {\n  return batch = newBatch;\n}; // Supply a getter just to skip dealing with ESM bindings\n\nexport var getBatch = function getBatch() {\n  return batch;\n};","import { getBatch } from './batch'; // encapsulates the subscription logic for connecting a component to the redux store, as\n// well as nesting subscriptions of descendant components, so that we can ensure the\n// ancestor components re-render before descendants\n\nfunction createListenerCollection() {\n  var batch = getBatch();\n  var first = null;\n  var last = null;\n  return {\n    clear: function clear() {\n      first = null;\n      last = null;\n    },\n    notify: function notify() {\n      batch(function () {\n        var listener = first;\n\n        while (listener) {\n          listener.callback();\n          listener = listener.next;\n        }\n      });\n    },\n    get: function get() {\n      var listeners = [];\n      var listener = first;\n\n      while (listener) {\n        listeners.push(listener);\n        listener = listener.next;\n      }\n\n      return listeners;\n    },\n    subscribe: function subscribe(callback) {\n      var isSubscribed = true;\n      var listener = last = {\n        callback: callback,\n        next: null,\n        prev: last\n      };\n\n      if (listener.prev) {\n        listener.prev.next = listener;\n      } else {\n        first = listener;\n      }\n\n      return function unsubscribe() {\n        if (!isSubscribed || first === null) return;\n        isSubscribed = false;\n\n        if (listener.next) {\n          listener.next.prev = listener.prev;\n        } else {\n          last = listener.prev;\n        }\n\n        if (listener.prev) {\n          listener.prev.next = listener.next;\n        } else {\n          first = listener.next;\n        }\n      };\n    }\n  };\n}\n\nvar nullListeners = {\n  notify: function notify() {},\n  get: function get() {\n    return [];\n  }\n};\nexport function createSubscription(store, parentSub) {\n  var unsubscribe;\n  var listeners = nullListeners;\n\n  function addNestedSub(listener) {\n    trySubscribe();\n    return listeners.subscribe(listener);\n  }\n\n  function notifyNestedSubs() {\n    listeners.notify();\n  }\n\n  function handleChangeWrapper() {\n    if (subscription.onStateChange) {\n      subscription.onStateChange();\n    }\n  }\n\n  function isSubscribed() {\n    return Boolean(unsubscribe);\n  }\n\n  function trySubscribe() {\n    if (!unsubscribe) {\n      unsubscribe = parentSub ? parentSub.addNestedSub(handleChangeWrapper) : store.subscribe(handleChangeWrapper);\n      listeners = createListenerCollection();\n    }\n  }\n\n  function tryUnsubscribe() {\n    if (unsubscribe) {\n      unsubscribe();\n      unsubscribe = undefined;\n      listeners.clear();\n      listeners = nullListeners;\n    }\n  }\n\n  var subscription = {\n    addNestedSub: addNestedSub,\n    notifyNestedSubs: notifyNestedSubs,\n    handleChangeWrapper: handleChangeWrapper,\n    isSubscribed: isSubscribed,\n    trySubscribe: trySubscribe,\n    tryUnsubscribe: tryUnsubscribe,\n    getListeners: function getListeners() {\n      return listeners;\n    }\n  };\n  return subscription;\n}","import { useEffect, useLayoutEffect } from 'react'; // React currently throws a warning when using useLayoutEffect on the server.\n// To get around it, we can conditionally useEffect on the server (no-op) and\n// useLayoutEffect in the browser. We need useLayoutEffect to ensure the store\n// subscription callback always has the selector from the latest render commit\n// available, otherwise a store update may happen between render and the effect,\n// which may cause missed updates; we also must ensure the store subscription\n// is created synchronously, otherwise a store update may occur before the\n// subscription is created and an inconsistent state may be observed\n\nexport var useIsomorphicLayoutEffect = typeof window !== 'undefined' && typeof window.document !== 'undefined' && typeof window.document.createElement !== 'undefined' ? useLayoutEffect : useEffect;","import React, { useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport { ReactReduxContext } from './Context';\nimport { createSubscription } from '../utils/Subscription';\nimport { useIsomorphicLayoutEffect } from '../utils/useIsomorphicLayoutEffect';\n\nfunction Provider(_ref) {\n  var store = _ref.store,\n      context = _ref.context,\n      children = _ref.children;\n  var contextValue = useMemo(function () {\n    var subscription = createSubscription(store);\n    return {\n      store: store,\n      subscription: subscription\n    };\n  }, [store]);\n  var previousState = useMemo(function () {\n    return store.getState();\n  }, [store]);\n  useIsomorphicLayoutEffect(function () {\n    var subscription = contextValue.subscription;\n    subscription.onStateChange = subscription.notifyNestedSubs;\n    subscription.trySubscribe();\n\n    if (previousState !== store.getState()) {\n      subscription.notifyNestedSubs();\n    }\n\n    return function () {\n      subscription.tryUnsubscribe();\n      subscription.onStateChange = null;\n    };\n  }, [contextValue, previousState]);\n  var Context = context || ReactReduxContext;\n  return /*#__PURE__*/React.createElement(Context.Provider, {\n    value: contextValue\n  }, children);\n}\n\nif (process.env.NODE_ENV !== 'production') {\n  Provider.propTypes = {\n    store: PropTypes.shape({\n      subscribe: PropTypes.func.isRequired,\n      dispatch: PropTypes.func.isRequired,\n      getState: PropTypes.func.isRequired\n    }),\n    context: PropTypes.object,\n    children: PropTypes.any\n  };\n}\n\nexport default Provider;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nvar _excluded = [\"getDisplayName\", \"methodName\", \"renderCountProp\", \"shouldHandleStateChanges\", \"storeKey\", \"withRef\", \"forwardRef\", \"context\"],\n    _excluded2 = [\"reactReduxForwardedRef\"];\nimport hoistStatics from 'hoist-non-react-statics';\nimport React, { useContext, useMemo, useRef, useReducer } from 'react';\nimport { isValidElementType, isContextConsumer } from 'react-is';\nimport { createSubscription } from '../utils/Subscription';\nimport { useIsomorphicLayoutEffect } from '../utils/useIsomorphicLayoutEffect';\nimport { ReactReduxContext } from './Context'; // Define some constant arrays just to avoid re-creating these\n\nvar EMPTY_ARRAY = [];\nvar NO_SUBSCRIPTION_ARRAY = [null, null];\n\nvar stringifyComponent = function stringifyComponent(Comp) {\n  try {\n    return JSON.stringify(Comp);\n  } catch (err) {\n    return String(Comp);\n  }\n};\n\nfunction storeStateUpdatesReducer(state, action) {\n  var updateCount = state[1];\n  return [action.payload, updateCount + 1];\n}\n\nfunction useIsomorphicLayoutEffectWithArgs(effectFunc, effectArgs, dependencies) {\n  useIsomorphicLayoutEffect(function () {\n    return effectFunc.apply(void 0, effectArgs);\n  }, dependencies);\n}\n\nfunction captureWrapperProps(lastWrapperProps, lastChildProps, renderIsScheduled, wrapperProps, actualChildProps, childPropsFromStoreUpdate, notifyNestedSubs) {\n  // We want to capture the wrapper props and child props we used for later comparisons\n  lastWrapperProps.current = wrapperProps;\n  lastChildProps.current = actualChildProps;\n  renderIsScheduled.current = false; // If the render was from a store update, clear out that reference and cascade the subscriber update\n\n  if (childPropsFromStoreUpdate.current) {\n    childPropsFromStoreUpdate.current = null;\n    notifyNestedSubs();\n  }\n}\n\nfunction subscribeUpdates(shouldHandleStateChanges, store, subscription, childPropsSelector, lastWrapperProps, lastChildProps, renderIsScheduled, childPropsFromStoreUpdate, notifyNestedSubs, forceComponentUpdateDispatch) {\n  // If we're not subscribed to the store, nothing to do here\n  if (!shouldHandleStateChanges) return; // Capture values for checking if and when this component unmounts\n\n  var didUnsubscribe = false;\n  var lastThrownError = null; // We'll run this callback every time a store subscription update propagates to this component\n\n  var checkForUpdates = function checkForUpdates() {\n    if (didUnsubscribe) {\n      // Don't run stale listeners.\n      // Redux doesn't guarantee unsubscriptions happen until next dispatch.\n      return;\n    }\n\n    var latestStoreState = store.getState();\n    var newChildProps, error;\n\n    try {\n      // Actually run the selector with the most recent store state and wrapper props\n      // to determine what the child props should be\n      newChildProps = childPropsSelector(latestStoreState, lastWrapperProps.current);\n    } catch (e) {\n      error = e;\n      lastThrownError = e;\n    }\n\n    if (!error) {\n      lastThrownError = null;\n    } // If the child props haven't changed, nothing to do here - cascade the subscription update\n\n\n    if (newChildProps === lastChildProps.current) {\n      if (!renderIsScheduled.current) {\n        notifyNestedSubs();\n      }\n    } else {\n      // Save references to the new child props.  Note that we track the \"child props from store update\"\n      // as a ref instead of a useState/useReducer because we need a way to determine if that value has\n      // been processed.  If this went into useState/useReducer, we couldn't clear out the value without\n      // forcing another re-render, which we don't want.\n      lastChildProps.current = newChildProps;\n      childPropsFromStoreUpdate.current = newChildProps;\n      renderIsScheduled.current = true; // If the child props _did_ change (or we caught an error), this wrapper component needs to re-render\n\n      forceComponentUpdateDispatch({\n        type: 'STORE_UPDATED',\n        payload: {\n          error: error\n        }\n      });\n    }\n  }; // Actually subscribe to the nearest connected ancestor (or store)\n\n\n  subscription.onStateChange = checkForUpdates;\n  subscription.trySubscribe(); // Pull data from the store after first render in case the store has\n  // changed since we began.\n\n  checkForUpdates();\n\n  var unsubscribeWrapper = function unsubscribeWrapper() {\n    didUnsubscribe = true;\n    subscription.tryUnsubscribe();\n    subscription.onStateChange = null;\n\n    if (lastThrownError) {\n      // It's possible that we caught an error due to a bad mapState function, but the\n      // parent re-rendered without this component and we're about to unmount.\n      // This shouldn't happen as long as we do top-down subscriptions correctly, but\n      // if we ever do those wrong, this throw will surface the error in our tests.\n      // In that case, throw the error from here so it doesn't get lost.\n      throw lastThrownError;\n    }\n  };\n\n  return unsubscribeWrapper;\n}\n\nvar initStateUpdates = function initStateUpdates() {\n  return [null, 0];\n};\n\nexport default function connectAdvanced(\n/*\r\n  selectorFactory is a func that is responsible for returning the selector function used to\r\n  compute new props from state, props, and dispatch. For example:\r\n      export default connectAdvanced((dispatch, options) => (state, props) => ({\r\n      thing: state.things[props.thingId],\r\n      saveThing: fields => dispatch(actionCreators.saveThing(props.thingId, fields)),\r\n    }))(YourComponent)\r\n    Access to dispatch is provided to the factory so selectorFactories can bind actionCreators\r\n  outside of their selector as an optimization. Options passed to connectAdvanced are passed to\r\n  the selectorFactory, along with displayName and WrappedComponent, as the second argument.\r\n    Note that selectorFactory is responsible for all caching/memoization of inbound and outbound\r\n  props. Do not use connectAdvanced directly without memoizing results between calls to your\r\n  selector, otherwise the Connect component will re-render on every state or props change.\r\n*/\nselectorFactory, // options object:\n_ref) {\n  if (_ref === void 0) {\n    _ref = {};\n  }\n\n  var _ref2 = _ref,\n      _ref2$getDisplayName = _ref2.getDisplayName,\n      getDisplayName = _ref2$getDisplayName === void 0 ? function (name) {\n    return \"ConnectAdvanced(\" + name + \")\";\n  } : _ref2$getDisplayName,\n      _ref2$methodName = _ref2.methodName,\n      methodName = _ref2$methodName === void 0 ? 'connectAdvanced' : _ref2$methodName,\n      _ref2$renderCountProp = _ref2.renderCountProp,\n      renderCountProp = _ref2$renderCountProp === void 0 ? undefined : _ref2$renderCountProp,\n      _ref2$shouldHandleSta = _ref2.shouldHandleStateChanges,\n      shouldHandleStateChanges = _ref2$shouldHandleSta === void 0 ? true : _ref2$shouldHandleSta,\n      _ref2$storeKey = _ref2.storeKey,\n      storeKey = _ref2$storeKey === void 0 ? 'store' : _ref2$storeKey,\n      _ref2$withRef = _ref2.withRef,\n      withRef = _ref2$withRef === void 0 ? false : _ref2$withRef,\n      _ref2$forwardRef = _ref2.forwardRef,\n      forwardRef = _ref2$forwardRef === void 0 ? false : _ref2$forwardRef,\n      _ref2$context = _ref2.context,\n      context = _ref2$context === void 0 ? ReactReduxContext : _ref2$context,\n      connectOptions = _objectWithoutPropertiesLoose(_ref2, _excluded);\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (renderCountProp !== undefined) {\n      throw new Error(\"renderCountProp is removed. render counting is built into the latest React Dev Tools profiling extension\");\n    }\n\n    if (withRef) {\n      throw new Error('withRef is removed. To access the wrapped instance, use a ref on the connected component');\n    }\n\n    var customStoreWarningMessage = 'To use a custom Redux store for specific components, create a custom React context with ' + \"React.createContext(), and pass the context object to React Redux's Provider and specific components\" + ' like: <Provider context={MyContext}><ConnectedComponent context={MyContext} /></Provider>. ' + 'You may also pass a {context : MyContext} option to connect';\n\n    if (storeKey !== 'store') {\n      throw new Error('storeKey has been removed and does not do anything. ' + customStoreWarningMessage);\n    }\n  }\n\n  var Context = context;\n  return function wrapWithConnect(WrappedComponent) {\n    if (process.env.NODE_ENV !== 'production' && !isValidElementType(WrappedComponent)) {\n      throw new Error(\"You must pass a component to the function returned by \" + (methodName + \". Instead received \" + stringifyComponent(WrappedComponent)));\n    }\n\n    var wrappedComponentName = WrappedComponent.displayName || WrappedComponent.name || 'Component';\n    var displayName = getDisplayName(wrappedComponentName);\n\n    var selectorFactoryOptions = _extends({}, connectOptions, {\n      getDisplayName: getDisplayName,\n      methodName: methodName,\n      renderCountProp: renderCountProp,\n      shouldHandleStateChanges: shouldHandleStateChanges,\n      storeKey: storeKey,\n      displayName: displayName,\n      wrappedComponentName: wrappedComponentName,\n      WrappedComponent: WrappedComponent\n    });\n\n    var pure = connectOptions.pure;\n\n    function createChildSelector(store) {\n      return selectorFactory(store.dispatch, selectorFactoryOptions);\n    } // If we aren't running in \"pure\" mode, we don't want to memoize values.\n    // To avoid conditionally calling hooks, we fall back to a tiny wrapper\n    // that just executes the given callback immediately.\n\n\n    var usePureOnlyMemo = pure ? useMemo : function (callback) {\n      return callback();\n    };\n\n    function ConnectFunction(props) {\n      var _useMemo = useMemo(function () {\n        // Distinguish between actual \"data\" props that were passed to the wrapper component,\n        // and values needed to control behavior (forwarded refs, alternate context instances).\n        // To maintain the wrapperProps object reference, memoize this destructuring.\n        var reactReduxForwardedRef = props.reactReduxForwardedRef,\n            wrapperProps = _objectWithoutPropertiesLoose(props, _excluded2);\n\n        return [props.context, reactReduxForwardedRef, wrapperProps];\n      }, [props]),\n          propsContext = _useMemo[0],\n          reactReduxForwardedRef = _useMemo[1],\n          wrapperProps = _useMemo[2];\n\n      var ContextToUse = useMemo(function () {\n        // Users may optionally pass in a custom context instance to use instead of our ReactReduxContext.\n        // Memoize the check that determines which context instance we should use.\n        return propsContext && propsContext.Consumer && isContextConsumer( /*#__PURE__*/React.createElement(propsContext.Consumer, null)) ? propsContext : Context;\n      }, [propsContext, Context]); // Retrieve the store and ancestor subscription via context, if available\n\n      var contextValue = useContext(ContextToUse); // The store _must_ exist as either a prop or in context.\n      // We'll check to see if it _looks_ like a Redux store first.\n      // This allows us to pass through a `store` prop that is just a plain value.\n\n      var didStoreComeFromProps = Boolean(props.store) && Boolean(props.store.getState) && Boolean(props.store.dispatch);\n      var didStoreComeFromContext = Boolean(contextValue) && Boolean(contextValue.store);\n\n      if (process.env.NODE_ENV !== 'production' && !didStoreComeFromProps && !didStoreComeFromContext) {\n        throw new Error(\"Could not find \\\"store\\\" in the context of \" + (\"\\\"\" + displayName + \"\\\". Either wrap the root component in a <Provider>, \") + \"or pass a custom React context provider to <Provider> and the corresponding \" + (\"React context consumer to \" + displayName + \" in connect options.\"));\n      } // Based on the previous check, one of these must be true\n\n\n      var store = didStoreComeFromProps ? props.store : contextValue.store;\n      var childPropsSelector = useMemo(function () {\n        // The child props selector needs the store reference as an input.\n        // Re-create this selector whenever the store changes.\n        return createChildSelector(store);\n      }, [store]);\n\n      var _useMemo2 = useMemo(function () {\n        if (!shouldHandleStateChanges) return NO_SUBSCRIPTION_ARRAY; // This Subscription's source should match where store came from: props vs. context. A component\n        // connected to the store via props shouldn't use subscription from context, or vice versa.\n\n        // This Subscription's source should match where store came from: props vs. context. A component\n        // connected to the store via props shouldn't use subscription from context, or vice versa.\n        var subscription = createSubscription(store, didStoreComeFromProps ? null : contextValue.subscription); // `notifyNestedSubs` is duplicated to handle the case where the component is unmounted in\n        // the middle of the notification loop, where `subscription` will then be null. This can\n        // probably be avoided if Subscription's listeners logic is changed to not call listeners\n        // that have been unsubscribed in the  middle of the notification loop.\n\n        // `notifyNestedSubs` is duplicated to handle the case where the component is unmounted in\n        // the middle of the notification loop, where `subscription` will then be null. This can\n        // probably be avoided if Subscription's listeners logic is changed to not call listeners\n        // that have been unsubscribed in the  middle of the notification loop.\n        var notifyNestedSubs = subscription.notifyNestedSubs.bind(subscription);\n        return [subscription, notifyNestedSubs];\n      }, [store, didStoreComeFromProps, contextValue]),\n          subscription = _useMemo2[0],\n          notifyNestedSubs = _useMemo2[1]; // Determine what {store, subscription} value should be put into nested context, if necessary,\n      // and memoize that value to avoid unnecessary context updates.\n\n\n      var overriddenContextValue = useMemo(function () {\n        if (didStoreComeFromProps) {\n          // This component is directly subscribed to a store from props.\n          // We don't want descendants reading from this store - pass down whatever\n          // the existing context value is from the nearest connected ancestor.\n          return contextValue;\n        } // Otherwise, put this component's subscription instance into context, so that\n        // connected descendants won't update until after this component is done\n\n\n        return _extends({}, contextValue, {\n          subscription: subscription\n        });\n      }, [didStoreComeFromProps, contextValue, subscription]); // We need to force this wrapper component to re-render whenever a Redux store update\n      // causes a change to the calculated child component props (or we caught an error in mapState)\n\n      var _useReducer = useReducer(storeStateUpdatesReducer, EMPTY_ARRAY, initStateUpdates),\n          _useReducer$ = _useReducer[0],\n          previousStateUpdateResult = _useReducer$[0],\n          forceComponentUpdateDispatch = _useReducer[1]; // Propagate any mapState/mapDispatch errors upwards\n\n\n      if (previousStateUpdateResult && previousStateUpdateResult.error) {\n        throw previousStateUpdateResult.error;\n      } // Set up refs to coordinate values between the subscription effect and the render logic\n\n\n      var lastChildProps = useRef();\n      var lastWrapperProps = useRef(wrapperProps);\n      var childPropsFromStoreUpdate = useRef();\n      var renderIsScheduled = useRef(false);\n      var actualChildProps = usePureOnlyMemo(function () {\n        // Tricky logic here:\n        // - This render may have been triggered by a Redux store update that produced new child props\n        // - However, we may have gotten new wrapper props after that\n        // If we have new child props, and the same wrapper props, we know we should use the new child props as-is.\n        // But, if we have new wrapper props, those might change the child props, so we have to recalculate things.\n        // So, we'll use the child props from store update only if the wrapper props are the same as last time.\n        if (childPropsFromStoreUpdate.current && wrapperProps === lastWrapperProps.current) {\n          return childPropsFromStoreUpdate.current;\n        } // TODO We're reading the store directly in render() here. Bad idea?\n        // This will likely cause Bad Things (TM) to happen in Concurrent Mode.\n        // Note that we do this because on renders _not_ caused by store updates, we need the latest store state\n        // to determine what the child props should be.\n\n\n        return childPropsSelector(store.getState(), wrapperProps);\n      }, [store, previousStateUpdateResult, wrapperProps]); // We need this to execute synchronously every time we re-render. However, React warns\n      // about useLayoutEffect in SSR, so we try to detect environment and fall back to\n      // just useEffect instead to avoid the warning, since neither will run anyway.\n\n      useIsomorphicLayoutEffectWithArgs(captureWrapperProps, [lastWrapperProps, lastChildProps, renderIsScheduled, wrapperProps, actualChildProps, childPropsFromStoreUpdate, notifyNestedSubs]); // Our re-subscribe logic only runs when the store/subscription setup changes\n\n      useIsomorphicLayoutEffectWithArgs(subscribeUpdates, [shouldHandleStateChanges, store, subscription, childPropsSelector, lastWrapperProps, lastChildProps, renderIsScheduled, childPropsFromStoreUpdate, notifyNestedSubs, forceComponentUpdateDispatch], [store, subscription, childPropsSelector]); // Now that all that's done, we can finally try to actually render the child component.\n      // We memoize the elements for the rendered child component as an optimization.\n\n      var renderedWrappedComponent = useMemo(function () {\n        return /*#__PURE__*/React.createElement(WrappedComponent, _extends({}, actualChildProps, {\n          ref: reactReduxForwardedRef\n        }));\n      }, [reactReduxForwardedRef, WrappedComponent, actualChildProps]); // If React sees the exact same element reference as last time, it bails out of re-rendering\n      // that child, same as if it was wrapped in React.memo() or returned false from shouldComponentUpdate.\n\n      var renderedChild = useMemo(function () {\n        if (shouldHandleStateChanges) {\n          // If this component is subscribed to store updates, we need to pass its own\n          // subscription instance down to our descendants. That means rendering the same\n          // Context instance, and putting a different value into the context.\n          return /*#__PURE__*/React.createElement(ContextToUse.Provider, {\n            value: overriddenContextValue\n          }, renderedWrappedComponent);\n        }\n\n        return renderedWrappedComponent;\n      }, [ContextToUse, renderedWrappedComponent, overriddenContextValue]);\n      return renderedChild;\n    } // If we're in \"pure\" mode, ensure our wrapper component only re-renders when incoming props have changed.\n\n\n    var Connect = pure ? React.memo(ConnectFunction) : ConnectFunction;\n    Connect.WrappedComponent = WrappedComponent;\n    Connect.displayName = ConnectFunction.displayName = displayName;\n\n    if (forwardRef) {\n      var forwarded = React.forwardRef(function forwardConnectRef(props, ref) {\n        return /*#__PURE__*/React.createElement(Connect, _extends({}, props, {\n          reactReduxForwardedRef: ref\n        }));\n      });\n      forwarded.displayName = displayName;\n      forwarded.WrappedComponent = WrappedComponent;\n      return hoistStatics(forwarded, WrappedComponent);\n    }\n\n    return hoistStatics(Connect, WrappedComponent);\n  };\n}","function is(x, y) {\n  if (x === y) {\n    return x !== 0 || y !== 0 || 1 / x === 1 / y;\n  } else {\n    return x !== x && y !== y;\n  }\n}\n\nexport default function shallowEqual(objA, objB) {\n  if (is(objA, objB)) return true;\n\n  if (typeof objA !== 'object' || objA === null || typeof objB !== 'object' || objB === null) {\n    return false;\n  }\n\n  var keysA = Object.keys(objA);\n  var keysB = Object.keys(objB);\n  if (keysA.length !== keysB.length) return false;\n\n  for (var i = 0; i < keysA.length; i++) {\n    if (!Object.prototype.hasOwnProperty.call(objB, keysA[i]) || !is(objA[keysA[i]], objB[keysA[i]])) {\n      return false;\n    }\n  }\n\n  return true;\n}","import verifyPlainObject from '../utils/verifyPlainObject';\nexport function wrapMapToPropsConstant(getConstant) {\n  return function initConstantSelector(dispatch, options) {\n    var constant = getConstant(dispatch, options);\n\n    function constantSelector() {\n      return constant;\n    }\n\n    constantSelector.dependsOnOwnProps = false;\n    return constantSelector;\n  };\n} // dependsOnOwnProps is used by createMapToPropsProxy to determine whether to pass props as args\n// to the mapToProps function being wrapped. It is also used by makePurePropsSelector to determine\n// whether mapToProps needs to be invoked when props have changed.\n//\n// A length of one signals that mapToProps does not depend on props from the parent component.\n// A length of zero is assumed to mean mapToProps is getting args via arguments or ...args and\n// therefore not reporting its length accurately..\n\nexport function getDependsOnOwnProps(mapToProps) {\n  return mapToProps.dependsOnOwnProps !== null && mapToProps.dependsOnOwnProps !== undefined ? Boolean(mapToProps.dependsOnOwnProps) : mapToProps.length !== 1;\n} // Used by whenMapStateToPropsIsFunction and whenMapDispatchToPropsIsFunction,\n// this function wraps mapToProps in a proxy function which does several things:\n//\n//  * Detects whether the mapToProps function being called depends on props, which\n//    is used by selectorFactory to decide if it should reinvoke on props changes.\n//\n//  * On first call, handles mapToProps if returns another function, and treats that\n//    new function as the true mapToProps for subsequent calls.\n//\n//  * On first call, verifies the first result is a plain object, in order to warn\n//    the developer that their mapToProps function is not returning a valid result.\n//\n\nexport function wrapMapToPropsFunc(mapToProps, methodName) {\n  return function initProxySelector(dispatch, _ref) {\n    var displayName = _ref.displayName;\n\n    var proxy = function mapToPropsProxy(stateOrDispatch, ownProps) {\n      return proxy.dependsOnOwnProps ? proxy.mapToProps(stateOrDispatch, ownProps) : proxy.mapToProps(stateOrDispatch);\n    }; // allow detectFactoryAndVerify to get ownProps\n\n\n    proxy.dependsOnOwnProps = true;\n\n    proxy.mapToProps = function detectFactoryAndVerify(stateOrDispatch, ownProps) {\n      proxy.mapToProps = mapToProps;\n      proxy.dependsOnOwnProps = getDependsOnOwnProps(mapToProps);\n      var props = proxy(stateOrDispatch, ownProps);\n\n      if (typeof props === 'function') {\n        proxy.mapToProps = props;\n        proxy.dependsOnOwnProps = getDependsOnOwnProps(props);\n        props = proxy(stateOrDispatch, ownProps);\n      }\n\n      if (process.env.NODE_ENV !== 'production') verifyPlainObject(props, displayName, methodName);\n      return props;\n    };\n\n    return proxy;\n  };\n}","import bindActionCreators from '../utils/bindActionCreators';\nimport { wrapMapToPropsConstant, wrapMapToPropsFunc } from './wrapMapToProps';\nexport function whenMapDispatchToPropsIsFunction(mapDispatchToProps) {\n  return typeof mapDispatchToProps === 'function' ? wrapMapToPropsFunc(mapDispatchToProps, 'mapDispatchToProps') : undefined;\n}\nexport function whenMapDispatchToPropsIsMissing(mapDispatchToProps) {\n  return !mapDispatchToProps ? wrapMapToPropsConstant(function (dispatch) {\n    return {\n      dispatch: dispatch\n    };\n  }) : undefined;\n}\nexport function whenMapDispatchToPropsIsObject(mapDispatchToProps) {\n  return mapDispatchToProps && typeof mapDispatchToProps === 'object' ? wrapMapToPropsConstant(function (dispatch) {\n    return bindActionCreators(mapDispatchToProps, dispatch);\n  }) : undefined;\n}\nexport default [whenMapDispatchToPropsIsFunction, whenMapDispatchToPropsIsMissing, whenMapDispatchToPropsIsObject];","export default function bindActionCreators(actionCreators, dispatch) {\n  var boundActionCreators = {};\n\n  var _loop = function _loop(key) {\n    var actionCreator = actionCreators[key];\n\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = function () {\n        return dispatch(actionCreator.apply(void 0, arguments));\n      };\n    }\n  };\n\n  for (var key in actionCreators) {\n    _loop(key);\n  }\n\n  return boundActionCreators;\n}","import { wrapMapToPropsConstant, wrapMapToPropsFunc } from './wrapMapToProps';\nexport function whenMapStateToPropsIsFunction(mapStateToProps) {\n  return typeof mapStateToProps === 'function' ? wrapMapToPropsFunc(mapStateToProps, 'mapStateToProps') : undefined;\n}\nexport function whenMapStateToPropsIsMissing(mapStateToProps) {\n  return !mapStateToProps ? wrapMapToPropsConstant(function () {\n    return {};\n  }) : undefined;\n}\nexport default [whenMapStateToPropsIsFunction, whenMapStateToPropsIsMissing];","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport verifyPlainObject from '../utils/verifyPlainObject';\nexport function defaultMergeProps(stateProps, dispatchProps, ownProps) {\n  return _extends({}, ownProps, stateProps, dispatchProps);\n}\nexport function wrapMergePropsFunc(mergeProps) {\n  return function initMergePropsProxy(dispatch, _ref) {\n    var displayName = _ref.displayName,\n        pure = _ref.pure,\n        areMergedPropsEqual = _ref.areMergedPropsEqual;\n    var hasRunOnce = false;\n    var mergedProps;\n    return function mergePropsProxy(stateProps, dispatchProps, ownProps) {\n      var nextMergedProps = mergeProps(stateProps, dispatchProps, ownProps);\n\n      if (hasRunOnce) {\n        if (!pure || !areMergedPropsEqual(nextMergedProps, mergedProps)) mergedProps = nextMergedProps;\n      } else {\n        hasRunOnce = true;\n        mergedProps = nextMergedProps;\n        if (process.env.NODE_ENV !== 'production') verifyPlainObject(mergedProps, displayName, 'mergeProps');\n      }\n\n      return mergedProps;\n    };\n  };\n}\nexport function whenMergePropsIsFunction(mergeProps) {\n  return typeof mergeProps === 'function' ? wrapMergePropsFunc(mergeProps) : undefined;\n}\nexport function whenMergePropsIsOmitted(mergeProps) {\n  return !mergeProps ? function () {\n    return defaultMergeProps;\n  } : undefined;\n}\nexport default [whenMergePropsIsFunction, whenMergePropsIsOmitted];","import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nvar _excluded = [\"initMapStateToProps\", \"initMapDispatchToProps\", \"initMergeProps\"];\nimport verifySubselectors from './verifySubselectors';\nexport function impureFinalPropsSelectorFactory(mapStateToProps, mapDispatchToProps, mergeProps, dispatch) {\n  return function impureFinalPropsSelector(state, ownProps) {\n    return mergeProps(mapStateToProps(state, ownProps), mapDispatchToProps(dispatch, ownProps), ownProps);\n  };\n}\nexport function pureFinalPropsSelectorFactory(mapStateToProps, mapDispatchToProps, mergeProps, dispatch, _ref) {\n  var areStatesEqual = _ref.areStatesEqual,\n      areOwnPropsEqual = _ref.areOwnPropsEqual,\n      areStatePropsEqual = _ref.areStatePropsEqual;\n  var hasRunAtLeastOnce = false;\n  var state;\n  var ownProps;\n  var stateProps;\n  var dispatchProps;\n  var mergedProps;\n\n  function handleFirstCall(firstState, firstOwnProps) {\n    state = firstState;\n    ownProps = firstOwnProps;\n    stateProps = mapStateToProps(state, ownProps);\n    dispatchProps = mapDispatchToProps(dispatch, ownProps);\n    mergedProps = mergeProps(stateProps, dispatchProps, ownProps);\n    hasRunAtLeastOnce = true;\n    return mergedProps;\n  }\n\n  function handleNewPropsAndNewState() {\n    stateProps = mapStateToProps(state, ownProps);\n    if (mapDispatchToProps.dependsOnOwnProps) dispatchProps = mapDispatchToProps(dispatch, ownProps);\n    mergedProps = mergeProps(stateProps, dispatchProps, ownProps);\n    return mergedProps;\n  }\n\n  function handleNewProps() {\n    if (mapStateToProps.dependsOnOwnProps) stateProps = mapStateToProps(state, ownProps);\n    if (mapDispatchToProps.dependsOnOwnProps) dispatchProps = mapDispatchToProps(dispatch, ownProps);\n    mergedProps = mergeProps(stateProps, dispatchProps, ownProps);\n    return mergedProps;\n  }\n\n  function handleNewState() {\n    var nextStateProps = mapStateToProps(state, ownProps);\n    var statePropsChanged = !areStatePropsEqual(nextStateProps, stateProps);\n    stateProps = nextStateProps;\n    if (statePropsChanged) mergedProps = mergeProps(stateProps, dispatchProps, ownProps);\n    return mergedProps;\n  }\n\n  function handleSubsequentCalls(nextState, nextOwnProps) {\n    var propsChanged = !areOwnPropsEqual(nextOwnProps, ownProps);\n    var stateChanged = !areStatesEqual(nextState, state, nextOwnProps, ownProps);\n    state = nextState;\n    ownProps = nextOwnProps;\n    if (propsChanged && stateChanged) return handleNewPropsAndNewState();\n    if (propsChanged) return handleNewProps();\n    if (stateChanged) return handleNewState();\n    return mergedProps;\n  }\n\n  return function pureFinalPropsSelector(nextState, nextOwnProps) {\n    return hasRunAtLeastOnce ? handleSubsequentCalls(nextState, nextOwnProps) : handleFirstCall(nextState, nextOwnProps);\n  };\n} // TODO: Add more comments\n// If pure is true, the selector returned by selectorFactory will memoize its results,\n// allowing connectAdvanced's shouldComponentUpdate to return false if final\n// props have not changed. If false, the selector will always return a new\n// object and shouldComponentUpdate will always return true.\n\nexport default function finalPropsSelectorFactory(dispatch, _ref2) {\n  var initMapStateToProps = _ref2.initMapStateToProps,\n      initMapDispatchToProps = _ref2.initMapDispatchToProps,\n      initMergeProps = _ref2.initMergeProps,\n      options = _objectWithoutPropertiesLoose(_ref2, _excluded);\n\n  var mapStateToProps = initMapStateToProps(dispatch, options);\n  var mapDispatchToProps = initMapDispatchToProps(dispatch, options);\n  var mergeProps = initMergeProps(dispatch, options);\n\n  if (process.env.NODE_ENV !== 'production') {\n    verifySubselectors(mapStateToProps, mapDispatchToProps, mergeProps, options.displayName);\n  }\n\n  var selectorFactory = options.pure ? pureFinalPropsSelectorFactory : impureFinalPropsSelectorFactory;\n  return selectorFactory(mapStateToProps, mapDispatchToProps, mergeProps, dispatch, options);\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nvar _excluded = [\"pure\", \"areStatesEqual\", \"areOwnPropsEqual\", \"areStatePropsEqual\", \"areMergedPropsEqual\"];\nimport connectAdvanced from '../components/connectAdvanced';\nimport shallowEqual from '../utils/shallowEqual';\nimport defaultMapDispatchToPropsFactories from './mapDispatchToProps';\nimport defaultMapStateToPropsFactories from './mapStateToProps';\nimport defaultMergePropsFactories from './mergeProps';\nimport defaultSelectorFactory from './selectorFactory';\n/*\r\n  connect is a facade over connectAdvanced. It turns its args into a compatible\r\n  selectorFactory, which has the signature:\r\n\r\n    (dispatch, options) => (nextState, nextOwnProps) => nextFinalProps\r\n  \r\n  connect passes its args to connectAdvanced as options, which will in turn pass them to\r\n  selectorFactory each time a Connect component instance is instantiated or hot reloaded.\r\n\r\n  selectorFactory returns a final props selector from its mapStateToProps,\r\n  mapStateToPropsFactories, mapDispatchToProps, mapDispatchToPropsFactories, mergeProps,\r\n  mergePropsFactories, and pure args.\r\n\r\n  The resulting final props selector is called by the Connect component instance whenever\r\n  it receives new props or store state.\r\n */\n\nfunction match(arg, factories, name) {\n  for (var i = factories.length - 1; i >= 0; i--) {\n    var result = factories[i](arg);\n    if (result) return result;\n  }\n\n  return function (dispatch, options) {\n    throw new Error(\"Invalid value of type \" + typeof arg + \" for \" + name + \" argument when connecting component \" + options.wrappedComponentName + \".\");\n  };\n}\n\nfunction strictEqual(a, b) {\n  return a === b;\n} // createConnect with default args builds the 'official' connect behavior. Calling it with\n// different options opens up some testing and extensibility scenarios\n\n\nexport function createConnect(_temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n      _ref$connectHOC = _ref.connectHOC,\n      connectHOC = _ref$connectHOC === void 0 ? connectAdvanced : _ref$connectHOC,\n      _ref$mapStateToPropsF = _ref.mapStateToPropsFactories,\n      mapStateToPropsFactories = _ref$mapStateToPropsF === void 0 ? defaultMapStateToPropsFactories : _ref$mapStateToPropsF,\n      _ref$mapDispatchToPro = _ref.mapDispatchToPropsFactories,\n      mapDispatchToPropsFactories = _ref$mapDispatchToPro === void 0 ? defaultMapDispatchToPropsFactories : _ref$mapDispatchToPro,\n      _ref$mergePropsFactor = _ref.mergePropsFactories,\n      mergePropsFactories = _ref$mergePropsFactor === void 0 ? defaultMergePropsFactories : _ref$mergePropsFactor,\n      _ref$selectorFactory = _ref.selectorFactory,\n      selectorFactory = _ref$selectorFactory === void 0 ? defaultSelectorFactory : _ref$selectorFactory;\n\n  return function connect(mapStateToProps, mapDispatchToProps, mergeProps, _ref2) {\n    if (_ref2 === void 0) {\n      _ref2 = {};\n    }\n\n    var _ref3 = _ref2,\n        _ref3$pure = _ref3.pure,\n        pure = _ref3$pure === void 0 ? true : _ref3$pure,\n        _ref3$areStatesEqual = _ref3.areStatesEqual,\n        areStatesEqual = _ref3$areStatesEqual === void 0 ? strictEqual : _ref3$areStatesEqual,\n        _ref3$areOwnPropsEqua = _ref3.areOwnPropsEqual,\n        areOwnPropsEqual = _ref3$areOwnPropsEqua === void 0 ? shallowEqual : _ref3$areOwnPropsEqua,\n        _ref3$areStatePropsEq = _ref3.areStatePropsEqual,\n        areStatePropsEqual = _ref3$areStatePropsEq === void 0 ? shallowEqual : _ref3$areStatePropsEq,\n        _ref3$areMergedPropsE = _ref3.areMergedPropsEqual,\n        areMergedPropsEqual = _ref3$areMergedPropsE === void 0 ? shallowEqual : _ref3$areMergedPropsE,\n        extraOptions = _objectWithoutPropertiesLoose(_ref3, _excluded);\n\n    var initMapStateToProps = match(mapStateToProps, mapStateToPropsFactories, 'mapStateToProps');\n    var initMapDispatchToProps = match(mapDispatchToProps, mapDispatchToPropsFactories, 'mapDispatchToProps');\n    var initMergeProps = match(mergeProps, mergePropsFactories, 'mergeProps');\n    return connectHOC(selectorFactory, _extends({\n      // used in error messages\n      methodName: 'connect',\n      // used to compute Connect's displayName from the wrapped component's displayName.\n      getDisplayName: function getDisplayName(name) {\n        return \"Connect(\" + name + \")\";\n      },\n      // if mapStateToProps is falsy, the Connect component doesn't subscribe to store state changes\n      shouldHandleStateChanges: Boolean(mapStateToProps),\n      // passed through to selectorFactory\n      initMapStateToProps: initMapStateToProps,\n      initMapDispatchToProps: initMapDispatchToProps,\n      initMergeProps: initMergeProps,\n      pure: pure,\n      areStatesEqual: areStatesEqual,\n      areOwnPropsEqual: areOwnPropsEqual,\n      areStatePropsEqual: areStatePropsEqual,\n      areMergedPropsEqual: areMergedPropsEqual\n    }, extraOptions));\n  };\n}\nexport default /*#__PURE__*/createConnect();","import { useReducer, useRef, useMemo, useContext, useDebugValue } from 'react';\nimport { useReduxContext as useDefaultReduxContext } from './useReduxContext';\nimport { createSubscription } from '../utils/Subscription';\nimport { useIsomorphicLayoutEffect } from '../utils/useIsomorphicLayoutEffect';\nimport { ReactReduxContext } from '../components/Context';\n\nvar refEquality = function refEquality(a, b) {\n  return a === b;\n};\n\nfunction useSelectorWithStoreAndSubscription(selector, equalityFn, store, contextSub) {\n  var _useReducer = useReducer(function (s) {\n    return s + 1;\n  }, 0),\n      forceRender = _useReducer[1];\n\n  var subscription = useMemo(function () {\n    return createSubscription(store, contextSub);\n  }, [store, contextSub]);\n  var latestSubscriptionCallbackError = useRef();\n  var latestSelector = useRef();\n  var latestStoreState = useRef();\n  var latestSelectedState = useRef();\n  var storeState = store.getState();\n  var selectedState;\n\n  try {\n    if (selector !== latestSelector.current || storeState !== latestStoreState.current || latestSubscriptionCallbackError.current) {\n      var newSelectedState = selector(storeState); // ensure latest selected state is reused so that a custom equality function can result in identical references\n\n      if (latestSelectedState.current === undefined || !equalityFn(newSelectedState, latestSelectedState.current)) {\n        selectedState = newSelectedState;\n      } else {\n        selectedState = latestSelectedState.current;\n      }\n    } else {\n      selectedState = latestSelectedState.current;\n    }\n  } catch (err) {\n    if (latestSubscriptionCallbackError.current) {\n      err.message += \"\\nThe error may be correlated with this previous error:\\n\" + latestSubscriptionCallbackError.current.stack + \"\\n\\n\";\n    }\n\n    throw err;\n  }\n\n  useIsomorphicLayoutEffect(function () {\n    latestSelector.current = selector;\n    latestStoreState.current = storeState;\n    latestSelectedState.current = selectedState;\n    latestSubscriptionCallbackError.current = undefined;\n  });\n  useIsomorphicLayoutEffect(function () {\n    function checkForUpdates() {\n      try {\n        var newStoreState = store.getState(); // Avoid calling selector multiple times if the store's state has not changed\n\n        if (newStoreState === latestStoreState.current) {\n          return;\n        }\n\n        var _newSelectedState = latestSelector.current(newStoreState);\n\n        if (equalityFn(_newSelectedState, latestSelectedState.current)) {\n          return;\n        }\n\n        latestSelectedState.current = _newSelectedState;\n        latestStoreState.current = newStoreState;\n      } catch (err) {\n        // we ignore all errors here, since when the component\n        // is re-rendered, the selectors are called again, and\n        // will throw again, if neither props nor store state\n        // changed\n        latestSubscriptionCallbackError.current = err;\n      }\n\n      forceRender();\n    }\n\n    subscription.onStateChange = checkForUpdates;\n    subscription.trySubscribe();\n    checkForUpdates();\n    return function () {\n      return subscription.tryUnsubscribe();\n    };\n  }, [store, subscription]);\n  return selectedState;\n}\n/**\r\n * Hook factory, which creates a `useSelector` hook bound to a given context.\r\n *\r\n * @param {React.Context} [context=ReactReduxContext] Context passed to your `<Provider>`.\r\n * @returns {Function} A `useSelector` hook bound to the specified context.\r\n */\n\n\nexport function createSelectorHook(context) {\n  if (context === void 0) {\n    context = ReactReduxContext;\n  }\n\n  var useReduxContext = context === ReactReduxContext ? useDefaultReduxContext : function () {\n    return useContext(context);\n  };\n  return function useSelector(selector, equalityFn) {\n    if (equalityFn === void 0) {\n      equalityFn = refEquality;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (!selector) {\n        throw new Error(\"You must pass a selector to useSelector\");\n      }\n\n      if (typeof selector !== 'function') {\n        throw new Error(\"You must pass a function as a selector to useSelector\");\n      }\n\n      if (typeof equalityFn !== 'function') {\n        throw new Error(\"You must pass a function as an equality function to useSelector\");\n      }\n    }\n\n    var _useReduxContext = useReduxContext(),\n        store = _useReduxContext.store,\n        contextSub = _useReduxContext.subscription;\n\n    var selectedState = useSelectorWithStoreAndSubscription(selector, equalityFn, store, contextSub);\n    useDebugValue(selectedState);\n    return selectedState;\n  };\n}\n/**\r\n * A hook to access the redux store's state. This hook takes a selector function\r\n * as an argument. The selector is called with the store state.\r\n *\r\n * This hook takes an optional equality comparison function as the second parameter\r\n * that allows you to customize the way the selected state is compared to determine\r\n * whether the component needs to be re-rendered.\r\n *\r\n * @param {Function} selector the selector function\r\n * @param {Function=} equalityFn the function that will be used to determine equality\r\n *\r\n * @returns {any} the selected state\r\n *\r\n * @example\r\n *\r\n * import React from 'react'\r\n * import { useSelector } from 'react-redux'\r\n *\r\n * export const CounterComponent = () => {\r\n *   const counter = useSelector(state => state.counter)\r\n *   return <div>{counter}</div>\r\n * }\r\n */\n\nexport var useSelector = /*#__PURE__*/createSelectorHook();","import { useState, useRef, useEffect } from 'react';\n\nfunction areInputsEqual(newInputs, lastInputs) {\n  if (newInputs.length !== lastInputs.length) {\n    return false;\n  }\n\n  for (var i = 0; i < newInputs.length; i++) {\n    if (newInputs[i] !== lastInputs[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction useMemoOne(getResult, inputs) {\n  var initial = useState(function () {\n    return {\n      inputs: inputs,\n      result: getResult()\n    };\n  })[0];\n  var isFirstRun = useRef(true);\n  var committed = useRef(initial);\n  var useCache = isFirstRun.current || Boolean(inputs && committed.current.inputs && areInputsEqual(inputs, committed.current.inputs));\n  var cache = useCache ? committed.current : {\n    inputs: inputs,\n    result: getResult()\n  };\n  useEffect(function () {\n    isFirstRun.current = false;\n    committed.current = cache;\n  }, [cache]);\n  return cache.result;\n}\nfunction useCallbackOne(callback, inputs) {\n  return useMemoOne(function () {\n    return callback;\n  }, inputs);\n}\nvar useMemo = useMemoOne;\nvar useCallback = useCallbackOne;\n\nexport { useCallback, useCallbackOne, useMemo, useMemoOne };\n","export * from './exports';\nimport { unstable_batchedUpdates as batch } from './utils/reactBatchedUpdates';\nimport { setBatch } from './utils/batch'; // Enable batched updates in our subscriptions for use\n// with standard React renderers (ReactDOM, React Native)\n\nsetBatch(batch);\nexport { batch };","import invariant from 'tiny-invariant';\n\nvar getRect = function getRect(_ref) {\n  var top = _ref.top,\n      right = _ref.right,\n      bottom = _ref.bottom,\n      left = _ref.left;\n  var width = right - left;\n  var height = bottom - top;\n  var rect = {\n    top: top,\n    right: right,\n    bottom: bottom,\n    left: left,\n    width: width,\n    height: height,\n    x: left,\n    y: top,\n    center: {\n      x: (right + left) / 2,\n      y: (bottom + top) / 2\n    }\n  };\n  return rect;\n};\nvar expand = function expand(target, expandBy) {\n  return {\n    top: target.top - expandBy.top,\n    left: target.left - expandBy.left,\n    bottom: target.bottom + expandBy.bottom,\n    right: target.right + expandBy.right\n  };\n};\nvar shrink = function shrink(target, shrinkBy) {\n  return {\n    top: target.top + shrinkBy.top,\n    left: target.left + shrinkBy.left,\n    bottom: target.bottom - shrinkBy.bottom,\n    right: target.right - shrinkBy.right\n  };\n};\n\nvar shift = function shift(target, shiftBy) {\n  return {\n    top: target.top + shiftBy.y,\n    left: target.left + shiftBy.x,\n    bottom: target.bottom + shiftBy.y,\n    right: target.right + shiftBy.x\n  };\n};\n\nvar noSpacing = {\n  top: 0,\n  right: 0,\n  bottom: 0,\n  left: 0\n};\nvar createBox = function createBox(_ref2) {\n  var borderBox = _ref2.borderBox,\n      _ref2$margin = _ref2.margin,\n      margin = _ref2$margin === void 0 ? noSpacing : _ref2$margin,\n      _ref2$border = _ref2.border,\n      border = _ref2$border === void 0 ? noSpacing : _ref2$border,\n      _ref2$padding = _ref2.padding,\n      padding = _ref2$padding === void 0 ? noSpacing : _ref2$padding;\n  var marginBox = getRect(expand(borderBox, margin));\n  var paddingBox = getRect(shrink(borderBox, border));\n  var contentBox = getRect(shrink(paddingBox, padding));\n  return {\n    marginBox: marginBox,\n    borderBox: getRect(borderBox),\n    paddingBox: paddingBox,\n    contentBox: contentBox,\n    margin: margin,\n    border: border,\n    padding: padding\n  };\n};\n\nvar parse = function parse(raw) {\n  var value = raw.slice(0, -2);\n  var suffix = raw.slice(-2);\n\n  if (suffix !== 'px') {\n    return 0;\n  }\n\n  var result = Number(value);\n  !!isNaN(result) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Could not parse value [raw: \" + raw + \", without suffix: \" + value + \"]\") : invariant(false) : void 0;\n  return result;\n};\n\nvar getWindowScroll = function getWindowScroll() {\n  return {\n    x: window.pageXOffset,\n    y: window.pageYOffset\n  };\n};\n\nvar offset = function offset(original, change) {\n  var borderBox = original.borderBox,\n      border = original.border,\n      margin = original.margin,\n      padding = original.padding;\n  var shifted = shift(borderBox, change);\n  return createBox({\n    borderBox: shifted,\n    border: border,\n    margin: margin,\n    padding: padding\n  });\n};\nvar withScroll = function withScroll(original, scroll) {\n  if (scroll === void 0) {\n    scroll = getWindowScroll();\n  }\n\n  return offset(original, scroll);\n};\nvar calculateBox = function calculateBox(borderBox, styles) {\n  var margin = {\n    top: parse(styles.marginTop),\n    right: parse(styles.marginRight),\n    bottom: parse(styles.marginBottom),\n    left: parse(styles.marginLeft)\n  };\n  var padding = {\n    top: parse(styles.paddingTop),\n    right: parse(styles.paddingRight),\n    bottom: parse(styles.paddingBottom),\n    left: parse(styles.paddingLeft)\n  };\n  var border = {\n    top: parse(styles.borderTopWidth),\n    right: parse(styles.borderRightWidth),\n    bottom: parse(styles.borderBottomWidth),\n    left: parse(styles.borderLeftWidth)\n  };\n  return createBox({\n    borderBox: borderBox,\n    margin: margin,\n    padding: padding,\n    border: border\n  });\n};\nvar getBox = function getBox(el) {\n  var borderBox = el.getBoundingClientRect();\n  var styles = window.getComputedStyle(el);\n  return calculateBox(borderBox, styles);\n};\n\nexport { calculateBox, createBox, expand, getBox, getRect, offset, shrink, withScroll };\n","var rafSchd = function rafSchd(fn) {\n  var lastArgs = [];\n  var frameId = null;\n\n  var wrapperFn = function wrapperFn() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    lastArgs = args;\n\n    if (frameId) {\n      return;\n    }\n\n    frameId = requestAnimationFrame(function () {\n      frameId = null;\n      fn.apply(void 0, lastArgs);\n    });\n  };\n\n  wrapperFn.cancel = function () {\n    if (!frameId) {\n      return;\n    }\n\n    cancelAnimationFrame(frameId);\n    frameId = null;\n  };\n\n  return wrapperFn;\n};\n\nexport default rafSchd;\n","import React, { useLayoutEffect, useEffect, useRef, useState, useContext } from 'react';\nimport _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport { createStore as createStore$1, applyMiddleware, compose, bindActionCreators } from 'redux';\nimport { Provider, connect } from 'react-redux';\nimport { useMemo, useCallback } from 'use-memo-one';\nimport { getRect, expand, offset, withScroll, getBox, createBox, calculateBox } from 'css-box-model';\nimport memoizeOne from 'memoize-one';\nimport rafSchd from 'raf-schd';\nimport ReactDOM from 'react-dom';\n\nvar isProduction = process.env.NODE_ENV === 'production';\nvar spacesAndTabs = /[ \\t]{2,}/g;\nvar lineStartWithSpaces = /^[ \\t]*/gm;\n\nvar clean = function clean(value) {\n  return value.replace(spacesAndTabs, ' ').replace(lineStartWithSpaces, '').trim();\n};\n\nvar getDevMessage = function getDevMessage(message) {\n  return clean(\"\\n  %creact-beautiful-dnd\\n\\n  %c\" + clean(message) + \"\\n\\n  %c\\uD83D\\uDC77\\u200D This is a development only message. It will be removed in production builds.\\n\");\n};\n\nvar getFormattedMessage = function getFormattedMessage(message) {\n  return [getDevMessage(message), 'color: #00C584; font-size: 1.2em; font-weight: bold;', 'line-height: 1.5', 'color: #723874;'];\n};\nvar isDisabledFlag = '__react-beautiful-dnd-disable-dev-warnings';\nfunction log(type, message) {\n  var _console;\n\n  if (isProduction) {\n    return;\n  }\n\n  if (typeof window !== 'undefined' && window[isDisabledFlag]) {\n    return;\n  }\n\n  (_console = console)[type].apply(_console, getFormattedMessage(message));\n}\nvar warning = log.bind(null, 'warn');\nvar error = log.bind(null, 'error');\n\nfunction noop() {}\n\nfunction getOptions(shared, fromBinding) {\n  return _extends({}, shared, {}, fromBinding);\n}\n\nfunction bindEvents(el, bindings, sharedOptions) {\n  var unbindings = bindings.map(function (binding) {\n    var options = getOptions(sharedOptions, binding.options);\n    el.addEventListener(binding.eventName, binding.fn, options);\n    return function unbind() {\n      el.removeEventListener(binding.eventName, binding.fn, options);\n    };\n  });\n  return function unbindAll() {\n    unbindings.forEach(function (unbind) {\n      unbind();\n    });\n  };\n}\n\nvar isProduction$1 = process.env.NODE_ENV === 'production';\nvar prefix = 'Invariant failed';\nfunction RbdInvariant(message) {\n  this.message = message;\n}\n\nRbdInvariant.prototype.toString = function toString() {\n  return this.message;\n};\n\nfunction invariant(condition, message) {\n  if (condition) {\n    return;\n  }\n\n  if (isProduction$1) {\n    throw new RbdInvariant(prefix);\n  } else {\n    throw new RbdInvariant(prefix + \": \" + (message || ''));\n  }\n}\n\nvar ErrorBoundary = function (_React$Component) {\n  _inheritsLoose(ErrorBoundary, _React$Component);\n\n  function ErrorBoundary() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.callbacks = null;\n    _this.unbind = noop;\n\n    _this.onWindowError = function (event) {\n      var callbacks = _this.getCallbacks();\n\n      if (callbacks.isDragging()) {\n        callbacks.tryAbort();\n        process.env.NODE_ENV !== \"production\" ? warning(\"\\n        An error was caught by our window 'error' event listener while a drag was occurring.\\n        The active drag has been aborted.\\n      \") : void 0;\n      }\n\n      var err = event.error;\n\n      if (err instanceof RbdInvariant) {\n        event.preventDefault();\n\n        if (process.env.NODE_ENV !== 'production') {\n          error(err.message);\n        }\n      }\n    };\n\n    _this.getCallbacks = function () {\n      if (!_this.callbacks) {\n        throw new Error('Unable to find AppCallbacks in <ErrorBoundary/>');\n      }\n\n      return _this.callbacks;\n    };\n\n    _this.setCallbacks = function (callbacks) {\n      _this.callbacks = callbacks;\n    };\n\n    return _this;\n  }\n\n  var _proto = ErrorBoundary.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.unbind = bindEvents(window, [{\n      eventName: 'error',\n      fn: this.onWindowError\n    }]);\n  };\n\n  _proto.componentDidCatch = function componentDidCatch(err) {\n    if (err instanceof RbdInvariant) {\n      if (process.env.NODE_ENV !== 'production') {\n        error(err.message);\n      }\n\n      this.setState({});\n      return;\n    }\n\n    throw err;\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.unbind();\n  };\n\n  _proto.render = function render() {\n    return this.props.children(this.setCallbacks);\n  };\n\n  return ErrorBoundary;\n}(React.Component);\n\nvar dragHandleUsageInstructions = \"\\n  Press space bar to start a drag.\\n  When dragging you can use the arrow keys to move the item around and escape to cancel.\\n  Some screen readers may require you to be in focus mode or to use your pass through key\\n\";\n\nvar position = function position(index) {\n  return index + 1;\n};\n\nvar onDragStart = function onDragStart(start) {\n  return \"\\n  You have lifted an item in position \" + position(start.source.index) + \"\\n\";\n};\n\nvar withLocation = function withLocation(source, destination) {\n  var isInHomeList = source.droppableId === destination.droppableId;\n  var startPosition = position(source.index);\n  var endPosition = position(destination.index);\n\n  if (isInHomeList) {\n    return \"\\n      You have moved the item from position \" + startPosition + \"\\n      to position \" + endPosition + \"\\n    \";\n  }\n\n  return \"\\n    You have moved the item from position \" + startPosition + \"\\n    in list \" + source.droppableId + \"\\n    to list \" + destination.droppableId + \"\\n    in position \" + endPosition + \"\\n  \";\n};\n\nvar withCombine = function withCombine(id, source, combine) {\n  var inHomeList = source.droppableId === combine.droppableId;\n\n  if (inHomeList) {\n    return \"\\n      The item \" + id + \"\\n      has been combined with \" + combine.draggableId;\n  }\n\n  return \"\\n      The item \" + id + \"\\n      in list \" + source.droppableId + \"\\n      has been combined with \" + combine.draggableId + \"\\n      in list \" + combine.droppableId + \"\\n    \";\n};\n\nvar onDragUpdate = function onDragUpdate(update) {\n  var location = update.destination;\n\n  if (location) {\n    return withLocation(update.source, location);\n  }\n\n  var combine = update.combine;\n\n  if (combine) {\n    return withCombine(update.draggableId, update.source, combine);\n  }\n\n  return 'You are over an area that cannot be dropped on';\n};\n\nvar returnedToStart = function returnedToStart(source) {\n  return \"\\n  The item has returned to its starting position\\n  of \" + position(source.index) + \"\\n\";\n};\n\nvar onDragEnd = function onDragEnd(result) {\n  if (result.reason === 'CANCEL') {\n    return \"\\n      Movement cancelled.\\n      \" + returnedToStart(result.source) + \"\\n    \";\n  }\n\n  var location = result.destination;\n  var combine = result.combine;\n\n  if (location) {\n    return \"\\n      You have dropped the item.\\n      \" + withLocation(result.source, location) + \"\\n    \";\n  }\n\n  if (combine) {\n    return \"\\n      You have dropped the item.\\n      \" + withCombine(result.draggableId, result.source, combine) + \"\\n    \";\n  }\n\n  return \"\\n    The item has been dropped while not over a drop area.\\n    \" + returnedToStart(result.source) + \"\\n  \";\n};\n\nvar preset = {\n  dragHandleUsageInstructions: dragHandleUsageInstructions,\n  onDragStart: onDragStart,\n  onDragUpdate: onDragUpdate,\n  onDragEnd: onDragEnd\n};\n\nvar origin = {\n  x: 0,\n  y: 0\n};\nvar add = function add(point1, point2) {\n  return {\n    x: point1.x + point2.x,\n    y: point1.y + point2.y\n  };\n};\nvar subtract = function subtract(point1, point2) {\n  return {\n    x: point1.x - point2.x,\n    y: point1.y - point2.y\n  };\n};\nvar isEqual = function isEqual(point1, point2) {\n  return point1.x === point2.x && point1.y === point2.y;\n};\nvar negate = function negate(point) {\n  return {\n    x: point.x !== 0 ? -point.x : 0,\n    y: point.y !== 0 ? -point.y : 0\n  };\n};\nvar patch = function patch(line, value, otherValue) {\n  var _ref;\n\n  if (otherValue === void 0) {\n    otherValue = 0;\n  }\n\n  return _ref = {}, _ref[line] = value, _ref[line === 'x' ? 'y' : 'x'] = otherValue, _ref;\n};\nvar distance = function distance(point1, point2) {\n  return Math.sqrt(Math.pow(point2.x - point1.x, 2) + Math.pow(point2.y - point1.y, 2));\n};\nvar closest = function closest(target, points) {\n  return Math.min.apply(Math, points.map(function (point) {\n    return distance(target, point);\n  }));\n};\nvar apply = function apply(fn) {\n  return function (point) {\n    return {\n      x: fn(point.x),\n      y: fn(point.y)\n    };\n  };\n};\n\nvar executeClip = (function (frame, subject) {\n  var result = getRect({\n    top: Math.max(subject.top, frame.top),\n    right: Math.min(subject.right, frame.right),\n    bottom: Math.min(subject.bottom, frame.bottom),\n    left: Math.max(subject.left, frame.left)\n  });\n\n  if (result.width <= 0 || result.height <= 0) {\n    return null;\n  }\n\n  return result;\n});\n\nvar offsetByPosition = function offsetByPosition(spacing, point) {\n  return {\n    top: spacing.top + point.y,\n    left: spacing.left + point.x,\n    bottom: spacing.bottom + point.y,\n    right: spacing.right + point.x\n  };\n};\nvar getCorners = function getCorners(spacing) {\n  return [{\n    x: spacing.left,\n    y: spacing.top\n  }, {\n    x: spacing.right,\n    y: spacing.top\n  }, {\n    x: spacing.left,\n    y: spacing.bottom\n  }, {\n    x: spacing.right,\n    y: spacing.bottom\n  }];\n};\nvar noSpacing = {\n  top: 0,\n  right: 0,\n  bottom: 0,\n  left: 0\n};\n\nvar scroll = function scroll(target, frame) {\n  if (!frame) {\n    return target;\n  }\n\n  return offsetByPosition(target, frame.scroll.diff.displacement);\n};\n\nvar increase = function increase(target, axis, withPlaceholder) {\n  if (withPlaceholder && withPlaceholder.increasedBy) {\n    var _extends2;\n\n    return _extends({}, target, (_extends2 = {}, _extends2[axis.end] = target[axis.end] + withPlaceholder.increasedBy[axis.line], _extends2));\n  }\n\n  return target;\n};\n\nvar clip = function clip(target, frame) {\n  if (frame && frame.shouldClipSubject) {\n    return executeClip(frame.pageMarginBox, target);\n  }\n\n  return getRect(target);\n};\n\nvar getSubject = (function (_ref) {\n  var page = _ref.page,\n      withPlaceholder = _ref.withPlaceholder,\n      axis = _ref.axis,\n      frame = _ref.frame;\n  var scrolled = scroll(page.marginBox, frame);\n  var increased = increase(scrolled, axis, withPlaceholder);\n  var clipped = clip(increased, frame);\n  return {\n    page: page,\n    withPlaceholder: withPlaceholder,\n    active: clipped\n  };\n});\n\nvar scrollDroppable = (function (droppable, newScroll) {\n  !droppable.frame ? process.env.NODE_ENV !== \"production\" ? invariant(false) : invariant(false) : void 0;\n  var scrollable = droppable.frame;\n  var scrollDiff = subtract(newScroll, scrollable.scroll.initial);\n  var scrollDisplacement = negate(scrollDiff);\n\n  var frame = _extends({}, scrollable, {\n    scroll: {\n      initial: scrollable.scroll.initial,\n      current: newScroll,\n      diff: {\n        value: scrollDiff,\n        displacement: scrollDisplacement\n      },\n      max: scrollable.scroll.max\n    }\n  });\n\n  var subject = getSubject({\n    page: droppable.subject.page,\n    withPlaceholder: droppable.subject.withPlaceholder,\n    axis: droppable.axis,\n    frame: frame\n  });\n\n  var result = _extends({}, droppable, {\n    frame: frame,\n    subject: subject\n  });\n\n  return result;\n});\n\nfunction isInteger(value) {\n  if (Number.isInteger) {\n    return Number.isInteger(value);\n  }\n\n  return typeof value === 'number' && isFinite(value) && Math.floor(value) === value;\n}\nfunction values(map) {\n  if (Object.values) {\n    return Object.values(map);\n  }\n\n  return Object.keys(map).map(function (key) {\n    return map[key];\n  });\n}\nfunction findIndex(list, predicate) {\n  if (list.findIndex) {\n    return list.findIndex(predicate);\n  }\n\n  for (var i = 0; i < list.length; i++) {\n    if (predicate(list[i])) {\n      return i;\n    }\n  }\n\n  return -1;\n}\nfunction find(list, predicate) {\n  if (list.find) {\n    return list.find(predicate);\n  }\n\n  var index = findIndex(list, predicate);\n\n  if (index !== -1) {\n    return list[index];\n  }\n\n  return undefined;\n}\nfunction toArray(list) {\n  return Array.prototype.slice.call(list);\n}\n\nvar toDroppableMap = memoizeOne(function (droppables) {\n  return droppables.reduce(function (previous, current) {\n    previous[current.descriptor.id] = current;\n    return previous;\n  }, {});\n});\nvar toDraggableMap = memoizeOne(function (draggables) {\n  return draggables.reduce(function (previous, current) {\n    previous[current.descriptor.id] = current;\n    return previous;\n  }, {});\n});\nvar toDroppableList = memoizeOne(function (droppables) {\n  return values(droppables);\n});\nvar toDraggableList = memoizeOne(function (draggables) {\n  return values(draggables);\n});\n\nvar getDraggablesInsideDroppable = memoizeOne(function (droppableId, draggables) {\n  var result = toDraggableList(draggables).filter(function (draggable) {\n    return droppableId === draggable.descriptor.droppableId;\n  }).sort(function (a, b) {\n    return a.descriptor.index - b.descriptor.index;\n  });\n  return result;\n});\n\nfunction tryGetDestination(impact) {\n  if (impact.at && impact.at.type === 'REORDER') {\n    return impact.at.destination;\n  }\n\n  return null;\n}\nfunction tryGetCombine(impact) {\n  if (impact.at && impact.at.type === 'COMBINE') {\n    return impact.at.combine;\n  }\n\n  return null;\n}\n\nvar removeDraggableFromList = memoizeOne(function (remove, list) {\n  return list.filter(function (item) {\n    return item.descriptor.id !== remove.descriptor.id;\n  });\n});\n\nvar moveToNextCombine = (function (_ref) {\n  var isMovingForward = _ref.isMovingForward,\n      draggable = _ref.draggable,\n      destination = _ref.destination,\n      insideDestination = _ref.insideDestination,\n      previousImpact = _ref.previousImpact;\n\n  if (!destination.isCombineEnabled) {\n    return null;\n  }\n\n  var location = tryGetDestination(previousImpact);\n\n  if (!location) {\n    return null;\n  }\n\n  function getImpact(target) {\n    var at = {\n      type: 'COMBINE',\n      combine: {\n        draggableId: target,\n        droppableId: destination.descriptor.id\n      }\n    };\n    return _extends({}, previousImpact, {\n      at: at\n    });\n  }\n\n  var all = previousImpact.displaced.all;\n  var closestId = all.length ? all[0] : null;\n\n  if (isMovingForward) {\n    return closestId ? getImpact(closestId) : null;\n  }\n\n  var withoutDraggable = removeDraggableFromList(draggable, insideDestination);\n\n  if (!closestId) {\n    if (!withoutDraggable.length) {\n      return null;\n    }\n\n    var last = withoutDraggable[withoutDraggable.length - 1];\n    return getImpact(last.descriptor.id);\n  }\n\n  var indexOfClosest = findIndex(withoutDraggable, function (d) {\n    return d.descriptor.id === closestId;\n  });\n  !(indexOfClosest !== -1) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Could not find displaced item in set') : invariant(false) : void 0;\n  var proposedIndex = indexOfClosest - 1;\n\n  if (proposedIndex < 0) {\n    return null;\n  }\n\n  var before = withoutDraggable[proposedIndex];\n  return getImpact(before.descriptor.id);\n});\n\nvar isHomeOf = (function (draggable, destination) {\n  return draggable.descriptor.droppableId === destination.descriptor.id;\n});\n\nvar noDisplacedBy = {\n  point: origin,\n  value: 0\n};\nvar emptyGroups = {\n  invisible: {},\n  visible: {},\n  all: []\n};\nvar noImpact = {\n  displaced: emptyGroups,\n  displacedBy: noDisplacedBy,\n  at: null\n};\n\nvar isWithin = (function (lowerBound, upperBound) {\n  return function (value) {\n    return lowerBound <= value && value <= upperBound;\n  };\n});\n\nvar isPartiallyVisibleThroughFrame = (function (frame) {\n  var isWithinVertical = isWithin(frame.top, frame.bottom);\n  var isWithinHorizontal = isWithin(frame.left, frame.right);\n  return function (subject) {\n    var isContained = isWithinVertical(subject.top) && isWithinVertical(subject.bottom) && isWithinHorizontal(subject.left) && isWithinHorizontal(subject.right);\n\n    if (isContained) {\n      return true;\n    }\n\n    var isPartiallyVisibleVertically = isWithinVertical(subject.top) || isWithinVertical(subject.bottom);\n    var isPartiallyVisibleHorizontally = isWithinHorizontal(subject.left) || isWithinHorizontal(subject.right);\n    var isPartiallyContained = isPartiallyVisibleVertically && isPartiallyVisibleHorizontally;\n\n    if (isPartiallyContained) {\n      return true;\n    }\n\n    var isBiggerVertically = subject.top < frame.top && subject.bottom > frame.bottom;\n    var isBiggerHorizontally = subject.left < frame.left && subject.right > frame.right;\n    var isTargetBiggerThanFrame = isBiggerVertically && isBiggerHorizontally;\n\n    if (isTargetBiggerThanFrame) {\n      return true;\n    }\n\n    var isTargetBiggerOnOneAxis = isBiggerVertically && isPartiallyVisibleHorizontally || isBiggerHorizontally && isPartiallyVisibleVertically;\n    return isTargetBiggerOnOneAxis;\n  };\n});\n\nvar isTotallyVisibleThroughFrame = (function (frame) {\n  var isWithinVertical = isWithin(frame.top, frame.bottom);\n  var isWithinHorizontal = isWithin(frame.left, frame.right);\n  return function (subject) {\n    var isContained = isWithinVertical(subject.top) && isWithinVertical(subject.bottom) && isWithinHorizontal(subject.left) && isWithinHorizontal(subject.right);\n    return isContained;\n  };\n});\n\nvar vertical = {\n  direction: 'vertical',\n  line: 'y',\n  crossAxisLine: 'x',\n  start: 'top',\n  end: 'bottom',\n  size: 'height',\n  crossAxisStart: 'left',\n  crossAxisEnd: 'right',\n  crossAxisSize: 'width'\n};\nvar horizontal = {\n  direction: 'horizontal',\n  line: 'x',\n  crossAxisLine: 'y',\n  start: 'left',\n  end: 'right',\n  size: 'width',\n  crossAxisStart: 'top',\n  crossAxisEnd: 'bottom',\n  crossAxisSize: 'height'\n};\n\nvar isTotallyVisibleThroughFrameOnAxis = (function (axis) {\n  return function (frame) {\n    var isWithinVertical = isWithin(frame.top, frame.bottom);\n    var isWithinHorizontal = isWithin(frame.left, frame.right);\n    return function (subject) {\n      if (axis === vertical) {\n        return isWithinVertical(subject.top) && isWithinVertical(subject.bottom);\n      }\n\n      return isWithinHorizontal(subject.left) && isWithinHorizontal(subject.right);\n    };\n  };\n});\n\nvar getDroppableDisplaced = function getDroppableDisplaced(target, destination) {\n  var displacement = destination.frame ? destination.frame.scroll.diff.displacement : origin;\n  return offsetByPosition(target, displacement);\n};\n\nvar isVisibleInDroppable = function isVisibleInDroppable(target, destination, isVisibleThroughFrameFn) {\n  if (!destination.subject.active) {\n    return false;\n  }\n\n  return isVisibleThroughFrameFn(destination.subject.active)(target);\n};\n\nvar isVisibleInViewport = function isVisibleInViewport(target, viewport, isVisibleThroughFrameFn) {\n  return isVisibleThroughFrameFn(viewport)(target);\n};\n\nvar isVisible = function isVisible(_ref) {\n  var toBeDisplaced = _ref.target,\n      destination = _ref.destination,\n      viewport = _ref.viewport,\n      withDroppableDisplacement = _ref.withDroppableDisplacement,\n      isVisibleThroughFrameFn = _ref.isVisibleThroughFrameFn;\n  var displacedTarget = withDroppableDisplacement ? getDroppableDisplaced(toBeDisplaced, destination) : toBeDisplaced;\n  return isVisibleInDroppable(displacedTarget, destination, isVisibleThroughFrameFn) && isVisibleInViewport(displacedTarget, viewport, isVisibleThroughFrameFn);\n};\n\nvar isPartiallyVisible = function isPartiallyVisible(args) {\n  return isVisible(_extends({}, args, {\n    isVisibleThroughFrameFn: isPartiallyVisibleThroughFrame\n  }));\n};\nvar isTotallyVisible = function isTotallyVisible(args) {\n  return isVisible(_extends({}, args, {\n    isVisibleThroughFrameFn: isTotallyVisibleThroughFrame\n  }));\n};\nvar isTotallyVisibleOnAxis = function isTotallyVisibleOnAxis(args) {\n  return isVisible(_extends({}, args, {\n    isVisibleThroughFrameFn: isTotallyVisibleThroughFrameOnAxis(args.destination.axis)\n  }));\n};\n\nvar getShouldAnimate = function getShouldAnimate(id, last, forceShouldAnimate) {\n  if (typeof forceShouldAnimate === 'boolean') {\n    return forceShouldAnimate;\n  }\n\n  if (!last) {\n    return true;\n  }\n\n  var invisible = last.invisible,\n      visible = last.visible;\n\n  if (invisible[id]) {\n    return false;\n  }\n\n  var previous = visible[id];\n  return previous ? previous.shouldAnimate : true;\n};\n\nfunction getTarget(draggable, displacedBy) {\n  var marginBox = draggable.page.marginBox;\n  var expandBy = {\n    top: displacedBy.point.y,\n    right: 0,\n    bottom: 0,\n    left: displacedBy.point.x\n  };\n  return getRect(expand(marginBox, expandBy));\n}\n\nfunction getDisplacementGroups(_ref) {\n  var afterDragging = _ref.afterDragging,\n      destination = _ref.destination,\n      displacedBy = _ref.displacedBy,\n      viewport = _ref.viewport,\n      forceShouldAnimate = _ref.forceShouldAnimate,\n      last = _ref.last;\n  return afterDragging.reduce(function process(groups, draggable) {\n    var target = getTarget(draggable, displacedBy);\n    var id = draggable.descriptor.id;\n    groups.all.push(id);\n    var isVisible = isPartiallyVisible({\n      target: target,\n      destination: destination,\n      viewport: viewport,\n      withDroppableDisplacement: true\n    });\n\n    if (!isVisible) {\n      groups.invisible[draggable.descriptor.id] = true;\n      return groups;\n    }\n\n    var shouldAnimate = getShouldAnimate(id, last, forceShouldAnimate);\n    var displacement = {\n      draggableId: id,\n      shouldAnimate: shouldAnimate\n    };\n    groups.visible[id] = displacement;\n    return groups;\n  }, {\n    all: [],\n    visible: {},\n    invisible: {}\n  });\n}\n\nfunction getIndexOfLastItem(draggables, options) {\n  if (!draggables.length) {\n    return 0;\n  }\n\n  var indexOfLastItem = draggables[draggables.length - 1].descriptor.index;\n  return options.inHomeList ? indexOfLastItem : indexOfLastItem + 1;\n}\n\nfunction goAtEnd(_ref) {\n  var insideDestination = _ref.insideDestination,\n      inHomeList = _ref.inHomeList,\n      displacedBy = _ref.displacedBy,\n      destination = _ref.destination;\n  var newIndex = getIndexOfLastItem(insideDestination, {\n    inHomeList: inHomeList\n  });\n  return {\n    displaced: emptyGroups,\n    displacedBy: displacedBy,\n    at: {\n      type: 'REORDER',\n      destination: {\n        droppableId: destination.descriptor.id,\n        index: newIndex\n      }\n    }\n  };\n}\n\nfunction calculateReorderImpact(_ref2) {\n  var draggable = _ref2.draggable,\n      insideDestination = _ref2.insideDestination,\n      destination = _ref2.destination,\n      viewport = _ref2.viewport,\n      displacedBy = _ref2.displacedBy,\n      last = _ref2.last,\n      index = _ref2.index,\n      forceShouldAnimate = _ref2.forceShouldAnimate;\n  var inHomeList = isHomeOf(draggable, destination);\n\n  if (index == null) {\n    return goAtEnd({\n      insideDestination: insideDestination,\n      inHomeList: inHomeList,\n      displacedBy: displacedBy,\n      destination: destination\n    });\n  }\n\n  var match = find(insideDestination, function (item) {\n    return item.descriptor.index === index;\n  });\n\n  if (!match) {\n    return goAtEnd({\n      insideDestination: insideDestination,\n      inHomeList: inHomeList,\n      displacedBy: displacedBy,\n      destination: destination\n    });\n  }\n\n  var withoutDragging = removeDraggableFromList(draggable, insideDestination);\n  var sliceFrom = insideDestination.indexOf(match);\n  var impacted = withoutDragging.slice(sliceFrom);\n  var displaced = getDisplacementGroups({\n    afterDragging: impacted,\n    destination: destination,\n    displacedBy: displacedBy,\n    last: last,\n    viewport: viewport.frame,\n    forceShouldAnimate: forceShouldAnimate\n  });\n  return {\n    displaced: displaced,\n    displacedBy: displacedBy,\n    at: {\n      type: 'REORDER',\n      destination: {\n        droppableId: destination.descriptor.id,\n        index: index\n      }\n    }\n  };\n}\n\nfunction didStartAfterCritical(draggableId, afterCritical) {\n  return Boolean(afterCritical.effected[draggableId]);\n}\n\nvar fromCombine = (function (_ref) {\n  var isMovingForward = _ref.isMovingForward,\n      destination = _ref.destination,\n      draggables = _ref.draggables,\n      combine = _ref.combine,\n      afterCritical = _ref.afterCritical;\n\n  if (!destination.isCombineEnabled) {\n    return null;\n  }\n\n  var combineId = combine.draggableId;\n  var combineWith = draggables[combineId];\n  var combineWithIndex = combineWith.descriptor.index;\n  var didCombineWithStartAfterCritical = didStartAfterCritical(combineId, afterCritical);\n\n  if (didCombineWithStartAfterCritical) {\n    if (isMovingForward) {\n      return combineWithIndex;\n    }\n\n    return combineWithIndex - 1;\n  }\n\n  if (isMovingForward) {\n    return combineWithIndex + 1;\n  }\n\n  return combineWithIndex;\n});\n\nvar fromReorder = (function (_ref) {\n  var isMovingForward = _ref.isMovingForward,\n      isInHomeList = _ref.isInHomeList,\n      insideDestination = _ref.insideDestination,\n      location = _ref.location;\n\n  if (!insideDestination.length) {\n    return null;\n  }\n\n  var currentIndex = location.index;\n  var proposedIndex = isMovingForward ? currentIndex + 1 : currentIndex - 1;\n  var firstIndex = insideDestination[0].descriptor.index;\n  var lastIndex = insideDestination[insideDestination.length - 1].descriptor.index;\n  var upperBound = isInHomeList ? lastIndex : lastIndex + 1;\n\n  if (proposedIndex < firstIndex) {\n    return null;\n  }\n\n  if (proposedIndex > upperBound) {\n    return null;\n  }\n\n  return proposedIndex;\n});\n\nvar moveToNextIndex = (function (_ref) {\n  var isMovingForward = _ref.isMovingForward,\n      isInHomeList = _ref.isInHomeList,\n      draggable = _ref.draggable,\n      draggables = _ref.draggables,\n      destination = _ref.destination,\n      insideDestination = _ref.insideDestination,\n      previousImpact = _ref.previousImpact,\n      viewport = _ref.viewport,\n      afterCritical = _ref.afterCritical;\n  var wasAt = previousImpact.at;\n  !wasAt ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot move in direction without previous impact location') : invariant(false) : void 0;\n\n  if (wasAt.type === 'REORDER') {\n    var _newIndex = fromReorder({\n      isMovingForward: isMovingForward,\n      isInHomeList: isInHomeList,\n      location: wasAt.destination,\n      insideDestination: insideDestination\n    });\n\n    if (_newIndex == null) {\n      return null;\n    }\n\n    return calculateReorderImpact({\n      draggable: draggable,\n      insideDestination: insideDestination,\n      destination: destination,\n      viewport: viewport,\n      last: previousImpact.displaced,\n      displacedBy: previousImpact.displacedBy,\n      index: _newIndex\n    });\n  }\n\n  var newIndex = fromCombine({\n    isMovingForward: isMovingForward,\n    destination: destination,\n    displaced: previousImpact.displaced,\n    draggables: draggables,\n    combine: wasAt.combine,\n    afterCritical: afterCritical\n  });\n\n  if (newIndex == null) {\n    return null;\n  }\n\n  return calculateReorderImpact({\n    draggable: draggable,\n    insideDestination: insideDestination,\n    destination: destination,\n    viewport: viewport,\n    last: previousImpact.displaced,\n    displacedBy: previousImpact.displacedBy,\n    index: newIndex\n  });\n});\n\nvar getCombinedItemDisplacement = (function (_ref) {\n  var displaced = _ref.displaced,\n      afterCritical = _ref.afterCritical,\n      combineWith = _ref.combineWith,\n      displacedBy = _ref.displacedBy;\n  var isDisplaced = Boolean(displaced.visible[combineWith] || displaced.invisible[combineWith]);\n\n  if (didStartAfterCritical(combineWith, afterCritical)) {\n    return isDisplaced ? origin : negate(displacedBy.point);\n  }\n\n  return isDisplaced ? displacedBy.point : origin;\n});\n\nvar whenCombining = (function (_ref) {\n  var afterCritical = _ref.afterCritical,\n      impact = _ref.impact,\n      draggables = _ref.draggables;\n  var combine = tryGetCombine(impact);\n  !combine ? process.env.NODE_ENV !== \"production\" ? invariant(false) : invariant(false) : void 0;\n  var combineWith = combine.draggableId;\n  var center = draggables[combineWith].page.borderBox.center;\n  var displaceBy = getCombinedItemDisplacement({\n    displaced: impact.displaced,\n    afterCritical: afterCritical,\n    combineWith: combineWith,\n    displacedBy: impact.displacedBy\n  });\n  return add(center, displaceBy);\n});\n\nvar distanceFromStartToBorderBoxCenter = function distanceFromStartToBorderBoxCenter(axis, box) {\n  return box.margin[axis.start] + box.borderBox[axis.size] / 2;\n};\n\nvar distanceFromEndToBorderBoxCenter = function distanceFromEndToBorderBoxCenter(axis, box) {\n  return box.margin[axis.end] + box.borderBox[axis.size] / 2;\n};\n\nvar getCrossAxisBorderBoxCenter = function getCrossAxisBorderBoxCenter(axis, target, isMoving) {\n  return target[axis.crossAxisStart] + isMoving.margin[axis.crossAxisStart] + isMoving.borderBox[axis.crossAxisSize] / 2;\n};\n\nvar goAfter = function goAfter(_ref) {\n  var axis = _ref.axis,\n      moveRelativeTo = _ref.moveRelativeTo,\n      isMoving = _ref.isMoving;\n  return patch(axis.line, moveRelativeTo.marginBox[axis.end] + distanceFromStartToBorderBoxCenter(axis, isMoving), getCrossAxisBorderBoxCenter(axis, moveRelativeTo.marginBox, isMoving));\n};\nvar goBefore = function goBefore(_ref2) {\n  var axis = _ref2.axis,\n      moveRelativeTo = _ref2.moveRelativeTo,\n      isMoving = _ref2.isMoving;\n  return patch(axis.line, moveRelativeTo.marginBox[axis.start] - distanceFromEndToBorderBoxCenter(axis, isMoving), getCrossAxisBorderBoxCenter(axis, moveRelativeTo.marginBox, isMoving));\n};\nvar goIntoStart = function goIntoStart(_ref3) {\n  var axis = _ref3.axis,\n      moveInto = _ref3.moveInto,\n      isMoving = _ref3.isMoving;\n  return patch(axis.line, moveInto.contentBox[axis.start] + distanceFromStartToBorderBoxCenter(axis, isMoving), getCrossAxisBorderBoxCenter(axis, moveInto.contentBox, isMoving));\n};\n\nvar whenReordering = (function (_ref) {\n  var impact = _ref.impact,\n      draggable = _ref.draggable,\n      draggables = _ref.draggables,\n      droppable = _ref.droppable,\n      afterCritical = _ref.afterCritical;\n  var insideDestination = getDraggablesInsideDroppable(droppable.descriptor.id, draggables);\n  var draggablePage = draggable.page;\n  var axis = droppable.axis;\n\n  if (!insideDestination.length) {\n    return goIntoStart({\n      axis: axis,\n      moveInto: droppable.page,\n      isMoving: draggablePage\n    });\n  }\n\n  var displaced = impact.displaced,\n      displacedBy = impact.displacedBy;\n  var closestAfter = displaced.all[0];\n\n  if (closestAfter) {\n    var closest = draggables[closestAfter];\n\n    if (didStartAfterCritical(closestAfter, afterCritical)) {\n      return goBefore({\n        axis: axis,\n        moveRelativeTo: closest.page,\n        isMoving: draggablePage\n      });\n    }\n\n    var withDisplacement = offset(closest.page, displacedBy.point);\n    return goBefore({\n      axis: axis,\n      moveRelativeTo: withDisplacement,\n      isMoving: draggablePage\n    });\n  }\n\n  var last = insideDestination[insideDestination.length - 1];\n\n  if (last.descriptor.id === draggable.descriptor.id) {\n    return draggablePage.borderBox.center;\n  }\n\n  if (didStartAfterCritical(last.descriptor.id, afterCritical)) {\n    var page = offset(last.page, negate(afterCritical.displacedBy.point));\n    return goAfter({\n      axis: axis,\n      moveRelativeTo: page,\n      isMoving: draggablePage\n    });\n  }\n\n  return goAfter({\n    axis: axis,\n    moveRelativeTo: last.page,\n    isMoving: draggablePage\n  });\n});\n\nvar withDroppableDisplacement = (function (droppable, point) {\n  var frame = droppable.frame;\n\n  if (!frame) {\n    return point;\n  }\n\n  return add(point, frame.scroll.diff.displacement);\n});\n\nvar getResultWithoutDroppableDisplacement = function getResultWithoutDroppableDisplacement(_ref) {\n  var impact = _ref.impact,\n      draggable = _ref.draggable,\n      droppable = _ref.droppable,\n      draggables = _ref.draggables,\n      afterCritical = _ref.afterCritical;\n  var original = draggable.page.borderBox.center;\n  var at = impact.at;\n\n  if (!droppable) {\n    return original;\n  }\n\n  if (!at) {\n    return original;\n  }\n\n  if (at.type === 'REORDER') {\n    return whenReordering({\n      impact: impact,\n      draggable: draggable,\n      draggables: draggables,\n      droppable: droppable,\n      afterCritical: afterCritical\n    });\n  }\n\n  return whenCombining({\n    impact: impact,\n    draggables: draggables,\n    afterCritical: afterCritical\n  });\n};\n\nvar getPageBorderBoxCenterFromImpact = (function (args) {\n  var withoutDisplacement = getResultWithoutDroppableDisplacement(args);\n  var droppable = args.droppable;\n  var withDisplacement = droppable ? withDroppableDisplacement(droppable, withoutDisplacement) : withoutDisplacement;\n  return withDisplacement;\n});\n\nvar scrollViewport = (function (viewport, newScroll) {\n  var diff = subtract(newScroll, viewport.scroll.initial);\n  var displacement = negate(diff);\n  var frame = getRect({\n    top: newScroll.y,\n    bottom: newScroll.y + viewport.frame.height,\n    left: newScroll.x,\n    right: newScroll.x + viewport.frame.width\n  });\n  var updated = {\n    frame: frame,\n    scroll: {\n      initial: viewport.scroll.initial,\n      max: viewport.scroll.max,\n      current: newScroll,\n      diff: {\n        value: diff,\n        displacement: displacement\n      }\n    }\n  };\n  return updated;\n});\n\nfunction getDraggables(ids, draggables) {\n  return ids.map(function (id) {\n    return draggables[id];\n  });\n}\n\nfunction tryGetVisible(id, groups) {\n  for (var i = 0; i < groups.length; i++) {\n    var displacement = groups[i].visible[id];\n\n    if (displacement) {\n      return displacement;\n    }\n  }\n\n  return null;\n}\n\nvar speculativelyIncrease = (function (_ref) {\n  var impact = _ref.impact,\n      viewport = _ref.viewport,\n      destination = _ref.destination,\n      draggables = _ref.draggables,\n      maxScrollChange = _ref.maxScrollChange;\n  var scrolledViewport = scrollViewport(viewport, add(viewport.scroll.current, maxScrollChange));\n  var scrolledDroppable = destination.frame ? scrollDroppable(destination, add(destination.frame.scroll.current, maxScrollChange)) : destination;\n  var last = impact.displaced;\n  var withViewportScroll = getDisplacementGroups({\n    afterDragging: getDraggables(last.all, draggables),\n    destination: destination,\n    displacedBy: impact.displacedBy,\n    viewport: scrolledViewport.frame,\n    last: last,\n    forceShouldAnimate: false\n  });\n  var withDroppableScroll = getDisplacementGroups({\n    afterDragging: getDraggables(last.all, draggables),\n    destination: scrolledDroppable,\n    displacedBy: impact.displacedBy,\n    viewport: viewport.frame,\n    last: last,\n    forceShouldAnimate: false\n  });\n  var invisible = {};\n  var visible = {};\n  var groups = [last, withViewportScroll, withDroppableScroll];\n  last.all.forEach(function (id) {\n    var displacement = tryGetVisible(id, groups);\n\n    if (displacement) {\n      visible[id] = displacement;\n      return;\n    }\n\n    invisible[id] = true;\n  });\n\n  var newImpact = _extends({}, impact, {\n    displaced: {\n      all: last.all,\n      invisible: invisible,\n      visible: visible\n    }\n  });\n\n  return newImpact;\n});\n\nvar withViewportDisplacement = (function (viewport, point) {\n  return add(viewport.scroll.diff.displacement, point);\n});\n\nvar getClientFromPageBorderBoxCenter = (function (_ref) {\n  var pageBorderBoxCenter = _ref.pageBorderBoxCenter,\n      draggable = _ref.draggable,\n      viewport = _ref.viewport;\n  var withoutPageScrollChange = withViewportDisplacement(viewport, pageBorderBoxCenter);\n  var offset = subtract(withoutPageScrollChange, draggable.page.borderBox.center);\n  return add(draggable.client.borderBox.center, offset);\n});\n\nvar isTotallyVisibleInNewLocation = (function (_ref) {\n  var draggable = _ref.draggable,\n      destination = _ref.destination,\n      newPageBorderBoxCenter = _ref.newPageBorderBoxCenter,\n      viewport = _ref.viewport,\n      withDroppableDisplacement = _ref.withDroppableDisplacement,\n      _ref$onlyOnMainAxis = _ref.onlyOnMainAxis,\n      onlyOnMainAxis = _ref$onlyOnMainAxis === void 0 ? false : _ref$onlyOnMainAxis;\n  var changeNeeded = subtract(newPageBorderBoxCenter, draggable.page.borderBox.center);\n  var shifted = offsetByPosition(draggable.page.borderBox, changeNeeded);\n  var args = {\n    target: shifted,\n    destination: destination,\n    withDroppableDisplacement: withDroppableDisplacement,\n    viewport: viewport\n  };\n  return onlyOnMainAxis ? isTotallyVisibleOnAxis(args) : isTotallyVisible(args);\n});\n\nvar moveToNextPlace = (function (_ref) {\n  var isMovingForward = _ref.isMovingForward,\n      draggable = _ref.draggable,\n      destination = _ref.destination,\n      draggables = _ref.draggables,\n      previousImpact = _ref.previousImpact,\n      viewport = _ref.viewport,\n      previousPageBorderBoxCenter = _ref.previousPageBorderBoxCenter,\n      previousClientSelection = _ref.previousClientSelection,\n      afterCritical = _ref.afterCritical;\n\n  if (!destination.isEnabled) {\n    return null;\n  }\n\n  var insideDestination = getDraggablesInsideDroppable(destination.descriptor.id, draggables);\n  var isInHomeList = isHomeOf(draggable, destination);\n  var impact = moveToNextCombine({\n    isMovingForward: isMovingForward,\n    draggable: draggable,\n    destination: destination,\n    insideDestination: insideDestination,\n    previousImpact: previousImpact\n  }) || moveToNextIndex({\n    isMovingForward: isMovingForward,\n    isInHomeList: isInHomeList,\n    draggable: draggable,\n    draggables: draggables,\n    destination: destination,\n    insideDestination: insideDestination,\n    previousImpact: previousImpact,\n    viewport: viewport,\n    afterCritical: afterCritical\n  });\n\n  if (!impact) {\n    return null;\n  }\n\n  var pageBorderBoxCenter = getPageBorderBoxCenterFromImpact({\n    impact: impact,\n    draggable: draggable,\n    droppable: destination,\n    draggables: draggables,\n    afterCritical: afterCritical\n  });\n  var isVisibleInNewLocation = isTotallyVisibleInNewLocation({\n    draggable: draggable,\n    destination: destination,\n    newPageBorderBoxCenter: pageBorderBoxCenter,\n    viewport: viewport.frame,\n    withDroppableDisplacement: false,\n    onlyOnMainAxis: true\n  });\n\n  if (isVisibleInNewLocation) {\n    var clientSelection = getClientFromPageBorderBoxCenter({\n      pageBorderBoxCenter: pageBorderBoxCenter,\n      draggable: draggable,\n      viewport: viewport\n    });\n    return {\n      clientSelection: clientSelection,\n      impact: impact,\n      scrollJumpRequest: null\n    };\n  }\n\n  var distance = subtract(pageBorderBoxCenter, previousPageBorderBoxCenter);\n  var cautious = speculativelyIncrease({\n    impact: impact,\n    viewport: viewport,\n    destination: destination,\n    draggables: draggables,\n    maxScrollChange: distance\n  });\n  return {\n    clientSelection: previousClientSelection,\n    impact: cautious,\n    scrollJumpRequest: distance\n  };\n});\n\nvar getKnownActive = function getKnownActive(droppable) {\n  var rect = droppable.subject.active;\n  !rect ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot get clipped area from droppable') : invariant(false) : void 0;\n  return rect;\n};\n\nvar getBestCrossAxisDroppable = (function (_ref) {\n  var isMovingForward = _ref.isMovingForward,\n      pageBorderBoxCenter = _ref.pageBorderBoxCenter,\n      source = _ref.source,\n      droppables = _ref.droppables,\n      viewport = _ref.viewport;\n  var active = source.subject.active;\n\n  if (!active) {\n    return null;\n  }\n\n  var axis = source.axis;\n  var isBetweenSourceClipped = isWithin(active[axis.start], active[axis.end]);\n  var candidates = toDroppableList(droppables).filter(function (droppable) {\n    return droppable !== source;\n  }).filter(function (droppable) {\n    return droppable.isEnabled;\n  }).filter(function (droppable) {\n    return Boolean(droppable.subject.active);\n  }).filter(function (droppable) {\n    return isPartiallyVisibleThroughFrame(viewport.frame)(getKnownActive(droppable));\n  }).filter(function (droppable) {\n    var activeOfTarget = getKnownActive(droppable);\n\n    if (isMovingForward) {\n      return active[axis.crossAxisEnd] < activeOfTarget[axis.crossAxisEnd];\n    }\n\n    return activeOfTarget[axis.crossAxisStart] < active[axis.crossAxisStart];\n  }).filter(function (droppable) {\n    var activeOfTarget = getKnownActive(droppable);\n    var isBetweenDestinationClipped = isWithin(activeOfTarget[axis.start], activeOfTarget[axis.end]);\n    return isBetweenSourceClipped(activeOfTarget[axis.start]) || isBetweenSourceClipped(activeOfTarget[axis.end]) || isBetweenDestinationClipped(active[axis.start]) || isBetweenDestinationClipped(active[axis.end]);\n  }).sort(function (a, b) {\n    var first = getKnownActive(a)[axis.crossAxisStart];\n    var second = getKnownActive(b)[axis.crossAxisStart];\n\n    if (isMovingForward) {\n      return first - second;\n    }\n\n    return second - first;\n  }).filter(function (droppable, index, array) {\n    return getKnownActive(droppable)[axis.crossAxisStart] === getKnownActive(array[0])[axis.crossAxisStart];\n  });\n\n  if (!candidates.length) {\n    return null;\n  }\n\n  if (candidates.length === 1) {\n    return candidates[0];\n  }\n\n  var contains = candidates.filter(function (droppable) {\n    var isWithinDroppable = isWithin(getKnownActive(droppable)[axis.start], getKnownActive(droppable)[axis.end]);\n    return isWithinDroppable(pageBorderBoxCenter[axis.line]);\n  });\n\n  if (contains.length === 1) {\n    return contains[0];\n  }\n\n  if (contains.length > 1) {\n    return contains.sort(function (a, b) {\n      return getKnownActive(a)[axis.start] - getKnownActive(b)[axis.start];\n    })[0];\n  }\n\n  return candidates.sort(function (a, b) {\n    var first = closest(pageBorderBoxCenter, getCorners(getKnownActive(a)));\n    var second = closest(pageBorderBoxCenter, getCorners(getKnownActive(b)));\n\n    if (first !== second) {\n      return first - second;\n    }\n\n    return getKnownActive(a)[axis.start] - getKnownActive(b)[axis.start];\n  })[0];\n});\n\nvar getCurrentPageBorderBoxCenter = function getCurrentPageBorderBoxCenter(draggable, afterCritical) {\n  var original = draggable.page.borderBox.center;\n  return didStartAfterCritical(draggable.descriptor.id, afterCritical) ? subtract(original, afterCritical.displacedBy.point) : original;\n};\nvar getCurrentPageBorderBox = function getCurrentPageBorderBox(draggable, afterCritical) {\n  var original = draggable.page.borderBox;\n  return didStartAfterCritical(draggable.descriptor.id, afterCritical) ? offsetByPosition(original, negate(afterCritical.displacedBy.point)) : original;\n};\n\nvar getClosestDraggable = (function (_ref) {\n  var pageBorderBoxCenter = _ref.pageBorderBoxCenter,\n      viewport = _ref.viewport,\n      destination = _ref.destination,\n      insideDestination = _ref.insideDestination,\n      afterCritical = _ref.afterCritical;\n  var sorted = insideDestination.filter(function (draggable) {\n    return isTotallyVisible({\n      target: getCurrentPageBorderBox(draggable, afterCritical),\n      destination: destination,\n      viewport: viewport.frame,\n      withDroppableDisplacement: true\n    });\n  }).sort(function (a, b) {\n    var distanceToA = distance(pageBorderBoxCenter, withDroppableDisplacement(destination, getCurrentPageBorderBoxCenter(a, afterCritical)));\n    var distanceToB = distance(pageBorderBoxCenter, withDroppableDisplacement(destination, getCurrentPageBorderBoxCenter(b, afterCritical)));\n\n    if (distanceToA < distanceToB) {\n      return -1;\n    }\n\n    if (distanceToB < distanceToA) {\n      return 1;\n    }\n\n    return a.descriptor.index - b.descriptor.index;\n  });\n  return sorted[0] || null;\n});\n\nvar getDisplacedBy = memoizeOne(function getDisplacedBy(axis, displaceBy) {\n  var displacement = displaceBy[axis.line];\n  return {\n    value: displacement,\n    point: patch(axis.line, displacement)\n  };\n});\n\nvar getRequiredGrowthForPlaceholder = function getRequiredGrowthForPlaceholder(droppable, placeholderSize, draggables) {\n  var axis = droppable.axis;\n\n  if (droppable.descriptor.mode === 'virtual') {\n    return patch(axis.line, placeholderSize[axis.line]);\n  }\n\n  var availableSpace = droppable.subject.page.contentBox[axis.size];\n  var insideDroppable = getDraggablesInsideDroppable(droppable.descriptor.id, draggables);\n  var spaceUsed = insideDroppable.reduce(function (sum, dimension) {\n    return sum + dimension.client.marginBox[axis.size];\n  }, 0);\n  var requiredSpace = spaceUsed + placeholderSize[axis.line];\n  var needsToGrowBy = requiredSpace - availableSpace;\n\n  if (needsToGrowBy <= 0) {\n    return null;\n  }\n\n  return patch(axis.line, needsToGrowBy);\n};\n\nvar withMaxScroll = function withMaxScroll(frame, max) {\n  return _extends({}, frame, {\n    scroll: _extends({}, frame.scroll, {\n      max: max\n    })\n  });\n};\n\nvar addPlaceholder = function addPlaceholder(droppable, draggable, draggables) {\n  var frame = droppable.frame;\n  !!isHomeOf(draggable, droppable) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Should not add placeholder space to home list') : invariant(false) : void 0;\n  !!droppable.subject.withPlaceholder ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot add placeholder size to a subject when it already has one') : invariant(false) : void 0;\n  var placeholderSize = getDisplacedBy(droppable.axis, draggable.displaceBy).point;\n  var requiredGrowth = getRequiredGrowthForPlaceholder(droppable, placeholderSize, draggables);\n  var added = {\n    placeholderSize: placeholderSize,\n    increasedBy: requiredGrowth,\n    oldFrameMaxScroll: droppable.frame ? droppable.frame.scroll.max : null\n  };\n\n  if (!frame) {\n    var _subject = getSubject({\n      page: droppable.subject.page,\n      withPlaceholder: added,\n      axis: droppable.axis,\n      frame: droppable.frame\n    });\n\n    return _extends({}, droppable, {\n      subject: _subject\n    });\n  }\n\n  var maxScroll = requiredGrowth ? add(frame.scroll.max, requiredGrowth) : frame.scroll.max;\n  var newFrame = withMaxScroll(frame, maxScroll);\n  var subject = getSubject({\n    page: droppable.subject.page,\n    withPlaceholder: added,\n    axis: droppable.axis,\n    frame: newFrame\n  });\n  return _extends({}, droppable, {\n    subject: subject,\n    frame: newFrame\n  });\n};\nvar removePlaceholder = function removePlaceholder(droppable) {\n  var added = droppable.subject.withPlaceholder;\n  !added ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot remove placeholder form subject when there was none') : invariant(false) : void 0;\n  var frame = droppable.frame;\n\n  if (!frame) {\n    var _subject2 = getSubject({\n      page: droppable.subject.page,\n      axis: droppable.axis,\n      frame: null,\n      withPlaceholder: null\n    });\n\n    return _extends({}, droppable, {\n      subject: _subject2\n    });\n  }\n\n  var oldMaxScroll = added.oldFrameMaxScroll;\n  !oldMaxScroll ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Expected droppable with frame to have old max frame scroll when removing placeholder') : invariant(false) : void 0;\n  var newFrame = withMaxScroll(frame, oldMaxScroll);\n  var subject = getSubject({\n    page: droppable.subject.page,\n    axis: droppable.axis,\n    frame: newFrame,\n    withPlaceholder: null\n  });\n  return _extends({}, droppable, {\n    subject: subject,\n    frame: newFrame\n  });\n};\n\nvar moveToNewDroppable = (function (_ref) {\n  var previousPageBorderBoxCenter = _ref.previousPageBorderBoxCenter,\n      moveRelativeTo = _ref.moveRelativeTo,\n      insideDestination = _ref.insideDestination,\n      draggable = _ref.draggable,\n      draggables = _ref.draggables,\n      destination = _ref.destination,\n      viewport = _ref.viewport,\n      afterCritical = _ref.afterCritical;\n\n  if (!moveRelativeTo) {\n    if (insideDestination.length) {\n      return null;\n    }\n\n    var proposed = {\n      displaced: emptyGroups,\n      displacedBy: noDisplacedBy,\n      at: {\n        type: 'REORDER',\n        destination: {\n          droppableId: destination.descriptor.id,\n          index: 0\n        }\n      }\n    };\n    var proposedPageBorderBoxCenter = getPageBorderBoxCenterFromImpact({\n      impact: proposed,\n      draggable: draggable,\n      droppable: destination,\n      draggables: draggables,\n      afterCritical: afterCritical\n    });\n    var withPlaceholder = isHomeOf(draggable, destination) ? destination : addPlaceholder(destination, draggable, draggables);\n    var isVisibleInNewLocation = isTotallyVisibleInNewLocation({\n      draggable: draggable,\n      destination: withPlaceholder,\n      newPageBorderBoxCenter: proposedPageBorderBoxCenter,\n      viewport: viewport.frame,\n      withDroppableDisplacement: false,\n      onlyOnMainAxis: true\n    });\n    return isVisibleInNewLocation ? proposed : null;\n  }\n\n  var isGoingBeforeTarget = Boolean(previousPageBorderBoxCenter[destination.axis.line] <= moveRelativeTo.page.borderBox.center[destination.axis.line]);\n\n  var proposedIndex = function () {\n    var relativeTo = moveRelativeTo.descriptor.index;\n\n    if (moveRelativeTo.descriptor.id === draggable.descriptor.id) {\n      return relativeTo;\n    }\n\n    if (isGoingBeforeTarget) {\n      return relativeTo;\n    }\n\n    return relativeTo + 1;\n  }();\n\n  var displacedBy = getDisplacedBy(destination.axis, draggable.displaceBy);\n  return calculateReorderImpact({\n    draggable: draggable,\n    insideDestination: insideDestination,\n    destination: destination,\n    viewport: viewport,\n    displacedBy: displacedBy,\n    last: emptyGroups,\n    index: proposedIndex\n  });\n});\n\nvar moveCrossAxis = (function (_ref) {\n  var isMovingForward = _ref.isMovingForward,\n      previousPageBorderBoxCenter = _ref.previousPageBorderBoxCenter,\n      draggable = _ref.draggable,\n      isOver = _ref.isOver,\n      draggables = _ref.draggables,\n      droppables = _ref.droppables,\n      viewport = _ref.viewport,\n      afterCritical = _ref.afterCritical;\n  var destination = getBestCrossAxisDroppable({\n    isMovingForward: isMovingForward,\n    pageBorderBoxCenter: previousPageBorderBoxCenter,\n    source: isOver,\n    droppables: droppables,\n    viewport: viewport\n  });\n\n  if (!destination) {\n    return null;\n  }\n\n  var insideDestination = getDraggablesInsideDroppable(destination.descriptor.id, draggables);\n  var moveRelativeTo = getClosestDraggable({\n    pageBorderBoxCenter: previousPageBorderBoxCenter,\n    viewport: viewport,\n    destination: destination,\n    insideDestination: insideDestination,\n    afterCritical: afterCritical\n  });\n  var impact = moveToNewDroppable({\n    previousPageBorderBoxCenter: previousPageBorderBoxCenter,\n    destination: destination,\n    draggable: draggable,\n    draggables: draggables,\n    moveRelativeTo: moveRelativeTo,\n    insideDestination: insideDestination,\n    viewport: viewport,\n    afterCritical: afterCritical\n  });\n\n  if (!impact) {\n    return null;\n  }\n\n  var pageBorderBoxCenter = getPageBorderBoxCenterFromImpact({\n    impact: impact,\n    draggable: draggable,\n    droppable: destination,\n    draggables: draggables,\n    afterCritical: afterCritical\n  });\n  var clientSelection = getClientFromPageBorderBoxCenter({\n    pageBorderBoxCenter: pageBorderBoxCenter,\n    draggable: draggable,\n    viewport: viewport\n  });\n  return {\n    clientSelection: clientSelection,\n    impact: impact,\n    scrollJumpRequest: null\n  };\n});\n\nvar whatIsDraggedOver = (function (impact) {\n  var at = impact.at;\n\n  if (!at) {\n    return null;\n  }\n\n  if (at.type === 'REORDER') {\n    return at.destination.droppableId;\n  }\n\n  return at.combine.droppableId;\n});\n\nvar getDroppableOver = function getDroppableOver(impact, droppables) {\n  var id = whatIsDraggedOver(impact);\n  return id ? droppables[id] : null;\n};\n\nvar moveInDirection = (function (_ref) {\n  var state = _ref.state,\n      type = _ref.type;\n  var isActuallyOver = getDroppableOver(state.impact, state.dimensions.droppables);\n  var isMainAxisMovementAllowed = Boolean(isActuallyOver);\n  var home = state.dimensions.droppables[state.critical.droppable.id];\n  var isOver = isActuallyOver || home;\n  var direction = isOver.axis.direction;\n  var isMovingOnMainAxis = direction === 'vertical' && (type === 'MOVE_UP' || type === 'MOVE_DOWN') || direction === 'horizontal' && (type === 'MOVE_LEFT' || type === 'MOVE_RIGHT');\n\n  if (isMovingOnMainAxis && !isMainAxisMovementAllowed) {\n    return null;\n  }\n\n  var isMovingForward = type === 'MOVE_DOWN' || type === 'MOVE_RIGHT';\n  var draggable = state.dimensions.draggables[state.critical.draggable.id];\n  var previousPageBorderBoxCenter = state.current.page.borderBoxCenter;\n  var _state$dimensions = state.dimensions,\n      draggables = _state$dimensions.draggables,\n      droppables = _state$dimensions.droppables;\n  return isMovingOnMainAxis ? moveToNextPlace({\n    isMovingForward: isMovingForward,\n    previousPageBorderBoxCenter: previousPageBorderBoxCenter,\n    draggable: draggable,\n    destination: isOver,\n    draggables: draggables,\n    viewport: state.viewport,\n    previousClientSelection: state.current.client.selection,\n    previousImpact: state.impact,\n    afterCritical: state.afterCritical\n  }) : moveCrossAxis({\n    isMovingForward: isMovingForward,\n    previousPageBorderBoxCenter: previousPageBorderBoxCenter,\n    draggable: draggable,\n    isOver: isOver,\n    draggables: draggables,\n    droppables: droppables,\n    viewport: state.viewport,\n    afterCritical: state.afterCritical\n  });\n});\n\nfunction isMovementAllowed(state) {\n  return state.phase === 'DRAGGING' || state.phase === 'COLLECTING';\n}\n\nfunction isPositionInFrame(frame) {\n  var isWithinVertical = isWithin(frame.top, frame.bottom);\n  var isWithinHorizontal = isWithin(frame.left, frame.right);\n  return function run(point) {\n    return isWithinVertical(point.y) && isWithinHorizontal(point.x);\n  };\n}\n\nfunction getHasOverlap(first, second) {\n  return first.left < second.right && first.right > second.left && first.top < second.bottom && first.bottom > second.top;\n}\n\nfunction getFurthestAway(_ref) {\n  var pageBorderBox = _ref.pageBorderBox,\n      draggable = _ref.draggable,\n      candidates = _ref.candidates;\n  var startCenter = draggable.page.borderBox.center;\n  var sorted = candidates.map(function (candidate) {\n    var axis = candidate.axis;\n    var target = patch(candidate.axis.line, pageBorderBox.center[axis.line], candidate.page.borderBox.center[axis.crossAxisLine]);\n    return {\n      id: candidate.descriptor.id,\n      distance: distance(startCenter, target)\n    };\n  }).sort(function (a, b) {\n    return b.distance - a.distance;\n  });\n  return sorted[0] ? sorted[0].id : null;\n}\n\nfunction getDroppableOver$1(_ref2) {\n  var pageBorderBox = _ref2.pageBorderBox,\n      draggable = _ref2.draggable,\n      droppables = _ref2.droppables;\n  var candidates = toDroppableList(droppables).filter(function (item) {\n    if (!item.isEnabled) {\n      return false;\n    }\n\n    var active = item.subject.active;\n\n    if (!active) {\n      return false;\n    }\n\n    if (!getHasOverlap(pageBorderBox, active)) {\n      return false;\n    }\n\n    if (isPositionInFrame(active)(pageBorderBox.center)) {\n      return true;\n    }\n\n    var axis = item.axis;\n    var childCenter = active.center[axis.crossAxisLine];\n    var crossAxisStart = pageBorderBox[axis.crossAxisStart];\n    var crossAxisEnd = pageBorderBox[axis.crossAxisEnd];\n    var isContained = isWithin(active[axis.crossAxisStart], active[axis.crossAxisEnd]);\n    var isStartContained = isContained(crossAxisStart);\n    var isEndContained = isContained(crossAxisEnd);\n\n    if (!isStartContained && !isEndContained) {\n      return true;\n    }\n\n    if (isStartContained) {\n      return crossAxisStart < childCenter;\n    }\n\n    return crossAxisEnd > childCenter;\n  });\n\n  if (!candidates.length) {\n    return null;\n  }\n\n  if (candidates.length === 1) {\n    return candidates[0].descriptor.id;\n  }\n\n  return getFurthestAway({\n    pageBorderBox: pageBorderBox,\n    draggable: draggable,\n    candidates: candidates\n  });\n}\n\nvar offsetRectByPosition = function offsetRectByPosition(rect, point) {\n  return getRect(offsetByPosition(rect, point));\n};\n\nvar withDroppableScroll = (function (droppable, area) {\n  var frame = droppable.frame;\n\n  if (!frame) {\n    return area;\n  }\n\n  return offsetRectByPosition(area, frame.scroll.diff.value);\n});\n\nfunction getIsDisplaced(_ref) {\n  var displaced = _ref.displaced,\n      id = _ref.id;\n  return Boolean(displaced.visible[id] || displaced.invisible[id]);\n}\n\nfunction atIndex(_ref) {\n  var draggable = _ref.draggable,\n      closest = _ref.closest,\n      inHomeList = _ref.inHomeList;\n\n  if (!closest) {\n    return null;\n  }\n\n  if (!inHomeList) {\n    return closest.descriptor.index;\n  }\n\n  if (closest.descriptor.index > draggable.descriptor.index) {\n    return closest.descriptor.index - 1;\n  }\n\n  return closest.descriptor.index;\n}\n\nvar getReorderImpact = (function (_ref2) {\n  var targetRect = _ref2.pageBorderBoxWithDroppableScroll,\n      draggable = _ref2.draggable,\n      destination = _ref2.destination,\n      insideDestination = _ref2.insideDestination,\n      last = _ref2.last,\n      viewport = _ref2.viewport,\n      afterCritical = _ref2.afterCritical;\n  var axis = destination.axis;\n  var displacedBy = getDisplacedBy(destination.axis, draggable.displaceBy);\n  var displacement = displacedBy.value;\n  var targetStart = targetRect[axis.start];\n  var targetEnd = targetRect[axis.end];\n  var withoutDragging = removeDraggableFromList(draggable, insideDestination);\n  var closest = find(withoutDragging, function (child) {\n    var id = child.descriptor.id;\n    var childCenter = child.page.borderBox.center[axis.line];\n    var didStartAfterCritical$1 = didStartAfterCritical(id, afterCritical);\n    var isDisplaced = getIsDisplaced({\n      displaced: last,\n      id: id\n    });\n\n    if (didStartAfterCritical$1) {\n      if (isDisplaced) {\n        return targetEnd <= childCenter;\n      }\n\n      return targetStart < childCenter - displacement;\n    }\n\n    if (isDisplaced) {\n      return targetEnd <= childCenter + displacement;\n    }\n\n    return targetStart < childCenter;\n  });\n  var newIndex = atIndex({\n    draggable: draggable,\n    closest: closest,\n    inHomeList: isHomeOf(draggable, destination)\n  });\n  return calculateReorderImpact({\n    draggable: draggable,\n    insideDestination: insideDestination,\n    destination: destination,\n    viewport: viewport,\n    last: last,\n    displacedBy: displacedBy,\n    index: newIndex\n  });\n});\n\nvar combineThresholdDivisor = 4;\nvar getCombineImpact = (function (_ref) {\n  var draggable = _ref.draggable,\n      targetRect = _ref.pageBorderBoxWithDroppableScroll,\n      previousImpact = _ref.previousImpact,\n      destination = _ref.destination,\n      insideDestination = _ref.insideDestination,\n      afterCritical = _ref.afterCritical;\n\n  if (!destination.isCombineEnabled) {\n    return null;\n  }\n\n  var axis = destination.axis;\n  var displacedBy = getDisplacedBy(destination.axis, draggable.displaceBy);\n  var displacement = displacedBy.value;\n  var targetStart = targetRect[axis.start];\n  var targetEnd = targetRect[axis.end];\n  var withoutDragging = removeDraggableFromList(draggable, insideDestination);\n  var combineWith = find(withoutDragging, function (child) {\n    var id = child.descriptor.id;\n    var childRect = child.page.borderBox;\n    var childSize = childRect[axis.size];\n    var threshold = childSize / combineThresholdDivisor;\n    var didStartAfterCritical$1 = didStartAfterCritical(id, afterCritical);\n    var isDisplaced = getIsDisplaced({\n      displaced: previousImpact.displaced,\n      id: id\n    });\n\n    if (didStartAfterCritical$1) {\n      if (isDisplaced) {\n        return targetEnd > childRect[axis.start] + threshold && targetEnd < childRect[axis.end] - threshold;\n      }\n\n      return targetStart > childRect[axis.start] - displacement + threshold && targetStart < childRect[axis.end] - displacement - threshold;\n    }\n\n    if (isDisplaced) {\n      return targetEnd > childRect[axis.start] + displacement + threshold && targetEnd < childRect[axis.end] + displacement - threshold;\n    }\n\n    return targetStart > childRect[axis.start] + threshold && targetStart < childRect[axis.end] - threshold;\n  });\n\n  if (!combineWith) {\n    return null;\n  }\n\n  var impact = {\n    displacedBy: displacedBy,\n    displaced: previousImpact.displaced,\n    at: {\n      type: 'COMBINE',\n      combine: {\n        draggableId: combineWith.descriptor.id,\n        droppableId: destination.descriptor.id\n      }\n    }\n  };\n  return impact;\n});\n\nvar getDragImpact = (function (_ref) {\n  var pageOffset = _ref.pageOffset,\n      draggable = _ref.draggable,\n      draggables = _ref.draggables,\n      droppables = _ref.droppables,\n      previousImpact = _ref.previousImpact,\n      viewport = _ref.viewport,\n      afterCritical = _ref.afterCritical;\n  var pageBorderBox = offsetRectByPosition(draggable.page.borderBox, pageOffset);\n  var destinationId = getDroppableOver$1({\n    pageBorderBox: pageBorderBox,\n    draggable: draggable,\n    droppables: droppables\n  });\n\n  if (!destinationId) {\n    return noImpact;\n  }\n\n  var destination = droppables[destinationId];\n  var insideDestination = getDraggablesInsideDroppable(destination.descriptor.id, draggables);\n  var pageBorderBoxWithDroppableScroll = withDroppableScroll(destination, pageBorderBox);\n  return getCombineImpact({\n    pageBorderBoxWithDroppableScroll: pageBorderBoxWithDroppableScroll,\n    draggable: draggable,\n    previousImpact: previousImpact,\n    destination: destination,\n    insideDestination: insideDestination,\n    afterCritical: afterCritical\n  }) || getReorderImpact({\n    pageBorderBoxWithDroppableScroll: pageBorderBoxWithDroppableScroll,\n    draggable: draggable,\n    destination: destination,\n    insideDestination: insideDestination,\n    last: previousImpact.displaced,\n    viewport: viewport,\n    afterCritical: afterCritical\n  });\n});\n\nvar patchDroppableMap = (function (droppables, updated) {\n  var _extends2;\n\n  return _extends({}, droppables, (_extends2 = {}, _extends2[updated.descriptor.id] = updated, _extends2));\n});\n\nvar clearUnusedPlaceholder = function clearUnusedPlaceholder(_ref) {\n  var previousImpact = _ref.previousImpact,\n      impact = _ref.impact,\n      droppables = _ref.droppables;\n  var last = whatIsDraggedOver(previousImpact);\n  var now = whatIsDraggedOver(impact);\n\n  if (!last) {\n    return droppables;\n  }\n\n  if (last === now) {\n    return droppables;\n  }\n\n  var lastDroppable = droppables[last];\n\n  if (!lastDroppable.subject.withPlaceholder) {\n    return droppables;\n  }\n\n  var updated = removePlaceholder(lastDroppable);\n  return patchDroppableMap(droppables, updated);\n};\n\nvar recomputePlaceholders = (function (_ref2) {\n  var draggable = _ref2.draggable,\n      draggables = _ref2.draggables,\n      droppables = _ref2.droppables,\n      previousImpact = _ref2.previousImpact,\n      impact = _ref2.impact;\n  var cleaned = clearUnusedPlaceholder({\n    previousImpact: previousImpact,\n    impact: impact,\n    droppables: droppables\n  });\n  var isOver = whatIsDraggedOver(impact);\n\n  if (!isOver) {\n    return cleaned;\n  }\n\n  var droppable = droppables[isOver];\n\n  if (isHomeOf(draggable, droppable)) {\n    return cleaned;\n  }\n\n  if (droppable.subject.withPlaceholder) {\n    return cleaned;\n  }\n\n  var patched = addPlaceholder(droppable, draggable, draggables);\n  return patchDroppableMap(cleaned, patched);\n});\n\nvar update = (function (_ref) {\n  var state = _ref.state,\n      forcedClientSelection = _ref.clientSelection,\n      forcedDimensions = _ref.dimensions,\n      forcedViewport = _ref.viewport,\n      forcedImpact = _ref.impact,\n      scrollJumpRequest = _ref.scrollJumpRequest;\n  var viewport = forcedViewport || state.viewport;\n  var dimensions = forcedDimensions || state.dimensions;\n  var clientSelection = forcedClientSelection || state.current.client.selection;\n  var offset = subtract(clientSelection, state.initial.client.selection);\n  var client = {\n    offset: offset,\n    selection: clientSelection,\n    borderBoxCenter: add(state.initial.client.borderBoxCenter, offset)\n  };\n  var page = {\n    selection: add(client.selection, viewport.scroll.current),\n    borderBoxCenter: add(client.borderBoxCenter, viewport.scroll.current),\n    offset: add(client.offset, viewport.scroll.diff.value)\n  };\n  var current = {\n    client: client,\n    page: page\n  };\n\n  if (state.phase === 'COLLECTING') {\n    return _extends({\n      phase: 'COLLECTING'\n    }, state, {\n      dimensions: dimensions,\n      viewport: viewport,\n      current: current\n    });\n  }\n\n  var draggable = dimensions.draggables[state.critical.draggable.id];\n  var newImpact = forcedImpact || getDragImpact({\n    pageOffset: page.offset,\n    draggable: draggable,\n    draggables: dimensions.draggables,\n    droppables: dimensions.droppables,\n    previousImpact: state.impact,\n    viewport: viewport,\n    afterCritical: state.afterCritical\n  });\n  var withUpdatedPlaceholders = recomputePlaceholders({\n    draggable: draggable,\n    impact: newImpact,\n    previousImpact: state.impact,\n    draggables: dimensions.draggables,\n    droppables: dimensions.droppables\n  });\n\n  var result = _extends({}, state, {\n    current: current,\n    dimensions: {\n      draggables: dimensions.draggables,\n      droppables: withUpdatedPlaceholders\n    },\n    impact: newImpact,\n    viewport: viewport,\n    scrollJumpRequest: scrollJumpRequest || null,\n    forceShouldAnimate: scrollJumpRequest ? false : null\n  });\n\n  return result;\n});\n\nfunction getDraggables$1(ids, draggables) {\n  return ids.map(function (id) {\n    return draggables[id];\n  });\n}\n\nvar recompute = (function (_ref) {\n  var impact = _ref.impact,\n      viewport = _ref.viewport,\n      draggables = _ref.draggables,\n      destination = _ref.destination,\n      forceShouldAnimate = _ref.forceShouldAnimate;\n  var last = impact.displaced;\n  var afterDragging = getDraggables$1(last.all, draggables);\n  var displaced = getDisplacementGroups({\n    afterDragging: afterDragging,\n    destination: destination,\n    displacedBy: impact.displacedBy,\n    viewport: viewport.frame,\n    forceShouldAnimate: forceShouldAnimate,\n    last: last\n  });\n  return _extends({}, impact, {\n    displaced: displaced\n  });\n});\n\nvar getClientBorderBoxCenter = (function (_ref) {\n  var impact = _ref.impact,\n      draggable = _ref.draggable,\n      droppable = _ref.droppable,\n      draggables = _ref.draggables,\n      viewport = _ref.viewport,\n      afterCritical = _ref.afterCritical;\n  var pageBorderBoxCenter = getPageBorderBoxCenterFromImpact({\n    impact: impact,\n    draggable: draggable,\n    draggables: draggables,\n    droppable: droppable,\n    afterCritical: afterCritical\n  });\n  return getClientFromPageBorderBoxCenter({\n    pageBorderBoxCenter: pageBorderBoxCenter,\n    draggable: draggable,\n    viewport: viewport\n  });\n});\n\nvar refreshSnap = (function (_ref) {\n  var state = _ref.state,\n      forcedDimensions = _ref.dimensions,\n      forcedViewport = _ref.viewport;\n  !(state.movementMode === 'SNAP') ? process.env.NODE_ENV !== \"production\" ? invariant(false) : invariant(false) : void 0;\n  var needsVisibilityCheck = state.impact;\n  var viewport = forcedViewport || state.viewport;\n  var dimensions = forcedDimensions || state.dimensions;\n  var draggables = dimensions.draggables,\n      droppables = dimensions.droppables;\n  var draggable = draggables[state.critical.draggable.id];\n  var isOver = whatIsDraggedOver(needsVisibilityCheck);\n  !isOver ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Must be over a destination in SNAP movement mode') : invariant(false) : void 0;\n  var destination = droppables[isOver];\n  var impact = recompute({\n    impact: needsVisibilityCheck,\n    viewport: viewport,\n    destination: destination,\n    draggables: draggables\n  });\n  var clientSelection = getClientBorderBoxCenter({\n    impact: impact,\n    draggable: draggable,\n    droppable: destination,\n    draggables: draggables,\n    viewport: viewport,\n    afterCritical: state.afterCritical\n  });\n  return update({\n    impact: impact,\n    clientSelection: clientSelection,\n    state: state,\n    dimensions: dimensions,\n    viewport: viewport\n  });\n});\n\nvar getHomeLocation = (function (descriptor) {\n  return {\n    index: descriptor.index,\n    droppableId: descriptor.droppableId\n  };\n});\n\nvar getLiftEffect = (function (_ref) {\n  var draggable = _ref.draggable,\n      home = _ref.home,\n      draggables = _ref.draggables,\n      viewport = _ref.viewport;\n  var displacedBy = getDisplacedBy(home.axis, draggable.displaceBy);\n  var insideHome = getDraggablesInsideDroppable(home.descriptor.id, draggables);\n  var rawIndex = insideHome.indexOf(draggable);\n  !(rawIndex !== -1) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Expected draggable to be inside home list') : invariant(false) : void 0;\n  var afterDragging = insideHome.slice(rawIndex + 1);\n  var effected = afterDragging.reduce(function (previous, item) {\n    previous[item.descriptor.id] = true;\n    return previous;\n  }, {});\n  var afterCritical = {\n    inVirtualList: home.descriptor.mode === 'virtual',\n    displacedBy: displacedBy,\n    effected: effected\n  };\n  var displaced = getDisplacementGroups({\n    afterDragging: afterDragging,\n    destination: home,\n    displacedBy: displacedBy,\n    last: null,\n    viewport: viewport.frame,\n    forceShouldAnimate: false\n  });\n  var impact = {\n    displaced: displaced,\n    displacedBy: displacedBy,\n    at: {\n      type: 'REORDER',\n      destination: getHomeLocation(draggable.descriptor)\n    }\n  };\n  return {\n    impact: impact,\n    afterCritical: afterCritical\n  };\n});\n\nvar patchDimensionMap = (function (dimensions, updated) {\n  return {\n    draggables: dimensions.draggables,\n    droppables: patchDroppableMap(dimensions.droppables, updated)\n  };\n});\n\nvar start = function start(key) {\n  if (process.env.NODE_ENV !== 'production') {\n    {\n      return;\n    }\n  }\n};\nvar finish = function finish(key) {\n  if (process.env.NODE_ENV !== 'production') {\n    {\n      return;\n    }\n  }\n};\n\nvar offsetDraggable = (function (_ref) {\n  var draggable = _ref.draggable,\n      offset$1 = _ref.offset,\n      initialWindowScroll = _ref.initialWindowScroll;\n  var client = offset(draggable.client, offset$1);\n  var page = withScroll(client, initialWindowScroll);\n\n  var moved = _extends({}, draggable, {\n    placeholder: _extends({}, draggable.placeholder, {\n      client: client\n    }),\n    client: client,\n    page: page\n  });\n\n  return moved;\n});\n\nvar getFrame = (function (droppable) {\n  var frame = droppable.frame;\n  !frame ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Expected Droppable to have a frame') : invariant(false) : void 0;\n  return frame;\n});\n\nvar adjustAdditionsForScrollChanges = (function (_ref) {\n  var additions = _ref.additions,\n      updatedDroppables = _ref.updatedDroppables,\n      viewport = _ref.viewport;\n  var windowScrollChange = viewport.scroll.diff.value;\n  return additions.map(function (draggable) {\n    var droppableId = draggable.descriptor.droppableId;\n    var modified = updatedDroppables[droppableId];\n    var frame = getFrame(modified);\n    var droppableScrollChange = frame.scroll.diff.value;\n    var totalChange = add(windowScrollChange, droppableScrollChange);\n    var moved = offsetDraggable({\n      draggable: draggable,\n      offset: totalChange,\n      initialWindowScroll: viewport.scroll.initial\n    });\n    return moved;\n  });\n});\n\nvar publishWhileDraggingInVirtual = (function (_ref) {\n  var state = _ref.state,\n      published = _ref.published;\n  start();\n  var withScrollChange = published.modified.map(function (update) {\n    var existing = state.dimensions.droppables[update.droppableId];\n    var scrolled = scrollDroppable(existing, update.scroll);\n    return scrolled;\n  });\n\n  var droppables = _extends({}, state.dimensions.droppables, {}, toDroppableMap(withScrollChange));\n\n  var updatedAdditions = toDraggableMap(adjustAdditionsForScrollChanges({\n    additions: published.additions,\n    updatedDroppables: droppables,\n    viewport: state.viewport\n  }));\n\n  var draggables = _extends({}, state.dimensions.draggables, {}, updatedAdditions);\n\n  published.removals.forEach(function (id) {\n    delete draggables[id];\n  });\n  var dimensions = {\n    droppables: droppables,\n    draggables: draggables\n  };\n  var wasOverId = whatIsDraggedOver(state.impact);\n  var wasOver = wasOverId ? dimensions.droppables[wasOverId] : null;\n  var draggable = dimensions.draggables[state.critical.draggable.id];\n  var home = dimensions.droppables[state.critical.droppable.id];\n\n  var _getLiftEffect = getLiftEffect({\n    draggable: draggable,\n    home: home,\n    draggables: draggables,\n    viewport: state.viewport\n  }),\n      onLiftImpact = _getLiftEffect.impact,\n      afterCritical = _getLiftEffect.afterCritical;\n\n  var previousImpact = wasOver && wasOver.isCombineEnabled ? state.impact : onLiftImpact;\n  var impact = getDragImpact({\n    pageOffset: state.current.page.offset,\n    draggable: dimensions.draggables[state.critical.draggable.id],\n    draggables: dimensions.draggables,\n    droppables: dimensions.droppables,\n    previousImpact: previousImpact,\n    viewport: state.viewport,\n    afterCritical: afterCritical\n  });\n  finish();\n\n  var draggingState = _extends({\n    phase: 'DRAGGING'\n  }, state, {\n    phase: 'DRAGGING',\n    impact: impact,\n    onLiftImpact: onLiftImpact,\n    dimensions: dimensions,\n    afterCritical: afterCritical,\n    forceShouldAnimate: false\n  });\n\n  if (state.phase === 'COLLECTING') {\n    return draggingState;\n  }\n\n  var dropPending = _extends({\n    phase: 'DROP_PENDING'\n  }, draggingState, {\n    phase: 'DROP_PENDING',\n    reason: state.reason,\n    isWaiting: false\n  });\n\n  return dropPending;\n});\n\nvar isSnapping = function isSnapping(state) {\n  return state.movementMode === 'SNAP';\n};\n\nvar postDroppableChange = function postDroppableChange(state, updated, isEnabledChanging) {\n  var dimensions = patchDimensionMap(state.dimensions, updated);\n\n  if (!isSnapping(state) || isEnabledChanging) {\n    return update({\n      state: state,\n      dimensions: dimensions\n    });\n  }\n\n  return refreshSnap({\n    state: state,\n    dimensions: dimensions\n  });\n};\n\nfunction removeScrollJumpRequest(state) {\n  if (state.isDragging && state.movementMode === 'SNAP') {\n    return _extends({\n      phase: 'DRAGGING'\n    }, state, {\n      scrollJumpRequest: null\n    });\n  }\n\n  return state;\n}\n\nvar idle = {\n  phase: 'IDLE',\n  completed: null,\n  shouldFlush: false\n};\nvar reducer = (function (state, action) {\n  if (state === void 0) {\n    state = idle;\n  }\n\n  if (action.type === 'FLUSH') {\n    return _extends({}, idle, {\n      shouldFlush: true\n    });\n  }\n\n  if (action.type === 'INITIAL_PUBLISH') {\n    !(state.phase === 'IDLE') ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'INITIAL_PUBLISH must come after a IDLE phase') : invariant(false) : void 0;\n    var _action$payload = action.payload,\n        critical = _action$payload.critical,\n        clientSelection = _action$payload.clientSelection,\n        viewport = _action$payload.viewport,\n        dimensions = _action$payload.dimensions,\n        movementMode = _action$payload.movementMode;\n    var draggable = dimensions.draggables[critical.draggable.id];\n    var home = dimensions.droppables[critical.droppable.id];\n    var client = {\n      selection: clientSelection,\n      borderBoxCenter: draggable.client.borderBox.center,\n      offset: origin\n    };\n    var initial = {\n      client: client,\n      page: {\n        selection: add(client.selection, viewport.scroll.initial),\n        borderBoxCenter: add(client.selection, viewport.scroll.initial),\n        offset: add(client.selection, viewport.scroll.diff.value)\n      }\n    };\n    var isWindowScrollAllowed = toDroppableList(dimensions.droppables).every(function (item) {\n      return !item.isFixedOnPage;\n    });\n\n    var _getLiftEffect = getLiftEffect({\n      draggable: draggable,\n      home: home,\n      draggables: dimensions.draggables,\n      viewport: viewport\n    }),\n        impact = _getLiftEffect.impact,\n        afterCritical = _getLiftEffect.afterCritical;\n\n    var result = {\n      phase: 'DRAGGING',\n      isDragging: true,\n      critical: critical,\n      movementMode: movementMode,\n      dimensions: dimensions,\n      initial: initial,\n      current: initial,\n      isWindowScrollAllowed: isWindowScrollAllowed,\n      impact: impact,\n      afterCritical: afterCritical,\n      onLiftImpact: impact,\n      viewport: viewport,\n      scrollJumpRequest: null,\n      forceShouldAnimate: null\n    };\n    return result;\n  }\n\n  if (action.type === 'COLLECTION_STARTING') {\n    if (state.phase === 'COLLECTING' || state.phase === 'DROP_PENDING') {\n      return state;\n    }\n\n    !(state.phase === 'DRAGGING') ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Collection cannot start from phase \" + state.phase) : invariant(false) : void 0;\n\n    var _result = _extends({\n      phase: 'COLLECTING'\n    }, state, {\n      phase: 'COLLECTING'\n    });\n\n    return _result;\n  }\n\n  if (action.type === 'PUBLISH_WHILE_DRAGGING') {\n    !(state.phase === 'COLLECTING' || state.phase === 'DROP_PENDING') ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Unexpected \" + action.type + \" received in phase \" + state.phase) : invariant(false) : void 0;\n    return publishWhileDraggingInVirtual({\n      state: state,\n      published: action.payload\n    });\n  }\n\n  if (action.type === 'MOVE') {\n    if (state.phase === 'DROP_PENDING') {\n      return state;\n    }\n\n    !isMovementAllowed(state) ? process.env.NODE_ENV !== \"production\" ? invariant(false, action.type + \" not permitted in phase \" + state.phase) : invariant(false) : void 0;\n    var _clientSelection = action.payload.client;\n\n    if (isEqual(_clientSelection, state.current.client.selection)) {\n      return state;\n    }\n\n    return update({\n      state: state,\n      clientSelection: _clientSelection,\n      impact: isSnapping(state) ? state.impact : null\n    });\n  }\n\n  if (action.type === 'UPDATE_DROPPABLE_SCROLL') {\n    if (state.phase === 'DROP_PENDING') {\n      return removeScrollJumpRequest(state);\n    }\n\n    if (state.phase === 'COLLECTING') {\n      return removeScrollJumpRequest(state);\n    }\n\n    !isMovementAllowed(state) ? process.env.NODE_ENV !== \"production\" ? invariant(false, action.type + \" not permitted in phase \" + state.phase) : invariant(false) : void 0;\n    var _action$payload2 = action.payload,\n        id = _action$payload2.id,\n        newScroll = _action$payload2.newScroll;\n    var target = state.dimensions.droppables[id];\n\n    if (!target) {\n      return state;\n    }\n\n    var scrolled = scrollDroppable(target, newScroll);\n    return postDroppableChange(state, scrolled, false);\n  }\n\n  if (action.type === 'UPDATE_DROPPABLE_IS_ENABLED') {\n    if (state.phase === 'DROP_PENDING') {\n      return state;\n    }\n\n    !isMovementAllowed(state) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Attempting to move in an unsupported phase \" + state.phase) : invariant(false) : void 0;\n    var _action$payload3 = action.payload,\n        _id = _action$payload3.id,\n        isEnabled = _action$payload3.isEnabled;\n    var _target = state.dimensions.droppables[_id];\n    !_target ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Cannot find Droppable[id: \" + _id + \"] to toggle its enabled state\") : invariant(false) : void 0;\n    !(_target.isEnabled !== isEnabled) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Trying to set droppable isEnabled to \" + String(isEnabled) + \"\\n      but it is already \" + String(_target.isEnabled)) : invariant(false) : void 0;\n\n    var updated = _extends({}, _target, {\n      isEnabled: isEnabled\n    });\n\n    return postDroppableChange(state, updated, true);\n  }\n\n  if (action.type === 'UPDATE_DROPPABLE_IS_COMBINE_ENABLED') {\n    if (state.phase === 'DROP_PENDING') {\n      return state;\n    }\n\n    !isMovementAllowed(state) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Attempting to move in an unsupported phase \" + state.phase) : invariant(false) : void 0;\n    var _action$payload4 = action.payload,\n        _id2 = _action$payload4.id,\n        isCombineEnabled = _action$payload4.isCombineEnabled;\n    var _target2 = state.dimensions.droppables[_id2];\n    !_target2 ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Cannot find Droppable[id: \" + _id2 + \"] to toggle its isCombineEnabled state\") : invariant(false) : void 0;\n    !(_target2.isCombineEnabled !== isCombineEnabled) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Trying to set droppable isCombineEnabled to \" + String(isCombineEnabled) + \"\\n      but it is already \" + String(_target2.isCombineEnabled)) : invariant(false) : void 0;\n\n    var _updated = _extends({}, _target2, {\n      isCombineEnabled: isCombineEnabled\n    });\n\n    return postDroppableChange(state, _updated, true);\n  }\n\n  if (action.type === 'MOVE_BY_WINDOW_SCROLL') {\n    if (state.phase === 'DROP_PENDING' || state.phase === 'DROP_ANIMATING') {\n      return state;\n    }\n\n    !isMovementAllowed(state) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Cannot move by window in phase \" + state.phase) : invariant(false) : void 0;\n    !state.isWindowScrollAllowed ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Window scrolling is currently not supported for fixed lists') : invariant(false) : void 0;\n    var _newScroll = action.payload.newScroll;\n\n    if (isEqual(state.viewport.scroll.current, _newScroll)) {\n      return removeScrollJumpRequest(state);\n    }\n\n    var _viewport = scrollViewport(state.viewport, _newScroll);\n\n    if (isSnapping(state)) {\n      return refreshSnap({\n        state: state,\n        viewport: _viewport\n      });\n    }\n\n    return update({\n      state: state,\n      viewport: _viewport\n    });\n  }\n\n  if (action.type === 'UPDATE_VIEWPORT_MAX_SCROLL') {\n    if (!isMovementAllowed(state)) {\n      return state;\n    }\n\n    var maxScroll = action.payload.maxScroll;\n\n    if (isEqual(maxScroll, state.viewport.scroll.max)) {\n      return state;\n    }\n\n    var withMaxScroll = _extends({}, state.viewport, {\n      scroll: _extends({}, state.viewport.scroll, {\n        max: maxScroll\n      })\n    });\n\n    return _extends({\n      phase: 'DRAGGING'\n    }, state, {\n      viewport: withMaxScroll\n    });\n  }\n\n  if (action.type === 'MOVE_UP' || action.type === 'MOVE_DOWN' || action.type === 'MOVE_LEFT' || action.type === 'MOVE_RIGHT') {\n    if (state.phase === 'COLLECTING' || state.phase === 'DROP_PENDING') {\n      return state;\n    }\n\n    !(state.phase === 'DRAGGING') ? process.env.NODE_ENV !== \"production\" ? invariant(false, action.type + \" received while not in DRAGGING phase\") : invariant(false) : void 0;\n\n    var _result2 = moveInDirection({\n      state: state,\n      type: action.type\n    });\n\n    if (!_result2) {\n      return state;\n    }\n\n    return update({\n      state: state,\n      impact: _result2.impact,\n      clientSelection: _result2.clientSelection,\n      scrollJumpRequest: _result2.scrollJumpRequest\n    });\n  }\n\n  if (action.type === 'DROP_PENDING') {\n    var reason = action.payload.reason;\n    !(state.phase === 'COLLECTING') ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Can only move into the DROP_PENDING phase from the COLLECTING phase') : invariant(false) : void 0;\n\n    var newState = _extends({\n      phase: 'DROP_PENDING'\n    }, state, {\n      phase: 'DROP_PENDING',\n      isWaiting: true,\n      reason: reason\n    });\n\n    return newState;\n  }\n\n  if (action.type === 'DROP_ANIMATE') {\n    var _action$payload5 = action.payload,\n        completed = _action$payload5.completed,\n        dropDuration = _action$payload5.dropDuration,\n        newHomeClientOffset = _action$payload5.newHomeClientOffset;\n    !(state.phase === 'DRAGGING' || state.phase === 'DROP_PENDING') ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Cannot animate drop from phase \" + state.phase) : invariant(false) : void 0;\n    var _result3 = {\n      phase: 'DROP_ANIMATING',\n      completed: completed,\n      dropDuration: dropDuration,\n      newHomeClientOffset: newHomeClientOffset,\n      dimensions: state.dimensions\n    };\n    return _result3;\n  }\n\n  if (action.type === 'DROP_COMPLETE') {\n    var _completed = action.payload.completed;\n    return {\n      phase: 'IDLE',\n      completed: _completed,\n      shouldFlush: false\n    };\n  }\n\n  return state;\n});\n\nvar beforeInitialCapture = function beforeInitialCapture(args) {\n  return {\n    type: 'BEFORE_INITIAL_CAPTURE',\n    payload: args\n  };\n};\nvar lift = function lift(args) {\n  return {\n    type: 'LIFT',\n    payload: args\n  };\n};\nvar initialPublish = function initialPublish(args) {\n  return {\n    type: 'INITIAL_PUBLISH',\n    payload: args\n  };\n};\nvar publishWhileDragging = function publishWhileDragging(args) {\n  return {\n    type: 'PUBLISH_WHILE_DRAGGING',\n    payload: args\n  };\n};\nvar collectionStarting = function collectionStarting() {\n  return {\n    type: 'COLLECTION_STARTING',\n    payload: null\n  };\n};\nvar updateDroppableScroll = function updateDroppableScroll(args) {\n  return {\n    type: 'UPDATE_DROPPABLE_SCROLL',\n    payload: args\n  };\n};\nvar updateDroppableIsEnabled = function updateDroppableIsEnabled(args) {\n  return {\n    type: 'UPDATE_DROPPABLE_IS_ENABLED',\n    payload: args\n  };\n};\nvar updateDroppableIsCombineEnabled = function updateDroppableIsCombineEnabled(args) {\n  return {\n    type: 'UPDATE_DROPPABLE_IS_COMBINE_ENABLED',\n    payload: args\n  };\n};\nvar move = function move(args) {\n  return {\n    type: 'MOVE',\n    payload: args\n  };\n};\nvar moveByWindowScroll = function moveByWindowScroll(args) {\n  return {\n    type: 'MOVE_BY_WINDOW_SCROLL',\n    payload: args\n  };\n};\nvar updateViewportMaxScroll = function updateViewportMaxScroll(args) {\n  return {\n    type: 'UPDATE_VIEWPORT_MAX_SCROLL',\n    payload: args\n  };\n};\nvar moveUp = function moveUp() {\n  return {\n    type: 'MOVE_UP',\n    payload: null\n  };\n};\nvar moveDown = function moveDown() {\n  return {\n    type: 'MOVE_DOWN',\n    payload: null\n  };\n};\nvar moveRight = function moveRight() {\n  return {\n    type: 'MOVE_RIGHT',\n    payload: null\n  };\n};\nvar moveLeft = function moveLeft() {\n  return {\n    type: 'MOVE_LEFT',\n    payload: null\n  };\n};\nvar flush = function flush() {\n  return {\n    type: 'FLUSH',\n    payload: null\n  };\n};\nvar animateDrop = function animateDrop(args) {\n  return {\n    type: 'DROP_ANIMATE',\n    payload: args\n  };\n};\nvar completeDrop = function completeDrop(args) {\n  return {\n    type: 'DROP_COMPLETE',\n    payload: args\n  };\n};\nvar drop = function drop(args) {\n  return {\n    type: 'DROP',\n    payload: args\n  };\n};\nvar dropPending = function dropPending(args) {\n  return {\n    type: 'DROP_PENDING',\n    payload: args\n  };\n};\nvar dropAnimationFinished = function dropAnimationFinished() {\n  return {\n    type: 'DROP_ANIMATION_FINISHED',\n    payload: null\n  };\n};\n\nfunction checkIndexes(insideDestination) {\n  if (insideDestination.length <= 1) {\n    return;\n  }\n\n  var indexes = insideDestination.map(function (d) {\n    return d.descriptor.index;\n  });\n  var errors = {};\n\n  for (var i = 1; i < indexes.length; i++) {\n    var current = indexes[i];\n    var previous = indexes[i - 1];\n\n    if (current !== previous + 1) {\n      errors[current] = true;\n    }\n  }\n\n  if (!Object.keys(errors).length) {\n    return;\n  }\n\n  var formatted = indexes.map(function (index) {\n    var hasError = Boolean(errors[index]);\n    return hasError ? \"[\\uD83D\\uDD25\" + index + \"]\" : \"\" + index;\n  }).join(', ');\n  process.env.NODE_ENV !== \"production\" ? warning(\"\\n    Detected non-consecutive <Draggable /> indexes.\\n\\n    (This can cause unexpected bugs)\\n\\n    \" + formatted + \"\\n  \") : void 0;\n}\n\nfunction validateDimensions(critical, dimensions) {\n  if (process.env.NODE_ENV !== 'production') {\n    var insideDestination = getDraggablesInsideDroppable(critical.droppable.id, dimensions.draggables);\n    checkIndexes(insideDestination);\n  }\n}\n\nvar lift$1 = (function (marshal) {\n  return function (_ref) {\n    var getState = _ref.getState,\n        dispatch = _ref.dispatch;\n    return function (next) {\n      return function (action) {\n        if (action.type !== 'LIFT') {\n          next(action);\n          return;\n        }\n\n        var _action$payload = action.payload,\n            id = _action$payload.id,\n            clientSelection = _action$payload.clientSelection,\n            movementMode = _action$payload.movementMode;\n        var initial = getState();\n\n        if (initial.phase === 'DROP_ANIMATING') {\n          dispatch(completeDrop({\n            completed: initial.completed\n          }));\n        }\n\n        !(getState().phase === 'IDLE') ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Unexpected phase to start a drag') : invariant(false) : void 0;\n        dispatch(flush());\n        dispatch(beforeInitialCapture({\n          draggableId: id,\n          movementMode: movementMode\n        }));\n        var scrollOptions = {\n          shouldPublishImmediately: movementMode === 'SNAP'\n        };\n        var request = {\n          draggableId: id,\n          scrollOptions: scrollOptions\n        };\n\n        var _marshal$startPublish = marshal.startPublishing(request),\n            critical = _marshal$startPublish.critical,\n            dimensions = _marshal$startPublish.dimensions,\n            viewport = _marshal$startPublish.viewport;\n\n        validateDimensions(critical, dimensions);\n        dispatch(initialPublish({\n          critical: critical,\n          dimensions: dimensions,\n          clientSelection: clientSelection,\n          movementMode: movementMode,\n          viewport: viewport\n        }));\n      };\n    };\n  };\n});\n\nvar style = (function (marshal) {\n  return function () {\n    return function (next) {\n      return function (action) {\n        if (action.type === 'INITIAL_PUBLISH') {\n          marshal.dragging();\n        }\n\n        if (action.type === 'DROP_ANIMATE') {\n          marshal.dropping(action.payload.completed.result.reason);\n        }\n\n        if (action.type === 'FLUSH' || action.type === 'DROP_COMPLETE') {\n          marshal.resting();\n        }\n\n        next(action);\n      };\n    };\n  };\n});\n\nvar curves = {\n  outOfTheWay: 'cubic-bezier(0.2, 0, 0, 1)',\n  drop: 'cubic-bezier(.2,1,.1,1)'\n};\nvar combine = {\n  opacity: {\n    drop: 0,\n    combining: 0.7\n  },\n  scale: {\n    drop: 0.75\n  }\n};\nvar timings = {\n  outOfTheWay: 0.2,\n  minDropTime: 0.33,\n  maxDropTime: 0.55\n};\nvar outOfTheWayTiming = timings.outOfTheWay + \"s \" + curves.outOfTheWay;\nvar transitions = {\n  fluid: \"opacity \" + outOfTheWayTiming,\n  snap: \"transform \" + outOfTheWayTiming + \", opacity \" + outOfTheWayTiming,\n  drop: function drop(duration) {\n    var timing = duration + \"s \" + curves.drop;\n    return \"transform \" + timing + \", opacity \" + timing;\n  },\n  outOfTheWay: \"transform \" + outOfTheWayTiming,\n  placeholder: \"height \" + outOfTheWayTiming + \", width \" + outOfTheWayTiming + \", margin \" + outOfTheWayTiming\n};\n\nvar moveTo = function moveTo(offset) {\n  return isEqual(offset, origin) ? null : \"translate(\" + offset.x + \"px, \" + offset.y + \"px)\";\n};\n\nvar transforms = {\n  moveTo: moveTo,\n  drop: function drop(offset, isCombining) {\n    var translate = moveTo(offset);\n\n    if (!translate) {\n      return null;\n    }\n\n    if (!isCombining) {\n      return translate;\n    }\n\n    return translate + \" scale(\" + combine.scale.drop + \")\";\n  }\n};\n\nvar minDropTime = timings.minDropTime,\n    maxDropTime = timings.maxDropTime;\nvar dropTimeRange = maxDropTime - minDropTime;\nvar maxDropTimeAtDistance = 1500;\nvar cancelDropModifier = 0.6;\nvar getDropDuration = (function (_ref) {\n  var current = _ref.current,\n      destination = _ref.destination,\n      reason = _ref.reason;\n  var distance$1 = distance(current, destination);\n\n  if (distance$1 <= 0) {\n    return minDropTime;\n  }\n\n  if (distance$1 >= maxDropTimeAtDistance) {\n    return maxDropTime;\n  }\n\n  var percentage = distance$1 / maxDropTimeAtDistance;\n  var duration = minDropTime + dropTimeRange * percentage;\n  var withDuration = reason === 'CANCEL' ? duration * cancelDropModifier : duration;\n  return Number(withDuration.toFixed(2));\n});\n\nvar getNewHomeClientOffset = (function (_ref) {\n  var impact = _ref.impact,\n      draggable = _ref.draggable,\n      dimensions = _ref.dimensions,\n      viewport = _ref.viewport,\n      afterCritical = _ref.afterCritical;\n  var draggables = dimensions.draggables,\n      droppables = dimensions.droppables;\n  var droppableId = whatIsDraggedOver(impact);\n  var destination = droppableId ? droppables[droppableId] : null;\n  var home = droppables[draggable.descriptor.droppableId];\n  var newClientCenter = getClientBorderBoxCenter({\n    impact: impact,\n    draggable: draggable,\n    draggables: draggables,\n    afterCritical: afterCritical,\n    droppable: destination || home,\n    viewport: viewport\n  });\n  var offset = subtract(newClientCenter, draggable.client.borderBox.center);\n  return offset;\n});\n\nvar getDropImpact = (function (_ref) {\n  var draggables = _ref.draggables,\n      reason = _ref.reason,\n      lastImpact = _ref.lastImpact,\n      home = _ref.home,\n      viewport = _ref.viewport,\n      onLiftImpact = _ref.onLiftImpact;\n\n  if (!lastImpact.at || reason !== 'DROP') {\n    var recomputedHomeImpact = recompute({\n      draggables: draggables,\n      impact: onLiftImpact,\n      destination: home,\n      viewport: viewport,\n      forceShouldAnimate: true\n    });\n    return {\n      impact: recomputedHomeImpact,\n      didDropInsideDroppable: false\n    };\n  }\n\n  if (lastImpact.at.type === 'REORDER') {\n    return {\n      impact: lastImpact,\n      didDropInsideDroppable: true\n    };\n  }\n\n  var withoutMovement = _extends({}, lastImpact, {\n    displaced: emptyGroups\n  });\n\n  return {\n    impact: withoutMovement,\n    didDropInsideDroppable: true\n  };\n});\n\nvar drop$1 = (function (_ref) {\n  var getState = _ref.getState,\n      dispatch = _ref.dispatch;\n  return function (next) {\n    return function (action) {\n      if (action.type !== 'DROP') {\n        next(action);\n        return;\n      }\n\n      var state = getState();\n      var reason = action.payload.reason;\n\n      if (state.phase === 'COLLECTING') {\n        dispatch(dropPending({\n          reason: reason\n        }));\n        return;\n      }\n\n      if (state.phase === 'IDLE') {\n        return;\n      }\n\n      var isWaitingForDrop = state.phase === 'DROP_PENDING' && state.isWaiting;\n      !!isWaitingForDrop ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'A DROP action occurred while DROP_PENDING and still waiting') : invariant(false) : void 0;\n      !(state.phase === 'DRAGGING' || state.phase === 'DROP_PENDING') ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Cannot drop in phase: \" + state.phase) : invariant(false) : void 0;\n      var critical = state.critical;\n      var dimensions = state.dimensions;\n      var draggable = dimensions.draggables[state.critical.draggable.id];\n\n      var _getDropImpact = getDropImpact({\n        reason: reason,\n        lastImpact: state.impact,\n        afterCritical: state.afterCritical,\n        onLiftImpact: state.onLiftImpact,\n        home: state.dimensions.droppables[state.critical.droppable.id],\n        viewport: state.viewport,\n        draggables: state.dimensions.draggables\n      }),\n          impact = _getDropImpact.impact,\n          didDropInsideDroppable = _getDropImpact.didDropInsideDroppable;\n\n      var destination = didDropInsideDroppable ? tryGetDestination(impact) : null;\n      var combine = didDropInsideDroppable ? tryGetCombine(impact) : null;\n      var source = {\n        index: critical.draggable.index,\n        droppableId: critical.droppable.id\n      };\n      var result = {\n        draggableId: draggable.descriptor.id,\n        type: draggable.descriptor.type,\n        source: source,\n        reason: reason,\n        mode: state.movementMode,\n        destination: destination,\n        combine: combine\n      };\n      var newHomeClientOffset = getNewHomeClientOffset({\n        impact: impact,\n        draggable: draggable,\n        dimensions: dimensions,\n        viewport: state.viewport,\n        afterCritical: state.afterCritical\n      });\n      var completed = {\n        critical: state.critical,\n        afterCritical: state.afterCritical,\n        result: result,\n        impact: impact\n      };\n      var isAnimationRequired = !isEqual(state.current.client.offset, newHomeClientOffset) || Boolean(result.combine);\n\n      if (!isAnimationRequired) {\n        dispatch(completeDrop({\n          completed: completed\n        }));\n        return;\n      }\n\n      var dropDuration = getDropDuration({\n        current: state.current.client.offset,\n        destination: newHomeClientOffset,\n        reason: reason\n      });\n      var args = {\n        newHomeClientOffset: newHomeClientOffset,\n        dropDuration: dropDuration,\n        completed: completed\n      };\n      dispatch(animateDrop(args));\n    };\n  };\n});\n\nvar getWindowScroll = (function () {\n  return {\n    x: window.pageXOffset,\n    y: window.pageYOffset\n  };\n});\n\nfunction getWindowScrollBinding(update) {\n  return {\n    eventName: 'scroll',\n    options: {\n      passive: true,\n      capture: false\n    },\n    fn: function fn(event) {\n      if (event.target !== window && event.target !== window.document) {\n        return;\n      }\n\n      update();\n    }\n  };\n}\n\nfunction getScrollListener(_ref) {\n  var onWindowScroll = _ref.onWindowScroll;\n\n  function updateScroll() {\n    onWindowScroll(getWindowScroll());\n  }\n\n  var scheduled = rafSchd(updateScroll);\n  var binding = getWindowScrollBinding(scheduled);\n  var unbind = noop;\n\n  function isActive() {\n    return unbind !== noop;\n  }\n\n  function start() {\n    !!isActive() ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot start scroll listener when already active') : invariant(false) : void 0;\n    unbind = bindEvents(window, [binding]);\n  }\n\n  function stop() {\n    !isActive() ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot stop scroll listener when not active') : invariant(false) : void 0;\n    scheduled.cancel();\n    unbind();\n    unbind = noop;\n  }\n\n  return {\n    start: start,\n    stop: stop,\n    isActive: isActive\n  };\n}\n\nvar shouldEnd = function shouldEnd(action) {\n  return action.type === 'DROP_COMPLETE' || action.type === 'DROP_ANIMATE' || action.type === 'FLUSH';\n};\n\nvar scrollListener = (function (store) {\n  var listener = getScrollListener({\n    onWindowScroll: function onWindowScroll(newScroll) {\n      store.dispatch(moveByWindowScroll({\n        newScroll: newScroll\n      }));\n    }\n  });\n  return function (next) {\n    return function (action) {\n      if (!listener.isActive() && action.type === 'INITIAL_PUBLISH') {\n        listener.start();\n      }\n\n      if (listener.isActive() && shouldEnd(action)) {\n        listener.stop();\n      }\n\n      next(action);\n    };\n  };\n});\n\nvar getExpiringAnnounce = (function (announce) {\n  var wasCalled = false;\n  var isExpired = false;\n  var timeoutId = setTimeout(function () {\n    isExpired = true;\n  });\n\n  var result = function result(message) {\n    if (wasCalled) {\n      process.env.NODE_ENV !== \"production\" ? warning('Announcement already made. Not making a second announcement') : void 0;\n      return;\n    }\n\n    if (isExpired) {\n      process.env.NODE_ENV !== \"production\" ? warning(\"\\n        Announcements cannot be made asynchronously.\\n        Default message has already been announced.\\n      \") : void 0;\n      return;\n    }\n\n    wasCalled = true;\n    announce(message);\n    clearTimeout(timeoutId);\n  };\n\n  result.wasCalled = function () {\n    return wasCalled;\n  };\n\n  return result;\n});\n\nvar getAsyncMarshal = (function () {\n  var entries = [];\n\n  var execute = function execute(timerId) {\n    var index = findIndex(entries, function (item) {\n      return item.timerId === timerId;\n    });\n    !(index !== -1) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Could not find timer') : invariant(false) : void 0;\n\n    var _entries$splice = entries.splice(index, 1),\n        entry = _entries$splice[0];\n\n    entry.callback();\n  };\n\n  var add = function add(fn) {\n    var timerId = setTimeout(function () {\n      return execute(timerId);\n    });\n    var entry = {\n      timerId: timerId,\n      callback: fn\n    };\n    entries.push(entry);\n  };\n\n  var flush = function flush() {\n    if (!entries.length) {\n      return;\n    }\n\n    var shallow = [].concat(entries);\n    entries.length = 0;\n    shallow.forEach(function (entry) {\n      clearTimeout(entry.timerId);\n      entry.callback();\n    });\n  };\n\n  return {\n    add: add,\n    flush: flush\n  };\n});\n\nvar areLocationsEqual = function areLocationsEqual(first, second) {\n  if (first == null && second == null) {\n    return true;\n  }\n\n  if (first == null || second == null) {\n    return false;\n  }\n\n  return first.droppableId === second.droppableId && first.index === second.index;\n};\nvar isCombineEqual = function isCombineEqual(first, second) {\n  if (first == null && second == null) {\n    return true;\n  }\n\n  if (first == null || second == null) {\n    return false;\n  }\n\n  return first.draggableId === second.draggableId && first.droppableId === second.droppableId;\n};\nvar isCriticalEqual = function isCriticalEqual(first, second) {\n  if (first === second) {\n    return true;\n  }\n\n  var isDraggableEqual = first.draggable.id === second.draggable.id && first.draggable.droppableId === second.draggable.droppableId && first.draggable.type === second.draggable.type && first.draggable.index === second.draggable.index;\n  var isDroppableEqual = first.droppable.id === second.droppable.id && first.droppable.type === second.droppable.type;\n  return isDraggableEqual && isDroppableEqual;\n};\n\nvar withTimings = function withTimings(key, fn) {\n  start();\n  fn();\n  finish();\n};\n\nvar getDragStart = function getDragStart(critical, mode) {\n  return {\n    draggableId: critical.draggable.id,\n    type: critical.droppable.type,\n    source: {\n      droppableId: critical.droppable.id,\n      index: critical.draggable.index\n    },\n    mode: mode\n  };\n};\n\nvar execute = function execute(responder, data, announce, getDefaultMessage) {\n  if (!responder) {\n    announce(getDefaultMessage(data));\n    return;\n  }\n\n  var willExpire = getExpiringAnnounce(announce);\n  var provided = {\n    announce: willExpire\n  };\n  responder(data, provided);\n\n  if (!willExpire.wasCalled()) {\n    announce(getDefaultMessage(data));\n  }\n};\n\nvar getPublisher = (function (getResponders, announce) {\n  var asyncMarshal = getAsyncMarshal();\n  var dragging = null;\n\n  var beforeCapture = function beforeCapture(draggableId, mode) {\n    !!dragging ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot fire onBeforeCapture as a drag start has already been published') : invariant(false) : void 0;\n    withTimings('onBeforeCapture', function () {\n      var fn = getResponders().onBeforeCapture;\n\n      if (fn) {\n        var before = {\n          draggableId: draggableId,\n          mode: mode\n        };\n        fn(before);\n      }\n    });\n  };\n\n  var beforeStart = function beforeStart(critical, mode) {\n    !!dragging ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot fire onBeforeDragStart as a drag start has already been published') : invariant(false) : void 0;\n    withTimings('onBeforeDragStart', function () {\n      var fn = getResponders().onBeforeDragStart;\n\n      if (fn) {\n        fn(getDragStart(critical, mode));\n      }\n    });\n  };\n\n  var start = function start(critical, mode) {\n    !!dragging ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot fire onBeforeDragStart as a drag start has already been published') : invariant(false) : void 0;\n    var data = getDragStart(critical, mode);\n    dragging = {\n      mode: mode,\n      lastCritical: critical,\n      lastLocation: data.source,\n      lastCombine: null\n    };\n    asyncMarshal.add(function () {\n      withTimings('onDragStart', function () {\n        return execute(getResponders().onDragStart, data, announce, preset.onDragStart);\n      });\n    });\n  };\n\n  var update = function update(critical, impact) {\n    var location = tryGetDestination(impact);\n    var combine = tryGetCombine(impact);\n    !dragging ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot fire onDragMove when onDragStart has not been called') : invariant(false) : void 0;\n    var hasCriticalChanged = !isCriticalEqual(critical, dragging.lastCritical);\n\n    if (hasCriticalChanged) {\n      dragging.lastCritical = critical;\n    }\n\n    var hasLocationChanged = !areLocationsEqual(dragging.lastLocation, location);\n\n    if (hasLocationChanged) {\n      dragging.lastLocation = location;\n    }\n\n    var hasGroupingChanged = !isCombineEqual(dragging.lastCombine, combine);\n\n    if (hasGroupingChanged) {\n      dragging.lastCombine = combine;\n    }\n\n    if (!hasCriticalChanged && !hasLocationChanged && !hasGroupingChanged) {\n      return;\n    }\n\n    var data = _extends({}, getDragStart(critical, dragging.mode), {\n      combine: combine,\n      destination: location\n    });\n\n    asyncMarshal.add(function () {\n      withTimings('onDragUpdate', function () {\n        return execute(getResponders().onDragUpdate, data, announce, preset.onDragUpdate);\n      });\n    });\n  };\n\n  var flush = function flush() {\n    !dragging ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Can only flush responders while dragging') : invariant(false) : void 0;\n    asyncMarshal.flush();\n  };\n\n  var drop = function drop(result) {\n    !dragging ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot fire onDragEnd when there is no matching onDragStart') : invariant(false) : void 0;\n    dragging = null;\n    withTimings('onDragEnd', function () {\n      return execute(getResponders().onDragEnd, result, announce, preset.onDragEnd);\n    });\n  };\n\n  var abort = function abort() {\n    if (!dragging) {\n      return;\n    }\n\n    var result = _extends({}, getDragStart(dragging.lastCritical, dragging.mode), {\n      combine: null,\n      destination: null,\n      reason: 'CANCEL'\n    });\n\n    drop(result);\n  };\n\n  return {\n    beforeCapture: beforeCapture,\n    beforeStart: beforeStart,\n    start: start,\n    update: update,\n    flush: flush,\n    drop: drop,\n    abort: abort\n  };\n});\n\nvar responders = (function (getResponders, announce) {\n  var publisher = getPublisher(getResponders, announce);\n  return function (store) {\n    return function (next) {\n      return function (action) {\n        if (action.type === 'BEFORE_INITIAL_CAPTURE') {\n          publisher.beforeCapture(action.payload.draggableId, action.payload.movementMode);\n          return;\n        }\n\n        if (action.type === 'INITIAL_PUBLISH') {\n          var critical = action.payload.critical;\n          publisher.beforeStart(critical, action.payload.movementMode);\n          next(action);\n          publisher.start(critical, action.payload.movementMode);\n          return;\n        }\n\n        if (action.type === 'DROP_COMPLETE') {\n          var result = action.payload.completed.result;\n          publisher.flush();\n          next(action);\n          publisher.drop(result);\n          return;\n        }\n\n        next(action);\n\n        if (action.type === 'FLUSH') {\n          publisher.abort();\n          return;\n        }\n\n        var state = store.getState();\n\n        if (state.phase === 'DRAGGING') {\n          publisher.update(state.critical, state.impact);\n        }\n      };\n    };\n  };\n});\n\nvar dropAnimationFinish = (function (store) {\n  return function (next) {\n    return function (action) {\n      if (action.type !== 'DROP_ANIMATION_FINISHED') {\n        next(action);\n        return;\n      }\n\n      var state = store.getState();\n      !(state.phase === 'DROP_ANIMATING') ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot finish a drop animating when no drop is occurring') : invariant(false) : void 0;\n      store.dispatch(completeDrop({\n        completed: state.completed\n      }));\n    };\n  };\n});\n\nvar dropAnimationFlushOnScroll = (function (store) {\n  var unbind = null;\n  var frameId = null;\n\n  function clear() {\n    if (frameId) {\n      cancelAnimationFrame(frameId);\n      frameId = null;\n    }\n\n    if (unbind) {\n      unbind();\n      unbind = null;\n    }\n  }\n\n  return function (next) {\n    return function (action) {\n      if (action.type === 'FLUSH' || action.type === 'DROP_COMPLETE' || action.type === 'DROP_ANIMATION_FINISHED') {\n        clear();\n      }\n\n      next(action);\n\n      if (action.type !== 'DROP_ANIMATE') {\n        return;\n      }\n\n      var binding = {\n        eventName: 'scroll',\n        options: {\n          capture: true,\n          passive: false,\n          once: true\n        },\n        fn: function flushDropAnimation() {\n          var state = store.getState();\n\n          if (state.phase === 'DROP_ANIMATING') {\n            store.dispatch(dropAnimationFinished());\n          }\n        }\n      };\n      frameId = requestAnimationFrame(function () {\n        frameId = null;\n        unbind = bindEvents(window, [binding]);\n      });\n    };\n  };\n});\n\nvar dimensionMarshalStopper = (function (marshal) {\n  return function () {\n    return function (next) {\n      return function (action) {\n        if (action.type === 'DROP_COMPLETE' || action.type === 'FLUSH' || action.type === 'DROP_ANIMATE') {\n          marshal.stopPublishing();\n        }\n\n        next(action);\n      };\n    };\n  };\n});\n\nvar focus = (function (marshal) {\n  var isWatching = false;\n  return function () {\n    return function (next) {\n      return function (action) {\n        if (action.type === 'INITIAL_PUBLISH') {\n          isWatching = true;\n          marshal.tryRecordFocus(action.payload.critical.draggable.id);\n          next(action);\n          marshal.tryRestoreFocusRecorded();\n          return;\n        }\n\n        next(action);\n\n        if (!isWatching) {\n          return;\n        }\n\n        if (action.type === 'FLUSH') {\n          isWatching = false;\n          marshal.tryRestoreFocusRecorded();\n          return;\n        }\n\n        if (action.type === 'DROP_COMPLETE') {\n          isWatching = false;\n          var result = action.payload.completed.result;\n\n          if (result.combine) {\n            marshal.tryShiftRecord(result.draggableId, result.combine.draggableId);\n          }\n\n          marshal.tryRestoreFocusRecorded();\n        }\n      };\n    };\n  };\n});\n\nvar shouldStop = function shouldStop(action) {\n  return action.type === 'DROP_COMPLETE' || action.type === 'DROP_ANIMATE' || action.type === 'FLUSH';\n};\n\nvar autoScroll = (function (autoScroller) {\n  return function (store) {\n    return function (next) {\n      return function (action) {\n        if (shouldStop(action)) {\n          autoScroller.stop();\n          next(action);\n          return;\n        }\n\n        if (action.type === 'INITIAL_PUBLISH') {\n          next(action);\n          var state = store.getState();\n          !(state.phase === 'DRAGGING') ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Expected phase to be DRAGGING after INITIAL_PUBLISH') : invariant(false) : void 0;\n          autoScroller.start(state);\n          return;\n        }\n\n        next(action);\n        autoScroller.scroll(store.getState());\n      };\n    };\n  };\n});\n\nvar pendingDrop = (function (store) {\n  return function (next) {\n    return function (action) {\n      next(action);\n\n      if (action.type !== 'PUBLISH_WHILE_DRAGGING') {\n        return;\n      }\n\n      var postActionState = store.getState();\n\n      if (postActionState.phase !== 'DROP_PENDING') {\n        return;\n      }\n\n      if (postActionState.isWaiting) {\n        return;\n      }\n\n      store.dispatch(drop({\n        reason: postActionState.reason\n      }));\n    };\n  };\n});\n\nvar composeEnhancers = process.env.NODE_ENV !== 'production' && typeof window !== 'undefined' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({\n  name: 'react-beautiful-dnd'\n}) : compose;\nvar createStore = (function (_ref) {\n  var dimensionMarshal = _ref.dimensionMarshal,\n      focusMarshal = _ref.focusMarshal,\n      styleMarshal = _ref.styleMarshal,\n      getResponders = _ref.getResponders,\n      announce = _ref.announce,\n      autoScroller = _ref.autoScroller;\n  return createStore$1(reducer, composeEnhancers(applyMiddleware(style(styleMarshal), dimensionMarshalStopper(dimensionMarshal), lift$1(dimensionMarshal), drop$1, dropAnimationFinish, dropAnimationFlushOnScroll, pendingDrop, autoScroll(autoScroller), scrollListener, focus(focusMarshal), responders(getResponders, announce))));\n});\n\nvar clean$1 = function clean() {\n  return {\n    additions: {},\n    removals: {},\n    modified: {}\n  };\n};\nfunction createPublisher(_ref) {\n  var registry = _ref.registry,\n      callbacks = _ref.callbacks;\n  var staging = clean$1();\n  var frameId = null;\n\n  var collect = function collect() {\n    if (frameId) {\n      return;\n    }\n\n    callbacks.collectionStarting();\n    frameId = requestAnimationFrame(function () {\n      frameId = null;\n      start();\n      var _staging = staging,\n          additions = _staging.additions,\n          removals = _staging.removals,\n          modified = _staging.modified;\n      var added = Object.keys(additions).map(function (id) {\n        return registry.draggable.getById(id).getDimension(origin);\n      }).sort(function (a, b) {\n        return a.descriptor.index - b.descriptor.index;\n      });\n      var updated = Object.keys(modified).map(function (id) {\n        var entry = registry.droppable.getById(id);\n        var scroll = entry.callbacks.getScrollWhileDragging();\n        return {\n          droppableId: id,\n          scroll: scroll\n        };\n      });\n      var result = {\n        additions: added,\n        removals: Object.keys(removals),\n        modified: updated\n      };\n      staging = clean$1();\n      finish();\n      callbacks.publish(result);\n    });\n  };\n\n  var add = function add(entry) {\n    var id = entry.descriptor.id;\n    staging.additions[id] = entry;\n    staging.modified[entry.descriptor.droppableId] = true;\n\n    if (staging.removals[id]) {\n      delete staging.removals[id];\n    }\n\n    collect();\n  };\n\n  var remove = function remove(entry) {\n    var descriptor = entry.descriptor;\n    staging.removals[descriptor.id] = true;\n    staging.modified[descriptor.droppableId] = true;\n\n    if (staging.additions[descriptor.id]) {\n      delete staging.additions[descriptor.id];\n    }\n\n    collect();\n  };\n\n  var stop = function stop() {\n    if (!frameId) {\n      return;\n    }\n\n    cancelAnimationFrame(frameId);\n    frameId = null;\n    staging = clean$1();\n  };\n\n  return {\n    add: add,\n    remove: remove,\n    stop: stop\n  };\n}\n\nvar getMaxScroll = (function (_ref) {\n  var scrollHeight = _ref.scrollHeight,\n      scrollWidth = _ref.scrollWidth,\n      height = _ref.height,\n      width = _ref.width;\n  var maxScroll = subtract({\n    x: scrollWidth,\n    y: scrollHeight\n  }, {\n    x: width,\n    y: height\n  });\n  var adjustedMaxScroll = {\n    x: Math.max(0, maxScroll.x),\n    y: Math.max(0, maxScroll.y)\n  };\n  return adjustedMaxScroll;\n});\n\nvar getDocumentElement = (function () {\n  var doc = document.documentElement;\n  !doc ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot find document.documentElement') : invariant(false) : void 0;\n  return doc;\n});\n\nvar getMaxWindowScroll = (function () {\n  var doc = getDocumentElement();\n  var maxScroll = getMaxScroll({\n    scrollHeight: doc.scrollHeight,\n    scrollWidth: doc.scrollWidth,\n    width: doc.clientWidth,\n    height: doc.clientHeight\n  });\n  return maxScroll;\n});\n\nvar getViewport = (function () {\n  var scroll = getWindowScroll();\n  var maxScroll = getMaxWindowScroll();\n  var top = scroll.y;\n  var left = scroll.x;\n  var doc = getDocumentElement();\n  var width = doc.clientWidth;\n  var height = doc.clientHeight;\n  var right = left + width;\n  var bottom = top + height;\n  var frame = getRect({\n    top: top,\n    left: left,\n    right: right,\n    bottom: bottom\n  });\n  var viewport = {\n    frame: frame,\n    scroll: {\n      initial: scroll,\n      current: scroll,\n      max: maxScroll,\n      diff: {\n        value: origin,\n        displacement: origin\n      }\n    }\n  };\n  return viewport;\n});\n\nvar getInitialPublish = (function (_ref) {\n  var critical = _ref.critical,\n      scrollOptions = _ref.scrollOptions,\n      registry = _ref.registry;\n  start();\n  var viewport = getViewport();\n  var windowScroll = viewport.scroll.current;\n  var home = critical.droppable;\n  var droppables = registry.droppable.getAllByType(home.type).map(function (entry) {\n    return entry.callbacks.getDimensionAndWatchScroll(windowScroll, scrollOptions);\n  });\n  var draggables = registry.draggable.getAllByType(critical.draggable.type).map(function (entry) {\n    return entry.getDimension(windowScroll);\n  });\n  var dimensions = {\n    draggables: toDraggableMap(draggables),\n    droppables: toDroppableMap(droppables)\n  };\n  finish();\n  var result = {\n    dimensions: dimensions,\n    critical: critical,\n    viewport: viewport\n  };\n  return result;\n});\n\nfunction shouldPublishUpdate(registry, dragging, entry) {\n  if (entry.descriptor.id === dragging.id) {\n    return false;\n  }\n\n  if (entry.descriptor.type !== dragging.type) {\n    return false;\n  }\n\n  var home = registry.droppable.getById(entry.descriptor.droppableId);\n\n  if (home.descriptor.mode !== 'virtual') {\n    process.env.NODE_ENV !== \"production\" ? warning(\"\\n      You are attempting to add or remove a Draggable [id: \" + entry.descriptor.id + \"]\\n      while a drag is occurring. This is only supported for virtual lists.\\n\\n      See https://github.com/atlassian/react-beautiful-dnd/blob/master/docs/patterns/virtual-lists.md\\n    \") : void 0;\n    return false;\n  }\n\n  return true;\n}\n\nvar createDimensionMarshal = (function (registry, callbacks) {\n  var collection = null;\n  var publisher = createPublisher({\n    callbacks: {\n      publish: callbacks.publishWhileDragging,\n      collectionStarting: callbacks.collectionStarting\n    },\n    registry: registry\n  });\n\n  var updateDroppableIsEnabled = function updateDroppableIsEnabled(id, isEnabled) {\n    !registry.droppable.exists(id) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Cannot update is enabled flag of Droppable \" + id + \" as it is not registered\") : invariant(false) : void 0;\n\n    if (!collection) {\n      return;\n    }\n\n    callbacks.updateDroppableIsEnabled({\n      id: id,\n      isEnabled: isEnabled\n    });\n  };\n\n  var updateDroppableIsCombineEnabled = function updateDroppableIsCombineEnabled(id, isCombineEnabled) {\n    if (!collection) {\n      return;\n    }\n\n    !registry.droppable.exists(id) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Cannot update isCombineEnabled flag of Droppable \" + id + \" as it is not registered\") : invariant(false) : void 0;\n    callbacks.updateDroppableIsCombineEnabled({\n      id: id,\n      isCombineEnabled: isCombineEnabled\n    });\n  };\n\n  var updateDroppableScroll = function updateDroppableScroll(id, newScroll) {\n    if (!collection) {\n      return;\n    }\n\n    !registry.droppable.exists(id) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Cannot update the scroll on Droppable \" + id + \" as it is not registered\") : invariant(false) : void 0;\n    callbacks.updateDroppableScroll({\n      id: id,\n      newScroll: newScroll\n    });\n  };\n\n  var scrollDroppable = function scrollDroppable(id, change) {\n    if (!collection) {\n      return;\n    }\n\n    registry.droppable.getById(id).callbacks.scroll(change);\n  };\n\n  var stopPublishing = function stopPublishing() {\n    if (!collection) {\n      return;\n    }\n\n    publisher.stop();\n    var home = collection.critical.droppable;\n    registry.droppable.getAllByType(home.type).forEach(function (entry) {\n      return entry.callbacks.dragStopped();\n    });\n    collection.unsubscribe();\n    collection = null;\n  };\n\n  var subscriber = function subscriber(event) {\n    !collection ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Should only be subscribed when a collection is occurring') : invariant(false) : void 0;\n    var dragging = collection.critical.draggable;\n\n    if (event.type === 'ADDITION') {\n      if (shouldPublishUpdate(registry, dragging, event.value)) {\n        publisher.add(event.value);\n      }\n    }\n\n    if (event.type === 'REMOVAL') {\n      if (shouldPublishUpdate(registry, dragging, event.value)) {\n        publisher.remove(event.value);\n      }\n    }\n  };\n\n  var startPublishing = function startPublishing(request) {\n    !!collection ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot start capturing critical dimensions as there is already a collection') : invariant(false) : void 0;\n    var entry = registry.draggable.getById(request.draggableId);\n    var home = registry.droppable.getById(entry.descriptor.droppableId);\n    var critical = {\n      draggable: entry.descriptor,\n      droppable: home.descriptor\n    };\n    var unsubscribe = registry.subscribe(subscriber);\n    collection = {\n      critical: critical,\n      unsubscribe: unsubscribe\n    };\n    return getInitialPublish({\n      critical: critical,\n      registry: registry,\n      scrollOptions: request.scrollOptions\n    });\n  };\n\n  var marshal = {\n    updateDroppableIsEnabled: updateDroppableIsEnabled,\n    updateDroppableIsCombineEnabled: updateDroppableIsCombineEnabled,\n    scrollDroppable: scrollDroppable,\n    updateDroppableScroll: updateDroppableScroll,\n    startPublishing: startPublishing,\n    stopPublishing: stopPublishing\n  };\n  return marshal;\n});\n\nvar canStartDrag = (function (state, id) {\n  if (state.phase === 'IDLE') {\n    return true;\n  }\n\n  if (state.phase !== 'DROP_ANIMATING') {\n    return false;\n  }\n\n  if (state.completed.result.draggableId === id) {\n    return false;\n  }\n\n  return state.completed.result.reason === 'DROP';\n});\n\nvar scrollWindow = (function (change) {\n  window.scrollBy(change.x, change.y);\n});\n\nvar getScrollableDroppables = memoizeOne(function (droppables) {\n  return toDroppableList(droppables).filter(function (droppable) {\n    if (!droppable.isEnabled) {\n      return false;\n    }\n\n    if (!droppable.frame) {\n      return false;\n    }\n\n    return true;\n  });\n});\n\nvar getScrollableDroppableOver = function getScrollableDroppableOver(target, droppables) {\n  var maybe = find(getScrollableDroppables(droppables), function (droppable) {\n    !droppable.frame ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Invalid result') : invariant(false) : void 0;\n    return isPositionInFrame(droppable.frame.pageMarginBox)(target);\n  });\n  return maybe;\n};\n\nvar getBestScrollableDroppable = (function (_ref) {\n  var center = _ref.center,\n      destination = _ref.destination,\n      droppables = _ref.droppables;\n\n  if (destination) {\n    var _dimension = droppables[destination];\n\n    if (!_dimension.frame) {\n      return null;\n    }\n\n    return _dimension;\n  }\n\n  var dimension = getScrollableDroppableOver(center, droppables);\n  return dimension;\n});\n\nvar config = {\n  startFromPercentage: 0.25,\n  maxScrollAtPercentage: 0.05,\n  maxPixelScroll: 28,\n  ease: function ease(percentage) {\n    return Math.pow(percentage, 2);\n  },\n  durationDampening: {\n    stopDampeningAt: 1200,\n    accelerateAt: 360\n  }\n};\n\nvar getDistanceThresholds = (function (container, axis) {\n  var startScrollingFrom = container[axis.size] * config.startFromPercentage;\n  var maxScrollValueAt = container[axis.size] * config.maxScrollAtPercentage;\n  var thresholds = {\n    startScrollingFrom: startScrollingFrom,\n    maxScrollValueAt: maxScrollValueAt\n  };\n  return thresholds;\n});\n\nvar getPercentage = (function (_ref) {\n  var startOfRange = _ref.startOfRange,\n      endOfRange = _ref.endOfRange,\n      current = _ref.current;\n  var range = endOfRange - startOfRange;\n\n  if (range === 0) {\n    process.env.NODE_ENV !== \"production\" ? warning(\"\\n      Detected distance range of 0 in the fluid auto scroller\\n      This is unexpected and would cause a divide by 0 issue.\\n      Not allowing an auto scroll\\n    \") : void 0;\n    return 0;\n  }\n\n  var currentInRange = current - startOfRange;\n  var percentage = currentInRange / range;\n  return percentage;\n});\n\nvar minScroll = 1;\n\nvar getValueFromDistance = (function (distanceToEdge, thresholds) {\n  if (distanceToEdge > thresholds.startScrollingFrom) {\n    return 0;\n  }\n\n  if (distanceToEdge <= thresholds.maxScrollValueAt) {\n    return config.maxPixelScroll;\n  }\n\n  if (distanceToEdge === thresholds.startScrollingFrom) {\n    return minScroll;\n  }\n\n  var percentageFromMaxScrollValueAt = getPercentage({\n    startOfRange: thresholds.maxScrollValueAt,\n    endOfRange: thresholds.startScrollingFrom,\n    current: distanceToEdge\n  });\n  var percentageFromStartScrollingFrom = 1 - percentageFromMaxScrollValueAt;\n  var scroll = config.maxPixelScroll * config.ease(percentageFromStartScrollingFrom);\n  return Math.ceil(scroll);\n});\n\nvar accelerateAt = config.durationDampening.accelerateAt;\nvar stopAt = config.durationDampening.stopDampeningAt;\nvar dampenValueByTime = (function (proposedScroll, dragStartTime) {\n  var startOfRange = dragStartTime;\n  var endOfRange = stopAt;\n  var now = Date.now();\n  var runTime = now - startOfRange;\n\n  if (runTime >= stopAt) {\n    return proposedScroll;\n  }\n\n  if (runTime < accelerateAt) {\n    return minScroll;\n  }\n\n  var betweenAccelerateAtAndStopAtPercentage = getPercentage({\n    startOfRange: accelerateAt,\n    endOfRange: endOfRange,\n    current: runTime\n  });\n  var scroll = proposedScroll * config.ease(betweenAccelerateAtAndStopAtPercentage);\n  return Math.ceil(scroll);\n});\n\nvar getValue = (function (_ref) {\n  var distanceToEdge = _ref.distanceToEdge,\n      thresholds = _ref.thresholds,\n      dragStartTime = _ref.dragStartTime,\n      shouldUseTimeDampening = _ref.shouldUseTimeDampening;\n  var scroll = getValueFromDistance(distanceToEdge, thresholds);\n\n  if (scroll === 0) {\n    return 0;\n  }\n\n  if (!shouldUseTimeDampening) {\n    return scroll;\n  }\n\n  return Math.max(dampenValueByTime(scroll, dragStartTime), minScroll);\n});\n\nvar getScrollOnAxis = (function (_ref) {\n  var container = _ref.container,\n      distanceToEdges = _ref.distanceToEdges,\n      dragStartTime = _ref.dragStartTime,\n      axis = _ref.axis,\n      shouldUseTimeDampening = _ref.shouldUseTimeDampening;\n  var thresholds = getDistanceThresholds(container, axis);\n  var isCloserToEnd = distanceToEdges[axis.end] < distanceToEdges[axis.start];\n\n  if (isCloserToEnd) {\n    return getValue({\n      distanceToEdge: distanceToEdges[axis.end],\n      thresholds: thresholds,\n      dragStartTime: dragStartTime,\n      shouldUseTimeDampening: shouldUseTimeDampening\n    });\n  }\n\n  return -1 * getValue({\n    distanceToEdge: distanceToEdges[axis.start],\n    thresholds: thresholds,\n    dragStartTime: dragStartTime,\n    shouldUseTimeDampening: shouldUseTimeDampening\n  });\n});\n\nvar adjustForSizeLimits = (function (_ref) {\n  var container = _ref.container,\n      subject = _ref.subject,\n      proposedScroll = _ref.proposedScroll;\n  var isTooBigVertically = subject.height > container.height;\n  var isTooBigHorizontally = subject.width > container.width;\n\n  if (!isTooBigHorizontally && !isTooBigVertically) {\n    return proposedScroll;\n  }\n\n  if (isTooBigHorizontally && isTooBigVertically) {\n    return null;\n  }\n\n  return {\n    x: isTooBigHorizontally ? 0 : proposedScroll.x,\n    y: isTooBigVertically ? 0 : proposedScroll.y\n  };\n});\n\nvar clean$2 = apply(function (value) {\n  return value === 0 ? 0 : value;\n});\nvar getScroll = (function (_ref) {\n  var dragStartTime = _ref.dragStartTime,\n      container = _ref.container,\n      subject = _ref.subject,\n      center = _ref.center,\n      shouldUseTimeDampening = _ref.shouldUseTimeDampening;\n  var distanceToEdges = {\n    top: center.y - container.top,\n    right: container.right - center.x,\n    bottom: container.bottom - center.y,\n    left: center.x - container.left\n  };\n  var y = getScrollOnAxis({\n    container: container,\n    distanceToEdges: distanceToEdges,\n    dragStartTime: dragStartTime,\n    axis: vertical,\n    shouldUseTimeDampening: shouldUseTimeDampening\n  });\n  var x = getScrollOnAxis({\n    container: container,\n    distanceToEdges: distanceToEdges,\n    dragStartTime: dragStartTime,\n    axis: horizontal,\n    shouldUseTimeDampening: shouldUseTimeDampening\n  });\n  var required = clean$2({\n    x: x,\n    y: y\n  });\n\n  if (isEqual(required, origin)) {\n    return null;\n  }\n\n  var limited = adjustForSizeLimits({\n    container: container,\n    subject: subject,\n    proposedScroll: required\n  });\n\n  if (!limited) {\n    return null;\n  }\n\n  return isEqual(limited, origin) ? null : limited;\n});\n\nvar smallestSigned = apply(function (value) {\n  if (value === 0) {\n    return 0;\n  }\n\n  return value > 0 ? 1 : -1;\n});\nvar getOverlap = function () {\n  var getRemainder = function getRemainder(target, max) {\n    if (target < 0) {\n      return target;\n    }\n\n    if (target > max) {\n      return target - max;\n    }\n\n    return 0;\n  };\n\n  return function (_ref) {\n    var current = _ref.current,\n        max = _ref.max,\n        change = _ref.change;\n    var targetScroll = add(current, change);\n    var overlap = {\n      x: getRemainder(targetScroll.x, max.x),\n      y: getRemainder(targetScroll.y, max.y)\n    };\n\n    if (isEqual(overlap, origin)) {\n      return null;\n    }\n\n    return overlap;\n  };\n}();\nvar canPartiallyScroll = function canPartiallyScroll(_ref2) {\n  var rawMax = _ref2.max,\n      current = _ref2.current,\n      change = _ref2.change;\n  var max = {\n    x: Math.max(current.x, rawMax.x),\n    y: Math.max(current.y, rawMax.y)\n  };\n  var smallestChange = smallestSigned(change);\n  var overlap = getOverlap({\n    max: max,\n    current: current,\n    change: smallestChange\n  });\n\n  if (!overlap) {\n    return true;\n  }\n\n  if (smallestChange.x !== 0 && overlap.x === 0) {\n    return true;\n  }\n\n  if (smallestChange.y !== 0 && overlap.y === 0) {\n    return true;\n  }\n\n  return false;\n};\nvar canScrollWindow = function canScrollWindow(viewport, change) {\n  return canPartiallyScroll({\n    current: viewport.scroll.current,\n    max: viewport.scroll.max,\n    change: change\n  });\n};\nvar getWindowOverlap = function getWindowOverlap(viewport, change) {\n  if (!canScrollWindow(viewport, change)) {\n    return null;\n  }\n\n  var max = viewport.scroll.max;\n  var current = viewport.scroll.current;\n  return getOverlap({\n    current: current,\n    max: max,\n    change: change\n  });\n};\nvar canScrollDroppable = function canScrollDroppable(droppable, change) {\n  var frame = droppable.frame;\n\n  if (!frame) {\n    return false;\n  }\n\n  return canPartiallyScroll({\n    current: frame.scroll.current,\n    max: frame.scroll.max,\n    change: change\n  });\n};\nvar getDroppableOverlap = function getDroppableOverlap(droppable, change) {\n  var frame = droppable.frame;\n\n  if (!frame) {\n    return null;\n  }\n\n  if (!canScrollDroppable(droppable, change)) {\n    return null;\n  }\n\n  return getOverlap({\n    current: frame.scroll.current,\n    max: frame.scroll.max,\n    change: change\n  });\n};\n\nvar getWindowScrollChange = (function (_ref) {\n  var viewport = _ref.viewport,\n      subject = _ref.subject,\n      center = _ref.center,\n      dragStartTime = _ref.dragStartTime,\n      shouldUseTimeDampening = _ref.shouldUseTimeDampening;\n  var scroll = getScroll({\n    dragStartTime: dragStartTime,\n    container: viewport.frame,\n    subject: subject,\n    center: center,\n    shouldUseTimeDampening: shouldUseTimeDampening\n  });\n  return scroll && canScrollWindow(viewport, scroll) ? scroll : null;\n});\n\nvar getDroppableScrollChange = (function (_ref) {\n  var droppable = _ref.droppable,\n      subject = _ref.subject,\n      center = _ref.center,\n      dragStartTime = _ref.dragStartTime,\n      shouldUseTimeDampening = _ref.shouldUseTimeDampening;\n  var frame = droppable.frame;\n\n  if (!frame) {\n    return null;\n  }\n\n  var scroll = getScroll({\n    dragStartTime: dragStartTime,\n    container: frame.pageMarginBox,\n    subject: subject,\n    center: center,\n    shouldUseTimeDampening: shouldUseTimeDampening\n  });\n  return scroll && canScrollDroppable(droppable, scroll) ? scroll : null;\n});\n\nvar scroll$1 = (function (_ref) {\n  var state = _ref.state,\n      dragStartTime = _ref.dragStartTime,\n      shouldUseTimeDampening = _ref.shouldUseTimeDampening,\n      scrollWindow = _ref.scrollWindow,\n      scrollDroppable = _ref.scrollDroppable;\n  var center = state.current.page.borderBoxCenter;\n  var draggable = state.dimensions.draggables[state.critical.draggable.id];\n  var subject = draggable.page.marginBox;\n\n  if (state.isWindowScrollAllowed) {\n    var viewport = state.viewport;\n\n    var _change = getWindowScrollChange({\n      dragStartTime: dragStartTime,\n      viewport: viewport,\n      subject: subject,\n      center: center,\n      shouldUseTimeDampening: shouldUseTimeDampening\n    });\n\n    if (_change) {\n      scrollWindow(_change);\n      return;\n    }\n  }\n\n  var droppable = getBestScrollableDroppable({\n    center: center,\n    destination: whatIsDraggedOver(state.impact),\n    droppables: state.dimensions.droppables\n  });\n\n  if (!droppable) {\n    return;\n  }\n\n  var change = getDroppableScrollChange({\n    dragStartTime: dragStartTime,\n    droppable: droppable,\n    subject: subject,\n    center: center,\n    shouldUseTimeDampening: shouldUseTimeDampening\n  });\n\n  if (change) {\n    scrollDroppable(droppable.descriptor.id, change);\n  }\n});\n\nvar createFluidScroller = (function (_ref) {\n  var scrollWindow = _ref.scrollWindow,\n      scrollDroppable = _ref.scrollDroppable;\n  var scheduleWindowScroll = rafSchd(scrollWindow);\n  var scheduleDroppableScroll = rafSchd(scrollDroppable);\n  var dragging = null;\n\n  var tryScroll = function tryScroll(state) {\n    !dragging ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot fluid scroll if not dragging') : invariant(false) : void 0;\n    var _dragging = dragging,\n        shouldUseTimeDampening = _dragging.shouldUseTimeDampening,\n        dragStartTime = _dragging.dragStartTime;\n    scroll$1({\n      state: state,\n      scrollWindow: scheduleWindowScroll,\n      scrollDroppable: scheduleDroppableScroll,\n      dragStartTime: dragStartTime,\n      shouldUseTimeDampening: shouldUseTimeDampening\n    });\n  };\n\n  var start$1 = function start$1(state) {\n    start();\n    !!dragging ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot start auto scrolling when already started') : invariant(false) : void 0;\n    var dragStartTime = Date.now();\n    var wasScrollNeeded = false;\n\n    var fakeScrollCallback = function fakeScrollCallback() {\n      wasScrollNeeded = true;\n    };\n\n    scroll$1({\n      state: state,\n      dragStartTime: 0,\n      shouldUseTimeDampening: false,\n      scrollWindow: fakeScrollCallback,\n      scrollDroppable: fakeScrollCallback\n    });\n    dragging = {\n      dragStartTime: dragStartTime,\n      shouldUseTimeDampening: wasScrollNeeded\n    };\n    finish();\n\n    if (wasScrollNeeded) {\n      tryScroll(state);\n    }\n  };\n\n  var stop = function stop() {\n    if (!dragging) {\n      return;\n    }\n\n    scheduleWindowScroll.cancel();\n    scheduleDroppableScroll.cancel();\n    dragging = null;\n  };\n\n  return {\n    start: start$1,\n    stop: stop,\n    scroll: tryScroll\n  };\n});\n\nvar createJumpScroller = (function (_ref) {\n  var move = _ref.move,\n      scrollDroppable = _ref.scrollDroppable,\n      scrollWindow = _ref.scrollWindow;\n\n  var moveByOffset = function moveByOffset(state, offset) {\n    var client = add(state.current.client.selection, offset);\n    move({\n      client: client\n    });\n  };\n\n  var scrollDroppableAsMuchAsItCan = function scrollDroppableAsMuchAsItCan(droppable, change) {\n    if (!canScrollDroppable(droppable, change)) {\n      return change;\n    }\n\n    var overlap = getDroppableOverlap(droppable, change);\n\n    if (!overlap) {\n      scrollDroppable(droppable.descriptor.id, change);\n      return null;\n    }\n\n    var whatTheDroppableCanScroll = subtract(change, overlap);\n    scrollDroppable(droppable.descriptor.id, whatTheDroppableCanScroll);\n    var remainder = subtract(change, whatTheDroppableCanScroll);\n    return remainder;\n  };\n\n  var scrollWindowAsMuchAsItCan = function scrollWindowAsMuchAsItCan(isWindowScrollAllowed, viewport, change) {\n    if (!isWindowScrollAllowed) {\n      return change;\n    }\n\n    if (!canScrollWindow(viewport, change)) {\n      return change;\n    }\n\n    var overlap = getWindowOverlap(viewport, change);\n\n    if (!overlap) {\n      scrollWindow(change);\n      return null;\n    }\n\n    var whatTheWindowCanScroll = subtract(change, overlap);\n    scrollWindow(whatTheWindowCanScroll);\n    var remainder = subtract(change, whatTheWindowCanScroll);\n    return remainder;\n  };\n\n  var jumpScroller = function jumpScroller(state) {\n    var request = state.scrollJumpRequest;\n\n    if (!request) {\n      return;\n    }\n\n    var destination = whatIsDraggedOver(state.impact);\n    !destination ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot perform a jump scroll when there is no destination') : invariant(false) : void 0;\n    var droppableRemainder = scrollDroppableAsMuchAsItCan(state.dimensions.droppables[destination], request);\n\n    if (!droppableRemainder) {\n      return;\n    }\n\n    var viewport = state.viewport;\n    var windowRemainder = scrollWindowAsMuchAsItCan(state.isWindowScrollAllowed, viewport, droppableRemainder);\n\n    if (!windowRemainder) {\n      return;\n    }\n\n    moveByOffset(state, windowRemainder);\n  };\n\n  return jumpScroller;\n});\n\nvar createAutoScroller = (function (_ref) {\n  var scrollDroppable = _ref.scrollDroppable,\n      scrollWindow = _ref.scrollWindow,\n      move = _ref.move;\n  var fluidScroller = createFluidScroller({\n    scrollWindow: scrollWindow,\n    scrollDroppable: scrollDroppable\n  });\n  var jumpScroll = createJumpScroller({\n    move: move,\n    scrollWindow: scrollWindow,\n    scrollDroppable: scrollDroppable\n  });\n\n  var scroll = function scroll(state) {\n    if (state.phase !== 'DRAGGING') {\n      return;\n    }\n\n    if (state.movementMode === 'FLUID') {\n      fluidScroller.scroll(state);\n      return;\n    }\n\n    if (!state.scrollJumpRequest) {\n      return;\n    }\n\n    jumpScroll(state);\n  };\n\n  var scroller = {\n    scroll: scroll,\n    start: fluidScroller.start,\n    stop: fluidScroller.stop\n  };\n  return scroller;\n});\n\nvar prefix$1 = 'data-rbd';\nvar dragHandle = function () {\n  var base = prefix$1 + \"-drag-handle\";\n  return {\n    base: base,\n    draggableId: base + \"-draggable-id\",\n    contextId: base + \"-context-id\"\n  };\n}();\nvar draggable = function () {\n  var base = prefix$1 + \"-draggable\";\n  return {\n    base: base,\n    contextId: base + \"-context-id\",\n    id: base + \"-id\"\n  };\n}();\nvar droppable = function () {\n  var base = prefix$1 + \"-droppable\";\n  return {\n    base: base,\n    contextId: base + \"-context-id\",\n    id: base + \"-id\"\n  };\n}();\nvar scrollContainer = {\n  contextId: prefix$1 + \"-scroll-container-context-id\"\n};\n\nvar makeGetSelector = function makeGetSelector(context) {\n  return function (attribute) {\n    return \"[\" + attribute + \"=\\\"\" + context + \"\\\"]\";\n  };\n};\n\nvar getStyles = function getStyles(rules, property) {\n  return rules.map(function (rule) {\n    var value = rule.styles[property];\n\n    if (!value) {\n      return '';\n    }\n\n    return rule.selector + \" { \" + value + \" }\";\n  }).join(' ');\n};\n\nvar noPointerEvents = 'pointer-events: none;';\nvar getStyles$1 = (function (contextId) {\n  var getSelector = makeGetSelector(contextId);\n\n  var dragHandle$1 = function () {\n    var grabCursor = \"\\n      cursor: -webkit-grab;\\n      cursor: grab;\\n    \";\n    return {\n      selector: getSelector(dragHandle.contextId),\n      styles: {\n        always: \"\\n          -webkit-touch-callout: none;\\n          -webkit-tap-highlight-color: rgba(0,0,0,0);\\n          touch-action: manipulation;\\n        \",\n        resting: grabCursor,\n        dragging: noPointerEvents,\n        dropAnimating: grabCursor\n      }\n    };\n  }();\n\n  var draggable$1 = function () {\n    var transition = \"\\n      transition: \" + transitions.outOfTheWay + \";\\n    \";\n    return {\n      selector: getSelector(draggable.contextId),\n      styles: {\n        dragging: transition,\n        dropAnimating: transition,\n        userCancel: transition\n      }\n    };\n  }();\n\n  var droppable$1 = {\n    selector: getSelector(droppable.contextId),\n    styles: {\n      always: \"overflow-anchor: none;\"\n    }\n  };\n  var body = {\n    selector: 'body',\n    styles: {\n      dragging: \"\\n        cursor: grabbing;\\n        cursor: -webkit-grabbing;\\n        user-select: none;\\n        -webkit-user-select: none;\\n        -moz-user-select: none;\\n        -ms-user-select: none;\\n        overflow-anchor: none;\\n      \"\n    }\n  };\n  var rules = [draggable$1, dragHandle$1, droppable$1, body];\n  return {\n    always: getStyles(rules, 'always'),\n    resting: getStyles(rules, 'resting'),\n    dragging: getStyles(rules, 'dragging'),\n    dropAnimating: getStyles(rules, 'dropAnimating'),\n    userCancel: getStyles(rules, 'userCancel')\n  };\n});\n\nvar useIsomorphicLayoutEffect = typeof window !== 'undefined' && typeof window.document !== 'undefined' && typeof window.document.createElement !== 'undefined' ? useLayoutEffect : useEffect;\n\nvar getHead = function getHead() {\n  var head = document.querySelector('head');\n  !head ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot find the head to append a style to') : invariant(false) : void 0;\n  return head;\n};\n\nvar createStyleEl = function createStyleEl(nonce) {\n  var el = document.createElement('style');\n\n  if (nonce) {\n    el.setAttribute('nonce', nonce);\n  }\n\n  el.type = 'text/css';\n  return el;\n};\n\nfunction useStyleMarshal(contextId, nonce) {\n  var styles = useMemo(function () {\n    return getStyles$1(contextId);\n  }, [contextId]);\n  var alwaysRef = useRef(null);\n  var dynamicRef = useRef(null);\n  var setDynamicStyle = useCallback(memoizeOne(function (proposed) {\n    var el = dynamicRef.current;\n    !el ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot set dynamic style element if it is not set') : invariant(false) : void 0;\n    el.textContent = proposed;\n  }), []);\n  var setAlwaysStyle = useCallback(function (proposed) {\n    var el = alwaysRef.current;\n    !el ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot set dynamic style element if it is not set') : invariant(false) : void 0;\n    el.textContent = proposed;\n  }, []);\n  useIsomorphicLayoutEffect(function () {\n    !(!alwaysRef.current && !dynamicRef.current) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'style elements already mounted') : invariant(false) : void 0;\n    var always = createStyleEl(nonce);\n    var dynamic = createStyleEl(nonce);\n    alwaysRef.current = always;\n    dynamicRef.current = dynamic;\n    always.setAttribute(prefix$1 + \"-always\", contextId);\n    dynamic.setAttribute(prefix$1 + \"-dynamic\", contextId);\n    getHead().appendChild(always);\n    getHead().appendChild(dynamic);\n    setAlwaysStyle(styles.always);\n    setDynamicStyle(styles.resting);\n    return function () {\n      var remove = function remove(ref) {\n        var current = ref.current;\n        !current ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot unmount ref as it is not set') : invariant(false) : void 0;\n        getHead().removeChild(current);\n        ref.current = null;\n      };\n\n      remove(alwaysRef);\n      remove(dynamicRef);\n    };\n  }, [nonce, setAlwaysStyle, setDynamicStyle, styles.always, styles.resting, contextId]);\n  var dragging = useCallback(function () {\n    return setDynamicStyle(styles.dragging);\n  }, [setDynamicStyle, styles.dragging]);\n  var dropping = useCallback(function (reason) {\n    if (reason === 'DROP') {\n      setDynamicStyle(styles.dropAnimating);\n      return;\n    }\n\n    setDynamicStyle(styles.userCancel);\n  }, [setDynamicStyle, styles.dropAnimating, styles.userCancel]);\n  var resting = useCallback(function () {\n    if (!dynamicRef.current) {\n      return;\n    }\n\n    setDynamicStyle(styles.resting);\n  }, [setDynamicStyle, styles.resting]);\n  var marshal = useMemo(function () {\n    return {\n      dragging: dragging,\n      dropping: dropping,\n      resting: resting\n    };\n  }, [dragging, dropping, resting]);\n  return marshal;\n}\n\nvar getWindowFromEl = (function (el) {\n  return el && el.ownerDocument ? el.ownerDocument.defaultView : window;\n});\n\nfunction isHtmlElement(el) {\n  return el instanceof getWindowFromEl(el).HTMLElement;\n}\n\nfunction findDragHandle(contextId, draggableId) {\n  var selector = \"[\" + dragHandle.contextId + \"=\\\"\" + contextId + \"\\\"]\";\n  var possible = toArray(document.querySelectorAll(selector));\n\n  if (!possible.length) {\n    process.env.NODE_ENV !== \"production\" ? warning(\"Unable to find any drag handles in the context \\\"\" + contextId + \"\\\"\") : void 0;\n    return null;\n  }\n\n  var handle = find(possible, function (el) {\n    return el.getAttribute(dragHandle.draggableId) === draggableId;\n  });\n\n  if (!handle) {\n    process.env.NODE_ENV !== \"production\" ? warning(\"Unable to find drag handle with id \\\"\" + draggableId + \"\\\" as no handle with a matching id was found\") : void 0;\n    return null;\n  }\n\n  if (!isHtmlElement(handle)) {\n    process.env.NODE_ENV !== \"production\" ? warning('drag handle needs to be a HTMLElement') : void 0;\n    return null;\n  }\n\n  return handle;\n}\n\nfunction useFocusMarshal(contextId) {\n  var entriesRef = useRef({});\n  var recordRef = useRef(null);\n  var restoreFocusFrameRef = useRef(null);\n  var isMountedRef = useRef(false);\n  var register = useCallback(function register(id, focus) {\n    var entry = {\n      id: id,\n      focus: focus\n    };\n    entriesRef.current[id] = entry;\n    return function unregister() {\n      var entries = entriesRef.current;\n      var current = entries[id];\n\n      if (current !== entry) {\n        delete entries[id];\n      }\n    };\n  }, []);\n  var tryGiveFocus = useCallback(function tryGiveFocus(tryGiveFocusTo) {\n    var handle = findDragHandle(contextId, tryGiveFocusTo);\n\n    if (handle && handle !== document.activeElement) {\n      handle.focus();\n    }\n  }, [contextId]);\n  var tryShiftRecord = useCallback(function tryShiftRecord(previous, redirectTo) {\n    if (recordRef.current === previous) {\n      recordRef.current = redirectTo;\n    }\n  }, []);\n  var tryRestoreFocusRecorded = useCallback(function tryRestoreFocusRecorded() {\n    if (restoreFocusFrameRef.current) {\n      return;\n    }\n\n    if (!isMountedRef.current) {\n      return;\n    }\n\n    restoreFocusFrameRef.current = requestAnimationFrame(function () {\n      restoreFocusFrameRef.current = null;\n      var record = recordRef.current;\n\n      if (record) {\n        tryGiveFocus(record);\n      }\n    });\n  }, [tryGiveFocus]);\n  var tryRecordFocus = useCallback(function tryRecordFocus(id) {\n    recordRef.current = null;\n    var focused = document.activeElement;\n\n    if (!focused) {\n      return;\n    }\n\n    if (focused.getAttribute(dragHandle.draggableId) !== id) {\n      return;\n    }\n\n    recordRef.current = id;\n  }, []);\n  useIsomorphicLayoutEffect(function () {\n    isMountedRef.current = true;\n    return function clearFrameOnUnmount() {\n      isMountedRef.current = false;\n      var frameId = restoreFocusFrameRef.current;\n\n      if (frameId) {\n        cancelAnimationFrame(frameId);\n      }\n    };\n  }, []);\n  var marshal = useMemo(function () {\n    return {\n      register: register,\n      tryRecordFocus: tryRecordFocus,\n      tryRestoreFocusRecorded: tryRestoreFocusRecorded,\n      tryShiftRecord: tryShiftRecord\n    };\n  }, [register, tryRecordFocus, tryRestoreFocusRecorded, tryShiftRecord]);\n  return marshal;\n}\n\nfunction createRegistry() {\n  var entries = {\n    draggables: {},\n    droppables: {}\n  };\n  var subscribers = [];\n\n  function subscribe(cb) {\n    subscribers.push(cb);\n    return function unsubscribe() {\n      var index = subscribers.indexOf(cb);\n\n      if (index === -1) {\n        return;\n      }\n\n      subscribers.splice(index, 1);\n    };\n  }\n\n  function notify(event) {\n    if (subscribers.length) {\n      subscribers.forEach(function (cb) {\n        return cb(event);\n      });\n    }\n  }\n\n  function findDraggableById(id) {\n    return entries.draggables[id] || null;\n  }\n\n  function getDraggableById(id) {\n    var entry = findDraggableById(id);\n    !entry ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Cannot find draggable entry with id [\" + id + \"]\") : invariant(false) : void 0;\n    return entry;\n  }\n\n  var draggableAPI = {\n    register: function register(entry) {\n      entries.draggables[entry.descriptor.id] = entry;\n      notify({\n        type: 'ADDITION',\n        value: entry\n      });\n    },\n    update: function update(entry, last) {\n      var current = entries.draggables[last.descriptor.id];\n\n      if (!current) {\n        return;\n      }\n\n      if (current.uniqueId !== entry.uniqueId) {\n        return;\n      }\n\n      delete entries.draggables[last.descriptor.id];\n      entries.draggables[entry.descriptor.id] = entry;\n    },\n    unregister: function unregister(entry) {\n      var draggableId = entry.descriptor.id;\n      var current = findDraggableById(draggableId);\n\n      if (!current) {\n        return;\n      }\n\n      if (entry.uniqueId !== current.uniqueId) {\n        return;\n      }\n\n      delete entries.draggables[draggableId];\n      notify({\n        type: 'REMOVAL',\n        value: entry\n      });\n    },\n    getById: getDraggableById,\n    findById: findDraggableById,\n    exists: function exists(id) {\n      return Boolean(findDraggableById(id));\n    },\n    getAllByType: function getAllByType(type) {\n      return values(entries.draggables).filter(function (entry) {\n        return entry.descriptor.type === type;\n      });\n    }\n  };\n\n  function findDroppableById(id) {\n    return entries.droppables[id] || null;\n  }\n\n  function getDroppableById(id) {\n    var entry = findDroppableById(id);\n    !entry ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Cannot find droppable entry with id [\" + id + \"]\") : invariant(false) : void 0;\n    return entry;\n  }\n\n  var droppableAPI = {\n    register: function register(entry) {\n      entries.droppables[entry.descriptor.id] = entry;\n    },\n    unregister: function unregister(entry) {\n      var current = findDroppableById(entry.descriptor.id);\n\n      if (!current) {\n        return;\n      }\n\n      if (entry.uniqueId !== current.uniqueId) {\n        return;\n      }\n\n      delete entries.droppables[entry.descriptor.id];\n    },\n    getById: getDroppableById,\n    findById: findDroppableById,\n    exists: function exists(id) {\n      return Boolean(findDroppableById(id));\n    },\n    getAllByType: function getAllByType(type) {\n      return values(entries.droppables).filter(function (entry) {\n        return entry.descriptor.type === type;\n      });\n    }\n  };\n\n  function clean() {\n    entries.draggables = {};\n    entries.droppables = {};\n    subscribers.length = 0;\n  }\n\n  return {\n    draggable: draggableAPI,\n    droppable: droppableAPI,\n    subscribe: subscribe,\n    clean: clean\n  };\n}\n\nfunction useRegistry() {\n  var registry = useMemo(createRegistry, []);\n  useEffect(function () {\n    return function unmount() {\n      requestAnimationFrame(registry.clean);\n    };\n  }, [registry]);\n  return registry;\n}\n\nvar StoreContext = React.createContext(null);\n\nvar getBodyElement = (function () {\n  var body = document.body;\n  !body ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot find document.body') : invariant(false) : void 0;\n  return body;\n});\n\nvar visuallyHidden = {\n  position: 'absolute',\n  width: '1px',\n  height: '1px',\n  margin: '-1px',\n  border: '0',\n  padding: '0',\n  overflow: 'hidden',\n  clip: 'rect(0 0 0 0)',\n  'clip-path': 'inset(100%)'\n};\n\nvar getId = function getId(contextId) {\n  return \"rbd-announcement-\" + contextId;\n};\nfunction useAnnouncer(contextId) {\n  var id = useMemo(function () {\n    return getId(contextId);\n  }, [contextId]);\n  var ref = useRef(null);\n  useEffect(function setup() {\n    var el = document.createElement('div');\n    ref.current = el;\n    el.id = id;\n    el.setAttribute('aria-live', 'assertive');\n    el.setAttribute('aria-atomic', 'true');\n\n    _extends(el.style, visuallyHidden);\n\n    getBodyElement().appendChild(el);\n    return function cleanup() {\n      setTimeout(function remove() {\n        var body = getBodyElement();\n\n        if (body.contains(el)) {\n          body.removeChild(el);\n        }\n\n        if (el === ref.current) {\n          ref.current = null;\n        }\n      });\n    };\n  }, [id]);\n  var announce = useCallback(function (message) {\n    var el = ref.current;\n\n    if (el) {\n      el.textContent = message;\n      return;\n    }\n\n    process.env.NODE_ENV !== \"production\" ? warning(\"\\n      A screen reader message was trying to be announced but it was unable to do so.\\n      This can occur if you unmount your <DragDropContext /> in your onDragEnd.\\n      Consider calling provided.announce() before the unmount so that the instruction will\\n      not be lost for users relying on a screen reader.\\n\\n      Message not passed to screen reader:\\n\\n      \\\"\" + message + \"\\\"\\n    \") : void 0;\n  }, []);\n  return announce;\n}\n\nvar count = 0;\nvar defaults = {\n  separator: '::'\n};\nfunction reset() {\n  count = 0;\n}\nfunction useUniqueId(prefix, options) {\n  if (options === void 0) {\n    options = defaults;\n  }\n\n  return useMemo(function () {\n    return \"\" + prefix + options.separator + count++;\n  }, [options.separator, prefix]);\n}\n\nfunction getElementId(_ref) {\n  var contextId = _ref.contextId,\n      uniqueId = _ref.uniqueId;\n  return \"rbd-hidden-text-\" + contextId + \"-\" + uniqueId;\n}\nfunction useHiddenTextElement(_ref2) {\n  var contextId = _ref2.contextId,\n      text = _ref2.text;\n  var uniqueId = useUniqueId('hidden-text', {\n    separator: '-'\n  });\n  var id = useMemo(function () {\n    return getElementId({\n      contextId: contextId,\n      uniqueId: uniqueId\n    });\n  }, [uniqueId, contextId]);\n  useEffect(function mount() {\n    var el = document.createElement('div');\n    el.id = id;\n    el.textContent = text;\n    el.style.display = 'none';\n    getBodyElement().appendChild(el);\n    return function unmount() {\n      var body = getBodyElement();\n\n      if (body.contains(el)) {\n        body.removeChild(el);\n      }\n    };\n  }, [id, text]);\n  return id;\n}\n\nvar AppContext = React.createContext(null);\n\nvar peerDependencies = {\n\treact: \"^16.8.5 || ^17.0.0 || ^18.0.0\",\n\t\"react-dom\": \"^16.8.5 || ^17.0.0 || ^18.0.0\"\n};\n\nvar semver = /(\\d+)\\.(\\d+)\\.(\\d+)/;\n\nvar getVersion = function getVersion(value) {\n  var result = semver.exec(value);\n  !(result != null) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Unable to parse React version \" + value) : invariant(false) : void 0;\n  var major = Number(result[1]);\n  var minor = Number(result[2]);\n  var patch = Number(result[3]);\n  return {\n    major: major,\n    minor: minor,\n    patch: patch,\n    raw: value\n  };\n};\n\nvar isSatisfied = function isSatisfied(expected, actual) {\n  if (actual.major > expected.major) {\n    return true;\n  }\n\n  if (actual.major < expected.major) {\n    return false;\n  }\n\n  if (actual.minor > expected.minor) {\n    return true;\n  }\n\n  if (actual.minor < expected.minor) {\n    return false;\n  }\n\n  return actual.patch >= expected.patch;\n};\n\nvar checkReactVersion = (function (peerDepValue, actualValue) {\n  var peerDep = getVersion(peerDepValue);\n  var actual = getVersion(actualValue);\n\n  if (isSatisfied(peerDep, actual)) {\n    return;\n  }\n\n  process.env.NODE_ENV !== \"production\" ? warning(\"\\n    React version: [\" + actual.raw + \"]\\n    does not satisfy expected peer dependency version: [\" + peerDep.raw + \"]\\n\\n    This can result in run time bugs, and even fatal crashes\\n  \") : void 0;\n});\n\nvar suffix = \"\\n  We expect a html5 doctype: <!doctype html>\\n  This is to ensure consistent browser layout and measurement\\n\\n  More information: https://github.com/atlassian/react-beautiful-dnd/blob/master/docs/guides/doctype.md\\n\";\nvar checkDoctype = (function (doc) {\n  var doctype = doc.doctype;\n\n  if (!doctype) {\n    process.env.NODE_ENV !== \"production\" ? warning(\"\\n      No <!doctype html> found.\\n\\n      \" + suffix + \"\\n    \") : void 0;\n    return;\n  }\n\n  if (doctype.name.toLowerCase() !== 'html') {\n    process.env.NODE_ENV !== \"production\" ? warning(\"\\n      Unexpected <!doctype> found: (\" + doctype.name + \")\\n\\n      \" + suffix + \"\\n    \") : void 0;\n  }\n\n  if (doctype.publicId !== '') {\n    process.env.NODE_ENV !== \"production\" ? warning(\"\\n      Unexpected <!doctype> publicId found: (\" + doctype.publicId + \")\\n      A html5 doctype does not have a publicId\\n\\n      \" + suffix + \"\\n    \") : void 0;\n  }\n});\n\nfunction useDev(useHook) {\n  if (process.env.NODE_ENV !== 'production') {\n    useHook();\n  }\n}\n\nfunction useDevSetupWarning(fn, inputs) {\n  useDev(function () {\n    useEffect(function () {\n      try {\n        fn();\n      } catch (e) {\n        error(\"\\n          A setup problem was encountered.\\n\\n          > \" + e.message + \"\\n        \");\n      }\n    }, inputs);\n  });\n}\n\nfunction useStartupValidation() {\n  useDevSetupWarning(function () {\n    checkReactVersion(peerDependencies.react, React.version);\n    checkDoctype(document);\n  }, []);\n}\n\nfunction usePrevious(current) {\n  var ref = useRef(current);\n  useEffect(function () {\n    ref.current = current;\n  });\n  return ref;\n}\n\nfunction create() {\n  var lock = null;\n\n  function isClaimed() {\n    return Boolean(lock);\n  }\n\n  function isActive(value) {\n    return value === lock;\n  }\n\n  function claim(abandon) {\n    !!lock ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot claim lock as it is already claimed') : invariant(false) : void 0;\n    var newLock = {\n      abandon: abandon\n    };\n    lock = newLock;\n    return newLock;\n  }\n\n  function release() {\n    !lock ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot release lock when there is no lock') : invariant(false) : void 0;\n    lock = null;\n  }\n\n  function tryAbandon() {\n    if (lock) {\n      lock.abandon();\n      release();\n    }\n  }\n\n  return {\n    isClaimed: isClaimed,\n    isActive: isActive,\n    claim: claim,\n    release: release,\n    tryAbandon: tryAbandon\n  };\n}\n\nvar tab = 9;\nvar enter = 13;\nvar escape = 27;\nvar space = 32;\nvar pageUp = 33;\nvar pageDown = 34;\nvar end = 35;\nvar home = 36;\nvar arrowLeft = 37;\nvar arrowUp = 38;\nvar arrowRight = 39;\nvar arrowDown = 40;\n\nvar _preventedKeys;\nvar preventedKeys = (_preventedKeys = {}, _preventedKeys[enter] = true, _preventedKeys[tab] = true, _preventedKeys);\nvar preventStandardKeyEvents = (function (event) {\n  if (preventedKeys[event.keyCode]) {\n    event.preventDefault();\n  }\n});\n\nvar supportedEventName = function () {\n  var base = 'visibilitychange';\n\n  if (typeof document === 'undefined') {\n    return base;\n  }\n\n  var candidates = [base, \"ms\" + base, \"webkit\" + base, \"moz\" + base, \"o\" + base];\n  var supported = find(candidates, function (eventName) {\n    return \"on\" + eventName in document;\n  });\n  return supported || base;\n}();\n\nvar primaryButton = 0;\nvar sloppyClickThreshold = 5;\n\nfunction isSloppyClickThresholdExceeded(original, current) {\n  return Math.abs(current.x - original.x) >= sloppyClickThreshold || Math.abs(current.y - original.y) >= sloppyClickThreshold;\n}\n\nvar idle$1 = {\n  type: 'IDLE'\n};\n\nfunction getCaptureBindings(_ref) {\n  var cancel = _ref.cancel,\n      completed = _ref.completed,\n      getPhase = _ref.getPhase,\n      setPhase = _ref.setPhase;\n  return [{\n    eventName: 'mousemove',\n    fn: function fn(event) {\n      var button = event.button,\n          clientX = event.clientX,\n          clientY = event.clientY;\n\n      if (button !== primaryButton) {\n        return;\n      }\n\n      var point = {\n        x: clientX,\n        y: clientY\n      };\n      var phase = getPhase();\n\n      if (phase.type === 'DRAGGING') {\n        event.preventDefault();\n        phase.actions.move(point);\n        return;\n      }\n\n      !(phase.type === 'PENDING') ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot be IDLE') : invariant(false) : void 0;\n      var pending = phase.point;\n\n      if (!isSloppyClickThresholdExceeded(pending, point)) {\n        return;\n      }\n\n      event.preventDefault();\n      var actions = phase.actions.fluidLift(point);\n      setPhase({\n        type: 'DRAGGING',\n        actions: actions\n      });\n    }\n  }, {\n    eventName: 'mouseup',\n    fn: function fn(event) {\n      var phase = getPhase();\n\n      if (phase.type !== 'DRAGGING') {\n        cancel();\n        return;\n      }\n\n      event.preventDefault();\n      phase.actions.drop({\n        shouldBlockNextClick: true\n      });\n      completed();\n    }\n  }, {\n    eventName: 'mousedown',\n    fn: function fn(event) {\n      if (getPhase().type === 'DRAGGING') {\n        event.preventDefault();\n      }\n\n      cancel();\n    }\n  }, {\n    eventName: 'keydown',\n    fn: function fn(event) {\n      var phase = getPhase();\n\n      if (phase.type === 'PENDING') {\n        cancel();\n        return;\n      }\n\n      if (event.keyCode === escape) {\n        event.preventDefault();\n        cancel();\n        return;\n      }\n\n      preventStandardKeyEvents(event);\n    }\n  }, {\n    eventName: 'resize',\n    fn: cancel\n  }, {\n    eventName: 'scroll',\n    options: {\n      passive: true,\n      capture: false\n    },\n    fn: function fn() {\n      if (getPhase().type === 'PENDING') {\n        cancel();\n      }\n    }\n  }, {\n    eventName: 'webkitmouseforcedown',\n    fn: function fn(event) {\n      var phase = getPhase();\n      !(phase.type !== 'IDLE') ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Unexpected phase') : invariant(false) : void 0;\n\n      if (phase.actions.shouldRespectForcePress()) {\n        cancel();\n        return;\n      }\n\n      event.preventDefault();\n    }\n  }, {\n    eventName: supportedEventName,\n    fn: cancel\n  }];\n}\n\nfunction useMouseSensor(api) {\n  var phaseRef = useRef(idle$1);\n  var unbindEventsRef = useRef(noop);\n  var startCaptureBinding = useMemo(function () {\n    return {\n      eventName: 'mousedown',\n      fn: function onMouseDown(event) {\n        if (event.defaultPrevented) {\n          return;\n        }\n\n        if (event.button !== primaryButton) {\n          return;\n        }\n\n        if (event.ctrlKey || event.metaKey || event.shiftKey || event.altKey) {\n          return;\n        }\n\n        var draggableId = api.findClosestDraggableId(event);\n\n        if (!draggableId) {\n          return;\n        }\n\n        var actions = api.tryGetLock(draggableId, stop, {\n          sourceEvent: event\n        });\n\n        if (!actions) {\n          return;\n        }\n\n        event.preventDefault();\n        var point = {\n          x: event.clientX,\n          y: event.clientY\n        };\n        unbindEventsRef.current();\n        startPendingDrag(actions, point);\n      }\n    };\n  }, [api]);\n  var preventForcePressBinding = useMemo(function () {\n    return {\n      eventName: 'webkitmouseforcewillbegin',\n      fn: function fn(event) {\n        if (event.defaultPrevented) {\n          return;\n        }\n\n        var id = api.findClosestDraggableId(event);\n\n        if (!id) {\n          return;\n        }\n\n        var options = api.findOptionsForDraggable(id);\n\n        if (!options) {\n          return;\n        }\n\n        if (options.shouldRespectForcePress) {\n          return;\n        }\n\n        if (!api.canGetLock(id)) {\n          return;\n        }\n\n        event.preventDefault();\n      }\n    };\n  }, [api]);\n  var listenForCapture = useCallback(function listenForCapture() {\n    var options = {\n      passive: false,\n      capture: true\n    };\n    unbindEventsRef.current = bindEvents(window, [preventForcePressBinding, startCaptureBinding], options);\n  }, [preventForcePressBinding, startCaptureBinding]);\n  var stop = useCallback(function () {\n    var current = phaseRef.current;\n\n    if (current.type === 'IDLE') {\n      return;\n    }\n\n    phaseRef.current = idle$1;\n    unbindEventsRef.current();\n    listenForCapture();\n  }, [listenForCapture]);\n  var cancel = useCallback(function () {\n    var phase = phaseRef.current;\n    stop();\n\n    if (phase.type === 'DRAGGING') {\n      phase.actions.cancel({\n        shouldBlockNextClick: true\n      });\n    }\n\n    if (phase.type === 'PENDING') {\n      phase.actions.abort();\n    }\n  }, [stop]);\n  var bindCapturingEvents = useCallback(function bindCapturingEvents() {\n    var options = {\n      capture: true,\n      passive: false\n    };\n    var bindings = getCaptureBindings({\n      cancel: cancel,\n      completed: stop,\n      getPhase: function getPhase() {\n        return phaseRef.current;\n      },\n      setPhase: function setPhase(phase) {\n        phaseRef.current = phase;\n      }\n    });\n    unbindEventsRef.current = bindEvents(window, bindings, options);\n  }, [cancel, stop]);\n  var startPendingDrag = useCallback(function startPendingDrag(actions, point) {\n    !(phaseRef.current.type === 'IDLE') ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Expected to move from IDLE to PENDING drag') : invariant(false) : void 0;\n    phaseRef.current = {\n      type: 'PENDING',\n      point: point,\n      actions: actions\n    };\n    bindCapturingEvents();\n  }, [bindCapturingEvents]);\n  useIsomorphicLayoutEffect(function mount() {\n    listenForCapture();\n    return function unmount() {\n      unbindEventsRef.current();\n    };\n  }, [listenForCapture]);\n}\n\nvar _scrollJumpKeys;\n\nfunction noop$1() {}\n\nvar scrollJumpKeys = (_scrollJumpKeys = {}, _scrollJumpKeys[pageDown] = true, _scrollJumpKeys[pageUp] = true, _scrollJumpKeys[home] = true, _scrollJumpKeys[end] = true, _scrollJumpKeys);\n\nfunction getDraggingBindings(actions, stop) {\n  function cancel() {\n    stop();\n    actions.cancel();\n  }\n\n  function drop() {\n    stop();\n    actions.drop();\n  }\n\n  return [{\n    eventName: 'keydown',\n    fn: function fn(event) {\n      if (event.keyCode === escape) {\n        event.preventDefault();\n        cancel();\n        return;\n      }\n\n      if (event.keyCode === space) {\n        event.preventDefault();\n        drop();\n        return;\n      }\n\n      if (event.keyCode === arrowDown) {\n        event.preventDefault();\n        actions.moveDown();\n        return;\n      }\n\n      if (event.keyCode === arrowUp) {\n        event.preventDefault();\n        actions.moveUp();\n        return;\n      }\n\n      if (event.keyCode === arrowRight) {\n        event.preventDefault();\n        actions.moveRight();\n        return;\n      }\n\n      if (event.keyCode === arrowLeft) {\n        event.preventDefault();\n        actions.moveLeft();\n        return;\n      }\n\n      if (scrollJumpKeys[event.keyCode]) {\n        event.preventDefault();\n        return;\n      }\n\n      preventStandardKeyEvents(event);\n    }\n  }, {\n    eventName: 'mousedown',\n    fn: cancel\n  }, {\n    eventName: 'mouseup',\n    fn: cancel\n  }, {\n    eventName: 'click',\n    fn: cancel\n  }, {\n    eventName: 'touchstart',\n    fn: cancel\n  }, {\n    eventName: 'resize',\n    fn: cancel\n  }, {\n    eventName: 'wheel',\n    fn: cancel,\n    options: {\n      passive: true\n    }\n  }, {\n    eventName: supportedEventName,\n    fn: cancel\n  }];\n}\n\nfunction useKeyboardSensor(api) {\n  var unbindEventsRef = useRef(noop$1);\n  var startCaptureBinding = useMemo(function () {\n    return {\n      eventName: 'keydown',\n      fn: function onKeyDown(event) {\n        if (event.defaultPrevented) {\n          return;\n        }\n\n        if (event.keyCode !== space) {\n          return;\n        }\n\n        var draggableId = api.findClosestDraggableId(event);\n\n        if (!draggableId) {\n          return;\n        }\n\n        var preDrag = api.tryGetLock(draggableId, stop, {\n          sourceEvent: event\n        });\n\n        if (!preDrag) {\n          return;\n        }\n\n        event.preventDefault();\n        var isCapturing = true;\n        var actions = preDrag.snapLift();\n        unbindEventsRef.current();\n\n        function stop() {\n          !isCapturing ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot stop capturing a keyboard drag when not capturing') : invariant(false) : void 0;\n          isCapturing = false;\n          unbindEventsRef.current();\n          listenForCapture();\n        }\n\n        unbindEventsRef.current = bindEvents(window, getDraggingBindings(actions, stop), {\n          capture: true,\n          passive: false\n        });\n      }\n    };\n  }, [api]);\n  var listenForCapture = useCallback(function tryStartCapture() {\n    var options = {\n      passive: false,\n      capture: true\n    };\n    unbindEventsRef.current = bindEvents(window, [startCaptureBinding], options);\n  }, [startCaptureBinding]);\n  useIsomorphicLayoutEffect(function mount() {\n    listenForCapture();\n    return function unmount() {\n      unbindEventsRef.current();\n    };\n  }, [listenForCapture]);\n}\n\nvar idle$2 = {\n  type: 'IDLE'\n};\nvar timeForLongPress = 120;\nvar forcePressThreshold = 0.15;\n\nfunction getWindowBindings(_ref) {\n  var cancel = _ref.cancel,\n      getPhase = _ref.getPhase;\n  return [{\n    eventName: 'orientationchange',\n    fn: cancel\n  }, {\n    eventName: 'resize',\n    fn: cancel\n  }, {\n    eventName: 'contextmenu',\n    fn: function fn(event) {\n      event.preventDefault();\n    }\n  }, {\n    eventName: 'keydown',\n    fn: function fn(event) {\n      if (getPhase().type !== 'DRAGGING') {\n        cancel();\n        return;\n      }\n\n      if (event.keyCode === escape) {\n        event.preventDefault();\n      }\n\n      cancel();\n    }\n  }, {\n    eventName: supportedEventName,\n    fn: cancel\n  }];\n}\n\nfunction getHandleBindings(_ref2) {\n  var cancel = _ref2.cancel,\n      completed = _ref2.completed,\n      getPhase = _ref2.getPhase;\n  return [{\n    eventName: 'touchmove',\n    options: {\n      capture: false\n    },\n    fn: function fn(event) {\n      var phase = getPhase();\n\n      if (phase.type !== 'DRAGGING') {\n        cancel();\n        return;\n      }\n\n      phase.hasMoved = true;\n      var _event$touches$ = event.touches[0],\n          clientX = _event$touches$.clientX,\n          clientY = _event$touches$.clientY;\n      var point = {\n        x: clientX,\n        y: clientY\n      };\n      event.preventDefault();\n      phase.actions.move(point);\n    }\n  }, {\n    eventName: 'touchend',\n    fn: function fn(event) {\n      var phase = getPhase();\n\n      if (phase.type !== 'DRAGGING') {\n        cancel();\n        return;\n      }\n\n      event.preventDefault();\n      phase.actions.drop({\n        shouldBlockNextClick: true\n      });\n      completed();\n    }\n  }, {\n    eventName: 'touchcancel',\n    fn: function fn(event) {\n      if (getPhase().type !== 'DRAGGING') {\n        cancel();\n        return;\n      }\n\n      event.preventDefault();\n      cancel();\n    }\n  }, {\n    eventName: 'touchforcechange',\n    fn: function fn(event) {\n      var phase = getPhase();\n      !(phase.type !== 'IDLE') ? process.env.NODE_ENV !== \"production\" ? invariant(false) : invariant(false) : void 0;\n      var touch = event.touches[0];\n\n      if (!touch) {\n        return;\n      }\n\n      var isForcePress = touch.force >= forcePressThreshold;\n\n      if (!isForcePress) {\n        return;\n      }\n\n      var shouldRespect = phase.actions.shouldRespectForcePress();\n\n      if (phase.type === 'PENDING') {\n        if (shouldRespect) {\n          cancel();\n        }\n\n        return;\n      }\n\n      if (shouldRespect) {\n        if (phase.hasMoved) {\n          event.preventDefault();\n          return;\n        }\n\n        cancel();\n        return;\n      }\n\n      event.preventDefault();\n    }\n  }, {\n    eventName: supportedEventName,\n    fn: cancel\n  }];\n}\n\nfunction useTouchSensor(api) {\n  var phaseRef = useRef(idle$2);\n  var unbindEventsRef = useRef(noop);\n  var getPhase = useCallback(function getPhase() {\n    return phaseRef.current;\n  }, []);\n  var setPhase = useCallback(function setPhase(phase) {\n    phaseRef.current = phase;\n  }, []);\n  var startCaptureBinding = useMemo(function () {\n    return {\n      eventName: 'touchstart',\n      fn: function onTouchStart(event) {\n        if (event.defaultPrevented) {\n          return;\n        }\n\n        var draggableId = api.findClosestDraggableId(event);\n\n        if (!draggableId) {\n          return;\n        }\n\n        var actions = api.tryGetLock(draggableId, stop, {\n          sourceEvent: event\n        });\n\n        if (!actions) {\n          return;\n        }\n\n        var touch = event.touches[0];\n        var clientX = touch.clientX,\n            clientY = touch.clientY;\n        var point = {\n          x: clientX,\n          y: clientY\n        };\n        unbindEventsRef.current();\n        startPendingDrag(actions, point);\n      }\n    };\n  }, [api]);\n  var listenForCapture = useCallback(function listenForCapture() {\n    var options = {\n      capture: true,\n      passive: false\n    };\n    unbindEventsRef.current = bindEvents(window, [startCaptureBinding], options);\n  }, [startCaptureBinding]);\n  var stop = useCallback(function () {\n    var current = phaseRef.current;\n\n    if (current.type === 'IDLE') {\n      return;\n    }\n\n    if (current.type === 'PENDING') {\n      clearTimeout(current.longPressTimerId);\n    }\n\n    setPhase(idle$2);\n    unbindEventsRef.current();\n    listenForCapture();\n  }, [listenForCapture, setPhase]);\n  var cancel = useCallback(function () {\n    var phase = phaseRef.current;\n    stop();\n\n    if (phase.type === 'DRAGGING') {\n      phase.actions.cancel({\n        shouldBlockNextClick: true\n      });\n    }\n\n    if (phase.type === 'PENDING') {\n      phase.actions.abort();\n    }\n  }, [stop]);\n  var bindCapturingEvents = useCallback(function bindCapturingEvents() {\n    var options = {\n      capture: true,\n      passive: false\n    };\n    var args = {\n      cancel: cancel,\n      completed: stop,\n      getPhase: getPhase\n    };\n    var unbindTarget = bindEvents(window, getHandleBindings(args), options);\n    var unbindWindow = bindEvents(window, getWindowBindings(args), options);\n\n    unbindEventsRef.current = function unbindAll() {\n      unbindTarget();\n      unbindWindow();\n    };\n  }, [cancel, getPhase, stop]);\n  var startDragging = useCallback(function startDragging() {\n    var phase = getPhase();\n    !(phase.type === 'PENDING') ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Cannot start dragging from phase \" + phase.type) : invariant(false) : void 0;\n    var actions = phase.actions.fluidLift(phase.point);\n    setPhase({\n      type: 'DRAGGING',\n      actions: actions,\n      hasMoved: false\n    });\n  }, [getPhase, setPhase]);\n  var startPendingDrag = useCallback(function startPendingDrag(actions, point) {\n    !(getPhase().type === 'IDLE') ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Expected to move from IDLE to PENDING drag') : invariant(false) : void 0;\n    var longPressTimerId = setTimeout(startDragging, timeForLongPress);\n    setPhase({\n      type: 'PENDING',\n      point: point,\n      actions: actions,\n      longPressTimerId: longPressTimerId\n    });\n    bindCapturingEvents();\n  }, [bindCapturingEvents, getPhase, setPhase, startDragging]);\n  useIsomorphicLayoutEffect(function mount() {\n    listenForCapture();\n    return function unmount() {\n      unbindEventsRef.current();\n      var phase = getPhase();\n\n      if (phase.type === 'PENDING') {\n        clearTimeout(phase.longPressTimerId);\n        setPhase(idle$2);\n      }\n    };\n  }, [getPhase, listenForCapture, setPhase]);\n  useIsomorphicLayoutEffect(function webkitHack() {\n    var unbind = bindEvents(window, [{\n      eventName: 'touchmove',\n      fn: function fn() {},\n      options: {\n        capture: false,\n        passive: false\n      }\n    }]);\n    return unbind;\n  }, []);\n}\n\nfunction useValidateSensorHooks(sensorHooks) {\n  useDev(function () {\n    var previousRef = usePrevious(sensorHooks);\n    useDevSetupWarning(function () {\n      !(previousRef.current.length === sensorHooks.length) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot change the amount of sensor hooks after mounting') : invariant(false) : void 0;\n    });\n  });\n}\n\nvar interactiveTagNames = {\n  input: true,\n  button: true,\n  textarea: true,\n  select: true,\n  option: true,\n  optgroup: true,\n  video: true,\n  audio: true\n};\n\nfunction isAnInteractiveElement(parent, current) {\n  if (current == null) {\n    return false;\n  }\n\n  var hasAnInteractiveTag = Boolean(interactiveTagNames[current.tagName.toLowerCase()]);\n\n  if (hasAnInteractiveTag) {\n    return true;\n  }\n\n  var attribute = current.getAttribute('contenteditable');\n\n  if (attribute === 'true' || attribute === '') {\n    return true;\n  }\n\n  if (current === parent) {\n    return false;\n  }\n\n  return isAnInteractiveElement(parent, current.parentElement);\n}\n\nfunction isEventInInteractiveElement(draggable, event) {\n  var target = event.target;\n\n  if (!isHtmlElement(target)) {\n    return false;\n  }\n\n  return isAnInteractiveElement(draggable, target);\n}\n\nvar getBorderBoxCenterPosition = (function (el) {\n  return getRect(el.getBoundingClientRect()).center;\n});\n\nfunction isElement(el) {\n  return el instanceof getWindowFromEl(el).Element;\n}\n\nvar supportedMatchesName = function () {\n  var base = 'matches';\n\n  if (typeof document === 'undefined') {\n    return base;\n  }\n\n  var candidates = [base, 'msMatchesSelector', 'webkitMatchesSelector'];\n  var value = find(candidates, function (name) {\n    return name in Element.prototype;\n  });\n  return value || base;\n}();\n\nfunction closestPonyfill(el, selector) {\n  if (el == null) {\n    return null;\n  }\n\n  if (el[supportedMatchesName](selector)) {\n    return el;\n  }\n\n  return closestPonyfill(el.parentElement, selector);\n}\n\nfunction closest$1(el, selector) {\n  if (el.closest) {\n    return el.closest(selector);\n  }\n\n  return closestPonyfill(el, selector);\n}\n\nfunction getSelector(contextId) {\n  return \"[\" + dragHandle.contextId + \"=\\\"\" + contextId + \"\\\"]\";\n}\n\nfunction findClosestDragHandleFromEvent(contextId, event) {\n  var target = event.target;\n\n  if (!isElement(target)) {\n    process.env.NODE_ENV !== \"production\" ? warning('event.target must be a Element') : void 0;\n    return null;\n  }\n\n  var selector = getSelector(contextId);\n  var handle = closest$1(target, selector);\n\n  if (!handle) {\n    return null;\n  }\n\n  if (!isHtmlElement(handle)) {\n    process.env.NODE_ENV !== \"production\" ? warning('drag handle must be a HTMLElement') : void 0;\n    return null;\n  }\n\n  return handle;\n}\n\nfunction tryGetClosestDraggableIdFromEvent(contextId, event) {\n  var handle = findClosestDragHandleFromEvent(contextId, event);\n\n  if (!handle) {\n    return null;\n  }\n\n  return handle.getAttribute(dragHandle.draggableId);\n}\n\nfunction findDraggable(contextId, draggableId) {\n  var selector = \"[\" + draggable.contextId + \"=\\\"\" + contextId + \"\\\"]\";\n  var possible = toArray(document.querySelectorAll(selector));\n  var draggable$1 = find(possible, function (el) {\n    return el.getAttribute(draggable.id) === draggableId;\n  });\n\n  if (!draggable$1) {\n    return null;\n  }\n\n  if (!isHtmlElement(draggable$1)) {\n    process.env.NODE_ENV !== \"production\" ? warning('Draggable element is not a HTMLElement') : void 0;\n    return null;\n  }\n\n  return draggable$1;\n}\n\nfunction preventDefault(event) {\n  event.preventDefault();\n}\n\nfunction _isActive(_ref) {\n  var expected = _ref.expected,\n      phase = _ref.phase,\n      isLockActive = _ref.isLockActive,\n      shouldWarn = _ref.shouldWarn;\n\n  if (!isLockActive()) {\n    if (shouldWarn) {\n      process.env.NODE_ENV !== \"production\" ? warning(\"\\n        Cannot perform action.\\n        The sensor no longer has an action lock.\\n\\n        Tips:\\n\\n        - Throw away your action handlers when forceStop() is called\\n        - Check actions.isActive() if you really need to\\n      \") : void 0;\n    }\n\n    return false;\n  }\n\n  if (expected !== phase) {\n    if (shouldWarn) {\n      process.env.NODE_ENV !== \"production\" ? warning(\"\\n        Cannot perform action.\\n        The actions you used belong to an outdated phase\\n\\n        Current phase: \" + expected + \"\\n        You called an action from outdated phase: \" + phase + \"\\n\\n        Tips:\\n\\n        - Do not use preDragActions actions after calling preDragActions.lift()\\n      \") : void 0;\n    }\n\n    return false;\n  }\n\n  return true;\n}\n\nfunction canStart(_ref2) {\n  var lockAPI = _ref2.lockAPI,\n      store = _ref2.store,\n      registry = _ref2.registry,\n      draggableId = _ref2.draggableId;\n\n  if (lockAPI.isClaimed()) {\n    return false;\n  }\n\n  var entry = registry.draggable.findById(draggableId);\n\n  if (!entry) {\n    process.env.NODE_ENV !== \"production\" ? warning(\"Unable to find draggable with id: \" + draggableId) : void 0;\n    return false;\n  }\n\n  if (!entry.options.isEnabled) {\n    return false;\n  }\n\n  if (!canStartDrag(store.getState(), draggableId)) {\n    return false;\n  }\n\n  return true;\n}\n\nfunction tryStart(_ref3) {\n  var lockAPI = _ref3.lockAPI,\n      contextId = _ref3.contextId,\n      store = _ref3.store,\n      registry = _ref3.registry,\n      draggableId = _ref3.draggableId,\n      forceSensorStop = _ref3.forceSensorStop,\n      sourceEvent = _ref3.sourceEvent;\n  var shouldStart = canStart({\n    lockAPI: lockAPI,\n    store: store,\n    registry: registry,\n    draggableId: draggableId\n  });\n\n  if (!shouldStart) {\n    return null;\n  }\n\n  var entry = registry.draggable.getById(draggableId);\n  var el = findDraggable(contextId, entry.descriptor.id);\n\n  if (!el) {\n    process.env.NODE_ENV !== \"production\" ? warning(\"Unable to find draggable element with id: \" + draggableId) : void 0;\n    return null;\n  }\n\n  if (sourceEvent && !entry.options.canDragInteractiveElements && isEventInInteractiveElement(el, sourceEvent)) {\n    return null;\n  }\n\n  var lock = lockAPI.claim(forceSensorStop || noop);\n  var phase = 'PRE_DRAG';\n\n  function getShouldRespectForcePress() {\n    return entry.options.shouldRespectForcePress;\n  }\n\n  function isLockActive() {\n    return lockAPI.isActive(lock);\n  }\n\n  function tryDispatch(expected, getAction) {\n    if (_isActive({\n      expected: expected,\n      phase: phase,\n      isLockActive: isLockActive,\n      shouldWarn: true\n    })) {\n      store.dispatch(getAction());\n    }\n  }\n\n  var tryDispatchWhenDragging = tryDispatch.bind(null, 'DRAGGING');\n\n  function lift$1(args) {\n    function completed() {\n      lockAPI.release();\n      phase = 'COMPLETED';\n    }\n\n    if (phase !== 'PRE_DRAG') {\n      completed();\n      !(phase === 'PRE_DRAG') ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Cannot lift in phase \" + phase) : invariant(false) : void 0;\n    }\n\n    store.dispatch(lift(args.liftActionArgs));\n    phase = 'DRAGGING';\n\n    function finish(reason, options) {\n      if (options === void 0) {\n        options = {\n          shouldBlockNextClick: false\n        };\n      }\n\n      args.cleanup();\n\n      if (options.shouldBlockNextClick) {\n        var unbind = bindEvents(window, [{\n          eventName: 'click',\n          fn: preventDefault,\n          options: {\n            once: true,\n            passive: false,\n            capture: true\n          }\n        }]);\n        setTimeout(unbind);\n      }\n\n      completed();\n      store.dispatch(drop({\n        reason: reason\n      }));\n    }\n\n    return _extends({\n      isActive: function isActive() {\n        return _isActive({\n          expected: 'DRAGGING',\n          phase: phase,\n          isLockActive: isLockActive,\n          shouldWarn: false\n        });\n      },\n      shouldRespectForcePress: getShouldRespectForcePress,\n      drop: function drop(options) {\n        return finish('DROP', options);\n      },\n      cancel: function cancel(options) {\n        return finish('CANCEL', options);\n      }\n    }, args.actions);\n  }\n\n  function fluidLift(clientSelection) {\n    var move$1 = rafSchd(function (client) {\n      tryDispatchWhenDragging(function () {\n        return move({\n          client: client\n        });\n      });\n    });\n    var api = lift$1({\n      liftActionArgs: {\n        id: draggableId,\n        clientSelection: clientSelection,\n        movementMode: 'FLUID'\n      },\n      cleanup: function cleanup() {\n        return move$1.cancel();\n      },\n      actions: {\n        move: move$1\n      }\n    });\n    return _extends({}, api, {\n      move: move$1\n    });\n  }\n\n  function snapLift() {\n    var actions = {\n      moveUp: function moveUp$1() {\n        return tryDispatchWhenDragging(moveUp);\n      },\n      moveRight: function moveRight$1() {\n        return tryDispatchWhenDragging(moveRight);\n      },\n      moveDown: function moveDown$1() {\n        return tryDispatchWhenDragging(moveDown);\n      },\n      moveLeft: function moveLeft$1() {\n        return tryDispatchWhenDragging(moveLeft);\n      }\n    };\n    return lift$1({\n      liftActionArgs: {\n        id: draggableId,\n        clientSelection: getBorderBoxCenterPosition(el),\n        movementMode: 'SNAP'\n      },\n      cleanup: noop,\n      actions: actions\n    });\n  }\n\n  function abortPreDrag() {\n    var shouldRelease = _isActive({\n      expected: 'PRE_DRAG',\n      phase: phase,\n      isLockActive: isLockActive,\n      shouldWarn: true\n    });\n\n    if (shouldRelease) {\n      lockAPI.release();\n    }\n  }\n\n  var preDrag = {\n    isActive: function isActive() {\n      return _isActive({\n        expected: 'PRE_DRAG',\n        phase: phase,\n        isLockActive: isLockActive,\n        shouldWarn: false\n      });\n    },\n    shouldRespectForcePress: getShouldRespectForcePress,\n    fluidLift: fluidLift,\n    snapLift: snapLift,\n    abort: abortPreDrag\n  };\n  return preDrag;\n}\n\nvar defaultSensors = [useMouseSensor, useKeyboardSensor, useTouchSensor];\nfunction useSensorMarshal(_ref4) {\n  var contextId = _ref4.contextId,\n      store = _ref4.store,\n      registry = _ref4.registry,\n      customSensors = _ref4.customSensors,\n      enableDefaultSensors = _ref4.enableDefaultSensors;\n  var useSensors = [].concat(enableDefaultSensors ? defaultSensors : [], customSensors || []);\n  var lockAPI = useState(function () {\n    return create();\n  })[0];\n  var tryAbandonLock = useCallback(function tryAbandonLock(previous, current) {\n    if (previous.isDragging && !current.isDragging) {\n      lockAPI.tryAbandon();\n    }\n  }, [lockAPI]);\n  useIsomorphicLayoutEffect(function listenToStore() {\n    var previous = store.getState();\n    var unsubscribe = store.subscribe(function () {\n      var current = store.getState();\n      tryAbandonLock(previous, current);\n      previous = current;\n    });\n    return unsubscribe;\n  }, [lockAPI, store, tryAbandonLock]);\n  useIsomorphicLayoutEffect(function () {\n    return lockAPI.tryAbandon;\n  }, [lockAPI.tryAbandon]);\n  var canGetLock = useCallback(function (draggableId) {\n    return canStart({\n      lockAPI: lockAPI,\n      registry: registry,\n      store: store,\n      draggableId: draggableId\n    });\n  }, [lockAPI, registry, store]);\n  var tryGetLock = useCallback(function (draggableId, forceStop, options) {\n    return tryStart({\n      lockAPI: lockAPI,\n      registry: registry,\n      contextId: contextId,\n      store: store,\n      draggableId: draggableId,\n      forceSensorStop: forceStop,\n      sourceEvent: options && options.sourceEvent ? options.sourceEvent : null\n    });\n  }, [contextId, lockAPI, registry, store]);\n  var findClosestDraggableId = useCallback(function (event) {\n    return tryGetClosestDraggableIdFromEvent(contextId, event);\n  }, [contextId]);\n  var findOptionsForDraggable = useCallback(function (id) {\n    var entry = registry.draggable.findById(id);\n    return entry ? entry.options : null;\n  }, [registry.draggable]);\n  var tryReleaseLock = useCallback(function tryReleaseLock() {\n    if (!lockAPI.isClaimed()) {\n      return;\n    }\n\n    lockAPI.tryAbandon();\n\n    if (store.getState().phase !== 'IDLE') {\n      store.dispatch(flush());\n    }\n  }, [lockAPI, store]);\n  var isLockClaimed = useCallback(lockAPI.isClaimed, [lockAPI]);\n  var api = useMemo(function () {\n    return {\n      canGetLock: canGetLock,\n      tryGetLock: tryGetLock,\n      findClosestDraggableId: findClosestDraggableId,\n      findOptionsForDraggable: findOptionsForDraggable,\n      tryReleaseLock: tryReleaseLock,\n      isLockClaimed: isLockClaimed\n    };\n  }, [canGetLock, tryGetLock, findClosestDraggableId, findOptionsForDraggable, tryReleaseLock, isLockClaimed]);\n  useValidateSensorHooks(useSensors);\n\n  for (var i = 0; i < useSensors.length; i++) {\n    useSensors[i](api);\n  }\n}\n\nvar createResponders = function createResponders(props) {\n  return {\n    onBeforeCapture: props.onBeforeCapture,\n    onBeforeDragStart: props.onBeforeDragStart,\n    onDragStart: props.onDragStart,\n    onDragEnd: props.onDragEnd,\n    onDragUpdate: props.onDragUpdate\n  };\n};\n\nfunction getStore(lazyRef) {\n  !lazyRef.current ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Could not find store from lazy ref') : invariant(false) : void 0;\n  return lazyRef.current;\n}\n\nfunction App(props) {\n  var contextId = props.contextId,\n      setCallbacks = props.setCallbacks,\n      sensors = props.sensors,\n      nonce = props.nonce,\n      dragHandleUsageInstructions = props.dragHandleUsageInstructions;\n  var lazyStoreRef = useRef(null);\n  useStartupValidation();\n  var lastPropsRef = usePrevious(props);\n  var getResponders = useCallback(function () {\n    return createResponders(lastPropsRef.current);\n  }, [lastPropsRef]);\n  var announce = useAnnouncer(contextId);\n  var dragHandleUsageInstructionsId = useHiddenTextElement({\n    contextId: contextId,\n    text: dragHandleUsageInstructions\n  });\n  var styleMarshal = useStyleMarshal(contextId, nonce);\n  var lazyDispatch = useCallback(function (action) {\n    getStore(lazyStoreRef).dispatch(action);\n  }, []);\n  var marshalCallbacks = useMemo(function () {\n    return bindActionCreators({\n      publishWhileDragging: publishWhileDragging,\n      updateDroppableScroll: updateDroppableScroll,\n      updateDroppableIsEnabled: updateDroppableIsEnabled,\n      updateDroppableIsCombineEnabled: updateDroppableIsCombineEnabled,\n      collectionStarting: collectionStarting\n    }, lazyDispatch);\n  }, [lazyDispatch]);\n  var registry = useRegistry();\n  var dimensionMarshal = useMemo(function () {\n    return createDimensionMarshal(registry, marshalCallbacks);\n  }, [registry, marshalCallbacks]);\n  var autoScroller = useMemo(function () {\n    return createAutoScroller(_extends({\n      scrollWindow: scrollWindow,\n      scrollDroppable: dimensionMarshal.scrollDroppable\n    }, bindActionCreators({\n      move: move\n    }, lazyDispatch)));\n  }, [dimensionMarshal.scrollDroppable, lazyDispatch]);\n  var focusMarshal = useFocusMarshal(contextId);\n  var store = useMemo(function () {\n    return createStore({\n      announce: announce,\n      autoScroller: autoScroller,\n      dimensionMarshal: dimensionMarshal,\n      focusMarshal: focusMarshal,\n      getResponders: getResponders,\n      styleMarshal: styleMarshal\n    });\n  }, [announce, autoScroller, dimensionMarshal, focusMarshal, getResponders, styleMarshal]);\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (lazyStoreRef.current && lazyStoreRef.current !== store) {\n      process.env.NODE_ENV !== \"production\" ? warning('unexpected store change') : void 0;\n    }\n  }\n\n  lazyStoreRef.current = store;\n  var tryResetStore = useCallback(function () {\n    var current = getStore(lazyStoreRef);\n    var state = current.getState();\n\n    if (state.phase !== 'IDLE') {\n      current.dispatch(flush());\n    }\n  }, []);\n  var isDragging = useCallback(function () {\n    var state = getStore(lazyStoreRef).getState();\n    return state.isDragging || state.phase === 'DROP_ANIMATING';\n  }, []);\n  var appCallbacks = useMemo(function () {\n    return {\n      isDragging: isDragging,\n      tryAbort: tryResetStore\n    };\n  }, [isDragging, tryResetStore]);\n  setCallbacks(appCallbacks);\n  var getCanLift = useCallback(function (id) {\n    return canStartDrag(getStore(lazyStoreRef).getState(), id);\n  }, []);\n  var getIsMovementAllowed = useCallback(function () {\n    return isMovementAllowed(getStore(lazyStoreRef).getState());\n  }, []);\n  var appContext = useMemo(function () {\n    return {\n      marshal: dimensionMarshal,\n      focus: focusMarshal,\n      contextId: contextId,\n      canLift: getCanLift,\n      isMovementAllowed: getIsMovementAllowed,\n      dragHandleUsageInstructionsId: dragHandleUsageInstructionsId,\n      registry: registry\n    };\n  }, [contextId, dimensionMarshal, dragHandleUsageInstructionsId, focusMarshal, getCanLift, getIsMovementAllowed, registry]);\n  useSensorMarshal({\n    contextId: contextId,\n    store: store,\n    registry: registry,\n    customSensors: sensors,\n    enableDefaultSensors: props.enableDefaultSensors !== false\n  });\n  useEffect(function () {\n    return tryResetStore;\n  }, [tryResetStore]);\n  return React.createElement(AppContext.Provider, {\n    value: appContext\n  }, React.createElement(Provider, {\n    context: StoreContext,\n    store: store\n  }, props.children));\n}\n\nvar count$1 = 0;\nfunction reset$1() {\n  count$1 = 0;\n}\nfunction useInstanceCount() {\n  return useMemo(function () {\n    return \"\" + count$1++;\n  }, []);\n}\n\nfunction resetServerContext() {\n  reset$1();\n  reset();\n}\nfunction DragDropContext(props) {\n  var contextId = useInstanceCount();\n  var dragHandleUsageInstructions = props.dragHandleUsageInstructions || preset.dragHandleUsageInstructions;\n  return React.createElement(ErrorBoundary, null, function (setCallbacks) {\n    return React.createElement(App, {\n      nonce: props.nonce,\n      contextId: contextId,\n      setCallbacks: setCallbacks,\n      dragHandleUsageInstructions: dragHandleUsageInstructions,\n      enableDefaultSensors: props.enableDefaultSensors,\n      sensors: props.sensors,\n      onBeforeCapture: props.onBeforeCapture,\n      onBeforeDragStart: props.onBeforeDragStart,\n      onDragStart: props.onDragStart,\n      onDragUpdate: props.onDragUpdate,\n      onDragEnd: props.onDragEnd\n    }, props.children);\n  });\n}\n\nvar isEqual$1 = function isEqual(base) {\n  return function (value) {\n    return base === value;\n  };\n};\n\nvar isScroll = isEqual$1('scroll');\nvar isAuto = isEqual$1('auto');\nvar isVisible$1 = isEqual$1('visible');\n\nvar isEither = function isEither(overflow, fn) {\n  return fn(overflow.overflowX) || fn(overflow.overflowY);\n};\n\nvar isBoth = function isBoth(overflow, fn) {\n  return fn(overflow.overflowX) && fn(overflow.overflowY);\n};\n\nvar isElementScrollable = function isElementScrollable(el) {\n  var style = window.getComputedStyle(el);\n  var overflow = {\n    overflowX: style.overflowX,\n    overflowY: style.overflowY\n  };\n  return isEither(overflow, isScroll) || isEither(overflow, isAuto);\n};\n\nvar isBodyScrollable = function isBodyScrollable() {\n  if (process.env.NODE_ENV === 'production') {\n    return false;\n  }\n\n  var body = getBodyElement();\n  var html = document.documentElement;\n  !html ? process.env.NODE_ENV !== \"production\" ? invariant(false) : invariant(false) : void 0;\n\n  if (!isElementScrollable(body)) {\n    return false;\n  }\n\n  var htmlStyle = window.getComputedStyle(html);\n  var htmlOverflow = {\n    overflowX: htmlStyle.overflowX,\n    overflowY: htmlStyle.overflowY\n  };\n\n  if (isBoth(htmlOverflow, isVisible$1)) {\n    return false;\n  }\n\n  process.env.NODE_ENV !== \"production\" ? warning(\"\\n    We have detected that your <body> element might be a scroll container.\\n    We have found no reliable way of detecting whether the <body> element is a scroll container.\\n    Under most circumstances a <body> scroll bar will be on the <html> element (document.documentElement)\\n\\n    Because we cannot determine if the <body> is a scroll container, and generally it is not one,\\n    we will be treating the <body> as *not* a scroll container\\n\\n    More information: https://github.com/atlassian/react-beautiful-dnd/blob/master/docs/guides/how-we-detect-scroll-containers.md\\n  \") : void 0;\n  return false;\n};\n\nvar getClosestScrollable = function getClosestScrollable(el) {\n  if (el == null) {\n    return null;\n  }\n\n  if (el === document.body) {\n    return isBodyScrollable() ? el : null;\n  }\n\n  if (el === document.documentElement) {\n    return null;\n  }\n\n  if (!isElementScrollable(el)) {\n    return getClosestScrollable(el.parentElement);\n  }\n\n  return el;\n};\n\nvar checkForNestedScrollContainers = (function (scrollable) {\n  if (!scrollable) {\n    return;\n  }\n\n  var anotherScrollParent = getClosestScrollable(scrollable.parentElement);\n\n  if (!anotherScrollParent) {\n    return;\n  }\n\n  process.env.NODE_ENV !== \"production\" ? warning(\"\\n    Droppable: unsupported nested scroll container detected.\\n    A Droppable can only have one scroll parent (which can be itself)\\n    Nested scroll containers are currently not supported.\\n\\n    We hope to support nested scroll containers soon: https://github.com/atlassian/react-beautiful-dnd/issues/131\\n  \") : void 0;\n});\n\nvar getScroll$1 = (function (el) {\n  return {\n    x: el.scrollLeft,\n    y: el.scrollTop\n  };\n});\n\nvar getIsFixed = function getIsFixed(el) {\n  if (!el) {\n    return false;\n  }\n\n  var style = window.getComputedStyle(el);\n\n  if (style.position === 'fixed') {\n    return true;\n  }\n\n  return getIsFixed(el.parentElement);\n};\n\nvar getEnv = (function (start) {\n  var closestScrollable = getClosestScrollable(start);\n  var isFixedOnPage = getIsFixed(start);\n  return {\n    closestScrollable: closestScrollable,\n    isFixedOnPage: isFixedOnPage\n  };\n});\n\nvar getDroppableDimension = (function (_ref) {\n  var descriptor = _ref.descriptor,\n      isEnabled = _ref.isEnabled,\n      isCombineEnabled = _ref.isCombineEnabled,\n      isFixedOnPage = _ref.isFixedOnPage,\n      direction = _ref.direction,\n      client = _ref.client,\n      page = _ref.page,\n      closest = _ref.closest;\n\n  var frame = function () {\n    if (!closest) {\n      return null;\n    }\n\n    var scrollSize = closest.scrollSize,\n        frameClient = closest.client;\n    var maxScroll = getMaxScroll({\n      scrollHeight: scrollSize.scrollHeight,\n      scrollWidth: scrollSize.scrollWidth,\n      height: frameClient.paddingBox.height,\n      width: frameClient.paddingBox.width\n    });\n    return {\n      pageMarginBox: closest.page.marginBox,\n      frameClient: frameClient,\n      scrollSize: scrollSize,\n      shouldClipSubject: closest.shouldClipSubject,\n      scroll: {\n        initial: closest.scroll,\n        current: closest.scroll,\n        max: maxScroll,\n        diff: {\n          value: origin,\n          displacement: origin\n        }\n      }\n    };\n  }();\n\n  var axis = direction === 'vertical' ? vertical : horizontal;\n  var subject = getSubject({\n    page: page,\n    withPlaceholder: null,\n    axis: axis,\n    frame: frame\n  });\n  var dimension = {\n    descriptor: descriptor,\n    isCombineEnabled: isCombineEnabled,\n    isFixedOnPage: isFixedOnPage,\n    axis: axis,\n    isEnabled: isEnabled,\n    client: client,\n    page: page,\n    frame: frame,\n    subject: subject\n  };\n  return dimension;\n});\n\nvar getClient = function getClient(targetRef, closestScrollable) {\n  var base = getBox(targetRef);\n\n  if (!closestScrollable) {\n    return base;\n  }\n\n  if (targetRef !== closestScrollable) {\n    return base;\n  }\n\n  var top = base.paddingBox.top - closestScrollable.scrollTop;\n  var left = base.paddingBox.left - closestScrollable.scrollLeft;\n  var bottom = top + closestScrollable.scrollHeight;\n  var right = left + closestScrollable.scrollWidth;\n  var paddingBox = {\n    top: top,\n    right: right,\n    bottom: bottom,\n    left: left\n  };\n  var borderBox = expand(paddingBox, base.border);\n  var client = createBox({\n    borderBox: borderBox,\n    margin: base.margin,\n    border: base.border,\n    padding: base.padding\n  });\n  return client;\n};\n\nvar getDimension = (function (_ref) {\n  var ref = _ref.ref,\n      descriptor = _ref.descriptor,\n      env = _ref.env,\n      windowScroll = _ref.windowScroll,\n      direction = _ref.direction,\n      isDropDisabled = _ref.isDropDisabled,\n      isCombineEnabled = _ref.isCombineEnabled,\n      shouldClipSubject = _ref.shouldClipSubject;\n  var closestScrollable = env.closestScrollable;\n  var client = getClient(ref, closestScrollable);\n  var page = withScroll(client, windowScroll);\n\n  var closest = function () {\n    if (!closestScrollable) {\n      return null;\n    }\n\n    var frameClient = getBox(closestScrollable);\n    var scrollSize = {\n      scrollHeight: closestScrollable.scrollHeight,\n      scrollWidth: closestScrollable.scrollWidth\n    };\n    return {\n      client: frameClient,\n      page: withScroll(frameClient, windowScroll),\n      scroll: getScroll$1(closestScrollable),\n      scrollSize: scrollSize,\n      shouldClipSubject: shouldClipSubject\n    };\n  }();\n\n  var dimension = getDroppableDimension({\n    descriptor: descriptor,\n    isEnabled: !isDropDisabled,\n    isCombineEnabled: isCombineEnabled,\n    isFixedOnPage: env.isFixedOnPage,\n    direction: direction,\n    client: client,\n    page: page,\n    closest: closest\n  });\n  return dimension;\n});\n\nvar immediate = {\n  passive: false\n};\nvar delayed = {\n  passive: true\n};\nvar getListenerOptions = (function (options) {\n  return options.shouldPublishImmediately ? immediate : delayed;\n});\n\nfunction useRequiredContext(Context) {\n  var result = useContext(Context);\n  !result ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Could not find required context') : invariant(false) : void 0;\n  return result;\n}\n\nvar getClosestScrollableFromDrag = function getClosestScrollableFromDrag(dragging) {\n  return dragging && dragging.env.closestScrollable || null;\n};\n\nfunction useDroppablePublisher(args) {\n  var whileDraggingRef = useRef(null);\n  var appContext = useRequiredContext(AppContext);\n  var uniqueId = useUniqueId('droppable');\n  var registry = appContext.registry,\n      marshal = appContext.marshal;\n  var previousRef = usePrevious(args);\n  var descriptor = useMemo(function () {\n    return {\n      id: args.droppableId,\n      type: args.type,\n      mode: args.mode\n    };\n  }, [args.droppableId, args.mode, args.type]);\n  var publishedDescriptorRef = useRef(descriptor);\n  var memoizedUpdateScroll = useMemo(function () {\n    return memoizeOne(function (x, y) {\n      !whileDraggingRef.current ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Can only update scroll when dragging') : invariant(false) : void 0;\n      var scroll = {\n        x: x,\n        y: y\n      };\n      marshal.updateDroppableScroll(descriptor.id, scroll);\n    });\n  }, [descriptor.id, marshal]);\n  var getClosestScroll = useCallback(function () {\n    var dragging = whileDraggingRef.current;\n\n    if (!dragging || !dragging.env.closestScrollable) {\n      return origin;\n    }\n\n    return getScroll$1(dragging.env.closestScrollable);\n  }, []);\n  var updateScroll = useCallback(function () {\n    var scroll = getClosestScroll();\n    memoizedUpdateScroll(scroll.x, scroll.y);\n  }, [getClosestScroll, memoizedUpdateScroll]);\n  var scheduleScrollUpdate = useMemo(function () {\n    return rafSchd(updateScroll);\n  }, [updateScroll]);\n  var onClosestScroll = useCallback(function () {\n    var dragging = whileDraggingRef.current;\n    var closest = getClosestScrollableFromDrag(dragging);\n    !(dragging && closest) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Could not find scroll options while scrolling') : invariant(false) : void 0;\n    var options = dragging.scrollOptions;\n\n    if (options.shouldPublishImmediately) {\n      updateScroll();\n      return;\n    }\n\n    scheduleScrollUpdate();\n  }, [scheduleScrollUpdate, updateScroll]);\n  var getDimensionAndWatchScroll = useCallback(function (windowScroll, options) {\n    !!whileDraggingRef.current ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot collect a droppable while a drag is occurring') : invariant(false) : void 0;\n    var previous = previousRef.current;\n    var ref = previous.getDroppableRef();\n    !ref ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot collect without a droppable ref') : invariant(false) : void 0;\n    var env = getEnv(ref);\n    var dragging = {\n      ref: ref,\n      descriptor: descriptor,\n      env: env,\n      scrollOptions: options\n    };\n    whileDraggingRef.current = dragging;\n    var dimension = getDimension({\n      ref: ref,\n      descriptor: descriptor,\n      env: env,\n      windowScroll: windowScroll,\n      direction: previous.direction,\n      isDropDisabled: previous.isDropDisabled,\n      isCombineEnabled: previous.isCombineEnabled,\n      shouldClipSubject: !previous.ignoreContainerClipping\n    });\n    var scrollable = env.closestScrollable;\n\n    if (scrollable) {\n      scrollable.setAttribute(scrollContainer.contextId, appContext.contextId);\n      scrollable.addEventListener('scroll', onClosestScroll, getListenerOptions(dragging.scrollOptions));\n\n      if (process.env.NODE_ENV !== 'production') {\n        checkForNestedScrollContainers(scrollable);\n      }\n    }\n\n    return dimension;\n  }, [appContext.contextId, descriptor, onClosestScroll, previousRef]);\n  var getScrollWhileDragging = useCallback(function () {\n    var dragging = whileDraggingRef.current;\n    var closest = getClosestScrollableFromDrag(dragging);\n    !(dragging && closest) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Can only recollect Droppable client for Droppables that have a scroll container') : invariant(false) : void 0;\n    return getScroll$1(closest);\n  }, []);\n  var dragStopped = useCallback(function () {\n    var dragging = whileDraggingRef.current;\n    !dragging ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot stop drag when no active drag') : invariant(false) : void 0;\n    var closest = getClosestScrollableFromDrag(dragging);\n    whileDraggingRef.current = null;\n\n    if (!closest) {\n      return;\n    }\n\n    scheduleScrollUpdate.cancel();\n    closest.removeAttribute(scrollContainer.contextId);\n    closest.removeEventListener('scroll', onClosestScroll, getListenerOptions(dragging.scrollOptions));\n  }, [onClosestScroll, scheduleScrollUpdate]);\n  var scroll = useCallback(function (change) {\n    var dragging = whileDraggingRef.current;\n    !dragging ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot scroll when there is no drag') : invariant(false) : void 0;\n    var closest = getClosestScrollableFromDrag(dragging);\n    !closest ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot scroll a droppable with no closest scrollable') : invariant(false) : void 0;\n    closest.scrollTop += change.y;\n    closest.scrollLeft += change.x;\n  }, []);\n  var callbacks = useMemo(function () {\n    return {\n      getDimensionAndWatchScroll: getDimensionAndWatchScroll,\n      getScrollWhileDragging: getScrollWhileDragging,\n      dragStopped: dragStopped,\n      scroll: scroll\n    };\n  }, [dragStopped, getDimensionAndWatchScroll, getScrollWhileDragging, scroll]);\n  var entry = useMemo(function () {\n    return {\n      uniqueId: uniqueId,\n      descriptor: descriptor,\n      callbacks: callbacks\n    };\n  }, [callbacks, descriptor, uniqueId]);\n  useIsomorphicLayoutEffect(function () {\n    publishedDescriptorRef.current = entry.descriptor;\n    registry.droppable.register(entry);\n    return function () {\n      if (whileDraggingRef.current) {\n        process.env.NODE_ENV !== \"production\" ? warning('Unsupported: changing the droppableId or type of a Droppable during a drag') : void 0;\n        dragStopped();\n      }\n\n      registry.droppable.unregister(entry);\n    };\n  }, [callbacks, descriptor, dragStopped, entry, marshal, registry.droppable]);\n  useIsomorphicLayoutEffect(function () {\n    if (!whileDraggingRef.current) {\n      return;\n    }\n\n    marshal.updateDroppableIsEnabled(publishedDescriptorRef.current.id, !args.isDropDisabled);\n  }, [args.isDropDisabled, marshal]);\n  useIsomorphicLayoutEffect(function () {\n    if (!whileDraggingRef.current) {\n      return;\n    }\n\n    marshal.updateDroppableIsCombineEnabled(publishedDescriptorRef.current.id, args.isCombineEnabled);\n  }, [args.isCombineEnabled, marshal]);\n}\n\nfunction noop$2() {}\n\nvar empty = {\n  width: 0,\n  height: 0,\n  margin: noSpacing\n};\n\nvar getSize = function getSize(_ref) {\n  var isAnimatingOpenOnMount = _ref.isAnimatingOpenOnMount,\n      placeholder = _ref.placeholder,\n      animate = _ref.animate;\n\n  if (isAnimatingOpenOnMount) {\n    return empty;\n  }\n\n  if (animate === 'close') {\n    return empty;\n  }\n\n  return {\n    height: placeholder.client.borderBox.height,\n    width: placeholder.client.borderBox.width,\n    margin: placeholder.client.margin\n  };\n};\n\nvar getStyle = function getStyle(_ref2) {\n  var isAnimatingOpenOnMount = _ref2.isAnimatingOpenOnMount,\n      placeholder = _ref2.placeholder,\n      animate = _ref2.animate;\n  var size = getSize({\n    isAnimatingOpenOnMount: isAnimatingOpenOnMount,\n    placeholder: placeholder,\n    animate: animate\n  });\n  return {\n    display: placeholder.display,\n    boxSizing: 'border-box',\n    width: size.width,\n    height: size.height,\n    marginTop: size.margin.top,\n    marginRight: size.margin.right,\n    marginBottom: size.margin.bottom,\n    marginLeft: size.margin.left,\n    flexShrink: '0',\n    flexGrow: '0',\n    pointerEvents: 'none',\n    transition: animate !== 'none' ? transitions.placeholder : null\n  };\n};\n\nfunction Placeholder(props) {\n  var animateOpenTimerRef = useRef(null);\n  var tryClearAnimateOpenTimer = useCallback(function () {\n    if (!animateOpenTimerRef.current) {\n      return;\n    }\n\n    clearTimeout(animateOpenTimerRef.current);\n    animateOpenTimerRef.current = null;\n  }, []);\n  var animate = props.animate,\n      onTransitionEnd = props.onTransitionEnd,\n      onClose = props.onClose,\n      contextId = props.contextId;\n\n  var _useState = useState(props.animate === 'open'),\n      isAnimatingOpenOnMount = _useState[0],\n      setIsAnimatingOpenOnMount = _useState[1];\n\n  useEffect(function () {\n    if (!isAnimatingOpenOnMount) {\n      return noop$2;\n    }\n\n    if (animate !== 'open') {\n      tryClearAnimateOpenTimer();\n      setIsAnimatingOpenOnMount(false);\n      return noop$2;\n    }\n\n    if (animateOpenTimerRef.current) {\n      return noop$2;\n    }\n\n    animateOpenTimerRef.current = setTimeout(function () {\n      animateOpenTimerRef.current = null;\n      setIsAnimatingOpenOnMount(false);\n    });\n    return tryClearAnimateOpenTimer;\n  }, [animate, isAnimatingOpenOnMount, tryClearAnimateOpenTimer]);\n  var onSizeChangeEnd = useCallback(function (event) {\n    if (event.propertyName !== 'height') {\n      return;\n    }\n\n    onTransitionEnd();\n\n    if (animate === 'close') {\n      onClose();\n    }\n  }, [animate, onClose, onTransitionEnd]);\n  var style = getStyle({\n    isAnimatingOpenOnMount: isAnimatingOpenOnMount,\n    animate: props.animate,\n    placeholder: props.placeholder\n  });\n  return React.createElement(props.placeholder.tagName, {\n    style: style,\n    'data-rbd-placeholder-context-id': contextId,\n    onTransitionEnd: onSizeChangeEnd,\n    ref: props.innerRef\n  });\n}\n\nvar Placeholder$1 = React.memo(Placeholder);\n\nvar DroppableContext = React.createContext(null);\n\nfunction checkIsValidInnerRef(el) {\n  !(el && isHtmlElement(el)) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"\\n    provided.innerRef has not been provided with a HTMLElement.\\n\\n    You can find a guide on using the innerRef callback functions at:\\n    https://github.com/atlassian/react-beautiful-dnd/blob/master/docs/guides/using-inner-ref.md\\n  \") : invariant(false) : void 0;\n}\n\nfunction isBoolean(value) {\n  return typeof value === 'boolean';\n}\n\nfunction runChecks(args, checks) {\n  checks.forEach(function (check) {\n    return check(args);\n  });\n}\n\nvar shared = [function required(_ref) {\n  var props = _ref.props;\n  !props.droppableId ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'A Droppable requires a droppableId prop') : invariant(false) : void 0;\n  !(typeof props.droppableId === 'string') ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"A Droppable requires a [string] droppableId. Provided: [\" + typeof props.droppableId + \"]\") : invariant(false) : void 0;\n}, function _boolean(_ref2) {\n  var props = _ref2.props;\n  !isBoolean(props.isDropDisabled) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'isDropDisabled must be a boolean') : invariant(false) : void 0;\n  !isBoolean(props.isCombineEnabled) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'isCombineEnabled must be a boolean') : invariant(false) : void 0;\n  !isBoolean(props.ignoreContainerClipping) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'ignoreContainerClipping must be a boolean') : invariant(false) : void 0;\n}, function ref(_ref3) {\n  var getDroppableRef = _ref3.getDroppableRef;\n  checkIsValidInnerRef(getDroppableRef());\n}];\nvar standard = [function placeholder(_ref4) {\n  var props = _ref4.props,\n      getPlaceholderRef = _ref4.getPlaceholderRef;\n\n  if (!props.placeholder) {\n    return;\n  }\n\n  var ref = getPlaceholderRef();\n\n  if (ref) {\n    return;\n  }\n\n  process.env.NODE_ENV !== \"production\" ? warning(\"\\n      Droppable setup issue [droppableId: \\\"\" + props.droppableId + \"\\\"]:\\n      DroppableProvided > placeholder could not be found.\\n\\n      Please be sure to add the {provided.placeholder} React Node as a child of your Droppable.\\n      More information: https://github.com/atlassian/react-beautiful-dnd/blob/master/docs/api/droppable.md\\n    \") : void 0;\n}];\nvar virtual = [function hasClone(_ref5) {\n  var props = _ref5.props;\n  !props.renderClone ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Must provide a clone render function (renderClone) for virtual lists') : invariant(false) : void 0;\n}, function hasNoPlaceholder(_ref6) {\n  var getPlaceholderRef = _ref6.getPlaceholderRef;\n  !!getPlaceholderRef() ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Expected virtual list to not have a placeholder') : invariant(false) : void 0;\n}];\nfunction useValidation(args) {\n  useDevSetupWarning(function () {\n    runChecks(args, shared);\n\n    if (args.props.mode === 'standard') {\n      runChecks(args, standard);\n    }\n\n    if (args.props.mode === 'virtual') {\n      runChecks(args, virtual);\n    }\n  });\n}\n\nvar AnimateInOut = function (_React$PureComponent) {\n  _inheritsLoose(AnimateInOut, _React$PureComponent);\n\n  function AnimateInOut() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$PureComponent.call.apply(_React$PureComponent, [this].concat(args)) || this;\n    _this.state = {\n      isVisible: Boolean(_this.props.on),\n      data: _this.props.on,\n      animate: _this.props.shouldAnimate && _this.props.on ? 'open' : 'none'\n    };\n\n    _this.onClose = function () {\n      if (_this.state.animate !== 'close') {\n        return;\n      }\n\n      _this.setState({\n        isVisible: false\n      });\n    };\n\n    return _this;\n  }\n\n  AnimateInOut.getDerivedStateFromProps = function getDerivedStateFromProps(props, state) {\n    if (!props.shouldAnimate) {\n      return {\n        isVisible: Boolean(props.on),\n        data: props.on,\n        animate: 'none'\n      };\n    }\n\n    if (props.on) {\n      return {\n        isVisible: true,\n        data: props.on,\n        animate: 'open'\n      };\n    }\n\n    if (state.isVisible) {\n      return {\n        isVisible: true,\n        data: state.data,\n        animate: 'close'\n      };\n    }\n\n    return {\n      isVisible: false,\n      animate: 'close',\n      data: null\n    };\n  };\n\n  var _proto = AnimateInOut.prototype;\n\n  _proto.render = function render() {\n    if (!this.state.isVisible) {\n      return null;\n    }\n\n    var provided = {\n      onClose: this.onClose,\n      data: this.state.data,\n      animate: this.state.animate\n    };\n    return this.props.children(provided);\n  };\n\n  return AnimateInOut;\n}(React.PureComponent);\n\nvar zIndexOptions = {\n  dragging: 5000,\n  dropAnimating: 4500\n};\n\nvar getDraggingTransition = function getDraggingTransition(shouldAnimateDragMovement, dropping) {\n  if (dropping) {\n    return transitions.drop(dropping.duration);\n  }\n\n  if (shouldAnimateDragMovement) {\n    return transitions.snap;\n  }\n\n  return transitions.fluid;\n};\n\nvar getDraggingOpacity = function getDraggingOpacity(isCombining, isDropAnimating) {\n  if (!isCombining) {\n    return null;\n  }\n\n  return isDropAnimating ? combine.opacity.drop : combine.opacity.combining;\n};\n\nvar getShouldDraggingAnimate = function getShouldDraggingAnimate(dragging) {\n  if (dragging.forceShouldAnimate != null) {\n    return dragging.forceShouldAnimate;\n  }\n\n  return dragging.mode === 'SNAP';\n};\n\nfunction getDraggingStyle(dragging) {\n  var dimension = dragging.dimension;\n  var box = dimension.client;\n  var offset = dragging.offset,\n      combineWith = dragging.combineWith,\n      dropping = dragging.dropping;\n  var isCombining = Boolean(combineWith);\n  var shouldAnimate = getShouldDraggingAnimate(dragging);\n  var isDropAnimating = Boolean(dropping);\n  var transform = isDropAnimating ? transforms.drop(offset, isCombining) : transforms.moveTo(offset);\n  var style = {\n    position: 'fixed',\n    top: box.marginBox.top,\n    left: box.marginBox.left,\n    boxSizing: 'border-box',\n    width: box.borderBox.width,\n    height: box.borderBox.height,\n    transition: getDraggingTransition(shouldAnimate, dropping),\n    transform: transform,\n    opacity: getDraggingOpacity(isCombining, isDropAnimating),\n    zIndex: isDropAnimating ? zIndexOptions.dropAnimating : zIndexOptions.dragging,\n    pointerEvents: 'none'\n  };\n  return style;\n}\n\nfunction getSecondaryStyle(secondary) {\n  return {\n    transform: transforms.moveTo(secondary.offset),\n    transition: secondary.shouldAnimateDisplacement ? null : 'none'\n  };\n}\n\nfunction getStyle$1(mapped) {\n  return mapped.type === 'DRAGGING' ? getDraggingStyle(mapped) : getSecondaryStyle(mapped);\n}\n\nfunction getDimension$1(descriptor, el, windowScroll) {\n  if (windowScroll === void 0) {\n    windowScroll = origin;\n  }\n\n  var computedStyles = window.getComputedStyle(el);\n  var borderBox = el.getBoundingClientRect();\n  var client = calculateBox(borderBox, computedStyles);\n  var page = withScroll(client, windowScroll);\n  var placeholder = {\n    client: client,\n    tagName: el.tagName.toLowerCase(),\n    display: computedStyles.display\n  };\n  var displaceBy = {\n    x: client.marginBox.width,\n    y: client.marginBox.height\n  };\n  var dimension = {\n    descriptor: descriptor,\n    placeholder: placeholder,\n    displaceBy: displaceBy,\n    client: client,\n    page: page\n  };\n  return dimension;\n}\n\nfunction useDraggablePublisher(args) {\n  var uniqueId = useUniqueId('draggable');\n  var descriptor = args.descriptor,\n      registry = args.registry,\n      getDraggableRef = args.getDraggableRef,\n      canDragInteractiveElements = args.canDragInteractiveElements,\n      shouldRespectForcePress = args.shouldRespectForcePress,\n      isEnabled = args.isEnabled;\n  var options = useMemo(function () {\n    return {\n      canDragInteractiveElements: canDragInteractiveElements,\n      shouldRespectForcePress: shouldRespectForcePress,\n      isEnabled: isEnabled\n    };\n  }, [canDragInteractiveElements, isEnabled, shouldRespectForcePress]);\n  var getDimension = useCallback(function (windowScroll) {\n    var el = getDraggableRef();\n    !el ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot get dimension when no ref is set') : invariant(false) : void 0;\n    return getDimension$1(descriptor, el, windowScroll);\n  }, [descriptor, getDraggableRef]);\n  var entry = useMemo(function () {\n    return {\n      uniqueId: uniqueId,\n      descriptor: descriptor,\n      options: options,\n      getDimension: getDimension\n    };\n  }, [descriptor, getDimension, options, uniqueId]);\n  var publishedRef = useRef(entry);\n  var isFirstPublishRef = useRef(true);\n  useIsomorphicLayoutEffect(function () {\n    registry.draggable.register(publishedRef.current);\n    return function () {\n      return registry.draggable.unregister(publishedRef.current);\n    };\n  }, [registry.draggable]);\n  useIsomorphicLayoutEffect(function () {\n    if (isFirstPublishRef.current) {\n      isFirstPublishRef.current = false;\n      return;\n    }\n\n    var last = publishedRef.current;\n    publishedRef.current = entry;\n    registry.draggable.update(entry, last);\n  }, [entry, registry.draggable]);\n}\n\nfunction useValidation$1(props, contextId, getRef) {\n  useDevSetupWarning(function () {\n    function prefix(id) {\n      return \"Draggable[id: \" + id + \"]: \";\n    }\n\n    var id = props.draggableId;\n    !id ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Draggable requires a draggableId') : invariant(false) : void 0;\n    !(typeof id === 'string') ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Draggable requires a [string] draggableId.\\n      Provided: [type: \" + typeof id + \"] (value: \" + id + \")\") : invariant(false) : void 0;\n    !isInteger(props.index) ? process.env.NODE_ENV !== \"production\" ? invariant(false, prefix(id) + \" requires an integer index prop\") : invariant(false) : void 0;\n\n    if (props.mapped.type === 'DRAGGING') {\n      return;\n    }\n\n    checkIsValidInnerRef(getRef());\n\n    if (props.isEnabled) {\n      !findDragHandle(contextId, id) ? process.env.NODE_ENV !== \"production\" ? invariant(false, prefix(id) + \" Unable to find drag handle\") : invariant(false) : void 0;\n    }\n  });\n}\nfunction useClonePropValidation(isClone) {\n  useDev(function () {\n    var initialRef = useRef(isClone);\n    useDevSetupWarning(function () {\n      !(isClone === initialRef.current) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Draggable isClone prop value changed during component life') : invariant(false) : void 0;\n    }, [isClone]);\n  });\n}\n\nfunction preventHtml5Dnd(event) {\n  event.preventDefault();\n}\n\nfunction Draggable(props) {\n  var ref = useRef(null);\n  var setRef = useCallback(function (el) {\n    ref.current = el;\n  }, []);\n  var getRef = useCallback(function () {\n    return ref.current;\n  }, []);\n\n  var _useRequiredContext = useRequiredContext(AppContext),\n      contextId = _useRequiredContext.contextId,\n      dragHandleUsageInstructionsId = _useRequiredContext.dragHandleUsageInstructionsId,\n      registry = _useRequiredContext.registry;\n\n  var _useRequiredContext2 = useRequiredContext(DroppableContext),\n      type = _useRequiredContext2.type,\n      droppableId = _useRequiredContext2.droppableId;\n\n  var descriptor = useMemo(function () {\n    return {\n      id: props.draggableId,\n      index: props.index,\n      type: type,\n      droppableId: droppableId\n    };\n  }, [props.draggableId, props.index, type, droppableId]);\n  var children = props.children,\n      draggableId = props.draggableId,\n      isEnabled = props.isEnabled,\n      shouldRespectForcePress = props.shouldRespectForcePress,\n      canDragInteractiveElements = props.canDragInteractiveElements,\n      isClone = props.isClone,\n      mapped = props.mapped,\n      dropAnimationFinishedAction = props.dropAnimationFinished;\n  useValidation$1(props, contextId, getRef);\n  useClonePropValidation(isClone);\n\n  if (!isClone) {\n    var forPublisher = useMemo(function () {\n      return {\n        descriptor: descriptor,\n        registry: registry,\n        getDraggableRef: getRef,\n        canDragInteractiveElements: canDragInteractiveElements,\n        shouldRespectForcePress: shouldRespectForcePress,\n        isEnabled: isEnabled\n      };\n    }, [descriptor, registry, getRef, canDragInteractiveElements, shouldRespectForcePress, isEnabled]);\n    useDraggablePublisher(forPublisher);\n  }\n\n  var dragHandleProps = useMemo(function () {\n    return isEnabled ? {\n      tabIndex: 0,\n      role: 'button',\n      'aria-describedby': dragHandleUsageInstructionsId,\n      'data-rbd-drag-handle-draggable-id': draggableId,\n      'data-rbd-drag-handle-context-id': contextId,\n      draggable: false,\n      onDragStart: preventHtml5Dnd\n    } : null;\n  }, [contextId, dragHandleUsageInstructionsId, draggableId, isEnabled]);\n  var onMoveEnd = useCallback(function (event) {\n    if (mapped.type !== 'DRAGGING') {\n      return;\n    }\n\n    if (!mapped.dropping) {\n      return;\n    }\n\n    if (event.propertyName !== 'transform') {\n      return;\n    }\n\n    dropAnimationFinishedAction();\n  }, [dropAnimationFinishedAction, mapped]);\n  var provided = useMemo(function () {\n    var style = getStyle$1(mapped);\n    var onTransitionEnd = mapped.type === 'DRAGGING' && mapped.dropping ? onMoveEnd : null;\n    var result = {\n      innerRef: setRef,\n      draggableProps: {\n        'data-rbd-draggable-context-id': contextId,\n        'data-rbd-draggable-id': draggableId,\n        style: style,\n        onTransitionEnd: onTransitionEnd\n      },\n      dragHandleProps: dragHandleProps\n    };\n    return result;\n  }, [contextId, dragHandleProps, draggableId, mapped, onMoveEnd, setRef]);\n  var rubric = useMemo(function () {\n    return {\n      draggableId: descriptor.id,\n      type: descriptor.type,\n      source: {\n        index: descriptor.index,\n        droppableId: descriptor.droppableId\n      }\n    };\n  }, [descriptor.droppableId, descriptor.id, descriptor.index, descriptor.type]);\n  return children(provided, mapped.snapshot, rubric);\n}\n\nvar isStrictEqual = (function (a, b) {\n  return a === b;\n});\n\nvar whatIsDraggedOverFromResult = (function (result) {\n  var combine = result.combine,\n      destination = result.destination;\n\n  if (destination) {\n    return destination.droppableId;\n  }\n\n  if (combine) {\n    return combine.droppableId;\n  }\n\n  return null;\n});\n\nvar getCombineWithFromResult = function getCombineWithFromResult(result) {\n  return result.combine ? result.combine.draggableId : null;\n};\n\nvar getCombineWithFromImpact = function getCombineWithFromImpact(impact) {\n  return impact.at && impact.at.type === 'COMBINE' ? impact.at.combine.draggableId : null;\n};\n\nfunction getDraggableSelector() {\n  var memoizedOffset = memoizeOne(function (x, y) {\n    return {\n      x: x,\n      y: y\n    };\n  });\n  var getMemoizedSnapshot = memoizeOne(function (mode, isClone, draggingOver, combineWith, dropping) {\n    return {\n      isDragging: true,\n      isClone: isClone,\n      isDropAnimating: Boolean(dropping),\n      dropAnimation: dropping,\n      mode: mode,\n      draggingOver: draggingOver,\n      combineWith: combineWith,\n      combineTargetFor: null\n    };\n  });\n  var getMemoizedProps = memoizeOne(function (offset, mode, dimension, isClone, draggingOver, combineWith, forceShouldAnimate) {\n    return {\n      mapped: {\n        type: 'DRAGGING',\n        dropping: null,\n        draggingOver: draggingOver,\n        combineWith: combineWith,\n        mode: mode,\n        offset: offset,\n        dimension: dimension,\n        forceShouldAnimate: forceShouldAnimate,\n        snapshot: getMemoizedSnapshot(mode, isClone, draggingOver, combineWith, null)\n      }\n    };\n  });\n\n  var selector = function selector(state, ownProps) {\n    if (state.isDragging) {\n      if (state.critical.draggable.id !== ownProps.draggableId) {\n        return null;\n      }\n\n      var offset = state.current.client.offset;\n      var dimension = state.dimensions.draggables[ownProps.draggableId];\n      var draggingOver = whatIsDraggedOver(state.impact);\n      var combineWith = getCombineWithFromImpact(state.impact);\n      var forceShouldAnimate = state.forceShouldAnimate;\n      return getMemoizedProps(memoizedOffset(offset.x, offset.y), state.movementMode, dimension, ownProps.isClone, draggingOver, combineWith, forceShouldAnimate);\n    }\n\n    if (state.phase === 'DROP_ANIMATING') {\n      var completed = state.completed;\n\n      if (completed.result.draggableId !== ownProps.draggableId) {\n        return null;\n      }\n\n      var isClone = ownProps.isClone;\n      var _dimension = state.dimensions.draggables[ownProps.draggableId];\n      var result = completed.result;\n      var mode = result.mode;\n\n      var _draggingOver = whatIsDraggedOverFromResult(result);\n\n      var _combineWith = getCombineWithFromResult(result);\n\n      var duration = state.dropDuration;\n      var dropping = {\n        duration: duration,\n        curve: curves.drop,\n        moveTo: state.newHomeClientOffset,\n        opacity: _combineWith ? combine.opacity.drop : null,\n        scale: _combineWith ? combine.scale.drop : null\n      };\n      return {\n        mapped: {\n          type: 'DRAGGING',\n          offset: state.newHomeClientOffset,\n          dimension: _dimension,\n          dropping: dropping,\n          draggingOver: _draggingOver,\n          combineWith: _combineWith,\n          mode: mode,\n          forceShouldAnimate: null,\n          snapshot: getMemoizedSnapshot(mode, isClone, _draggingOver, _combineWith, dropping)\n        }\n      };\n    }\n\n    return null;\n  };\n\n  return selector;\n}\n\nfunction getSecondarySnapshot(combineTargetFor) {\n  return {\n    isDragging: false,\n    isDropAnimating: false,\n    isClone: false,\n    dropAnimation: null,\n    mode: null,\n    draggingOver: null,\n    combineTargetFor: combineTargetFor,\n    combineWith: null\n  };\n}\n\nvar atRest = {\n  mapped: {\n    type: 'SECONDARY',\n    offset: origin,\n    combineTargetFor: null,\n    shouldAnimateDisplacement: true,\n    snapshot: getSecondarySnapshot(null)\n  }\n};\n\nfunction getSecondarySelector() {\n  var memoizedOffset = memoizeOne(function (x, y) {\n    return {\n      x: x,\n      y: y\n    };\n  });\n  var getMemoizedSnapshot = memoizeOne(getSecondarySnapshot);\n  var getMemoizedProps = memoizeOne(function (offset, combineTargetFor, shouldAnimateDisplacement) {\n    if (combineTargetFor === void 0) {\n      combineTargetFor = null;\n    }\n\n    return {\n      mapped: {\n        type: 'SECONDARY',\n        offset: offset,\n        combineTargetFor: combineTargetFor,\n        shouldAnimateDisplacement: shouldAnimateDisplacement,\n        snapshot: getMemoizedSnapshot(combineTargetFor)\n      }\n    };\n  });\n\n  var getFallback = function getFallback(combineTargetFor) {\n    return combineTargetFor ? getMemoizedProps(origin, combineTargetFor, true) : null;\n  };\n\n  var getProps = function getProps(ownId, draggingId, impact, afterCritical) {\n    var visualDisplacement = impact.displaced.visible[ownId];\n    var isAfterCriticalInVirtualList = Boolean(afterCritical.inVirtualList && afterCritical.effected[ownId]);\n    var combine = tryGetCombine(impact);\n    var combineTargetFor = combine && combine.draggableId === ownId ? draggingId : null;\n\n    if (!visualDisplacement) {\n      if (!isAfterCriticalInVirtualList) {\n        return getFallback(combineTargetFor);\n      }\n\n      if (impact.displaced.invisible[ownId]) {\n        return null;\n      }\n\n      var change = negate(afterCritical.displacedBy.point);\n\n      var _offset = memoizedOffset(change.x, change.y);\n\n      return getMemoizedProps(_offset, combineTargetFor, true);\n    }\n\n    if (isAfterCriticalInVirtualList) {\n      return getFallback(combineTargetFor);\n    }\n\n    var displaceBy = impact.displacedBy.point;\n    var offset = memoizedOffset(displaceBy.x, displaceBy.y);\n    return getMemoizedProps(offset, combineTargetFor, visualDisplacement.shouldAnimate);\n  };\n\n  var selector = function selector(state, ownProps) {\n    if (state.isDragging) {\n      if (state.critical.draggable.id === ownProps.draggableId) {\n        return null;\n      }\n\n      return getProps(ownProps.draggableId, state.critical.draggable.id, state.impact, state.afterCritical);\n    }\n\n    if (state.phase === 'DROP_ANIMATING') {\n      var completed = state.completed;\n\n      if (completed.result.draggableId === ownProps.draggableId) {\n        return null;\n      }\n\n      return getProps(ownProps.draggableId, completed.result.draggableId, completed.impact, completed.afterCritical);\n    }\n\n    return null;\n  };\n\n  return selector;\n}\n\nvar makeMapStateToProps = function makeMapStateToProps() {\n  var draggingSelector = getDraggableSelector();\n  var secondarySelector = getSecondarySelector();\n\n  var selector = function selector(state, ownProps) {\n    return draggingSelector(state, ownProps) || secondarySelector(state, ownProps) || atRest;\n  };\n\n  return selector;\n};\nvar mapDispatchToProps = {\n  dropAnimationFinished: dropAnimationFinished\n};\nvar ConnectedDraggable = connect(makeMapStateToProps, mapDispatchToProps, null, {\n  context: StoreContext,\n  pure: true,\n  areStatePropsEqual: isStrictEqual\n})(Draggable);\n\nfunction PrivateDraggable(props) {\n  var droppableContext = useRequiredContext(DroppableContext);\n  var isUsingCloneFor = droppableContext.isUsingCloneFor;\n\n  if (isUsingCloneFor === props.draggableId && !props.isClone) {\n    return null;\n  }\n\n  return React.createElement(ConnectedDraggable, props);\n}\nfunction PublicDraggable(props) {\n  var isEnabled = typeof props.isDragDisabled === 'boolean' ? !props.isDragDisabled : true;\n  var canDragInteractiveElements = Boolean(props.disableInteractiveElementBlocking);\n  var shouldRespectForcePress = Boolean(props.shouldRespectForcePress);\n  return React.createElement(PrivateDraggable, _extends({}, props, {\n    isClone: false,\n    isEnabled: isEnabled,\n    canDragInteractiveElements: canDragInteractiveElements,\n    shouldRespectForcePress: shouldRespectForcePress\n  }));\n}\n\nfunction Droppable(props) {\n  var appContext = useContext(AppContext);\n  !appContext ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Could not find app context') : invariant(false) : void 0;\n  var contextId = appContext.contextId,\n      isMovementAllowed = appContext.isMovementAllowed;\n  var droppableRef = useRef(null);\n  var placeholderRef = useRef(null);\n  var children = props.children,\n      droppableId = props.droppableId,\n      type = props.type,\n      mode = props.mode,\n      direction = props.direction,\n      ignoreContainerClipping = props.ignoreContainerClipping,\n      isDropDisabled = props.isDropDisabled,\n      isCombineEnabled = props.isCombineEnabled,\n      snapshot = props.snapshot,\n      useClone = props.useClone,\n      updateViewportMaxScroll = props.updateViewportMaxScroll,\n      getContainerForClone = props.getContainerForClone;\n  var getDroppableRef = useCallback(function () {\n    return droppableRef.current;\n  }, []);\n  var setDroppableRef = useCallback(function (value) {\n    droppableRef.current = value;\n  }, []);\n  var getPlaceholderRef = useCallback(function () {\n    return placeholderRef.current;\n  }, []);\n  var setPlaceholderRef = useCallback(function (value) {\n    placeholderRef.current = value;\n  }, []);\n  useValidation({\n    props: props,\n    getDroppableRef: getDroppableRef,\n    getPlaceholderRef: getPlaceholderRef\n  });\n  var onPlaceholderTransitionEnd = useCallback(function () {\n    if (isMovementAllowed()) {\n      updateViewportMaxScroll({\n        maxScroll: getMaxWindowScroll()\n      });\n    }\n  }, [isMovementAllowed, updateViewportMaxScroll]);\n  useDroppablePublisher({\n    droppableId: droppableId,\n    type: type,\n    mode: mode,\n    direction: direction,\n    isDropDisabled: isDropDisabled,\n    isCombineEnabled: isCombineEnabled,\n    ignoreContainerClipping: ignoreContainerClipping,\n    getDroppableRef: getDroppableRef\n  });\n  var placeholder = React.createElement(AnimateInOut, {\n    on: props.placeholder,\n    shouldAnimate: props.shouldAnimatePlaceholder\n  }, function (_ref) {\n    var onClose = _ref.onClose,\n        data = _ref.data,\n        animate = _ref.animate;\n    return React.createElement(Placeholder$1, {\n      placeholder: data,\n      onClose: onClose,\n      innerRef: setPlaceholderRef,\n      animate: animate,\n      contextId: contextId,\n      onTransitionEnd: onPlaceholderTransitionEnd\n    });\n  });\n  var provided = useMemo(function () {\n    return {\n      innerRef: setDroppableRef,\n      placeholder: placeholder,\n      droppableProps: {\n        'data-rbd-droppable-id': droppableId,\n        'data-rbd-droppable-context-id': contextId\n      }\n    };\n  }, [contextId, droppableId, placeholder, setDroppableRef]);\n  var isUsingCloneFor = useClone ? useClone.dragging.draggableId : null;\n  var droppableContext = useMemo(function () {\n    return {\n      droppableId: droppableId,\n      type: type,\n      isUsingCloneFor: isUsingCloneFor\n    };\n  }, [droppableId, isUsingCloneFor, type]);\n\n  function getClone() {\n    if (!useClone) {\n      return null;\n    }\n\n    var dragging = useClone.dragging,\n        render = useClone.render;\n    var node = React.createElement(PrivateDraggable, {\n      draggableId: dragging.draggableId,\n      index: dragging.source.index,\n      isClone: true,\n      isEnabled: true,\n      shouldRespectForcePress: false,\n      canDragInteractiveElements: true\n    }, function (draggableProvided, draggableSnapshot) {\n      return render(draggableProvided, draggableSnapshot, dragging);\n    });\n    return ReactDOM.createPortal(node, getContainerForClone());\n  }\n\n  return React.createElement(DroppableContext.Provider, {\n    value: droppableContext\n  }, children(provided, snapshot), getClone());\n}\n\nvar isMatchingType = function isMatchingType(type, critical) {\n  return type === critical.droppable.type;\n};\n\nvar getDraggable = function getDraggable(critical, dimensions) {\n  return dimensions.draggables[critical.draggable.id];\n};\n\nvar makeMapStateToProps$1 = function makeMapStateToProps() {\n  var idleWithAnimation = {\n    placeholder: null,\n    shouldAnimatePlaceholder: true,\n    snapshot: {\n      isDraggingOver: false,\n      draggingOverWith: null,\n      draggingFromThisWith: null,\n      isUsingPlaceholder: false\n    },\n    useClone: null\n  };\n\n  var idleWithoutAnimation = _extends({}, idleWithAnimation, {\n    shouldAnimatePlaceholder: false\n  });\n\n  var getDraggableRubric = memoizeOne(function (descriptor) {\n    return {\n      draggableId: descriptor.id,\n      type: descriptor.type,\n      source: {\n        index: descriptor.index,\n        droppableId: descriptor.droppableId\n      }\n    };\n  });\n  var getMapProps = memoizeOne(function (id, isEnabled, isDraggingOverForConsumer, isDraggingOverForImpact, dragging, renderClone) {\n    var draggableId = dragging.descriptor.id;\n    var isHome = dragging.descriptor.droppableId === id;\n\n    if (isHome) {\n      var useClone = renderClone ? {\n        render: renderClone,\n        dragging: getDraggableRubric(dragging.descriptor)\n      } : null;\n      var _snapshot = {\n        isDraggingOver: isDraggingOverForConsumer,\n        draggingOverWith: isDraggingOverForConsumer ? draggableId : null,\n        draggingFromThisWith: draggableId,\n        isUsingPlaceholder: true\n      };\n      return {\n        placeholder: dragging.placeholder,\n        shouldAnimatePlaceholder: false,\n        snapshot: _snapshot,\n        useClone: useClone\n      };\n    }\n\n    if (!isEnabled) {\n      return idleWithoutAnimation;\n    }\n\n    if (!isDraggingOverForImpact) {\n      return idleWithAnimation;\n    }\n\n    var snapshot = {\n      isDraggingOver: isDraggingOverForConsumer,\n      draggingOverWith: draggableId,\n      draggingFromThisWith: null,\n      isUsingPlaceholder: true\n    };\n    return {\n      placeholder: dragging.placeholder,\n      shouldAnimatePlaceholder: true,\n      snapshot: snapshot,\n      useClone: null\n    };\n  });\n\n  var selector = function selector(state, ownProps) {\n    var id = ownProps.droppableId;\n    var type = ownProps.type;\n    var isEnabled = !ownProps.isDropDisabled;\n    var renderClone = ownProps.renderClone;\n\n    if (state.isDragging) {\n      var critical = state.critical;\n\n      if (!isMatchingType(type, critical)) {\n        return idleWithoutAnimation;\n      }\n\n      var dragging = getDraggable(critical, state.dimensions);\n      var isDraggingOver = whatIsDraggedOver(state.impact) === id;\n      return getMapProps(id, isEnabled, isDraggingOver, isDraggingOver, dragging, renderClone);\n    }\n\n    if (state.phase === 'DROP_ANIMATING') {\n      var completed = state.completed;\n\n      if (!isMatchingType(type, completed.critical)) {\n        return idleWithoutAnimation;\n      }\n\n      var _dragging = getDraggable(completed.critical, state.dimensions);\n\n      return getMapProps(id, isEnabled, whatIsDraggedOverFromResult(completed.result) === id, whatIsDraggedOver(completed.impact) === id, _dragging, renderClone);\n    }\n\n    if (state.phase === 'IDLE' && state.completed && !state.shouldFlush) {\n      var _completed = state.completed;\n\n      if (!isMatchingType(type, _completed.critical)) {\n        return idleWithoutAnimation;\n      }\n\n      var wasOver = whatIsDraggedOver(_completed.impact) === id;\n      var wasCombining = Boolean(_completed.impact.at && _completed.impact.at.type === 'COMBINE');\n      var isHome = _completed.critical.droppable.id === id;\n\n      if (wasOver) {\n        return wasCombining ? idleWithAnimation : idleWithoutAnimation;\n      }\n\n      if (isHome) {\n        return idleWithAnimation;\n      }\n\n      return idleWithoutAnimation;\n    }\n\n    return idleWithoutAnimation;\n  };\n\n  return selector;\n};\nvar mapDispatchToProps$1 = {\n  updateViewportMaxScroll: updateViewportMaxScroll\n};\n\nfunction getBody() {\n  !document.body ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'document.body is not ready') : invariant(false) : void 0;\n  return document.body;\n}\n\nvar defaultProps = {\n  mode: 'standard',\n  type: 'DEFAULT',\n  direction: 'vertical',\n  isDropDisabled: false,\n  isCombineEnabled: false,\n  ignoreContainerClipping: false,\n  renderClone: null,\n  getContainerForClone: getBody\n};\nvar ConnectedDroppable = connect(makeMapStateToProps$1, mapDispatchToProps$1, null, {\n  context: StoreContext,\n  pure: true,\n  areStatePropsEqual: isStrictEqual\n})(Droppable);\nConnectedDroppable.defaultProps = defaultProps;\n\nexport { DragDropContext, PublicDraggable as Draggable, ConnectedDroppable as Droppable, resetServerContext, useKeyboardSensor, useMouseSensor, useTouchSensor };\n","\"use client\";\n\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport const propTypes = {\n  /**\n   * @default 'img'\n   */\n  bsPrefix: PropTypes.string,\n  /**\n   * Sets image as fluid image.\n   */\n  fluid: PropTypes.bool,\n  /**\n   * Sets image shape as rounded.\n   */\n  rounded: PropTypes.bool,\n  /**\n   * Sets image shape as circle.\n   */\n  roundedCircle: PropTypes.bool,\n  /**\n   * Sets image shape as thumbnail.\n   */\n  thumbnail: PropTypes.bool\n};\nconst Image = /*#__PURE__*/React.forwardRef(({\n  bsPrefix,\n  className,\n  fluid = false,\n  rounded = false,\n  roundedCircle = false,\n  thumbnail = false,\n  ...props\n}, ref) => {\n  bsPrefix = useBootstrapPrefix(bsPrefix, 'img');\n  return /*#__PURE__*/_jsx(\"img\", {\n    // eslint-disable-line jsx-a11y/alt-text\n    ref: ref,\n    ...props,\n    className: classNames(className, fluid && `${bsPrefix}-fluid`, rounded && `rounded`, roundedCircle && `rounded-circle`, thumbnail && `${bsPrefix}-thumbnail`)\n  });\n});\nImage.displayName = 'Image';\nexport default Image;","import type { MouseEvent } from 'react';\nimport type {\n  ChartType,\n  ChartData,\n  DefaultDataPoint,\n  ChartDataset,\n  ChartOptions,\n  Chart,\n} from 'chart.js';\n\nimport type { ForwardedRef } from './types';\n\nconst defaultDatasetIdKey = 'label';\n\nexport function reforwardRef<T>(ref: ForwardedRef<T>, value: T) {\n  if (typeof ref === 'function') {\n    ref(value);\n  } else if (ref) {\n    ref.current = value;\n  }\n}\n\nexport function setOptions<\n  TType extends ChartType = ChartType,\n  TData = DefaultDataPoint<TType>,\n  TLabel = unknown\n>(chart: Chart<TType, TData, TLabel>, nextOptions: ChartOptions<TType>) {\n  Object.assign(chart.options, nextOptions);\n}\n\nexport function setLabels<\n  TType extends ChartType = ChartType,\n  TData = DefaultDataPoint<TType>,\n  TLabel = unknown\n>(\n  currentData: ChartData<TType, TData, TLabel>,\n  nextLabels: TLabel[] | undefined\n) {\n  currentData.labels = nextLabels;\n}\n\nexport function setDatasets<\n  TType extends ChartType = ChartType,\n  TData = DefaultDataPoint<TType>,\n  TLabel = unknown\n>(\n  currentData: ChartData<TType, TData, TLabel>,\n  nextDatasets: ChartDataset<TType, TData>[],\n  datasetIdKey = defaultDatasetIdKey\n) {\n  const addedDatasets: ChartDataset<TType, TData>[] = [];\n\n  currentData.datasets = nextDatasets.map(\n    (nextDataset: Record<string, unknown>) => {\n      // given the new set, find it's current match\n      const currentDataset = currentData.datasets.find(\n        (dataset: Record<string, unknown>) =>\n          dataset[datasetIdKey] === nextDataset[datasetIdKey]\n      );\n\n      // There is no original to update, so simply add new one\n      if (\n        !currentDataset ||\n        !nextDataset.data ||\n        addedDatasets.includes(currentDataset)\n      ) {\n        return { ...nextDataset } as ChartDataset<TType, TData>;\n      }\n\n      addedDatasets.push(currentDataset);\n\n      Object.assign(currentDataset, nextDataset);\n\n      return currentDataset;\n    }\n  );\n}\n\nexport function cloneData<\n  TType extends ChartType = ChartType,\n  TData = DefaultDataPoint<TType>,\n  TLabel = unknown\n>(data: ChartData<TType, TData, TLabel>, datasetIdKey = defaultDatasetIdKey) {\n  const nextData: ChartData<TType, TData, TLabel> = {\n    labels: [],\n    datasets: [],\n  };\n\n  setLabels(nextData, data.labels);\n  setDatasets(nextData, data.datasets, datasetIdKey);\n\n  return nextData;\n}\n\n/**\n * Get dataset from mouse click event\n * @param chart - Chart.js instance\n * @param event - Mouse click event\n * @returns Dataset\n */\nexport function getDatasetAtEvent(\n  chart: Chart,\n  event: MouseEvent<HTMLCanvasElement>\n) {\n  return chart.getElementsAtEventForMode(\n    event.nativeEvent,\n    'dataset',\n    { intersect: true },\n    false\n  );\n}\n\n/**\n * Get single dataset element from mouse click event\n * @param chart - Chart.js instance\n * @param event - Mouse click event\n * @returns Dataset\n */\nexport function getElementAtEvent(\n  chart: Chart,\n  event: MouseEvent<HTMLCanvasElement>\n) {\n  return chart.getElementsAtEventForMode(\n    event.nativeEvent,\n    'nearest',\n    { intersect: true },\n    false\n  );\n}\n\n/**\n * Get all dataset elements from mouse click event\n * @param chart - Chart.js instance\n * @param event - Mouse click event\n * @returns Dataset\n */\nexport function getElementsAtEvent(\n  chart: Chart,\n  event: MouseEvent<HTMLCanvasElement>\n) {\n  return chart.getElementsAtEventForMode(\n    event.nativeEvent,\n    'index',\n    { intersect: true },\n    false\n  );\n}\n","import React, { useEffect, useRef, forwardRef } from 'react';\nimport { Chart as ChartJS } from 'chart.js';\nimport type { ChartType, DefaultDataPoint } from 'chart.js';\n\nimport type { ForwardedRef, ChartProps, TypedChartComponent } from './types';\nimport {\n  reforwardRef,\n  cloneData,\n  setOptions,\n  setLabels,\n  setDatasets,\n} from './utils';\n\nfunction ChartComponent<\n  TType extends ChartType = ChartType,\n  TData = DefaultDataPoint<TType>,\n  TLabel = unknown\n>(\n  {\n    height = 150,\n    width = 300,\n    redraw = false,\n    datasetIdKey,\n    type,\n    data,\n    options,\n    plugins = [],\n    fallbackContent,\n    updateMode,\n    ...props\n  }: ChartProps<TType, TData, TLabel>,\n  ref: ForwardedRef<ChartJS<TType, TData, TLabel>>\n) {\n  type TypedChartJS = ChartJS<TType, TData, TLabel>;\n\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const chartRef = useRef<TypedChartJS | null>();\n\n  const renderChart = () => {\n    if (!canvasRef.current) return;\n\n    chartRef.current = new ChartJS(canvasRef.current, {\n      type,\n      data: cloneData(data, datasetIdKey),\n      options: options && { ...options },\n      plugins,\n    });\n\n    reforwardRef(ref, chartRef.current);\n  };\n\n  const destroyChart = () => {\n    reforwardRef(ref, null);\n\n    if (chartRef.current) {\n      chartRef.current.destroy();\n      chartRef.current = null;\n    }\n  };\n\n  useEffect(() => {\n    if (!redraw && chartRef.current && options) {\n      setOptions(chartRef.current, options);\n    }\n  }, [redraw, options]);\n\n  useEffect(() => {\n    if (!redraw && chartRef.current) {\n      setLabels(chartRef.current.config.data, data.labels);\n    }\n  }, [redraw, data.labels]);\n\n  useEffect(() => {\n    if (!redraw && chartRef.current && data.datasets) {\n      setDatasets(chartRef.current.config.data, data.datasets, datasetIdKey);\n    }\n  }, [redraw, data.datasets]);\n\n  useEffect(() => {\n    if (!chartRef.current) return;\n\n    if (redraw) {\n      destroyChart();\n      setTimeout(renderChart);\n    } else {\n      chartRef.current.update(updateMode);\n    }\n  }, [redraw, options, data.labels, data.datasets, updateMode]);\n\n  useEffect(() => {\n    if (!chartRef.current) return;\n\n    destroyChart();\n    setTimeout(renderChart);\n  }, [type]);\n\n  useEffect(() => {\n    renderChart();\n\n    return () => destroyChart();\n  }, []);\n\n  return (\n    <canvas ref={canvasRef} role='img' height={height} width={width} {...props}>\n      {fallbackContent}\n    </canvas>\n  );\n}\n\nexport const Chart = forwardRef(ChartComponent) as TypedChartComponent;\n","import React, { forwardRef } from 'react';\nimport {\n  Chart as ChartJS,\n  LineController,\n  BarController,\n  RadarController,\n  DoughnutController,\n  PolarAreaController,\n  BubbleController,\n  PieController,\n  ScatterController,\n} from 'chart.js';\nimport type { ChartType, ChartComponentLike } from 'chart.js';\n\nimport type {\n  ChartProps,\n  ChartJSOrUndefined,\n  TypedChartComponent,\n} from './types';\nimport { Chart } from './chart';\n\nfunction createTypedChart<T extends ChartType>(\n  type: T,\n  registerables: ChartComponentLike\n) {\n  ChartJS.register(registerables);\n\n  return forwardRef<ChartJSOrUndefined<T>, Omit<ChartProps<T>, 'type'>>(\n    (props, ref) => <Chart {...props} ref={ref} type={type} />\n  ) as TypedChartComponent<T, true>;\n}\n\nexport const Line = /* #__PURE__ */ createTypedChart('line', LineController);\n\nexport const Bar = /* #__PURE__ */ createTypedChart('bar', BarController);\n\nexport const Radar = /* #__PURE__ */ createTypedChart('radar', RadarController);\n\nexport const Doughnut = /* #__PURE__ */ createTypedChart(\n  'doughnut',\n  DoughnutController\n);\n\nexport const PolarArea = /* #__PURE__ */ createTypedChart(\n  'polarArea',\n  PolarAreaController\n);\n\nexport const Bubble = /* #__PURE__ */ createTypedChart(\n  'bubble',\n  BubbleController\n);\n\nexport const Pie = /* #__PURE__ */ createTypedChart('pie', PieController);\n\nexport const Scatter = /* #__PURE__ */ createTypedChart(\n  'scatter',\n  ScatterController\n);\n","export const VIEWBOX_WIDTH = 100;\nexport const VIEWBOX_HEIGHT = 100;\nexport const VIEWBOX_HEIGHT_HALF = 50;\nexport const VIEWBOX_CENTER_X = 50;\nexport const VIEWBOX_CENTER_Y = 50;\n","import * as React from 'react';\nimport { VIEWBOX_CENTER_X, VIEWBOX_CENTER_Y } from './constants';\n\nfunction Path({\n  className,\n  counterClockwise,\n  dashRatio,\n  pathRadius,\n  strokeWidth,\n  style,\n}: {\n  className?: string;\n  counterClockwise: boolean;\n  dashRatio: number;\n  pathRadius: number;\n  strokeWidth: number;\n  style?: object;\n}) {\n  return (\n    <path\n      className={className}\n      style={Object.assign({}, style, getDashStyle({ pathRadius, dashRatio, counterClockwise }))}\n      d={getPathDescription({\n        pathRadius,\n        counterClockwise,\n      })}\n      strokeWidth={strokeWidth}\n      fillOpacity={0}\n    />\n  );\n}\n\n// SVG path description specifies how the path should be drawn\nfunction getPathDescription({\n  pathRadius,\n  counterClockwise,\n}: {\n  pathRadius: number;\n  counterClockwise: boolean;\n}) {\n  const radius = pathRadius;\n  const rotation = counterClockwise ? 1 : 0;\n\n  // Move to center of canvas\n  // Relative move to top canvas\n  // Relative arc to bottom of canvas\n  // Relative arc to top of canvas\n  return `\n      M ${VIEWBOX_CENTER_X},${VIEWBOX_CENTER_Y}\n      m 0,-${radius}\n      a ${radius},${radius} ${rotation} 1 1 0,${2 * radius}\n      a ${radius},${radius} ${rotation} 1 1 0,-${2 * radius}\n    `;\n}\n\nfunction getDashStyle({\n  counterClockwise,\n  dashRatio,\n  pathRadius,\n}: {\n  counterClockwise: boolean;\n  dashRatio: number;\n  pathRadius: number;\n}) {\n  const diameter = Math.PI * 2 * pathRadius;\n  const gapLength = (1 - dashRatio) * diameter;\n\n  return {\n    // Have dash be full diameter, and gap be full diameter\n    strokeDasharray: `${diameter}px ${diameter}px`,\n    // Shift dash backward by gapLength, so gap starts appearing at correct distance\n    strokeDashoffset: `${counterClockwise ? -gapLength : gapLength}px`,\n  };\n}\n\nexport default Path;\n","import * as React from 'react';\n\nimport {\n  VIEWBOX_WIDTH,\n  VIEWBOX_HEIGHT,\n  VIEWBOX_HEIGHT_HALF,\n  VIEWBOX_CENTER_X,\n  VIEWBOX_CENTER_Y,\n} from './constants';\nimport Path from './Path';\nimport { CircularProgressbarDefaultProps, CircularProgressbarProps } from './types';\n\nclass CircularProgressbar extends React.Component<CircularProgressbarProps> {\n  static defaultProps: CircularProgressbarDefaultProps = {\n    background: false,\n    backgroundPadding: 0,\n    circleRatio: 1,\n    classes: {\n      root: 'CircularProgressbar',\n      trail: 'CircularProgressbar-trail',\n      path: 'CircularProgressbar-path',\n      text: 'CircularProgressbar-text',\n      background: 'CircularProgressbar-background',\n    },\n    counterClockwise: false,\n    className: '',\n    maxValue: 100,\n    minValue: 0,\n    strokeWidth: 8,\n    styles: {\n      root: {},\n      trail: {},\n      path: {},\n      text: {},\n      background: {},\n    },\n    text: '',\n  };\n\n  getBackgroundPadding() {\n    if (!this.props.background) {\n      // Don't add padding if not displaying background\n      return 0;\n    }\n    return this.props.backgroundPadding;\n  }\n\n  getPathRadius() {\n    // The radius of the path is defined to be in the middle, so in order for the path to\n    // fit perfectly inside the 100x100 viewBox, need to subtract half the strokeWidth\n    return VIEWBOX_HEIGHT_HALF - this.props.strokeWidth / 2 - this.getBackgroundPadding();\n  }\n\n  // Ratio of path length to trail length, as a value between 0 and 1\n  getPathRatio() {\n    const { value, minValue, maxValue } = this.props;\n    const boundedValue = Math.min(Math.max(value, minValue), maxValue);\n    return (boundedValue - minValue) / (maxValue - minValue);\n  }\n\n  render() {\n    const {\n      circleRatio,\n      className,\n      classes,\n      counterClockwise,\n      styles,\n      strokeWidth,\n      text,\n    } = this.props;\n\n    const pathRadius = this.getPathRadius();\n    const pathRatio = this.getPathRatio();\n\n    return (\n      <svg\n        className={`${classes.root} ${className}`}\n        style={styles.root}\n        viewBox={`0 0 ${VIEWBOX_WIDTH} ${VIEWBOX_HEIGHT}`}\n        data-test-id=\"CircularProgressbar\"\n      >\n        {this.props.background ? (\n          <circle\n            className={classes.background}\n            style={styles.background}\n            cx={VIEWBOX_CENTER_X}\n            cy={VIEWBOX_CENTER_Y}\n            r={VIEWBOX_HEIGHT_HALF}\n          />\n        ) : null}\n\n        <Path\n          className={classes.trail}\n          counterClockwise={counterClockwise}\n          dashRatio={circleRatio}\n          pathRadius={pathRadius}\n          strokeWidth={strokeWidth}\n          style={styles.trail}\n        />\n\n        <Path\n          className={classes.path}\n          counterClockwise={counterClockwise}\n          dashRatio={pathRatio * circleRatio}\n          pathRadius={pathRadius}\n          strokeWidth={strokeWidth}\n          style={styles.path}\n        />\n\n        {text ? (\n          <text\n            className={classes.text}\n            style={styles.text}\n            x={VIEWBOX_CENTER_X}\n            y={VIEWBOX_CENTER_Y}\n          >\n            {text}\n          </text>\n        ) : null}\n      </svg>\n    );\n  }\n}\n\nexport default CircularProgressbar;\n","import * as React from 'react';\n\nimport CircularProgressbar from './CircularProgressbar';\nimport { CircularProgressbarWrapperProps } from './types';\n\ntype CircularProgressbarWithChildrenProps = CircularProgressbarWrapperProps & {\n  children?: React.ReactNode;\n};\n\n// This is a wrapper around CircularProgressbar that allows passing children,\n// which will be vertically and horizontally centered inside the progressbar automatically.\nfunction CircularProgressbarWithChildren(props: CircularProgressbarWithChildrenProps) {\n  const { children, ...circularProgressbarProps } = props;\n\n  return (\n    <div data-test-id=\"CircularProgressbarWithChildren\">\n      {/* Has an extra div wrapper because otherwise, adding content after\n      this progressbar is spaced weirdly. */}\n      <div style={{ position: 'relative', width: '100%', height: '100%' }}>\n        {/* Progressbar is not positioned absolutely, so that it can establish\n      intrinsic size for props.children's content. */}\n        <CircularProgressbar {...circularProgressbarProps} />\n\n        {/* Children are positioned absolutely, and height adapts to the\n      progressbar's intrinsic size. It appears below the progressbar,\n      but negative margin moves it back up. */}\n        {props.children ? (\n          <div\n            data-test-id=\"CircularProgressbarWithChildren__children\"\n            style={{\n              position: 'absolute',\n              width: '100%',\n              height: '100%',\n              marginTop: '-100%',\n              display: 'flex',\n              flexDirection: 'column',\n              justifyContent: 'center',\n              alignItems: 'center',\n            }}\n          >\n            {props.children}\n          </div>\n        ) : null}\n      </div>\n    </div>\n  );\n}\n\nexport default CircularProgressbarWithChildren;\n","import { CircularProgressbarStyles } from './types';\n\nexport default function buildStyles({\n  rotation,\n  strokeLinecap,\n  textColor,\n  textSize,\n  pathColor,\n  pathTransition,\n  pathTransitionDuration,\n  trailColor,\n  backgroundColor,\n}: {\n  rotation?: number; // Number of turns, 0-1\n  strokeLinecap?: any;\n  textColor?: string;\n  textSize?: string | number;\n  pathColor?: string;\n  pathTransition?: string;\n  pathTransitionDuration?: number; // Measured in seconds\n  trailColor?: string;\n  backgroundColor?: string;\n}): CircularProgressbarStyles {\n  const rotationTransform = rotation == null ? undefined : `rotate(${rotation}turn)`;\n  const rotationTransformOrigin = rotation == null ? undefined : 'center center';\n\n  return {\n    root: {},\n    path: removeUndefinedValues({\n      stroke: pathColor,\n      strokeLinecap: strokeLinecap,\n      transform: rotationTransform,\n      transformOrigin: rotationTransformOrigin,\n      transition: pathTransition,\n      transitionDuration: pathTransitionDuration == null ? undefined : `${pathTransitionDuration}s`,\n    }),\n    trail: removeUndefinedValues({\n      stroke: trailColor,\n      strokeLinecap: strokeLinecap,\n      transform: rotationTransform,\n      transformOrigin: rotationTransformOrigin,\n    }),\n    text: removeUndefinedValues({\n      fill: textColor,\n      fontSize: textSize,\n    }),\n    background: removeUndefinedValues({\n      fill: backgroundColor,\n    }),\n  };\n}\n\nfunction removeUndefinedValues(obj: { [key: string]: any }) {\n  Object.keys(obj).forEach((key: string) => {\n    if (obj[key] == null) {\n      delete obj[key];\n    }\n  });\n  return obj;\n}\n","/** @license React v17.0.2\n * react-is.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var b=60103,c=60106,d=60107,e=60108,f=60114,g=60109,h=60110,k=60112,l=60113,m=60120,n=60115,p=60116,q=60121,r=60122,u=60117,v=60129,w=60131;\nif(\"function\"===typeof Symbol&&Symbol.for){var x=Symbol.for;b=x(\"react.element\");c=x(\"react.portal\");d=x(\"react.fragment\");e=x(\"react.strict_mode\");f=x(\"react.profiler\");g=x(\"react.provider\");h=x(\"react.context\");k=x(\"react.forward_ref\");l=x(\"react.suspense\");m=x(\"react.suspense_list\");n=x(\"react.memo\");p=x(\"react.lazy\");q=x(\"react.block\");r=x(\"react.server.block\");u=x(\"react.fundamental\");v=x(\"react.debug_trace_mode\");w=x(\"react.legacy_hidden\")}\nfunction y(a){if(\"object\"===typeof a&&null!==a){var t=a.$$typeof;switch(t){case b:switch(a=a.type,a){case d:case f:case e:case l:case m:return a;default:switch(a=a&&a.$$typeof,a){case h:case k:case p:case n:case g:return a;default:return t}}case c:return t}}}var z=g,A=b,B=k,C=d,D=p,E=n,F=c,G=f,H=e,I=l;exports.ContextConsumer=h;exports.ContextProvider=z;exports.Element=A;exports.ForwardRef=B;exports.Fragment=C;exports.Lazy=D;exports.Memo=E;exports.Portal=F;exports.Profiler=G;exports.StrictMode=H;\nexports.Suspense=I;exports.isAsyncMode=function(){return!1};exports.isConcurrentMode=function(){return!1};exports.isContextConsumer=function(a){return y(a)===h};exports.isContextProvider=function(a){return y(a)===g};exports.isElement=function(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===b};exports.isForwardRef=function(a){return y(a)===k};exports.isFragment=function(a){return y(a)===d};exports.isLazy=function(a){return y(a)===p};exports.isMemo=function(a){return y(a)===n};\nexports.isPortal=function(a){return y(a)===c};exports.isProfiler=function(a){return y(a)===f};exports.isStrictMode=function(a){return y(a)===e};exports.isSuspense=function(a){return y(a)===l};exports.isValidElementType=function(a){return\"string\"===typeof a||\"function\"===typeof a||a===d||a===f||a===v||a===e||a===l||a===m||a===w||\"object\"===typeof a&&null!==a&&(a.$$typeof===p||a.$$typeof===n||a.$$typeof===g||a.$$typeof===h||a.$$typeof===k||a.$$typeof===u||a.$$typeof===q||a[0]===r)?!0:!1};\nexports.typeOf=y;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-is.production.min.js');\n} else {\n  module.exports = require('./cjs/react-is.development.js');\n}\n","module.exports = require(\"./lib\");\n","\"use strict\";var __awaiter=(this&&this.__awaiter)||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value);});}\nreturn new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value));}catch(e){reject(e);}}\nfunction rejected(value){try{step(generator[\"throw\"](value));}catch(e){reject(e);}}\nfunction step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected);}\nstep((generator=generator.apply(thisArg,_arguments||[])).next());});};var __generator=(this&&this.__generator)||function(thisArg,body){var _={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1];},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),\"throw\":verb(1),\"return\":verb(2)},typeof Symbol===\"function\"&&(g[Symbol.iterator]=function(){return this;}),g;function verb(n){return function(v){return step([n,v]);};}\nfunction step(op){if(f)throw new TypeError(\"Generator is already executing.\");while(_)try{if(f=1,y&&(t=op[0]&2?y[\"return\"]:op[0]?y[\"throw\"]||((t=y[\"return\"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue;}\nif(op[0]===3&&(!t||(op[1]>t[0]&&op[1]<t[3]))){_.label=op[1];break;}\nif(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break;}\nif(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break;}\nif(t[2])_.ops.pop();_.trys.pop();continue;}\nop=body.call(thisArg,_);}catch(e){op=[6,e];y=0;}finally{f=t=0;}\nif(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true};}};Object.defineProperty(exports,\"__esModule\",{value:true});exports.ReactMediaRecorder=exports.useReactMediaRecorder=exports.RecorderErrors=void 0;var extendable_media_recorder_1=require(\"extendable-media-recorder\");var react_1=require(\"react\");var extendable_media_recorder_wav_encoder_1=require(\"extendable-media-recorder-wav-encoder\");var RecorderErrors;(function(RecorderErrors){RecorderErrors[\"AbortError\"]=\"media_aborted\";RecorderErrors[\"NotAllowedError\"]=\"permission_denied\";RecorderErrors[\"NotFoundError\"]=\"no_specified_media_found\";RecorderErrors[\"NotReadableError\"]=\"media_in_use\";RecorderErrors[\"OverconstrainedError\"]=\"invalid_media_constraints\";RecorderErrors[\"TypeError\"]=\"no_constraints\";RecorderErrors[\"NONE\"]=\"\";RecorderErrors[\"NO_RECORDER\"]=\"recorder_error\";})(RecorderErrors=exports.RecorderErrors||(exports.RecorderErrors={}));function useReactMediaRecorder(_a){var _this=this;var _b=_a.audio,audio=_b===void 0?true:_b,_c=_a.video,video=_c===void 0?false:_c,_d=_a.onStop,onStop=_d===void 0?function(){return null;}:_d,_e=_a.onStart,onStart=_e===void 0?function(){return null;}:_e,blobPropertyBag=_a.blobPropertyBag,_f=_a.screen,screen=_f===void 0?false:_f,_g=_a.mediaRecorderOptions,mediaRecorderOptions=_g===void 0?undefined:_g,_h=_a.customMediaStream,customMediaStream=_h===void 0?null:_h,_j=_a.stopStreamsOnStop,stopStreamsOnStop=_j===void 0?true:_j,_k=_a.askPermissionOnMount,askPermissionOnMount=_k===void 0?false:_k;var mediaRecorder=(0,react_1.useRef)(null);var mediaChunks=(0,react_1.useRef)([]);var mediaStream=(0,react_1.useRef)(null);var _l=(0,react_1.useState)(\"idle\"),status=_l[0],setStatus=_l[1];var _m=(0,react_1.useState)(false),isAudioMuted=_m[0],setIsAudioMuted=_m[1];var _o=(0,react_1.useState)(undefined),mediaBlobUrl=_o[0],setMediaBlobUrl=_o[1];var _p=(0,react_1.useState)(\"NONE\"),error=_p[0],setError=_p[1];(0,react_1.useEffect)(function(){var setup=function(){return __awaiter(_this,void 0,void 0,function(){var _a;return __generator(this,function(_b){switch(_b.label){case 0:_a=extendable_media_recorder_1.register;return[4,(0,extendable_media_recorder_wav_encoder_1.connect)()];case 1:return[4,_a.apply(void 0,[_b.sent()])];case 2:_b.sent();return[2];}});});};setup();},[]);var getMediaStream=(0,react_1.useCallback)(function(){return __awaiter(_this,void 0,void 0,function(){var requiredMedia,stream_1,audioStream,stream,error_1;return __generator(this,function(_a){switch(_a.label){case 0:setStatus(\"acquiring_media\");requiredMedia={audio:typeof audio===\"boolean\"?!!audio:audio,video:typeof video===\"boolean\"?!!video:video,};_a.label=1;case 1:_a.trys.push([1,9,,10]);if(!customMediaStream)return[3,2];mediaStream.current=customMediaStream;return[3,8];case 2:if(!screen)return[3,6];return[4,window.navigator.mediaDevices.getDisplayMedia({video:video||true,})];case 3:stream_1=(_a.sent());stream_1.getVideoTracks()[0].addEventListener(\"ended\",function(){stopRecording();});if(!audio)return[3,5];return[4,window.navigator.mediaDevices.getUserMedia({audio:audio,})];case 4:audioStream=_a.sent();audioStream.getAudioTracks().forEach(function(audioTrack){return stream_1.addTrack(audioTrack);});_a.label=5;case 5:mediaStream.current=stream_1;return[3,8];case 6:return[4,window.navigator.mediaDevices.getUserMedia(requiredMedia)];case 7:stream=_a.sent();mediaStream.current=stream;_a.label=8;case 8:setStatus(\"idle\");return[3,10];case 9:error_1=_a.sent();setError(error_1.name);setStatus(\"idle\");return[3,10];case 10:return[2];}});});},[audio,video,screen]);(0,react_1.useEffect)(function(){if(!window.MediaRecorder){throw new Error(\"Unsupported Browser\");}\nif(screen){if(!window.navigator.mediaDevices.getDisplayMedia){throw new Error(\"This browser doesn\\'t support screen capturing\");}}\nvar checkConstraints=function(mediaType){var supportedMediaConstraints=navigator.mediaDevices.getSupportedConstraints();var unSupportedConstraints=Object.keys(mediaType).filter(function(constraint){return!supportedMediaConstraints[constraint];});if(unSupportedConstraints.length>0){console.error(\"The constraints \".concat(unSupportedConstraints.join(\",\"),\" doesn't support on this browser. Please check your ReactMediaRecorder component.\"));}};if(typeof audio===\"object\"){checkConstraints(audio);}\nif(typeof video===\"object\"){checkConstraints(video);}\nif(mediaRecorderOptions&&mediaRecorderOptions.mimeType){if(!MediaRecorder.isTypeSupported(mediaRecorderOptions.mimeType)){console.error(\"The specified MIME type you supplied for MediaRecorder doesn't support this browser\");}}\nif(!mediaStream.current&&askPermissionOnMount){getMediaStream();}\nreturn function(){if(mediaStream.current){var tracks=mediaStream.current.getTracks();tracks.forEach(function(track){return track.clone().stop();});}};},[audio,screen,video,getMediaStream,mediaRecorderOptions,askPermissionOnMount,]);var startRecording=function(){return __awaiter(_this,void 0,void 0,function(){var isStreamEnded;return __generator(this,function(_a){switch(_a.label){case 0:setError(\"NONE\");if(!!mediaStream.current)return[3,2];return[4,getMediaStream()];case 1:_a.sent();_a.label=2;case 2:if(!mediaStream.current)return[3,5];isStreamEnded=mediaStream.current.getTracks().some(function(track){return track.readyState===\"ended\";});if(!isStreamEnded)return[3,4];return[4,getMediaStream()];case 3:_a.sent();_a.label=4;case 4:if(!mediaStream.current.active){return[2];}\nmediaRecorder.current=new extendable_media_recorder_1.MediaRecorder(mediaStream.current,mediaRecorderOptions||undefined);mediaRecorder.current.ondataavailable=onRecordingActive;mediaRecorder.current.onstop=onRecordingStop;mediaRecorder.current.onstart=onRecordingStart;mediaRecorder.current.onerror=function(){setError(\"NO_RECORDER\");setStatus(\"idle\");};mediaRecorder.current.start();setStatus(\"recording\");_a.label=5;case 5:return[2];}});});};var onRecordingActive=function(_a){var data=_a.data;mediaChunks.current.push(data);};var onRecordingStart=function(){onStart();};var onRecordingStop=function(){var chunk=mediaChunks.current[0];var blobProperty=Object.assign({type:chunk.type},blobPropertyBag||(video?{type:\"video/mp4\"}:{type:\"audio/wav\"}));var blob=new Blob(mediaChunks.current,blobProperty);var url=URL.createObjectURL(blob);setStatus(\"stopped\");setMediaBlobUrl(url);onStop(url,blob);};var muteAudio=function(mute){setIsAudioMuted(mute);if(mediaStream.current){mediaStream.current.getAudioTracks().forEach(function(audioTrack){return(audioTrack.enabled=!mute);});}};var pauseRecording=function(){if(mediaRecorder.current&&mediaRecorder.current.state===\"recording\"){setStatus(\"paused\");mediaRecorder.current.pause();}};var resumeRecording=function(){if(mediaRecorder.current&&mediaRecorder.current.state===\"paused\"){setStatus(\"recording\");mediaRecorder.current.resume();}};var stopRecording=function(){if(mediaRecorder.current){if(mediaRecorder.current.state!==\"inactive\"){setStatus(\"stopping\");mediaRecorder.current.stop();if(stopStreamsOnStop){mediaStream.current&&mediaStream.current.getTracks().forEach(function(track){return track.stop();});}\nmediaChunks.current=[];}}};return{error:RecorderErrors[error],muteAudio:function(){return muteAudio(true);},unMuteAudio:function(){return muteAudio(false);},startRecording:startRecording,pauseRecording:pauseRecording,resumeRecording:resumeRecording,stopRecording:stopRecording,mediaBlobUrl:mediaBlobUrl,status:status,isAudioMuted:isAudioMuted,previewStream:mediaStream.current?new MediaStream(mediaStream.current.getVideoTracks()):null,previewAudioStream:mediaStream.current?new MediaStream(mediaStream.current.getAudioTracks()):null,clearBlobUrl:function(){if(mediaBlobUrl){URL.revokeObjectURL(mediaBlobUrl);}\nsetMediaBlobUrl(undefined);setStatus(\"idle\");},};}\nexports.useReactMediaRecorder=useReactMediaRecorder;var ReactMediaRecorder=function(props){return props.render(useReactMediaRecorder(props));};exports.ReactMediaRecorder=ReactMediaRecorder;","var __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(\n  // If the importer is in node compatibility mode or this is not an ESM\n  // file that has been converted to a CommonJS file using a Babel-\n  // compatible transform (i.e. \"__esModule\" has not been set), then set\n  // \"default\" to the CommonJS \"module.exports\" for node compatibility.\n  isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n  mod\n));\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nvar Player_exports = {};\n__export(Player_exports, {\n  default: () => Player\n});\nmodule.exports = __toCommonJS(Player_exports);\nvar import_react = __toESM(require(\"react\"));\nvar import_react_fast_compare = __toESM(require(\"react-fast-compare\"));\nvar import_props = require(\"./props\");\nvar import_utils = require(\"./utils\");\nconst SEEK_ON_PLAY_EXPIRY = 5e3;\nclass Player extends import_react.Component {\n  constructor() {\n    super(...arguments);\n    __publicField(this, \"mounted\", false);\n    __publicField(this, \"isReady\", false);\n    __publicField(this, \"isPlaying\", false);\n    // Track playing state internally to prevent bugs\n    __publicField(this, \"isLoading\", true);\n    // Use isLoading to prevent onPause when switching URL\n    __publicField(this, \"loadOnReady\", null);\n    __publicField(this, \"startOnPlay\", true);\n    __publicField(this, \"seekOnPlay\", null);\n    __publicField(this, \"onDurationCalled\", false);\n    __publicField(this, \"handlePlayerMount\", (player) => {\n      if (this.player) {\n        this.progress();\n        return;\n      }\n      this.player = player;\n      this.player.load(this.props.url);\n      this.progress();\n    });\n    __publicField(this, \"getInternalPlayer\", (key) => {\n      if (!this.player)\n        return null;\n      return this.player[key];\n    });\n    __publicField(this, \"progress\", () => {\n      if (this.props.url && this.player && this.isReady) {\n        const playedSeconds = this.getCurrentTime() || 0;\n        const loadedSeconds = this.getSecondsLoaded();\n        const duration = this.getDuration();\n        if (duration) {\n          const progress = {\n            playedSeconds,\n            played: playedSeconds / duration\n          };\n          if (loadedSeconds !== null) {\n            progress.loadedSeconds = loadedSeconds;\n            progress.loaded = loadedSeconds / duration;\n          }\n          if (progress.playedSeconds !== this.prevPlayed || progress.loadedSeconds !== this.prevLoaded) {\n            this.props.onProgress(progress);\n          }\n          this.prevPlayed = progress.playedSeconds;\n          this.prevLoaded = progress.loadedSeconds;\n        }\n      }\n      this.progressTimeout = setTimeout(this.progress, this.props.progressFrequency || this.props.progressInterval);\n    });\n    __publicField(this, \"handleReady\", () => {\n      if (!this.mounted)\n        return;\n      this.isReady = true;\n      this.isLoading = false;\n      const { onReady, playing, volume, muted } = this.props;\n      onReady();\n      if (!muted && volume !== null) {\n        this.player.setVolume(volume);\n      }\n      if (this.loadOnReady) {\n        this.player.load(this.loadOnReady, true);\n        this.loadOnReady = null;\n      } else if (playing) {\n        this.player.play();\n      }\n      this.handleDurationCheck();\n    });\n    __publicField(this, \"handlePlay\", () => {\n      this.isPlaying = true;\n      this.isLoading = false;\n      const { onStart, onPlay, playbackRate } = this.props;\n      if (this.startOnPlay) {\n        if (this.player.setPlaybackRate && playbackRate !== 1) {\n          this.player.setPlaybackRate(playbackRate);\n        }\n        onStart();\n        this.startOnPlay = false;\n      }\n      onPlay();\n      if (this.seekOnPlay) {\n        this.seekTo(this.seekOnPlay);\n        this.seekOnPlay = null;\n      }\n      this.handleDurationCheck();\n    });\n    __publicField(this, \"handlePause\", (e) => {\n      this.isPlaying = false;\n      if (!this.isLoading) {\n        this.props.onPause(e);\n      }\n    });\n    __publicField(this, \"handleEnded\", () => {\n      const { activePlayer, loop, onEnded } = this.props;\n      if (activePlayer.loopOnEnded && loop) {\n        this.seekTo(0);\n      }\n      if (!loop) {\n        this.isPlaying = false;\n        onEnded();\n      }\n    });\n    __publicField(this, \"handleError\", (...args) => {\n      this.isLoading = false;\n      this.props.onError(...args);\n    });\n    __publicField(this, \"handleDurationCheck\", () => {\n      clearTimeout(this.durationCheckTimeout);\n      const duration = this.getDuration();\n      if (duration) {\n        if (!this.onDurationCalled) {\n          this.props.onDuration(duration);\n          this.onDurationCalled = true;\n        }\n      } else {\n        this.durationCheckTimeout = setTimeout(this.handleDurationCheck, 100);\n      }\n    });\n    __publicField(this, \"handleLoaded\", () => {\n      this.isLoading = false;\n    });\n  }\n  componentDidMount() {\n    this.mounted = true;\n  }\n  componentWillUnmount() {\n    clearTimeout(this.progressTimeout);\n    clearTimeout(this.durationCheckTimeout);\n    if (this.isReady && this.props.stopOnUnmount) {\n      this.player.stop();\n      if (this.player.disablePIP) {\n        this.player.disablePIP();\n      }\n    }\n    this.mounted = false;\n  }\n  componentDidUpdate(prevProps) {\n    if (!this.player) {\n      return;\n    }\n    const { url, playing, volume, muted, playbackRate, pip, loop, activePlayer, disableDeferredLoading } = this.props;\n    if (!(0, import_react_fast_compare.default)(prevProps.url, url)) {\n      if (this.isLoading && !activePlayer.forceLoad && !disableDeferredLoading && !(0, import_utils.isMediaStream)(url)) {\n        console.warn(`ReactPlayer: the attempt to load ${url} is being deferred until the player has loaded`);\n        this.loadOnReady = url;\n        return;\n      }\n      this.isLoading = true;\n      this.startOnPlay = true;\n      this.onDurationCalled = false;\n      this.player.load(url, this.isReady);\n    }\n    if (!prevProps.playing && playing && !this.isPlaying) {\n      this.player.play();\n    }\n    if (prevProps.playing && !playing && this.isPlaying) {\n      this.player.pause();\n    }\n    if (!prevProps.pip && pip && this.player.enablePIP) {\n      this.player.enablePIP();\n    }\n    if (prevProps.pip && !pip && this.player.disablePIP) {\n      this.player.disablePIP();\n    }\n    if (prevProps.volume !== volume && volume !== null) {\n      this.player.setVolume(volume);\n    }\n    if (prevProps.muted !== muted) {\n      if (muted) {\n        this.player.mute();\n      } else {\n        this.player.unmute();\n        if (volume !== null) {\n          setTimeout(() => this.player.setVolume(volume));\n        }\n      }\n    }\n    if (prevProps.playbackRate !== playbackRate && this.player.setPlaybackRate) {\n      this.player.setPlaybackRate(playbackRate);\n    }\n    if (prevProps.loop !== loop && this.player.setLoop) {\n      this.player.setLoop(loop);\n    }\n  }\n  getDuration() {\n    if (!this.isReady)\n      return null;\n    return this.player.getDuration();\n  }\n  getCurrentTime() {\n    if (!this.isReady)\n      return null;\n    return this.player.getCurrentTime();\n  }\n  getSecondsLoaded() {\n    if (!this.isReady)\n      return null;\n    return this.player.getSecondsLoaded();\n  }\n  seekTo(amount, type, keepPlaying) {\n    if (!this.isReady) {\n      if (amount !== 0) {\n        this.seekOnPlay = amount;\n        setTimeout(() => {\n          this.seekOnPlay = null;\n        }, SEEK_ON_PLAY_EXPIRY);\n      }\n      return;\n    }\n    const isFraction = !type ? amount > 0 && amount < 1 : type === \"fraction\";\n    if (isFraction) {\n      const duration = this.player.getDuration();\n      if (!duration) {\n        console.warn(\"ReactPlayer: could not seek using fraction \\u2013\\xA0duration not yet available\");\n        return;\n      }\n      this.player.seekTo(duration * amount, keepPlaying);\n      return;\n    }\n    this.player.seekTo(amount, keepPlaying);\n  }\n  render() {\n    const Player2 = this.props.activePlayer;\n    if (!Player2) {\n      return null;\n    }\n    return /* @__PURE__ */ import_react.default.createElement(\n      Player2,\n      {\n        ...this.props,\n        onMount: this.handlePlayerMount,\n        onReady: this.handleReady,\n        onPlay: this.handlePlay,\n        onPause: this.handlePause,\n        onEnded: this.handleEnded,\n        onLoaded: this.handleLoaded,\n        onError: this.handleError\n      }\n    );\n  }\n}\n__publicField(Player, \"displayName\", \"Player\");\n__publicField(Player, \"propTypes\", import_props.propTypes);\n__publicField(Player, \"defaultProps\", import_props.defaultProps);\n","var __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(\n  // If the importer is in node compatibility mode or this is not an ESM\n  // file that has been converted to a CommonJS file using a Babel-\n  // compatible transform (i.e. \"__esModule\" has not been set), then set\n  // \"default\" to the CommonJS \"module.exports\" for node compatibility.\n  isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n  mod\n));\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nvar ReactPlayer_exports = {};\n__export(ReactPlayer_exports, {\n  createReactPlayer: () => createReactPlayer\n});\nmodule.exports = __toCommonJS(ReactPlayer_exports);\nvar import_react = __toESM(require(\"react\"));\nvar import_deepmerge = __toESM(require(\"deepmerge\"));\nvar import_memoize_one = __toESM(require(\"memoize-one\"));\nvar import_react_fast_compare = __toESM(require(\"react-fast-compare\"));\nvar import_props = require(\"./props\");\nvar import_utils = require(\"./utils\");\nvar import_Player = __toESM(require(\"./Player\"));\nconst Preview = (0, import_utils.lazy)(() => import(\n  /* webpackChunkName: 'reactPlayerPreview' */\n  \"./Preview\"\n));\nconst IS_BROWSER = typeof window !== \"undefined\" && window.document;\nconst IS_GLOBAL = typeof global !== \"undefined\" && global.window && global.window.document;\nconst SUPPORTED_PROPS = Object.keys(import_props.propTypes);\nconst UniversalSuspense = IS_BROWSER || IS_GLOBAL ? import_react.Suspense : () => null;\nconst customPlayers = [];\nconst createReactPlayer = (players, fallback) => {\n  var _a;\n  return _a = class extends import_react.Component {\n    constructor() {\n      super(...arguments);\n      __publicField(this, \"state\", {\n        showPreview: !!this.props.light\n      });\n      // Use references, as refs is used by React\n      __publicField(this, \"references\", {\n        wrapper: (wrapper) => {\n          this.wrapper = wrapper;\n        },\n        player: (player) => {\n          this.player = player;\n        }\n      });\n      __publicField(this, \"handleClickPreview\", (e) => {\n        this.setState({ showPreview: false });\n        this.props.onClickPreview(e);\n      });\n      __publicField(this, \"showPreview\", () => {\n        this.setState({ showPreview: true });\n      });\n      __publicField(this, \"getDuration\", () => {\n        if (!this.player)\n          return null;\n        return this.player.getDuration();\n      });\n      __publicField(this, \"getCurrentTime\", () => {\n        if (!this.player)\n          return null;\n        return this.player.getCurrentTime();\n      });\n      __publicField(this, \"getSecondsLoaded\", () => {\n        if (!this.player)\n          return null;\n        return this.player.getSecondsLoaded();\n      });\n      __publicField(this, \"getInternalPlayer\", (key = \"player\") => {\n        if (!this.player)\n          return null;\n        return this.player.getInternalPlayer(key);\n      });\n      __publicField(this, \"seekTo\", (fraction, type, keepPlaying) => {\n        if (!this.player)\n          return null;\n        this.player.seekTo(fraction, type, keepPlaying);\n      });\n      __publicField(this, \"handleReady\", () => {\n        this.props.onReady(this);\n      });\n      __publicField(this, \"getActivePlayer\", (0, import_memoize_one.default)((url) => {\n        for (const player of [...customPlayers, ...players]) {\n          if (player.canPlay(url)) {\n            return player;\n          }\n        }\n        if (fallback) {\n          return fallback;\n        }\n        return null;\n      }));\n      __publicField(this, \"getConfig\", (0, import_memoize_one.default)((url, key) => {\n        const { config } = this.props;\n        return import_deepmerge.default.all([\n          import_props.defaultProps.config,\n          import_props.defaultProps.config[key] || {},\n          config,\n          config[key] || {}\n        ]);\n      }));\n      __publicField(this, \"getAttributes\", (0, import_memoize_one.default)((url) => {\n        return (0, import_utils.omit)(this.props, SUPPORTED_PROPS);\n      }));\n      __publicField(this, \"renderActivePlayer\", (url) => {\n        if (!url)\n          return null;\n        const player = this.getActivePlayer(url);\n        if (!player)\n          return null;\n        const config = this.getConfig(url, player.key);\n        return /* @__PURE__ */ import_react.default.createElement(\n          import_Player.default,\n          {\n            ...this.props,\n            key: player.key,\n            ref: this.references.player,\n            config,\n            activePlayer: player.lazyPlayer || player,\n            onReady: this.handleReady\n          }\n        );\n      });\n    }\n    shouldComponentUpdate(nextProps, nextState) {\n      return !(0, import_react_fast_compare.default)(this.props, nextProps) || !(0, import_react_fast_compare.default)(this.state, nextState);\n    }\n    componentDidUpdate(prevProps) {\n      const { light } = this.props;\n      if (!prevProps.light && light) {\n        this.setState({ showPreview: true });\n      }\n      if (prevProps.light && !light) {\n        this.setState({ showPreview: false });\n      }\n    }\n    renderPreview(url) {\n      if (!url)\n        return null;\n      const { light, playIcon, previewTabIndex, oEmbedUrl } = this.props;\n      return /* @__PURE__ */ import_react.default.createElement(\n        Preview,\n        {\n          url,\n          light,\n          playIcon,\n          previewTabIndex,\n          oEmbedUrl,\n          onClick: this.handleClickPreview\n        }\n      );\n    }\n    render() {\n      const { url, style, width, height, fallback: fallback2, wrapper: Wrapper } = this.props;\n      const { showPreview } = this.state;\n      const attributes = this.getAttributes(url);\n      const wrapperRef = typeof Wrapper === \"string\" ? this.references.wrapper : void 0;\n      return /* @__PURE__ */ import_react.default.createElement(Wrapper, { ref: wrapperRef, style: { ...style, width, height }, ...attributes }, /* @__PURE__ */ import_react.default.createElement(UniversalSuspense, { fallback: fallback2 }, showPreview ? this.renderPreview(url) : this.renderActivePlayer(url)));\n    }\n  }, __publicField(_a, \"displayName\", \"ReactPlayer\"), __publicField(_a, \"propTypes\", import_props.propTypes), __publicField(_a, \"defaultProps\", import_props.defaultProps), __publicField(_a, \"addCustomPlayer\", (player) => {\n    customPlayers.push(player);\n  }), __publicField(_a, \"removeCustomPlayers\", () => {\n    customPlayers.length = 0;\n  }), __publicField(_a, \"canPlay\", (url) => {\n    for (const Player2 of [...customPlayers, ...players]) {\n      if (Player2.canPlay(url)) {\n        return true;\n      }\n    }\n    return false;\n  }), __publicField(_a, \"canEnablePIP\", (url) => {\n    for (const Player2 of [...customPlayers, ...players]) {\n      if (Player2.canEnablePIP && Player2.canEnablePIP(url)) {\n        return true;\n      }\n    }\n    return false;\n  }), _a;\n};\n","var __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(\n  // If the importer is in node compatibility mode or this is not an ESM\n  // file that has been converted to a CommonJS file using a Babel-\n  // compatible transform (i.e. \"__esModule\" has not been set), then set\n  // \"default\" to the CommonJS \"module.exports\" for node compatibility.\n  isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n  mod\n));\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar src_exports = {};\n__export(src_exports, {\n  default: () => src_default\n});\nmodule.exports = __toCommonJS(src_exports);\nvar import_players = __toESM(require(\"./players\"));\nvar import_ReactPlayer = require(\"./ReactPlayer\");\nconst fallback = import_players.default[import_players.default.length - 1];\nvar src_default = (0, import_ReactPlayer.createReactPlayer)(import_players.default, fallback);\n","var __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar patterns_exports = {};\n__export(patterns_exports, {\n  AUDIO_EXTENSIONS: () => AUDIO_EXTENSIONS,\n  DASH_EXTENSIONS: () => DASH_EXTENSIONS,\n  FLV_EXTENSIONS: () => FLV_EXTENSIONS,\n  HLS_EXTENSIONS: () => HLS_EXTENSIONS,\n  MATCH_URL_DAILYMOTION: () => MATCH_URL_DAILYMOTION,\n  MATCH_URL_FACEBOOK: () => MATCH_URL_FACEBOOK,\n  MATCH_URL_FACEBOOK_WATCH: () => MATCH_URL_FACEBOOK_WATCH,\n  MATCH_URL_KALTURA: () => MATCH_URL_KALTURA,\n  MATCH_URL_MIXCLOUD: () => MATCH_URL_MIXCLOUD,\n  MATCH_URL_SOUNDCLOUD: () => MATCH_URL_SOUNDCLOUD,\n  MATCH_URL_STREAMABLE: () => MATCH_URL_STREAMABLE,\n  MATCH_URL_TWITCH_CHANNEL: () => MATCH_URL_TWITCH_CHANNEL,\n  MATCH_URL_TWITCH_VIDEO: () => MATCH_URL_TWITCH_VIDEO,\n  MATCH_URL_VIDYARD: () => MATCH_URL_VIDYARD,\n  MATCH_URL_VIMEO: () => MATCH_URL_VIMEO,\n  MATCH_URL_WISTIA: () => MATCH_URL_WISTIA,\n  MATCH_URL_YOUTUBE: () => MATCH_URL_YOUTUBE,\n  VIDEO_EXTENSIONS: () => VIDEO_EXTENSIONS,\n  canPlay: () => canPlay\n});\nmodule.exports = __toCommonJS(patterns_exports);\nvar import_utils = require(\"./utils\");\nconst MATCH_URL_YOUTUBE = /(?:youtu\\.be\\/|youtube(?:-nocookie|education)?\\.com\\/(?:embed\\/|v\\/|watch\\/|watch\\?v=|watch\\?.+&v=|shorts\\/|live\\/))((\\w|-){11})|youtube\\.com\\/playlist\\?list=|youtube\\.com\\/user\\//;\nconst MATCH_URL_SOUNDCLOUD = /(?:soundcloud\\.com|snd\\.sc)\\/[^.]+$/;\nconst MATCH_URL_VIMEO = /vimeo\\.com\\/(?!progressive_redirect).+/;\nconst MATCH_URL_FACEBOOK = /^https?:\\/\\/(www\\.)?facebook\\.com.*\\/(video(s)?|watch|story)(\\.php?|\\/).+$/;\nconst MATCH_URL_FACEBOOK_WATCH = /^https?:\\/\\/fb\\.watch\\/.+$/;\nconst MATCH_URL_STREAMABLE = /streamable\\.com\\/([a-z0-9]+)$/;\nconst MATCH_URL_WISTIA = /(?:wistia\\.(?:com|net)|wi\\.st)\\/(?:medias|embed)\\/(?:iframe\\/)?([^?]+)/;\nconst MATCH_URL_TWITCH_VIDEO = /(?:www\\.|go\\.)?twitch\\.tv\\/videos\\/(\\d+)($|\\?)/;\nconst MATCH_URL_TWITCH_CHANNEL = /(?:www\\.|go\\.)?twitch\\.tv\\/([a-zA-Z0-9_]+)($|\\?)/;\nconst MATCH_URL_DAILYMOTION = /^(?:(?:https?):)?(?:\\/\\/)?(?:www\\.)?(?:(?:dailymotion\\.com(?:\\/embed)?\\/video)|dai\\.ly)\\/([a-zA-Z0-9]+)(?:_[\\w_-]+)?(?:[\\w.#_-]+)?/;\nconst MATCH_URL_MIXCLOUD = /mixcloud\\.com\\/([^/]+\\/[^/]+)/;\nconst MATCH_URL_VIDYARD = /vidyard.com\\/(?:watch\\/)?([a-zA-Z0-9-_]+)/;\nconst MATCH_URL_KALTURA = /^https?:\\/\\/[a-zA-Z]+\\.kaltura.(com|org)\\/p\\/([0-9]+)\\/sp\\/([0-9]+)00\\/embedIframeJs\\/uiconf_id\\/([0-9]+)\\/partner_id\\/([0-9]+)(.*)entry_id.([a-zA-Z0-9-_].*)$/;\nconst AUDIO_EXTENSIONS = /\\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\\?)/i;\nconst VIDEO_EXTENSIONS = /\\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\\d+]+)?($|\\?)/i;\nconst HLS_EXTENSIONS = /\\.(m3u8)($|\\?)/i;\nconst DASH_EXTENSIONS = /\\.(mpd)($|\\?)/i;\nconst FLV_EXTENSIONS = /\\.(flv)($|\\?)/i;\nconst canPlayFile = (url) => {\n  if (url instanceof Array) {\n    for (const item of url) {\n      if (typeof item === \"string\" && canPlayFile(item)) {\n        return true;\n      }\n      if (canPlayFile(item.src)) {\n        return true;\n      }\n    }\n    return false;\n  }\n  if ((0, import_utils.isMediaStream)(url) || (0, import_utils.isBlobUrl)(url)) {\n    return true;\n  }\n  return AUDIO_EXTENSIONS.test(url) || VIDEO_EXTENSIONS.test(url) || HLS_EXTENSIONS.test(url) || DASH_EXTENSIONS.test(url) || FLV_EXTENSIONS.test(url);\n};\nconst canPlay = {\n  youtube: (url) => {\n    if (url instanceof Array) {\n      return url.every((item) => MATCH_URL_YOUTUBE.test(item));\n    }\n    return MATCH_URL_YOUTUBE.test(url);\n  },\n  soundcloud: (url) => MATCH_URL_SOUNDCLOUD.test(url) && !AUDIO_EXTENSIONS.test(url),\n  vimeo: (url) => MATCH_URL_VIMEO.test(url) && !VIDEO_EXTENSIONS.test(url) && !HLS_EXTENSIONS.test(url),\n  facebook: (url) => MATCH_URL_FACEBOOK.test(url) || MATCH_URL_FACEBOOK_WATCH.test(url),\n  streamable: (url) => MATCH_URL_STREAMABLE.test(url),\n  wistia: (url) => MATCH_URL_WISTIA.test(url),\n  twitch: (url) => MATCH_URL_TWITCH_VIDEO.test(url) || MATCH_URL_TWITCH_CHANNEL.test(url),\n  dailymotion: (url) => MATCH_URL_DAILYMOTION.test(url),\n  mixcloud: (url) => MATCH_URL_MIXCLOUD.test(url),\n  vidyard: (url) => MATCH_URL_VIDYARD.test(url),\n  kaltura: (url) => MATCH_URL_KALTURA.test(url),\n  file: canPlayFile\n};\n","var __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(\n  // If the importer is in node compatibility mode or this is not an ESM\n  // file that has been converted to a CommonJS file using a Babel-\n  // compatible transform (i.e. \"__esModule\" has not been set), then set\n  // \"default\" to the CommonJS \"module.exports\" for node compatibility.\n  isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n  mod\n));\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar players_exports = {};\n__export(players_exports, {\n  default: () => players_default\n});\nmodule.exports = __toCommonJS(players_exports);\nvar import_utils = require(\"../utils\");\nvar import_patterns = require(\"../patterns\");\nvar players_default = [\n  {\n    key: \"youtube\",\n    name: \"YouTube\",\n    canPlay: import_patterns.canPlay.youtube,\n    lazyPlayer: (0, import_utils.lazy)(() => import(\n      /* webpackChunkName: 'reactPlayerYouTube' */\n      \"./YouTube\"\n    ))\n  },\n  {\n    key: \"soundcloud\",\n    name: \"SoundCloud\",\n    canPlay: import_patterns.canPlay.soundcloud,\n    lazyPlayer: (0, import_utils.lazy)(() => import(\n      /* webpackChunkName: 'reactPlayerSoundCloud' */\n      \"./SoundCloud\"\n    ))\n  },\n  {\n    key: \"vimeo\",\n    name: \"Vimeo\",\n    canPlay: import_patterns.canPlay.vimeo,\n    lazyPlayer: (0, import_utils.lazy)(() => import(\n      /* webpackChunkName: 'reactPlayerVimeo' */\n      \"./Vimeo\"\n    ))\n  },\n  {\n    key: \"facebook\",\n    name: \"Facebook\",\n    canPlay: import_patterns.canPlay.facebook,\n    lazyPlayer: (0, import_utils.lazy)(() => import(\n      /* webpackChunkName: 'reactPlayerFacebook' */\n      \"./Facebook\"\n    ))\n  },\n  {\n    key: \"streamable\",\n    name: \"Streamable\",\n    canPlay: import_patterns.canPlay.streamable,\n    lazyPlayer: (0, import_utils.lazy)(() => import(\n      /* webpackChunkName: 'reactPlayerStreamable' */\n      \"./Streamable\"\n    ))\n  },\n  {\n    key: \"wistia\",\n    name: \"Wistia\",\n    canPlay: import_patterns.canPlay.wistia,\n    lazyPlayer: (0, import_utils.lazy)(() => import(\n      /* webpackChunkName: 'reactPlayerWistia' */\n      \"./Wistia\"\n    ))\n  },\n  {\n    key: \"twitch\",\n    name: \"Twitch\",\n    canPlay: import_patterns.canPlay.twitch,\n    lazyPlayer: (0, import_utils.lazy)(() => import(\n      /* webpackChunkName: 'reactPlayerTwitch' */\n      \"./Twitch\"\n    ))\n  },\n  {\n    key: \"dailymotion\",\n    name: \"DailyMotion\",\n    canPlay: import_patterns.canPlay.dailymotion,\n    lazyPlayer: (0, import_utils.lazy)(() => import(\n      /* webpackChunkName: 'reactPlayerDailyMotion' */\n      \"./DailyMotion\"\n    ))\n  },\n  {\n    key: \"mixcloud\",\n    name: \"Mixcloud\",\n    canPlay: import_patterns.canPlay.mixcloud,\n    lazyPlayer: (0, import_utils.lazy)(() => import(\n      /* webpackChunkName: 'reactPlayerMixcloud' */\n      \"./Mixcloud\"\n    ))\n  },\n  {\n    key: \"vidyard\",\n    name: \"Vidyard\",\n    canPlay: import_patterns.canPlay.vidyard,\n    lazyPlayer: (0, import_utils.lazy)(() => import(\n      /* webpackChunkName: 'reactPlayerVidyard' */\n      \"./Vidyard\"\n    ))\n  },\n  {\n    key: \"kaltura\",\n    name: \"Kaltura\",\n    canPlay: import_patterns.canPlay.kaltura,\n    lazyPlayer: (0, import_utils.lazy)(() => import(\n      /* webpackChunkName: 'reactPlayerKaltura' */\n      \"./Kaltura\"\n    ))\n  },\n  {\n    key: \"file\",\n    name: \"FilePlayer\",\n    canPlay: import_patterns.canPlay.file,\n    canEnablePIP: (url) => {\n      return import_patterns.canPlay.file(url) && (document.pictureInPictureEnabled || (0, import_utils.supportsWebKitPresentationMode)()) && !import_patterns.AUDIO_EXTENSIONS.test(url);\n    },\n    lazyPlayer: (0, import_utils.lazy)(() => import(\n      /* webpackChunkName: 'reactPlayerFilePlayer' */\n      \"./FilePlayer\"\n    ))\n  }\n];\n","var __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(\n  // If the importer is in node compatibility mode or this is not an ESM\n  // file that has been converted to a CommonJS file using a Babel-\n  // compatible transform (i.e. \"__esModule\" has not been set), then set\n  // \"default\" to the CommonJS \"module.exports\" for node compatibility.\n  isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n  mod\n));\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar props_exports = {};\n__export(props_exports, {\n  defaultProps: () => defaultProps,\n  propTypes: () => propTypes\n});\nmodule.exports = __toCommonJS(props_exports);\nvar import_prop_types = __toESM(require(\"prop-types\"));\nconst { string, bool, number, array, oneOfType, shape, object, func, node } = import_prop_types.default;\nconst propTypes = {\n  url: oneOfType([string, array, object]),\n  playing: bool,\n  loop: bool,\n  controls: bool,\n  volume: number,\n  muted: bool,\n  playbackRate: number,\n  width: oneOfType([string, number]),\n  height: oneOfType([string, number]),\n  style: object,\n  progressInterval: number,\n  playsinline: bool,\n  pip: bool,\n  stopOnUnmount: bool,\n  light: oneOfType([bool, string, object]),\n  playIcon: node,\n  previewTabIndex: number,\n  fallback: node,\n  oEmbedUrl: string,\n  wrapper: oneOfType([\n    string,\n    func,\n    shape({ render: func.isRequired })\n  ]),\n  config: shape({\n    soundcloud: shape({\n      options: object\n    }),\n    youtube: shape({\n      playerVars: object,\n      embedOptions: object,\n      onUnstarted: func\n    }),\n    facebook: shape({\n      appId: string,\n      version: string,\n      playerId: string,\n      attributes: object\n    }),\n    dailymotion: shape({\n      params: object\n    }),\n    vimeo: shape({\n      playerOptions: object,\n      title: string\n    }),\n    file: shape({\n      attributes: object,\n      tracks: array,\n      forceVideo: bool,\n      forceAudio: bool,\n      forceHLS: bool,\n      forceSafariHLS: bool,\n      forceDisableHls: bool,\n      forceDASH: bool,\n      forceFLV: bool,\n      hlsOptions: object,\n      hlsVersion: string,\n      dashVersion: string,\n      flvVersion: string\n    }),\n    wistia: shape({\n      options: object,\n      playerId: string,\n      customControls: array\n    }),\n    mixcloud: shape({\n      options: object\n    }),\n    twitch: shape({\n      options: object,\n      playerId: string\n    }),\n    vidyard: shape({\n      options: object\n    })\n  }),\n  onReady: func,\n  onStart: func,\n  onPlay: func,\n  onPause: func,\n  onBuffer: func,\n  onBufferEnd: func,\n  onEnded: func,\n  onError: func,\n  onDuration: func,\n  onSeek: func,\n  onPlaybackRateChange: func,\n  onPlaybackQualityChange: func,\n  onProgress: func,\n  onClickPreview: func,\n  onEnablePIP: func,\n  onDisablePIP: func\n};\nconst noop = () => {\n};\nconst defaultProps = {\n  playing: false,\n  loop: false,\n  controls: false,\n  volume: null,\n  muted: false,\n  playbackRate: 1,\n  width: \"640px\",\n  height: \"360px\",\n  style: {},\n  progressInterval: 1e3,\n  playsinline: false,\n  pip: false,\n  stopOnUnmount: true,\n  light: false,\n  fallback: null,\n  wrapper: \"div\",\n  previewTabIndex: 0,\n  oEmbedUrl: \"https://noembed.com/embed?url={url}\",\n  config: {\n    soundcloud: {\n      options: {\n        visual: true,\n        // Undocumented, but makes player fill container and look better\n        buying: false,\n        liking: false,\n        download: false,\n        sharing: false,\n        show_comments: false,\n        show_playcount: false\n      }\n    },\n    youtube: {\n      playerVars: {\n        playsinline: 1,\n        showinfo: 0,\n        rel: 0,\n        iv_load_policy: 3,\n        modestbranding: 1\n      },\n      embedOptions: {},\n      onUnstarted: noop\n    },\n    facebook: {\n      appId: \"1309697205772819\",\n      version: \"v3.3\",\n      playerId: null,\n      attributes: {}\n    },\n    dailymotion: {\n      params: {\n        api: 1,\n        \"endscreen-enable\": false\n      }\n    },\n    vimeo: {\n      playerOptions: {\n        autopause: false,\n        byline: false,\n        portrait: false,\n        title: false\n      },\n      title: null\n    },\n    file: {\n      attributes: {},\n      tracks: [],\n      forceVideo: false,\n      forceAudio: false,\n      forceHLS: false,\n      forceDASH: false,\n      forceFLV: false,\n      hlsOptions: {},\n      hlsVersion: \"1.1.4\",\n      dashVersion: \"3.1.3\",\n      flvVersion: \"1.5.0\",\n      forceDisableHls: false\n    },\n    wistia: {\n      options: {},\n      playerId: null,\n      customControls: null\n    },\n    mixcloud: {\n      options: {\n        hide_cover: 1\n      }\n    },\n    twitch: {\n      options: {},\n      playerId: null\n    },\n    vidyard: {\n      options: {}\n    }\n  },\n  onReady: noop,\n  onStart: noop,\n  onPlay: noop,\n  onPause: noop,\n  onBuffer: noop,\n  onBufferEnd: noop,\n  onEnded: noop,\n  onError: noop,\n  onDuration: noop,\n  onSeek: noop,\n  onPlaybackRateChange: noop,\n  onPlaybackQualityChange: noop,\n  onProgress: noop,\n  onClickPreview: noop,\n  onEnablePIP: noop,\n  onDisablePIP: noop\n};\n","var __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(\n  // If the importer is in node compatibility mode or this is not an ESM\n  // file that has been converted to a CommonJS file using a Babel-\n  // compatible transform (i.e. \"__esModule\" has not been set), then set\n  // \"default\" to the CommonJS \"module.exports\" for node compatibility.\n  isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n  mod\n));\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar utils_exports = {};\n__export(utils_exports, {\n  callPlayer: () => callPlayer,\n  getConfig: () => getConfig,\n  getSDK: () => getSDK,\n  isBlobUrl: () => isBlobUrl,\n  isMediaStream: () => isMediaStream,\n  lazy: () => lazy,\n  omit: () => omit,\n  parseEndTime: () => parseEndTime,\n  parseStartTime: () => parseStartTime,\n  queryString: () => queryString,\n  randomString: () => randomString,\n  supportsWebKitPresentationMode: () => supportsWebKitPresentationMode\n});\nmodule.exports = __toCommonJS(utils_exports);\nvar import_react = __toESM(require(\"react\"));\nvar import_load_script = __toESM(require(\"load-script\"));\nvar import_deepmerge = __toESM(require(\"deepmerge\"));\nconst lazy = (componentImportFn) => import_react.default.lazy(async () => {\n  const obj = await componentImportFn();\n  return typeof obj.default === \"function\" ? obj : obj.default;\n});\nconst MATCH_START_QUERY = /[?&#](?:start|t)=([0-9hms]+)/;\nconst MATCH_END_QUERY = /[?&#]end=([0-9hms]+)/;\nconst MATCH_START_STAMP = /(\\d+)(h|m|s)/g;\nconst MATCH_NUMERIC = /^\\d+$/;\nfunction parseTimeParam(url, pattern) {\n  if (url instanceof Array) {\n    return void 0;\n  }\n  const match = url.match(pattern);\n  if (match) {\n    const stamp = match[1];\n    if (stamp.match(MATCH_START_STAMP)) {\n      return parseTimeString(stamp);\n    }\n    if (MATCH_NUMERIC.test(stamp)) {\n      return parseInt(stamp);\n    }\n  }\n  return void 0;\n}\nfunction parseTimeString(stamp) {\n  let seconds = 0;\n  let array = MATCH_START_STAMP.exec(stamp);\n  while (array !== null) {\n    const [, count, period] = array;\n    if (period === \"h\")\n      seconds += parseInt(count, 10) * 60 * 60;\n    if (period === \"m\")\n      seconds += parseInt(count, 10) * 60;\n    if (period === \"s\")\n      seconds += parseInt(count, 10);\n    array = MATCH_START_STAMP.exec(stamp);\n  }\n  return seconds;\n}\nfunction parseStartTime(url) {\n  return parseTimeParam(url, MATCH_START_QUERY);\n}\nfunction parseEndTime(url) {\n  return parseTimeParam(url, MATCH_END_QUERY);\n}\nfunction randomString() {\n  return Math.random().toString(36).substr(2, 5);\n}\nfunction queryString(object) {\n  return Object.keys(object).map((key) => `${key}=${object[key]}`).join(\"&\");\n}\nfunction getGlobal(key) {\n  if (window[key]) {\n    return window[key];\n  }\n  if (window.exports && window.exports[key]) {\n    return window.exports[key];\n  }\n  if (window.module && window.module.exports && window.module.exports[key]) {\n    return window.module.exports[key];\n  }\n  return null;\n}\nconst requests = {};\nconst getSDK = enableStubOn(function getSDK2(url, sdkGlobal, sdkReady = null, isLoaded = () => true, fetchScript = import_load_script.default) {\n  const existingGlobal = getGlobal(sdkGlobal);\n  if (existingGlobal && isLoaded(existingGlobal)) {\n    return Promise.resolve(existingGlobal);\n  }\n  return new Promise((resolve, reject) => {\n    if (requests[url]) {\n      requests[url].push({ resolve, reject });\n      return;\n    }\n    requests[url] = [{ resolve, reject }];\n    const onLoaded = (sdk) => {\n      requests[url].forEach((request) => request.resolve(sdk));\n    };\n    if (sdkReady) {\n      const previousOnReady = window[sdkReady];\n      window[sdkReady] = function() {\n        if (previousOnReady)\n          previousOnReady();\n        onLoaded(getGlobal(sdkGlobal));\n      };\n    }\n    fetchScript(url, (err) => {\n      if (err) {\n        requests[url].forEach((request) => request.reject(err));\n        requests[url] = null;\n      } else if (!sdkReady) {\n        onLoaded(getGlobal(sdkGlobal));\n      }\n    });\n  });\n});\nfunction getConfig(props, defaultProps) {\n  return (0, import_deepmerge.default)(defaultProps.config, props.config);\n}\nfunction omit(object, ...arrays) {\n  const omitKeys = [].concat(...arrays);\n  const output = {};\n  const keys = Object.keys(object);\n  for (const key of keys) {\n    if (omitKeys.indexOf(key) === -1) {\n      output[key] = object[key];\n    }\n  }\n  return output;\n}\nfunction callPlayer(method, ...args) {\n  if (!this.player || !this.player[method]) {\n    let message = `ReactPlayer: ${this.constructor.displayName} player could not call %c${method}%c \\u2013 `;\n    if (!this.player) {\n      message += \"The player was not available\";\n    } else if (!this.player[method]) {\n      message += \"The method was not available\";\n    }\n    console.warn(message, \"font-weight: bold\", \"\");\n    return null;\n  }\n  return this.player[method](...args);\n}\nfunction isMediaStream(url) {\n  return typeof window !== \"undefined\" && typeof window.MediaStream !== \"undefined\" && url instanceof window.MediaStream;\n}\nfunction isBlobUrl(url) {\n  return /^blob:/.test(url);\n}\nfunction supportsWebKitPresentationMode(video = document.createElement(\"video\")) {\n  const notMobile = /iPhone|iPod/.test(navigator.userAgent) === false;\n  return video.webkitSupportsPresentationMode && typeof video.webkitSetPresentationMode === \"function\" && notMobile;\n}\nfunction enableStubOn(fn) {\n  if (false) {\n    const wrap = (...args) => wrap.stub(...args);\n    wrap.stub = fn;\n    return wrap;\n  }\n  return fn;\n}\n","(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@babel/runtime/helpers/toConsumableArray'), require('dashify'), require('indefinite-article')) :\n    typeof define === 'function' && define.amd ? define(['exports', '@babel/runtime/helpers/toConsumableArray', 'dashify', 'indefinite-article'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.compilerr = {}, global._toConsumableArray, global.dashify, global.indefiniteArticle));\n})(this, (function (exports, _toConsumableArray, dashify, indefiniteArticle) { 'use strict';\n\n    var applyModifiers = function applyModifiers(name, modifiers) {\n      if (modifiers === undefined) {\n        return name;\n      }\n      return modifiers.reduce(function (modifiedName, modifier) {\n        if (modifier === 'capitalize') {\n          var head = modifiedName.charAt(0).toUpperCase();\n          var tail = modifiedName.slice(1);\n          return \"\".concat(head).concat(tail);\n        }\n        if (modifier === 'dashify') {\n          return dashify(modifiedName);\n        }\n        if (modifier === 'prependIndefiniteArticle') {\n          return \"\".concat(indefiniteArticle(modifiedName), \" \").concat(modifiedName);\n        }\n        return modifiedName;\n      }, name);\n    };\n    var buildRegex = function buildRegex(variable) {\n      var expression = variable.name + variable.modifiers.map(function (modifier) {\n        return \"\\\\.\".concat(modifier, \"\\\\(\\\\)\");\n      }).join('');\n      return new RegExp(\"\\\\$\\\\{\".concat(expression, \"}\"), 'g');\n    };\n    var preRenderString = function preRenderString(string, parameters) {\n      var expressionRegex = /\\${([^.}]+)((\\.[^(]+\\(\\))*)}/g;\n      var variables = [];\n      var expressionResult = expressionRegex.exec(string);\n      while (expressionResult !== null) {\n        var variable = {\n          modifiers: [],\n          name: expressionResult[1]\n        };\n        if (expressionResult[3] !== undefined) {\n          var modifiersRegex = /\\.[^(]+\\(\\)/g;\n          var modifiersRegexResult = modifiersRegex.exec(expressionResult[2]);\n          while (modifiersRegexResult !== null) {\n            variable.modifiers.push(modifiersRegexResult[0].slice(1, -2));\n            modifiersRegexResult = modifiersRegex.exec(expressionResult[2]);\n          }\n        }\n        variables.push(variable);\n        expressionResult = expressionRegex.exec(string);\n      }\n      var preRenderedParts = variables.reduce(function (parts, variable) {\n        return parts.map(function (part) {\n          if (typeof part === 'string') {\n            return part.split(buildRegex(variable)).reduce(function (prts, prt, index) {\n              if (index === 0) {\n                return [prt];\n              }\n              if (variable.name in parameters) {\n                return [].concat(_toConsumableArray(prts), [applyModifiers(parameters[variable.name], variable.modifiers), prt]);\n              }\n              return [].concat(_toConsumableArray(prts), [function (prmtrs) {\n                return applyModifiers(prmtrs[variable.name], variable.modifiers);\n              }, prt]);\n            }, []);\n          }\n          return [part];\n        }).reduce(function (prts, part) {\n          return [].concat(_toConsumableArray(prts), _toConsumableArray(part));\n        }, []);\n      }, [string]);\n      return function (missingParameters) {\n        return preRenderedParts.reduce(function (renderedParts, preRenderedPart) {\n          if (typeof preRenderedPart === 'string') {\n            return [].concat(_toConsumableArray(renderedParts), [preRenderedPart]);\n          }\n          return [].concat(_toConsumableArray(renderedParts), [preRenderedPart(missingParameters)]);\n        }, []).join('');\n      };\n    };\n    var compile = function compile(template) {\n      var knownParameters = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var renderCode = template.code === undefined ? undefined : preRenderString(template.code, knownParameters);\n      var renderMessage = template.message === undefined ? undefined : preRenderString(template.message, knownParameters);\n      function render() {\n        var causeOrMissingParameters = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var optionalCause = arguments.length > 1 ? arguments[1] : undefined;\n        var hasNoOptionalCause = optionalCause === undefined && (causeOrMissingParameters instanceof Error || causeOrMissingParameters.code !== undefined && causeOrMissingParameters.code.slice(-9) === 'Exception');\n        var _ref = hasNoOptionalCause ? {\n            cause: causeOrMissingParameters,\n            missingParameters: {}\n          } : {\n            cause: optionalCause,\n            missingParameters: causeOrMissingParameters\n          },\n          cause = _ref.cause,\n          missingParameters = _ref.missingParameters;\n        var err = renderMessage === undefined ? new Error() : new Error(renderMessage(missingParameters));\n        if (cause !== null) {\n          err.cause = cause;\n        }\n        if (renderCode !== undefined) {\n          err.code = renderCode(missingParameters);\n        }\n        if (template.status !== undefined) {\n          err.status = template.status;\n        }\n        return err;\n      }\n      return render;\n    };\n\n    exports.compile = compile;\n\n}));\n","(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.fastUniqueNumbers = {}));\n})(this, (function (exports) { 'use strict';\n\n    var createAddUniqueNumber = function createAddUniqueNumber(generateUniqueNumber) {\n      return function (set) {\n        var number = generateUniqueNumber(set);\n        set.add(number);\n        return number;\n      };\n    };\n\n    var createCache = function createCache(lastNumberWeakMap) {\n      return function (collection, nextNumber) {\n        lastNumberWeakMap.set(collection, nextNumber);\n        return nextNumber;\n      };\n    };\n\n    /*\n     * The value of the constant Number.MAX_SAFE_INTEGER equals (2 ** 53 - 1) but it\n     * is fairly new.\n     */\n    var MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER === undefined ? 9007199254740991 : Number.MAX_SAFE_INTEGER;\n    var TWO_TO_THE_POWER_OF_TWENTY_NINE = 536870912;\n    var TWO_TO_THE_POWER_OF_THIRTY = TWO_TO_THE_POWER_OF_TWENTY_NINE * 2;\n    var createGenerateUniqueNumber = function createGenerateUniqueNumber(cache, lastNumberWeakMap) {\n      return function (collection) {\n        var lastNumber = lastNumberWeakMap.get(collection);\n        /*\n         * Let's try the cheapest algorithm first. It might fail to produce a new\n         * number, but it is so cheap that it is okay to take the risk. Just\n         * increase the last number by one or reset it to 0 if we reached the upper\n         * bound of SMIs (which stands for small integers). When the last number is\n         * unknown it is assumed that the collection contains zero based consecutive\n         * numbers.\n         */\n        var nextNumber = lastNumber === undefined ? collection.size : lastNumber < TWO_TO_THE_POWER_OF_THIRTY ? lastNumber + 1 : 0;\n        if (!collection.has(nextNumber)) {\n          return cache(collection, nextNumber);\n        }\n        /*\n         * If there are less than half of 2 ** 30 numbers stored in the collection,\n         * the chance to generate a new random number in the range from 0 to 2 ** 30\n         * is at least 50%. It's benifitial to use only SMIs because they perform\n         * much better in any environment based on V8.\n         */\n        if (collection.size < TWO_TO_THE_POWER_OF_TWENTY_NINE) {\n          while (collection.has(nextNumber)) {\n            nextNumber = Math.floor(Math.random() * TWO_TO_THE_POWER_OF_THIRTY);\n          }\n          return cache(collection, nextNumber);\n        }\n        // Quickly check if there is a theoretical chance to generate a new number.\n        if (collection.size > MAX_SAFE_INTEGER) {\n          throw new Error('Congratulations, you created a collection of unique numbers which uses all available integers!');\n        }\n        // Otherwise use the full scale of safely usable integers.\n        while (collection.has(nextNumber)) {\n          nextNumber = Math.floor(Math.random() * MAX_SAFE_INTEGER);\n        }\n        return cache(collection, nextNumber);\n      };\n    };\n\n    var LAST_NUMBER_WEAK_MAP = new WeakMap();\n    var cache = createCache(LAST_NUMBER_WEAK_MAP);\n    var generateUniqueNumber = createGenerateUniqueNumber(cache, LAST_NUMBER_WEAK_MAP);\n    var addUniqueNumber = createAddUniqueNumber(generateUniqueNumber);\n\n    exports.addUniqueNumber = addUniqueNumber;\n    exports.generateUniqueNumber = generateUniqueNumber;\n\n}));\n","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nmodule.exports = _arrayLikeToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nmodule.exports = _arrayWithHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\nmodule.exports = _arrayWithoutHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nmodule.exports = _classCallCheck, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var toPropertyKey = require(\"./toPropertyKey.js\");\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nmodule.exports = _createClass, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nmodule.exports = _iterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _iterableToArrayLimit(r, l) {\n  var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (null != t) {\n    var e,\n      n,\n      i,\n      u,\n      a = [],\n      f = !0,\n      o = !1;\n    try {\n      if (i = (t = t.call(r)).next, 0 === l) {\n        if (Object(t) !== t) return;\n        f = !1;\n      } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);\n    } catch (r) {\n      o = !0, n = r;\n    } finally {\n      try {\n        if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return;\n      } finally {\n        if (o) throw n;\n      }\n    }\n    return a;\n  }\n}\nmodule.exports = _iterableToArrayLimit, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nmodule.exports = _nonIterableRest, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nmodule.exports = _nonIterableSpread, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayWithHoles = require(\"./arrayWithHoles.js\");\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit.js\");\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\nvar nonIterableRest = require(\"./nonIterableRest.js\");\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\nmodule.exports = _slicedToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayWithoutHoles = require(\"./arrayWithoutHoles.js\");\nvar iterableToArray = require(\"./iterableToArray.js\");\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\nvar nonIterableSpread = require(\"./nonIterableSpread.js\");\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\nmodule.exports = _toConsumableArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nmodule.exports = toPrimitive, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nvar toPrimitive = require(\"./toPrimitive.js\");\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : String(i);\n}\nmodule.exports = toPropertyKey, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(o);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\nmodule.exports = _unsupportedIterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","import {Chart, registerables} from '../dist/chart.mjs';\n\nChart.register(...registerables);\n\nexport default Chart;\n","/*!\n * Chart.js v3.9.1\n * https://www.chartjs.org\n * (c) 2022 Chart.js Contributors\n * Released under the MIT License\n */\nfunction noop() {}\nconst uid = (function() {\n  let id = 0;\n  return function() {\n    return id++;\n  };\n}());\nfunction isNullOrUndef(value) {\n  return value === null || typeof value === 'undefined';\n}\nfunction isArray(value) {\n  if (Array.isArray && Array.isArray(value)) {\n    return true;\n  }\n  const type = Object.prototype.toString.call(value);\n  if (type.slice(0, 7) === '[object' && type.slice(-6) === 'Array]') {\n    return true;\n  }\n  return false;\n}\nfunction isObject(value) {\n  return value !== null && Object.prototype.toString.call(value) === '[object Object]';\n}\nconst isNumberFinite = (value) => (typeof value === 'number' || value instanceof Number) && isFinite(+value);\nfunction finiteOrDefault(value, defaultValue) {\n  return isNumberFinite(value) ? value : defaultValue;\n}\nfunction valueOrDefault(value, defaultValue) {\n  return typeof value === 'undefined' ? defaultValue : value;\n}\nconst toPercentage = (value, dimension) =>\n  typeof value === 'string' && value.endsWith('%') ?\n    parseFloat(value) / 100\n    : value / dimension;\nconst toDimension = (value, dimension) =>\n  typeof value === 'string' && value.endsWith('%') ?\n    parseFloat(value) / 100 * dimension\n    : +value;\nfunction callback(fn, args, thisArg) {\n  if (fn && typeof fn.call === 'function') {\n    return fn.apply(thisArg, args);\n  }\n}\nfunction each(loopable, fn, thisArg, reverse) {\n  let i, len, keys;\n  if (isArray(loopable)) {\n    len = loopable.length;\n    if (reverse) {\n      for (i = len - 1; i >= 0; i--) {\n        fn.call(thisArg, loopable[i], i);\n      }\n    } else {\n      for (i = 0; i < len; i++) {\n        fn.call(thisArg, loopable[i], i);\n      }\n    }\n  } else if (isObject(loopable)) {\n    keys = Object.keys(loopable);\n    len = keys.length;\n    for (i = 0; i < len; i++) {\n      fn.call(thisArg, loopable[keys[i]], keys[i]);\n    }\n  }\n}\nfunction _elementsEqual(a0, a1) {\n  let i, ilen, v0, v1;\n  if (!a0 || !a1 || a0.length !== a1.length) {\n    return false;\n  }\n  for (i = 0, ilen = a0.length; i < ilen; ++i) {\n    v0 = a0[i];\n    v1 = a1[i];\n    if (v0.datasetIndex !== v1.datasetIndex || v0.index !== v1.index) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction clone$1(source) {\n  if (isArray(source)) {\n    return source.map(clone$1);\n  }\n  if (isObject(source)) {\n    const target = Object.create(null);\n    const keys = Object.keys(source);\n    const klen = keys.length;\n    let k = 0;\n    for (; k < klen; ++k) {\n      target[keys[k]] = clone$1(source[keys[k]]);\n    }\n    return target;\n  }\n  return source;\n}\nfunction isValidKey(key) {\n  return ['__proto__', 'prototype', 'constructor'].indexOf(key) === -1;\n}\nfunction _merger(key, target, source, options) {\n  if (!isValidKey(key)) {\n    return;\n  }\n  const tval = target[key];\n  const sval = source[key];\n  if (isObject(tval) && isObject(sval)) {\n    merge(tval, sval, options);\n  } else {\n    target[key] = clone$1(sval);\n  }\n}\nfunction merge(target, source, options) {\n  const sources = isArray(source) ? source : [source];\n  const ilen = sources.length;\n  if (!isObject(target)) {\n    return target;\n  }\n  options = options || {};\n  const merger = options.merger || _merger;\n  for (let i = 0; i < ilen; ++i) {\n    source = sources[i];\n    if (!isObject(source)) {\n      continue;\n    }\n    const keys = Object.keys(source);\n    for (let k = 0, klen = keys.length; k < klen; ++k) {\n      merger(keys[k], target, source, options);\n    }\n  }\n  return target;\n}\nfunction mergeIf(target, source) {\n  return merge(target, source, {merger: _mergerIf});\n}\nfunction _mergerIf(key, target, source) {\n  if (!isValidKey(key)) {\n    return;\n  }\n  const tval = target[key];\n  const sval = source[key];\n  if (isObject(tval) && isObject(sval)) {\n    mergeIf(tval, sval);\n  } else if (!Object.prototype.hasOwnProperty.call(target, key)) {\n    target[key] = clone$1(sval);\n  }\n}\nfunction _deprecated(scope, value, previous, current) {\n  if (value !== undefined) {\n    console.warn(scope + ': \"' + previous +\n\t\t\t'\" is deprecated. Please use \"' + current + '\" instead');\n  }\n}\nconst keyResolvers = {\n  '': v => v,\n  x: o => o.x,\n  y: o => o.y\n};\nfunction resolveObjectKey(obj, key) {\n  const resolver = keyResolvers[key] || (keyResolvers[key] = _getKeyResolver(key));\n  return resolver(obj);\n}\nfunction _getKeyResolver(key) {\n  const keys = _splitKey(key);\n  return obj => {\n    for (const k of keys) {\n      if (k === '') {\n        break;\n      }\n      obj = obj && obj[k];\n    }\n    return obj;\n  };\n}\nfunction _splitKey(key) {\n  const parts = key.split('.');\n  const keys = [];\n  let tmp = '';\n  for (const part of parts) {\n    tmp += part;\n    if (tmp.endsWith('\\\\')) {\n      tmp = tmp.slice(0, -1) + '.';\n    } else {\n      keys.push(tmp);\n      tmp = '';\n    }\n  }\n  return keys;\n}\nfunction _capitalize(str) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\nconst defined = (value) => typeof value !== 'undefined';\nconst isFunction = (value) => typeof value === 'function';\nconst setsEqual = (a, b) => {\n  if (a.size !== b.size) {\n    return false;\n  }\n  for (const item of a) {\n    if (!b.has(item)) {\n      return false;\n    }\n  }\n  return true;\n};\nfunction _isClickEvent(e) {\n  return e.type === 'mouseup' || e.type === 'click' || e.type === 'contextmenu';\n}\n\nconst PI = Math.PI;\nconst TAU = 2 * PI;\nconst PITAU = TAU + PI;\nconst INFINITY = Number.POSITIVE_INFINITY;\nconst RAD_PER_DEG = PI / 180;\nconst HALF_PI = PI / 2;\nconst QUARTER_PI = PI / 4;\nconst TWO_THIRDS_PI = PI * 2 / 3;\nconst log10 = Math.log10;\nconst sign = Math.sign;\nfunction niceNum(range) {\n  const roundedRange = Math.round(range);\n  range = almostEquals(range, roundedRange, range / 1000) ? roundedRange : range;\n  const niceRange = Math.pow(10, Math.floor(log10(range)));\n  const fraction = range / niceRange;\n  const niceFraction = fraction <= 1 ? 1 : fraction <= 2 ? 2 : fraction <= 5 ? 5 : 10;\n  return niceFraction * niceRange;\n}\nfunction _factorize(value) {\n  const result = [];\n  const sqrt = Math.sqrt(value);\n  let i;\n  for (i = 1; i < sqrt; i++) {\n    if (value % i === 0) {\n      result.push(i);\n      result.push(value / i);\n    }\n  }\n  if (sqrt === (sqrt | 0)) {\n    result.push(sqrt);\n  }\n  result.sort((a, b) => a - b).pop();\n  return result;\n}\nfunction isNumber(n) {\n  return !isNaN(parseFloat(n)) && isFinite(n);\n}\nfunction almostEquals(x, y, epsilon) {\n  return Math.abs(x - y) < epsilon;\n}\nfunction almostWhole(x, epsilon) {\n  const rounded = Math.round(x);\n  return ((rounded - epsilon) <= x) && ((rounded + epsilon) >= x);\n}\nfunction _setMinAndMaxByKey(array, target, property) {\n  let i, ilen, value;\n  for (i = 0, ilen = array.length; i < ilen; i++) {\n    value = array[i][property];\n    if (!isNaN(value)) {\n      target.min = Math.min(target.min, value);\n      target.max = Math.max(target.max, value);\n    }\n  }\n}\nfunction toRadians(degrees) {\n  return degrees * (PI / 180);\n}\nfunction toDegrees(radians) {\n  return radians * (180 / PI);\n}\nfunction _decimalPlaces(x) {\n  if (!isNumberFinite(x)) {\n    return;\n  }\n  let e = 1;\n  let p = 0;\n  while (Math.round(x * e) / e !== x) {\n    e *= 10;\n    p++;\n  }\n  return p;\n}\nfunction getAngleFromPoint(centrePoint, anglePoint) {\n  const distanceFromXCenter = anglePoint.x - centrePoint.x;\n  const distanceFromYCenter = anglePoint.y - centrePoint.y;\n  const radialDistanceFromCenter = Math.sqrt(distanceFromXCenter * distanceFromXCenter + distanceFromYCenter * distanceFromYCenter);\n  let angle = Math.atan2(distanceFromYCenter, distanceFromXCenter);\n  if (angle < (-0.5 * PI)) {\n    angle += TAU;\n  }\n  return {\n    angle,\n    distance: radialDistanceFromCenter\n  };\n}\nfunction distanceBetweenPoints(pt1, pt2) {\n  return Math.sqrt(Math.pow(pt2.x - pt1.x, 2) + Math.pow(pt2.y - pt1.y, 2));\n}\nfunction _angleDiff(a, b) {\n  return (a - b + PITAU) % TAU - PI;\n}\nfunction _normalizeAngle(a) {\n  return (a % TAU + TAU) % TAU;\n}\nfunction _angleBetween(angle, start, end, sameAngleIsFullCircle) {\n  const a = _normalizeAngle(angle);\n  const s = _normalizeAngle(start);\n  const e = _normalizeAngle(end);\n  const angleToStart = _normalizeAngle(s - a);\n  const angleToEnd = _normalizeAngle(e - a);\n  const startToAngle = _normalizeAngle(a - s);\n  const endToAngle = _normalizeAngle(a - e);\n  return a === s || a === e || (sameAngleIsFullCircle && s === e)\n    || (angleToStart > angleToEnd && startToAngle < endToAngle);\n}\nfunction _limitValue(value, min, max) {\n  return Math.max(min, Math.min(max, value));\n}\nfunction _int16Range(value) {\n  return _limitValue(value, -32768, 32767);\n}\nfunction _isBetween(value, start, end, epsilon = 1e-6) {\n  return value >= Math.min(start, end) - epsilon && value <= Math.max(start, end) + epsilon;\n}\n\nfunction _lookup(table, value, cmp) {\n  cmp = cmp || ((index) => table[index] < value);\n  let hi = table.length - 1;\n  let lo = 0;\n  let mid;\n  while (hi - lo > 1) {\n    mid = (lo + hi) >> 1;\n    if (cmp(mid)) {\n      lo = mid;\n    } else {\n      hi = mid;\n    }\n  }\n  return {lo, hi};\n}\nconst _lookupByKey = (table, key, value, last) =>\n  _lookup(table, value, last\n    ? index => table[index][key] <= value\n    : index => table[index][key] < value);\nconst _rlookupByKey = (table, key, value) =>\n  _lookup(table, value, index => table[index][key] >= value);\nfunction _filterBetween(values, min, max) {\n  let start = 0;\n  let end = values.length;\n  while (start < end && values[start] < min) {\n    start++;\n  }\n  while (end > start && values[end - 1] > max) {\n    end--;\n  }\n  return start > 0 || end < values.length\n    ? values.slice(start, end)\n    : values;\n}\nconst arrayEvents = ['push', 'pop', 'shift', 'splice', 'unshift'];\nfunction listenArrayEvents(array, listener) {\n  if (array._chartjs) {\n    array._chartjs.listeners.push(listener);\n    return;\n  }\n  Object.defineProperty(array, '_chartjs', {\n    configurable: true,\n    enumerable: false,\n    value: {\n      listeners: [listener]\n    }\n  });\n  arrayEvents.forEach((key) => {\n    const method = '_onData' + _capitalize(key);\n    const base = array[key];\n    Object.defineProperty(array, key, {\n      configurable: true,\n      enumerable: false,\n      value(...args) {\n        const res = base.apply(this, args);\n        array._chartjs.listeners.forEach((object) => {\n          if (typeof object[method] === 'function') {\n            object[method](...args);\n          }\n        });\n        return res;\n      }\n    });\n  });\n}\nfunction unlistenArrayEvents(array, listener) {\n  const stub = array._chartjs;\n  if (!stub) {\n    return;\n  }\n  const listeners = stub.listeners;\n  const index = listeners.indexOf(listener);\n  if (index !== -1) {\n    listeners.splice(index, 1);\n  }\n  if (listeners.length > 0) {\n    return;\n  }\n  arrayEvents.forEach((key) => {\n    delete array[key];\n  });\n  delete array._chartjs;\n}\nfunction _arrayUnique(items) {\n  const set = new Set();\n  let i, ilen;\n  for (i = 0, ilen = items.length; i < ilen; ++i) {\n    set.add(items[i]);\n  }\n  if (set.size === ilen) {\n    return items;\n  }\n  return Array.from(set);\n}\n\nfunction fontString(pixelSize, fontStyle, fontFamily) {\n  return fontStyle + ' ' + pixelSize + 'px ' + fontFamily;\n}\nconst requestAnimFrame = (function() {\n  if (typeof window === 'undefined') {\n    return function(callback) {\n      return callback();\n    };\n  }\n  return window.requestAnimationFrame;\n}());\nfunction throttled(fn, thisArg, updateFn) {\n  const updateArgs = updateFn || ((args) => Array.prototype.slice.call(args));\n  let ticking = false;\n  let args = [];\n  return function(...rest) {\n    args = updateArgs(rest);\n    if (!ticking) {\n      ticking = true;\n      requestAnimFrame.call(window, () => {\n        ticking = false;\n        fn.apply(thisArg, args);\n      });\n    }\n  };\n}\nfunction debounce(fn, delay) {\n  let timeout;\n  return function(...args) {\n    if (delay) {\n      clearTimeout(timeout);\n      timeout = setTimeout(fn, delay, args);\n    } else {\n      fn.apply(this, args);\n    }\n    return delay;\n  };\n}\nconst _toLeftRightCenter = (align) => align === 'start' ? 'left' : align === 'end' ? 'right' : 'center';\nconst _alignStartEnd = (align, start, end) => align === 'start' ? start : align === 'end' ? end : (start + end) / 2;\nconst _textX = (align, left, right, rtl) => {\n  const check = rtl ? 'left' : 'right';\n  return align === check ? right : align === 'center' ? (left + right) / 2 : left;\n};\nfunction _getStartAndCountOfVisiblePoints(meta, points, animationsDisabled) {\n  const pointCount = points.length;\n  let start = 0;\n  let count = pointCount;\n  if (meta._sorted) {\n    const {iScale, _parsed} = meta;\n    const axis = iScale.axis;\n    const {min, max, minDefined, maxDefined} = iScale.getUserBounds();\n    if (minDefined) {\n      start = _limitValue(Math.min(\n        _lookupByKey(_parsed, iScale.axis, min).lo,\n        animationsDisabled ? pointCount : _lookupByKey(points, axis, iScale.getPixelForValue(min)).lo),\n      0, pointCount - 1);\n    }\n    if (maxDefined) {\n      count = _limitValue(Math.max(\n        _lookupByKey(_parsed, iScale.axis, max, true).hi + 1,\n        animationsDisabled ? 0 : _lookupByKey(points, axis, iScale.getPixelForValue(max), true).hi + 1),\n      start, pointCount) - start;\n    } else {\n      count = pointCount - start;\n    }\n  }\n  return {start, count};\n}\nfunction _scaleRangesChanged(meta) {\n  const {xScale, yScale, _scaleRanges} = meta;\n  const newRanges = {\n    xmin: xScale.min,\n    xmax: xScale.max,\n    ymin: yScale.min,\n    ymax: yScale.max\n  };\n  if (!_scaleRanges) {\n    meta._scaleRanges = newRanges;\n    return true;\n  }\n  const changed = _scaleRanges.xmin !== xScale.min\n\t\t|| _scaleRanges.xmax !== xScale.max\n\t\t|| _scaleRanges.ymin !== yScale.min\n\t\t|| _scaleRanges.ymax !== yScale.max;\n  Object.assign(_scaleRanges, newRanges);\n  return changed;\n}\n\nconst atEdge = (t) => t === 0 || t === 1;\nconst elasticIn = (t, s, p) => -(Math.pow(2, 10 * (t -= 1)) * Math.sin((t - s) * TAU / p));\nconst elasticOut = (t, s, p) => Math.pow(2, -10 * t) * Math.sin((t - s) * TAU / p) + 1;\nconst effects = {\n  linear: t => t,\n  easeInQuad: t => t * t,\n  easeOutQuad: t => -t * (t - 2),\n  easeInOutQuad: t => ((t /= 0.5) < 1)\n    ? 0.5 * t * t\n    : -0.5 * ((--t) * (t - 2) - 1),\n  easeInCubic: t => t * t * t,\n  easeOutCubic: t => (t -= 1) * t * t + 1,\n  easeInOutCubic: t => ((t /= 0.5) < 1)\n    ? 0.5 * t * t * t\n    : 0.5 * ((t -= 2) * t * t + 2),\n  easeInQuart: t => t * t * t * t,\n  easeOutQuart: t => -((t -= 1) * t * t * t - 1),\n  easeInOutQuart: t => ((t /= 0.5) < 1)\n    ? 0.5 * t * t * t * t\n    : -0.5 * ((t -= 2) * t * t * t - 2),\n  easeInQuint: t => t * t * t * t * t,\n  easeOutQuint: t => (t -= 1) * t * t * t * t + 1,\n  easeInOutQuint: t => ((t /= 0.5) < 1)\n    ? 0.5 * t * t * t * t * t\n    : 0.5 * ((t -= 2) * t * t * t * t + 2),\n  easeInSine: t => -Math.cos(t * HALF_PI) + 1,\n  easeOutSine: t => Math.sin(t * HALF_PI),\n  easeInOutSine: t => -0.5 * (Math.cos(PI * t) - 1),\n  easeInExpo: t => (t === 0) ? 0 : Math.pow(2, 10 * (t - 1)),\n  easeOutExpo: t => (t === 1) ? 1 : -Math.pow(2, -10 * t) + 1,\n  easeInOutExpo: t => atEdge(t) ? t : t < 0.5\n    ? 0.5 * Math.pow(2, 10 * (t * 2 - 1))\n    : 0.5 * (-Math.pow(2, -10 * (t * 2 - 1)) + 2),\n  easeInCirc: t => (t >= 1) ? t : -(Math.sqrt(1 - t * t) - 1),\n  easeOutCirc: t => Math.sqrt(1 - (t -= 1) * t),\n  easeInOutCirc: t => ((t /= 0.5) < 1)\n    ? -0.5 * (Math.sqrt(1 - t * t) - 1)\n    : 0.5 * (Math.sqrt(1 - (t -= 2) * t) + 1),\n  easeInElastic: t => atEdge(t) ? t : elasticIn(t, 0.075, 0.3),\n  easeOutElastic: t => atEdge(t) ? t : elasticOut(t, 0.075, 0.3),\n  easeInOutElastic(t) {\n    const s = 0.1125;\n    const p = 0.45;\n    return atEdge(t) ? t :\n      t < 0.5\n        ? 0.5 * elasticIn(t * 2, s, p)\n        : 0.5 + 0.5 * elasticOut(t * 2 - 1, s, p);\n  },\n  easeInBack(t) {\n    const s = 1.70158;\n    return t * t * ((s + 1) * t - s);\n  },\n  easeOutBack(t) {\n    const s = 1.70158;\n    return (t -= 1) * t * ((s + 1) * t + s) + 1;\n  },\n  easeInOutBack(t) {\n    let s = 1.70158;\n    if ((t /= 0.5) < 1) {\n      return 0.5 * (t * t * (((s *= (1.525)) + 1) * t - s));\n    }\n    return 0.5 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2);\n  },\n  easeInBounce: t => 1 - effects.easeOutBounce(1 - t),\n  easeOutBounce(t) {\n    const m = 7.5625;\n    const d = 2.75;\n    if (t < (1 / d)) {\n      return m * t * t;\n    }\n    if (t < (2 / d)) {\n      return m * (t -= (1.5 / d)) * t + 0.75;\n    }\n    if (t < (2.5 / d)) {\n      return m * (t -= (2.25 / d)) * t + 0.9375;\n    }\n    return m * (t -= (2.625 / d)) * t + 0.984375;\n  },\n  easeInOutBounce: t => (t < 0.5)\n    ? effects.easeInBounce(t * 2) * 0.5\n    : effects.easeOutBounce(t * 2 - 1) * 0.5 + 0.5,\n};\n\n/*!\n * @kurkle/color v0.2.1\n * https://github.com/kurkle/color#readme\n * (c) 2022 Jukka Kurkela\n * Released under the MIT License\n */\nfunction round(v) {\n  return v + 0.5 | 0;\n}\nconst lim = (v, l, h) => Math.max(Math.min(v, h), l);\nfunction p2b(v) {\n  return lim(round(v * 2.55), 0, 255);\n}\nfunction n2b(v) {\n  return lim(round(v * 255), 0, 255);\n}\nfunction b2n(v) {\n  return lim(round(v / 2.55) / 100, 0, 1);\n}\nfunction n2p(v) {\n  return lim(round(v * 100), 0, 100);\n}\nconst map$1 = {0: 0, 1: 1, 2: 2, 3: 3, 4: 4, 5: 5, 6: 6, 7: 7, 8: 8, 9: 9, A: 10, B: 11, C: 12, D: 13, E: 14, F: 15, a: 10, b: 11, c: 12, d: 13, e: 14, f: 15};\nconst hex = [...'0123456789ABCDEF'];\nconst h1 = b => hex[b & 0xF];\nconst h2 = b => hex[(b & 0xF0) >> 4] + hex[b & 0xF];\nconst eq = b => ((b & 0xF0) >> 4) === (b & 0xF);\nconst isShort = v => eq(v.r) && eq(v.g) && eq(v.b) && eq(v.a);\nfunction hexParse(str) {\n  var len = str.length;\n  var ret;\n  if (str[0] === '#') {\n    if (len === 4 || len === 5) {\n      ret = {\n        r: 255 & map$1[str[1]] * 17,\n        g: 255 & map$1[str[2]] * 17,\n        b: 255 & map$1[str[3]] * 17,\n        a: len === 5 ? map$1[str[4]] * 17 : 255\n      };\n    } else if (len === 7 || len === 9) {\n      ret = {\n        r: map$1[str[1]] << 4 | map$1[str[2]],\n        g: map$1[str[3]] << 4 | map$1[str[4]],\n        b: map$1[str[5]] << 4 | map$1[str[6]],\n        a: len === 9 ? (map$1[str[7]] << 4 | map$1[str[8]]) : 255\n      };\n    }\n  }\n  return ret;\n}\nconst alpha = (a, f) => a < 255 ? f(a) : '';\nfunction hexString(v) {\n  var f = isShort(v) ? h1 : h2;\n  return v\n    ? '#' + f(v.r) + f(v.g) + f(v.b) + alpha(v.a, f)\n    : undefined;\n}\nconst HUE_RE = /^(hsla?|hwb|hsv)\\(\\s*([-+.e\\d]+)(?:deg)?[\\s,]+([-+.e\\d]+)%[\\s,]+([-+.e\\d]+)%(?:[\\s,]+([-+.e\\d]+)(%)?)?\\s*\\)$/;\nfunction hsl2rgbn(h, s, l) {\n  const a = s * Math.min(l, 1 - l);\n  const f = (n, k = (n + h / 30) % 12) => l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1);\n  return [f(0), f(8), f(4)];\n}\nfunction hsv2rgbn(h, s, v) {\n  const f = (n, k = (n + h / 60) % 6) => v - v * s * Math.max(Math.min(k, 4 - k, 1), 0);\n  return [f(5), f(3), f(1)];\n}\nfunction hwb2rgbn(h, w, b) {\n  const rgb = hsl2rgbn(h, 1, 0.5);\n  let i;\n  if (w + b > 1) {\n    i = 1 / (w + b);\n    w *= i;\n    b *= i;\n  }\n  for (i = 0; i < 3; i++) {\n    rgb[i] *= 1 - w - b;\n    rgb[i] += w;\n  }\n  return rgb;\n}\nfunction hueValue(r, g, b, d, max) {\n  if (r === max) {\n    return ((g - b) / d) + (g < b ? 6 : 0);\n  }\n  if (g === max) {\n    return (b - r) / d + 2;\n  }\n  return (r - g) / d + 4;\n}\nfunction rgb2hsl(v) {\n  const range = 255;\n  const r = v.r / range;\n  const g = v.g / range;\n  const b = v.b / range;\n  const max = Math.max(r, g, b);\n  const min = Math.min(r, g, b);\n  const l = (max + min) / 2;\n  let h, s, d;\n  if (max !== min) {\n    d = max - min;\n    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n    h = hueValue(r, g, b, d, max);\n    h = h * 60 + 0.5;\n  }\n  return [h | 0, s || 0, l];\n}\nfunction calln(f, a, b, c) {\n  return (\n    Array.isArray(a)\n      ? f(a[0], a[1], a[2])\n      : f(a, b, c)\n  ).map(n2b);\n}\nfunction hsl2rgb(h, s, l) {\n  return calln(hsl2rgbn, h, s, l);\n}\nfunction hwb2rgb(h, w, b) {\n  return calln(hwb2rgbn, h, w, b);\n}\nfunction hsv2rgb(h, s, v) {\n  return calln(hsv2rgbn, h, s, v);\n}\nfunction hue(h) {\n  return (h % 360 + 360) % 360;\n}\nfunction hueParse(str) {\n  const m = HUE_RE.exec(str);\n  let a = 255;\n  let v;\n  if (!m) {\n    return;\n  }\n  if (m[5] !== v) {\n    a = m[6] ? p2b(+m[5]) : n2b(+m[5]);\n  }\n  const h = hue(+m[2]);\n  const p1 = +m[3] / 100;\n  const p2 = +m[4] / 100;\n  if (m[1] === 'hwb') {\n    v = hwb2rgb(h, p1, p2);\n  } else if (m[1] === 'hsv') {\n    v = hsv2rgb(h, p1, p2);\n  } else {\n    v = hsl2rgb(h, p1, p2);\n  }\n  return {\n    r: v[0],\n    g: v[1],\n    b: v[2],\n    a: a\n  };\n}\nfunction rotate(v, deg) {\n  var h = rgb2hsl(v);\n  h[0] = hue(h[0] + deg);\n  h = hsl2rgb(h);\n  v.r = h[0];\n  v.g = h[1];\n  v.b = h[2];\n}\nfunction hslString(v) {\n  if (!v) {\n    return;\n  }\n  const a = rgb2hsl(v);\n  const h = a[0];\n  const s = n2p(a[1]);\n  const l = n2p(a[2]);\n  return v.a < 255\n    ? `hsla(${h}, ${s}%, ${l}%, ${b2n(v.a)})`\n    : `hsl(${h}, ${s}%, ${l}%)`;\n}\nconst map = {\n  x: 'dark',\n  Z: 'light',\n  Y: 're',\n  X: 'blu',\n  W: 'gr',\n  V: 'medium',\n  U: 'slate',\n  A: 'ee',\n  T: 'ol',\n  S: 'or',\n  B: 'ra',\n  C: 'lateg',\n  D: 'ights',\n  R: 'in',\n  Q: 'turquois',\n  E: 'hi',\n  P: 'ro',\n  O: 'al',\n  N: 'le',\n  M: 'de',\n  L: 'yello',\n  F: 'en',\n  K: 'ch',\n  G: 'arks',\n  H: 'ea',\n  I: 'ightg',\n  J: 'wh'\n};\nconst names$1 = {\n  OiceXe: 'f0f8ff',\n  antiquewEte: 'faebd7',\n  aqua: 'ffff',\n  aquamarRe: '7fffd4',\n  azuY: 'f0ffff',\n  beige: 'f5f5dc',\n  bisque: 'ffe4c4',\n  black: '0',\n  blanKedOmond: 'ffebcd',\n  Xe: 'ff',\n  XeviTet: '8a2be2',\n  bPwn: 'a52a2a',\n  burlywood: 'deb887',\n  caMtXe: '5f9ea0',\n  KartYuse: '7fff00',\n  KocTate: 'd2691e',\n  cSO: 'ff7f50',\n  cSnflowerXe: '6495ed',\n  cSnsilk: 'fff8dc',\n  crimson: 'dc143c',\n  cyan: 'ffff',\n  xXe: '8b',\n  xcyan: '8b8b',\n  xgTMnPd: 'b8860b',\n  xWay: 'a9a9a9',\n  xgYF: '6400',\n  xgYy: 'a9a9a9',\n  xkhaki: 'bdb76b',\n  xmagFta: '8b008b',\n  xTivegYF: '556b2f',\n  xSange: 'ff8c00',\n  xScEd: '9932cc',\n  xYd: '8b0000',\n  xsOmon: 'e9967a',\n  xsHgYF: '8fbc8f',\n  xUXe: '483d8b',\n  xUWay: '2f4f4f',\n  xUgYy: '2f4f4f',\n  xQe: 'ced1',\n  xviTet: '9400d3',\n  dAppRk: 'ff1493',\n  dApskyXe: 'bfff',\n  dimWay: '696969',\n  dimgYy: '696969',\n  dodgerXe: '1e90ff',\n  fiYbrick: 'b22222',\n  flSOwEte: 'fffaf0',\n  foYstWAn: '228b22',\n  fuKsia: 'ff00ff',\n  gaRsbSo: 'dcdcdc',\n  ghostwEte: 'f8f8ff',\n  gTd: 'ffd700',\n  gTMnPd: 'daa520',\n  Way: '808080',\n  gYF: '8000',\n  gYFLw: 'adff2f',\n  gYy: '808080',\n  honeyMw: 'f0fff0',\n  hotpRk: 'ff69b4',\n  RdianYd: 'cd5c5c',\n  Rdigo: '4b0082',\n  ivSy: 'fffff0',\n  khaki: 'f0e68c',\n  lavFMr: 'e6e6fa',\n  lavFMrXsh: 'fff0f5',\n  lawngYF: '7cfc00',\n  NmoncEffon: 'fffacd',\n  ZXe: 'add8e6',\n  ZcSO: 'f08080',\n  Zcyan: 'e0ffff',\n  ZgTMnPdLw: 'fafad2',\n  ZWay: 'd3d3d3',\n  ZgYF: '90ee90',\n  ZgYy: 'd3d3d3',\n  ZpRk: 'ffb6c1',\n  ZsOmon: 'ffa07a',\n  ZsHgYF: '20b2aa',\n  ZskyXe: '87cefa',\n  ZUWay: '778899',\n  ZUgYy: '778899',\n  ZstAlXe: 'b0c4de',\n  ZLw: 'ffffe0',\n  lime: 'ff00',\n  limegYF: '32cd32',\n  lRF: 'faf0e6',\n  magFta: 'ff00ff',\n  maPon: '800000',\n  VaquamarRe: '66cdaa',\n  VXe: 'cd',\n  VScEd: 'ba55d3',\n  VpurpN: '9370db',\n  VsHgYF: '3cb371',\n  VUXe: '7b68ee',\n  VsprRggYF: 'fa9a',\n  VQe: '48d1cc',\n  VviTetYd: 'c71585',\n  midnightXe: '191970',\n  mRtcYam: 'f5fffa',\n  mistyPse: 'ffe4e1',\n  moccasR: 'ffe4b5',\n  navajowEte: 'ffdead',\n  navy: '80',\n  Tdlace: 'fdf5e6',\n  Tive: '808000',\n  TivedBb: '6b8e23',\n  Sange: 'ffa500',\n  SangeYd: 'ff4500',\n  ScEd: 'da70d6',\n  pOegTMnPd: 'eee8aa',\n  pOegYF: '98fb98',\n  pOeQe: 'afeeee',\n  pOeviTetYd: 'db7093',\n  papayawEp: 'ffefd5',\n  pHKpuff: 'ffdab9',\n  peru: 'cd853f',\n  pRk: 'ffc0cb',\n  plum: 'dda0dd',\n  powMrXe: 'b0e0e6',\n  purpN: '800080',\n  YbeccapurpN: '663399',\n  Yd: 'ff0000',\n  Psybrown: 'bc8f8f',\n  PyOXe: '4169e1',\n  saddNbPwn: '8b4513',\n  sOmon: 'fa8072',\n  sandybPwn: 'f4a460',\n  sHgYF: '2e8b57',\n  sHshell: 'fff5ee',\n  siFna: 'a0522d',\n  silver: 'c0c0c0',\n  skyXe: '87ceeb',\n  UXe: '6a5acd',\n  UWay: '708090',\n  UgYy: '708090',\n  snow: 'fffafa',\n  sprRggYF: 'ff7f',\n  stAlXe: '4682b4',\n  tan: 'd2b48c',\n  teO: '8080',\n  tEstN: 'd8bfd8',\n  tomato: 'ff6347',\n  Qe: '40e0d0',\n  viTet: 'ee82ee',\n  JHt: 'f5deb3',\n  wEte: 'ffffff',\n  wEtesmoke: 'f5f5f5',\n  Lw: 'ffff00',\n  LwgYF: '9acd32'\n};\nfunction unpack() {\n  const unpacked = {};\n  const keys = Object.keys(names$1);\n  const tkeys = Object.keys(map);\n  let i, j, k, ok, nk;\n  for (i = 0; i < keys.length; i++) {\n    ok = nk = keys[i];\n    for (j = 0; j < tkeys.length; j++) {\n      k = tkeys[j];\n      nk = nk.replace(k, map[k]);\n    }\n    k = parseInt(names$1[ok], 16);\n    unpacked[nk] = [k >> 16 & 0xFF, k >> 8 & 0xFF, k & 0xFF];\n  }\n  return unpacked;\n}\nlet names;\nfunction nameParse(str) {\n  if (!names) {\n    names = unpack();\n    names.transparent = [0, 0, 0, 0];\n  }\n  const a = names[str.toLowerCase()];\n  return a && {\n    r: a[0],\n    g: a[1],\n    b: a[2],\n    a: a.length === 4 ? a[3] : 255\n  };\n}\nconst RGB_RE = /^rgba?\\(\\s*([-+.\\d]+)(%)?[\\s,]+([-+.e\\d]+)(%)?[\\s,]+([-+.e\\d]+)(%)?(?:[\\s,/]+([-+.e\\d]+)(%)?)?\\s*\\)$/;\nfunction rgbParse(str) {\n  const m = RGB_RE.exec(str);\n  let a = 255;\n  let r, g, b;\n  if (!m) {\n    return;\n  }\n  if (m[7] !== r) {\n    const v = +m[7];\n    a = m[8] ? p2b(v) : lim(v * 255, 0, 255);\n  }\n  r = +m[1];\n  g = +m[3];\n  b = +m[5];\n  r = 255 & (m[2] ? p2b(r) : lim(r, 0, 255));\n  g = 255 & (m[4] ? p2b(g) : lim(g, 0, 255));\n  b = 255 & (m[6] ? p2b(b) : lim(b, 0, 255));\n  return {\n    r: r,\n    g: g,\n    b: b,\n    a: a\n  };\n}\nfunction rgbString(v) {\n  return v && (\n    v.a < 255\n      ? `rgba(${v.r}, ${v.g}, ${v.b}, ${b2n(v.a)})`\n      : `rgb(${v.r}, ${v.g}, ${v.b})`\n  );\n}\nconst to = v => v <= 0.0031308 ? v * 12.92 : Math.pow(v, 1.0 / 2.4) * 1.055 - 0.055;\nconst from = v => v <= 0.04045 ? v / 12.92 : Math.pow((v + 0.055) / 1.055, 2.4);\nfunction interpolate(rgb1, rgb2, t) {\n  const r = from(b2n(rgb1.r));\n  const g = from(b2n(rgb1.g));\n  const b = from(b2n(rgb1.b));\n  return {\n    r: n2b(to(r + t * (from(b2n(rgb2.r)) - r))),\n    g: n2b(to(g + t * (from(b2n(rgb2.g)) - g))),\n    b: n2b(to(b + t * (from(b2n(rgb2.b)) - b))),\n    a: rgb1.a + t * (rgb2.a - rgb1.a)\n  };\n}\nfunction modHSL(v, i, ratio) {\n  if (v) {\n    let tmp = rgb2hsl(v);\n    tmp[i] = Math.max(0, Math.min(tmp[i] + tmp[i] * ratio, i === 0 ? 360 : 1));\n    tmp = hsl2rgb(tmp);\n    v.r = tmp[0];\n    v.g = tmp[1];\n    v.b = tmp[2];\n  }\n}\nfunction clone(v, proto) {\n  return v ? Object.assign(proto || {}, v) : v;\n}\nfunction fromObject(input) {\n  var v = {r: 0, g: 0, b: 0, a: 255};\n  if (Array.isArray(input)) {\n    if (input.length >= 3) {\n      v = {r: input[0], g: input[1], b: input[2], a: 255};\n      if (input.length > 3) {\n        v.a = n2b(input[3]);\n      }\n    }\n  } else {\n    v = clone(input, {r: 0, g: 0, b: 0, a: 1});\n    v.a = n2b(v.a);\n  }\n  return v;\n}\nfunction functionParse(str) {\n  if (str.charAt(0) === 'r') {\n    return rgbParse(str);\n  }\n  return hueParse(str);\n}\nclass Color {\n  constructor(input) {\n    if (input instanceof Color) {\n      return input;\n    }\n    const type = typeof input;\n    let v;\n    if (type === 'object') {\n      v = fromObject(input);\n    } else if (type === 'string') {\n      v = hexParse(input) || nameParse(input) || functionParse(input);\n    }\n    this._rgb = v;\n    this._valid = !!v;\n  }\n  get valid() {\n    return this._valid;\n  }\n  get rgb() {\n    var v = clone(this._rgb);\n    if (v) {\n      v.a = b2n(v.a);\n    }\n    return v;\n  }\n  set rgb(obj) {\n    this._rgb = fromObject(obj);\n  }\n  rgbString() {\n    return this._valid ? rgbString(this._rgb) : undefined;\n  }\n  hexString() {\n    return this._valid ? hexString(this._rgb) : undefined;\n  }\n  hslString() {\n    return this._valid ? hslString(this._rgb) : undefined;\n  }\n  mix(color, weight) {\n    if (color) {\n      const c1 = this.rgb;\n      const c2 = color.rgb;\n      let w2;\n      const p = weight === w2 ? 0.5 : weight;\n      const w = 2 * p - 1;\n      const a = c1.a - c2.a;\n      const w1 = ((w * a === -1 ? w : (w + a) / (1 + w * a)) + 1) / 2.0;\n      w2 = 1 - w1;\n      c1.r = 0xFF & w1 * c1.r + w2 * c2.r + 0.5;\n      c1.g = 0xFF & w1 * c1.g + w2 * c2.g + 0.5;\n      c1.b = 0xFF & w1 * c1.b + w2 * c2.b + 0.5;\n      c1.a = p * c1.a + (1 - p) * c2.a;\n      this.rgb = c1;\n    }\n    return this;\n  }\n  interpolate(color, t) {\n    if (color) {\n      this._rgb = interpolate(this._rgb, color._rgb, t);\n    }\n    return this;\n  }\n  clone() {\n    return new Color(this.rgb);\n  }\n  alpha(a) {\n    this._rgb.a = n2b(a);\n    return this;\n  }\n  clearer(ratio) {\n    const rgb = this._rgb;\n    rgb.a *= 1 - ratio;\n    return this;\n  }\n  greyscale() {\n    const rgb = this._rgb;\n    const val = round(rgb.r * 0.3 + rgb.g * 0.59 + rgb.b * 0.11);\n    rgb.r = rgb.g = rgb.b = val;\n    return this;\n  }\n  opaquer(ratio) {\n    const rgb = this._rgb;\n    rgb.a *= 1 + ratio;\n    return this;\n  }\n  negate() {\n    const v = this._rgb;\n    v.r = 255 - v.r;\n    v.g = 255 - v.g;\n    v.b = 255 - v.b;\n    return this;\n  }\n  lighten(ratio) {\n    modHSL(this._rgb, 2, ratio);\n    return this;\n  }\n  darken(ratio) {\n    modHSL(this._rgb, 2, -ratio);\n    return this;\n  }\n  saturate(ratio) {\n    modHSL(this._rgb, 1, ratio);\n    return this;\n  }\n  desaturate(ratio) {\n    modHSL(this._rgb, 1, -ratio);\n    return this;\n  }\n  rotate(deg) {\n    rotate(this._rgb, deg);\n    return this;\n  }\n}\nfunction index_esm(input) {\n  return new Color(input);\n}\n\nfunction isPatternOrGradient(value) {\n  if (value && typeof value === 'object') {\n    const type = value.toString();\n    return type === '[object CanvasPattern]' || type === '[object CanvasGradient]';\n  }\n  return false;\n}\nfunction color(value) {\n  return isPatternOrGradient(value) ? value : index_esm(value);\n}\nfunction getHoverColor(value) {\n  return isPatternOrGradient(value)\n    ? value\n    : index_esm(value).saturate(0.5).darken(0.1).hexString();\n}\n\nconst overrides = Object.create(null);\nconst descriptors = Object.create(null);\nfunction getScope$1(node, key) {\n  if (!key) {\n    return node;\n  }\n  const keys = key.split('.');\n  for (let i = 0, n = keys.length; i < n; ++i) {\n    const k = keys[i];\n    node = node[k] || (node[k] = Object.create(null));\n  }\n  return node;\n}\nfunction set(root, scope, values) {\n  if (typeof scope === 'string') {\n    return merge(getScope$1(root, scope), values);\n  }\n  return merge(getScope$1(root, ''), scope);\n}\nclass Defaults {\n  constructor(_descriptors) {\n    this.animation = undefined;\n    this.backgroundColor = 'rgba(0,0,0,0.1)';\n    this.borderColor = 'rgba(0,0,0,0.1)';\n    this.color = '#666';\n    this.datasets = {};\n    this.devicePixelRatio = (context) => context.chart.platform.getDevicePixelRatio();\n    this.elements = {};\n    this.events = [\n      'mousemove',\n      'mouseout',\n      'click',\n      'touchstart',\n      'touchmove'\n    ];\n    this.font = {\n      family: \"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif\",\n      size: 12,\n      style: 'normal',\n      lineHeight: 1.2,\n      weight: null\n    };\n    this.hover = {};\n    this.hoverBackgroundColor = (ctx, options) => getHoverColor(options.backgroundColor);\n    this.hoverBorderColor = (ctx, options) => getHoverColor(options.borderColor);\n    this.hoverColor = (ctx, options) => getHoverColor(options.color);\n    this.indexAxis = 'x';\n    this.interaction = {\n      mode: 'nearest',\n      intersect: true,\n      includeInvisible: false\n    };\n    this.maintainAspectRatio = true;\n    this.onHover = null;\n    this.onClick = null;\n    this.parsing = true;\n    this.plugins = {};\n    this.responsive = true;\n    this.scale = undefined;\n    this.scales = {};\n    this.showLine = true;\n    this.drawActiveElementsOnTop = true;\n    this.describe(_descriptors);\n  }\n  set(scope, values) {\n    return set(this, scope, values);\n  }\n  get(scope) {\n    return getScope$1(this, scope);\n  }\n  describe(scope, values) {\n    return set(descriptors, scope, values);\n  }\n  override(scope, values) {\n    return set(overrides, scope, values);\n  }\n  route(scope, name, targetScope, targetName) {\n    const scopeObject = getScope$1(this, scope);\n    const targetScopeObject = getScope$1(this, targetScope);\n    const privateName = '_' + name;\n    Object.defineProperties(scopeObject, {\n      [privateName]: {\n        value: scopeObject[name],\n        writable: true\n      },\n      [name]: {\n        enumerable: true,\n        get() {\n          const local = this[privateName];\n          const target = targetScopeObject[targetName];\n          if (isObject(local)) {\n            return Object.assign({}, target, local);\n          }\n          return valueOrDefault(local, target);\n        },\n        set(value) {\n          this[privateName] = value;\n        }\n      }\n    });\n  }\n}\nvar defaults = new Defaults({\n  _scriptable: (name) => !name.startsWith('on'),\n  _indexable: (name) => name !== 'events',\n  hover: {\n    _fallback: 'interaction'\n  },\n  interaction: {\n    _scriptable: false,\n    _indexable: false,\n  }\n});\n\nfunction toFontString(font) {\n  if (!font || isNullOrUndef(font.size) || isNullOrUndef(font.family)) {\n    return null;\n  }\n  return (font.style ? font.style + ' ' : '')\n\t\t+ (font.weight ? font.weight + ' ' : '')\n\t\t+ font.size + 'px '\n\t\t+ font.family;\n}\nfunction _measureText(ctx, data, gc, longest, string) {\n  let textWidth = data[string];\n  if (!textWidth) {\n    textWidth = data[string] = ctx.measureText(string).width;\n    gc.push(string);\n  }\n  if (textWidth > longest) {\n    longest = textWidth;\n  }\n  return longest;\n}\nfunction _longestText(ctx, font, arrayOfThings, cache) {\n  cache = cache || {};\n  let data = cache.data = cache.data || {};\n  let gc = cache.garbageCollect = cache.garbageCollect || [];\n  if (cache.font !== font) {\n    data = cache.data = {};\n    gc = cache.garbageCollect = [];\n    cache.font = font;\n  }\n  ctx.save();\n  ctx.font = font;\n  let longest = 0;\n  const ilen = arrayOfThings.length;\n  let i, j, jlen, thing, nestedThing;\n  for (i = 0; i < ilen; i++) {\n    thing = arrayOfThings[i];\n    if (thing !== undefined && thing !== null && isArray(thing) !== true) {\n      longest = _measureText(ctx, data, gc, longest, thing);\n    } else if (isArray(thing)) {\n      for (j = 0, jlen = thing.length; j < jlen; j++) {\n        nestedThing = thing[j];\n        if (nestedThing !== undefined && nestedThing !== null && !isArray(nestedThing)) {\n          longest = _measureText(ctx, data, gc, longest, nestedThing);\n        }\n      }\n    }\n  }\n  ctx.restore();\n  const gcLen = gc.length / 2;\n  if (gcLen > arrayOfThings.length) {\n    for (i = 0; i < gcLen; i++) {\n      delete data[gc[i]];\n    }\n    gc.splice(0, gcLen);\n  }\n  return longest;\n}\nfunction _alignPixel(chart, pixel, width) {\n  const devicePixelRatio = chart.currentDevicePixelRatio;\n  const halfWidth = width !== 0 ? Math.max(width / 2, 0.5) : 0;\n  return Math.round((pixel - halfWidth) * devicePixelRatio) / devicePixelRatio + halfWidth;\n}\nfunction clearCanvas(canvas, ctx) {\n  ctx = ctx || canvas.getContext('2d');\n  ctx.save();\n  ctx.resetTransform();\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n  ctx.restore();\n}\nfunction drawPoint(ctx, options, x, y) {\n  drawPointLegend(ctx, options, x, y, null);\n}\nfunction drawPointLegend(ctx, options, x, y, w) {\n  let type, xOffset, yOffset, size, cornerRadius, width;\n  const style = options.pointStyle;\n  const rotation = options.rotation;\n  const radius = options.radius;\n  let rad = (rotation || 0) * RAD_PER_DEG;\n  if (style && typeof style === 'object') {\n    type = style.toString();\n    if (type === '[object HTMLImageElement]' || type === '[object HTMLCanvasElement]') {\n      ctx.save();\n      ctx.translate(x, y);\n      ctx.rotate(rad);\n      ctx.drawImage(style, -style.width / 2, -style.height / 2, style.width, style.height);\n      ctx.restore();\n      return;\n    }\n  }\n  if (isNaN(radius) || radius <= 0) {\n    return;\n  }\n  ctx.beginPath();\n  switch (style) {\n  default:\n    if (w) {\n      ctx.ellipse(x, y, w / 2, radius, 0, 0, TAU);\n    } else {\n      ctx.arc(x, y, radius, 0, TAU);\n    }\n    ctx.closePath();\n    break;\n  case 'triangle':\n    ctx.moveTo(x + Math.sin(rad) * radius, y - Math.cos(rad) * radius);\n    rad += TWO_THIRDS_PI;\n    ctx.lineTo(x + Math.sin(rad) * radius, y - Math.cos(rad) * radius);\n    rad += TWO_THIRDS_PI;\n    ctx.lineTo(x + Math.sin(rad) * radius, y - Math.cos(rad) * radius);\n    ctx.closePath();\n    break;\n  case 'rectRounded':\n    cornerRadius = radius * 0.516;\n    size = radius - cornerRadius;\n    xOffset = Math.cos(rad + QUARTER_PI) * size;\n    yOffset = Math.sin(rad + QUARTER_PI) * size;\n    ctx.arc(x - xOffset, y - yOffset, cornerRadius, rad - PI, rad - HALF_PI);\n    ctx.arc(x + yOffset, y - xOffset, cornerRadius, rad - HALF_PI, rad);\n    ctx.arc(x + xOffset, y + yOffset, cornerRadius, rad, rad + HALF_PI);\n    ctx.arc(x - yOffset, y + xOffset, cornerRadius, rad + HALF_PI, rad + PI);\n    ctx.closePath();\n    break;\n  case 'rect':\n    if (!rotation) {\n      size = Math.SQRT1_2 * radius;\n      width = w ? w / 2 : size;\n      ctx.rect(x - width, y - size, 2 * width, 2 * size);\n      break;\n    }\n    rad += QUARTER_PI;\n  case 'rectRot':\n    xOffset = Math.cos(rad) * radius;\n    yOffset = Math.sin(rad) * radius;\n    ctx.moveTo(x - xOffset, y - yOffset);\n    ctx.lineTo(x + yOffset, y - xOffset);\n    ctx.lineTo(x + xOffset, y + yOffset);\n    ctx.lineTo(x - yOffset, y + xOffset);\n    ctx.closePath();\n    break;\n  case 'crossRot':\n    rad += QUARTER_PI;\n  case 'cross':\n    xOffset = Math.cos(rad) * radius;\n    yOffset = Math.sin(rad) * radius;\n    ctx.moveTo(x - xOffset, y - yOffset);\n    ctx.lineTo(x + xOffset, y + yOffset);\n    ctx.moveTo(x + yOffset, y - xOffset);\n    ctx.lineTo(x - yOffset, y + xOffset);\n    break;\n  case 'star':\n    xOffset = Math.cos(rad) * radius;\n    yOffset = Math.sin(rad) * radius;\n    ctx.moveTo(x - xOffset, y - yOffset);\n    ctx.lineTo(x + xOffset, y + yOffset);\n    ctx.moveTo(x + yOffset, y - xOffset);\n    ctx.lineTo(x - yOffset, y + xOffset);\n    rad += QUARTER_PI;\n    xOffset = Math.cos(rad) * radius;\n    yOffset = Math.sin(rad) * radius;\n    ctx.moveTo(x - xOffset, y - yOffset);\n    ctx.lineTo(x + xOffset, y + yOffset);\n    ctx.moveTo(x + yOffset, y - xOffset);\n    ctx.lineTo(x - yOffset, y + xOffset);\n    break;\n  case 'line':\n    xOffset = w ? w / 2 : Math.cos(rad) * radius;\n    yOffset = Math.sin(rad) * radius;\n    ctx.moveTo(x - xOffset, y - yOffset);\n    ctx.lineTo(x + xOffset, y + yOffset);\n    break;\n  case 'dash':\n    ctx.moveTo(x, y);\n    ctx.lineTo(x + Math.cos(rad) * radius, y + Math.sin(rad) * radius);\n    break;\n  }\n  ctx.fill();\n  if (options.borderWidth > 0) {\n    ctx.stroke();\n  }\n}\nfunction _isPointInArea(point, area, margin) {\n  margin = margin || 0.5;\n  return !area || (point && point.x > area.left - margin && point.x < area.right + margin &&\n\t\tpoint.y > area.top - margin && point.y < area.bottom + margin);\n}\nfunction clipArea(ctx, area) {\n  ctx.save();\n  ctx.beginPath();\n  ctx.rect(area.left, area.top, area.right - area.left, area.bottom - area.top);\n  ctx.clip();\n}\nfunction unclipArea(ctx) {\n  ctx.restore();\n}\nfunction _steppedLineTo(ctx, previous, target, flip, mode) {\n  if (!previous) {\n    return ctx.lineTo(target.x, target.y);\n  }\n  if (mode === 'middle') {\n    const midpoint = (previous.x + target.x) / 2.0;\n    ctx.lineTo(midpoint, previous.y);\n    ctx.lineTo(midpoint, target.y);\n  } else if (mode === 'after' !== !!flip) {\n    ctx.lineTo(previous.x, target.y);\n  } else {\n    ctx.lineTo(target.x, previous.y);\n  }\n  ctx.lineTo(target.x, target.y);\n}\nfunction _bezierCurveTo(ctx, previous, target, flip) {\n  if (!previous) {\n    return ctx.lineTo(target.x, target.y);\n  }\n  ctx.bezierCurveTo(\n    flip ? previous.cp1x : previous.cp2x,\n    flip ? previous.cp1y : previous.cp2y,\n    flip ? target.cp2x : target.cp1x,\n    flip ? target.cp2y : target.cp1y,\n    target.x,\n    target.y);\n}\nfunction renderText(ctx, text, x, y, font, opts = {}) {\n  const lines = isArray(text) ? text : [text];\n  const stroke = opts.strokeWidth > 0 && opts.strokeColor !== '';\n  let i, line;\n  ctx.save();\n  ctx.font = font.string;\n  setRenderOpts(ctx, opts);\n  for (i = 0; i < lines.length; ++i) {\n    line = lines[i];\n    if (stroke) {\n      if (opts.strokeColor) {\n        ctx.strokeStyle = opts.strokeColor;\n      }\n      if (!isNullOrUndef(opts.strokeWidth)) {\n        ctx.lineWidth = opts.strokeWidth;\n      }\n      ctx.strokeText(line, x, y, opts.maxWidth);\n    }\n    ctx.fillText(line, x, y, opts.maxWidth);\n    decorateText(ctx, x, y, line, opts);\n    y += font.lineHeight;\n  }\n  ctx.restore();\n}\nfunction setRenderOpts(ctx, opts) {\n  if (opts.translation) {\n    ctx.translate(opts.translation[0], opts.translation[1]);\n  }\n  if (!isNullOrUndef(opts.rotation)) {\n    ctx.rotate(opts.rotation);\n  }\n  if (opts.color) {\n    ctx.fillStyle = opts.color;\n  }\n  if (opts.textAlign) {\n    ctx.textAlign = opts.textAlign;\n  }\n  if (opts.textBaseline) {\n    ctx.textBaseline = opts.textBaseline;\n  }\n}\nfunction decorateText(ctx, x, y, line, opts) {\n  if (opts.strikethrough || opts.underline) {\n    const metrics = ctx.measureText(line);\n    const left = x - metrics.actualBoundingBoxLeft;\n    const right = x + metrics.actualBoundingBoxRight;\n    const top = y - metrics.actualBoundingBoxAscent;\n    const bottom = y + metrics.actualBoundingBoxDescent;\n    const yDecoration = opts.strikethrough ? (top + bottom) / 2 : bottom;\n    ctx.strokeStyle = ctx.fillStyle;\n    ctx.beginPath();\n    ctx.lineWidth = opts.decorationWidth || 2;\n    ctx.moveTo(left, yDecoration);\n    ctx.lineTo(right, yDecoration);\n    ctx.stroke();\n  }\n}\nfunction addRoundedRectPath(ctx, rect) {\n  const {x, y, w, h, radius} = rect;\n  ctx.arc(x + radius.topLeft, y + radius.topLeft, radius.topLeft, -HALF_PI, PI, true);\n  ctx.lineTo(x, y + h - radius.bottomLeft);\n  ctx.arc(x + radius.bottomLeft, y + h - radius.bottomLeft, radius.bottomLeft, PI, HALF_PI, true);\n  ctx.lineTo(x + w - radius.bottomRight, y + h);\n  ctx.arc(x + w - radius.bottomRight, y + h - radius.bottomRight, radius.bottomRight, HALF_PI, 0, true);\n  ctx.lineTo(x + w, y + radius.topRight);\n  ctx.arc(x + w - radius.topRight, y + radius.topRight, radius.topRight, 0, -HALF_PI, true);\n  ctx.lineTo(x + radius.topLeft, y);\n}\n\nconst LINE_HEIGHT = new RegExp(/^(normal|(\\d+(?:\\.\\d+)?)(px|em|%)?)$/);\nconst FONT_STYLE = new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);\nfunction toLineHeight(value, size) {\n  const matches = ('' + value).match(LINE_HEIGHT);\n  if (!matches || matches[1] === 'normal') {\n    return size * 1.2;\n  }\n  value = +matches[2];\n  switch (matches[3]) {\n  case 'px':\n    return value;\n  case '%':\n    value /= 100;\n    break;\n  }\n  return size * value;\n}\nconst numberOrZero = v => +v || 0;\nfunction _readValueToProps(value, props) {\n  const ret = {};\n  const objProps = isObject(props);\n  const keys = objProps ? Object.keys(props) : props;\n  const read = isObject(value)\n    ? objProps\n      ? prop => valueOrDefault(value[prop], value[props[prop]])\n      : prop => value[prop]\n    : () => value;\n  for (const prop of keys) {\n    ret[prop] = numberOrZero(read(prop));\n  }\n  return ret;\n}\nfunction toTRBL(value) {\n  return _readValueToProps(value, {top: 'y', right: 'x', bottom: 'y', left: 'x'});\n}\nfunction toTRBLCorners(value) {\n  return _readValueToProps(value, ['topLeft', 'topRight', 'bottomLeft', 'bottomRight']);\n}\nfunction toPadding(value) {\n  const obj = toTRBL(value);\n  obj.width = obj.left + obj.right;\n  obj.height = obj.top + obj.bottom;\n  return obj;\n}\nfunction toFont(options, fallback) {\n  options = options || {};\n  fallback = fallback || defaults.font;\n  let size = valueOrDefault(options.size, fallback.size);\n  if (typeof size === 'string') {\n    size = parseInt(size, 10);\n  }\n  let style = valueOrDefault(options.style, fallback.style);\n  if (style && !('' + style).match(FONT_STYLE)) {\n    console.warn('Invalid font style specified: \"' + style + '\"');\n    style = '';\n  }\n  const font = {\n    family: valueOrDefault(options.family, fallback.family),\n    lineHeight: toLineHeight(valueOrDefault(options.lineHeight, fallback.lineHeight), size),\n    size,\n    style,\n    weight: valueOrDefault(options.weight, fallback.weight),\n    string: ''\n  };\n  font.string = toFontString(font);\n  return font;\n}\nfunction resolve(inputs, context, index, info) {\n  let cacheable = true;\n  let i, ilen, value;\n  for (i = 0, ilen = inputs.length; i < ilen; ++i) {\n    value = inputs[i];\n    if (value === undefined) {\n      continue;\n    }\n    if (context !== undefined && typeof value === 'function') {\n      value = value(context);\n      cacheable = false;\n    }\n    if (index !== undefined && isArray(value)) {\n      value = value[index % value.length];\n      cacheable = false;\n    }\n    if (value !== undefined) {\n      if (info && !cacheable) {\n        info.cacheable = false;\n      }\n      return value;\n    }\n  }\n}\nfunction _addGrace(minmax, grace, beginAtZero) {\n  const {min, max} = minmax;\n  const change = toDimension(grace, (max - min) / 2);\n  const keepZero = (value, add) => beginAtZero && value === 0 ? 0 : value + add;\n  return {\n    min: keepZero(min, -Math.abs(change)),\n    max: keepZero(max, change)\n  };\n}\nfunction createContext(parentContext, context) {\n  return Object.assign(Object.create(parentContext), context);\n}\n\nfunction _createResolver(scopes, prefixes = [''], rootScopes = scopes, fallback, getTarget = () => scopes[0]) {\n  if (!defined(fallback)) {\n    fallback = _resolve('_fallback', scopes);\n  }\n  const cache = {\n    [Symbol.toStringTag]: 'Object',\n    _cacheable: true,\n    _scopes: scopes,\n    _rootScopes: rootScopes,\n    _fallback: fallback,\n    _getTarget: getTarget,\n    override: (scope) => _createResolver([scope, ...scopes], prefixes, rootScopes, fallback),\n  };\n  return new Proxy(cache, {\n    deleteProperty(target, prop) {\n      delete target[prop];\n      delete target._keys;\n      delete scopes[0][prop];\n      return true;\n    },\n    get(target, prop) {\n      return _cached(target, prop,\n        () => _resolveWithPrefixes(prop, prefixes, scopes, target));\n    },\n    getOwnPropertyDescriptor(target, prop) {\n      return Reflect.getOwnPropertyDescriptor(target._scopes[0], prop);\n    },\n    getPrototypeOf() {\n      return Reflect.getPrototypeOf(scopes[0]);\n    },\n    has(target, prop) {\n      return getKeysFromAllScopes(target).includes(prop);\n    },\n    ownKeys(target) {\n      return getKeysFromAllScopes(target);\n    },\n    set(target, prop, value) {\n      const storage = target._storage || (target._storage = getTarget());\n      target[prop] = storage[prop] = value;\n      delete target._keys;\n      return true;\n    }\n  });\n}\nfunction _attachContext(proxy, context, subProxy, descriptorDefaults) {\n  const cache = {\n    _cacheable: false,\n    _proxy: proxy,\n    _context: context,\n    _subProxy: subProxy,\n    _stack: new Set(),\n    _descriptors: _descriptors(proxy, descriptorDefaults),\n    setContext: (ctx) => _attachContext(proxy, ctx, subProxy, descriptorDefaults),\n    override: (scope) => _attachContext(proxy.override(scope), context, subProxy, descriptorDefaults)\n  };\n  return new Proxy(cache, {\n    deleteProperty(target, prop) {\n      delete target[prop];\n      delete proxy[prop];\n      return true;\n    },\n    get(target, prop, receiver) {\n      return _cached(target, prop,\n        () => _resolveWithContext(target, prop, receiver));\n    },\n    getOwnPropertyDescriptor(target, prop) {\n      return target._descriptors.allKeys\n        ? Reflect.has(proxy, prop) ? {enumerable: true, configurable: true} : undefined\n        : Reflect.getOwnPropertyDescriptor(proxy, prop);\n    },\n    getPrototypeOf() {\n      return Reflect.getPrototypeOf(proxy);\n    },\n    has(target, prop) {\n      return Reflect.has(proxy, prop);\n    },\n    ownKeys() {\n      return Reflect.ownKeys(proxy);\n    },\n    set(target, prop, value) {\n      proxy[prop] = value;\n      delete target[prop];\n      return true;\n    }\n  });\n}\nfunction _descriptors(proxy, defaults = {scriptable: true, indexable: true}) {\n  const {_scriptable = defaults.scriptable, _indexable = defaults.indexable, _allKeys = defaults.allKeys} = proxy;\n  return {\n    allKeys: _allKeys,\n    scriptable: _scriptable,\n    indexable: _indexable,\n    isScriptable: isFunction(_scriptable) ? _scriptable : () => _scriptable,\n    isIndexable: isFunction(_indexable) ? _indexable : () => _indexable\n  };\n}\nconst readKey = (prefix, name) => prefix ? prefix + _capitalize(name) : name;\nconst needsSubResolver = (prop, value) => isObject(value) && prop !== 'adapters' &&\n  (Object.getPrototypeOf(value) === null || value.constructor === Object);\nfunction _cached(target, prop, resolve) {\n  if (Object.prototype.hasOwnProperty.call(target, prop)) {\n    return target[prop];\n  }\n  const value = resolve();\n  target[prop] = value;\n  return value;\n}\nfunction _resolveWithContext(target, prop, receiver) {\n  const {_proxy, _context, _subProxy, _descriptors: descriptors} = target;\n  let value = _proxy[prop];\n  if (isFunction(value) && descriptors.isScriptable(prop)) {\n    value = _resolveScriptable(prop, value, target, receiver);\n  }\n  if (isArray(value) && value.length) {\n    value = _resolveArray(prop, value, target, descriptors.isIndexable);\n  }\n  if (needsSubResolver(prop, value)) {\n    value = _attachContext(value, _context, _subProxy && _subProxy[prop], descriptors);\n  }\n  return value;\n}\nfunction _resolveScriptable(prop, value, target, receiver) {\n  const {_proxy, _context, _subProxy, _stack} = target;\n  if (_stack.has(prop)) {\n    throw new Error('Recursion detected: ' + Array.from(_stack).join('->') + '->' + prop);\n  }\n  _stack.add(prop);\n  value = value(_context, _subProxy || receiver);\n  _stack.delete(prop);\n  if (needsSubResolver(prop, value)) {\n    value = createSubResolver(_proxy._scopes, _proxy, prop, value);\n  }\n  return value;\n}\nfunction _resolveArray(prop, value, target, isIndexable) {\n  const {_proxy, _context, _subProxy, _descriptors: descriptors} = target;\n  if (defined(_context.index) && isIndexable(prop)) {\n    value = value[_context.index % value.length];\n  } else if (isObject(value[0])) {\n    const arr = value;\n    const scopes = _proxy._scopes.filter(s => s !== arr);\n    value = [];\n    for (const item of arr) {\n      const resolver = createSubResolver(scopes, _proxy, prop, item);\n      value.push(_attachContext(resolver, _context, _subProxy && _subProxy[prop], descriptors));\n    }\n  }\n  return value;\n}\nfunction resolveFallback(fallback, prop, value) {\n  return isFunction(fallback) ? fallback(prop, value) : fallback;\n}\nconst getScope = (key, parent) => key === true ? parent\n  : typeof key === 'string' ? resolveObjectKey(parent, key) : undefined;\nfunction addScopes(set, parentScopes, key, parentFallback, value) {\n  for (const parent of parentScopes) {\n    const scope = getScope(key, parent);\n    if (scope) {\n      set.add(scope);\n      const fallback = resolveFallback(scope._fallback, key, value);\n      if (defined(fallback) && fallback !== key && fallback !== parentFallback) {\n        return fallback;\n      }\n    } else if (scope === false && defined(parentFallback) && key !== parentFallback) {\n      return null;\n    }\n  }\n  return false;\n}\nfunction createSubResolver(parentScopes, resolver, prop, value) {\n  const rootScopes = resolver._rootScopes;\n  const fallback = resolveFallback(resolver._fallback, prop, value);\n  const allScopes = [...parentScopes, ...rootScopes];\n  const set = new Set();\n  set.add(value);\n  let key = addScopesFromKey(set, allScopes, prop, fallback || prop, value);\n  if (key === null) {\n    return false;\n  }\n  if (defined(fallback) && fallback !== prop) {\n    key = addScopesFromKey(set, allScopes, fallback, key, value);\n    if (key === null) {\n      return false;\n    }\n  }\n  return _createResolver(Array.from(set), [''], rootScopes, fallback,\n    () => subGetTarget(resolver, prop, value));\n}\nfunction addScopesFromKey(set, allScopes, key, fallback, item) {\n  while (key) {\n    key = addScopes(set, allScopes, key, fallback, item);\n  }\n  return key;\n}\nfunction subGetTarget(resolver, prop, value) {\n  const parent = resolver._getTarget();\n  if (!(prop in parent)) {\n    parent[prop] = {};\n  }\n  const target = parent[prop];\n  if (isArray(target) && isObject(value)) {\n    return value;\n  }\n  return target;\n}\nfunction _resolveWithPrefixes(prop, prefixes, scopes, proxy) {\n  let value;\n  for (const prefix of prefixes) {\n    value = _resolve(readKey(prefix, prop), scopes);\n    if (defined(value)) {\n      return needsSubResolver(prop, value)\n        ? createSubResolver(scopes, proxy, prop, value)\n        : value;\n    }\n  }\n}\nfunction _resolve(key, scopes) {\n  for (const scope of scopes) {\n    if (!scope) {\n      continue;\n    }\n    const value = scope[key];\n    if (defined(value)) {\n      return value;\n    }\n  }\n}\nfunction getKeysFromAllScopes(target) {\n  let keys = target._keys;\n  if (!keys) {\n    keys = target._keys = resolveKeysFromAllScopes(target._scopes);\n  }\n  return keys;\n}\nfunction resolveKeysFromAllScopes(scopes) {\n  const set = new Set();\n  for (const scope of scopes) {\n    for (const key of Object.keys(scope).filter(k => !k.startsWith('_'))) {\n      set.add(key);\n    }\n  }\n  return Array.from(set);\n}\nfunction _parseObjectDataRadialScale(meta, data, start, count) {\n  const {iScale} = meta;\n  const {key = 'r'} = this._parsing;\n  const parsed = new Array(count);\n  let i, ilen, index, item;\n  for (i = 0, ilen = count; i < ilen; ++i) {\n    index = i + start;\n    item = data[index];\n    parsed[i] = {\n      r: iScale.parse(resolveObjectKey(item, key), index)\n    };\n  }\n  return parsed;\n}\n\nconst EPSILON = Number.EPSILON || 1e-14;\nconst getPoint = (points, i) => i < points.length && !points[i].skip && points[i];\nconst getValueAxis = (indexAxis) => indexAxis === 'x' ? 'y' : 'x';\nfunction splineCurve(firstPoint, middlePoint, afterPoint, t) {\n  const previous = firstPoint.skip ? middlePoint : firstPoint;\n  const current = middlePoint;\n  const next = afterPoint.skip ? middlePoint : afterPoint;\n  const d01 = distanceBetweenPoints(current, previous);\n  const d12 = distanceBetweenPoints(next, current);\n  let s01 = d01 / (d01 + d12);\n  let s12 = d12 / (d01 + d12);\n  s01 = isNaN(s01) ? 0 : s01;\n  s12 = isNaN(s12) ? 0 : s12;\n  const fa = t * s01;\n  const fb = t * s12;\n  return {\n    previous: {\n      x: current.x - fa * (next.x - previous.x),\n      y: current.y - fa * (next.y - previous.y)\n    },\n    next: {\n      x: current.x + fb * (next.x - previous.x),\n      y: current.y + fb * (next.y - previous.y)\n    }\n  };\n}\nfunction monotoneAdjust(points, deltaK, mK) {\n  const pointsLen = points.length;\n  let alphaK, betaK, tauK, squaredMagnitude, pointCurrent;\n  let pointAfter = getPoint(points, 0);\n  for (let i = 0; i < pointsLen - 1; ++i) {\n    pointCurrent = pointAfter;\n    pointAfter = getPoint(points, i + 1);\n    if (!pointCurrent || !pointAfter) {\n      continue;\n    }\n    if (almostEquals(deltaK[i], 0, EPSILON)) {\n      mK[i] = mK[i + 1] = 0;\n      continue;\n    }\n    alphaK = mK[i] / deltaK[i];\n    betaK = mK[i + 1] / deltaK[i];\n    squaredMagnitude = Math.pow(alphaK, 2) + Math.pow(betaK, 2);\n    if (squaredMagnitude <= 9) {\n      continue;\n    }\n    tauK = 3 / Math.sqrt(squaredMagnitude);\n    mK[i] = alphaK * tauK * deltaK[i];\n    mK[i + 1] = betaK * tauK * deltaK[i];\n  }\n}\nfunction monotoneCompute(points, mK, indexAxis = 'x') {\n  const valueAxis = getValueAxis(indexAxis);\n  const pointsLen = points.length;\n  let delta, pointBefore, pointCurrent;\n  let pointAfter = getPoint(points, 0);\n  for (let i = 0; i < pointsLen; ++i) {\n    pointBefore = pointCurrent;\n    pointCurrent = pointAfter;\n    pointAfter = getPoint(points, i + 1);\n    if (!pointCurrent) {\n      continue;\n    }\n    const iPixel = pointCurrent[indexAxis];\n    const vPixel = pointCurrent[valueAxis];\n    if (pointBefore) {\n      delta = (iPixel - pointBefore[indexAxis]) / 3;\n      pointCurrent[`cp1${indexAxis}`] = iPixel - delta;\n      pointCurrent[`cp1${valueAxis}`] = vPixel - delta * mK[i];\n    }\n    if (pointAfter) {\n      delta = (pointAfter[indexAxis] - iPixel) / 3;\n      pointCurrent[`cp2${indexAxis}`] = iPixel + delta;\n      pointCurrent[`cp2${valueAxis}`] = vPixel + delta * mK[i];\n    }\n  }\n}\nfunction splineCurveMonotone(points, indexAxis = 'x') {\n  const valueAxis = getValueAxis(indexAxis);\n  const pointsLen = points.length;\n  const deltaK = Array(pointsLen).fill(0);\n  const mK = Array(pointsLen);\n  let i, pointBefore, pointCurrent;\n  let pointAfter = getPoint(points, 0);\n  for (i = 0; i < pointsLen; ++i) {\n    pointBefore = pointCurrent;\n    pointCurrent = pointAfter;\n    pointAfter = getPoint(points, i + 1);\n    if (!pointCurrent) {\n      continue;\n    }\n    if (pointAfter) {\n      const slopeDelta = pointAfter[indexAxis] - pointCurrent[indexAxis];\n      deltaK[i] = slopeDelta !== 0 ? (pointAfter[valueAxis] - pointCurrent[valueAxis]) / slopeDelta : 0;\n    }\n    mK[i] = !pointBefore ? deltaK[i]\n      : !pointAfter ? deltaK[i - 1]\n      : (sign(deltaK[i - 1]) !== sign(deltaK[i])) ? 0\n      : (deltaK[i - 1] + deltaK[i]) / 2;\n  }\n  monotoneAdjust(points, deltaK, mK);\n  monotoneCompute(points, mK, indexAxis);\n}\nfunction capControlPoint(pt, min, max) {\n  return Math.max(Math.min(pt, max), min);\n}\nfunction capBezierPoints(points, area) {\n  let i, ilen, point, inArea, inAreaPrev;\n  let inAreaNext = _isPointInArea(points[0], area);\n  for (i = 0, ilen = points.length; i < ilen; ++i) {\n    inAreaPrev = inArea;\n    inArea = inAreaNext;\n    inAreaNext = i < ilen - 1 && _isPointInArea(points[i + 1], area);\n    if (!inArea) {\n      continue;\n    }\n    point = points[i];\n    if (inAreaPrev) {\n      point.cp1x = capControlPoint(point.cp1x, area.left, area.right);\n      point.cp1y = capControlPoint(point.cp1y, area.top, area.bottom);\n    }\n    if (inAreaNext) {\n      point.cp2x = capControlPoint(point.cp2x, area.left, area.right);\n      point.cp2y = capControlPoint(point.cp2y, area.top, area.bottom);\n    }\n  }\n}\nfunction _updateBezierControlPoints(points, options, area, loop, indexAxis) {\n  let i, ilen, point, controlPoints;\n  if (options.spanGaps) {\n    points = points.filter((pt) => !pt.skip);\n  }\n  if (options.cubicInterpolationMode === 'monotone') {\n    splineCurveMonotone(points, indexAxis);\n  } else {\n    let prev = loop ? points[points.length - 1] : points[0];\n    for (i = 0, ilen = points.length; i < ilen; ++i) {\n      point = points[i];\n      controlPoints = splineCurve(\n        prev,\n        point,\n        points[Math.min(i + 1, ilen - (loop ? 0 : 1)) % ilen],\n        options.tension\n      );\n      point.cp1x = controlPoints.previous.x;\n      point.cp1y = controlPoints.previous.y;\n      point.cp2x = controlPoints.next.x;\n      point.cp2y = controlPoints.next.y;\n      prev = point;\n    }\n  }\n  if (options.capBezierPoints) {\n    capBezierPoints(points, area);\n  }\n}\n\nfunction _isDomSupported() {\n  return typeof window !== 'undefined' && typeof document !== 'undefined';\n}\nfunction _getParentNode(domNode) {\n  let parent = domNode.parentNode;\n  if (parent && parent.toString() === '[object ShadowRoot]') {\n    parent = parent.host;\n  }\n  return parent;\n}\nfunction parseMaxStyle(styleValue, node, parentProperty) {\n  let valueInPixels;\n  if (typeof styleValue === 'string') {\n    valueInPixels = parseInt(styleValue, 10);\n    if (styleValue.indexOf('%') !== -1) {\n      valueInPixels = valueInPixels / 100 * node.parentNode[parentProperty];\n    }\n  } else {\n    valueInPixels = styleValue;\n  }\n  return valueInPixels;\n}\nconst getComputedStyle = (element) => window.getComputedStyle(element, null);\nfunction getStyle(el, property) {\n  return getComputedStyle(el).getPropertyValue(property);\n}\nconst positions = ['top', 'right', 'bottom', 'left'];\nfunction getPositionedStyle(styles, style, suffix) {\n  const result = {};\n  suffix = suffix ? '-' + suffix : '';\n  for (let i = 0; i < 4; i++) {\n    const pos = positions[i];\n    result[pos] = parseFloat(styles[style + '-' + pos + suffix]) || 0;\n  }\n  result.width = result.left + result.right;\n  result.height = result.top + result.bottom;\n  return result;\n}\nconst useOffsetPos = (x, y, target) => (x > 0 || y > 0) && (!target || !target.shadowRoot);\nfunction getCanvasPosition(e, canvas) {\n  const touches = e.touches;\n  const source = touches && touches.length ? touches[0] : e;\n  const {offsetX, offsetY} = source;\n  let box = false;\n  let x, y;\n  if (useOffsetPos(offsetX, offsetY, e.target)) {\n    x = offsetX;\n    y = offsetY;\n  } else {\n    const rect = canvas.getBoundingClientRect();\n    x = source.clientX - rect.left;\n    y = source.clientY - rect.top;\n    box = true;\n  }\n  return {x, y, box};\n}\nfunction getRelativePosition(evt, chart) {\n  if ('native' in evt) {\n    return evt;\n  }\n  const {canvas, currentDevicePixelRatio} = chart;\n  const style = getComputedStyle(canvas);\n  const borderBox = style.boxSizing === 'border-box';\n  const paddings = getPositionedStyle(style, 'padding');\n  const borders = getPositionedStyle(style, 'border', 'width');\n  const {x, y, box} = getCanvasPosition(evt, canvas);\n  const xOffset = paddings.left + (box && borders.left);\n  const yOffset = paddings.top + (box && borders.top);\n  let {width, height} = chart;\n  if (borderBox) {\n    width -= paddings.width + borders.width;\n    height -= paddings.height + borders.height;\n  }\n  return {\n    x: Math.round((x - xOffset) / width * canvas.width / currentDevicePixelRatio),\n    y: Math.round((y - yOffset) / height * canvas.height / currentDevicePixelRatio)\n  };\n}\nfunction getContainerSize(canvas, width, height) {\n  let maxWidth, maxHeight;\n  if (width === undefined || height === undefined) {\n    const container = _getParentNode(canvas);\n    if (!container) {\n      width = canvas.clientWidth;\n      height = canvas.clientHeight;\n    } else {\n      const rect = container.getBoundingClientRect();\n      const containerStyle = getComputedStyle(container);\n      const containerBorder = getPositionedStyle(containerStyle, 'border', 'width');\n      const containerPadding = getPositionedStyle(containerStyle, 'padding');\n      width = rect.width - containerPadding.width - containerBorder.width;\n      height = rect.height - containerPadding.height - containerBorder.height;\n      maxWidth = parseMaxStyle(containerStyle.maxWidth, container, 'clientWidth');\n      maxHeight = parseMaxStyle(containerStyle.maxHeight, container, 'clientHeight');\n    }\n  }\n  return {\n    width,\n    height,\n    maxWidth: maxWidth || INFINITY,\n    maxHeight: maxHeight || INFINITY\n  };\n}\nconst round1 = v => Math.round(v * 10) / 10;\nfunction getMaximumSize(canvas, bbWidth, bbHeight, aspectRatio) {\n  const style = getComputedStyle(canvas);\n  const margins = getPositionedStyle(style, 'margin');\n  const maxWidth = parseMaxStyle(style.maxWidth, canvas, 'clientWidth') || INFINITY;\n  const maxHeight = parseMaxStyle(style.maxHeight, canvas, 'clientHeight') || INFINITY;\n  const containerSize = getContainerSize(canvas, bbWidth, bbHeight);\n  let {width, height} = containerSize;\n  if (style.boxSizing === 'content-box') {\n    const borders = getPositionedStyle(style, 'border', 'width');\n    const paddings = getPositionedStyle(style, 'padding');\n    width -= paddings.width + borders.width;\n    height -= paddings.height + borders.height;\n  }\n  width = Math.max(0, width - margins.width);\n  height = Math.max(0, aspectRatio ? Math.floor(width / aspectRatio) : height - margins.height);\n  width = round1(Math.min(width, maxWidth, containerSize.maxWidth));\n  height = round1(Math.min(height, maxHeight, containerSize.maxHeight));\n  if (width && !height) {\n    height = round1(width / 2);\n  }\n  return {\n    width,\n    height\n  };\n}\nfunction retinaScale(chart, forceRatio, forceStyle) {\n  const pixelRatio = forceRatio || 1;\n  const deviceHeight = Math.floor(chart.height * pixelRatio);\n  const deviceWidth = Math.floor(chart.width * pixelRatio);\n  chart.height = deviceHeight / pixelRatio;\n  chart.width = deviceWidth / pixelRatio;\n  const canvas = chart.canvas;\n  if (canvas.style && (forceStyle || (!canvas.style.height && !canvas.style.width))) {\n    canvas.style.height = `${chart.height}px`;\n    canvas.style.width = `${chart.width}px`;\n  }\n  if (chart.currentDevicePixelRatio !== pixelRatio\n      || canvas.height !== deviceHeight\n      || canvas.width !== deviceWidth) {\n    chart.currentDevicePixelRatio = pixelRatio;\n    canvas.height = deviceHeight;\n    canvas.width = deviceWidth;\n    chart.ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n    return true;\n  }\n  return false;\n}\nconst supportsEventListenerOptions = (function() {\n  let passiveSupported = false;\n  try {\n    const options = {\n      get passive() {\n        passiveSupported = true;\n        return false;\n      }\n    };\n    window.addEventListener('test', null, options);\n    window.removeEventListener('test', null, options);\n  } catch (e) {\n  }\n  return passiveSupported;\n}());\nfunction readUsedSize(element, property) {\n  const value = getStyle(element, property);\n  const matches = value && value.match(/^(\\d+)(\\.\\d+)?px$/);\n  return matches ? +matches[1] : undefined;\n}\n\nfunction _pointInLine(p1, p2, t, mode) {\n  return {\n    x: p1.x + t * (p2.x - p1.x),\n    y: p1.y + t * (p2.y - p1.y)\n  };\n}\nfunction _steppedInterpolation(p1, p2, t, mode) {\n  return {\n    x: p1.x + t * (p2.x - p1.x),\n    y: mode === 'middle' ? t < 0.5 ? p1.y : p2.y\n    : mode === 'after' ? t < 1 ? p1.y : p2.y\n    : t > 0 ? p2.y : p1.y\n  };\n}\nfunction _bezierInterpolation(p1, p2, t, mode) {\n  const cp1 = {x: p1.cp2x, y: p1.cp2y};\n  const cp2 = {x: p2.cp1x, y: p2.cp1y};\n  const a = _pointInLine(p1, cp1, t);\n  const b = _pointInLine(cp1, cp2, t);\n  const c = _pointInLine(cp2, p2, t);\n  const d = _pointInLine(a, b, t);\n  const e = _pointInLine(b, c, t);\n  return _pointInLine(d, e, t);\n}\n\nconst intlCache = new Map();\nfunction getNumberFormat(locale, options) {\n  options = options || {};\n  const cacheKey = locale + JSON.stringify(options);\n  let formatter = intlCache.get(cacheKey);\n  if (!formatter) {\n    formatter = new Intl.NumberFormat(locale, options);\n    intlCache.set(cacheKey, formatter);\n  }\n  return formatter;\n}\nfunction formatNumber(num, locale, options) {\n  return getNumberFormat(locale, options).format(num);\n}\n\nconst getRightToLeftAdapter = function(rectX, width) {\n  return {\n    x(x) {\n      return rectX + rectX + width - x;\n    },\n    setWidth(w) {\n      width = w;\n    },\n    textAlign(align) {\n      if (align === 'center') {\n        return align;\n      }\n      return align === 'right' ? 'left' : 'right';\n    },\n    xPlus(x, value) {\n      return x - value;\n    },\n    leftForLtr(x, itemWidth) {\n      return x - itemWidth;\n    },\n  };\n};\nconst getLeftToRightAdapter = function() {\n  return {\n    x(x) {\n      return x;\n    },\n    setWidth(w) {\n    },\n    textAlign(align) {\n      return align;\n    },\n    xPlus(x, value) {\n      return x + value;\n    },\n    leftForLtr(x, _itemWidth) {\n      return x;\n    },\n  };\n};\nfunction getRtlAdapter(rtl, rectX, width) {\n  return rtl ? getRightToLeftAdapter(rectX, width) : getLeftToRightAdapter();\n}\nfunction overrideTextDirection(ctx, direction) {\n  let style, original;\n  if (direction === 'ltr' || direction === 'rtl') {\n    style = ctx.canvas.style;\n    original = [\n      style.getPropertyValue('direction'),\n      style.getPropertyPriority('direction'),\n    ];\n    style.setProperty('direction', direction, 'important');\n    ctx.prevTextDirection = original;\n  }\n}\nfunction restoreTextDirection(ctx, original) {\n  if (original !== undefined) {\n    delete ctx.prevTextDirection;\n    ctx.canvas.style.setProperty('direction', original[0], original[1]);\n  }\n}\n\nfunction propertyFn(property) {\n  if (property === 'angle') {\n    return {\n      between: _angleBetween,\n      compare: _angleDiff,\n      normalize: _normalizeAngle,\n    };\n  }\n  return {\n    between: _isBetween,\n    compare: (a, b) => a - b,\n    normalize: x => x\n  };\n}\nfunction normalizeSegment({start, end, count, loop, style}) {\n  return {\n    start: start % count,\n    end: end % count,\n    loop: loop && (end - start + 1) % count === 0,\n    style\n  };\n}\nfunction getSegment(segment, points, bounds) {\n  const {property, start: startBound, end: endBound} = bounds;\n  const {between, normalize} = propertyFn(property);\n  const count = points.length;\n  let {start, end, loop} = segment;\n  let i, ilen;\n  if (loop) {\n    start += count;\n    end += count;\n    for (i = 0, ilen = count; i < ilen; ++i) {\n      if (!between(normalize(points[start % count][property]), startBound, endBound)) {\n        break;\n      }\n      start--;\n      end--;\n    }\n    start %= count;\n    end %= count;\n  }\n  if (end < start) {\n    end += count;\n  }\n  return {start, end, loop, style: segment.style};\n}\nfunction _boundSegment(segment, points, bounds) {\n  if (!bounds) {\n    return [segment];\n  }\n  const {property, start: startBound, end: endBound} = bounds;\n  const count = points.length;\n  const {compare, between, normalize} = propertyFn(property);\n  const {start, end, loop, style} = getSegment(segment, points, bounds);\n  const result = [];\n  let inside = false;\n  let subStart = null;\n  let value, point, prevValue;\n  const startIsBefore = () => between(startBound, prevValue, value) && compare(startBound, prevValue) !== 0;\n  const endIsBefore = () => compare(endBound, value) === 0 || between(endBound, prevValue, value);\n  const shouldStart = () => inside || startIsBefore();\n  const shouldStop = () => !inside || endIsBefore();\n  for (let i = start, prev = start; i <= end; ++i) {\n    point = points[i % count];\n    if (point.skip) {\n      continue;\n    }\n    value = normalize(point[property]);\n    if (value === prevValue) {\n      continue;\n    }\n    inside = between(value, startBound, endBound);\n    if (subStart === null && shouldStart()) {\n      subStart = compare(value, startBound) === 0 ? i : prev;\n    }\n    if (subStart !== null && shouldStop()) {\n      result.push(normalizeSegment({start: subStart, end: i, loop, count, style}));\n      subStart = null;\n    }\n    prev = i;\n    prevValue = value;\n  }\n  if (subStart !== null) {\n    result.push(normalizeSegment({start: subStart, end, loop, count, style}));\n  }\n  return result;\n}\nfunction _boundSegments(line, bounds) {\n  const result = [];\n  const segments = line.segments;\n  for (let i = 0; i < segments.length; i++) {\n    const sub = _boundSegment(segments[i], line.points, bounds);\n    if (sub.length) {\n      result.push(...sub);\n    }\n  }\n  return result;\n}\nfunction findStartAndEnd(points, count, loop, spanGaps) {\n  let start = 0;\n  let end = count - 1;\n  if (loop && !spanGaps) {\n    while (start < count && !points[start].skip) {\n      start++;\n    }\n  }\n  while (start < count && points[start].skip) {\n    start++;\n  }\n  start %= count;\n  if (loop) {\n    end += start;\n  }\n  while (end > start && points[end % count].skip) {\n    end--;\n  }\n  end %= count;\n  return {start, end};\n}\nfunction solidSegments(points, start, max, loop) {\n  const count = points.length;\n  const result = [];\n  let last = start;\n  let prev = points[start];\n  let end;\n  for (end = start + 1; end <= max; ++end) {\n    const cur = points[end % count];\n    if (cur.skip || cur.stop) {\n      if (!prev.skip) {\n        loop = false;\n        result.push({start: start % count, end: (end - 1) % count, loop});\n        start = last = cur.stop ? end : null;\n      }\n    } else {\n      last = end;\n      if (prev.skip) {\n        start = end;\n      }\n    }\n    prev = cur;\n  }\n  if (last !== null) {\n    result.push({start: start % count, end: last % count, loop});\n  }\n  return result;\n}\nfunction _computeSegments(line, segmentOptions) {\n  const points = line.points;\n  const spanGaps = line.options.spanGaps;\n  const count = points.length;\n  if (!count) {\n    return [];\n  }\n  const loop = !!line._loop;\n  const {start, end} = findStartAndEnd(points, count, loop, spanGaps);\n  if (spanGaps === true) {\n    return splitByStyles(line, [{start, end, loop}], points, segmentOptions);\n  }\n  const max = end < start ? end + count : end;\n  const completeLoop = !!line._fullLoop && start === 0 && end === count - 1;\n  return splitByStyles(line, solidSegments(points, start, max, completeLoop), points, segmentOptions);\n}\nfunction splitByStyles(line, segments, points, segmentOptions) {\n  if (!segmentOptions || !segmentOptions.setContext || !points) {\n    return segments;\n  }\n  return doSplitByStyles(line, segments, points, segmentOptions);\n}\nfunction doSplitByStyles(line, segments, points, segmentOptions) {\n  const chartContext = line._chart.getContext();\n  const baseStyle = readStyle(line.options);\n  const {_datasetIndex: datasetIndex, options: {spanGaps}} = line;\n  const count = points.length;\n  const result = [];\n  let prevStyle = baseStyle;\n  let start = segments[0].start;\n  let i = start;\n  function addStyle(s, e, l, st) {\n    const dir = spanGaps ? -1 : 1;\n    if (s === e) {\n      return;\n    }\n    s += count;\n    while (points[s % count].skip) {\n      s -= dir;\n    }\n    while (points[e % count].skip) {\n      e += dir;\n    }\n    if (s % count !== e % count) {\n      result.push({start: s % count, end: e % count, loop: l, style: st});\n      prevStyle = st;\n      start = e % count;\n    }\n  }\n  for (const segment of segments) {\n    start = spanGaps ? start : segment.start;\n    let prev = points[start % count];\n    let style;\n    for (i = start + 1; i <= segment.end; i++) {\n      const pt = points[i % count];\n      style = readStyle(segmentOptions.setContext(createContext(chartContext, {\n        type: 'segment',\n        p0: prev,\n        p1: pt,\n        p0DataIndex: (i - 1) % count,\n        p1DataIndex: i % count,\n        datasetIndex\n      })));\n      if (styleChanged(style, prevStyle)) {\n        addStyle(start, i - 1, segment.loop, prevStyle);\n      }\n      prev = pt;\n      prevStyle = style;\n    }\n    if (start < i - 1) {\n      addStyle(start, i - 1, segment.loop, prevStyle);\n    }\n  }\n  return result;\n}\nfunction readStyle(options) {\n  return {\n    backgroundColor: options.backgroundColor,\n    borderCapStyle: options.borderCapStyle,\n    borderDash: options.borderDash,\n    borderDashOffset: options.borderDashOffset,\n    borderJoinStyle: options.borderJoinStyle,\n    borderWidth: options.borderWidth,\n    borderColor: options.borderColor\n  };\n}\nfunction styleChanged(style, prevStyle) {\n  return prevStyle && JSON.stringify(style) !== JSON.stringify(prevStyle);\n}\n\nexport { _isPointInArea as $, _factorize as A, finiteOrDefault as B, callback as C, _addGrace as D, _limitValue as E, toDegrees as F, _measureText as G, HALF_PI as H, _int16Range as I, _alignPixel as J, toPadding as K, clipArea as L, renderText as M, unclipArea as N, toFont as O, PI as P, each as Q, _toLeftRightCenter as R, _alignStartEnd as S, TAU as T, overrides as U, merge as V, _capitalize as W, getRelativePosition as X, _rlookupByKey as Y, _lookupByKey as Z, _arrayUnique as _, resolve as a, toLineHeight as a$, getAngleFromPoint as a0, getMaximumSize as a1, _getParentNode as a2, readUsedSize as a3, throttled as a4, supportsEventListenerOptions as a5, _isDomSupported as a6, descriptors as a7, isFunction as a8, _attachContext as a9, getRtlAdapter as aA, overrideTextDirection as aB, _textX as aC, restoreTextDirection as aD, drawPointLegend as aE, noop as aF, distanceBetweenPoints as aG, _setMinAndMaxByKey as aH, niceNum as aI, almostWhole as aJ, almostEquals as aK, _decimalPlaces as aL, _longestText as aM, _filterBetween as aN, _lookup as aO, isPatternOrGradient as aP, getHoverColor as aQ, clone$1 as aR, _merger as aS, _mergerIf as aT, _deprecated as aU, _splitKey as aV, toFontString as aW, splineCurve as aX, splineCurveMonotone as aY, getStyle as aZ, fontString as a_, _createResolver as aa, _descriptors as ab, mergeIf as ac, uid as ad, debounce as ae, retinaScale as af, clearCanvas as ag, setsEqual as ah, _elementsEqual as ai, _isClickEvent as aj, _isBetween as ak, _readValueToProps as al, _updateBezierControlPoints as am, _computeSegments as an, _boundSegments as ao, _steppedInterpolation as ap, _bezierInterpolation as aq, _pointInLine as ar, _steppedLineTo as as, _bezierCurveTo as at, drawPoint as au, addRoundedRectPath as av, toTRBL as aw, toTRBLCorners as ax, _boundSegment as ay, _normalizeAngle as az, isArray as b, PITAU as b0, INFINITY as b1, RAD_PER_DEG as b2, QUARTER_PI as b3, TWO_THIRDS_PI as b4, _angleDiff as b5, color as c, defaults as d, effects as e, resolveObjectKey as f, isNumberFinite as g, createContext as h, isObject as i, defined as j, isNullOrUndef as k, listenArrayEvents as l, toPercentage as m, toDimension as n, formatNumber as o, _angleBetween as p, _getStartAndCountOfVisiblePoints as q, requestAnimFrame as r, sign as s, toRadians as t, unlistenArrayEvents as u, valueOrDefault as v, _scaleRangesChanged as w, isNumber as x, _parseObjectDataRadialScale as y, log10 as z };\n","/*!\n * Chart.js v3.9.1\n * https://www.chartjs.org\n * (c) 2022 Chart.js Contributors\n * Released under the MIT License\n */\nimport { r as requestAnimFrame, a as resolve, e as effects, c as color, d as defaults, i as isObject, b as isArray, v as valueOrDefault, u as unlistenArrayEvents, l as listenArrayEvents, f as resolveObjectKey, g as isNumberFinite, h as createContext, j as defined, s as sign, k as isNullOrUndef, _ as _arrayUnique, t as toRadians, m as toPercentage, n as toDimension, T as TAU, o as formatNumber, p as _angleBetween, H as HALF_PI, P as PI, q as _getStartAndCountOfVisiblePoints, w as _scaleRangesChanged, x as isNumber, y as _parseObjectDataRadialScale, z as log10, A as _factorize, B as finiteOrDefault, C as callback, D as _addGrace, E as _limitValue, F as toDegrees, G as _measureText, I as _int16Range, J as _alignPixel, K as toPadding, L as clipArea, M as renderText, N as unclipArea, O as toFont, Q as each, R as _toLeftRightCenter, S as _alignStartEnd, U as overrides, V as merge, W as _capitalize, X as getRelativePosition, Y as _rlookupByKey, Z as _lookupByKey, $ as _isPointInArea, a0 as getAngleFromPoint, a1 as getMaximumSize, a2 as _getParentNode, a3 as readUsedSize, a4 as throttled, a5 as supportsEventListenerOptions, a6 as _isDomSupported, a7 as descriptors, a8 as isFunction, a9 as _attachContext, aa as _createResolver, ab as _descriptors, ac as mergeIf, ad as uid, ae as debounce, af as retinaScale, ag as clearCanvas, ah as setsEqual, ai as _elementsEqual, aj as _isClickEvent, ak as _isBetween, al as _readValueToProps, am as _updateBezierControlPoints, an as _computeSegments, ao as _boundSegments, ap as _steppedInterpolation, aq as _bezierInterpolation, ar as _pointInLine, as as _steppedLineTo, at as _bezierCurveTo, au as drawPoint, av as addRoundedRectPath, aw as toTRBL, ax as toTRBLCorners, ay as _boundSegment, az as _normalizeAngle, aA as getRtlAdapter, aB as overrideTextDirection, aC as _textX, aD as restoreTextDirection, aE as drawPointLegend, aF as noop, aG as distanceBetweenPoints, aH as _setMinAndMaxByKey, aI as niceNum, aJ as almostWhole, aK as almostEquals, aL as _decimalPlaces, aM as _longestText, aN as _filterBetween, aO as _lookup } from './chunks/helpers.segment.mjs';\nexport { d as defaults } from './chunks/helpers.segment.mjs';\n\nclass Animator {\n  constructor() {\n    this._request = null;\n    this._charts = new Map();\n    this._running = false;\n    this._lastDate = undefined;\n  }\n  _notify(chart, anims, date, type) {\n    const callbacks = anims.listeners[type];\n    const numSteps = anims.duration;\n    callbacks.forEach(fn => fn({\n      chart,\n      initial: anims.initial,\n      numSteps,\n      currentStep: Math.min(date - anims.start, numSteps)\n    }));\n  }\n  _refresh() {\n    if (this._request) {\n      return;\n    }\n    this._running = true;\n    this._request = requestAnimFrame.call(window, () => {\n      this._update();\n      this._request = null;\n      if (this._running) {\n        this._refresh();\n      }\n    });\n  }\n  _update(date = Date.now()) {\n    let remaining = 0;\n    this._charts.forEach((anims, chart) => {\n      if (!anims.running || !anims.items.length) {\n        return;\n      }\n      const items = anims.items;\n      let i = items.length - 1;\n      let draw = false;\n      let item;\n      for (; i >= 0; --i) {\n        item = items[i];\n        if (item._active) {\n          if (item._total > anims.duration) {\n            anims.duration = item._total;\n          }\n          item.tick(date);\n          draw = true;\n        } else {\n          items[i] = items[items.length - 1];\n          items.pop();\n        }\n      }\n      if (draw) {\n        chart.draw();\n        this._notify(chart, anims, date, 'progress');\n      }\n      if (!items.length) {\n        anims.running = false;\n        this._notify(chart, anims, date, 'complete');\n        anims.initial = false;\n      }\n      remaining += items.length;\n    });\n    this._lastDate = date;\n    if (remaining === 0) {\n      this._running = false;\n    }\n  }\n  _getAnims(chart) {\n    const charts = this._charts;\n    let anims = charts.get(chart);\n    if (!anims) {\n      anims = {\n        running: false,\n        initial: true,\n        items: [],\n        listeners: {\n          complete: [],\n          progress: []\n        }\n      };\n      charts.set(chart, anims);\n    }\n    return anims;\n  }\n  listen(chart, event, cb) {\n    this._getAnims(chart).listeners[event].push(cb);\n  }\n  add(chart, items) {\n    if (!items || !items.length) {\n      return;\n    }\n    this._getAnims(chart).items.push(...items);\n  }\n  has(chart) {\n    return this._getAnims(chart).items.length > 0;\n  }\n  start(chart) {\n    const anims = this._charts.get(chart);\n    if (!anims) {\n      return;\n    }\n    anims.running = true;\n    anims.start = Date.now();\n    anims.duration = anims.items.reduce((acc, cur) => Math.max(acc, cur._duration), 0);\n    this._refresh();\n  }\n  running(chart) {\n    if (!this._running) {\n      return false;\n    }\n    const anims = this._charts.get(chart);\n    if (!anims || !anims.running || !anims.items.length) {\n      return false;\n    }\n    return true;\n  }\n  stop(chart) {\n    const anims = this._charts.get(chart);\n    if (!anims || !anims.items.length) {\n      return;\n    }\n    const items = anims.items;\n    let i = items.length - 1;\n    for (; i >= 0; --i) {\n      items[i].cancel();\n    }\n    anims.items = [];\n    this._notify(chart, anims, Date.now(), 'complete');\n  }\n  remove(chart) {\n    return this._charts.delete(chart);\n  }\n}\nvar animator = new Animator();\n\nconst transparent = 'transparent';\nconst interpolators = {\n  boolean(from, to, factor) {\n    return factor > 0.5 ? to : from;\n  },\n  color(from, to, factor) {\n    const c0 = color(from || transparent);\n    const c1 = c0.valid && color(to || transparent);\n    return c1 && c1.valid\n      ? c1.mix(c0, factor).hexString()\n      : to;\n  },\n  number(from, to, factor) {\n    return from + (to - from) * factor;\n  }\n};\nclass Animation {\n  constructor(cfg, target, prop, to) {\n    const currentValue = target[prop];\n    to = resolve([cfg.to, to, currentValue, cfg.from]);\n    const from = resolve([cfg.from, currentValue, to]);\n    this._active = true;\n    this._fn = cfg.fn || interpolators[cfg.type || typeof from];\n    this._easing = effects[cfg.easing] || effects.linear;\n    this._start = Math.floor(Date.now() + (cfg.delay || 0));\n    this._duration = this._total = Math.floor(cfg.duration);\n    this._loop = !!cfg.loop;\n    this._target = target;\n    this._prop = prop;\n    this._from = from;\n    this._to = to;\n    this._promises = undefined;\n  }\n  active() {\n    return this._active;\n  }\n  update(cfg, to, date) {\n    if (this._active) {\n      this._notify(false);\n      const currentValue = this._target[this._prop];\n      const elapsed = date - this._start;\n      const remain = this._duration - elapsed;\n      this._start = date;\n      this._duration = Math.floor(Math.max(remain, cfg.duration));\n      this._total += elapsed;\n      this._loop = !!cfg.loop;\n      this._to = resolve([cfg.to, to, currentValue, cfg.from]);\n      this._from = resolve([cfg.from, currentValue, to]);\n    }\n  }\n  cancel() {\n    if (this._active) {\n      this.tick(Date.now());\n      this._active = false;\n      this._notify(false);\n    }\n  }\n  tick(date) {\n    const elapsed = date - this._start;\n    const duration = this._duration;\n    const prop = this._prop;\n    const from = this._from;\n    const loop = this._loop;\n    const to = this._to;\n    let factor;\n    this._active = from !== to && (loop || (elapsed < duration));\n    if (!this._active) {\n      this._target[prop] = to;\n      this._notify(true);\n      return;\n    }\n    if (elapsed < 0) {\n      this._target[prop] = from;\n      return;\n    }\n    factor = (elapsed / duration) % 2;\n    factor = loop && factor > 1 ? 2 - factor : factor;\n    factor = this._easing(Math.min(1, Math.max(0, factor)));\n    this._target[prop] = this._fn(from, to, factor);\n  }\n  wait() {\n    const promises = this._promises || (this._promises = []);\n    return new Promise((res, rej) => {\n      promises.push({res, rej});\n    });\n  }\n  _notify(resolved) {\n    const method = resolved ? 'res' : 'rej';\n    const promises = this._promises || [];\n    for (let i = 0; i < promises.length; i++) {\n      promises[i][method]();\n    }\n  }\n}\n\nconst numbers = ['x', 'y', 'borderWidth', 'radius', 'tension'];\nconst colors = ['color', 'borderColor', 'backgroundColor'];\ndefaults.set('animation', {\n  delay: undefined,\n  duration: 1000,\n  easing: 'easeOutQuart',\n  fn: undefined,\n  from: undefined,\n  loop: undefined,\n  to: undefined,\n  type: undefined,\n});\nconst animationOptions = Object.keys(defaults.animation);\ndefaults.describe('animation', {\n  _fallback: false,\n  _indexable: false,\n  _scriptable: (name) => name !== 'onProgress' && name !== 'onComplete' && name !== 'fn',\n});\ndefaults.set('animations', {\n  colors: {\n    type: 'color',\n    properties: colors\n  },\n  numbers: {\n    type: 'number',\n    properties: numbers\n  },\n});\ndefaults.describe('animations', {\n  _fallback: 'animation',\n});\ndefaults.set('transitions', {\n  active: {\n    animation: {\n      duration: 400\n    }\n  },\n  resize: {\n    animation: {\n      duration: 0\n    }\n  },\n  show: {\n    animations: {\n      colors: {\n        from: 'transparent'\n      },\n      visible: {\n        type: 'boolean',\n        duration: 0\n      },\n    }\n  },\n  hide: {\n    animations: {\n      colors: {\n        to: 'transparent'\n      },\n      visible: {\n        type: 'boolean',\n        easing: 'linear',\n        fn: v => v | 0\n      },\n    }\n  }\n});\nclass Animations {\n  constructor(chart, config) {\n    this._chart = chart;\n    this._properties = new Map();\n    this.configure(config);\n  }\n  configure(config) {\n    if (!isObject(config)) {\n      return;\n    }\n    const animatedProps = this._properties;\n    Object.getOwnPropertyNames(config).forEach(key => {\n      const cfg = config[key];\n      if (!isObject(cfg)) {\n        return;\n      }\n      const resolved = {};\n      for (const option of animationOptions) {\n        resolved[option] = cfg[option];\n      }\n      (isArray(cfg.properties) && cfg.properties || [key]).forEach((prop) => {\n        if (prop === key || !animatedProps.has(prop)) {\n          animatedProps.set(prop, resolved);\n        }\n      });\n    });\n  }\n  _animateOptions(target, values) {\n    const newOptions = values.options;\n    const options = resolveTargetOptions(target, newOptions);\n    if (!options) {\n      return [];\n    }\n    const animations = this._createAnimations(options, newOptions);\n    if (newOptions.$shared) {\n      awaitAll(target.options.$animations, newOptions).then(() => {\n        target.options = newOptions;\n      }, () => {\n      });\n    }\n    return animations;\n  }\n  _createAnimations(target, values) {\n    const animatedProps = this._properties;\n    const animations = [];\n    const running = target.$animations || (target.$animations = {});\n    const props = Object.keys(values);\n    const date = Date.now();\n    let i;\n    for (i = props.length - 1; i >= 0; --i) {\n      const prop = props[i];\n      if (prop.charAt(0) === '$') {\n        continue;\n      }\n      if (prop === 'options') {\n        animations.push(...this._animateOptions(target, values));\n        continue;\n      }\n      const value = values[prop];\n      let animation = running[prop];\n      const cfg = animatedProps.get(prop);\n      if (animation) {\n        if (cfg && animation.active()) {\n          animation.update(cfg, value, date);\n          continue;\n        } else {\n          animation.cancel();\n        }\n      }\n      if (!cfg || !cfg.duration) {\n        target[prop] = value;\n        continue;\n      }\n      running[prop] = animation = new Animation(cfg, target, prop, value);\n      animations.push(animation);\n    }\n    return animations;\n  }\n  update(target, values) {\n    if (this._properties.size === 0) {\n      Object.assign(target, values);\n      return;\n    }\n    const animations = this._createAnimations(target, values);\n    if (animations.length) {\n      animator.add(this._chart, animations);\n      return true;\n    }\n  }\n}\nfunction awaitAll(animations, properties) {\n  const running = [];\n  const keys = Object.keys(properties);\n  for (let i = 0; i < keys.length; i++) {\n    const anim = animations[keys[i]];\n    if (anim && anim.active()) {\n      running.push(anim.wait());\n    }\n  }\n  return Promise.all(running);\n}\nfunction resolveTargetOptions(target, newOptions) {\n  if (!newOptions) {\n    return;\n  }\n  let options = target.options;\n  if (!options) {\n    target.options = newOptions;\n    return;\n  }\n  if (options.$shared) {\n    target.options = options = Object.assign({}, options, {$shared: false, $animations: {}});\n  }\n  return options;\n}\n\nfunction scaleClip(scale, allowedOverflow) {\n  const opts = scale && scale.options || {};\n  const reverse = opts.reverse;\n  const min = opts.min === undefined ? allowedOverflow : 0;\n  const max = opts.max === undefined ? allowedOverflow : 0;\n  return {\n    start: reverse ? max : min,\n    end: reverse ? min : max\n  };\n}\nfunction defaultClip(xScale, yScale, allowedOverflow) {\n  if (allowedOverflow === false) {\n    return false;\n  }\n  const x = scaleClip(xScale, allowedOverflow);\n  const y = scaleClip(yScale, allowedOverflow);\n  return {\n    top: y.end,\n    right: x.end,\n    bottom: y.start,\n    left: x.start\n  };\n}\nfunction toClip(value) {\n  let t, r, b, l;\n  if (isObject(value)) {\n    t = value.top;\n    r = value.right;\n    b = value.bottom;\n    l = value.left;\n  } else {\n    t = r = b = l = value;\n  }\n  return {\n    top: t,\n    right: r,\n    bottom: b,\n    left: l,\n    disabled: value === false\n  };\n}\nfunction getSortedDatasetIndices(chart, filterVisible) {\n  const keys = [];\n  const metasets = chart._getSortedDatasetMetas(filterVisible);\n  let i, ilen;\n  for (i = 0, ilen = metasets.length; i < ilen; ++i) {\n    keys.push(metasets[i].index);\n  }\n  return keys;\n}\nfunction applyStack(stack, value, dsIndex, options = {}) {\n  const keys = stack.keys;\n  const singleMode = options.mode === 'single';\n  let i, ilen, datasetIndex, otherValue;\n  if (value === null) {\n    return;\n  }\n  for (i = 0, ilen = keys.length; i < ilen; ++i) {\n    datasetIndex = +keys[i];\n    if (datasetIndex === dsIndex) {\n      if (options.all) {\n        continue;\n      }\n      break;\n    }\n    otherValue = stack.values[datasetIndex];\n    if (isNumberFinite(otherValue) && (singleMode || (value === 0 || sign(value) === sign(otherValue)))) {\n      value += otherValue;\n    }\n  }\n  return value;\n}\nfunction convertObjectDataToArray(data) {\n  const keys = Object.keys(data);\n  const adata = new Array(keys.length);\n  let i, ilen, key;\n  for (i = 0, ilen = keys.length; i < ilen; ++i) {\n    key = keys[i];\n    adata[i] = {\n      x: key,\n      y: data[key]\n    };\n  }\n  return adata;\n}\nfunction isStacked(scale, meta) {\n  const stacked = scale && scale.options.stacked;\n  return stacked || (stacked === undefined && meta.stack !== undefined);\n}\nfunction getStackKey(indexScale, valueScale, meta) {\n  return `${indexScale.id}.${valueScale.id}.${meta.stack || meta.type}`;\n}\nfunction getUserBounds(scale) {\n  const {min, max, minDefined, maxDefined} = scale.getUserBounds();\n  return {\n    min: minDefined ? min : Number.NEGATIVE_INFINITY,\n    max: maxDefined ? max : Number.POSITIVE_INFINITY\n  };\n}\nfunction getOrCreateStack(stacks, stackKey, indexValue) {\n  const subStack = stacks[stackKey] || (stacks[stackKey] = {});\n  return subStack[indexValue] || (subStack[indexValue] = {});\n}\nfunction getLastIndexInStack(stack, vScale, positive, type) {\n  for (const meta of vScale.getMatchingVisibleMetas(type).reverse()) {\n    const value = stack[meta.index];\n    if ((positive && value > 0) || (!positive && value < 0)) {\n      return meta.index;\n    }\n  }\n  return null;\n}\nfunction updateStacks(controller, parsed) {\n  const {chart, _cachedMeta: meta} = controller;\n  const stacks = chart._stacks || (chart._stacks = {});\n  const {iScale, vScale, index: datasetIndex} = meta;\n  const iAxis = iScale.axis;\n  const vAxis = vScale.axis;\n  const key = getStackKey(iScale, vScale, meta);\n  const ilen = parsed.length;\n  let stack;\n  for (let i = 0; i < ilen; ++i) {\n    const item = parsed[i];\n    const {[iAxis]: index, [vAxis]: value} = item;\n    const itemStacks = item._stacks || (item._stacks = {});\n    stack = itemStacks[vAxis] = getOrCreateStack(stacks, key, index);\n    stack[datasetIndex] = value;\n    stack._top = getLastIndexInStack(stack, vScale, true, meta.type);\n    stack._bottom = getLastIndexInStack(stack, vScale, false, meta.type);\n  }\n}\nfunction getFirstScaleId(chart, axis) {\n  const scales = chart.scales;\n  return Object.keys(scales).filter(key => scales[key].axis === axis).shift();\n}\nfunction createDatasetContext(parent, index) {\n  return createContext(parent,\n    {\n      active: false,\n      dataset: undefined,\n      datasetIndex: index,\n      index,\n      mode: 'default',\n      type: 'dataset'\n    }\n  );\n}\nfunction createDataContext(parent, index, element) {\n  return createContext(parent, {\n    active: false,\n    dataIndex: index,\n    parsed: undefined,\n    raw: undefined,\n    element,\n    index,\n    mode: 'default',\n    type: 'data'\n  });\n}\nfunction clearStacks(meta, items) {\n  const datasetIndex = meta.controller.index;\n  const axis = meta.vScale && meta.vScale.axis;\n  if (!axis) {\n    return;\n  }\n  items = items || meta._parsed;\n  for (const parsed of items) {\n    const stacks = parsed._stacks;\n    if (!stacks || stacks[axis] === undefined || stacks[axis][datasetIndex] === undefined) {\n      return;\n    }\n    delete stacks[axis][datasetIndex];\n  }\n}\nconst isDirectUpdateMode = (mode) => mode === 'reset' || mode === 'none';\nconst cloneIfNotShared = (cached, shared) => shared ? cached : Object.assign({}, cached);\nconst createStack = (canStack, meta, chart) => canStack && !meta.hidden && meta._stacked\n  && {keys: getSortedDatasetIndices(chart, true), values: null};\nclass DatasetController {\n  constructor(chart, datasetIndex) {\n    this.chart = chart;\n    this._ctx = chart.ctx;\n    this.index = datasetIndex;\n    this._cachedDataOpts = {};\n    this._cachedMeta = this.getMeta();\n    this._type = this._cachedMeta.type;\n    this.options = undefined;\n    this._parsing = false;\n    this._data = undefined;\n    this._objectData = undefined;\n    this._sharedOptions = undefined;\n    this._drawStart = undefined;\n    this._drawCount = undefined;\n    this.enableOptionSharing = false;\n    this.supportsDecimation = false;\n    this.$context = undefined;\n    this._syncList = [];\n    this.initialize();\n  }\n  initialize() {\n    const meta = this._cachedMeta;\n    this.configure();\n    this.linkScales();\n    meta._stacked = isStacked(meta.vScale, meta);\n    this.addElements();\n  }\n  updateIndex(datasetIndex) {\n    if (this.index !== datasetIndex) {\n      clearStacks(this._cachedMeta);\n    }\n    this.index = datasetIndex;\n  }\n  linkScales() {\n    const chart = this.chart;\n    const meta = this._cachedMeta;\n    const dataset = this.getDataset();\n    const chooseId = (axis, x, y, r) => axis === 'x' ? x : axis === 'r' ? r : y;\n    const xid = meta.xAxisID = valueOrDefault(dataset.xAxisID, getFirstScaleId(chart, 'x'));\n    const yid = meta.yAxisID = valueOrDefault(dataset.yAxisID, getFirstScaleId(chart, 'y'));\n    const rid = meta.rAxisID = valueOrDefault(dataset.rAxisID, getFirstScaleId(chart, 'r'));\n    const indexAxis = meta.indexAxis;\n    const iid = meta.iAxisID = chooseId(indexAxis, xid, yid, rid);\n    const vid = meta.vAxisID = chooseId(indexAxis, yid, xid, rid);\n    meta.xScale = this.getScaleForId(xid);\n    meta.yScale = this.getScaleForId(yid);\n    meta.rScale = this.getScaleForId(rid);\n    meta.iScale = this.getScaleForId(iid);\n    meta.vScale = this.getScaleForId(vid);\n  }\n  getDataset() {\n    return this.chart.data.datasets[this.index];\n  }\n  getMeta() {\n    return this.chart.getDatasetMeta(this.index);\n  }\n  getScaleForId(scaleID) {\n    return this.chart.scales[scaleID];\n  }\n  _getOtherScale(scale) {\n    const meta = this._cachedMeta;\n    return scale === meta.iScale\n      ? meta.vScale\n      : meta.iScale;\n  }\n  reset() {\n    this._update('reset');\n  }\n  _destroy() {\n    const meta = this._cachedMeta;\n    if (this._data) {\n      unlistenArrayEvents(this._data, this);\n    }\n    if (meta._stacked) {\n      clearStacks(meta);\n    }\n  }\n  _dataCheck() {\n    const dataset = this.getDataset();\n    const data = dataset.data || (dataset.data = []);\n    const _data = this._data;\n    if (isObject(data)) {\n      this._data = convertObjectDataToArray(data);\n    } else if (_data !== data) {\n      if (_data) {\n        unlistenArrayEvents(_data, this);\n        const meta = this._cachedMeta;\n        clearStacks(meta);\n        meta._parsed = [];\n      }\n      if (data && Object.isExtensible(data)) {\n        listenArrayEvents(data, this);\n      }\n      this._syncList = [];\n      this._data = data;\n    }\n  }\n  addElements() {\n    const meta = this._cachedMeta;\n    this._dataCheck();\n    if (this.datasetElementType) {\n      meta.dataset = new this.datasetElementType();\n    }\n  }\n  buildOrUpdateElements(resetNewElements) {\n    const meta = this._cachedMeta;\n    const dataset = this.getDataset();\n    let stackChanged = false;\n    this._dataCheck();\n    const oldStacked = meta._stacked;\n    meta._stacked = isStacked(meta.vScale, meta);\n    if (meta.stack !== dataset.stack) {\n      stackChanged = true;\n      clearStacks(meta);\n      meta.stack = dataset.stack;\n    }\n    this._resyncElements(resetNewElements);\n    if (stackChanged || oldStacked !== meta._stacked) {\n      updateStacks(this, meta._parsed);\n    }\n  }\n  configure() {\n    const config = this.chart.config;\n    const scopeKeys = config.datasetScopeKeys(this._type);\n    const scopes = config.getOptionScopes(this.getDataset(), scopeKeys, true);\n    this.options = config.createResolver(scopes, this.getContext());\n    this._parsing = this.options.parsing;\n    this._cachedDataOpts = {};\n  }\n  parse(start, count) {\n    const {_cachedMeta: meta, _data: data} = this;\n    const {iScale, _stacked} = meta;\n    const iAxis = iScale.axis;\n    let sorted = start === 0 && count === data.length ? true : meta._sorted;\n    let prev = start > 0 && meta._parsed[start - 1];\n    let i, cur, parsed;\n    if (this._parsing === false) {\n      meta._parsed = data;\n      meta._sorted = true;\n      parsed = data;\n    } else {\n      if (isArray(data[start])) {\n        parsed = this.parseArrayData(meta, data, start, count);\n      } else if (isObject(data[start])) {\n        parsed = this.parseObjectData(meta, data, start, count);\n      } else {\n        parsed = this.parsePrimitiveData(meta, data, start, count);\n      }\n      const isNotInOrderComparedToPrev = () => cur[iAxis] === null || (prev && cur[iAxis] < prev[iAxis]);\n      for (i = 0; i < count; ++i) {\n        meta._parsed[i + start] = cur = parsed[i];\n        if (sorted) {\n          if (isNotInOrderComparedToPrev()) {\n            sorted = false;\n          }\n          prev = cur;\n        }\n      }\n      meta._sorted = sorted;\n    }\n    if (_stacked) {\n      updateStacks(this, parsed);\n    }\n  }\n  parsePrimitiveData(meta, data, start, count) {\n    const {iScale, vScale} = meta;\n    const iAxis = iScale.axis;\n    const vAxis = vScale.axis;\n    const labels = iScale.getLabels();\n    const singleScale = iScale === vScale;\n    const parsed = new Array(count);\n    let i, ilen, index;\n    for (i = 0, ilen = count; i < ilen; ++i) {\n      index = i + start;\n      parsed[i] = {\n        [iAxis]: singleScale || iScale.parse(labels[index], index),\n        [vAxis]: vScale.parse(data[index], index)\n      };\n    }\n    return parsed;\n  }\n  parseArrayData(meta, data, start, count) {\n    const {xScale, yScale} = meta;\n    const parsed = new Array(count);\n    let i, ilen, index, item;\n    for (i = 0, ilen = count; i < ilen; ++i) {\n      index = i + start;\n      item = data[index];\n      parsed[i] = {\n        x: xScale.parse(item[0], index),\n        y: yScale.parse(item[1], index)\n      };\n    }\n    return parsed;\n  }\n  parseObjectData(meta, data, start, count) {\n    const {xScale, yScale} = meta;\n    const {xAxisKey = 'x', yAxisKey = 'y'} = this._parsing;\n    const parsed = new Array(count);\n    let i, ilen, index, item;\n    for (i = 0, ilen = count; i < ilen; ++i) {\n      index = i + start;\n      item = data[index];\n      parsed[i] = {\n        x: xScale.parse(resolveObjectKey(item, xAxisKey), index),\n        y: yScale.parse(resolveObjectKey(item, yAxisKey), index)\n      };\n    }\n    return parsed;\n  }\n  getParsed(index) {\n    return this._cachedMeta._parsed[index];\n  }\n  getDataElement(index) {\n    return this._cachedMeta.data[index];\n  }\n  applyStack(scale, parsed, mode) {\n    const chart = this.chart;\n    const meta = this._cachedMeta;\n    const value = parsed[scale.axis];\n    const stack = {\n      keys: getSortedDatasetIndices(chart, true),\n      values: parsed._stacks[scale.axis]\n    };\n    return applyStack(stack, value, meta.index, {mode});\n  }\n  updateRangeFromParsed(range, scale, parsed, stack) {\n    const parsedValue = parsed[scale.axis];\n    let value = parsedValue === null ? NaN : parsedValue;\n    const values = stack && parsed._stacks[scale.axis];\n    if (stack && values) {\n      stack.values = values;\n      value = applyStack(stack, parsedValue, this._cachedMeta.index);\n    }\n    range.min = Math.min(range.min, value);\n    range.max = Math.max(range.max, value);\n  }\n  getMinMax(scale, canStack) {\n    const meta = this._cachedMeta;\n    const _parsed = meta._parsed;\n    const sorted = meta._sorted && scale === meta.iScale;\n    const ilen = _parsed.length;\n    const otherScale = this._getOtherScale(scale);\n    const stack = createStack(canStack, meta, this.chart);\n    const range = {min: Number.POSITIVE_INFINITY, max: Number.NEGATIVE_INFINITY};\n    const {min: otherMin, max: otherMax} = getUserBounds(otherScale);\n    let i, parsed;\n    function _skip() {\n      parsed = _parsed[i];\n      const otherValue = parsed[otherScale.axis];\n      return !isNumberFinite(parsed[scale.axis]) || otherMin > otherValue || otherMax < otherValue;\n    }\n    for (i = 0; i < ilen; ++i) {\n      if (_skip()) {\n        continue;\n      }\n      this.updateRangeFromParsed(range, scale, parsed, stack);\n      if (sorted) {\n        break;\n      }\n    }\n    if (sorted) {\n      for (i = ilen - 1; i >= 0; --i) {\n        if (_skip()) {\n          continue;\n        }\n        this.updateRangeFromParsed(range, scale, parsed, stack);\n        break;\n      }\n    }\n    return range;\n  }\n  getAllParsedValues(scale) {\n    const parsed = this._cachedMeta._parsed;\n    const values = [];\n    let i, ilen, value;\n    for (i = 0, ilen = parsed.length; i < ilen; ++i) {\n      value = parsed[i][scale.axis];\n      if (isNumberFinite(value)) {\n        values.push(value);\n      }\n    }\n    return values;\n  }\n  getMaxOverflow() {\n    return false;\n  }\n  getLabelAndValue(index) {\n    const meta = this._cachedMeta;\n    const iScale = meta.iScale;\n    const vScale = meta.vScale;\n    const parsed = this.getParsed(index);\n    return {\n      label: iScale ? '' + iScale.getLabelForValue(parsed[iScale.axis]) : '',\n      value: vScale ? '' + vScale.getLabelForValue(parsed[vScale.axis]) : ''\n    };\n  }\n  _update(mode) {\n    const meta = this._cachedMeta;\n    this.update(mode || 'default');\n    meta._clip = toClip(valueOrDefault(this.options.clip, defaultClip(meta.xScale, meta.yScale, this.getMaxOverflow())));\n  }\n  update(mode) {}\n  draw() {\n    const ctx = this._ctx;\n    const chart = this.chart;\n    const meta = this._cachedMeta;\n    const elements = meta.data || [];\n    const area = chart.chartArea;\n    const active = [];\n    const start = this._drawStart || 0;\n    const count = this._drawCount || (elements.length - start);\n    const drawActiveElementsOnTop = this.options.drawActiveElementsOnTop;\n    let i;\n    if (meta.dataset) {\n      meta.dataset.draw(ctx, area, start, count);\n    }\n    for (i = start; i < start + count; ++i) {\n      const element = elements[i];\n      if (element.hidden) {\n        continue;\n      }\n      if (element.active && drawActiveElementsOnTop) {\n        active.push(element);\n      } else {\n        element.draw(ctx, area);\n      }\n    }\n    for (i = 0; i < active.length; ++i) {\n      active[i].draw(ctx, area);\n    }\n  }\n  getStyle(index, active) {\n    const mode = active ? 'active' : 'default';\n    return index === undefined && this._cachedMeta.dataset\n      ? this.resolveDatasetElementOptions(mode)\n      : this.resolveDataElementOptions(index || 0, mode);\n  }\n  getContext(index, active, mode) {\n    const dataset = this.getDataset();\n    let context;\n    if (index >= 0 && index < this._cachedMeta.data.length) {\n      const element = this._cachedMeta.data[index];\n      context = element.$context ||\n        (element.$context = createDataContext(this.getContext(), index, element));\n      context.parsed = this.getParsed(index);\n      context.raw = dataset.data[index];\n      context.index = context.dataIndex = index;\n    } else {\n      context = this.$context ||\n        (this.$context = createDatasetContext(this.chart.getContext(), this.index));\n      context.dataset = dataset;\n      context.index = context.datasetIndex = this.index;\n    }\n    context.active = !!active;\n    context.mode = mode;\n    return context;\n  }\n  resolveDatasetElementOptions(mode) {\n    return this._resolveElementOptions(this.datasetElementType.id, mode);\n  }\n  resolveDataElementOptions(index, mode) {\n    return this._resolveElementOptions(this.dataElementType.id, mode, index);\n  }\n  _resolveElementOptions(elementType, mode = 'default', index) {\n    const active = mode === 'active';\n    const cache = this._cachedDataOpts;\n    const cacheKey = elementType + '-' + mode;\n    const cached = cache[cacheKey];\n    const sharing = this.enableOptionSharing && defined(index);\n    if (cached) {\n      return cloneIfNotShared(cached, sharing);\n    }\n    const config = this.chart.config;\n    const scopeKeys = config.datasetElementScopeKeys(this._type, elementType);\n    const prefixes = active ? [`${elementType}Hover`, 'hover', elementType, ''] : [elementType, ''];\n    const scopes = config.getOptionScopes(this.getDataset(), scopeKeys);\n    const names = Object.keys(defaults.elements[elementType]);\n    const context = () => this.getContext(index, active);\n    const values = config.resolveNamedOptions(scopes, names, context, prefixes);\n    if (values.$shared) {\n      values.$shared = sharing;\n      cache[cacheKey] = Object.freeze(cloneIfNotShared(values, sharing));\n    }\n    return values;\n  }\n  _resolveAnimations(index, transition, active) {\n    const chart = this.chart;\n    const cache = this._cachedDataOpts;\n    const cacheKey = `animation-${transition}`;\n    const cached = cache[cacheKey];\n    if (cached) {\n      return cached;\n    }\n    let options;\n    if (chart.options.animation !== false) {\n      const config = this.chart.config;\n      const scopeKeys = config.datasetAnimationScopeKeys(this._type, transition);\n      const scopes = config.getOptionScopes(this.getDataset(), scopeKeys);\n      options = config.createResolver(scopes, this.getContext(index, active, transition));\n    }\n    const animations = new Animations(chart, options && options.animations);\n    if (options && options._cacheable) {\n      cache[cacheKey] = Object.freeze(animations);\n    }\n    return animations;\n  }\n  getSharedOptions(options) {\n    if (!options.$shared) {\n      return;\n    }\n    return this._sharedOptions || (this._sharedOptions = Object.assign({}, options));\n  }\n  includeOptions(mode, sharedOptions) {\n    return !sharedOptions || isDirectUpdateMode(mode) || this.chart._animationsDisabled;\n  }\n  _getSharedOptions(start, mode) {\n    const firstOpts = this.resolveDataElementOptions(start, mode);\n    const previouslySharedOptions = this._sharedOptions;\n    const sharedOptions = this.getSharedOptions(firstOpts);\n    const includeOptions = this.includeOptions(mode, sharedOptions) || (sharedOptions !== previouslySharedOptions);\n    this.updateSharedOptions(sharedOptions, mode, firstOpts);\n    return {sharedOptions, includeOptions};\n  }\n  updateElement(element, index, properties, mode) {\n    if (isDirectUpdateMode(mode)) {\n      Object.assign(element, properties);\n    } else {\n      this._resolveAnimations(index, mode).update(element, properties);\n    }\n  }\n  updateSharedOptions(sharedOptions, mode, newOptions) {\n    if (sharedOptions && !isDirectUpdateMode(mode)) {\n      this._resolveAnimations(undefined, mode).update(sharedOptions, newOptions);\n    }\n  }\n  _setStyle(element, index, mode, active) {\n    element.active = active;\n    const options = this.getStyle(index, active);\n    this._resolveAnimations(index, mode, active).update(element, {\n      options: (!active && this.getSharedOptions(options)) || options\n    });\n  }\n  removeHoverStyle(element, datasetIndex, index) {\n    this._setStyle(element, index, 'active', false);\n  }\n  setHoverStyle(element, datasetIndex, index) {\n    this._setStyle(element, index, 'active', true);\n  }\n  _removeDatasetHoverStyle() {\n    const element = this._cachedMeta.dataset;\n    if (element) {\n      this._setStyle(element, undefined, 'active', false);\n    }\n  }\n  _setDatasetHoverStyle() {\n    const element = this._cachedMeta.dataset;\n    if (element) {\n      this._setStyle(element, undefined, 'active', true);\n    }\n  }\n  _resyncElements(resetNewElements) {\n    const data = this._data;\n    const elements = this._cachedMeta.data;\n    for (const [method, arg1, arg2] of this._syncList) {\n      this[method](arg1, arg2);\n    }\n    this._syncList = [];\n    const numMeta = elements.length;\n    const numData = data.length;\n    const count = Math.min(numData, numMeta);\n    if (count) {\n      this.parse(0, count);\n    }\n    if (numData > numMeta) {\n      this._insertElements(numMeta, numData - numMeta, resetNewElements);\n    } else if (numData < numMeta) {\n      this._removeElements(numData, numMeta - numData);\n    }\n  }\n  _insertElements(start, count, resetNewElements = true) {\n    const meta = this._cachedMeta;\n    const data = meta.data;\n    const end = start + count;\n    let i;\n    const move = (arr) => {\n      arr.length += count;\n      for (i = arr.length - 1; i >= end; i--) {\n        arr[i] = arr[i - count];\n      }\n    };\n    move(data);\n    for (i = start; i < end; ++i) {\n      data[i] = new this.dataElementType();\n    }\n    if (this._parsing) {\n      move(meta._parsed);\n    }\n    this.parse(start, count);\n    if (resetNewElements) {\n      this.updateElements(data, start, count, 'reset');\n    }\n  }\n  updateElements(element, start, count, mode) {}\n  _removeElements(start, count) {\n    const meta = this._cachedMeta;\n    if (this._parsing) {\n      const removed = meta._parsed.splice(start, count);\n      if (meta._stacked) {\n        clearStacks(meta, removed);\n      }\n    }\n    meta.data.splice(start, count);\n  }\n  _sync(args) {\n    if (this._parsing) {\n      this._syncList.push(args);\n    } else {\n      const [method, arg1, arg2] = args;\n      this[method](arg1, arg2);\n    }\n    this.chart._dataChanges.push([this.index, ...args]);\n  }\n  _onDataPush() {\n    const count = arguments.length;\n    this._sync(['_insertElements', this.getDataset().data.length - count, count]);\n  }\n  _onDataPop() {\n    this._sync(['_removeElements', this._cachedMeta.data.length - 1, 1]);\n  }\n  _onDataShift() {\n    this._sync(['_removeElements', 0, 1]);\n  }\n  _onDataSplice(start, count) {\n    if (count) {\n      this._sync(['_removeElements', start, count]);\n    }\n    const newCount = arguments.length - 2;\n    if (newCount) {\n      this._sync(['_insertElements', start, newCount]);\n    }\n  }\n  _onDataUnshift() {\n    this._sync(['_insertElements', 0, arguments.length]);\n  }\n}\nDatasetController.defaults = {};\nDatasetController.prototype.datasetElementType = null;\nDatasetController.prototype.dataElementType = null;\n\nfunction getAllScaleValues(scale, type) {\n  if (!scale._cache.$bar) {\n    const visibleMetas = scale.getMatchingVisibleMetas(type);\n    let values = [];\n    for (let i = 0, ilen = visibleMetas.length; i < ilen; i++) {\n      values = values.concat(visibleMetas[i].controller.getAllParsedValues(scale));\n    }\n    scale._cache.$bar = _arrayUnique(values.sort((a, b) => a - b));\n  }\n  return scale._cache.$bar;\n}\nfunction computeMinSampleSize(meta) {\n  const scale = meta.iScale;\n  const values = getAllScaleValues(scale, meta.type);\n  let min = scale._length;\n  let i, ilen, curr, prev;\n  const updateMinAndPrev = () => {\n    if (curr === 32767 || curr === -32768) {\n      return;\n    }\n    if (defined(prev)) {\n      min = Math.min(min, Math.abs(curr - prev) || min);\n    }\n    prev = curr;\n  };\n  for (i = 0, ilen = values.length; i < ilen; ++i) {\n    curr = scale.getPixelForValue(values[i]);\n    updateMinAndPrev();\n  }\n  prev = undefined;\n  for (i = 0, ilen = scale.ticks.length; i < ilen; ++i) {\n    curr = scale.getPixelForTick(i);\n    updateMinAndPrev();\n  }\n  return min;\n}\nfunction computeFitCategoryTraits(index, ruler, options, stackCount) {\n  const thickness = options.barThickness;\n  let size, ratio;\n  if (isNullOrUndef(thickness)) {\n    size = ruler.min * options.categoryPercentage;\n    ratio = options.barPercentage;\n  } else {\n    size = thickness * stackCount;\n    ratio = 1;\n  }\n  return {\n    chunk: size / stackCount,\n    ratio,\n    start: ruler.pixels[index] - (size / 2)\n  };\n}\nfunction computeFlexCategoryTraits(index, ruler, options, stackCount) {\n  const pixels = ruler.pixels;\n  const curr = pixels[index];\n  let prev = index > 0 ? pixels[index - 1] : null;\n  let next = index < pixels.length - 1 ? pixels[index + 1] : null;\n  const percent = options.categoryPercentage;\n  if (prev === null) {\n    prev = curr - (next === null ? ruler.end - ruler.start : next - curr);\n  }\n  if (next === null) {\n    next = curr + curr - prev;\n  }\n  const start = curr - (curr - Math.min(prev, next)) / 2 * percent;\n  const size = Math.abs(next - prev) / 2 * percent;\n  return {\n    chunk: size / stackCount,\n    ratio: options.barPercentage,\n    start\n  };\n}\nfunction parseFloatBar(entry, item, vScale, i) {\n  const startValue = vScale.parse(entry[0], i);\n  const endValue = vScale.parse(entry[1], i);\n  const min = Math.min(startValue, endValue);\n  const max = Math.max(startValue, endValue);\n  let barStart = min;\n  let barEnd = max;\n  if (Math.abs(min) > Math.abs(max)) {\n    barStart = max;\n    barEnd = min;\n  }\n  item[vScale.axis] = barEnd;\n  item._custom = {\n    barStart,\n    barEnd,\n    start: startValue,\n    end: endValue,\n    min,\n    max\n  };\n}\nfunction parseValue(entry, item, vScale, i) {\n  if (isArray(entry)) {\n    parseFloatBar(entry, item, vScale, i);\n  } else {\n    item[vScale.axis] = vScale.parse(entry, i);\n  }\n  return item;\n}\nfunction parseArrayOrPrimitive(meta, data, start, count) {\n  const iScale = meta.iScale;\n  const vScale = meta.vScale;\n  const labels = iScale.getLabels();\n  const singleScale = iScale === vScale;\n  const parsed = [];\n  let i, ilen, item, entry;\n  for (i = start, ilen = start + count; i < ilen; ++i) {\n    entry = data[i];\n    item = {};\n    item[iScale.axis] = singleScale || iScale.parse(labels[i], i);\n    parsed.push(parseValue(entry, item, vScale, i));\n  }\n  return parsed;\n}\nfunction isFloatBar(custom) {\n  return custom && custom.barStart !== undefined && custom.barEnd !== undefined;\n}\nfunction barSign(size, vScale, actualBase) {\n  if (size !== 0) {\n    return sign(size);\n  }\n  return (vScale.isHorizontal() ? 1 : -1) * (vScale.min >= actualBase ? 1 : -1);\n}\nfunction borderProps(properties) {\n  let reverse, start, end, top, bottom;\n  if (properties.horizontal) {\n    reverse = properties.base > properties.x;\n    start = 'left';\n    end = 'right';\n  } else {\n    reverse = properties.base < properties.y;\n    start = 'bottom';\n    end = 'top';\n  }\n  if (reverse) {\n    top = 'end';\n    bottom = 'start';\n  } else {\n    top = 'start';\n    bottom = 'end';\n  }\n  return {start, end, reverse, top, bottom};\n}\nfunction setBorderSkipped(properties, options, stack, index) {\n  let edge = options.borderSkipped;\n  const res = {};\n  if (!edge) {\n    properties.borderSkipped = res;\n    return;\n  }\n  if (edge === true) {\n    properties.borderSkipped = {top: true, right: true, bottom: true, left: true};\n    return;\n  }\n  const {start, end, reverse, top, bottom} = borderProps(properties);\n  if (edge === 'middle' && stack) {\n    properties.enableBorderRadius = true;\n    if ((stack._top || 0) === index) {\n      edge = top;\n    } else if ((stack._bottom || 0) === index) {\n      edge = bottom;\n    } else {\n      res[parseEdge(bottom, start, end, reverse)] = true;\n      edge = top;\n    }\n  }\n  res[parseEdge(edge, start, end, reverse)] = true;\n  properties.borderSkipped = res;\n}\nfunction parseEdge(edge, a, b, reverse) {\n  if (reverse) {\n    edge = swap(edge, a, b);\n    edge = startEnd(edge, b, a);\n  } else {\n    edge = startEnd(edge, a, b);\n  }\n  return edge;\n}\nfunction swap(orig, v1, v2) {\n  return orig === v1 ? v2 : orig === v2 ? v1 : orig;\n}\nfunction startEnd(v, start, end) {\n  return v === 'start' ? start : v === 'end' ? end : v;\n}\nfunction setInflateAmount(properties, {inflateAmount}, ratio) {\n  properties.inflateAmount = inflateAmount === 'auto'\n    ? ratio === 1 ? 0.33 : 0\n    : inflateAmount;\n}\nclass BarController extends DatasetController {\n  parsePrimitiveData(meta, data, start, count) {\n    return parseArrayOrPrimitive(meta, data, start, count);\n  }\n  parseArrayData(meta, data, start, count) {\n    return parseArrayOrPrimitive(meta, data, start, count);\n  }\n  parseObjectData(meta, data, start, count) {\n    const {iScale, vScale} = meta;\n    const {xAxisKey = 'x', yAxisKey = 'y'} = this._parsing;\n    const iAxisKey = iScale.axis === 'x' ? xAxisKey : yAxisKey;\n    const vAxisKey = vScale.axis === 'x' ? xAxisKey : yAxisKey;\n    const parsed = [];\n    let i, ilen, item, obj;\n    for (i = start, ilen = start + count; i < ilen; ++i) {\n      obj = data[i];\n      item = {};\n      item[iScale.axis] = iScale.parse(resolveObjectKey(obj, iAxisKey), i);\n      parsed.push(parseValue(resolveObjectKey(obj, vAxisKey), item, vScale, i));\n    }\n    return parsed;\n  }\n  updateRangeFromParsed(range, scale, parsed, stack) {\n    super.updateRangeFromParsed(range, scale, parsed, stack);\n    const custom = parsed._custom;\n    if (custom && scale === this._cachedMeta.vScale) {\n      range.min = Math.min(range.min, custom.min);\n      range.max = Math.max(range.max, custom.max);\n    }\n  }\n  getMaxOverflow() {\n    return 0;\n  }\n  getLabelAndValue(index) {\n    const meta = this._cachedMeta;\n    const {iScale, vScale} = meta;\n    const parsed = this.getParsed(index);\n    const custom = parsed._custom;\n    const value = isFloatBar(custom)\n      ? '[' + custom.start + ', ' + custom.end + ']'\n      : '' + vScale.getLabelForValue(parsed[vScale.axis]);\n    return {\n      label: '' + iScale.getLabelForValue(parsed[iScale.axis]),\n      value\n    };\n  }\n  initialize() {\n    this.enableOptionSharing = true;\n    super.initialize();\n    const meta = this._cachedMeta;\n    meta.stack = this.getDataset().stack;\n  }\n  update(mode) {\n    const meta = this._cachedMeta;\n    this.updateElements(meta.data, 0, meta.data.length, mode);\n  }\n  updateElements(bars, start, count, mode) {\n    const reset = mode === 'reset';\n    const {index, _cachedMeta: {vScale}} = this;\n    const base = vScale.getBasePixel();\n    const horizontal = vScale.isHorizontal();\n    const ruler = this._getRuler();\n    const {sharedOptions, includeOptions} = this._getSharedOptions(start, mode);\n    for (let i = start; i < start + count; i++) {\n      const parsed = this.getParsed(i);\n      const vpixels = reset || isNullOrUndef(parsed[vScale.axis]) ? {base, head: base} : this._calculateBarValuePixels(i);\n      const ipixels = this._calculateBarIndexPixels(i, ruler);\n      const stack = (parsed._stacks || {})[vScale.axis];\n      const properties = {\n        horizontal,\n        base: vpixels.base,\n        enableBorderRadius: !stack || isFloatBar(parsed._custom) || (index === stack._top || index === stack._bottom),\n        x: horizontal ? vpixels.head : ipixels.center,\n        y: horizontal ? ipixels.center : vpixels.head,\n        height: horizontal ? ipixels.size : Math.abs(vpixels.size),\n        width: horizontal ? Math.abs(vpixels.size) : ipixels.size\n      };\n      if (includeOptions) {\n        properties.options = sharedOptions || this.resolveDataElementOptions(i, bars[i].active ? 'active' : mode);\n      }\n      const options = properties.options || bars[i].options;\n      setBorderSkipped(properties, options, stack, index);\n      setInflateAmount(properties, options, ruler.ratio);\n      this.updateElement(bars[i], i, properties, mode);\n    }\n  }\n  _getStacks(last, dataIndex) {\n    const {iScale} = this._cachedMeta;\n    const metasets = iScale.getMatchingVisibleMetas(this._type)\n      .filter(meta => meta.controller.options.grouped);\n    const stacked = iScale.options.stacked;\n    const stacks = [];\n    const skipNull = (meta) => {\n      const parsed = meta.controller.getParsed(dataIndex);\n      const val = parsed && parsed[meta.vScale.axis];\n      if (isNullOrUndef(val) || isNaN(val)) {\n        return true;\n      }\n    };\n    for (const meta of metasets) {\n      if (dataIndex !== undefined && skipNull(meta)) {\n        continue;\n      }\n      if (stacked === false || stacks.indexOf(meta.stack) === -1 ||\n\t\t\t\t(stacked === undefined && meta.stack === undefined)) {\n        stacks.push(meta.stack);\n      }\n      if (meta.index === last) {\n        break;\n      }\n    }\n    if (!stacks.length) {\n      stacks.push(undefined);\n    }\n    return stacks;\n  }\n  _getStackCount(index) {\n    return this._getStacks(undefined, index).length;\n  }\n  _getStackIndex(datasetIndex, name, dataIndex) {\n    const stacks = this._getStacks(datasetIndex, dataIndex);\n    const index = (name !== undefined)\n      ? stacks.indexOf(name)\n      : -1;\n    return (index === -1)\n      ? stacks.length - 1\n      : index;\n  }\n  _getRuler() {\n    const opts = this.options;\n    const meta = this._cachedMeta;\n    const iScale = meta.iScale;\n    const pixels = [];\n    let i, ilen;\n    for (i = 0, ilen = meta.data.length; i < ilen; ++i) {\n      pixels.push(iScale.getPixelForValue(this.getParsed(i)[iScale.axis], i));\n    }\n    const barThickness = opts.barThickness;\n    const min = barThickness || computeMinSampleSize(meta);\n    return {\n      min,\n      pixels,\n      start: iScale._startPixel,\n      end: iScale._endPixel,\n      stackCount: this._getStackCount(),\n      scale: iScale,\n      grouped: opts.grouped,\n      ratio: barThickness ? 1 : opts.categoryPercentage * opts.barPercentage\n    };\n  }\n  _calculateBarValuePixels(index) {\n    const {_cachedMeta: {vScale, _stacked}, options: {base: baseValue, minBarLength}} = this;\n    const actualBase = baseValue || 0;\n    const parsed = this.getParsed(index);\n    const custom = parsed._custom;\n    const floating = isFloatBar(custom);\n    let value = parsed[vScale.axis];\n    let start = 0;\n    let length = _stacked ? this.applyStack(vScale, parsed, _stacked) : value;\n    let head, size;\n    if (length !== value) {\n      start = length - value;\n      length = value;\n    }\n    if (floating) {\n      value = custom.barStart;\n      length = custom.barEnd - custom.barStart;\n      if (value !== 0 && sign(value) !== sign(custom.barEnd)) {\n        start = 0;\n      }\n      start += value;\n    }\n    const startValue = !isNullOrUndef(baseValue) && !floating ? baseValue : start;\n    let base = vScale.getPixelForValue(startValue);\n    if (this.chart.getDataVisibility(index)) {\n      head = vScale.getPixelForValue(start + length);\n    } else {\n      head = base;\n    }\n    size = head - base;\n    if (Math.abs(size) < minBarLength) {\n      size = barSign(size, vScale, actualBase) * minBarLength;\n      if (value === actualBase) {\n        base -= size / 2;\n      }\n      const startPixel = vScale.getPixelForDecimal(0);\n      const endPixel = vScale.getPixelForDecimal(1);\n      const min = Math.min(startPixel, endPixel);\n      const max = Math.max(startPixel, endPixel);\n      base = Math.max(Math.min(base, max), min);\n      head = base + size;\n    }\n    if (base === vScale.getPixelForValue(actualBase)) {\n      const halfGrid = sign(size) * vScale.getLineWidthForValue(actualBase) / 2;\n      base += halfGrid;\n      size -= halfGrid;\n    }\n    return {\n      size,\n      base,\n      head,\n      center: head + size / 2\n    };\n  }\n  _calculateBarIndexPixels(index, ruler) {\n    const scale = ruler.scale;\n    const options = this.options;\n    const skipNull = options.skipNull;\n    const maxBarThickness = valueOrDefault(options.maxBarThickness, Infinity);\n    let center, size;\n    if (ruler.grouped) {\n      const stackCount = skipNull ? this._getStackCount(index) : ruler.stackCount;\n      const range = options.barThickness === 'flex'\n        ? computeFlexCategoryTraits(index, ruler, options, stackCount)\n        : computeFitCategoryTraits(index, ruler, options, stackCount);\n      const stackIndex = this._getStackIndex(this.index, this._cachedMeta.stack, skipNull ? index : undefined);\n      center = range.start + (range.chunk * stackIndex) + (range.chunk / 2);\n      size = Math.min(maxBarThickness, range.chunk * range.ratio);\n    } else {\n      center = scale.getPixelForValue(this.getParsed(index)[scale.axis], index);\n      size = Math.min(maxBarThickness, ruler.min * ruler.ratio);\n    }\n    return {\n      base: center - size / 2,\n      head: center + size / 2,\n      center,\n      size\n    };\n  }\n  draw() {\n    const meta = this._cachedMeta;\n    const vScale = meta.vScale;\n    const rects = meta.data;\n    const ilen = rects.length;\n    let i = 0;\n    for (; i < ilen; ++i) {\n      if (this.getParsed(i)[vScale.axis] !== null) {\n        rects[i].draw(this._ctx);\n      }\n    }\n  }\n}\nBarController.id = 'bar';\nBarController.defaults = {\n  datasetElementType: false,\n  dataElementType: 'bar',\n  categoryPercentage: 0.8,\n  barPercentage: 0.9,\n  grouped: true,\n  animations: {\n    numbers: {\n      type: 'number',\n      properties: ['x', 'y', 'base', 'width', 'height']\n    }\n  }\n};\nBarController.overrides = {\n  scales: {\n    _index_: {\n      type: 'category',\n      offset: true,\n      grid: {\n        offset: true\n      }\n    },\n    _value_: {\n      type: 'linear',\n      beginAtZero: true,\n    }\n  }\n};\n\nclass BubbleController extends DatasetController {\n  initialize() {\n    this.enableOptionSharing = true;\n    super.initialize();\n  }\n  parsePrimitiveData(meta, data, start, count) {\n    const parsed = super.parsePrimitiveData(meta, data, start, count);\n    for (let i = 0; i < parsed.length; i++) {\n      parsed[i]._custom = this.resolveDataElementOptions(i + start).radius;\n    }\n    return parsed;\n  }\n  parseArrayData(meta, data, start, count) {\n    const parsed = super.parseArrayData(meta, data, start, count);\n    for (let i = 0; i < parsed.length; i++) {\n      const item = data[start + i];\n      parsed[i]._custom = valueOrDefault(item[2], this.resolveDataElementOptions(i + start).radius);\n    }\n    return parsed;\n  }\n  parseObjectData(meta, data, start, count) {\n    const parsed = super.parseObjectData(meta, data, start, count);\n    for (let i = 0; i < parsed.length; i++) {\n      const item = data[start + i];\n      parsed[i]._custom = valueOrDefault(item && item.r && +item.r, this.resolveDataElementOptions(i + start).radius);\n    }\n    return parsed;\n  }\n  getMaxOverflow() {\n    const data = this._cachedMeta.data;\n    let max = 0;\n    for (let i = data.length - 1; i >= 0; --i) {\n      max = Math.max(max, data[i].size(this.resolveDataElementOptions(i)) / 2);\n    }\n    return max > 0 && max;\n  }\n  getLabelAndValue(index) {\n    const meta = this._cachedMeta;\n    const {xScale, yScale} = meta;\n    const parsed = this.getParsed(index);\n    const x = xScale.getLabelForValue(parsed.x);\n    const y = yScale.getLabelForValue(parsed.y);\n    const r = parsed._custom;\n    return {\n      label: meta.label,\n      value: '(' + x + ', ' + y + (r ? ', ' + r : '') + ')'\n    };\n  }\n  update(mode) {\n    const points = this._cachedMeta.data;\n    this.updateElements(points, 0, points.length, mode);\n  }\n  updateElements(points, start, count, mode) {\n    const reset = mode === 'reset';\n    const {iScale, vScale} = this._cachedMeta;\n    const {sharedOptions, includeOptions} = this._getSharedOptions(start, mode);\n    const iAxis = iScale.axis;\n    const vAxis = vScale.axis;\n    for (let i = start; i < start + count; i++) {\n      const point = points[i];\n      const parsed = !reset && this.getParsed(i);\n      const properties = {};\n      const iPixel = properties[iAxis] = reset ? iScale.getPixelForDecimal(0.5) : iScale.getPixelForValue(parsed[iAxis]);\n      const vPixel = properties[vAxis] = reset ? vScale.getBasePixel() : vScale.getPixelForValue(parsed[vAxis]);\n      properties.skip = isNaN(iPixel) || isNaN(vPixel);\n      if (includeOptions) {\n        properties.options = sharedOptions || this.resolveDataElementOptions(i, point.active ? 'active' : mode);\n        if (reset) {\n          properties.options.radius = 0;\n        }\n      }\n      this.updateElement(point, i, properties, mode);\n    }\n  }\n  resolveDataElementOptions(index, mode) {\n    const parsed = this.getParsed(index);\n    let values = super.resolveDataElementOptions(index, mode);\n    if (values.$shared) {\n      values = Object.assign({}, values, {$shared: false});\n    }\n    const radius = values.radius;\n    if (mode !== 'active') {\n      values.radius = 0;\n    }\n    values.radius += valueOrDefault(parsed && parsed._custom, radius);\n    return values;\n  }\n}\nBubbleController.id = 'bubble';\nBubbleController.defaults = {\n  datasetElementType: false,\n  dataElementType: 'point',\n  animations: {\n    numbers: {\n      type: 'number',\n      properties: ['x', 'y', 'borderWidth', 'radius']\n    }\n  }\n};\nBubbleController.overrides = {\n  scales: {\n    x: {\n      type: 'linear'\n    },\n    y: {\n      type: 'linear'\n    }\n  },\n  plugins: {\n    tooltip: {\n      callbacks: {\n        title() {\n          return '';\n        }\n      }\n    }\n  }\n};\n\nfunction getRatioAndOffset(rotation, circumference, cutout) {\n  let ratioX = 1;\n  let ratioY = 1;\n  let offsetX = 0;\n  let offsetY = 0;\n  if (circumference < TAU) {\n    const startAngle = rotation;\n    const endAngle = startAngle + circumference;\n    const startX = Math.cos(startAngle);\n    const startY = Math.sin(startAngle);\n    const endX = Math.cos(endAngle);\n    const endY = Math.sin(endAngle);\n    const calcMax = (angle, a, b) => _angleBetween(angle, startAngle, endAngle, true) ? 1 : Math.max(a, a * cutout, b, b * cutout);\n    const calcMin = (angle, a, b) => _angleBetween(angle, startAngle, endAngle, true) ? -1 : Math.min(a, a * cutout, b, b * cutout);\n    const maxX = calcMax(0, startX, endX);\n    const maxY = calcMax(HALF_PI, startY, endY);\n    const minX = calcMin(PI, startX, endX);\n    const minY = calcMin(PI + HALF_PI, startY, endY);\n    ratioX = (maxX - minX) / 2;\n    ratioY = (maxY - minY) / 2;\n    offsetX = -(maxX + minX) / 2;\n    offsetY = -(maxY + minY) / 2;\n  }\n  return {ratioX, ratioY, offsetX, offsetY};\n}\nclass DoughnutController extends DatasetController {\n  constructor(chart, datasetIndex) {\n    super(chart, datasetIndex);\n    this.enableOptionSharing = true;\n    this.innerRadius = undefined;\n    this.outerRadius = undefined;\n    this.offsetX = undefined;\n    this.offsetY = undefined;\n  }\n  linkScales() {}\n  parse(start, count) {\n    const data = this.getDataset().data;\n    const meta = this._cachedMeta;\n    if (this._parsing === false) {\n      meta._parsed = data;\n    } else {\n      let getter = (i) => +data[i];\n      if (isObject(data[start])) {\n        const {key = 'value'} = this._parsing;\n        getter = (i) => +resolveObjectKey(data[i], key);\n      }\n      let i, ilen;\n      for (i = start, ilen = start + count; i < ilen; ++i) {\n        meta._parsed[i] = getter(i);\n      }\n    }\n  }\n  _getRotation() {\n    return toRadians(this.options.rotation - 90);\n  }\n  _getCircumference() {\n    return toRadians(this.options.circumference);\n  }\n  _getRotationExtents() {\n    let min = TAU;\n    let max = -TAU;\n    for (let i = 0; i < this.chart.data.datasets.length; ++i) {\n      if (this.chart.isDatasetVisible(i)) {\n        const controller = this.chart.getDatasetMeta(i).controller;\n        const rotation = controller._getRotation();\n        const circumference = controller._getCircumference();\n        min = Math.min(min, rotation);\n        max = Math.max(max, rotation + circumference);\n      }\n    }\n    return {\n      rotation: min,\n      circumference: max - min,\n    };\n  }\n  update(mode) {\n    const chart = this.chart;\n    const {chartArea} = chart;\n    const meta = this._cachedMeta;\n    const arcs = meta.data;\n    const spacing = this.getMaxBorderWidth() + this.getMaxOffset(arcs) + this.options.spacing;\n    const maxSize = Math.max((Math.min(chartArea.width, chartArea.height) - spacing) / 2, 0);\n    const cutout = Math.min(toPercentage(this.options.cutout, maxSize), 1);\n    const chartWeight = this._getRingWeight(this.index);\n    const {circumference, rotation} = this._getRotationExtents();\n    const {ratioX, ratioY, offsetX, offsetY} = getRatioAndOffset(rotation, circumference, cutout);\n    const maxWidth = (chartArea.width - spacing) / ratioX;\n    const maxHeight = (chartArea.height - spacing) / ratioY;\n    const maxRadius = Math.max(Math.min(maxWidth, maxHeight) / 2, 0);\n    const outerRadius = toDimension(this.options.radius, maxRadius);\n    const innerRadius = Math.max(outerRadius * cutout, 0);\n    const radiusLength = (outerRadius - innerRadius) / this._getVisibleDatasetWeightTotal();\n    this.offsetX = offsetX * outerRadius;\n    this.offsetY = offsetY * outerRadius;\n    meta.total = this.calculateTotal();\n    this.outerRadius = outerRadius - radiusLength * this._getRingWeightOffset(this.index);\n    this.innerRadius = Math.max(this.outerRadius - radiusLength * chartWeight, 0);\n    this.updateElements(arcs, 0, arcs.length, mode);\n  }\n  _circumference(i, reset) {\n    const opts = this.options;\n    const meta = this._cachedMeta;\n    const circumference = this._getCircumference();\n    if ((reset && opts.animation.animateRotate) || !this.chart.getDataVisibility(i) || meta._parsed[i] === null || meta.data[i].hidden) {\n      return 0;\n    }\n    return this.calculateCircumference(meta._parsed[i] * circumference / TAU);\n  }\n  updateElements(arcs, start, count, mode) {\n    const reset = mode === 'reset';\n    const chart = this.chart;\n    const chartArea = chart.chartArea;\n    const opts = chart.options;\n    const animationOpts = opts.animation;\n    const centerX = (chartArea.left + chartArea.right) / 2;\n    const centerY = (chartArea.top + chartArea.bottom) / 2;\n    const animateScale = reset && animationOpts.animateScale;\n    const innerRadius = animateScale ? 0 : this.innerRadius;\n    const outerRadius = animateScale ? 0 : this.outerRadius;\n    const {sharedOptions, includeOptions} = this._getSharedOptions(start, mode);\n    let startAngle = this._getRotation();\n    let i;\n    for (i = 0; i < start; ++i) {\n      startAngle += this._circumference(i, reset);\n    }\n    for (i = start; i < start + count; ++i) {\n      const circumference = this._circumference(i, reset);\n      const arc = arcs[i];\n      const properties = {\n        x: centerX + this.offsetX,\n        y: centerY + this.offsetY,\n        startAngle,\n        endAngle: startAngle + circumference,\n        circumference,\n        outerRadius,\n        innerRadius\n      };\n      if (includeOptions) {\n        properties.options = sharedOptions || this.resolveDataElementOptions(i, arc.active ? 'active' : mode);\n      }\n      startAngle += circumference;\n      this.updateElement(arc, i, properties, mode);\n    }\n  }\n  calculateTotal() {\n    const meta = this._cachedMeta;\n    const metaData = meta.data;\n    let total = 0;\n    let i;\n    for (i = 0; i < metaData.length; i++) {\n      const value = meta._parsed[i];\n      if (value !== null && !isNaN(value) && this.chart.getDataVisibility(i) && !metaData[i].hidden) {\n        total += Math.abs(value);\n      }\n    }\n    return total;\n  }\n  calculateCircumference(value) {\n    const total = this._cachedMeta.total;\n    if (total > 0 && !isNaN(value)) {\n      return TAU * (Math.abs(value) / total);\n    }\n    return 0;\n  }\n  getLabelAndValue(index) {\n    const meta = this._cachedMeta;\n    const chart = this.chart;\n    const labels = chart.data.labels || [];\n    const value = formatNumber(meta._parsed[index], chart.options.locale);\n    return {\n      label: labels[index] || '',\n      value,\n    };\n  }\n  getMaxBorderWidth(arcs) {\n    let max = 0;\n    const chart = this.chart;\n    let i, ilen, meta, controller, options;\n    if (!arcs) {\n      for (i = 0, ilen = chart.data.datasets.length; i < ilen; ++i) {\n        if (chart.isDatasetVisible(i)) {\n          meta = chart.getDatasetMeta(i);\n          arcs = meta.data;\n          controller = meta.controller;\n          break;\n        }\n      }\n    }\n    if (!arcs) {\n      return 0;\n    }\n    for (i = 0, ilen = arcs.length; i < ilen; ++i) {\n      options = controller.resolveDataElementOptions(i);\n      if (options.borderAlign !== 'inner') {\n        max = Math.max(max, options.borderWidth || 0, options.hoverBorderWidth || 0);\n      }\n    }\n    return max;\n  }\n  getMaxOffset(arcs) {\n    let max = 0;\n    for (let i = 0, ilen = arcs.length; i < ilen; ++i) {\n      const options = this.resolveDataElementOptions(i);\n      max = Math.max(max, options.offset || 0, options.hoverOffset || 0);\n    }\n    return max;\n  }\n  _getRingWeightOffset(datasetIndex) {\n    let ringWeightOffset = 0;\n    for (let i = 0; i < datasetIndex; ++i) {\n      if (this.chart.isDatasetVisible(i)) {\n        ringWeightOffset += this._getRingWeight(i);\n      }\n    }\n    return ringWeightOffset;\n  }\n  _getRingWeight(datasetIndex) {\n    return Math.max(valueOrDefault(this.chart.data.datasets[datasetIndex].weight, 1), 0);\n  }\n  _getVisibleDatasetWeightTotal() {\n    return this._getRingWeightOffset(this.chart.data.datasets.length) || 1;\n  }\n}\nDoughnutController.id = 'doughnut';\nDoughnutController.defaults = {\n  datasetElementType: false,\n  dataElementType: 'arc',\n  animation: {\n    animateRotate: true,\n    animateScale: false\n  },\n  animations: {\n    numbers: {\n      type: 'number',\n      properties: ['circumference', 'endAngle', 'innerRadius', 'outerRadius', 'startAngle', 'x', 'y', 'offset', 'borderWidth', 'spacing']\n    },\n  },\n  cutout: '50%',\n  rotation: 0,\n  circumference: 360,\n  radius: '100%',\n  spacing: 0,\n  indexAxis: 'r',\n};\nDoughnutController.descriptors = {\n  _scriptable: (name) => name !== 'spacing',\n  _indexable: (name) => name !== 'spacing',\n};\nDoughnutController.overrides = {\n  aspectRatio: 1,\n  plugins: {\n    legend: {\n      labels: {\n        generateLabels(chart) {\n          const data = chart.data;\n          if (data.labels.length && data.datasets.length) {\n            const {labels: {pointStyle}} = chart.legend.options;\n            return data.labels.map((label, i) => {\n              const meta = chart.getDatasetMeta(0);\n              const style = meta.controller.getStyle(i);\n              return {\n                text: label,\n                fillStyle: style.backgroundColor,\n                strokeStyle: style.borderColor,\n                lineWidth: style.borderWidth,\n                pointStyle: pointStyle,\n                hidden: !chart.getDataVisibility(i),\n                index: i\n              };\n            });\n          }\n          return [];\n        }\n      },\n      onClick(e, legendItem, legend) {\n        legend.chart.toggleDataVisibility(legendItem.index);\n        legend.chart.update();\n      }\n    },\n    tooltip: {\n      callbacks: {\n        title() {\n          return '';\n        },\n        label(tooltipItem) {\n          let dataLabel = tooltipItem.label;\n          const value = ': ' + tooltipItem.formattedValue;\n          if (isArray(dataLabel)) {\n            dataLabel = dataLabel.slice();\n            dataLabel[0] += value;\n          } else {\n            dataLabel += value;\n          }\n          return dataLabel;\n        }\n      }\n    }\n  }\n};\n\nclass LineController extends DatasetController {\n  initialize() {\n    this.enableOptionSharing = true;\n    this.supportsDecimation = true;\n    super.initialize();\n  }\n  update(mode) {\n    const meta = this._cachedMeta;\n    const {dataset: line, data: points = [], _dataset} = meta;\n    const animationsDisabled = this.chart._animationsDisabled;\n    let {start, count} = _getStartAndCountOfVisiblePoints(meta, points, animationsDisabled);\n    this._drawStart = start;\n    this._drawCount = count;\n    if (_scaleRangesChanged(meta)) {\n      start = 0;\n      count = points.length;\n    }\n    line._chart = this.chart;\n    line._datasetIndex = this.index;\n    line._decimated = !!_dataset._decimated;\n    line.points = points;\n    const options = this.resolveDatasetElementOptions(mode);\n    if (!this.options.showLine) {\n      options.borderWidth = 0;\n    }\n    options.segment = this.options.segment;\n    this.updateElement(line, undefined, {\n      animated: !animationsDisabled,\n      options\n    }, mode);\n    this.updateElements(points, start, count, mode);\n  }\n  updateElements(points, start, count, mode) {\n    const reset = mode === 'reset';\n    const {iScale, vScale, _stacked, _dataset} = this._cachedMeta;\n    const {sharedOptions, includeOptions} = this._getSharedOptions(start, mode);\n    const iAxis = iScale.axis;\n    const vAxis = vScale.axis;\n    const {spanGaps, segment} = this.options;\n    const maxGapLength = isNumber(spanGaps) ? spanGaps : Number.POSITIVE_INFINITY;\n    const directUpdate = this.chart._animationsDisabled || reset || mode === 'none';\n    let prevParsed = start > 0 && this.getParsed(start - 1);\n    for (let i = start; i < start + count; ++i) {\n      const point = points[i];\n      const parsed = this.getParsed(i);\n      const properties = directUpdate ? point : {};\n      const nullData = isNullOrUndef(parsed[vAxis]);\n      const iPixel = properties[iAxis] = iScale.getPixelForValue(parsed[iAxis], i);\n      const vPixel = properties[vAxis] = reset || nullData ? vScale.getBasePixel() : vScale.getPixelForValue(_stacked ? this.applyStack(vScale, parsed, _stacked) : parsed[vAxis], i);\n      properties.skip = isNaN(iPixel) || isNaN(vPixel) || nullData;\n      properties.stop = i > 0 && (Math.abs(parsed[iAxis] - prevParsed[iAxis])) > maxGapLength;\n      if (segment) {\n        properties.parsed = parsed;\n        properties.raw = _dataset.data[i];\n      }\n      if (includeOptions) {\n        properties.options = sharedOptions || this.resolveDataElementOptions(i, point.active ? 'active' : mode);\n      }\n      if (!directUpdate) {\n        this.updateElement(point, i, properties, mode);\n      }\n      prevParsed = parsed;\n    }\n  }\n  getMaxOverflow() {\n    const meta = this._cachedMeta;\n    const dataset = meta.dataset;\n    const border = dataset.options && dataset.options.borderWidth || 0;\n    const data = meta.data || [];\n    if (!data.length) {\n      return border;\n    }\n    const firstPoint = data[0].size(this.resolveDataElementOptions(0));\n    const lastPoint = data[data.length - 1].size(this.resolveDataElementOptions(data.length - 1));\n    return Math.max(border, firstPoint, lastPoint) / 2;\n  }\n  draw() {\n    const meta = this._cachedMeta;\n    meta.dataset.updateControlPoints(this.chart.chartArea, meta.iScale.axis);\n    super.draw();\n  }\n}\nLineController.id = 'line';\nLineController.defaults = {\n  datasetElementType: 'line',\n  dataElementType: 'point',\n  showLine: true,\n  spanGaps: false,\n};\nLineController.overrides = {\n  scales: {\n    _index_: {\n      type: 'category',\n    },\n    _value_: {\n      type: 'linear',\n    },\n  }\n};\n\nclass PolarAreaController extends DatasetController {\n  constructor(chart, datasetIndex) {\n    super(chart, datasetIndex);\n    this.innerRadius = undefined;\n    this.outerRadius = undefined;\n  }\n  getLabelAndValue(index) {\n    const meta = this._cachedMeta;\n    const chart = this.chart;\n    const labels = chart.data.labels || [];\n    const value = formatNumber(meta._parsed[index].r, chart.options.locale);\n    return {\n      label: labels[index] || '',\n      value,\n    };\n  }\n  parseObjectData(meta, data, start, count) {\n    return _parseObjectDataRadialScale.bind(this)(meta, data, start, count);\n  }\n  update(mode) {\n    const arcs = this._cachedMeta.data;\n    this._updateRadius();\n    this.updateElements(arcs, 0, arcs.length, mode);\n  }\n  getMinMax() {\n    const meta = this._cachedMeta;\n    const range = {min: Number.POSITIVE_INFINITY, max: Number.NEGATIVE_INFINITY};\n    meta.data.forEach((element, index) => {\n      const parsed = this.getParsed(index).r;\n      if (!isNaN(parsed) && this.chart.getDataVisibility(index)) {\n        if (parsed < range.min) {\n          range.min = parsed;\n        }\n        if (parsed > range.max) {\n          range.max = parsed;\n        }\n      }\n    });\n    return range;\n  }\n  _updateRadius() {\n    const chart = this.chart;\n    const chartArea = chart.chartArea;\n    const opts = chart.options;\n    const minSize = Math.min(chartArea.right - chartArea.left, chartArea.bottom - chartArea.top);\n    const outerRadius = Math.max(minSize / 2, 0);\n    const innerRadius = Math.max(opts.cutoutPercentage ? (outerRadius / 100) * (opts.cutoutPercentage) : 1, 0);\n    const radiusLength = (outerRadius - innerRadius) / chart.getVisibleDatasetCount();\n    this.outerRadius = outerRadius - (radiusLength * this.index);\n    this.innerRadius = this.outerRadius - radiusLength;\n  }\n  updateElements(arcs, start, count, mode) {\n    const reset = mode === 'reset';\n    const chart = this.chart;\n    const opts = chart.options;\n    const animationOpts = opts.animation;\n    const scale = this._cachedMeta.rScale;\n    const centerX = scale.xCenter;\n    const centerY = scale.yCenter;\n    const datasetStartAngle = scale.getIndexAngle(0) - 0.5 * PI;\n    let angle = datasetStartAngle;\n    let i;\n    const defaultAngle = 360 / this.countVisibleElements();\n    for (i = 0; i < start; ++i) {\n      angle += this._computeAngle(i, mode, defaultAngle);\n    }\n    for (i = start; i < start + count; i++) {\n      const arc = arcs[i];\n      let startAngle = angle;\n      let endAngle = angle + this._computeAngle(i, mode, defaultAngle);\n      let outerRadius = chart.getDataVisibility(i) ? scale.getDistanceFromCenterForValue(this.getParsed(i).r) : 0;\n      angle = endAngle;\n      if (reset) {\n        if (animationOpts.animateScale) {\n          outerRadius = 0;\n        }\n        if (animationOpts.animateRotate) {\n          startAngle = endAngle = datasetStartAngle;\n        }\n      }\n      const properties = {\n        x: centerX,\n        y: centerY,\n        innerRadius: 0,\n        outerRadius,\n        startAngle,\n        endAngle,\n        options: this.resolveDataElementOptions(i, arc.active ? 'active' : mode)\n      };\n      this.updateElement(arc, i, properties, mode);\n    }\n  }\n  countVisibleElements() {\n    const meta = this._cachedMeta;\n    let count = 0;\n    meta.data.forEach((element, index) => {\n      if (!isNaN(this.getParsed(index).r) && this.chart.getDataVisibility(index)) {\n        count++;\n      }\n    });\n    return count;\n  }\n  _computeAngle(index, mode, defaultAngle) {\n    return this.chart.getDataVisibility(index)\n      ? toRadians(this.resolveDataElementOptions(index, mode).angle || defaultAngle)\n      : 0;\n  }\n}\nPolarAreaController.id = 'polarArea';\nPolarAreaController.defaults = {\n  dataElementType: 'arc',\n  animation: {\n    animateRotate: true,\n    animateScale: true\n  },\n  animations: {\n    numbers: {\n      type: 'number',\n      properties: ['x', 'y', 'startAngle', 'endAngle', 'innerRadius', 'outerRadius']\n    },\n  },\n  indexAxis: 'r',\n  startAngle: 0,\n};\nPolarAreaController.overrides = {\n  aspectRatio: 1,\n  plugins: {\n    legend: {\n      labels: {\n        generateLabels(chart) {\n          const data = chart.data;\n          if (data.labels.length && data.datasets.length) {\n            const {labels: {pointStyle}} = chart.legend.options;\n            return data.labels.map((label, i) => {\n              const meta = chart.getDatasetMeta(0);\n              const style = meta.controller.getStyle(i);\n              return {\n                text: label,\n                fillStyle: style.backgroundColor,\n                strokeStyle: style.borderColor,\n                lineWidth: style.borderWidth,\n                pointStyle: pointStyle,\n                hidden: !chart.getDataVisibility(i),\n                index: i\n              };\n            });\n          }\n          return [];\n        }\n      },\n      onClick(e, legendItem, legend) {\n        legend.chart.toggleDataVisibility(legendItem.index);\n        legend.chart.update();\n      }\n    },\n    tooltip: {\n      callbacks: {\n        title() {\n          return '';\n        },\n        label(context) {\n          return context.chart.data.labels[context.dataIndex] + ': ' + context.formattedValue;\n        }\n      }\n    }\n  },\n  scales: {\n    r: {\n      type: 'radialLinear',\n      angleLines: {\n        display: false\n      },\n      beginAtZero: true,\n      grid: {\n        circular: true\n      },\n      pointLabels: {\n        display: false\n      },\n      startAngle: 0\n    }\n  }\n};\n\nclass PieController extends DoughnutController {\n}\nPieController.id = 'pie';\nPieController.defaults = {\n  cutout: 0,\n  rotation: 0,\n  circumference: 360,\n  radius: '100%'\n};\n\nclass RadarController extends DatasetController {\n  getLabelAndValue(index) {\n    const vScale = this._cachedMeta.vScale;\n    const parsed = this.getParsed(index);\n    return {\n      label: vScale.getLabels()[index],\n      value: '' + vScale.getLabelForValue(parsed[vScale.axis])\n    };\n  }\n  parseObjectData(meta, data, start, count) {\n    return _parseObjectDataRadialScale.bind(this)(meta, data, start, count);\n  }\n  update(mode) {\n    const meta = this._cachedMeta;\n    const line = meta.dataset;\n    const points = meta.data || [];\n    const labels = meta.iScale.getLabels();\n    line.points = points;\n    if (mode !== 'resize') {\n      const options = this.resolveDatasetElementOptions(mode);\n      if (!this.options.showLine) {\n        options.borderWidth = 0;\n      }\n      const properties = {\n        _loop: true,\n        _fullLoop: labels.length === points.length,\n        options\n      };\n      this.updateElement(line, undefined, properties, mode);\n    }\n    this.updateElements(points, 0, points.length, mode);\n  }\n  updateElements(points, start, count, mode) {\n    const scale = this._cachedMeta.rScale;\n    const reset = mode === 'reset';\n    for (let i = start; i < start + count; i++) {\n      const point = points[i];\n      const options = this.resolveDataElementOptions(i, point.active ? 'active' : mode);\n      const pointPosition = scale.getPointPositionForValue(i, this.getParsed(i).r);\n      const x = reset ? scale.xCenter : pointPosition.x;\n      const y = reset ? scale.yCenter : pointPosition.y;\n      const properties = {\n        x,\n        y,\n        angle: pointPosition.angle,\n        skip: isNaN(x) || isNaN(y),\n        options\n      };\n      this.updateElement(point, i, properties, mode);\n    }\n  }\n}\nRadarController.id = 'radar';\nRadarController.defaults = {\n  datasetElementType: 'line',\n  dataElementType: 'point',\n  indexAxis: 'r',\n  showLine: true,\n  elements: {\n    line: {\n      fill: 'start'\n    }\n  },\n};\nRadarController.overrides = {\n  aspectRatio: 1,\n  scales: {\n    r: {\n      type: 'radialLinear',\n    }\n  }\n};\n\nclass Element {\n  constructor() {\n    this.x = undefined;\n    this.y = undefined;\n    this.active = false;\n    this.options = undefined;\n    this.$animations = undefined;\n  }\n  tooltipPosition(useFinalPosition) {\n    const {x, y} = this.getProps(['x', 'y'], useFinalPosition);\n    return {x, y};\n  }\n  hasValue() {\n    return isNumber(this.x) && isNumber(this.y);\n  }\n  getProps(props, final) {\n    const anims = this.$animations;\n    if (!final || !anims) {\n      return this;\n    }\n    const ret = {};\n    props.forEach(prop => {\n      ret[prop] = anims[prop] && anims[prop].active() ? anims[prop]._to : this[prop];\n    });\n    return ret;\n  }\n}\nElement.defaults = {};\nElement.defaultRoutes = undefined;\n\nconst formatters = {\n  values(value) {\n    return isArray(value) ? value : '' + value;\n  },\n  numeric(tickValue, index, ticks) {\n    if (tickValue === 0) {\n      return '0';\n    }\n    const locale = this.chart.options.locale;\n    let notation;\n    let delta = tickValue;\n    if (ticks.length > 1) {\n      const maxTick = Math.max(Math.abs(ticks[0].value), Math.abs(ticks[ticks.length - 1].value));\n      if (maxTick < 1e-4 || maxTick > 1e+15) {\n        notation = 'scientific';\n      }\n      delta = calculateDelta(tickValue, ticks);\n    }\n    const logDelta = log10(Math.abs(delta));\n    const numDecimal = Math.max(Math.min(-1 * Math.floor(logDelta), 20), 0);\n    const options = {notation, minimumFractionDigits: numDecimal, maximumFractionDigits: numDecimal};\n    Object.assign(options, this.options.ticks.format);\n    return formatNumber(tickValue, locale, options);\n  },\n  logarithmic(tickValue, index, ticks) {\n    if (tickValue === 0) {\n      return '0';\n    }\n    const remain = tickValue / (Math.pow(10, Math.floor(log10(tickValue))));\n    if (remain === 1 || remain === 2 || remain === 5) {\n      return formatters.numeric.call(this, tickValue, index, ticks);\n    }\n    return '';\n  }\n};\nfunction calculateDelta(tickValue, ticks) {\n  let delta = ticks.length > 3 ? ticks[2].value - ticks[1].value : ticks[1].value - ticks[0].value;\n  if (Math.abs(delta) >= 1 && tickValue !== Math.floor(tickValue)) {\n    delta = tickValue - Math.floor(tickValue);\n  }\n  return delta;\n}\nvar Ticks = {formatters};\n\ndefaults.set('scale', {\n  display: true,\n  offset: false,\n  reverse: false,\n  beginAtZero: false,\n  bounds: 'ticks',\n  grace: 0,\n  grid: {\n    display: true,\n    lineWidth: 1,\n    drawBorder: true,\n    drawOnChartArea: true,\n    drawTicks: true,\n    tickLength: 8,\n    tickWidth: (_ctx, options) => options.lineWidth,\n    tickColor: (_ctx, options) => options.color,\n    offset: false,\n    borderDash: [],\n    borderDashOffset: 0.0,\n    borderWidth: 1\n  },\n  title: {\n    display: false,\n    text: '',\n    padding: {\n      top: 4,\n      bottom: 4\n    }\n  },\n  ticks: {\n    minRotation: 0,\n    maxRotation: 50,\n    mirror: false,\n    textStrokeWidth: 0,\n    textStrokeColor: '',\n    padding: 3,\n    display: true,\n    autoSkip: true,\n    autoSkipPadding: 3,\n    labelOffset: 0,\n    callback: Ticks.formatters.values,\n    minor: {},\n    major: {},\n    align: 'center',\n    crossAlign: 'near',\n    showLabelBackdrop: false,\n    backdropColor: 'rgba(255, 255, 255, 0.75)',\n    backdropPadding: 2,\n  }\n});\ndefaults.route('scale.ticks', 'color', '', 'color');\ndefaults.route('scale.grid', 'color', '', 'borderColor');\ndefaults.route('scale.grid', 'borderColor', '', 'borderColor');\ndefaults.route('scale.title', 'color', '', 'color');\ndefaults.describe('scale', {\n  _fallback: false,\n  _scriptable: (name) => !name.startsWith('before') && !name.startsWith('after') && name !== 'callback' && name !== 'parser',\n  _indexable: (name) => name !== 'borderDash' && name !== 'tickBorderDash',\n});\ndefaults.describe('scales', {\n  _fallback: 'scale',\n});\ndefaults.describe('scale.ticks', {\n  _scriptable: (name) => name !== 'backdropPadding' && name !== 'callback',\n  _indexable: (name) => name !== 'backdropPadding',\n});\n\nfunction autoSkip(scale, ticks) {\n  const tickOpts = scale.options.ticks;\n  const ticksLimit = tickOpts.maxTicksLimit || determineMaxTicks(scale);\n  const majorIndices = tickOpts.major.enabled ? getMajorIndices(ticks) : [];\n  const numMajorIndices = majorIndices.length;\n  const first = majorIndices[0];\n  const last = majorIndices[numMajorIndices - 1];\n  const newTicks = [];\n  if (numMajorIndices > ticksLimit) {\n    skipMajors(ticks, newTicks, majorIndices, numMajorIndices / ticksLimit);\n    return newTicks;\n  }\n  const spacing = calculateSpacing(majorIndices, ticks, ticksLimit);\n  if (numMajorIndices > 0) {\n    let i, ilen;\n    const avgMajorSpacing = numMajorIndices > 1 ? Math.round((last - first) / (numMajorIndices - 1)) : null;\n    skip(ticks, newTicks, spacing, isNullOrUndef(avgMajorSpacing) ? 0 : first - avgMajorSpacing, first);\n    for (i = 0, ilen = numMajorIndices - 1; i < ilen; i++) {\n      skip(ticks, newTicks, spacing, majorIndices[i], majorIndices[i + 1]);\n    }\n    skip(ticks, newTicks, spacing, last, isNullOrUndef(avgMajorSpacing) ? ticks.length : last + avgMajorSpacing);\n    return newTicks;\n  }\n  skip(ticks, newTicks, spacing);\n  return newTicks;\n}\nfunction determineMaxTicks(scale) {\n  const offset = scale.options.offset;\n  const tickLength = scale._tickSize();\n  const maxScale = scale._length / tickLength + (offset ? 0 : 1);\n  const maxChart = scale._maxLength / tickLength;\n  return Math.floor(Math.min(maxScale, maxChart));\n}\nfunction calculateSpacing(majorIndices, ticks, ticksLimit) {\n  const evenMajorSpacing = getEvenSpacing(majorIndices);\n  const spacing = ticks.length / ticksLimit;\n  if (!evenMajorSpacing) {\n    return Math.max(spacing, 1);\n  }\n  const factors = _factorize(evenMajorSpacing);\n  for (let i = 0, ilen = factors.length - 1; i < ilen; i++) {\n    const factor = factors[i];\n    if (factor > spacing) {\n      return factor;\n    }\n  }\n  return Math.max(spacing, 1);\n}\nfunction getMajorIndices(ticks) {\n  const result = [];\n  let i, ilen;\n  for (i = 0, ilen = ticks.length; i < ilen; i++) {\n    if (ticks[i].major) {\n      result.push(i);\n    }\n  }\n  return result;\n}\nfunction skipMajors(ticks, newTicks, majorIndices, spacing) {\n  let count = 0;\n  let next = majorIndices[0];\n  let i;\n  spacing = Math.ceil(spacing);\n  for (i = 0; i < ticks.length; i++) {\n    if (i === next) {\n      newTicks.push(ticks[i]);\n      count++;\n      next = majorIndices[count * spacing];\n    }\n  }\n}\nfunction skip(ticks, newTicks, spacing, majorStart, majorEnd) {\n  const start = valueOrDefault(majorStart, 0);\n  const end = Math.min(valueOrDefault(majorEnd, ticks.length), ticks.length);\n  let count = 0;\n  let length, i, next;\n  spacing = Math.ceil(spacing);\n  if (majorEnd) {\n    length = majorEnd - majorStart;\n    spacing = length / Math.floor(length / spacing);\n  }\n  next = start;\n  while (next < 0) {\n    count++;\n    next = Math.round(start + count * spacing);\n  }\n  for (i = Math.max(start, 0); i < end; i++) {\n    if (i === next) {\n      newTicks.push(ticks[i]);\n      count++;\n      next = Math.round(start + count * spacing);\n    }\n  }\n}\nfunction getEvenSpacing(arr) {\n  const len = arr.length;\n  let i, diff;\n  if (len < 2) {\n    return false;\n  }\n  for (diff = arr[0], i = 1; i < len; ++i) {\n    if (arr[i] - arr[i - 1] !== diff) {\n      return false;\n    }\n  }\n  return diff;\n}\n\nconst reverseAlign = (align) => align === 'left' ? 'right' : align === 'right' ? 'left' : align;\nconst offsetFromEdge = (scale, edge, offset) => edge === 'top' || edge === 'left' ? scale[edge] + offset : scale[edge] - offset;\nfunction sample(arr, numItems) {\n  const result = [];\n  const increment = arr.length / numItems;\n  const len = arr.length;\n  let i = 0;\n  for (; i < len; i += increment) {\n    result.push(arr[Math.floor(i)]);\n  }\n  return result;\n}\nfunction getPixelForGridLine(scale, index, offsetGridLines) {\n  const length = scale.ticks.length;\n  const validIndex = Math.min(index, length - 1);\n  const start = scale._startPixel;\n  const end = scale._endPixel;\n  const epsilon = 1e-6;\n  let lineValue = scale.getPixelForTick(validIndex);\n  let offset;\n  if (offsetGridLines) {\n    if (length === 1) {\n      offset = Math.max(lineValue - start, end - lineValue);\n    } else if (index === 0) {\n      offset = (scale.getPixelForTick(1) - lineValue) / 2;\n    } else {\n      offset = (lineValue - scale.getPixelForTick(validIndex - 1)) / 2;\n    }\n    lineValue += validIndex < index ? offset : -offset;\n    if (lineValue < start - epsilon || lineValue > end + epsilon) {\n      return;\n    }\n  }\n  return lineValue;\n}\nfunction garbageCollect(caches, length) {\n  each(caches, (cache) => {\n    const gc = cache.gc;\n    const gcLen = gc.length / 2;\n    let i;\n    if (gcLen > length) {\n      for (i = 0; i < gcLen; ++i) {\n        delete cache.data[gc[i]];\n      }\n      gc.splice(0, gcLen);\n    }\n  });\n}\nfunction getTickMarkLength(options) {\n  return options.drawTicks ? options.tickLength : 0;\n}\nfunction getTitleHeight(options, fallback) {\n  if (!options.display) {\n    return 0;\n  }\n  const font = toFont(options.font, fallback);\n  const padding = toPadding(options.padding);\n  const lines = isArray(options.text) ? options.text.length : 1;\n  return (lines * font.lineHeight) + padding.height;\n}\nfunction createScaleContext(parent, scale) {\n  return createContext(parent, {\n    scale,\n    type: 'scale'\n  });\n}\nfunction createTickContext(parent, index, tick) {\n  return createContext(parent, {\n    tick,\n    index,\n    type: 'tick'\n  });\n}\nfunction titleAlign(align, position, reverse) {\n  let ret = _toLeftRightCenter(align);\n  if ((reverse && position !== 'right') || (!reverse && position === 'right')) {\n    ret = reverseAlign(ret);\n  }\n  return ret;\n}\nfunction titleArgs(scale, offset, position, align) {\n  const {top, left, bottom, right, chart} = scale;\n  const {chartArea, scales} = chart;\n  let rotation = 0;\n  let maxWidth, titleX, titleY;\n  const height = bottom - top;\n  const width = right - left;\n  if (scale.isHorizontal()) {\n    titleX = _alignStartEnd(align, left, right);\n    if (isObject(position)) {\n      const positionAxisID = Object.keys(position)[0];\n      const value = position[positionAxisID];\n      titleY = scales[positionAxisID].getPixelForValue(value) + height - offset;\n    } else if (position === 'center') {\n      titleY = (chartArea.bottom + chartArea.top) / 2 + height - offset;\n    } else {\n      titleY = offsetFromEdge(scale, position, offset);\n    }\n    maxWidth = right - left;\n  } else {\n    if (isObject(position)) {\n      const positionAxisID = Object.keys(position)[0];\n      const value = position[positionAxisID];\n      titleX = scales[positionAxisID].getPixelForValue(value) - width + offset;\n    } else if (position === 'center') {\n      titleX = (chartArea.left + chartArea.right) / 2 - width + offset;\n    } else {\n      titleX = offsetFromEdge(scale, position, offset);\n    }\n    titleY = _alignStartEnd(align, bottom, top);\n    rotation = position === 'left' ? -HALF_PI : HALF_PI;\n  }\n  return {titleX, titleY, maxWidth, rotation};\n}\nclass Scale extends Element {\n  constructor(cfg) {\n    super();\n    this.id = cfg.id;\n    this.type = cfg.type;\n    this.options = undefined;\n    this.ctx = cfg.ctx;\n    this.chart = cfg.chart;\n    this.top = undefined;\n    this.bottom = undefined;\n    this.left = undefined;\n    this.right = undefined;\n    this.width = undefined;\n    this.height = undefined;\n    this._margins = {\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0\n    };\n    this.maxWidth = undefined;\n    this.maxHeight = undefined;\n    this.paddingTop = undefined;\n    this.paddingBottom = undefined;\n    this.paddingLeft = undefined;\n    this.paddingRight = undefined;\n    this.axis = undefined;\n    this.labelRotation = undefined;\n    this.min = undefined;\n    this.max = undefined;\n    this._range = undefined;\n    this.ticks = [];\n    this._gridLineItems = null;\n    this._labelItems = null;\n    this._labelSizes = null;\n    this._length = 0;\n    this._maxLength = 0;\n    this._longestTextCache = {};\n    this._startPixel = undefined;\n    this._endPixel = undefined;\n    this._reversePixels = false;\n    this._userMax = undefined;\n    this._userMin = undefined;\n    this._suggestedMax = undefined;\n    this._suggestedMin = undefined;\n    this._ticksLength = 0;\n    this._borderValue = 0;\n    this._cache = {};\n    this._dataLimitsCached = false;\n    this.$context = undefined;\n  }\n  init(options) {\n    this.options = options.setContext(this.getContext());\n    this.axis = options.axis;\n    this._userMin = this.parse(options.min);\n    this._userMax = this.parse(options.max);\n    this._suggestedMin = this.parse(options.suggestedMin);\n    this._suggestedMax = this.parse(options.suggestedMax);\n  }\n  parse(raw, index) {\n    return raw;\n  }\n  getUserBounds() {\n    let {_userMin, _userMax, _suggestedMin, _suggestedMax} = this;\n    _userMin = finiteOrDefault(_userMin, Number.POSITIVE_INFINITY);\n    _userMax = finiteOrDefault(_userMax, Number.NEGATIVE_INFINITY);\n    _suggestedMin = finiteOrDefault(_suggestedMin, Number.POSITIVE_INFINITY);\n    _suggestedMax = finiteOrDefault(_suggestedMax, Number.NEGATIVE_INFINITY);\n    return {\n      min: finiteOrDefault(_userMin, _suggestedMin),\n      max: finiteOrDefault(_userMax, _suggestedMax),\n      minDefined: isNumberFinite(_userMin),\n      maxDefined: isNumberFinite(_userMax)\n    };\n  }\n  getMinMax(canStack) {\n    let {min, max, minDefined, maxDefined} = this.getUserBounds();\n    let range;\n    if (minDefined && maxDefined) {\n      return {min, max};\n    }\n    const metas = this.getMatchingVisibleMetas();\n    for (let i = 0, ilen = metas.length; i < ilen; ++i) {\n      range = metas[i].controller.getMinMax(this, canStack);\n      if (!minDefined) {\n        min = Math.min(min, range.min);\n      }\n      if (!maxDefined) {\n        max = Math.max(max, range.max);\n      }\n    }\n    min = maxDefined && min > max ? max : min;\n    max = minDefined && min > max ? min : max;\n    return {\n      min: finiteOrDefault(min, finiteOrDefault(max, min)),\n      max: finiteOrDefault(max, finiteOrDefault(min, max))\n    };\n  }\n  getPadding() {\n    return {\n      left: this.paddingLeft || 0,\n      top: this.paddingTop || 0,\n      right: this.paddingRight || 0,\n      bottom: this.paddingBottom || 0\n    };\n  }\n  getTicks() {\n    return this.ticks;\n  }\n  getLabels() {\n    const data = this.chart.data;\n    return this.options.labels || (this.isHorizontal() ? data.xLabels : data.yLabels) || data.labels || [];\n  }\n  beforeLayout() {\n    this._cache = {};\n    this._dataLimitsCached = false;\n  }\n  beforeUpdate() {\n    callback(this.options.beforeUpdate, [this]);\n  }\n  update(maxWidth, maxHeight, margins) {\n    const {beginAtZero, grace, ticks: tickOpts} = this.options;\n    const sampleSize = tickOpts.sampleSize;\n    this.beforeUpdate();\n    this.maxWidth = maxWidth;\n    this.maxHeight = maxHeight;\n    this._margins = margins = Object.assign({\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0\n    }, margins);\n    this.ticks = null;\n    this._labelSizes = null;\n    this._gridLineItems = null;\n    this._labelItems = null;\n    this.beforeSetDimensions();\n    this.setDimensions();\n    this.afterSetDimensions();\n    this._maxLength = this.isHorizontal()\n      ? this.width + margins.left + margins.right\n      : this.height + margins.top + margins.bottom;\n    if (!this._dataLimitsCached) {\n      this.beforeDataLimits();\n      this.determineDataLimits();\n      this.afterDataLimits();\n      this._range = _addGrace(this, grace, beginAtZero);\n      this._dataLimitsCached = true;\n    }\n    this.beforeBuildTicks();\n    this.ticks = this.buildTicks() || [];\n    this.afterBuildTicks();\n    const samplingEnabled = sampleSize < this.ticks.length;\n    this._convertTicksToLabels(samplingEnabled ? sample(this.ticks, sampleSize) : this.ticks);\n    this.configure();\n    this.beforeCalculateLabelRotation();\n    this.calculateLabelRotation();\n    this.afterCalculateLabelRotation();\n    if (tickOpts.display && (tickOpts.autoSkip || tickOpts.source === 'auto')) {\n      this.ticks = autoSkip(this, this.ticks);\n      this._labelSizes = null;\n      this.afterAutoSkip();\n    }\n    if (samplingEnabled) {\n      this._convertTicksToLabels(this.ticks);\n    }\n    this.beforeFit();\n    this.fit();\n    this.afterFit();\n    this.afterUpdate();\n  }\n  configure() {\n    let reversePixels = this.options.reverse;\n    let startPixel, endPixel;\n    if (this.isHorizontal()) {\n      startPixel = this.left;\n      endPixel = this.right;\n    } else {\n      startPixel = this.top;\n      endPixel = this.bottom;\n      reversePixels = !reversePixels;\n    }\n    this._startPixel = startPixel;\n    this._endPixel = endPixel;\n    this._reversePixels = reversePixels;\n    this._length = endPixel - startPixel;\n    this._alignToPixels = this.options.alignToPixels;\n  }\n  afterUpdate() {\n    callback(this.options.afterUpdate, [this]);\n  }\n  beforeSetDimensions() {\n    callback(this.options.beforeSetDimensions, [this]);\n  }\n  setDimensions() {\n    if (this.isHorizontal()) {\n      this.width = this.maxWidth;\n      this.left = 0;\n      this.right = this.width;\n    } else {\n      this.height = this.maxHeight;\n      this.top = 0;\n      this.bottom = this.height;\n    }\n    this.paddingLeft = 0;\n    this.paddingTop = 0;\n    this.paddingRight = 0;\n    this.paddingBottom = 0;\n  }\n  afterSetDimensions() {\n    callback(this.options.afterSetDimensions, [this]);\n  }\n  _callHooks(name) {\n    this.chart.notifyPlugins(name, this.getContext());\n    callback(this.options[name], [this]);\n  }\n  beforeDataLimits() {\n    this._callHooks('beforeDataLimits');\n  }\n  determineDataLimits() {}\n  afterDataLimits() {\n    this._callHooks('afterDataLimits');\n  }\n  beforeBuildTicks() {\n    this._callHooks('beforeBuildTicks');\n  }\n  buildTicks() {\n    return [];\n  }\n  afterBuildTicks() {\n    this._callHooks('afterBuildTicks');\n  }\n  beforeTickToLabelConversion() {\n    callback(this.options.beforeTickToLabelConversion, [this]);\n  }\n  generateTickLabels(ticks) {\n    const tickOpts = this.options.ticks;\n    let i, ilen, tick;\n    for (i = 0, ilen = ticks.length; i < ilen; i++) {\n      tick = ticks[i];\n      tick.label = callback(tickOpts.callback, [tick.value, i, ticks], this);\n    }\n  }\n  afterTickToLabelConversion() {\n    callback(this.options.afterTickToLabelConversion, [this]);\n  }\n  beforeCalculateLabelRotation() {\n    callback(this.options.beforeCalculateLabelRotation, [this]);\n  }\n  calculateLabelRotation() {\n    const options = this.options;\n    const tickOpts = options.ticks;\n    const numTicks = this.ticks.length;\n    const minRotation = tickOpts.minRotation || 0;\n    const maxRotation = tickOpts.maxRotation;\n    let labelRotation = minRotation;\n    let tickWidth, maxHeight, maxLabelDiagonal;\n    if (!this._isVisible() || !tickOpts.display || minRotation >= maxRotation || numTicks <= 1 || !this.isHorizontal()) {\n      this.labelRotation = minRotation;\n      return;\n    }\n    const labelSizes = this._getLabelSizes();\n    const maxLabelWidth = labelSizes.widest.width;\n    const maxLabelHeight = labelSizes.highest.height;\n    const maxWidth = _limitValue(this.chart.width - maxLabelWidth, 0, this.maxWidth);\n    tickWidth = options.offset ? this.maxWidth / numTicks : maxWidth / (numTicks - 1);\n    if (maxLabelWidth + 6 > tickWidth) {\n      tickWidth = maxWidth / (numTicks - (options.offset ? 0.5 : 1));\n      maxHeight = this.maxHeight - getTickMarkLength(options.grid)\n\t\t\t\t- tickOpts.padding - getTitleHeight(options.title, this.chart.options.font);\n      maxLabelDiagonal = Math.sqrt(maxLabelWidth * maxLabelWidth + maxLabelHeight * maxLabelHeight);\n      labelRotation = toDegrees(Math.min(\n        Math.asin(_limitValue((labelSizes.highest.height + 6) / tickWidth, -1, 1)),\n        Math.asin(_limitValue(maxHeight / maxLabelDiagonal, -1, 1)) - Math.asin(_limitValue(maxLabelHeight / maxLabelDiagonal, -1, 1))\n      ));\n      labelRotation = Math.max(minRotation, Math.min(maxRotation, labelRotation));\n    }\n    this.labelRotation = labelRotation;\n  }\n  afterCalculateLabelRotation() {\n    callback(this.options.afterCalculateLabelRotation, [this]);\n  }\n  afterAutoSkip() {}\n  beforeFit() {\n    callback(this.options.beforeFit, [this]);\n  }\n  fit() {\n    const minSize = {\n      width: 0,\n      height: 0\n    };\n    const {chart, options: {ticks: tickOpts, title: titleOpts, grid: gridOpts}} = this;\n    const display = this._isVisible();\n    const isHorizontal = this.isHorizontal();\n    if (display) {\n      const titleHeight = getTitleHeight(titleOpts, chart.options.font);\n      if (isHorizontal) {\n        minSize.width = this.maxWidth;\n        minSize.height = getTickMarkLength(gridOpts) + titleHeight;\n      } else {\n        minSize.height = this.maxHeight;\n        minSize.width = getTickMarkLength(gridOpts) + titleHeight;\n      }\n      if (tickOpts.display && this.ticks.length) {\n        const {first, last, widest, highest} = this._getLabelSizes();\n        const tickPadding = tickOpts.padding * 2;\n        const angleRadians = toRadians(this.labelRotation);\n        const cos = Math.cos(angleRadians);\n        const sin = Math.sin(angleRadians);\n        if (isHorizontal) {\n          const labelHeight = tickOpts.mirror ? 0 : sin * widest.width + cos * highest.height;\n          minSize.height = Math.min(this.maxHeight, minSize.height + labelHeight + tickPadding);\n        } else {\n          const labelWidth = tickOpts.mirror ? 0 : cos * widest.width + sin * highest.height;\n          minSize.width = Math.min(this.maxWidth, minSize.width + labelWidth + tickPadding);\n        }\n        this._calculatePadding(first, last, sin, cos);\n      }\n    }\n    this._handleMargins();\n    if (isHorizontal) {\n      this.width = this._length = chart.width - this._margins.left - this._margins.right;\n      this.height = minSize.height;\n    } else {\n      this.width = minSize.width;\n      this.height = this._length = chart.height - this._margins.top - this._margins.bottom;\n    }\n  }\n  _calculatePadding(first, last, sin, cos) {\n    const {ticks: {align, padding}, position} = this.options;\n    const isRotated = this.labelRotation !== 0;\n    const labelsBelowTicks = position !== 'top' && this.axis === 'x';\n    if (this.isHorizontal()) {\n      const offsetLeft = this.getPixelForTick(0) - this.left;\n      const offsetRight = this.right - this.getPixelForTick(this.ticks.length - 1);\n      let paddingLeft = 0;\n      let paddingRight = 0;\n      if (isRotated) {\n        if (labelsBelowTicks) {\n          paddingLeft = cos * first.width;\n          paddingRight = sin * last.height;\n        } else {\n          paddingLeft = sin * first.height;\n          paddingRight = cos * last.width;\n        }\n      } else if (align === 'start') {\n        paddingRight = last.width;\n      } else if (align === 'end') {\n        paddingLeft = first.width;\n      } else if (align !== 'inner') {\n        paddingLeft = first.width / 2;\n        paddingRight = last.width / 2;\n      }\n      this.paddingLeft = Math.max((paddingLeft - offsetLeft + padding) * this.width / (this.width - offsetLeft), 0);\n      this.paddingRight = Math.max((paddingRight - offsetRight + padding) * this.width / (this.width - offsetRight), 0);\n    } else {\n      let paddingTop = last.height / 2;\n      let paddingBottom = first.height / 2;\n      if (align === 'start') {\n        paddingTop = 0;\n        paddingBottom = first.height;\n      } else if (align === 'end') {\n        paddingTop = last.height;\n        paddingBottom = 0;\n      }\n      this.paddingTop = paddingTop + padding;\n      this.paddingBottom = paddingBottom + padding;\n    }\n  }\n  _handleMargins() {\n    if (this._margins) {\n      this._margins.left = Math.max(this.paddingLeft, this._margins.left);\n      this._margins.top = Math.max(this.paddingTop, this._margins.top);\n      this._margins.right = Math.max(this.paddingRight, this._margins.right);\n      this._margins.bottom = Math.max(this.paddingBottom, this._margins.bottom);\n    }\n  }\n  afterFit() {\n    callback(this.options.afterFit, [this]);\n  }\n  isHorizontal() {\n    const {axis, position} = this.options;\n    return position === 'top' || position === 'bottom' || axis === 'x';\n  }\n  isFullSize() {\n    return this.options.fullSize;\n  }\n  _convertTicksToLabels(ticks) {\n    this.beforeTickToLabelConversion();\n    this.generateTickLabels(ticks);\n    let i, ilen;\n    for (i = 0, ilen = ticks.length; i < ilen; i++) {\n      if (isNullOrUndef(ticks[i].label)) {\n        ticks.splice(i, 1);\n        ilen--;\n        i--;\n      }\n    }\n    this.afterTickToLabelConversion();\n  }\n  _getLabelSizes() {\n    let labelSizes = this._labelSizes;\n    if (!labelSizes) {\n      const sampleSize = this.options.ticks.sampleSize;\n      let ticks = this.ticks;\n      if (sampleSize < ticks.length) {\n        ticks = sample(ticks, sampleSize);\n      }\n      this._labelSizes = labelSizes = this._computeLabelSizes(ticks, ticks.length);\n    }\n    return labelSizes;\n  }\n  _computeLabelSizes(ticks, length) {\n    const {ctx, _longestTextCache: caches} = this;\n    const widths = [];\n    const heights = [];\n    let widestLabelSize = 0;\n    let highestLabelSize = 0;\n    let i, j, jlen, label, tickFont, fontString, cache, lineHeight, width, height, nestedLabel;\n    for (i = 0; i < length; ++i) {\n      label = ticks[i].label;\n      tickFont = this._resolveTickFontOptions(i);\n      ctx.font = fontString = tickFont.string;\n      cache = caches[fontString] = caches[fontString] || {data: {}, gc: []};\n      lineHeight = tickFont.lineHeight;\n      width = height = 0;\n      if (!isNullOrUndef(label) && !isArray(label)) {\n        width = _measureText(ctx, cache.data, cache.gc, width, label);\n        height = lineHeight;\n      } else if (isArray(label)) {\n        for (j = 0, jlen = label.length; j < jlen; ++j) {\n          nestedLabel = label[j];\n          if (!isNullOrUndef(nestedLabel) && !isArray(nestedLabel)) {\n            width = _measureText(ctx, cache.data, cache.gc, width, nestedLabel);\n            height += lineHeight;\n          }\n        }\n      }\n      widths.push(width);\n      heights.push(height);\n      widestLabelSize = Math.max(width, widestLabelSize);\n      highestLabelSize = Math.max(height, highestLabelSize);\n    }\n    garbageCollect(caches, length);\n    const widest = widths.indexOf(widestLabelSize);\n    const highest = heights.indexOf(highestLabelSize);\n    const valueAt = (idx) => ({width: widths[idx] || 0, height: heights[idx] || 0});\n    return {\n      first: valueAt(0),\n      last: valueAt(length - 1),\n      widest: valueAt(widest),\n      highest: valueAt(highest),\n      widths,\n      heights,\n    };\n  }\n  getLabelForValue(value) {\n    return value;\n  }\n  getPixelForValue(value, index) {\n    return NaN;\n  }\n  getValueForPixel(pixel) {}\n  getPixelForTick(index) {\n    const ticks = this.ticks;\n    if (index < 0 || index > ticks.length - 1) {\n      return null;\n    }\n    return this.getPixelForValue(ticks[index].value);\n  }\n  getPixelForDecimal(decimal) {\n    if (this._reversePixels) {\n      decimal = 1 - decimal;\n    }\n    const pixel = this._startPixel + decimal * this._length;\n    return _int16Range(this._alignToPixels ? _alignPixel(this.chart, pixel, 0) : pixel);\n  }\n  getDecimalForPixel(pixel) {\n    const decimal = (pixel - this._startPixel) / this._length;\n    return this._reversePixels ? 1 - decimal : decimal;\n  }\n  getBasePixel() {\n    return this.getPixelForValue(this.getBaseValue());\n  }\n  getBaseValue() {\n    const {min, max} = this;\n    return min < 0 && max < 0 ? max :\n      min > 0 && max > 0 ? min :\n      0;\n  }\n  getContext(index) {\n    const ticks = this.ticks || [];\n    if (index >= 0 && index < ticks.length) {\n      const tick = ticks[index];\n      return tick.$context ||\n\t\t\t\t(tick.$context = createTickContext(this.getContext(), index, tick));\n    }\n    return this.$context ||\n\t\t\t(this.$context = createScaleContext(this.chart.getContext(), this));\n  }\n  _tickSize() {\n    const optionTicks = this.options.ticks;\n    const rot = toRadians(this.labelRotation);\n    const cos = Math.abs(Math.cos(rot));\n    const sin = Math.abs(Math.sin(rot));\n    const labelSizes = this._getLabelSizes();\n    const padding = optionTicks.autoSkipPadding || 0;\n    const w = labelSizes ? labelSizes.widest.width + padding : 0;\n    const h = labelSizes ? labelSizes.highest.height + padding : 0;\n    return this.isHorizontal()\n      ? h * cos > w * sin ? w / cos : h / sin\n      : h * sin < w * cos ? h / cos : w / sin;\n  }\n  _isVisible() {\n    const display = this.options.display;\n    if (display !== 'auto') {\n      return !!display;\n    }\n    return this.getMatchingVisibleMetas().length > 0;\n  }\n  _computeGridLineItems(chartArea) {\n    const axis = this.axis;\n    const chart = this.chart;\n    const options = this.options;\n    const {grid, position} = options;\n    const offset = grid.offset;\n    const isHorizontal = this.isHorizontal();\n    const ticks = this.ticks;\n    const ticksLength = ticks.length + (offset ? 1 : 0);\n    const tl = getTickMarkLength(grid);\n    const items = [];\n    const borderOpts = grid.setContext(this.getContext());\n    const axisWidth = borderOpts.drawBorder ? borderOpts.borderWidth : 0;\n    const axisHalfWidth = axisWidth / 2;\n    const alignBorderValue = function(pixel) {\n      return _alignPixel(chart, pixel, axisWidth);\n    };\n    let borderValue, i, lineValue, alignedLineValue;\n    let tx1, ty1, tx2, ty2, x1, y1, x2, y2;\n    if (position === 'top') {\n      borderValue = alignBorderValue(this.bottom);\n      ty1 = this.bottom - tl;\n      ty2 = borderValue - axisHalfWidth;\n      y1 = alignBorderValue(chartArea.top) + axisHalfWidth;\n      y2 = chartArea.bottom;\n    } else if (position === 'bottom') {\n      borderValue = alignBorderValue(this.top);\n      y1 = chartArea.top;\n      y2 = alignBorderValue(chartArea.bottom) - axisHalfWidth;\n      ty1 = borderValue + axisHalfWidth;\n      ty2 = this.top + tl;\n    } else if (position === 'left') {\n      borderValue = alignBorderValue(this.right);\n      tx1 = this.right - tl;\n      tx2 = borderValue - axisHalfWidth;\n      x1 = alignBorderValue(chartArea.left) + axisHalfWidth;\n      x2 = chartArea.right;\n    } else if (position === 'right') {\n      borderValue = alignBorderValue(this.left);\n      x1 = chartArea.left;\n      x2 = alignBorderValue(chartArea.right) - axisHalfWidth;\n      tx1 = borderValue + axisHalfWidth;\n      tx2 = this.left + tl;\n    } else if (axis === 'x') {\n      if (position === 'center') {\n        borderValue = alignBorderValue((chartArea.top + chartArea.bottom) / 2 + 0.5);\n      } else if (isObject(position)) {\n        const positionAxisID = Object.keys(position)[0];\n        const value = position[positionAxisID];\n        borderValue = alignBorderValue(this.chart.scales[positionAxisID].getPixelForValue(value));\n      }\n      y1 = chartArea.top;\n      y2 = chartArea.bottom;\n      ty1 = borderValue + axisHalfWidth;\n      ty2 = ty1 + tl;\n    } else if (axis === 'y') {\n      if (position === 'center') {\n        borderValue = alignBorderValue((chartArea.left + chartArea.right) / 2);\n      } else if (isObject(position)) {\n        const positionAxisID = Object.keys(position)[0];\n        const value = position[positionAxisID];\n        borderValue = alignBorderValue(this.chart.scales[positionAxisID].getPixelForValue(value));\n      }\n      tx1 = borderValue - axisHalfWidth;\n      tx2 = tx1 - tl;\n      x1 = chartArea.left;\n      x2 = chartArea.right;\n    }\n    const limit = valueOrDefault(options.ticks.maxTicksLimit, ticksLength);\n    const step = Math.max(1, Math.ceil(ticksLength / limit));\n    for (i = 0; i < ticksLength; i += step) {\n      const optsAtIndex = grid.setContext(this.getContext(i));\n      const lineWidth = optsAtIndex.lineWidth;\n      const lineColor = optsAtIndex.color;\n      const borderDash = optsAtIndex.borderDash || [];\n      const borderDashOffset = optsAtIndex.borderDashOffset;\n      const tickWidth = optsAtIndex.tickWidth;\n      const tickColor = optsAtIndex.tickColor;\n      const tickBorderDash = optsAtIndex.tickBorderDash || [];\n      const tickBorderDashOffset = optsAtIndex.tickBorderDashOffset;\n      lineValue = getPixelForGridLine(this, i, offset);\n      if (lineValue === undefined) {\n        continue;\n      }\n      alignedLineValue = _alignPixel(chart, lineValue, lineWidth);\n      if (isHorizontal) {\n        tx1 = tx2 = x1 = x2 = alignedLineValue;\n      } else {\n        ty1 = ty2 = y1 = y2 = alignedLineValue;\n      }\n      items.push({\n        tx1,\n        ty1,\n        tx2,\n        ty2,\n        x1,\n        y1,\n        x2,\n        y2,\n        width: lineWidth,\n        color: lineColor,\n        borderDash,\n        borderDashOffset,\n        tickWidth,\n        tickColor,\n        tickBorderDash,\n        tickBorderDashOffset,\n      });\n    }\n    this._ticksLength = ticksLength;\n    this._borderValue = borderValue;\n    return items;\n  }\n  _computeLabelItems(chartArea) {\n    const axis = this.axis;\n    const options = this.options;\n    const {position, ticks: optionTicks} = options;\n    const isHorizontal = this.isHorizontal();\n    const ticks = this.ticks;\n    const {align, crossAlign, padding, mirror} = optionTicks;\n    const tl = getTickMarkLength(options.grid);\n    const tickAndPadding = tl + padding;\n    const hTickAndPadding = mirror ? -padding : tickAndPadding;\n    const rotation = -toRadians(this.labelRotation);\n    const items = [];\n    let i, ilen, tick, label, x, y, textAlign, pixel, font, lineHeight, lineCount, textOffset;\n    let textBaseline = 'middle';\n    if (position === 'top') {\n      y = this.bottom - hTickAndPadding;\n      textAlign = this._getXAxisLabelAlignment();\n    } else if (position === 'bottom') {\n      y = this.top + hTickAndPadding;\n      textAlign = this._getXAxisLabelAlignment();\n    } else if (position === 'left') {\n      const ret = this._getYAxisLabelAlignment(tl);\n      textAlign = ret.textAlign;\n      x = ret.x;\n    } else if (position === 'right') {\n      const ret = this._getYAxisLabelAlignment(tl);\n      textAlign = ret.textAlign;\n      x = ret.x;\n    } else if (axis === 'x') {\n      if (position === 'center') {\n        y = ((chartArea.top + chartArea.bottom) / 2) + tickAndPadding;\n      } else if (isObject(position)) {\n        const positionAxisID = Object.keys(position)[0];\n        const value = position[positionAxisID];\n        y = this.chart.scales[positionAxisID].getPixelForValue(value) + tickAndPadding;\n      }\n      textAlign = this._getXAxisLabelAlignment();\n    } else if (axis === 'y') {\n      if (position === 'center') {\n        x = ((chartArea.left + chartArea.right) / 2) - tickAndPadding;\n      } else if (isObject(position)) {\n        const positionAxisID = Object.keys(position)[0];\n        const value = position[positionAxisID];\n        x = this.chart.scales[positionAxisID].getPixelForValue(value);\n      }\n      textAlign = this._getYAxisLabelAlignment(tl).textAlign;\n    }\n    if (axis === 'y') {\n      if (align === 'start') {\n        textBaseline = 'top';\n      } else if (align === 'end') {\n        textBaseline = 'bottom';\n      }\n    }\n    const labelSizes = this._getLabelSizes();\n    for (i = 0, ilen = ticks.length; i < ilen; ++i) {\n      tick = ticks[i];\n      label = tick.label;\n      const optsAtIndex = optionTicks.setContext(this.getContext(i));\n      pixel = this.getPixelForTick(i) + optionTicks.labelOffset;\n      font = this._resolveTickFontOptions(i);\n      lineHeight = font.lineHeight;\n      lineCount = isArray(label) ? label.length : 1;\n      const halfCount = lineCount / 2;\n      const color = optsAtIndex.color;\n      const strokeColor = optsAtIndex.textStrokeColor;\n      const strokeWidth = optsAtIndex.textStrokeWidth;\n      let tickTextAlign = textAlign;\n      if (isHorizontal) {\n        x = pixel;\n        if (textAlign === 'inner') {\n          if (i === ilen - 1) {\n            tickTextAlign = !this.options.reverse ? 'right' : 'left';\n          } else if (i === 0) {\n            tickTextAlign = !this.options.reverse ? 'left' : 'right';\n          } else {\n            tickTextAlign = 'center';\n          }\n        }\n        if (position === 'top') {\n          if (crossAlign === 'near' || rotation !== 0) {\n            textOffset = -lineCount * lineHeight + lineHeight / 2;\n          } else if (crossAlign === 'center') {\n            textOffset = -labelSizes.highest.height / 2 - halfCount * lineHeight + lineHeight;\n          } else {\n            textOffset = -labelSizes.highest.height + lineHeight / 2;\n          }\n        } else {\n          if (crossAlign === 'near' || rotation !== 0) {\n            textOffset = lineHeight / 2;\n          } else if (crossAlign === 'center') {\n            textOffset = labelSizes.highest.height / 2 - halfCount * lineHeight;\n          } else {\n            textOffset = labelSizes.highest.height - lineCount * lineHeight;\n          }\n        }\n        if (mirror) {\n          textOffset *= -1;\n        }\n      } else {\n        y = pixel;\n        textOffset = (1 - lineCount) * lineHeight / 2;\n      }\n      let backdrop;\n      if (optsAtIndex.showLabelBackdrop) {\n        const labelPadding = toPadding(optsAtIndex.backdropPadding);\n        const height = labelSizes.heights[i];\n        const width = labelSizes.widths[i];\n        let top = y + textOffset - labelPadding.top;\n        let left = x - labelPadding.left;\n        switch (textBaseline) {\n        case 'middle':\n          top -= height / 2;\n          break;\n        case 'bottom':\n          top -= height;\n          break;\n        }\n        switch (textAlign) {\n        case 'center':\n          left -= width / 2;\n          break;\n        case 'right':\n          left -= width;\n          break;\n        }\n        backdrop = {\n          left,\n          top,\n          width: width + labelPadding.width,\n          height: height + labelPadding.height,\n          color: optsAtIndex.backdropColor,\n        };\n      }\n      items.push({\n        rotation,\n        label,\n        font,\n        color,\n        strokeColor,\n        strokeWidth,\n        textOffset,\n        textAlign: tickTextAlign,\n        textBaseline,\n        translation: [x, y],\n        backdrop,\n      });\n    }\n    return items;\n  }\n  _getXAxisLabelAlignment() {\n    const {position, ticks} = this.options;\n    const rotation = -toRadians(this.labelRotation);\n    if (rotation) {\n      return position === 'top' ? 'left' : 'right';\n    }\n    let align = 'center';\n    if (ticks.align === 'start') {\n      align = 'left';\n    } else if (ticks.align === 'end') {\n      align = 'right';\n    } else if (ticks.align === 'inner') {\n      align = 'inner';\n    }\n    return align;\n  }\n  _getYAxisLabelAlignment(tl) {\n    const {position, ticks: {crossAlign, mirror, padding}} = this.options;\n    const labelSizes = this._getLabelSizes();\n    const tickAndPadding = tl + padding;\n    const widest = labelSizes.widest.width;\n    let textAlign;\n    let x;\n    if (position === 'left') {\n      if (mirror) {\n        x = this.right + padding;\n        if (crossAlign === 'near') {\n          textAlign = 'left';\n        } else if (crossAlign === 'center') {\n          textAlign = 'center';\n          x += (widest / 2);\n        } else {\n          textAlign = 'right';\n          x += widest;\n        }\n      } else {\n        x = this.right - tickAndPadding;\n        if (crossAlign === 'near') {\n          textAlign = 'right';\n        } else if (crossAlign === 'center') {\n          textAlign = 'center';\n          x -= (widest / 2);\n        } else {\n          textAlign = 'left';\n          x = this.left;\n        }\n      }\n    } else if (position === 'right') {\n      if (mirror) {\n        x = this.left + padding;\n        if (crossAlign === 'near') {\n          textAlign = 'right';\n        } else if (crossAlign === 'center') {\n          textAlign = 'center';\n          x -= (widest / 2);\n        } else {\n          textAlign = 'left';\n          x -= widest;\n        }\n      } else {\n        x = this.left + tickAndPadding;\n        if (crossAlign === 'near') {\n          textAlign = 'left';\n        } else if (crossAlign === 'center') {\n          textAlign = 'center';\n          x += widest / 2;\n        } else {\n          textAlign = 'right';\n          x = this.right;\n        }\n      }\n    } else {\n      textAlign = 'right';\n    }\n    return {textAlign, x};\n  }\n  _computeLabelArea() {\n    if (this.options.ticks.mirror) {\n      return;\n    }\n    const chart = this.chart;\n    const position = this.options.position;\n    if (position === 'left' || position === 'right') {\n      return {top: 0, left: this.left, bottom: chart.height, right: this.right};\n    } if (position === 'top' || position === 'bottom') {\n      return {top: this.top, left: 0, bottom: this.bottom, right: chart.width};\n    }\n  }\n  drawBackground() {\n    const {ctx, options: {backgroundColor}, left, top, width, height} = this;\n    if (backgroundColor) {\n      ctx.save();\n      ctx.fillStyle = backgroundColor;\n      ctx.fillRect(left, top, width, height);\n      ctx.restore();\n    }\n  }\n  getLineWidthForValue(value) {\n    const grid = this.options.grid;\n    if (!this._isVisible() || !grid.display) {\n      return 0;\n    }\n    const ticks = this.ticks;\n    const index = ticks.findIndex(t => t.value === value);\n    if (index >= 0) {\n      const opts = grid.setContext(this.getContext(index));\n      return opts.lineWidth;\n    }\n    return 0;\n  }\n  drawGrid(chartArea) {\n    const grid = this.options.grid;\n    const ctx = this.ctx;\n    const items = this._gridLineItems || (this._gridLineItems = this._computeGridLineItems(chartArea));\n    let i, ilen;\n    const drawLine = (p1, p2, style) => {\n      if (!style.width || !style.color) {\n        return;\n      }\n      ctx.save();\n      ctx.lineWidth = style.width;\n      ctx.strokeStyle = style.color;\n      ctx.setLineDash(style.borderDash || []);\n      ctx.lineDashOffset = style.borderDashOffset;\n      ctx.beginPath();\n      ctx.moveTo(p1.x, p1.y);\n      ctx.lineTo(p2.x, p2.y);\n      ctx.stroke();\n      ctx.restore();\n    };\n    if (grid.display) {\n      for (i = 0, ilen = items.length; i < ilen; ++i) {\n        const item = items[i];\n        if (grid.drawOnChartArea) {\n          drawLine(\n            {x: item.x1, y: item.y1},\n            {x: item.x2, y: item.y2},\n            item\n          );\n        }\n        if (grid.drawTicks) {\n          drawLine(\n            {x: item.tx1, y: item.ty1},\n            {x: item.tx2, y: item.ty2},\n            {\n              color: item.tickColor,\n              width: item.tickWidth,\n              borderDash: item.tickBorderDash,\n              borderDashOffset: item.tickBorderDashOffset\n            }\n          );\n        }\n      }\n    }\n  }\n  drawBorder() {\n    const {chart, ctx, options: {grid}} = this;\n    const borderOpts = grid.setContext(this.getContext());\n    const axisWidth = grid.drawBorder ? borderOpts.borderWidth : 0;\n    if (!axisWidth) {\n      return;\n    }\n    const lastLineWidth = grid.setContext(this.getContext(0)).lineWidth;\n    const borderValue = this._borderValue;\n    let x1, x2, y1, y2;\n    if (this.isHorizontal()) {\n      x1 = _alignPixel(chart, this.left, axisWidth) - axisWidth / 2;\n      x2 = _alignPixel(chart, this.right, lastLineWidth) + lastLineWidth / 2;\n      y1 = y2 = borderValue;\n    } else {\n      y1 = _alignPixel(chart, this.top, axisWidth) - axisWidth / 2;\n      y2 = _alignPixel(chart, this.bottom, lastLineWidth) + lastLineWidth / 2;\n      x1 = x2 = borderValue;\n    }\n    ctx.save();\n    ctx.lineWidth = borderOpts.borderWidth;\n    ctx.strokeStyle = borderOpts.borderColor;\n    ctx.beginPath();\n    ctx.moveTo(x1, y1);\n    ctx.lineTo(x2, y2);\n    ctx.stroke();\n    ctx.restore();\n  }\n  drawLabels(chartArea) {\n    const optionTicks = this.options.ticks;\n    if (!optionTicks.display) {\n      return;\n    }\n    const ctx = this.ctx;\n    const area = this._computeLabelArea();\n    if (area) {\n      clipArea(ctx, area);\n    }\n    const items = this._labelItems || (this._labelItems = this._computeLabelItems(chartArea));\n    let i, ilen;\n    for (i = 0, ilen = items.length; i < ilen; ++i) {\n      const item = items[i];\n      const tickFont = item.font;\n      const label = item.label;\n      if (item.backdrop) {\n        ctx.fillStyle = item.backdrop.color;\n        ctx.fillRect(item.backdrop.left, item.backdrop.top, item.backdrop.width, item.backdrop.height);\n      }\n      let y = item.textOffset;\n      renderText(ctx, label, 0, y, tickFont, item);\n    }\n    if (area) {\n      unclipArea(ctx);\n    }\n  }\n  drawTitle() {\n    const {ctx, options: {position, title, reverse}} = this;\n    if (!title.display) {\n      return;\n    }\n    const font = toFont(title.font);\n    const padding = toPadding(title.padding);\n    const align = title.align;\n    let offset = font.lineHeight / 2;\n    if (position === 'bottom' || position === 'center' || isObject(position)) {\n      offset += padding.bottom;\n      if (isArray(title.text)) {\n        offset += font.lineHeight * (title.text.length - 1);\n      }\n    } else {\n      offset += padding.top;\n    }\n    const {titleX, titleY, maxWidth, rotation} = titleArgs(this, offset, position, align);\n    renderText(ctx, title.text, 0, 0, font, {\n      color: title.color,\n      maxWidth,\n      rotation,\n      textAlign: titleAlign(align, position, reverse),\n      textBaseline: 'middle',\n      translation: [titleX, titleY],\n    });\n  }\n  draw(chartArea) {\n    if (!this._isVisible()) {\n      return;\n    }\n    this.drawBackground();\n    this.drawGrid(chartArea);\n    this.drawBorder();\n    this.drawTitle();\n    this.drawLabels(chartArea);\n  }\n  _layers() {\n    const opts = this.options;\n    const tz = opts.ticks && opts.ticks.z || 0;\n    const gz = valueOrDefault(opts.grid && opts.grid.z, -1);\n    if (!this._isVisible() || this.draw !== Scale.prototype.draw) {\n      return [{\n        z: tz,\n        draw: (chartArea) => {\n          this.draw(chartArea);\n        }\n      }];\n    }\n    return [{\n      z: gz,\n      draw: (chartArea) => {\n        this.drawBackground();\n        this.drawGrid(chartArea);\n        this.drawTitle();\n      }\n    }, {\n      z: gz + 1,\n      draw: () => {\n        this.drawBorder();\n      }\n    }, {\n      z: tz,\n      draw: (chartArea) => {\n        this.drawLabels(chartArea);\n      }\n    }];\n  }\n  getMatchingVisibleMetas(type) {\n    const metas = this.chart.getSortedVisibleDatasetMetas();\n    const axisID = this.axis + 'AxisID';\n    const result = [];\n    let i, ilen;\n    for (i = 0, ilen = metas.length; i < ilen; ++i) {\n      const meta = metas[i];\n      if (meta[axisID] === this.id && (!type || meta.type === type)) {\n        result.push(meta);\n      }\n    }\n    return result;\n  }\n  _resolveTickFontOptions(index) {\n    const opts = this.options.ticks.setContext(this.getContext(index));\n    return toFont(opts.font);\n  }\n  _maxDigits() {\n    const fontSize = this._resolveTickFontOptions(0).lineHeight;\n    return (this.isHorizontal() ? this.width : this.height) / fontSize;\n  }\n}\n\nclass TypedRegistry {\n  constructor(type, scope, override) {\n    this.type = type;\n    this.scope = scope;\n    this.override = override;\n    this.items = Object.create(null);\n  }\n  isForType(type) {\n    return Object.prototype.isPrototypeOf.call(this.type.prototype, type.prototype);\n  }\n  register(item) {\n    const proto = Object.getPrototypeOf(item);\n    let parentScope;\n    if (isIChartComponent(proto)) {\n      parentScope = this.register(proto);\n    }\n    const items = this.items;\n    const id = item.id;\n    const scope = this.scope + '.' + id;\n    if (!id) {\n      throw new Error('class does not have id: ' + item);\n    }\n    if (id in items) {\n      return scope;\n    }\n    items[id] = item;\n    registerDefaults(item, scope, parentScope);\n    if (this.override) {\n      defaults.override(item.id, item.overrides);\n    }\n    return scope;\n  }\n  get(id) {\n    return this.items[id];\n  }\n  unregister(item) {\n    const items = this.items;\n    const id = item.id;\n    const scope = this.scope;\n    if (id in items) {\n      delete items[id];\n    }\n    if (scope && id in defaults[scope]) {\n      delete defaults[scope][id];\n      if (this.override) {\n        delete overrides[id];\n      }\n    }\n  }\n}\nfunction registerDefaults(item, scope, parentScope) {\n  const itemDefaults = merge(Object.create(null), [\n    parentScope ? defaults.get(parentScope) : {},\n    defaults.get(scope),\n    item.defaults\n  ]);\n  defaults.set(scope, itemDefaults);\n  if (item.defaultRoutes) {\n    routeDefaults(scope, item.defaultRoutes);\n  }\n  if (item.descriptors) {\n    defaults.describe(scope, item.descriptors);\n  }\n}\nfunction routeDefaults(scope, routes) {\n  Object.keys(routes).forEach(property => {\n    const propertyParts = property.split('.');\n    const sourceName = propertyParts.pop();\n    const sourceScope = [scope].concat(propertyParts).join('.');\n    const parts = routes[property].split('.');\n    const targetName = parts.pop();\n    const targetScope = parts.join('.');\n    defaults.route(sourceScope, sourceName, targetScope, targetName);\n  });\n}\nfunction isIChartComponent(proto) {\n  return 'id' in proto && 'defaults' in proto;\n}\n\nclass Registry {\n  constructor() {\n    this.controllers = new TypedRegistry(DatasetController, 'datasets', true);\n    this.elements = new TypedRegistry(Element, 'elements');\n    this.plugins = new TypedRegistry(Object, 'plugins');\n    this.scales = new TypedRegistry(Scale, 'scales');\n    this._typedRegistries = [this.controllers, this.scales, this.elements];\n  }\n  add(...args) {\n    this._each('register', args);\n  }\n  remove(...args) {\n    this._each('unregister', args);\n  }\n  addControllers(...args) {\n    this._each('register', args, this.controllers);\n  }\n  addElements(...args) {\n    this._each('register', args, this.elements);\n  }\n  addPlugins(...args) {\n    this._each('register', args, this.plugins);\n  }\n  addScales(...args) {\n    this._each('register', args, this.scales);\n  }\n  getController(id) {\n    return this._get(id, this.controllers, 'controller');\n  }\n  getElement(id) {\n    return this._get(id, this.elements, 'element');\n  }\n  getPlugin(id) {\n    return this._get(id, this.plugins, 'plugin');\n  }\n  getScale(id) {\n    return this._get(id, this.scales, 'scale');\n  }\n  removeControllers(...args) {\n    this._each('unregister', args, this.controllers);\n  }\n  removeElements(...args) {\n    this._each('unregister', args, this.elements);\n  }\n  removePlugins(...args) {\n    this._each('unregister', args, this.plugins);\n  }\n  removeScales(...args) {\n    this._each('unregister', args, this.scales);\n  }\n  _each(method, args, typedRegistry) {\n    [...args].forEach(arg => {\n      const reg = typedRegistry || this._getRegistryForType(arg);\n      if (typedRegistry || reg.isForType(arg) || (reg === this.plugins && arg.id)) {\n        this._exec(method, reg, arg);\n      } else {\n        each(arg, item => {\n          const itemReg = typedRegistry || this._getRegistryForType(item);\n          this._exec(method, itemReg, item);\n        });\n      }\n    });\n  }\n  _exec(method, registry, component) {\n    const camelMethod = _capitalize(method);\n    callback(component['before' + camelMethod], [], component);\n    registry[method](component);\n    callback(component['after' + camelMethod], [], component);\n  }\n  _getRegistryForType(type) {\n    for (let i = 0; i < this._typedRegistries.length; i++) {\n      const reg = this._typedRegistries[i];\n      if (reg.isForType(type)) {\n        return reg;\n      }\n    }\n    return this.plugins;\n  }\n  _get(id, typedRegistry, type) {\n    const item = typedRegistry.get(id);\n    if (item === undefined) {\n      throw new Error('\"' + id + '\" is not a registered ' + type + '.');\n    }\n    return item;\n  }\n}\nvar registry = new Registry();\n\nclass ScatterController extends DatasetController {\n  update(mode) {\n    const meta = this._cachedMeta;\n    const {data: points = []} = meta;\n    const animationsDisabled = this.chart._animationsDisabled;\n    let {start, count} = _getStartAndCountOfVisiblePoints(meta, points, animationsDisabled);\n    this._drawStart = start;\n    this._drawCount = count;\n    if (_scaleRangesChanged(meta)) {\n      start = 0;\n      count = points.length;\n    }\n    if (this.options.showLine) {\n      const {dataset: line, _dataset} = meta;\n      line._chart = this.chart;\n      line._datasetIndex = this.index;\n      line._decimated = !!_dataset._decimated;\n      line.points = points;\n      const options = this.resolveDatasetElementOptions(mode);\n      options.segment = this.options.segment;\n      this.updateElement(line, undefined, {\n        animated: !animationsDisabled,\n        options\n      }, mode);\n    }\n    this.updateElements(points, start, count, mode);\n  }\n  addElements() {\n    const {showLine} = this.options;\n    if (!this.datasetElementType && showLine) {\n      this.datasetElementType = registry.getElement('line');\n    }\n    super.addElements();\n  }\n  updateElements(points, start, count, mode) {\n    const reset = mode === 'reset';\n    const {iScale, vScale, _stacked, _dataset} = this._cachedMeta;\n    const firstOpts = this.resolveDataElementOptions(start, mode);\n    const sharedOptions = this.getSharedOptions(firstOpts);\n    const includeOptions = this.includeOptions(mode, sharedOptions);\n    const iAxis = iScale.axis;\n    const vAxis = vScale.axis;\n    const {spanGaps, segment} = this.options;\n    const maxGapLength = isNumber(spanGaps) ? spanGaps : Number.POSITIVE_INFINITY;\n    const directUpdate = this.chart._animationsDisabled || reset || mode === 'none';\n    let prevParsed = start > 0 && this.getParsed(start - 1);\n    for (let i = start; i < start + count; ++i) {\n      const point = points[i];\n      const parsed = this.getParsed(i);\n      const properties = directUpdate ? point : {};\n      const nullData = isNullOrUndef(parsed[vAxis]);\n      const iPixel = properties[iAxis] = iScale.getPixelForValue(parsed[iAxis], i);\n      const vPixel = properties[vAxis] = reset || nullData ? vScale.getBasePixel() : vScale.getPixelForValue(_stacked ? this.applyStack(vScale, parsed, _stacked) : parsed[vAxis], i);\n      properties.skip = isNaN(iPixel) || isNaN(vPixel) || nullData;\n      properties.stop = i > 0 && (Math.abs(parsed[iAxis] - prevParsed[iAxis])) > maxGapLength;\n      if (segment) {\n        properties.parsed = parsed;\n        properties.raw = _dataset.data[i];\n      }\n      if (includeOptions) {\n        properties.options = sharedOptions || this.resolveDataElementOptions(i, point.active ? 'active' : mode);\n      }\n      if (!directUpdate) {\n        this.updateElement(point, i, properties, mode);\n      }\n      prevParsed = parsed;\n    }\n    this.updateSharedOptions(sharedOptions, mode, firstOpts);\n  }\n  getMaxOverflow() {\n    const meta = this._cachedMeta;\n    const data = meta.data || [];\n    if (!this.options.showLine) {\n      let max = 0;\n      for (let i = data.length - 1; i >= 0; --i) {\n        max = Math.max(max, data[i].size(this.resolveDataElementOptions(i)) / 2);\n      }\n      return max > 0 && max;\n    }\n    const dataset = meta.dataset;\n    const border = dataset.options && dataset.options.borderWidth || 0;\n    if (!data.length) {\n      return border;\n    }\n    const firstPoint = data[0].size(this.resolveDataElementOptions(0));\n    const lastPoint = data[data.length - 1].size(this.resolveDataElementOptions(data.length - 1));\n    return Math.max(border, firstPoint, lastPoint) / 2;\n  }\n}\nScatterController.id = 'scatter';\nScatterController.defaults = {\n  datasetElementType: false,\n  dataElementType: 'point',\n  showLine: false,\n  fill: false\n};\nScatterController.overrides = {\n  interaction: {\n    mode: 'point'\n  },\n  plugins: {\n    tooltip: {\n      callbacks: {\n        title() {\n          return '';\n        },\n        label(item) {\n          return '(' + item.label + ', ' + item.formattedValue + ')';\n        }\n      }\n    }\n  },\n  scales: {\n    x: {\n      type: 'linear'\n    },\n    y: {\n      type: 'linear'\n    }\n  }\n};\n\nvar controllers = /*#__PURE__*/Object.freeze({\n__proto__: null,\nBarController: BarController,\nBubbleController: BubbleController,\nDoughnutController: DoughnutController,\nLineController: LineController,\nPolarAreaController: PolarAreaController,\nPieController: PieController,\nRadarController: RadarController,\nScatterController: ScatterController\n});\n\nfunction abstract() {\n  throw new Error('This method is not implemented: Check that a complete date adapter is provided.');\n}\nclass DateAdapter {\n  constructor(options) {\n    this.options = options || {};\n  }\n  init(chartOptions) {}\n  formats() {\n    return abstract();\n  }\n  parse(value, format) {\n    return abstract();\n  }\n  format(timestamp, format) {\n    return abstract();\n  }\n  add(timestamp, amount, unit) {\n    return abstract();\n  }\n  diff(a, b, unit) {\n    return abstract();\n  }\n  startOf(timestamp, unit, weekday) {\n    return abstract();\n  }\n  endOf(timestamp, unit) {\n    return abstract();\n  }\n}\nDateAdapter.override = function(members) {\n  Object.assign(DateAdapter.prototype, members);\n};\nvar adapters = {\n  _date: DateAdapter\n};\n\nfunction binarySearch(metaset, axis, value, intersect) {\n  const {controller, data, _sorted} = metaset;\n  const iScale = controller._cachedMeta.iScale;\n  if (iScale && axis === iScale.axis && axis !== 'r' && _sorted && data.length) {\n    const lookupMethod = iScale._reversePixels ? _rlookupByKey : _lookupByKey;\n    if (!intersect) {\n      return lookupMethod(data, axis, value);\n    } else if (controller._sharedOptions) {\n      const el = data[0];\n      const range = typeof el.getRange === 'function' && el.getRange(axis);\n      if (range) {\n        const start = lookupMethod(data, axis, value - range);\n        const end = lookupMethod(data, axis, value + range);\n        return {lo: start.lo, hi: end.hi};\n      }\n    }\n  }\n  return {lo: 0, hi: data.length - 1};\n}\nfunction evaluateInteractionItems(chart, axis, position, handler, intersect) {\n  const metasets = chart.getSortedVisibleDatasetMetas();\n  const value = position[axis];\n  for (let i = 0, ilen = metasets.length; i < ilen; ++i) {\n    const {index, data} = metasets[i];\n    const {lo, hi} = binarySearch(metasets[i], axis, value, intersect);\n    for (let j = lo; j <= hi; ++j) {\n      const element = data[j];\n      if (!element.skip) {\n        handler(element, index, j);\n      }\n    }\n  }\n}\nfunction getDistanceMetricForAxis(axis) {\n  const useX = axis.indexOf('x') !== -1;\n  const useY = axis.indexOf('y') !== -1;\n  return function(pt1, pt2) {\n    const deltaX = useX ? Math.abs(pt1.x - pt2.x) : 0;\n    const deltaY = useY ? Math.abs(pt1.y - pt2.y) : 0;\n    return Math.sqrt(Math.pow(deltaX, 2) + Math.pow(deltaY, 2));\n  };\n}\nfunction getIntersectItems(chart, position, axis, useFinalPosition, includeInvisible) {\n  const items = [];\n  if (!includeInvisible && !chart.isPointInArea(position)) {\n    return items;\n  }\n  const evaluationFunc = function(element, datasetIndex, index) {\n    if (!includeInvisible && !_isPointInArea(element, chart.chartArea, 0)) {\n      return;\n    }\n    if (element.inRange(position.x, position.y, useFinalPosition)) {\n      items.push({element, datasetIndex, index});\n    }\n  };\n  evaluateInteractionItems(chart, axis, position, evaluationFunc, true);\n  return items;\n}\nfunction getNearestRadialItems(chart, position, axis, useFinalPosition) {\n  let items = [];\n  function evaluationFunc(element, datasetIndex, index) {\n    const {startAngle, endAngle} = element.getProps(['startAngle', 'endAngle'], useFinalPosition);\n    const {angle} = getAngleFromPoint(element, {x: position.x, y: position.y});\n    if (_angleBetween(angle, startAngle, endAngle)) {\n      items.push({element, datasetIndex, index});\n    }\n  }\n  evaluateInteractionItems(chart, axis, position, evaluationFunc);\n  return items;\n}\nfunction getNearestCartesianItems(chart, position, axis, intersect, useFinalPosition, includeInvisible) {\n  let items = [];\n  const distanceMetric = getDistanceMetricForAxis(axis);\n  let minDistance = Number.POSITIVE_INFINITY;\n  function evaluationFunc(element, datasetIndex, index) {\n    const inRange = element.inRange(position.x, position.y, useFinalPosition);\n    if (intersect && !inRange) {\n      return;\n    }\n    const center = element.getCenterPoint(useFinalPosition);\n    const pointInArea = !!includeInvisible || chart.isPointInArea(center);\n    if (!pointInArea && !inRange) {\n      return;\n    }\n    const distance = distanceMetric(position, center);\n    if (distance < minDistance) {\n      items = [{element, datasetIndex, index}];\n      minDistance = distance;\n    } else if (distance === minDistance) {\n      items.push({element, datasetIndex, index});\n    }\n  }\n  evaluateInteractionItems(chart, axis, position, evaluationFunc);\n  return items;\n}\nfunction getNearestItems(chart, position, axis, intersect, useFinalPosition, includeInvisible) {\n  if (!includeInvisible && !chart.isPointInArea(position)) {\n    return [];\n  }\n  return axis === 'r' && !intersect\n    ? getNearestRadialItems(chart, position, axis, useFinalPosition)\n    : getNearestCartesianItems(chart, position, axis, intersect, useFinalPosition, includeInvisible);\n}\nfunction getAxisItems(chart, position, axis, intersect, useFinalPosition) {\n  const items = [];\n  const rangeMethod = axis === 'x' ? 'inXRange' : 'inYRange';\n  let intersectsItem = false;\n  evaluateInteractionItems(chart, axis, position, (element, datasetIndex, index) => {\n    if (element[rangeMethod](position[axis], useFinalPosition)) {\n      items.push({element, datasetIndex, index});\n      intersectsItem = intersectsItem || element.inRange(position.x, position.y, useFinalPosition);\n    }\n  });\n  if (intersect && !intersectsItem) {\n    return [];\n  }\n  return items;\n}\nvar Interaction = {\n  evaluateInteractionItems,\n  modes: {\n    index(chart, e, options, useFinalPosition) {\n      const position = getRelativePosition(e, chart);\n      const axis = options.axis || 'x';\n      const includeInvisible = options.includeInvisible || false;\n      const items = options.intersect\n        ? getIntersectItems(chart, position, axis, useFinalPosition, includeInvisible)\n        : getNearestItems(chart, position, axis, false, useFinalPosition, includeInvisible);\n      const elements = [];\n      if (!items.length) {\n        return [];\n      }\n      chart.getSortedVisibleDatasetMetas().forEach((meta) => {\n        const index = items[0].index;\n        const element = meta.data[index];\n        if (element && !element.skip) {\n          elements.push({element, datasetIndex: meta.index, index});\n        }\n      });\n      return elements;\n    },\n    dataset(chart, e, options, useFinalPosition) {\n      const position = getRelativePosition(e, chart);\n      const axis = options.axis || 'xy';\n      const includeInvisible = options.includeInvisible || false;\n      let items = options.intersect\n        ? getIntersectItems(chart, position, axis, useFinalPosition, includeInvisible) :\n        getNearestItems(chart, position, axis, false, useFinalPosition, includeInvisible);\n      if (items.length > 0) {\n        const datasetIndex = items[0].datasetIndex;\n        const data = chart.getDatasetMeta(datasetIndex).data;\n        items = [];\n        for (let i = 0; i < data.length; ++i) {\n          items.push({element: data[i], datasetIndex, index: i});\n        }\n      }\n      return items;\n    },\n    point(chart, e, options, useFinalPosition) {\n      const position = getRelativePosition(e, chart);\n      const axis = options.axis || 'xy';\n      const includeInvisible = options.includeInvisible || false;\n      return getIntersectItems(chart, position, axis, useFinalPosition, includeInvisible);\n    },\n    nearest(chart, e, options, useFinalPosition) {\n      const position = getRelativePosition(e, chart);\n      const axis = options.axis || 'xy';\n      const includeInvisible = options.includeInvisible || false;\n      return getNearestItems(chart, position, axis, options.intersect, useFinalPosition, includeInvisible);\n    },\n    x(chart, e, options, useFinalPosition) {\n      const position = getRelativePosition(e, chart);\n      return getAxisItems(chart, position, 'x', options.intersect, useFinalPosition);\n    },\n    y(chart, e, options, useFinalPosition) {\n      const position = getRelativePosition(e, chart);\n      return getAxisItems(chart, position, 'y', options.intersect, useFinalPosition);\n    }\n  }\n};\n\nconst STATIC_POSITIONS = ['left', 'top', 'right', 'bottom'];\nfunction filterByPosition(array, position) {\n  return array.filter(v => v.pos === position);\n}\nfunction filterDynamicPositionByAxis(array, axis) {\n  return array.filter(v => STATIC_POSITIONS.indexOf(v.pos) === -1 && v.box.axis === axis);\n}\nfunction sortByWeight(array, reverse) {\n  return array.sort((a, b) => {\n    const v0 = reverse ? b : a;\n    const v1 = reverse ? a : b;\n    return v0.weight === v1.weight ?\n      v0.index - v1.index :\n      v0.weight - v1.weight;\n  });\n}\nfunction wrapBoxes(boxes) {\n  const layoutBoxes = [];\n  let i, ilen, box, pos, stack, stackWeight;\n  for (i = 0, ilen = (boxes || []).length; i < ilen; ++i) {\n    box = boxes[i];\n    ({position: pos, options: {stack, stackWeight = 1}} = box);\n    layoutBoxes.push({\n      index: i,\n      box,\n      pos,\n      horizontal: box.isHorizontal(),\n      weight: box.weight,\n      stack: stack && (pos + stack),\n      stackWeight\n    });\n  }\n  return layoutBoxes;\n}\nfunction buildStacks(layouts) {\n  const stacks = {};\n  for (const wrap of layouts) {\n    const {stack, pos, stackWeight} = wrap;\n    if (!stack || !STATIC_POSITIONS.includes(pos)) {\n      continue;\n    }\n    const _stack = stacks[stack] || (stacks[stack] = {count: 0, placed: 0, weight: 0, size: 0});\n    _stack.count++;\n    _stack.weight += stackWeight;\n  }\n  return stacks;\n}\nfunction setLayoutDims(layouts, params) {\n  const stacks = buildStacks(layouts);\n  const {vBoxMaxWidth, hBoxMaxHeight} = params;\n  let i, ilen, layout;\n  for (i = 0, ilen = layouts.length; i < ilen; ++i) {\n    layout = layouts[i];\n    const {fullSize} = layout.box;\n    const stack = stacks[layout.stack];\n    const factor = stack && layout.stackWeight / stack.weight;\n    if (layout.horizontal) {\n      layout.width = factor ? factor * vBoxMaxWidth : fullSize && params.availableWidth;\n      layout.height = hBoxMaxHeight;\n    } else {\n      layout.width = vBoxMaxWidth;\n      layout.height = factor ? factor * hBoxMaxHeight : fullSize && params.availableHeight;\n    }\n  }\n  return stacks;\n}\nfunction buildLayoutBoxes(boxes) {\n  const layoutBoxes = wrapBoxes(boxes);\n  const fullSize = sortByWeight(layoutBoxes.filter(wrap => wrap.box.fullSize), true);\n  const left = sortByWeight(filterByPosition(layoutBoxes, 'left'), true);\n  const right = sortByWeight(filterByPosition(layoutBoxes, 'right'));\n  const top = sortByWeight(filterByPosition(layoutBoxes, 'top'), true);\n  const bottom = sortByWeight(filterByPosition(layoutBoxes, 'bottom'));\n  const centerHorizontal = filterDynamicPositionByAxis(layoutBoxes, 'x');\n  const centerVertical = filterDynamicPositionByAxis(layoutBoxes, 'y');\n  return {\n    fullSize,\n    leftAndTop: left.concat(top),\n    rightAndBottom: right.concat(centerVertical).concat(bottom).concat(centerHorizontal),\n    chartArea: filterByPosition(layoutBoxes, 'chartArea'),\n    vertical: left.concat(right).concat(centerVertical),\n    horizontal: top.concat(bottom).concat(centerHorizontal)\n  };\n}\nfunction getCombinedMax(maxPadding, chartArea, a, b) {\n  return Math.max(maxPadding[a], chartArea[a]) + Math.max(maxPadding[b], chartArea[b]);\n}\nfunction updateMaxPadding(maxPadding, boxPadding) {\n  maxPadding.top = Math.max(maxPadding.top, boxPadding.top);\n  maxPadding.left = Math.max(maxPadding.left, boxPadding.left);\n  maxPadding.bottom = Math.max(maxPadding.bottom, boxPadding.bottom);\n  maxPadding.right = Math.max(maxPadding.right, boxPadding.right);\n}\nfunction updateDims(chartArea, params, layout, stacks) {\n  const {pos, box} = layout;\n  const maxPadding = chartArea.maxPadding;\n  if (!isObject(pos)) {\n    if (layout.size) {\n      chartArea[pos] -= layout.size;\n    }\n    const stack = stacks[layout.stack] || {size: 0, count: 1};\n    stack.size = Math.max(stack.size, layout.horizontal ? box.height : box.width);\n    layout.size = stack.size / stack.count;\n    chartArea[pos] += layout.size;\n  }\n  if (box.getPadding) {\n    updateMaxPadding(maxPadding, box.getPadding());\n  }\n  const newWidth = Math.max(0, params.outerWidth - getCombinedMax(maxPadding, chartArea, 'left', 'right'));\n  const newHeight = Math.max(0, params.outerHeight - getCombinedMax(maxPadding, chartArea, 'top', 'bottom'));\n  const widthChanged = newWidth !== chartArea.w;\n  const heightChanged = newHeight !== chartArea.h;\n  chartArea.w = newWidth;\n  chartArea.h = newHeight;\n  return layout.horizontal\n    ? {same: widthChanged, other: heightChanged}\n    : {same: heightChanged, other: widthChanged};\n}\nfunction handleMaxPadding(chartArea) {\n  const maxPadding = chartArea.maxPadding;\n  function updatePos(pos) {\n    const change = Math.max(maxPadding[pos] - chartArea[pos], 0);\n    chartArea[pos] += change;\n    return change;\n  }\n  chartArea.y += updatePos('top');\n  chartArea.x += updatePos('left');\n  updatePos('right');\n  updatePos('bottom');\n}\nfunction getMargins(horizontal, chartArea) {\n  const maxPadding = chartArea.maxPadding;\n  function marginForPositions(positions) {\n    const margin = {left: 0, top: 0, right: 0, bottom: 0};\n    positions.forEach((pos) => {\n      margin[pos] = Math.max(chartArea[pos], maxPadding[pos]);\n    });\n    return margin;\n  }\n  return horizontal\n    ? marginForPositions(['left', 'right'])\n    : marginForPositions(['top', 'bottom']);\n}\nfunction fitBoxes(boxes, chartArea, params, stacks) {\n  const refitBoxes = [];\n  let i, ilen, layout, box, refit, changed;\n  for (i = 0, ilen = boxes.length, refit = 0; i < ilen; ++i) {\n    layout = boxes[i];\n    box = layout.box;\n    box.update(\n      layout.width || chartArea.w,\n      layout.height || chartArea.h,\n      getMargins(layout.horizontal, chartArea)\n    );\n    const {same, other} = updateDims(chartArea, params, layout, stacks);\n    refit |= same && refitBoxes.length;\n    changed = changed || other;\n    if (!box.fullSize) {\n      refitBoxes.push(layout);\n    }\n  }\n  return refit && fitBoxes(refitBoxes, chartArea, params, stacks) || changed;\n}\nfunction setBoxDims(box, left, top, width, height) {\n  box.top = top;\n  box.left = left;\n  box.right = left + width;\n  box.bottom = top + height;\n  box.width = width;\n  box.height = height;\n}\nfunction placeBoxes(boxes, chartArea, params, stacks) {\n  const userPadding = params.padding;\n  let {x, y} = chartArea;\n  for (const layout of boxes) {\n    const box = layout.box;\n    const stack = stacks[layout.stack] || {count: 1, placed: 0, weight: 1};\n    const weight = (layout.stackWeight / stack.weight) || 1;\n    if (layout.horizontal) {\n      const width = chartArea.w * weight;\n      const height = stack.size || box.height;\n      if (defined(stack.start)) {\n        y = stack.start;\n      }\n      if (box.fullSize) {\n        setBoxDims(box, userPadding.left, y, params.outerWidth - userPadding.right - userPadding.left, height);\n      } else {\n        setBoxDims(box, chartArea.left + stack.placed, y, width, height);\n      }\n      stack.start = y;\n      stack.placed += width;\n      y = box.bottom;\n    } else {\n      const height = chartArea.h * weight;\n      const width = stack.size || box.width;\n      if (defined(stack.start)) {\n        x = stack.start;\n      }\n      if (box.fullSize) {\n        setBoxDims(box, x, userPadding.top, width, params.outerHeight - userPadding.bottom - userPadding.top);\n      } else {\n        setBoxDims(box, x, chartArea.top + stack.placed, width, height);\n      }\n      stack.start = x;\n      stack.placed += height;\n      x = box.right;\n    }\n  }\n  chartArea.x = x;\n  chartArea.y = y;\n}\ndefaults.set('layout', {\n  autoPadding: true,\n  padding: {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0\n  }\n});\nvar layouts = {\n  addBox(chart, item) {\n    if (!chart.boxes) {\n      chart.boxes = [];\n    }\n    item.fullSize = item.fullSize || false;\n    item.position = item.position || 'top';\n    item.weight = item.weight || 0;\n    item._layers = item._layers || function() {\n      return [{\n        z: 0,\n        draw(chartArea) {\n          item.draw(chartArea);\n        }\n      }];\n    };\n    chart.boxes.push(item);\n  },\n  removeBox(chart, layoutItem) {\n    const index = chart.boxes ? chart.boxes.indexOf(layoutItem) : -1;\n    if (index !== -1) {\n      chart.boxes.splice(index, 1);\n    }\n  },\n  configure(chart, item, options) {\n    item.fullSize = options.fullSize;\n    item.position = options.position;\n    item.weight = options.weight;\n  },\n  update(chart, width, height, minPadding) {\n    if (!chart) {\n      return;\n    }\n    const padding = toPadding(chart.options.layout.padding);\n    const availableWidth = Math.max(width - padding.width, 0);\n    const availableHeight = Math.max(height - padding.height, 0);\n    const boxes = buildLayoutBoxes(chart.boxes);\n    const verticalBoxes = boxes.vertical;\n    const horizontalBoxes = boxes.horizontal;\n    each(chart.boxes, box => {\n      if (typeof box.beforeLayout === 'function') {\n        box.beforeLayout();\n      }\n    });\n    const visibleVerticalBoxCount = verticalBoxes.reduce((total, wrap) =>\n      wrap.box.options && wrap.box.options.display === false ? total : total + 1, 0) || 1;\n    const params = Object.freeze({\n      outerWidth: width,\n      outerHeight: height,\n      padding,\n      availableWidth,\n      availableHeight,\n      vBoxMaxWidth: availableWidth / 2 / visibleVerticalBoxCount,\n      hBoxMaxHeight: availableHeight / 2\n    });\n    const maxPadding = Object.assign({}, padding);\n    updateMaxPadding(maxPadding, toPadding(minPadding));\n    const chartArea = Object.assign({\n      maxPadding,\n      w: availableWidth,\n      h: availableHeight,\n      x: padding.left,\n      y: padding.top\n    }, padding);\n    const stacks = setLayoutDims(verticalBoxes.concat(horizontalBoxes), params);\n    fitBoxes(boxes.fullSize, chartArea, params, stacks);\n    fitBoxes(verticalBoxes, chartArea, params, stacks);\n    if (fitBoxes(horizontalBoxes, chartArea, params, stacks)) {\n      fitBoxes(verticalBoxes, chartArea, params, stacks);\n    }\n    handleMaxPadding(chartArea);\n    placeBoxes(boxes.leftAndTop, chartArea, params, stacks);\n    chartArea.x += chartArea.w;\n    chartArea.y += chartArea.h;\n    placeBoxes(boxes.rightAndBottom, chartArea, params, stacks);\n    chart.chartArea = {\n      left: chartArea.left,\n      top: chartArea.top,\n      right: chartArea.left + chartArea.w,\n      bottom: chartArea.top + chartArea.h,\n      height: chartArea.h,\n      width: chartArea.w,\n    };\n    each(boxes.chartArea, (layout) => {\n      const box = layout.box;\n      Object.assign(box, chart.chartArea);\n      box.update(chartArea.w, chartArea.h, {left: 0, top: 0, right: 0, bottom: 0});\n    });\n  }\n};\n\nclass BasePlatform {\n  acquireContext(canvas, aspectRatio) {}\n  releaseContext(context) {\n    return false;\n  }\n  addEventListener(chart, type, listener) {}\n  removeEventListener(chart, type, listener) {}\n  getDevicePixelRatio() {\n    return 1;\n  }\n  getMaximumSize(element, width, height, aspectRatio) {\n    width = Math.max(0, width || element.width);\n    height = height || element.height;\n    return {\n      width,\n      height: Math.max(0, aspectRatio ? Math.floor(width / aspectRatio) : height)\n    };\n  }\n  isAttached(canvas) {\n    return true;\n  }\n  updateConfig(config) {\n  }\n}\n\nclass BasicPlatform extends BasePlatform {\n  acquireContext(item) {\n    return item && item.getContext && item.getContext('2d') || null;\n  }\n  updateConfig(config) {\n    config.options.animation = false;\n  }\n}\n\nconst EXPANDO_KEY = '$chartjs';\nconst EVENT_TYPES = {\n  touchstart: 'mousedown',\n  touchmove: 'mousemove',\n  touchend: 'mouseup',\n  pointerenter: 'mouseenter',\n  pointerdown: 'mousedown',\n  pointermove: 'mousemove',\n  pointerup: 'mouseup',\n  pointerleave: 'mouseout',\n  pointerout: 'mouseout'\n};\nconst isNullOrEmpty = value => value === null || value === '';\nfunction initCanvas(canvas, aspectRatio) {\n  const style = canvas.style;\n  const renderHeight = canvas.getAttribute('height');\n  const renderWidth = canvas.getAttribute('width');\n  canvas[EXPANDO_KEY] = {\n    initial: {\n      height: renderHeight,\n      width: renderWidth,\n      style: {\n        display: style.display,\n        height: style.height,\n        width: style.width\n      }\n    }\n  };\n  style.display = style.display || 'block';\n  style.boxSizing = style.boxSizing || 'border-box';\n  if (isNullOrEmpty(renderWidth)) {\n    const displayWidth = readUsedSize(canvas, 'width');\n    if (displayWidth !== undefined) {\n      canvas.width = displayWidth;\n    }\n  }\n  if (isNullOrEmpty(renderHeight)) {\n    if (canvas.style.height === '') {\n      canvas.height = canvas.width / (aspectRatio || 2);\n    } else {\n      const displayHeight = readUsedSize(canvas, 'height');\n      if (displayHeight !== undefined) {\n        canvas.height = displayHeight;\n      }\n    }\n  }\n  return canvas;\n}\nconst eventListenerOptions = supportsEventListenerOptions ? {passive: true} : false;\nfunction addListener(node, type, listener) {\n  node.addEventListener(type, listener, eventListenerOptions);\n}\nfunction removeListener(chart, type, listener) {\n  chart.canvas.removeEventListener(type, listener, eventListenerOptions);\n}\nfunction fromNativeEvent(event, chart) {\n  const type = EVENT_TYPES[event.type] || event.type;\n  const {x, y} = getRelativePosition(event, chart);\n  return {\n    type,\n    chart,\n    native: event,\n    x: x !== undefined ? x : null,\n    y: y !== undefined ? y : null,\n  };\n}\nfunction nodeListContains(nodeList, canvas) {\n  for (const node of nodeList) {\n    if (node === canvas || node.contains(canvas)) {\n      return true;\n    }\n  }\n}\nfunction createAttachObserver(chart, type, listener) {\n  const canvas = chart.canvas;\n  const observer = new MutationObserver(entries => {\n    let trigger = false;\n    for (const entry of entries) {\n      trigger = trigger || nodeListContains(entry.addedNodes, canvas);\n      trigger = trigger && !nodeListContains(entry.removedNodes, canvas);\n    }\n    if (trigger) {\n      listener();\n    }\n  });\n  observer.observe(document, {childList: true, subtree: true});\n  return observer;\n}\nfunction createDetachObserver(chart, type, listener) {\n  const canvas = chart.canvas;\n  const observer = new MutationObserver(entries => {\n    let trigger = false;\n    for (const entry of entries) {\n      trigger = trigger || nodeListContains(entry.removedNodes, canvas);\n      trigger = trigger && !nodeListContains(entry.addedNodes, canvas);\n    }\n    if (trigger) {\n      listener();\n    }\n  });\n  observer.observe(document, {childList: true, subtree: true});\n  return observer;\n}\nconst drpListeningCharts = new Map();\nlet oldDevicePixelRatio = 0;\nfunction onWindowResize() {\n  const dpr = window.devicePixelRatio;\n  if (dpr === oldDevicePixelRatio) {\n    return;\n  }\n  oldDevicePixelRatio = dpr;\n  drpListeningCharts.forEach((resize, chart) => {\n    if (chart.currentDevicePixelRatio !== dpr) {\n      resize();\n    }\n  });\n}\nfunction listenDevicePixelRatioChanges(chart, resize) {\n  if (!drpListeningCharts.size) {\n    window.addEventListener('resize', onWindowResize);\n  }\n  drpListeningCharts.set(chart, resize);\n}\nfunction unlistenDevicePixelRatioChanges(chart) {\n  drpListeningCharts.delete(chart);\n  if (!drpListeningCharts.size) {\n    window.removeEventListener('resize', onWindowResize);\n  }\n}\nfunction createResizeObserver(chart, type, listener) {\n  const canvas = chart.canvas;\n  const container = canvas && _getParentNode(canvas);\n  if (!container) {\n    return;\n  }\n  const resize = throttled((width, height) => {\n    const w = container.clientWidth;\n    listener(width, height);\n    if (w < container.clientWidth) {\n      listener();\n    }\n  }, window);\n  const observer = new ResizeObserver(entries => {\n    const entry = entries[0];\n    const width = entry.contentRect.width;\n    const height = entry.contentRect.height;\n    if (width === 0 && height === 0) {\n      return;\n    }\n    resize(width, height);\n  });\n  observer.observe(container);\n  listenDevicePixelRatioChanges(chart, resize);\n  return observer;\n}\nfunction releaseObserver(chart, type, observer) {\n  if (observer) {\n    observer.disconnect();\n  }\n  if (type === 'resize') {\n    unlistenDevicePixelRatioChanges(chart);\n  }\n}\nfunction createProxyAndListen(chart, type, listener) {\n  const canvas = chart.canvas;\n  const proxy = throttled((event) => {\n    if (chart.ctx !== null) {\n      listener(fromNativeEvent(event, chart));\n    }\n  }, chart, (args) => {\n    const event = args[0];\n    return [event, event.offsetX, event.offsetY];\n  });\n  addListener(canvas, type, proxy);\n  return proxy;\n}\nclass DomPlatform extends BasePlatform {\n  acquireContext(canvas, aspectRatio) {\n    const context = canvas && canvas.getContext && canvas.getContext('2d');\n    if (context && context.canvas === canvas) {\n      initCanvas(canvas, aspectRatio);\n      return context;\n    }\n    return null;\n  }\n  releaseContext(context) {\n    const canvas = context.canvas;\n    if (!canvas[EXPANDO_KEY]) {\n      return false;\n    }\n    const initial = canvas[EXPANDO_KEY].initial;\n    ['height', 'width'].forEach((prop) => {\n      const value = initial[prop];\n      if (isNullOrUndef(value)) {\n        canvas.removeAttribute(prop);\n      } else {\n        canvas.setAttribute(prop, value);\n      }\n    });\n    const style = initial.style || {};\n    Object.keys(style).forEach((key) => {\n      canvas.style[key] = style[key];\n    });\n    canvas.width = canvas.width;\n    delete canvas[EXPANDO_KEY];\n    return true;\n  }\n  addEventListener(chart, type, listener) {\n    this.removeEventListener(chart, type);\n    const proxies = chart.$proxies || (chart.$proxies = {});\n    const handlers = {\n      attach: createAttachObserver,\n      detach: createDetachObserver,\n      resize: createResizeObserver\n    };\n    const handler = handlers[type] || createProxyAndListen;\n    proxies[type] = handler(chart, type, listener);\n  }\n  removeEventListener(chart, type) {\n    const proxies = chart.$proxies || (chart.$proxies = {});\n    const proxy = proxies[type];\n    if (!proxy) {\n      return;\n    }\n    const handlers = {\n      attach: releaseObserver,\n      detach: releaseObserver,\n      resize: releaseObserver\n    };\n    const handler = handlers[type] || removeListener;\n    handler(chart, type, proxy);\n    proxies[type] = undefined;\n  }\n  getDevicePixelRatio() {\n    return window.devicePixelRatio;\n  }\n  getMaximumSize(canvas, width, height, aspectRatio) {\n    return getMaximumSize(canvas, width, height, aspectRatio);\n  }\n  isAttached(canvas) {\n    const container = _getParentNode(canvas);\n    return !!(container && container.isConnected);\n  }\n}\n\nfunction _detectPlatform(canvas) {\n  if (!_isDomSupported() || (typeof OffscreenCanvas !== 'undefined' && canvas instanceof OffscreenCanvas)) {\n    return BasicPlatform;\n  }\n  return DomPlatform;\n}\n\nclass PluginService {\n  constructor() {\n    this._init = [];\n  }\n  notify(chart, hook, args, filter) {\n    if (hook === 'beforeInit') {\n      this._init = this._createDescriptors(chart, true);\n      this._notify(this._init, chart, 'install');\n    }\n    const descriptors = filter ? this._descriptors(chart).filter(filter) : this._descriptors(chart);\n    const result = this._notify(descriptors, chart, hook, args);\n    if (hook === 'afterDestroy') {\n      this._notify(descriptors, chart, 'stop');\n      this._notify(this._init, chart, 'uninstall');\n    }\n    return result;\n  }\n  _notify(descriptors, chart, hook, args) {\n    args = args || {};\n    for (const descriptor of descriptors) {\n      const plugin = descriptor.plugin;\n      const method = plugin[hook];\n      const params = [chart, args, descriptor.options];\n      if (callback(method, params, plugin) === false && args.cancelable) {\n        return false;\n      }\n    }\n    return true;\n  }\n  invalidate() {\n    if (!isNullOrUndef(this._cache)) {\n      this._oldCache = this._cache;\n      this._cache = undefined;\n    }\n  }\n  _descriptors(chart) {\n    if (this._cache) {\n      return this._cache;\n    }\n    const descriptors = this._cache = this._createDescriptors(chart);\n    this._notifyStateChanges(chart);\n    return descriptors;\n  }\n  _createDescriptors(chart, all) {\n    const config = chart && chart.config;\n    const options = valueOrDefault(config.options && config.options.plugins, {});\n    const plugins = allPlugins(config);\n    return options === false && !all ? [] : createDescriptors(chart, plugins, options, all);\n  }\n  _notifyStateChanges(chart) {\n    const previousDescriptors = this._oldCache || [];\n    const descriptors = this._cache;\n    const diff = (a, b) => a.filter(x => !b.some(y => x.plugin.id === y.plugin.id));\n    this._notify(diff(previousDescriptors, descriptors), chart, 'stop');\n    this._notify(diff(descriptors, previousDescriptors), chart, 'start');\n  }\n}\nfunction allPlugins(config) {\n  const localIds = {};\n  const plugins = [];\n  const keys = Object.keys(registry.plugins.items);\n  for (let i = 0; i < keys.length; i++) {\n    plugins.push(registry.getPlugin(keys[i]));\n  }\n  const local = config.plugins || [];\n  for (let i = 0; i < local.length; i++) {\n    const plugin = local[i];\n    if (plugins.indexOf(plugin) === -1) {\n      plugins.push(plugin);\n      localIds[plugin.id] = true;\n    }\n  }\n  return {plugins, localIds};\n}\nfunction getOpts(options, all) {\n  if (!all && options === false) {\n    return null;\n  }\n  if (options === true) {\n    return {};\n  }\n  return options;\n}\nfunction createDescriptors(chart, {plugins, localIds}, options, all) {\n  const result = [];\n  const context = chart.getContext();\n  for (const plugin of plugins) {\n    const id = plugin.id;\n    const opts = getOpts(options[id], all);\n    if (opts === null) {\n      continue;\n    }\n    result.push({\n      plugin,\n      options: pluginOpts(chart.config, {plugin, local: localIds[id]}, opts, context)\n    });\n  }\n  return result;\n}\nfunction pluginOpts(config, {plugin, local}, opts, context) {\n  const keys = config.pluginScopeKeys(plugin);\n  const scopes = config.getOptionScopes(opts, keys);\n  if (local && plugin.defaults) {\n    scopes.push(plugin.defaults);\n  }\n  return config.createResolver(scopes, context, [''], {\n    scriptable: false,\n    indexable: false,\n    allKeys: true\n  });\n}\n\nfunction getIndexAxis(type, options) {\n  const datasetDefaults = defaults.datasets[type] || {};\n  const datasetOptions = (options.datasets || {})[type] || {};\n  return datasetOptions.indexAxis || options.indexAxis || datasetDefaults.indexAxis || 'x';\n}\nfunction getAxisFromDefaultScaleID(id, indexAxis) {\n  let axis = id;\n  if (id === '_index_') {\n    axis = indexAxis;\n  } else if (id === '_value_') {\n    axis = indexAxis === 'x' ? 'y' : 'x';\n  }\n  return axis;\n}\nfunction getDefaultScaleIDFromAxis(axis, indexAxis) {\n  return axis === indexAxis ? '_index_' : '_value_';\n}\nfunction axisFromPosition(position) {\n  if (position === 'top' || position === 'bottom') {\n    return 'x';\n  }\n  if (position === 'left' || position === 'right') {\n    return 'y';\n  }\n}\nfunction determineAxis(id, scaleOptions) {\n  if (id === 'x' || id === 'y') {\n    return id;\n  }\n  return scaleOptions.axis || axisFromPosition(scaleOptions.position) || id.charAt(0).toLowerCase();\n}\nfunction mergeScaleConfig(config, options) {\n  const chartDefaults = overrides[config.type] || {scales: {}};\n  const configScales = options.scales || {};\n  const chartIndexAxis = getIndexAxis(config.type, options);\n  const firstIDs = Object.create(null);\n  const scales = Object.create(null);\n  Object.keys(configScales).forEach(id => {\n    const scaleConf = configScales[id];\n    if (!isObject(scaleConf)) {\n      return console.error(`Invalid scale configuration for scale: ${id}`);\n    }\n    if (scaleConf._proxy) {\n      return console.warn(`Ignoring resolver passed as options for scale: ${id}`);\n    }\n    const axis = determineAxis(id, scaleConf);\n    const defaultId = getDefaultScaleIDFromAxis(axis, chartIndexAxis);\n    const defaultScaleOptions = chartDefaults.scales || {};\n    firstIDs[axis] = firstIDs[axis] || id;\n    scales[id] = mergeIf(Object.create(null), [{axis}, scaleConf, defaultScaleOptions[axis], defaultScaleOptions[defaultId]]);\n  });\n  config.data.datasets.forEach(dataset => {\n    const type = dataset.type || config.type;\n    const indexAxis = dataset.indexAxis || getIndexAxis(type, options);\n    const datasetDefaults = overrides[type] || {};\n    const defaultScaleOptions = datasetDefaults.scales || {};\n    Object.keys(defaultScaleOptions).forEach(defaultID => {\n      const axis = getAxisFromDefaultScaleID(defaultID, indexAxis);\n      const id = dataset[axis + 'AxisID'] || firstIDs[axis] || axis;\n      scales[id] = scales[id] || Object.create(null);\n      mergeIf(scales[id], [{axis}, configScales[id], defaultScaleOptions[defaultID]]);\n    });\n  });\n  Object.keys(scales).forEach(key => {\n    const scale = scales[key];\n    mergeIf(scale, [defaults.scales[scale.type], defaults.scale]);\n  });\n  return scales;\n}\nfunction initOptions(config) {\n  const options = config.options || (config.options = {});\n  options.plugins = valueOrDefault(options.plugins, {});\n  options.scales = mergeScaleConfig(config, options);\n}\nfunction initData(data) {\n  data = data || {};\n  data.datasets = data.datasets || [];\n  data.labels = data.labels || [];\n  return data;\n}\nfunction initConfig(config) {\n  config = config || {};\n  config.data = initData(config.data);\n  initOptions(config);\n  return config;\n}\nconst keyCache = new Map();\nconst keysCached = new Set();\nfunction cachedKeys(cacheKey, generate) {\n  let keys = keyCache.get(cacheKey);\n  if (!keys) {\n    keys = generate();\n    keyCache.set(cacheKey, keys);\n    keysCached.add(keys);\n  }\n  return keys;\n}\nconst addIfFound = (set, obj, key) => {\n  const opts = resolveObjectKey(obj, key);\n  if (opts !== undefined) {\n    set.add(opts);\n  }\n};\nclass Config {\n  constructor(config) {\n    this._config = initConfig(config);\n    this._scopeCache = new Map();\n    this._resolverCache = new Map();\n  }\n  get platform() {\n    return this._config.platform;\n  }\n  get type() {\n    return this._config.type;\n  }\n  set type(type) {\n    this._config.type = type;\n  }\n  get data() {\n    return this._config.data;\n  }\n  set data(data) {\n    this._config.data = initData(data);\n  }\n  get options() {\n    return this._config.options;\n  }\n  set options(options) {\n    this._config.options = options;\n  }\n  get plugins() {\n    return this._config.plugins;\n  }\n  update() {\n    const config = this._config;\n    this.clearCache();\n    initOptions(config);\n  }\n  clearCache() {\n    this._scopeCache.clear();\n    this._resolverCache.clear();\n  }\n  datasetScopeKeys(datasetType) {\n    return cachedKeys(datasetType,\n      () => [[\n        `datasets.${datasetType}`,\n        ''\n      ]]);\n  }\n  datasetAnimationScopeKeys(datasetType, transition) {\n    return cachedKeys(`${datasetType}.transition.${transition}`,\n      () => [\n        [\n          `datasets.${datasetType}.transitions.${transition}`,\n          `transitions.${transition}`,\n        ],\n        [\n          `datasets.${datasetType}`,\n          ''\n        ]\n      ]);\n  }\n  datasetElementScopeKeys(datasetType, elementType) {\n    return cachedKeys(`${datasetType}-${elementType}`,\n      () => [[\n        `datasets.${datasetType}.elements.${elementType}`,\n        `datasets.${datasetType}`,\n        `elements.${elementType}`,\n        ''\n      ]]);\n  }\n  pluginScopeKeys(plugin) {\n    const id = plugin.id;\n    const type = this.type;\n    return cachedKeys(`${type}-plugin-${id}`,\n      () => [[\n        `plugins.${id}`,\n        ...plugin.additionalOptionScopes || [],\n      ]]);\n  }\n  _cachedScopes(mainScope, resetCache) {\n    const _scopeCache = this._scopeCache;\n    let cache = _scopeCache.get(mainScope);\n    if (!cache || resetCache) {\n      cache = new Map();\n      _scopeCache.set(mainScope, cache);\n    }\n    return cache;\n  }\n  getOptionScopes(mainScope, keyLists, resetCache) {\n    const {options, type} = this;\n    const cache = this._cachedScopes(mainScope, resetCache);\n    const cached = cache.get(keyLists);\n    if (cached) {\n      return cached;\n    }\n    const scopes = new Set();\n    keyLists.forEach(keys => {\n      if (mainScope) {\n        scopes.add(mainScope);\n        keys.forEach(key => addIfFound(scopes, mainScope, key));\n      }\n      keys.forEach(key => addIfFound(scopes, options, key));\n      keys.forEach(key => addIfFound(scopes, overrides[type] || {}, key));\n      keys.forEach(key => addIfFound(scopes, defaults, key));\n      keys.forEach(key => addIfFound(scopes, descriptors, key));\n    });\n    const array = Array.from(scopes);\n    if (array.length === 0) {\n      array.push(Object.create(null));\n    }\n    if (keysCached.has(keyLists)) {\n      cache.set(keyLists, array);\n    }\n    return array;\n  }\n  chartOptionScopes() {\n    const {options, type} = this;\n    return [\n      options,\n      overrides[type] || {},\n      defaults.datasets[type] || {},\n      {type},\n      defaults,\n      descriptors\n    ];\n  }\n  resolveNamedOptions(scopes, names, context, prefixes = ['']) {\n    const result = {$shared: true};\n    const {resolver, subPrefixes} = getResolver(this._resolverCache, scopes, prefixes);\n    let options = resolver;\n    if (needContext(resolver, names)) {\n      result.$shared = false;\n      context = isFunction(context) ? context() : context;\n      const subResolver = this.createResolver(scopes, context, subPrefixes);\n      options = _attachContext(resolver, context, subResolver);\n    }\n    for (const prop of names) {\n      result[prop] = options[prop];\n    }\n    return result;\n  }\n  createResolver(scopes, context, prefixes = [''], descriptorDefaults) {\n    const {resolver} = getResolver(this._resolverCache, scopes, prefixes);\n    return isObject(context)\n      ? _attachContext(resolver, context, undefined, descriptorDefaults)\n      : resolver;\n  }\n}\nfunction getResolver(resolverCache, scopes, prefixes) {\n  let cache = resolverCache.get(scopes);\n  if (!cache) {\n    cache = new Map();\n    resolverCache.set(scopes, cache);\n  }\n  const cacheKey = prefixes.join();\n  let cached = cache.get(cacheKey);\n  if (!cached) {\n    const resolver = _createResolver(scopes, prefixes);\n    cached = {\n      resolver,\n      subPrefixes: prefixes.filter(p => !p.toLowerCase().includes('hover'))\n    };\n    cache.set(cacheKey, cached);\n  }\n  return cached;\n}\nconst hasFunction = value => isObject(value)\n  && Object.getOwnPropertyNames(value).reduce((acc, key) => acc || isFunction(value[key]), false);\nfunction needContext(proxy, names) {\n  const {isScriptable, isIndexable} = _descriptors(proxy);\n  for (const prop of names) {\n    const scriptable = isScriptable(prop);\n    const indexable = isIndexable(prop);\n    const value = (indexable || scriptable) && proxy[prop];\n    if ((scriptable && (isFunction(value) || hasFunction(value)))\n      || (indexable && isArray(value))) {\n      return true;\n    }\n  }\n  return false;\n}\n\nvar version = \"3.9.1\";\n\nconst KNOWN_POSITIONS = ['top', 'bottom', 'left', 'right', 'chartArea'];\nfunction positionIsHorizontal(position, axis) {\n  return position === 'top' || position === 'bottom' || (KNOWN_POSITIONS.indexOf(position) === -1 && axis === 'x');\n}\nfunction compare2Level(l1, l2) {\n  return function(a, b) {\n    return a[l1] === b[l1]\n      ? a[l2] - b[l2]\n      : a[l1] - b[l1];\n  };\n}\nfunction onAnimationsComplete(context) {\n  const chart = context.chart;\n  const animationOptions = chart.options.animation;\n  chart.notifyPlugins('afterRender');\n  callback(animationOptions && animationOptions.onComplete, [context], chart);\n}\nfunction onAnimationProgress(context) {\n  const chart = context.chart;\n  const animationOptions = chart.options.animation;\n  callback(animationOptions && animationOptions.onProgress, [context], chart);\n}\nfunction getCanvas(item) {\n  if (_isDomSupported() && typeof item === 'string') {\n    item = document.getElementById(item);\n  } else if (item && item.length) {\n    item = item[0];\n  }\n  if (item && item.canvas) {\n    item = item.canvas;\n  }\n  return item;\n}\nconst instances = {};\nconst getChart = (key) => {\n  const canvas = getCanvas(key);\n  return Object.values(instances).filter((c) => c.canvas === canvas).pop();\n};\nfunction moveNumericKeys(obj, start, move) {\n  const keys = Object.keys(obj);\n  for (const key of keys) {\n    const intKey = +key;\n    if (intKey >= start) {\n      const value = obj[key];\n      delete obj[key];\n      if (move > 0 || intKey > start) {\n        obj[intKey + move] = value;\n      }\n    }\n  }\n}\nfunction determineLastEvent(e, lastEvent, inChartArea, isClick) {\n  if (!inChartArea || e.type === 'mouseout') {\n    return null;\n  }\n  if (isClick) {\n    return lastEvent;\n  }\n  return e;\n}\nclass Chart {\n  constructor(item, userConfig) {\n    const config = this.config = new Config(userConfig);\n    const initialCanvas = getCanvas(item);\n    const existingChart = getChart(initialCanvas);\n    if (existingChart) {\n      throw new Error(\n        'Canvas is already in use. Chart with ID \\'' + existingChart.id + '\\'' +\n\t\t\t\t' must be destroyed before the canvas with ID \\'' + existingChart.canvas.id + '\\' can be reused.'\n      );\n    }\n    const options = config.createResolver(config.chartOptionScopes(), this.getContext());\n    this.platform = new (config.platform || _detectPlatform(initialCanvas))();\n    this.platform.updateConfig(config);\n    const context = this.platform.acquireContext(initialCanvas, options.aspectRatio);\n    const canvas = context && context.canvas;\n    const height = canvas && canvas.height;\n    const width = canvas && canvas.width;\n    this.id = uid();\n    this.ctx = context;\n    this.canvas = canvas;\n    this.width = width;\n    this.height = height;\n    this._options = options;\n    this._aspectRatio = this.aspectRatio;\n    this._layers = [];\n    this._metasets = [];\n    this._stacks = undefined;\n    this.boxes = [];\n    this.currentDevicePixelRatio = undefined;\n    this.chartArea = undefined;\n    this._active = [];\n    this._lastEvent = undefined;\n    this._listeners = {};\n    this._responsiveListeners = undefined;\n    this._sortedMetasets = [];\n    this.scales = {};\n    this._plugins = new PluginService();\n    this.$proxies = {};\n    this._hiddenIndices = {};\n    this.attached = false;\n    this._animationsDisabled = undefined;\n    this.$context = undefined;\n    this._doResize = debounce(mode => this.update(mode), options.resizeDelay || 0);\n    this._dataChanges = [];\n    instances[this.id] = this;\n    if (!context || !canvas) {\n      console.error(\"Failed to create chart: can't acquire context from the given item\");\n      return;\n    }\n    animator.listen(this, 'complete', onAnimationsComplete);\n    animator.listen(this, 'progress', onAnimationProgress);\n    this._initialize();\n    if (this.attached) {\n      this.update();\n    }\n  }\n  get aspectRatio() {\n    const {options: {aspectRatio, maintainAspectRatio}, width, height, _aspectRatio} = this;\n    if (!isNullOrUndef(aspectRatio)) {\n      return aspectRatio;\n    }\n    if (maintainAspectRatio && _aspectRatio) {\n      return _aspectRatio;\n    }\n    return height ? width / height : null;\n  }\n  get data() {\n    return this.config.data;\n  }\n  set data(data) {\n    this.config.data = data;\n  }\n  get options() {\n    return this._options;\n  }\n  set options(options) {\n    this.config.options = options;\n  }\n  _initialize() {\n    this.notifyPlugins('beforeInit');\n    if (this.options.responsive) {\n      this.resize();\n    } else {\n      retinaScale(this, this.options.devicePixelRatio);\n    }\n    this.bindEvents();\n    this.notifyPlugins('afterInit');\n    return this;\n  }\n  clear() {\n    clearCanvas(this.canvas, this.ctx);\n    return this;\n  }\n  stop() {\n    animator.stop(this);\n    return this;\n  }\n  resize(width, height) {\n    if (!animator.running(this)) {\n      this._resize(width, height);\n    } else {\n      this._resizeBeforeDraw = {width, height};\n    }\n  }\n  _resize(width, height) {\n    const options = this.options;\n    const canvas = this.canvas;\n    const aspectRatio = options.maintainAspectRatio && this.aspectRatio;\n    const newSize = this.platform.getMaximumSize(canvas, width, height, aspectRatio);\n    const newRatio = options.devicePixelRatio || this.platform.getDevicePixelRatio();\n    const mode = this.width ? 'resize' : 'attach';\n    this.width = newSize.width;\n    this.height = newSize.height;\n    this._aspectRatio = this.aspectRatio;\n    if (!retinaScale(this, newRatio, true)) {\n      return;\n    }\n    this.notifyPlugins('resize', {size: newSize});\n    callback(options.onResize, [this, newSize], this);\n    if (this.attached) {\n      if (this._doResize(mode)) {\n        this.render();\n      }\n    }\n  }\n  ensureScalesHaveIDs() {\n    const options = this.options;\n    const scalesOptions = options.scales || {};\n    each(scalesOptions, (axisOptions, axisID) => {\n      axisOptions.id = axisID;\n    });\n  }\n  buildOrUpdateScales() {\n    const options = this.options;\n    const scaleOpts = options.scales;\n    const scales = this.scales;\n    const updated = Object.keys(scales).reduce((obj, id) => {\n      obj[id] = false;\n      return obj;\n    }, {});\n    let items = [];\n    if (scaleOpts) {\n      items = items.concat(\n        Object.keys(scaleOpts).map((id) => {\n          const scaleOptions = scaleOpts[id];\n          const axis = determineAxis(id, scaleOptions);\n          const isRadial = axis === 'r';\n          const isHorizontal = axis === 'x';\n          return {\n            options: scaleOptions,\n            dposition: isRadial ? 'chartArea' : isHorizontal ? 'bottom' : 'left',\n            dtype: isRadial ? 'radialLinear' : isHorizontal ? 'category' : 'linear'\n          };\n        })\n      );\n    }\n    each(items, (item) => {\n      const scaleOptions = item.options;\n      const id = scaleOptions.id;\n      const axis = determineAxis(id, scaleOptions);\n      const scaleType = valueOrDefault(scaleOptions.type, item.dtype);\n      if (scaleOptions.position === undefined || positionIsHorizontal(scaleOptions.position, axis) !== positionIsHorizontal(item.dposition)) {\n        scaleOptions.position = item.dposition;\n      }\n      updated[id] = true;\n      let scale = null;\n      if (id in scales && scales[id].type === scaleType) {\n        scale = scales[id];\n      } else {\n        const scaleClass = registry.getScale(scaleType);\n        scale = new scaleClass({\n          id,\n          type: scaleType,\n          ctx: this.ctx,\n          chart: this\n        });\n        scales[scale.id] = scale;\n      }\n      scale.init(scaleOptions, options);\n    });\n    each(updated, (hasUpdated, id) => {\n      if (!hasUpdated) {\n        delete scales[id];\n      }\n    });\n    each(scales, (scale) => {\n      layouts.configure(this, scale, scale.options);\n      layouts.addBox(this, scale);\n    });\n  }\n  _updateMetasets() {\n    const metasets = this._metasets;\n    const numData = this.data.datasets.length;\n    const numMeta = metasets.length;\n    metasets.sort((a, b) => a.index - b.index);\n    if (numMeta > numData) {\n      for (let i = numData; i < numMeta; ++i) {\n        this._destroyDatasetMeta(i);\n      }\n      metasets.splice(numData, numMeta - numData);\n    }\n    this._sortedMetasets = metasets.slice(0).sort(compare2Level('order', 'index'));\n  }\n  _removeUnreferencedMetasets() {\n    const {_metasets: metasets, data: {datasets}} = this;\n    if (metasets.length > datasets.length) {\n      delete this._stacks;\n    }\n    metasets.forEach((meta, index) => {\n      if (datasets.filter(x => x === meta._dataset).length === 0) {\n        this._destroyDatasetMeta(index);\n      }\n    });\n  }\n  buildOrUpdateControllers() {\n    const newControllers = [];\n    const datasets = this.data.datasets;\n    let i, ilen;\n    this._removeUnreferencedMetasets();\n    for (i = 0, ilen = datasets.length; i < ilen; i++) {\n      const dataset = datasets[i];\n      let meta = this.getDatasetMeta(i);\n      const type = dataset.type || this.config.type;\n      if (meta.type && meta.type !== type) {\n        this._destroyDatasetMeta(i);\n        meta = this.getDatasetMeta(i);\n      }\n      meta.type = type;\n      meta.indexAxis = dataset.indexAxis || getIndexAxis(type, this.options);\n      meta.order = dataset.order || 0;\n      meta.index = i;\n      meta.label = '' + dataset.label;\n      meta.visible = this.isDatasetVisible(i);\n      if (meta.controller) {\n        meta.controller.updateIndex(i);\n        meta.controller.linkScales();\n      } else {\n        const ControllerClass = registry.getController(type);\n        const {datasetElementType, dataElementType} = defaults.datasets[type];\n        Object.assign(ControllerClass.prototype, {\n          dataElementType: registry.getElement(dataElementType),\n          datasetElementType: datasetElementType && registry.getElement(datasetElementType)\n        });\n        meta.controller = new ControllerClass(this, i);\n        newControllers.push(meta.controller);\n      }\n    }\n    this._updateMetasets();\n    return newControllers;\n  }\n  _resetElements() {\n    each(this.data.datasets, (dataset, datasetIndex) => {\n      this.getDatasetMeta(datasetIndex).controller.reset();\n    }, this);\n  }\n  reset() {\n    this._resetElements();\n    this.notifyPlugins('reset');\n  }\n  update(mode) {\n    const config = this.config;\n    config.update();\n    const options = this._options = config.createResolver(config.chartOptionScopes(), this.getContext());\n    const animsDisabled = this._animationsDisabled = !options.animation;\n    this._updateScales();\n    this._checkEventBindings();\n    this._updateHiddenIndices();\n    this._plugins.invalidate();\n    if (this.notifyPlugins('beforeUpdate', {mode, cancelable: true}) === false) {\n      return;\n    }\n    const newControllers = this.buildOrUpdateControllers();\n    this.notifyPlugins('beforeElementsUpdate');\n    let minPadding = 0;\n    for (let i = 0, ilen = this.data.datasets.length; i < ilen; i++) {\n      const {controller} = this.getDatasetMeta(i);\n      const reset = !animsDisabled && newControllers.indexOf(controller) === -1;\n      controller.buildOrUpdateElements(reset);\n      minPadding = Math.max(+controller.getMaxOverflow(), minPadding);\n    }\n    minPadding = this._minPadding = options.layout.autoPadding ? minPadding : 0;\n    this._updateLayout(minPadding);\n    if (!animsDisabled) {\n      each(newControllers, (controller) => {\n        controller.reset();\n      });\n    }\n    this._updateDatasets(mode);\n    this.notifyPlugins('afterUpdate', {mode});\n    this._layers.sort(compare2Level('z', '_idx'));\n    const {_active, _lastEvent} = this;\n    if (_lastEvent) {\n      this._eventHandler(_lastEvent, true);\n    } else if (_active.length) {\n      this._updateHoverStyles(_active, _active, true);\n    }\n    this.render();\n  }\n  _updateScales() {\n    each(this.scales, (scale) => {\n      layouts.removeBox(this, scale);\n    });\n    this.ensureScalesHaveIDs();\n    this.buildOrUpdateScales();\n  }\n  _checkEventBindings() {\n    const options = this.options;\n    const existingEvents = new Set(Object.keys(this._listeners));\n    const newEvents = new Set(options.events);\n    if (!setsEqual(existingEvents, newEvents) || !!this._responsiveListeners !== options.responsive) {\n      this.unbindEvents();\n      this.bindEvents();\n    }\n  }\n  _updateHiddenIndices() {\n    const {_hiddenIndices} = this;\n    const changes = this._getUniformDataChanges() || [];\n    for (const {method, start, count} of changes) {\n      const move = method === '_removeElements' ? -count : count;\n      moveNumericKeys(_hiddenIndices, start, move);\n    }\n  }\n  _getUniformDataChanges() {\n    const _dataChanges = this._dataChanges;\n    if (!_dataChanges || !_dataChanges.length) {\n      return;\n    }\n    this._dataChanges = [];\n    const datasetCount = this.data.datasets.length;\n    const makeSet = (idx) => new Set(\n      _dataChanges\n        .filter(c => c[0] === idx)\n        .map((c, i) => i + ',' + c.splice(1).join(','))\n    );\n    const changeSet = makeSet(0);\n    for (let i = 1; i < datasetCount; i++) {\n      if (!setsEqual(changeSet, makeSet(i))) {\n        return;\n      }\n    }\n    return Array.from(changeSet)\n      .map(c => c.split(','))\n      .map(a => ({method: a[1], start: +a[2], count: +a[3]}));\n  }\n  _updateLayout(minPadding) {\n    if (this.notifyPlugins('beforeLayout', {cancelable: true}) === false) {\n      return;\n    }\n    layouts.update(this, this.width, this.height, minPadding);\n    const area = this.chartArea;\n    const noArea = area.width <= 0 || area.height <= 0;\n    this._layers = [];\n    each(this.boxes, (box) => {\n      if (noArea && box.position === 'chartArea') {\n        return;\n      }\n      if (box.configure) {\n        box.configure();\n      }\n      this._layers.push(...box._layers());\n    }, this);\n    this._layers.forEach((item, index) => {\n      item._idx = index;\n    });\n    this.notifyPlugins('afterLayout');\n  }\n  _updateDatasets(mode) {\n    if (this.notifyPlugins('beforeDatasetsUpdate', {mode, cancelable: true}) === false) {\n      return;\n    }\n    for (let i = 0, ilen = this.data.datasets.length; i < ilen; ++i) {\n      this.getDatasetMeta(i).controller.configure();\n    }\n    for (let i = 0, ilen = this.data.datasets.length; i < ilen; ++i) {\n      this._updateDataset(i, isFunction(mode) ? mode({datasetIndex: i}) : mode);\n    }\n    this.notifyPlugins('afterDatasetsUpdate', {mode});\n  }\n  _updateDataset(index, mode) {\n    const meta = this.getDatasetMeta(index);\n    const args = {meta, index, mode, cancelable: true};\n    if (this.notifyPlugins('beforeDatasetUpdate', args) === false) {\n      return;\n    }\n    meta.controller._update(mode);\n    args.cancelable = false;\n    this.notifyPlugins('afterDatasetUpdate', args);\n  }\n  render() {\n    if (this.notifyPlugins('beforeRender', {cancelable: true}) === false) {\n      return;\n    }\n    if (animator.has(this)) {\n      if (this.attached && !animator.running(this)) {\n        animator.start(this);\n      }\n    } else {\n      this.draw();\n      onAnimationsComplete({chart: this});\n    }\n  }\n  draw() {\n    let i;\n    if (this._resizeBeforeDraw) {\n      const {width, height} = this._resizeBeforeDraw;\n      this._resize(width, height);\n      this._resizeBeforeDraw = null;\n    }\n    this.clear();\n    if (this.width <= 0 || this.height <= 0) {\n      return;\n    }\n    if (this.notifyPlugins('beforeDraw', {cancelable: true}) === false) {\n      return;\n    }\n    const layers = this._layers;\n    for (i = 0; i < layers.length && layers[i].z <= 0; ++i) {\n      layers[i].draw(this.chartArea);\n    }\n    this._drawDatasets();\n    for (; i < layers.length; ++i) {\n      layers[i].draw(this.chartArea);\n    }\n    this.notifyPlugins('afterDraw');\n  }\n  _getSortedDatasetMetas(filterVisible) {\n    const metasets = this._sortedMetasets;\n    const result = [];\n    let i, ilen;\n    for (i = 0, ilen = metasets.length; i < ilen; ++i) {\n      const meta = metasets[i];\n      if (!filterVisible || meta.visible) {\n        result.push(meta);\n      }\n    }\n    return result;\n  }\n  getSortedVisibleDatasetMetas() {\n    return this._getSortedDatasetMetas(true);\n  }\n  _drawDatasets() {\n    if (this.notifyPlugins('beforeDatasetsDraw', {cancelable: true}) === false) {\n      return;\n    }\n    const metasets = this.getSortedVisibleDatasetMetas();\n    for (let i = metasets.length - 1; i >= 0; --i) {\n      this._drawDataset(metasets[i]);\n    }\n    this.notifyPlugins('afterDatasetsDraw');\n  }\n  _drawDataset(meta) {\n    const ctx = this.ctx;\n    const clip = meta._clip;\n    const useClip = !clip.disabled;\n    const area = this.chartArea;\n    const args = {\n      meta,\n      index: meta.index,\n      cancelable: true\n    };\n    if (this.notifyPlugins('beforeDatasetDraw', args) === false) {\n      return;\n    }\n    if (useClip) {\n      clipArea(ctx, {\n        left: clip.left === false ? 0 : area.left - clip.left,\n        right: clip.right === false ? this.width : area.right + clip.right,\n        top: clip.top === false ? 0 : area.top - clip.top,\n        bottom: clip.bottom === false ? this.height : area.bottom + clip.bottom\n      });\n    }\n    meta.controller.draw();\n    if (useClip) {\n      unclipArea(ctx);\n    }\n    args.cancelable = false;\n    this.notifyPlugins('afterDatasetDraw', args);\n  }\n  isPointInArea(point) {\n    return _isPointInArea(point, this.chartArea, this._minPadding);\n  }\n  getElementsAtEventForMode(e, mode, options, useFinalPosition) {\n    const method = Interaction.modes[mode];\n    if (typeof method === 'function') {\n      return method(this, e, options, useFinalPosition);\n    }\n    return [];\n  }\n  getDatasetMeta(datasetIndex) {\n    const dataset = this.data.datasets[datasetIndex];\n    const metasets = this._metasets;\n    let meta = metasets.filter(x => x && x._dataset === dataset).pop();\n    if (!meta) {\n      meta = {\n        type: null,\n        data: [],\n        dataset: null,\n        controller: null,\n        hidden: null,\n        xAxisID: null,\n        yAxisID: null,\n        order: dataset && dataset.order || 0,\n        index: datasetIndex,\n        _dataset: dataset,\n        _parsed: [],\n        _sorted: false\n      };\n      metasets.push(meta);\n    }\n    return meta;\n  }\n  getContext() {\n    return this.$context || (this.$context = createContext(null, {chart: this, type: 'chart'}));\n  }\n  getVisibleDatasetCount() {\n    return this.getSortedVisibleDatasetMetas().length;\n  }\n  isDatasetVisible(datasetIndex) {\n    const dataset = this.data.datasets[datasetIndex];\n    if (!dataset) {\n      return false;\n    }\n    const meta = this.getDatasetMeta(datasetIndex);\n    return typeof meta.hidden === 'boolean' ? !meta.hidden : !dataset.hidden;\n  }\n  setDatasetVisibility(datasetIndex, visible) {\n    const meta = this.getDatasetMeta(datasetIndex);\n    meta.hidden = !visible;\n  }\n  toggleDataVisibility(index) {\n    this._hiddenIndices[index] = !this._hiddenIndices[index];\n  }\n  getDataVisibility(index) {\n    return !this._hiddenIndices[index];\n  }\n  _updateVisibility(datasetIndex, dataIndex, visible) {\n    const mode = visible ? 'show' : 'hide';\n    const meta = this.getDatasetMeta(datasetIndex);\n    const anims = meta.controller._resolveAnimations(undefined, mode);\n    if (defined(dataIndex)) {\n      meta.data[dataIndex].hidden = !visible;\n      this.update();\n    } else {\n      this.setDatasetVisibility(datasetIndex, visible);\n      anims.update(meta, {visible});\n      this.update((ctx) => ctx.datasetIndex === datasetIndex ? mode : undefined);\n    }\n  }\n  hide(datasetIndex, dataIndex) {\n    this._updateVisibility(datasetIndex, dataIndex, false);\n  }\n  show(datasetIndex, dataIndex) {\n    this._updateVisibility(datasetIndex, dataIndex, true);\n  }\n  _destroyDatasetMeta(datasetIndex) {\n    const meta = this._metasets[datasetIndex];\n    if (meta && meta.controller) {\n      meta.controller._destroy();\n    }\n    delete this._metasets[datasetIndex];\n  }\n  _stop() {\n    let i, ilen;\n    this.stop();\n    animator.remove(this);\n    for (i = 0, ilen = this.data.datasets.length; i < ilen; ++i) {\n      this._destroyDatasetMeta(i);\n    }\n  }\n  destroy() {\n    this.notifyPlugins('beforeDestroy');\n    const {canvas, ctx} = this;\n    this._stop();\n    this.config.clearCache();\n    if (canvas) {\n      this.unbindEvents();\n      clearCanvas(canvas, ctx);\n      this.platform.releaseContext(ctx);\n      this.canvas = null;\n      this.ctx = null;\n    }\n    this.notifyPlugins('destroy');\n    delete instances[this.id];\n    this.notifyPlugins('afterDestroy');\n  }\n  toBase64Image(...args) {\n    return this.canvas.toDataURL(...args);\n  }\n  bindEvents() {\n    this.bindUserEvents();\n    if (this.options.responsive) {\n      this.bindResponsiveEvents();\n    } else {\n      this.attached = true;\n    }\n  }\n  bindUserEvents() {\n    const listeners = this._listeners;\n    const platform = this.platform;\n    const _add = (type, listener) => {\n      platform.addEventListener(this, type, listener);\n      listeners[type] = listener;\n    };\n    const listener = (e, x, y) => {\n      e.offsetX = x;\n      e.offsetY = y;\n      this._eventHandler(e);\n    };\n    each(this.options.events, (type) => _add(type, listener));\n  }\n  bindResponsiveEvents() {\n    if (!this._responsiveListeners) {\n      this._responsiveListeners = {};\n    }\n    const listeners = this._responsiveListeners;\n    const platform = this.platform;\n    const _add = (type, listener) => {\n      platform.addEventListener(this, type, listener);\n      listeners[type] = listener;\n    };\n    const _remove = (type, listener) => {\n      if (listeners[type]) {\n        platform.removeEventListener(this, type, listener);\n        delete listeners[type];\n      }\n    };\n    const listener = (width, height) => {\n      if (this.canvas) {\n        this.resize(width, height);\n      }\n    };\n    let detached;\n    const attached = () => {\n      _remove('attach', attached);\n      this.attached = true;\n      this.resize();\n      _add('resize', listener);\n      _add('detach', detached);\n    };\n    detached = () => {\n      this.attached = false;\n      _remove('resize', listener);\n      this._stop();\n      this._resize(0, 0);\n      _add('attach', attached);\n    };\n    if (platform.isAttached(this.canvas)) {\n      attached();\n    } else {\n      detached();\n    }\n  }\n  unbindEvents() {\n    each(this._listeners, (listener, type) => {\n      this.platform.removeEventListener(this, type, listener);\n    });\n    this._listeners = {};\n    each(this._responsiveListeners, (listener, type) => {\n      this.platform.removeEventListener(this, type, listener);\n    });\n    this._responsiveListeners = undefined;\n  }\n  updateHoverStyle(items, mode, enabled) {\n    const prefix = enabled ? 'set' : 'remove';\n    let meta, item, i, ilen;\n    if (mode === 'dataset') {\n      meta = this.getDatasetMeta(items[0].datasetIndex);\n      meta.controller['_' + prefix + 'DatasetHoverStyle']();\n    }\n    for (i = 0, ilen = items.length; i < ilen; ++i) {\n      item = items[i];\n      const controller = item && this.getDatasetMeta(item.datasetIndex).controller;\n      if (controller) {\n        controller[prefix + 'HoverStyle'](item.element, item.datasetIndex, item.index);\n      }\n    }\n  }\n  getActiveElements() {\n    return this._active || [];\n  }\n  setActiveElements(activeElements) {\n    const lastActive = this._active || [];\n    const active = activeElements.map(({datasetIndex, index}) => {\n      const meta = this.getDatasetMeta(datasetIndex);\n      if (!meta) {\n        throw new Error('No dataset found at index ' + datasetIndex);\n      }\n      return {\n        datasetIndex,\n        element: meta.data[index],\n        index,\n      };\n    });\n    const changed = !_elementsEqual(active, lastActive);\n    if (changed) {\n      this._active = active;\n      this._lastEvent = null;\n      this._updateHoverStyles(active, lastActive);\n    }\n  }\n  notifyPlugins(hook, args, filter) {\n    return this._plugins.notify(this, hook, args, filter);\n  }\n  _updateHoverStyles(active, lastActive, replay) {\n    const hoverOptions = this.options.hover;\n    const diff = (a, b) => a.filter(x => !b.some(y => x.datasetIndex === y.datasetIndex && x.index === y.index));\n    const deactivated = diff(lastActive, active);\n    const activated = replay ? active : diff(active, lastActive);\n    if (deactivated.length) {\n      this.updateHoverStyle(deactivated, hoverOptions.mode, false);\n    }\n    if (activated.length && hoverOptions.mode) {\n      this.updateHoverStyle(activated, hoverOptions.mode, true);\n    }\n  }\n  _eventHandler(e, replay) {\n    const args = {\n      event: e,\n      replay,\n      cancelable: true,\n      inChartArea: this.isPointInArea(e)\n    };\n    const eventFilter = (plugin) => (plugin.options.events || this.options.events).includes(e.native.type);\n    if (this.notifyPlugins('beforeEvent', args, eventFilter) === false) {\n      return;\n    }\n    const changed = this._handleEvent(e, replay, args.inChartArea);\n    args.cancelable = false;\n    this.notifyPlugins('afterEvent', args, eventFilter);\n    if (changed || args.changed) {\n      this.render();\n    }\n    return this;\n  }\n  _handleEvent(e, replay, inChartArea) {\n    const {_active: lastActive = [], options} = this;\n    const useFinalPosition = replay;\n    const active = this._getActiveElements(e, lastActive, inChartArea, useFinalPosition);\n    const isClick = _isClickEvent(e);\n    const lastEvent = determineLastEvent(e, this._lastEvent, inChartArea, isClick);\n    if (inChartArea) {\n      this._lastEvent = null;\n      callback(options.onHover, [e, active, this], this);\n      if (isClick) {\n        callback(options.onClick, [e, active, this], this);\n      }\n    }\n    const changed = !_elementsEqual(active, lastActive);\n    if (changed || replay) {\n      this._active = active;\n      this._updateHoverStyles(active, lastActive, replay);\n    }\n    this._lastEvent = lastEvent;\n    return changed;\n  }\n  _getActiveElements(e, lastActive, inChartArea, useFinalPosition) {\n    if (e.type === 'mouseout') {\n      return [];\n    }\n    if (!inChartArea) {\n      return lastActive;\n    }\n    const hoverOptions = this.options.hover;\n    return this.getElementsAtEventForMode(e, hoverOptions.mode, hoverOptions, useFinalPosition);\n  }\n}\nconst invalidatePlugins = () => each(Chart.instances, (chart) => chart._plugins.invalidate());\nconst enumerable = true;\nObject.defineProperties(Chart, {\n  defaults: {\n    enumerable,\n    value: defaults\n  },\n  instances: {\n    enumerable,\n    value: instances\n  },\n  overrides: {\n    enumerable,\n    value: overrides\n  },\n  registry: {\n    enumerable,\n    value: registry\n  },\n  version: {\n    enumerable,\n    value: version\n  },\n  getChart: {\n    enumerable,\n    value: getChart\n  },\n  register: {\n    enumerable,\n    value: (...items) => {\n      registry.add(...items);\n      invalidatePlugins();\n    }\n  },\n  unregister: {\n    enumerable,\n    value: (...items) => {\n      registry.remove(...items);\n      invalidatePlugins();\n    }\n  }\n});\n\nfunction clipArc(ctx, element, endAngle) {\n  const {startAngle, pixelMargin, x, y, outerRadius, innerRadius} = element;\n  let angleMargin = pixelMargin / outerRadius;\n  ctx.beginPath();\n  ctx.arc(x, y, outerRadius, startAngle - angleMargin, endAngle + angleMargin);\n  if (innerRadius > pixelMargin) {\n    angleMargin = pixelMargin / innerRadius;\n    ctx.arc(x, y, innerRadius, endAngle + angleMargin, startAngle - angleMargin, true);\n  } else {\n    ctx.arc(x, y, pixelMargin, endAngle + HALF_PI, startAngle - HALF_PI);\n  }\n  ctx.closePath();\n  ctx.clip();\n}\nfunction toRadiusCorners(value) {\n  return _readValueToProps(value, ['outerStart', 'outerEnd', 'innerStart', 'innerEnd']);\n}\nfunction parseBorderRadius$1(arc, innerRadius, outerRadius, angleDelta) {\n  const o = toRadiusCorners(arc.options.borderRadius);\n  const halfThickness = (outerRadius - innerRadius) / 2;\n  const innerLimit = Math.min(halfThickness, angleDelta * innerRadius / 2);\n  const computeOuterLimit = (val) => {\n    const outerArcLimit = (outerRadius - Math.min(halfThickness, val)) * angleDelta / 2;\n    return _limitValue(val, 0, Math.min(halfThickness, outerArcLimit));\n  };\n  return {\n    outerStart: computeOuterLimit(o.outerStart),\n    outerEnd: computeOuterLimit(o.outerEnd),\n    innerStart: _limitValue(o.innerStart, 0, innerLimit),\n    innerEnd: _limitValue(o.innerEnd, 0, innerLimit),\n  };\n}\nfunction rThetaToXY(r, theta, x, y) {\n  return {\n    x: x + r * Math.cos(theta),\n    y: y + r * Math.sin(theta),\n  };\n}\nfunction pathArc(ctx, element, offset, spacing, end, circular) {\n  const {x, y, startAngle: start, pixelMargin, innerRadius: innerR} = element;\n  const outerRadius = Math.max(element.outerRadius + spacing + offset - pixelMargin, 0);\n  const innerRadius = innerR > 0 ? innerR + spacing + offset + pixelMargin : 0;\n  let spacingOffset = 0;\n  const alpha = end - start;\n  if (spacing) {\n    const noSpacingInnerRadius = innerR > 0 ? innerR - spacing : 0;\n    const noSpacingOuterRadius = outerRadius > 0 ? outerRadius - spacing : 0;\n    const avNogSpacingRadius = (noSpacingInnerRadius + noSpacingOuterRadius) / 2;\n    const adjustedAngle = avNogSpacingRadius !== 0 ? (alpha * avNogSpacingRadius) / (avNogSpacingRadius + spacing) : alpha;\n    spacingOffset = (alpha - adjustedAngle) / 2;\n  }\n  const beta = Math.max(0.001, alpha * outerRadius - offset / PI) / outerRadius;\n  const angleOffset = (alpha - beta) / 2;\n  const startAngle = start + angleOffset + spacingOffset;\n  const endAngle = end - angleOffset - spacingOffset;\n  const {outerStart, outerEnd, innerStart, innerEnd} = parseBorderRadius$1(element, innerRadius, outerRadius, endAngle - startAngle);\n  const outerStartAdjustedRadius = outerRadius - outerStart;\n  const outerEndAdjustedRadius = outerRadius - outerEnd;\n  const outerStartAdjustedAngle = startAngle + outerStart / outerStartAdjustedRadius;\n  const outerEndAdjustedAngle = endAngle - outerEnd / outerEndAdjustedRadius;\n  const innerStartAdjustedRadius = innerRadius + innerStart;\n  const innerEndAdjustedRadius = innerRadius + innerEnd;\n  const innerStartAdjustedAngle = startAngle + innerStart / innerStartAdjustedRadius;\n  const innerEndAdjustedAngle = endAngle - innerEnd / innerEndAdjustedRadius;\n  ctx.beginPath();\n  if (circular) {\n    ctx.arc(x, y, outerRadius, outerStartAdjustedAngle, outerEndAdjustedAngle);\n    if (outerEnd > 0) {\n      const pCenter = rThetaToXY(outerEndAdjustedRadius, outerEndAdjustedAngle, x, y);\n      ctx.arc(pCenter.x, pCenter.y, outerEnd, outerEndAdjustedAngle, endAngle + HALF_PI);\n    }\n    const p4 = rThetaToXY(innerEndAdjustedRadius, endAngle, x, y);\n    ctx.lineTo(p4.x, p4.y);\n    if (innerEnd > 0) {\n      const pCenter = rThetaToXY(innerEndAdjustedRadius, innerEndAdjustedAngle, x, y);\n      ctx.arc(pCenter.x, pCenter.y, innerEnd, endAngle + HALF_PI, innerEndAdjustedAngle + Math.PI);\n    }\n    ctx.arc(x, y, innerRadius, endAngle - (innerEnd / innerRadius), startAngle + (innerStart / innerRadius), true);\n    if (innerStart > 0) {\n      const pCenter = rThetaToXY(innerStartAdjustedRadius, innerStartAdjustedAngle, x, y);\n      ctx.arc(pCenter.x, pCenter.y, innerStart, innerStartAdjustedAngle + Math.PI, startAngle - HALF_PI);\n    }\n    const p8 = rThetaToXY(outerStartAdjustedRadius, startAngle, x, y);\n    ctx.lineTo(p8.x, p8.y);\n    if (outerStart > 0) {\n      const pCenter = rThetaToXY(outerStartAdjustedRadius, outerStartAdjustedAngle, x, y);\n      ctx.arc(pCenter.x, pCenter.y, outerStart, startAngle - HALF_PI, outerStartAdjustedAngle);\n    }\n  } else {\n    ctx.moveTo(x, y);\n    const outerStartX = Math.cos(outerStartAdjustedAngle) * outerRadius + x;\n    const outerStartY = Math.sin(outerStartAdjustedAngle) * outerRadius + y;\n    ctx.lineTo(outerStartX, outerStartY);\n    const outerEndX = Math.cos(outerEndAdjustedAngle) * outerRadius + x;\n    const outerEndY = Math.sin(outerEndAdjustedAngle) * outerRadius + y;\n    ctx.lineTo(outerEndX, outerEndY);\n  }\n  ctx.closePath();\n}\nfunction drawArc(ctx, element, offset, spacing, circular) {\n  const {fullCircles, startAngle, circumference} = element;\n  let endAngle = element.endAngle;\n  if (fullCircles) {\n    pathArc(ctx, element, offset, spacing, startAngle + TAU, circular);\n    for (let i = 0; i < fullCircles; ++i) {\n      ctx.fill();\n    }\n    if (!isNaN(circumference)) {\n      endAngle = startAngle + circumference % TAU;\n      if (circumference % TAU === 0) {\n        endAngle += TAU;\n      }\n    }\n  }\n  pathArc(ctx, element, offset, spacing, endAngle, circular);\n  ctx.fill();\n  return endAngle;\n}\nfunction drawFullCircleBorders(ctx, element, inner) {\n  const {x, y, startAngle, pixelMargin, fullCircles} = element;\n  const outerRadius = Math.max(element.outerRadius - pixelMargin, 0);\n  const innerRadius = element.innerRadius + pixelMargin;\n  let i;\n  if (inner) {\n    clipArc(ctx, element, startAngle + TAU);\n  }\n  ctx.beginPath();\n  ctx.arc(x, y, innerRadius, startAngle + TAU, startAngle, true);\n  for (i = 0; i < fullCircles; ++i) {\n    ctx.stroke();\n  }\n  ctx.beginPath();\n  ctx.arc(x, y, outerRadius, startAngle, startAngle + TAU);\n  for (i = 0; i < fullCircles; ++i) {\n    ctx.stroke();\n  }\n}\nfunction drawBorder(ctx, element, offset, spacing, endAngle, circular) {\n  const {options} = element;\n  const {borderWidth, borderJoinStyle} = options;\n  const inner = options.borderAlign === 'inner';\n  if (!borderWidth) {\n    return;\n  }\n  if (inner) {\n    ctx.lineWidth = borderWidth * 2;\n    ctx.lineJoin = borderJoinStyle || 'round';\n  } else {\n    ctx.lineWidth = borderWidth;\n    ctx.lineJoin = borderJoinStyle || 'bevel';\n  }\n  if (element.fullCircles) {\n    drawFullCircleBorders(ctx, element, inner);\n  }\n  if (inner) {\n    clipArc(ctx, element, endAngle);\n  }\n  pathArc(ctx, element, offset, spacing, endAngle, circular);\n  ctx.stroke();\n}\nclass ArcElement extends Element {\n  constructor(cfg) {\n    super();\n    this.options = undefined;\n    this.circumference = undefined;\n    this.startAngle = undefined;\n    this.endAngle = undefined;\n    this.innerRadius = undefined;\n    this.outerRadius = undefined;\n    this.pixelMargin = 0;\n    this.fullCircles = 0;\n    if (cfg) {\n      Object.assign(this, cfg);\n    }\n  }\n  inRange(chartX, chartY, useFinalPosition) {\n    const point = this.getProps(['x', 'y'], useFinalPosition);\n    const {angle, distance} = getAngleFromPoint(point, {x: chartX, y: chartY});\n    const {startAngle, endAngle, innerRadius, outerRadius, circumference} = this.getProps([\n      'startAngle',\n      'endAngle',\n      'innerRadius',\n      'outerRadius',\n      'circumference'\n    ], useFinalPosition);\n    const rAdjust = this.options.spacing / 2;\n    const _circumference = valueOrDefault(circumference, endAngle - startAngle);\n    const betweenAngles = _circumference >= TAU || _angleBetween(angle, startAngle, endAngle);\n    const withinRadius = _isBetween(distance, innerRadius + rAdjust, outerRadius + rAdjust);\n    return (betweenAngles && withinRadius);\n  }\n  getCenterPoint(useFinalPosition) {\n    const {x, y, startAngle, endAngle, innerRadius, outerRadius} = this.getProps([\n      'x',\n      'y',\n      'startAngle',\n      'endAngle',\n      'innerRadius',\n      'outerRadius',\n      'circumference',\n    ], useFinalPosition);\n    const {offset, spacing} = this.options;\n    const halfAngle = (startAngle + endAngle) / 2;\n    const halfRadius = (innerRadius + outerRadius + spacing + offset) / 2;\n    return {\n      x: x + Math.cos(halfAngle) * halfRadius,\n      y: y + Math.sin(halfAngle) * halfRadius\n    };\n  }\n  tooltipPosition(useFinalPosition) {\n    return this.getCenterPoint(useFinalPosition);\n  }\n  draw(ctx) {\n    const {options, circumference} = this;\n    const offset = (options.offset || 0) / 2;\n    const spacing = (options.spacing || 0) / 2;\n    const circular = options.circular;\n    this.pixelMargin = (options.borderAlign === 'inner') ? 0.33 : 0;\n    this.fullCircles = circumference > TAU ? Math.floor(circumference / TAU) : 0;\n    if (circumference === 0 || this.innerRadius < 0 || this.outerRadius < 0) {\n      return;\n    }\n    ctx.save();\n    let radiusOffset = 0;\n    if (offset) {\n      radiusOffset = offset / 2;\n      const halfAngle = (this.startAngle + this.endAngle) / 2;\n      ctx.translate(Math.cos(halfAngle) * radiusOffset, Math.sin(halfAngle) * radiusOffset);\n      if (this.circumference >= PI) {\n        radiusOffset = offset;\n      }\n    }\n    ctx.fillStyle = options.backgroundColor;\n    ctx.strokeStyle = options.borderColor;\n    const endAngle = drawArc(ctx, this, radiusOffset, spacing, circular);\n    drawBorder(ctx, this, radiusOffset, spacing, endAngle, circular);\n    ctx.restore();\n  }\n}\nArcElement.id = 'arc';\nArcElement.defaults = {\n  borderAlign: 'center',\n  borderColor: '#fff',\n  borderJoinStyle: undefined,\n  borderRadius: 0,\n  borderWidth: 2,\n  offset: 0,\n  spacing: 0,\n  angle: undefined,\n  circular: true,\n};\nArcElement.defaultRoutes = {\n  backgroundColor: 'backgroundColor'\n};\n\nfunction setStyle(ctx, options, style = options) {\n  ctx.lineCap = valueOrDefault(style.borderCapStyle, options.borderCapStyle);\n  ctx.setLineDash(valueOrDefault(style.borderDash, options.borderDash));\n  ctx.lineDashOffset = valueOrDefault(style.borderDashOffset, options.borderDashOffset);\n  ctx.lineJoin = valueOrDefault(style.borderJoinStyle, options.borderJoinStyle);\n  ctx.lineWidth = valueOrDefault(style.borderWidth, options.borderWidth);\n  ctx.strokeStyle = valueOrDefault(style.borderColor, options.borderColor);\n}\nfunction lineTo(ctx, previous, target) {\n  ctx.lineTo(target.x, target.y);\n}\nfunction getLineMethod(options) {\n  if (options.stepped) {\n    return _steppedLineTo;\n  }\n  if (options.tension || options.cubicInterpolationMode === 'monotone') {\n    return _bezierCurveTo;\n  }\n  return lineTo;\n}\nfunction pathVars(points, segment, params = {}) {\n  const count = points.length;\n  const {start: paramsStart = 0, end: paramsEnd = count - 1} = params;\n  const {start: segmentStart, end: segmentEnd} = segment;\n  const start = Math.max(paramsStart, segmentStart);\n  const end = Math.min(paramsEnd, segmentEnd);\n  const outside = paramsStart < segmentStart && paramsEnd < segmentStart || paramsStart > segmentEnd && paramsEnd > segmentEnd;\n  return {\n    count,\n    start,\n    loop: segment.loop,\n    ilen: end < start && !outside ? count + end - start : end - start\n  };\n}\nfunction pathSegment(ctx, line, segment, params) {\n  const {points, options} = line;\n  const {count, start, loop, ilen} = pathVars(points, segment, params);\n  const lineMethod = getLineMethod(options);\n  let {move = true, reverse} = params || {};\n  let i, point, prev;\n  for (i = 0; i <= ilen; ++i) {\n    point = points[(start + (reverse ? ilen - i : i)) % count];\n    if (point.skip) {\n      continue;\n    } else if (move) {\n      ctx.moveTo(point.x, point.y);\n      move = false;\n    } else {\n      lineMethod(ctx, prev, point, reverse, options.stepped);\n    }\n    prev = point;\n  }\n  if (loop) {\n    point = points[(start + (reverse ? ilen : 0)) % count];\n    lineMethod(ctx, prev, point, reverse, options.stepped);\n  }\n  return !!loop;\n}\nfunction fastPathSegment(ctx, line, segment, params) {\n  const points = line.points;\n  const {count, start, ilen} = pathVars(points, segment, params);\n  const {move = true, reverse} = params || {};\n  let avgX = 0;\n  let countX = 0;\n  let i, point, prevX, minY, maxY, lastY;\n  const pointIndex = (index) => (start + (reverse ? ilen - index : index)) % count;\n  const drawX = () => {\n    if (minY !== maxY) {\n      ctx.lineTo(avgX, maxY);\n      ctx.lineTo(avgX, minY);\n      ctx.lineTo(avgX, lastY);\n    }\n  };\n  if (move) {\n    point = points[pointIndex(0)];\n    ctx.moveTo(point.x, point.y);\n  }\n  for (i = 0; i <= ilen; ++i) {\n    point = points[pointIndex(i)];\n    if (point.skip) {\n      continue;\n    }\n    const x = point.x;\n    const y = point.y;\n    const truncX = x | 0;\n    if (truncX === prevX) {\n      if (y < minY) {\n        minY = y;\n      } else if (y > maxY) {\n        maxY = y;\n      }\n      avgX = (countX * avgX + x) / ++countX;\n    } else {\n      drawX();\n      ctx.lineTo(x, y);\n      prevX = truncX;\n      countX = 0;\n      minY = maxY = y;\n    }\n    lastY = y;\n  }\n  drawX();\n}\nfunction _getSegmentMethod(line) {\n  const opts = line.options;\n  const borderDash = opts.borderDash && opts.borderDash.length;\n  const useFastPath = !line._decimated && !line._loop && !opts.tension && opts.cubicInterpolationMode !== 'monotone' && !opts.stepped && !borderDash;\n  return useFastPath ? fastPathSegment : pathSegment;\n}\nfunction _getInterpolationMethod(options) {\n  if (options.stepped) {\n    return _steppedInterpolation;\n  }\n  if (options.tension || options.cubicInterpolationMode === 'monotone') {\n    return _bezierInterpolation;\n  }\n  return _pointInLine;\n}\nfunction strokePathWithCache(ctx, line, start, count) {\n  let path = line._path;\n  if (!path) {\n    path = line._path = new Path2D();\n    if (line.path(path, start, count)) {\n      path.closePath();\n    }\n  }\n  setStyle(ctx, line.options);\n  ctx.stroke(path);\n}\nfunction strokePathDirect(ctx, line, start, count) {\n  const {segments, options} = line;\n  const segmentMethod = _getSegmentMethod(line);\n  for (const segment of segments) {\n    setStyle(ctx, options, segment.style);\n    ctx.beginPath();\n    if (segmentMethod(ctx, line, segment, {start, end: start + count - 1})) {\n      ctx.closePath();\n    }\n    ctx.stroke();\n  }\n}\nconst usePath2D = typeof Path2D === 'function';\nfunction draw(ctx, line, start, count) {\n  if (usePath2D && !line.options.segment) {\n    strokePathWithCache(ctx, line, start, count);\n  } else {\n    strokePathDirect(ctx, line, start, count);\n  }\n}\nclass LineElement extends Element {\n  constructor(cfg) {\n    super();\n    this.animated = true;\n    this.options = undefined;\n    this._chart = undefined;\n    this._loop = undefined;\n    this._fullLoop = undefined;\n    this._path = undefined;\n    this._points = undefined;\n    this._segments = undefined;\n    this._decimated = false;\n    this._pointsUpdated = false;\n    this._datasetIndex = undefined;\n    if (cfg) {\n      Object.assign(this, cfg);\n    }\n  }\n  updateControlPoints(chartArea, indexAxis) {\n    const options = this.options;\n    if ((options.tension || options.cubicInterpolationMode === 'monotone') && !options.stepped && !this._pointsUpdated) {\n      const loop = options.spanGaps ? this._loop : this._fullLoop;\n      _updateBezierControlPoints(this._points, options, chartArea, loop, indexAxis);\n      this._pointsUpdated = true;\n    }\n  }\n  set points(points) {\n    this._points = points;\n    delete this._segments;\n    delete this._path;\n    this._pointsUpdated = false;\n  }\n  get points() {\n    return this._points;\n  }\n  get segments() {\n    return this._segments || (this._segments = _computeSegments(this, this.options.segment));\n  }\n  first() {\n    const segments = this.segments;\n    const points = this.points;\n    return segments.length && points[segments[0].start];\n  }\n  last() {\n    const segments = this.segments;\n    const points = this.points;\n    const count = segments.length;\n    return count && points[segments[count - 1].end];\n  }\n  interpolate(point, property) {\n    const options = this.options;\n    const value = point[property];\n    const points = this.points;\n    const segments = _boundSegments(this, {property, start: value, end: value});\n    if (!segments.length) {\n      return;\n    }\n    const result = [];\n    const _interpolate = _getInterpolationMethod(options);\n    let i, ilen;\n    for (i = 0, ilen = segments.length; i < ilen; ++i) {\n      const {start, end} = segments[i];\n      const p1 = points[start];\n      const p2 = points[end];\n      if (p1 === p2) {\n        result.push(p1);\n        continue;\n      }\n      const t = Math.abs((value - p1[property]) / (p2[property] - p1[property]));\n      const interpolated = _interpolate(p1, p2, t, options.stepped);\n      interpolated[property] = point[property];\n      result.push(interpolated);\n    }\n    return result.length === 1 ? result[0] : result;\n  }\n  pathSegment(ctx, segment, params) {\n    const segmentMethod = _getSegmentMethod(this);\n    return segmentMethod(ctx, this, segment, params);\n  }\n  path(ctx, start, count) {\n    const segments = this.segments;\n    const segmentMethod = _getSegmentMethod(this);\n    let loop = this._loop;\n    start = start || 0;\n    count = count || (this.points.length - start);\n    for (const segment of segments) {\n      loop &= segmentMethod(ctx, this, segment, {start, end: start + count - 1});\n    }\n    return !!loop;\n  }\n  draw(ctx, chartArea, start, count) {\n    const options = this.options || {};\n    const points = this.points || [];\n    if (points.length && options.borderWidth) {\n      ctx.save();\n      draw(ctx, this, start, count);\n      ctx.restore();\n    }\n    if (this.animated) {\n      this._pointsUpdated = false;\n      this._path = undefined;\n    }\n  }\n}\nLineElement.id = 'line';\nLineElement.defaults = {\n  borderCapStyle: 'butt',\n  borderDash: [],\n  borderDashOffset: 0,\n  borderJoinStyle: 'miter',\n  borderWidth: 3,\n  capBezierPoints: true,\n  cubicInterpolationMode: 'default',\n  fill: false,\n  spanGaps: false,\n  stepped: false,\n  tension: 0,\n};\nLineElement.defaultRoutes = {\n  backgroundColor: 'backgroundColor',\n  borderColor: 'borderColor'\n};\nLineElement.descriptors = {\n  _scriptable: true,\n  _indexable: (name) => name !== 'borderDash' && name !== 'fill',\n};\n\nfunction inRange$1(el, pos, axis, useFinalPosition) {\n  const options = el.options;\n  const {[axis]: value} = el.getProps([axis], useFinalPosition);\n  return (Math.abs(pos - value) < options.radius + options.hitRadius);\n}\nclass PointElement extends Element {\n  constructor(cfg) {\n    super();\n    this.options = undefined;\n    this.parsed = undefined;\n    this.skip = undefined;\n    this.stop = undefined;\n    if (cfg) {\n      Object.assign(this, cfg);\n    }\n  }\n  inRange(mouseX, mouseY, useFinalPosition) {\n    const options = this.options;\n    const {x, y} = this.getProps(['x', 'y'], useFinalPosition);\n    return ((Math.pow(mouseX - x, 2) + Math.pow(mouseY - y, 2)) < Math.pow(options.hitRadius + options.radius, 2));\n  }\n  inXRange(mouseX, useFinalPosition) {\n    return inRange$1(this, mouseX, 'x', useFinalPosition);\n  }\n  inYRange(mouseY, useFinalPosition) {\n    return inRange$1(this, mouseY, 'y', useFinalPosition);\n  }\n  getCenterPoint(useFinalPosition) {\n    const {x, y} = this.getProps(['x', 'y'], useFinalPosition);\n    return {x, y};\n  }\n  size(options) {\n    options = options || this.options || {};\n    let radius = options.radius || 0;\n    radius = Math.max(radius, radius && options.hoverRadius || 0);\n    const borderWidth = radius && options.borderWidth || 0;\n    return (radius + borderWidth) * 2;\n  }\n  draw(ctx, area) {\n    const options = this.options;\n    if (this.skip || options.radius < 0.1 || !_isPointInArea(this, area, this.size(options) / 2)) {\n      return;\n    }\n    ctx.strokeStyle = options.borderColor;\n    ctx.lineWidth = options.borderWidth;\n    ctx.fillStyle = options.backgroundColor;\n    drawPoint(ctx, options, this.x, this.y);\n  }\n  getRange() {\n    const options = this.options || {};\n    return options.radius + options.hitRadius;\n  }\n}\nPointElement.id = 'point';\nPointElement.defaults = {\n  borderWidth: 1,\n  hitRadius: 1,\n  hoverBorderWidth: 1,\n  hoverRadius: 4,\n  pointStyle: 'circle',\n  radius: 3,\n  rotation: 0\n};\nPointElement.defaultRoutes = {\n  backgroundColor: 'backgroundColor',\n  borderColor: 'borderColor'\n};\n\nfunction getBarBounds(bar, useFinalPosition) {\n  const {x, y, base, width, height} = bar.getProps(['x', 'y', 'base', 'width', 'height'], useFinalPosition);\n  let left, right, top, bottom, half;\n  if (bar.horizontal) {\n    half = height / 2;\n    left = Math.min(x, base);\n    right = Math.max(x, base);\n    top = y - half;\n    bottom = y + half;\n  } else {\n    half = width / 2;\n    left = x - half;\n    right = x + half;\n    top = Math.min(y, base);\n    bottom = Math.max(y, base);\n  }\n  return {left, top, right, bottom};\n}\nfunction skipOrLimit(skip, value, min, max) {\n  return skip ? 0 : _limitValue(value, min, max);\n}\nfunction parseBorderWidth(bar, maxW, maxH) {\n  const value = bar.options.borderWidth;\n  const skip = bar.borderSkipped;\n  const o = toTRBL(value);\n  return {\n    t: skipOrLimit(skip.top, o.top, 0, maxH),\n    r: skipOrLimit(skip.right, o.right, 0, maxW),\n    b: skipOrLimit(skip.bottom, o.bottom, 0, maxH),\n    l: skipOrLimit(skip.left, o.left, 0, maxW)\n  };\n}\nfunction parseBorderRadius(bar, maxW, maxH) {\n  const {enableBorderRadius} = bar.getProps(['enableBorderRadius']);\n  const value = bar.options.borderRadius;\n  const o = toTRBLCorners(value);\n  const maxR = Math.min(maxW, maxH);\n  const skip = bar.borderSkipped;\n  const enableBorder = enableBorderRadius || isObject(value);\n  return {\n    topLeft: skipOrLimit(!enableBorder || skip.top || skip.left, o.topLeft, 0, maxR),\n    topRight: skipOrLimit(!enableBorder || skip.top || skip.right, o.topRight, 0, maxR),\n    bottomLeft: skipOrLimit(!enableBorder || skip.bottom || skip.left, o.bottomLeft, 0, maxR),\n    bottomRight: skipOrLimit(!enableBorder || skip.bottom || skip.right, o.bottomRight, 0, maxR)\n  };\n}\nfunction boundingRects(bar) {\n  const bounds = getBarBounds(bar);\n  const width = bounds.right - bounds.left;\n  const height = bounds.bottom - bounds.top;\n  const border = parseBorderWidth(bar, width / 2, height / 2);\n  const radius = parseBorderRadius(bar, width / 2, height / 2);\n  return {\n    outer: {\n      x: bounds.left,\n      y: bounds.top,\n      w: width,\n      h: height,\n      radius\n    },\n    inner: {\n      x: bounds.left + border.l,\n      y: bounds.top + border.t,\n      w: width - border.l - border.r,\n      h: height - border.t - border.b,\n      radius: {\n        topLeft: Math.max(0, radius.topLeft - Math.max(border.t, border.l)),\n        topRight: Math.max(0, radius.topRight - Math.max(border.t, border.r)),\n        bottomLeft: Math.max(0, radius.bottomLeft - Math.max(border.b, border.l)),\n        bottomRight: Math.max(0, radius.bottomRight - Math.max(border.b, border.r)),\n      }\n    }\n  };\n}\nfunction inRange(bar, x, y, useFinalPosition) {\n  const skipX = x === null;\n  const skipY = y === null;\n  const skipBoth = skipX && skipY;\n  const bounds = bar && !skipBoth && getBarBounds(bar, useFinalPosition);\n  return bounds\n\t\t&& (skipX || _isBetween(x, bounds.left, bounds.right))\n\t\t&& (skipY || _isBetween(y, bounds.top, bounds.bottom));\n}\nfunction hasRadius(radius) {\n  return radius.topLeft || radius.topRight || radius.bottomLeft || radius.bottomRight;\n}\nfunction addNormalRectPath(ctx, rect) {\n  ctx.rect(rect.x, rect.y, rect.w, rect.h);\n}\nfunction inflateRect(rect, amount, refRect = {}) {\n  const x = rect.x !== refRect.x ? -amount : 0;\n  const y = rect.y !== refRect.y ? -amount : 0;\n  const w = (rect.x + rect.w !== refRect.x + refRect.w ? amount : 0) - x;\n  const h = (rect.y + rect.h !== refRect.y + refRect.h ? amount : 0) - y;\n  return {\n    x: rect.x + x,\n    y: rect.y + y,\n    w: rect.w + w,\n    h: rect.h + h,\n    radius: rect.radius\n  };\n}\nclass BarElement extends Element {\n  constructor(cfg) {\n    super();\n    this.options = undefined;\n    this.horizontal = undefined;\n    this.base = undefined;\n    this.width = undefined;\n    this.height = undefined;\n    this.inflateAmount = undefined;\n    if (cfg) {\n      Object.assign(this, cfg);\n    }\n  }\n  draw(ctx) {\n    const {inflateAmount, options: {borderColor, backgroundColor}} = this;\n    const {inner, outer} = boundingRects(this);\n    const addRectPath = hasRadius(outer.radius) ? addRoundedRectPath : addNormalRectPath;\n    ctx.save();\n    if (outer.w !== inner.w || outer.h !== inner.h) {\n      ctx.beginPath();\n      addRectPath(ctx, inflateRect(outer, inflateAmount, inner));\n      ctx.clip();\n      addRectPath(ctx, inflateRect(inner, -inflateAmount, outer));\n      ctx.fillStyle = borderColor;\n      ctx.fill('evenodd');\n    }\n    ctx.beginPath();\n    addRectPath(ctx, inflateRect(inner, inflateAmount));\n    ctx.fillStyle = backgroundColor;\n    ctx.fill();\n    ctx.restore();\n  }\n  inRange(mouseX, mouseY, useFinalPosition) {\n    return inRange(this, mouseX, mouseY, useFinalPosition);\n  }\n  inXRange(mouseX, useFinalPosition) {\n    return inRange(this, mouseX, null, useFinalPosition);\n  }\n  inYRange(mouseY, useFinalPosition) {\n    return inRange(this, null, mouseY, useFinalPosition);\n  }\n  getCenterPoint(useFinalPosition) {\n    const {x, y, base, horizontal} = this.getProps(['x', 'y', 'base', 'horizontal'], useFinalPosition);\n    return {\n      x: horizontal ? (x + base) / 2 : x,\n      y: horizontal ? y : (y + base) / 2\n    };\n  }\n  getRange(axis) {\n    return axis === 'x' ? this.width / 2 : this.height / 2;\n  }\n}\nBarElement.id = 'bar';\nBarElement.defaults = {\n  borderSkipped: 'start',\n  borderWidth: 0,\n  borderRadius: 0,\n  inflateAmount: 'auto',\n  pointStyle: undefined\n};\nBarElement.defaultRoutes = {\n  backgroundColor: 'backgroundColor',\n  borderColor: 'borderColor'\n};\n\nvar elements = /*#__PURE__*/Object.freeze({\n__proto__: null,\nArcElement: ArcElement,\nLineElement: LineElement,\nPointElement: PointElement,\nBarElement: BarElement\n});\n\nfunction lttbDecimation(data, start, count, availableWidth, options) {\n  const samples = options.samples || availableWidth;\n  if (samples >= count) {\n    return data.slice(start, start + count);\n  }\n  const decimated = [];\n  const bucketWidth = (count - 2) / (samples - 2);\n  let sampledIndex = 0;\n  const endIndex = start + count - 1;\n  let a = start;\n  let i, maxAreaPoint, maxArea, area, nextA;\n  decimated[sampledIndex++] = data[a];\n  for (i = 0; i < samples - 2; i++) {\n    let avgX = 0;\n    let avgY = 0;\n    let j;\n    const avgRangeStart = Math.floor((i + 1) * bucketWidth) + 1 + start;\n    const avgRangeEnd = Math.min(Math.floor((i + 2) * bucketWidth) + 1, count) + start;\n    const avgRangeLength = avgRangeEnd - avgRangeStart;\n    for (j = avgRangeStart; j < avgRangeEnd; j++) {\n      avgX += data[j].x;\n      avgY += data[j].y;\n    }\n    avgX /= avgRangeLength;\n    avgY /= avgRangeLength;\n    const rangeOffs = Math.floor(i * bucketWidth) + 1 + start;\n    const rangeTo = Math.min(Math.floor((i + 1) * bucketWidth) + 1, count) + start;\n    const {x: pointAx, y: pointAy} = data[a];\n    maxArea = area = -1;\n    for (j = rangeOffs; j < rangeTo; j++) {\n      area = 0.5 * Math.abs(\n        (pointAx - avgX) * (data[j].y - pointAy) -\n        (pointAx - data[j].x) * (avgY - pointAy)\n      );\n      if (area > maxArea) {\n        maxArea = area;\n        maxAreaPoint = data[j];\n        nextA = j;\n      }\n    }\n    decimated[sampledIndex++] = maxAreaPoint;\n    a = nextA;\n  }\n  decimated[sampledIndex++] = data[endIndex];\n  return decimated;\n}\nfunction minMaxDecimation(data, start, count, availableWidth) {\n  let avgX = 0;\n  let countX = 0;\n  let i, point, x, y, prevX, minIndex, maxIndex, startIndex, minY, maxY;\n  const decimated = [];\n  const endIndex = start + count - 1;\n  const xMin = data[start].x;\n  const xMax = data[endIndex].x;\n  const dx = xMax - xMin;\n  for (i = start; i < start + count; ++i) {\n    point = data[i];\n    x = (point.x - xMin) / dx * availableWidth;\n    y = point.y;\n    const truncX = x | 0;\n    if (truncX === prevX) {\n      if (y < minY) {\n        minY = y;\n        minIndex = i;\n      } else if (y > maxY) {\n        maxY = y;\n        maxIndex = i;\n      }\n      avgX = (countX * avgX + point.x) / ++countX;\n    } else {\n      const lastIndex = i - 1;\n      if (!isNullOrUndef(minIndex) && !isNullOrUndef(maxIndex)) {\n        const intermediateIndex1 = Math.min(minIndex, maxIndex);\n        const intermediateIndex2 = Math.max(minIndex, maxIndex);\n        if (intermediateIndex1 !== startIndex && intermediateIndex1 !== lastIndex) {\n          decimated.push({\n            ...data[intermediateIndex1],\n            x: avgX,\n          });\n        }\n        if (intermediateIndex2 !== startIndex && intermediateIndex2 !== lastIndex) {\n          decimated.push({\n            ...data[intermediateIndex2],\n            x: avgX\n          });\n        }\n      }\n      if (i > 0 && lastIndex !== startIndex) {\n        decimated.push(data[lastIndex]);\n      }\n      decimated.push(point);\n      prevX = truncX;\n      countX = 0;\n      minY = maxY = y;\n      minIndex = maxIndex = startIndex = i;\n    }\n  }\n  return decimated;\n}\nfunction cleanDecimatedDataset(dataset) {\n  if (dataset._decimated) {\n    const data = dataset._data;\n    delete dataset._decimated;\n    delete dataset._data;\n    Object.defineProperty(dataset, 'data', {value: data});\n  }\n}\nfunction cleanDecimatedData(chart) {\n  chart.data.datasets.forEach((dataset) => {\n    cleanDecimatedDataset(dataset);\n  });\n}\nfunction getStartAndCountOfVisiblePointsSimplified(meta, points) {\n  const pointCount = points.length;\n  let start = 0;\n  let count;\n  const {iScale} = meta;\n  const {min, max, minDefined, maxDefined} = iScale.getUserBounds();\n  if (minDefined) {\n    start = _limitValue(_lookupByKey(points, iScale.axis, min).lo, 0, pointCount - 1);\n  }\n  if (maxDefined) {\n    count = _limitValue(_lookupByKey(points, iScale.axis, max).hi + 1, start, pointCount) - start;\n  } else {\n    count = pointCount - start;\n  }\n  return {start, count};\n}\nvar plugin_decimation = {\n  id: 'decimation',\n  defaults: {\n    algorithm: 'min-max',\n    enabled: false,\n  },\n  beforeElementsUpdate: (chart, args, options) => {\n    if (!options.enabled) {\n      cleanDecimatedData(chart);\n      return;\n    }\n    const availableWidth = chart.width;\n    chart.data.datasets.forEach((dataset, datasetIndex) => {\n      const {_data, indexAxis} = dataset;\n      const meta = chart.getDatasetMeta(datasetIndex);\n      const data = _data || dataset.data;\n      if (resolve([indexAxis, chart.options.indexAxis]) === 'y') {\n        return;\n      }\n      if (!meta.controller.supportsDecimation) {\n        return;\n      }\n      const xAxis = chart.scales[meta.xAxisID];\n      if (xAxis.type !== 'linear' && xAxis.type !== 'time') {\n        return;\n      }\n      if (chart.options.parsing) {\n        return;\n      }\n      let {start, count} = getStartAndCountOfVisiblePointsSimplified(meta, data);\n      const threshold = options.threshold || 4 * availableWidth;\n      if (count <= threshold) {\n        cleanDecimatedDataset(dataset);\n        return;\n      }\n      if (isNullOrUndef(_data)) {\n        dataset._data = data;\n        delete dataset.data;\n        Object.defineProperty(dataset, 'data', {\n          configurable: true,\n          enumerable: true,\n          get: function() {\n            return this._decimated;\n          },\n          set: function(d) {\n            this._data = d;\n          }\n        });\n      }\n      let decimated;\n      switch (options.algorithm) {\n      case 'lttb':\n        decimated = lttbDecimation(data, start, count, availableWidth, options);\n        break;\n      case 'min-max':\n        decimated = minMaxDecimation(data, start, count, availableWidth);\n        break;\n      default:\n        throw new Error(`Unsupported decimation algorithm '${options.algorithm}'`);\n      }\n      dataset._decimated = decimated;\n    });\n  },\n  destroy(chart) {\n    cleanDecimatedData(chart);\n  }\n};\n\nfunction _segments(line, target, property) {\n  const segments = line.segments;\n  const points = line.points;\n  const tpoints = target.points;\n  const parts = [];\n  for (const segment of segments) {\n    let {start, end} = segment;\n    end = _findSegmentEnd(start, end, points);\n    const bounds = _getBounds(property, points[start], points[end], segment.loop);\n    if (!target.segments) {\n      parts.push({\n        source: segment,\n        target: bounds,\n        start: points[start],\n        end: points[end]\n      });\n      continue;\n    }\n    const targetSegments = _boundSegments(target, bounds);\n    for (const tgt of targetSegments) {\n      const subBounds = _getBounds(property, tpoints[tgt.start], tpoints[tgt.end], tgt.loop);\n      const fillSources = _boundSegment(segment, points, subBounds);\n      for (const fillSource of fillSources) {\n        parts.push({\n          source: fillSource,\n          target: tgt,\n          start: {\n            [property]: _getEdge(bounds, subBounds, 'start', Math.max)\n          },\n          end: {\n            [property]: _getEdge(bounds, subBounds, 'end', Math.min)\n          }\n        });\n      }\n    }\n  }\n  return parts;\n}\nfunction _getBounds(property, first, last, loop) {\n  if (loop) {\n    return;\n  }\n  let start = first[property];\n  let end = last[property];\n  if (property === 'angle') {\n    start = _normalizeAngle(start);\n    end = _normalizeAngle(end);\n  }\n  return {property, start, end};\n}\nfunction _pointsFromSegments(boundary, line) {\n  const {x = null, y = null} = boundary || {};\n  const linePoints = line.points;\n  const points = [];\n  line.segments.forEach(({start, end}) => {\n    end = _findSegmentEnd(start, end, linePoints);\n    const first = linePoints[start];\n    const last = linePoints[end];\n    if (y !== null) {\n      points.push({x: first.x, y});\n      points.push({x: last.x, y});\n    } else if (x !== null) {\n      points.push({x, y: first.y});\n      points.push({x, y: last.y});\n    }\n  });\n  return points;\n}\nfunction _findSegmentEnd(start, end, points) {\n  for (;end > start; end--) {\n    const point = points[end];\n    if (!isNaN(point.x) && !isNaN(point.y)) {\n      break;\n    }\n  }\n  return end;\n}\nfunction _getEdge(a, b, prop, fn) {\n  if (a && b) {\n    return fn(a[prop], b[prop]);\n  }\n  return a ? a[prop] : b ? b[prop] : 0;\n}\n\nfunction _createBoundaryLine(boundary, line) {\n  let points = [];\n  let _loop = false;\n  if (isArray(boundary)) {\n    _loop = true;\n    points = boundary;\n  } else {\n    points = _pointsFromSegments(boundary, line);\n  }\n  return points.length ? new LineElement({\n    points,\n    options: {tension: 0},\n    _loop,\n    _fullLoop: _loop\n  }) : null;\n}\nfunction _shouldApplyFill(source) {\n  return source && source.fill !== false;\n}\n\nfunction _resolveTarget(sources, index, propagate) {\n  const source = sources[index];\n  let fill = source.fill;\n  const visited = [index];\n  let target;\n  if (!propagate) {\n    return fill;\n  }\n  while (fill !== false && visited.indexOf(fill) === -1) {\n    if (!isNumberFinite(fill)) {\n      return fill;\n    }\n    target = sources[fill];\n    if (!target) {\n      return false;\n    }\n    if (target.visible) {\n      return fill;\n    }\n    visited.push(fill);\n    fill = target.fill;\n  }\n  return false;\n}\nfunction _decodeFill(line, index, count) {\n  const fill = parseFillOption(line);\n  if (isObject(fill)) {\n    return isNaN(fill.value) ? false : fill;\n  }\n  let target = parseFloat(fill);\n  if (isNumberFinite(target) && Math.floor(target) === target) {\n    return decodeTargetIndex(fill[0], index, target, count);\n  }\n  return ['origin', 'start', 'end', 'stack', 'shape'].indexOf(fill) >= 0 && fill;\n}\nfunction decodeTargetIndex(firstCh, index, target, count) {\n  if (firstCh === '-' || firstCh === '+') {\n    target = index + target;\n  }\n  if (target === index || target < 0 || target >= count) {\n    return false;\n  }\n  return target;\n}\nfunction _getTargetPixel(fill, scale) {\n  let pixel = null;\n  if (fill === 'start') {\n    pixel = scale.bottom;\n  } else if (fill === 'end') {\n    pixel = scale.top;\n  } else if (isObject(fill)) {\n    pixel = scale.getPixelForValue(fill.value);\n  } else if (scale.getBasePixel) {\n    pixel = scale.getBasePixel();\n  }\n  return pixel;\n}\nfunction _getTargetValue(fill, scale, startValue) {\n  let value;\n  if (fill === 'start') {\n    value = startValue;\n  } else if (fill === 'end') {\n    value = scale.options.reverse ? scale.min : scale.max;\n  } else if (isObject(fill)) {\n    value = fill.value;\n  } else {\n    value = scale.getBaseValue();\n  }\n  return value;\n}\nfunction parseFillOption(line) {\n  const options = line.options;\n  const fillOption = options.fill;\n  let fill = valueOrDefault(fillOption && fillOption.target, fillOption);\n  if (fill === undefined) {\n    fill = !!options.backgroundColor;\n  }\n  if (fill === false || fill === null) {\n    return false;\n  }\n  if (fill === true) {\n    return 'origin';\n  }\n  return fill;\n}\n\nfunction _buildStackLine(source) {\n  const {scale, index, line} = source;\n  const points = [];\n  const segments = line.segments;\n  const sourcePoints = line.points;\n  const linesBelow = getLinesBelow(scale, index);\n  linesBelow.push(_createBoundaryLine({x: null, y: scale.bottom}, line));\n  for (let i = 0; i < segments.length; i++) {\n    const segment = segments[i];\n    for (let j = segment.start; j <= segment.end; j++) {\n      addPointsBelow(points, sourcePoints[j], linesBelow);\n    }\n  }\n  return new LineElement({points, options: {}});\n}\nfunction getLinesBelow(scale, index) {\n  const below = [];\n  const metas = scale.getMatchingVisibleMetas('line');\n  for (let i = 0; i < metas.length; i++) {\n    const meta = metas[i];\n    if (meta.index === index) {\n      break;\n    }\n    if (!meta.hidden) {\n      below.unshift(meta.dataset);\n    }\n  }\n  return below;\n}\nfunction addPointsBelow(points, sourcePoint, linesBelow) {\n  const postponed = [];\n  for (let j = 0; j < linesBelow.length; j++) {\n    const line = linesBelow[j];\n    const {first, last, point} = findPoint(line, sourcePoint, 'x');\n    if (!point || (first && last)) {\n      continue;\n    }\n    if (first) {\n      postponed.unshift(point);\n    } else {\n      points.push(point);\n      if (!last) {\n        break;\n      }\n    }\n  }\n  points.push(...postponed);\n}\nfunction findPoint(line, sourcePoint, property) {\n  const point = line.interpolate(sourcePoint, property);\n  if (!point) {\n    return {};\n  }\n  const pointValue = point[property];\n  const segments = line.segments;\n  const linePoints = line.points;\n  let first = false;\n  let last = false;\n  for (let i = 0; i < segments.length; i++) {\n    const segment = segments[i];\n    const firstValue = linePoints[segment.start][property];\n    const lastValue = linePoints[segment.end][property];\n    if (_isBetween(pointValue, firstValue, lastValue)) {\n      first = pointValue === firstValue;\n      last = pointValue === lastValue;\n      break;\n    }\n  }\n  return {first, last, point};\n}\n\nclass simpleArc {\n  constructor(opts) {\n    this.x = opts.x;\n    this.y = opts.y;\n    this.radius = opts.radius;\n  }\n  pathSegment(ctx, bounds, opts) {\n    const {x, y, radius} = this;\n    bounds = bounds || {start: 0, end: TAU};\n    ctx.arc(x, y, radius, bounds.end, bounds.start, true);\n    return !opts.bounds;\n  }\n  interpolate(point) {\n    const {x, y, radius} = this;\n    const angle = point.angle;\n    return {\n      x: x + Math.cos(angle) * radius,\n      y: y + Math.sin(angle) * radius,\n      angle\n    };\n  }\n}\n\nfunction _getTarget(source) {\n  const {chart, fill, line} = source;\n  if (isNumberFinite(fill)) {\n    return getLineByIndex(chart, fill);\n  }\n  if (fill === 'stack') {\n    return _buildStackLine(source);\n  }\n  if (fill === 'shape') {\n    return true;\n  }\n  const boundary = computeBoundary(source);\n  if (boundary instanceof simpleArc) {\n    return boundary;\n  }\n  return _createBoundaryLine(boundary, line);\n}\nfunction getLineByIndex(chart, index) {\n  const meta = chart.getDatasetMeta(index);\n  const visible = meta && chart.isDatasetVisible(index);\n  return visible ? meta.dataset : null;\n}\nfunction computeBoundary(source) {\n  const scale = source.scale || {};\n  if (scale.getPointPositionForValue) {\n    return computeCircularBoundary(source);\n  }\n  return computeLinearBoundary(source);\n}\nfunction computeLinearBoundary(source) {\n  const {scale = {}, fill} = source;\n  const pixel = _getTargetPixel(fill, scale);\n  if (isNumberFinite(pixel)) {\n    const horizontal = scale.isHorizontal();\n    return {\n      x: horizontal ? pixel : null,\n      y: horizontal ? null : pixel\n    };\n  }\n  return null;\n}\nfunction computeCircularBoundary(source) {\n  const {scale, fill} = source;\n  const options = scale.options;\n  const length = scale.getLabels().length;\n  const start = options.reverse ? scale.max : scale.min;\n  const value = _getTargetValue(fill, scale, start);\n  const target = [];\n  if (options.grid.circular) {\n    const center = scale.getPointPositionForValue(0, start);\n    return new simpleArc({\n      x: center.x,\n      y: center.y,\n      radius: scale.getDistanceFromCenterForValue(value)\n    });\n  }\n  for (let i = 0; i < length; ++i) {\n    target.push(scale.getPointPositionForValue(i, value));\n  }\n  return target;\n}\n\nfunction _drawfill(ctx, source, area) {\n  const target = _getTarget(source);\n  const {line, scale, axis} = source;\n  const lineOpts = line.options;\n  const fillOption = lineOpts.fill;\n  const color = lineOpts.backgroundColor;\n  const {above = color, below = color} = fillOption || {};\n  if (target && line.points.length) {\n    clipArea(ctx, area);\n    doFill(ctx, {line, target, above, below, area, scale, axis});\n    unclipArea(ctx);\n  }\n}\nfunction doFill(ctx, cfg) {\n  const {line, target, above, below, area, scale} = cfg;\n  const property = line._loop ? 'angle' : cfg.axis;\n  ctx.save();\n  if (property === 'x' && below !== above) {\n    clipVertical(ctx, target, area.top);\n    fill(ctx, {line, target, color: above, scale, property});\n    ctx.restore();\n    ctx.save();\n    clipVertical(ctx, target, area.bottom);\n  }\n  fill(ctx, {line, target, color: below, scale, property});\n  ctx.restore();\n}\nfunction clipVertical(ctx, target, clipY) {\n  const {segments, points} = target;\n  let first = true;\n  let lineLoop = false;\n  ctx.beginPath();\n  for (const segment of segments) {\n    const {start, end} = segment;\n    const firstPoint = points[start];\n    const lastPoint = points[_findSegmentEnd(start, end, points)];\n    if (first) {\n      ctx.moveTo(firstPoint.x, firstPoint.y);\n      first = false;\n    } else {\n      ctx.lineTo(firstPoint.x, clipY);\n      ctx.lineTo(firstPoint.x, firstPoint.y);\n    }\n    lineLoop = !!target.pathSegment(ctx, segment, {move: lineLoop});\n    if (lineLoop) {\n      ctx.closePath();\n    } else {\n      ctx.lineTo(lastPoint.x, clipY);\n    }\n  }\n  ctx.lineTo(target.first().x, clipY);\n  ctx.closePath();\n  ctx.clip();\n}\nfunction fill(ctx, cfg) {\n  const {line, target, property, color, scale} = cfg;\n  const segments = _segments(line, target, property);\n  for (const {source: src, target: tgt, start, end} of segments) {\n    const {style: {backgroundColor = color} = {}} = src;\n    const notShape = target !== true;\n    ctx.save();\n    ctx.fillStyle = backgroundColor;\n    clipBounds(ctx, scale, notShape && _getBounds(property, start, end));\n    ctx.beginPath();\n    const lineLoop = !!line.pathSegment(ctx, src);\n    let loop;\n    if (notShape) {\n      if (lineLoop) {\n        ctx.closePath();\n      } else {\n        interpolatedLineTo(ctx, target, end, property);\n      }\n      const targetLoop = !!target.pathSegment(ctx, tgt, {move: lineLoop, reverse: true});\n      loop = lineLoop && targetLoop;\n      if (!loop) {\n        interpolatedLineTo(ctx, target, start, property);\n      }\n    }\n    ctx.closePath();\n    ctx.fill(loop ? 'evenodd' : 'nonzero');\n    ctx.restore();\n  }\n}\nfunction clipBounds(ctx, scale, bounds) {\n  const {top, bottom} = scale.chart.chartArea;\n  const {property, start, end} = bounds || {};\n  if (property === 'x') {\n    ctx.beginPath();\n    ctx.rect(start, top, end - start, bottom - top);\n    ctx.clip();\n  }\n}\nfunction interpolatedLineTo(ctx, target, point, property) {\n  const interpolatedPoint = target.interpolate(point, property);\n  if (interpolatedPoint) {\n    ctx.lineTo(interpolatedPoint.x, interpolatedPoint.y);\n  }\n}\n\nvar index = {\n  id: 'filler',\n  afterDatasetsUpdate(chart, _args, options) {\n    const count = (chart.data.datasets || []).length;\n    const sources = [];\n    let meta, i, line, source;\n    for (i = 0; i < count; ++i) {\n      meta = chart.getDatasetMeta(i);\n      line = meta.dataset;\n      source = null;\n      if (line && line.options && line instanceof LineElement) {\n        source = {\n          visible: chart.isDatasetVisible(i),\n          index: i,\n          fill: _decodeFill(line, i, count),\n          chart,\n          axis: meta.controller.options.indexAxis,\n          scale: meta.vScale,\n          line,\n        };\n      }\n      meta.$filler = source;\n      sources.push(source);\n    }\n    for (i = 0; i < count; ++i) {\n      source = sources[i];\n      if (!source || source.fill === false) {\n        continue;\n      }\n      source.fill = _resolveTarget(sources, i, options.propagate);\n    }\n  },\n  beforeDraw(chart, _args, options) {\n    const draw = options.drawTime === 'beforeDraw';\n    const metasets = chart.getSortedVisibleDatasetMetas();\n    const area = chart.chartArea;\n    for (let i = metasets.length - 1; i >= 0; --i) {\n      const source = metasets[i].$filler;\n      if (!source) {\n        continue;\n      }\n      source.line.updateControlPoints(area, source.axis);\n      if (draw && source.fill) {\n        _drawfill(chart.ctx, source, area);\n      }\n    }\n  },\n  beforeDatasetsDraw(chart, _args, options) {\n    if (options.drawTime !== 'beforeDatasetsDraw') {\n      return;\n    }\n    const metasets = chart.getSortedVisibleDatasetMetas();\n    for (let i = metasets.length - 1; i >= 0; --i) {\n      const source = metasets[i].$filler;\n      if (_shouldApplyFill(source)) {\n        _drawfill(chart.ctx, source, chart.chartArea);\n      }\n    }\n  },\n  beforeDatasetDraw(chart, args, options) {\n    const source = args.meta.$filler;\n    if (!_shouldApplyFill(source) || options.drawTime !== 'beforeDatasetDraw') {\n      return;\n    }\n    _drawfill(chart.ctx, source, chart.chartArea);\n  },\n  defaults: {\n    propagate: true,\n    drawTime: 'beforeDatasetDraw'\n  }\n};\n\nconst getBoxSize = (labelOpts, fontSize) => {\n  let {boxHeight = fontSize, boxWidth = fontSize} = labelOpts;\n  if (labelOpts.usePointStyle) {\n    boxHeight = Math.min(boxHeight, fontSize);\n    boxWidth = labelOpts.pointStyleWidth || Math.min(boxWidth, fontSize);\n  }\n  return {\n    boxWidth,\n    boxHeight,\n    itemHeight: Math.max(fontSize, boxHeight)\n  };\n};\nconst itemsEqual = (a, b) => a !== null && b !== null && a.datasetIndex === b.datasetIndex && a.index === b.index;\nclass Legend extends Element {\n  constructor(config) {\n    super();\n    this._added = false;\n    this.legendHitBoxes = [];\n    this._hoveredItem = null;\n    this.doughnutMode = false;\n    this.chart = config.chart;\n    this.options = config.options;\n    this.ctx = config.ctx;\n    this.legendItems = undefined;\n    this.columnSizes = undefined;\n    this.lineWidths = undefined;\n    this.maxHeight = undefined;\n    this.maxWidth = undefined;\n    this.top = undefined;\n    this.bottom = undefined;\n    this.left = undefined;\n    this.right = undefined;\n    this.height = undefined;\n    this.width = undefined;\n    this._margins = undefined;\n    this.position = undefined;\n    this.weight = undefined;\n    this.fullSize = undefined;\n  }\n  update(maxWidth, maxHeight, margins) {\n    this.maxWidth = maxWidth;\n    this.maxHeight = maxHeight;\n    this._margins = margins;\n    this.setDimensions();\n    this.buildLabels();\n    this.fit();\n  }\n  setDimensions() {\n    if (this.isHorizontal()) {\n      this.width = this.maxWidth;\n      this.left = this._margins.left;\n      this.right = this.width;\n    } else {\n      this.height = this.maxHeight;\n      this.top = this._margins.top;\n      this.bottom = this.height;\n    }\n  }\n  buildLabels() {\n    const labelOpts = this.options.labels || {};\n    let legendItems = callback(labelOpts.generateLabels, [this.chart], this) || [];\n    if (labelOpts.filter) {\n      legendItems = legendItems.filter((item) => labelOpts.filter(item, this.chart.data));\n    }\n    if (labelOpts.sort) {\n      legendItems = legendItems.sort((a, b) => labelOpts.sort(a, b, this.chart.data));\n    }\n    if (this.options.reverse) {\n      legendItems.reverse();\n    }\n    this.legendItems = legendItems;\n  }\n  fit() {\n    const {options, ctx} = this;\n    if (!options.display) {\n      this.width = this.height = 0;\n      return;\n    }\n    const labelOpts = options.labels;\n    const labelFont = toFont(labelOpts.font);\n    const fontSize = labelFont.size;\n    const titleHeight = this._computeTitleHeight();\n    const {boxWidth, itemHeight} = getBoxSize(labelOpts, fontSize);\n    let width, height;\n    ctx.font = labelFont.string;\n    if (this.isHorizontal()) {\n      width = this.maxWidth;\n      height = this._fitRows(titleHeight, fontSize, boxWidth, itemHeight) + 10;\n    } else {\n      height = this.maxHeight;\n      width = this._fitCols(titleHeight, fontSize, boxWidth, itemHeight) + 10;\n    }\n    this.width = Math.min(width, options.maxWidth || this.maxWidth);\n    this.height = Math.min(height, options.maxHeight || this.maxHeight);\n  }\n  _fitRows(titleHeight, fontSize, boxWidth, itemHeight) {\n    const {ctx, maxWidth, options: {labels: {padding}}} = this;\n    const hitboxes = this.legendHitBoxes = [];\n    const lineWidths = this.lineWidths = [0];\n    const lineHeight = itemHeight + padding;\n    let totalHeight = titleHeight;\n    ctx.textAlign = 'left';\n    ctx.textBaseline = 'middle';\n    let row = -1;\n    let top = -lineHeight;\n    this.legendItems.forEach((legendItem, i) => {\n      const itemWidth = boxWidth + (fontSize / 2) + ctx.measureText(legendItem.text).width;\n      if (i === 0 || lineWidths[lineWidths.length - 1] + itemWidth + 2 * padding > maxWidth) {\n        totalHeight += lineHeight;\n        lineWidths[lineWidths.length - (i > 0 ? 0 : 1)] = 0;\n        top += lineHeight;\n        row++;\n      }\n      hitboxes[i] = {left: 0, top, row, width: itemWidth, height: itemHeight};\n      lineWidths[lineWidths.length - 1] += itemWidth + padding;\n    });\n    return totalHeight;\n  }\n  _fitCols(titleHeight, fontSize, boxWidth, itemHeight) {\n    const {ctx, maxHeight, options: {labels: {padding}}} = this;\n    const hitboxes = this.legendHitBoxes = [];\n    const columnSizes = this.columnSizes = [];\n    const heightLimit = maxHeight - titleHeight;\n    let totalWidth = padding;\n    let currentColWidth = 0;\n    let currentColHeight = 0;\n    let left = 0;\n    let col = 0;\n    this.legendItems.forEach((legendItem, i) => {\n      const itemWidth = boxWidth + (fontSize / 2) + ctx.measureText(legendItem.text).width;\n      if (i > 0 && currentColHeight + itemHeight + 2 * padding > heightLimit) {\n        totalWidth += currentColWidth + padding;\n        columnSizes.push({width: currentColWidth, height: currentColHeight});\n        left += currentColWidth + padding;\n        col++;\n        currentColWidth = currentColHeight = 0;\n      }\n      hitboxes[i] = {left, top: currentColHeight, col, width: itemWidth, height: itemHeight};\n      currentColWidth = Math.max(currentColWidth, itemWidth);\n      currentColHeight += itemHeight + padding;\n    });\n    totalWidth += currentColWidth;\n    columnSizes.push({width: currentColWidth, height: currentColHeight});\n    return totalWidth;\n  }\n  adjustHitBoxes() {\n    if (!this.options.display) {\n      return;\n    }\n    const titleHeight = this._computeTitleHeight();\n    const {legendHitBoxes: hitboxes, options: {align, labels: {padding}, rtl}} = this;\n    const rtlHelper = getRtlAdapter(rtl, this.left, this.width);\n    if (this.isHorizontal()) {\n      let row = 0;\n      let left = _alignStartEnd(align, this.left + padding, this.right - this.lineWidths[row]);\n      for (const hitbox of hitboxes) {\n        if (row !== hitbox.row) {\n          row = hitbox.row;\n          left = _alignStartEnd(align, this.left + padding, this.right - this.lineWidths[row]);\n        }\n        hitbox.top += this.top + titleHeight + padding;\n        hitbox.left = rtlHelper.leftForLtr(rtlHelper.x(left), hitbox.width);\n        left += hitbox.width + padding;\n      }\n    } else {\n      let col = 0;\n      let top = _alignStartEnd(align, this.top + titleHeight + padding, this.bottom - this.columnSizes[col].height);\n      for (const hitbox of hitboxes) {\n        if (hitbox.col !== col) {\n          col = hitbox.col;\n          top = _alignStartEnd(align, this.top + titleHeight + padding, this.bottom - this.columnSizes[col].height);\n        }\n        hitbox.top = top;\n        hitbox.left += this.left + padding;\n        hitbox.left = rtlHelper.leftForLtr(rtlHelper.x(hitbox.left), hitbox.width);\n        top += hitbox.height + padding;\n      }\n    }\n  }\n  isHorizontal() {\n    return this.options.position === 'top' || this.options.position === 'bottom';\n  }\n  draw() {\n    if (this.options.display) {\n      const ctx = this.ctx;\n      clipArea(ctx, this);\n      this._draw();\n      unclipArea(ctx);\n    }\n  }\n  _draw() {\n    const {options: opts, columnSizes, lineWidths, ctx} = this;\n    const {align, labels: labelOpts} = opts;\n    const defaultColor = defaults.color;\n    const rtlHelper = getRtlAdapter(opts.rtl, this.left, this.width);\n    const labelFont = toFont(labelOpts.font);\n    const {color: fontColor, padding} = labelOpts;\n    const fontSize = labelFont.size;\n    const halfFontSize = fontSize / 2;\n    let cursor;\n    this.drawTitle();\n    ctx.textAlign = rtlHelper.textAlign('left');\n    ctx.textBaseline = 'middle';\n    ctx.lineWidth = 0.5;\n    ctx.font = labelFont.string;\n    const {boxWidth, boxHeight, itemHeight} = getBoxSize(labelOpts, fontSize);\n    const drawLegendBox = function(x, y, legendItem) {\n      if (isNaN(boxWidth) || boxWidth <= 0 || isNaN(boxHeight) || boxHeight < 0) {\n        return;\n      }\n      ctx.save();\n      const lineWidth = valueOrDefault(legendItem.lineWidth, 1);\n      ctx.fillStyle = valueOrDefault(legendItem.fillStyle, defaultColor);\n      ctx.lineCap = valueOrDefault(legendItem.lineCap, 'butt');\n      ctx.lineDashOffset = valueOrDefault(legendItem.lineDashOffset, 0);\n      ctx.lineJoin = valueOrDefault(legendItem.lineJoin, 'miter');\n      ctx.lineWidth = lineWidth;\n      ctx.strokeStyle = valueOrDefault(legendItem.strokeStyle, defaultColor);\n      ctx.setLineDash(valueOrDefault(legendItem.lineDash, []));\n      if (labelOpts.usePointStyle) {\n        const drawOptions = {\n          radius: boxHeight * Math.SQRT2 / 2,\n          pointStyle: legendItem.pointStyle,\n          rotation: legendItem.rotation,\n          borderWidth: lineWidth\n        };\n        const centerX = rtlHelper.xPlus(x, boxWidth / 2);\n        const centerY = y + halfFontSize;\n        drawPointLegend(ctx, drawOptions, centerX, centerY, labelOpts.pointStyleWidth && boxWidth);\n      } else {\n        const yBoxTop = y + Math.max((fontSize - boxHeight) / 2, 0);\n        const xBoxLeft = rtlHelper.leftForLtr(x, boxWidth);\n        const borderRadius = toTRBLCorners(legendItem.borderRadius);\n        ctx.beginPath();\n        if (Object.values(borderRadius).some(v => v !== 0)) {\n          addRoundedRectPath(ctx, {\n            x: xBoxLeft,\n            y: yBoxTop,\n            w: boxWidth,\n            h: boxHeight,\n            radius: borderRadius,\n          });\n        } else {\n          ctx.rect(xBoxLeft, yBoxTop, boxWidth, boxHeight);\n        }\n        ctx.fill();\n        if (lineWidth !== 0) {\n          ctx.stroke();\n        }\n      }\n      ctx.restore();\n    };\n    const fillText = function(x, y, legendItem) {\n      renderText(ctx, legendItem.text, x, y + (itemHeight / 2), labelFont, {\n        strikethrough: legendItem.hidden,\n        textAlign: rtlHelper.textAlign(legendItem.textAlign)\n      });\n    };\n    const isHorizontal = this.isHorizontal();\n    const titleHeight = this._computeTitleHeight();\n    if (isHorizontal) {\n      cursor = {\n        x: _alignStartEnd(align, this.left + padding, this.right - lineWidths[0]),\n        y: this.top + padding + titleHeight,\n        line: 0\n      };\n    } else {\n      cursor = {\n        x: this.left + padding,\n        y: _alignStartEnd(align, this.top + titleHeight + padding, this.bottom - columnSizes[0].height),\n        line: 0\n      };\n    }\n    overrideTextDirection(this.ctx, opts.textDirection);\n    const lineHeight = itemHeight + padding;\n    this.legendItems.forEach((legendItem, i) => {\n      ctx.strokeStyle = legendItem.fontColor || fontColor;\n      ctx.fillStyle = legendItem.fontColor || fontColor;\n      const textWidth = ctx.measureText(legendItem.text).width;\n      const textAlign = rtlHelper.textAlign(legendItem.textAlign || (legendItem.textAlign = labelOpts.textAlign));\n      const width = boxWidth + halfFontSize + textWidth;\n      let x = cursor.x;\n      let y = cursor.y;\n      rtlHelper.setWidth(this.width);\n      if (isHorizontal) {\n        if (i > 0 && x + width + padding > this.right) {\n          y = cursor.y += lineHeight;\n          cursor.line++;\n          x = cursor.x = _alignStartEnd(align, this.left + padding, this.right - lineWidths[cursor.line]);\n        }\n      } else if (i > 0 && y + lineHeight > this.bottom) {\n        x = cursor.x = x + columnSizes[cursor.line].width + padding;\n        cursor.line++;\n        y = cursor.y = _alignStartEnd(align, this.top + titleHeight + padding, this.bottom - columnSizes[cursor.line].height);\n      }\n      const realX = rtlHelper.x(x);\n      drawLegendBox(realX, y, legendItem);\n      x = _textX(textAlign, x + boxWidth + halfFontSize, isHorizontal ? x + width : this.right, opts.rtl);\n      fillText(rtlHelper.x(x), y, legendItem);\n      if (isHorizontal) {\n        cursor.x += width + padding;\n      } else {\n        cursor.y += lineHeight;\n      }\n    });\n    restoreTextDirection(this.ctx, opts.textDirection);\n  }\n  drawTitle() {\n    const opts = this.options;\n    const titleOpts = opts.title;\n    const titleFont = toFont(titleOpts.font);\n    const titlePadding = toPadding(titleOpts.padding);\n    if (!titleOpts.display) {\n      return;\n    }\n    const rtlHelper = getRtlAdapter(opts.rtl, this.left, this.width);\n    const ctx = this.ctx;\n    const position = titleOpts.position;\n    const halfFontSize = titleFont.size / 2;\n    const topPaddingPlusHalfFontSize = titlePadding.top + halfFontSize;\n    let y;\n    let left = this.left;\n    let maxWidth = this.width;\n    if (this.isHorizontal()) {\n      maxWidth = Math.max(...this.lineWidths);\n      y = this.top + topPaddingPlusHalfFontSize;\n      left = _alignStartEnd(opts.align, left, this.right - maxWidth);\n    } else {\n      const maxHeight = this.columnSizes.reduce((acc, size) => Math.max(acc, size.height), 0);\n      y = topPaddingPlusHalfFontSize + _alignStartEnd(opts.align, this.top, this.bottom - maxHeight - opts.labels.padding - this._computeTitleHeight());\n    }\n    const x = _alignStartEnd(position, left, left + maxWidth);\n    ctx.textAlign = rtlHelper.textAlign(_toLeftRightCenter(position));\n    ctx.textBaseline = 'middle';\n    ctx.strokeStyle = titleOpts.color;\n    ctx.fillStyle = titleOpts.color;\n    ctx.font = titleFont.string;\n    renderText(ctx, titleOpts.text, x, y, titleFont);\n  }\n  _computeTitleHeight() {\n    const titleOpts = this.options.title;\n    const titleFont = toFont(titleOpts.font);\n    const titlePadding = toPadding(titleOpts.padding);\n    return titleOpts.display ? titleFont.lineHeight + titlePadding.height : 0;\n  }\n  _getLegendItemAt(x, y) {\n    let i, hitBox, lh;\n    if (_isBetween(x, this.left, this.right)\n      && _isBetween(y, this.top, this.bottom)) {\n      lh = this.legendHitBoxes;\n      for (i = 0; i < lh.length; ++i) {\n        hitBox = lh[i];\n        if (_isBetween(x, hitBox.left, hitBox.left + hitBox.width)\n          && _isBetween(y, hitBox.top, hitBox.top + hitBox.height)) {\n          return this.legendItems[i];\n        }\n      }\n    }\n    return null;\n  }\n  handleEvent(e) {\n    const opts = this.options;\n    if (!isListened(e.type, opts)) {\n      return;\n    }\n    const hoveredItem = this._getLegendItemAt(e.x, e.y);\n    if (e.type === 'mousemove' || e.type === 'mouseout') {\n      const previous = this._hoveredItem;\n      const sameItem = itemsEqual(previous, hoveredItem);\n      if (previous && !sameItem) {\n        callback(opts.onLeave, [e, previous, this], this);\n      }\n      this._hoveredItem = hoveredItem;\n      if (hoveredItem && !sameItem) {\n        callback(opts.onHover, [e, hoveredItem, this], this);\n      }\n    } else if (hoveredItem) {\n      callback(opts.onClick, [e, hoveredItem, this], this);\n    }\n  }\n}\nfunction isListened(type, opts) {\n  if ((type === 'mousemove' || type === 'mouseout') && (opts.onHover || opts.onLeave)) {\n    return true;\n  }\n  if (opts.onClick && (type === 'click' || type === 'mouseup')) {\n    return true;\n  }\n  return false;\n}\nvar plugin_legend = {\n  id: 'legend',\n  _element: Legend,\n  start(chart, _args, options) {\n    const legend = chart.legend = new Legend({ctx: chart.ctx, options, chart});\n    layouts.configure(chart, legend, options);\n    layouts.addBox(chart, legend);\n  },\n  stop(chart) {\n    layouts.removeBox(chart, chart.legend);\n    delete chart.legend;\n  },\n  beforeUpdate(chart, _args, options) {\n    const legend = chart.legend;\n    layouts.configure(chart, legend, options);\n    legend.options = options;\n  },\n  afterUpdate(chart) {\n    const legend = chart.legend;\n    legend.buildLabels();\n    legend.adjustHitBoxes();\n  },\n  afterEvent(chart, args) {\n    if (!args.replay) {\n      chart.legend.handleEvent(args.event);\n    }\n  },\n  defaults: {\n    display: true,\n    position: 'top',\n    align: 'center',\n    fullSize: true,\n    reverse: false,\n    weight: 1000,\n    onClick(e, legendItem, legend) {\n      const index = legendItem.datasetIndex;\n      const ci = legend.chart;\n      if (ci.isDatasetVisible(index)) {\n        ci.hide(index);\n        legendItem.hidden = true;\n      } else {\n        ci.show(index);\n        legendItem.hidden = false;\n      }\n    },\n    onHover: null,\n    onLeave: null,\n    labels: {\n      color: (ctx) => ctx.chart.options.color,\n      boxWidth: 40,\n      padding: 10,\n      generateLabels(chart) {\n        const datasets = chart.data.datasets;\n        const {labels: {usePointStyle, pointStyle, textAlign, color}} = chart.legend.options;\n        return chart._getSortedDatasetMetas().map((meta) => {\n          const style = meta.controller.getStyle(usePointStyle ? 0 : undefined);\n          const borderWidth = toPadding(style.borderWidth);\n          return {\n            text: datasets[meta.index].label,\n            fillStyle: style.backgroundColor,\n            fontColor: color,\n            hidden: !meta.visible,\n            lineCap: style.borderCapStyle,\n            lineDash: style.borderDash,\n            lineDashOffset: style.borderDashOffset,\n            lineJoin: style.borderJoinStyle,\n            lineWidth: (borderWidth.width + borderWidth.height) / 4,\n            strokeStyle: style.borderColor,\n            pointStyle: pointStyle || style.pointStyle,\n            rotation: style.rotation,\n            textAlign: textAlign || style.textAlign,\n            borderRadius: 0,\n            datasetIndex: meta.index\n          };\n        }, this);\n      }\n    },\n    title: {\n      color: (ctx) => ctx.chart.options.color,\n      display: false,\n      position: 'center',\n      text: '',\n    }\n  },\n  descriptors: {\n    _scriptable: (name) => !name.startsWith('on'),\n    labels: {\n      _scriptable: (name) => !['generateLabels', 'filter', 'sort'].includes(name),\n    }\n  },\n};\n\nclass Title extends Element {\n  constructor(config) {\n    super();\n    this.chart = config.chart;\n    this.options = config.options;\n    this.ctx = config.ctx;\n    this._padding = undefined;\n    this.top = undefined;\n    this.bottom = undefined;\n    this.left = undefined;\n    this.right = undefined;\n    this.width = undefined;\n    this.height = undefined;\n    this.position = undefined;\n    this.weight = undefined;\n    this.fullSize = undefined;\n  }\n  update(maxWidth, maxHeight) {\n    const opts = this.options;\n    this.left = 0;\n    this.top = 0;\n    if (!opts.display) {\n      this.width = this.height = this.right = this.bottom = 0;\n      return;\n    }\n    this.width = this.right = maxWidth;\n    this.height = this.bottom = maxHeight;\n    const lineCount = isArray(opts.text) ? opts.text.length : 1;\n    this._padding = toPadding(opts.padding);\n    const textSize = lineCount * toFont(opts.font).lineHeight + this._padding.height;\n    if (this.isHorizontal()) {\n      this.height = textSize;\n    } else {\n      this.width = textSize;\n    }\n  }\n  isHorizontal() {\n    const pos = this.options.position;\n    return pos === 'top' || pos === 'bottom';\n  }\n  _drawArgs(offset) {\n    const {top, left, bottom, right, options} = this;\n    const align = options.align;\n    let rotation = 0;\n    let maxWidth, titleX, titleY;\n    if (this.isHorizontal()) {\n      titleX = _alignStartEnd(align, left, right);\n      titleY = top + offset;\n      maxWidth = right - left;\n    } else {\n      if (options.position === 'left') {\n        titleX = left + offset;\n        titleY = _alignStartEnd(align, bottom, top);\n        rotation = PI * -0.5;\n      } else {\n        titleX = right - offset;\n        titleY = _alignStartEnd(align, top, bottom);\n        rotation = PI * 0.5;\n      }\n      maxWidth = bottom - top;\n    }\n    return {titleX, titleY, maxWidth, rotation};\n  }\n  draw() {\n    const ctx = this.ctx;\n    const opts = this.options;\n    if (!opts.display) {\n      return;\n    }\n    const fontOpts = toFont(opts.font);\n    const lineHeight = fontOpts.lineHeight;\n    const offset = lineHeight / 2 + this._padding.top;\n    const {titleX, titleY, maxWidth, rotation} = this._drawArgs(offset);\n    renderText(ctx, opts.text, 0, 0, fontOpts, {\n      color: opts.color,\n      maxWidth,\n      rotation,\n      textAlign: _toLeftRightCenter(opts.align),\n      textBaseline: 'middle',\n      translation: [titleX, titleY],\n    });\n  }\n}\nfunction createTitle(chart, titleOpts) {\n  const title = new Title({\n    ctx: chart.ctx,\n    options: titleOpts,\n    chart\n  });\n  layouts.configure(chart, title, titleOpts);\n  layouts.addBox(chart, title);\n  chart.titleBlock = title;\n}\nvar plugin_title = {\n  id: 'title',\n  _element: Title,\n  start(chart, _args, options) {\n    createTitle(chart, options);\n  },\n  stop(chart) {\n    const titleBlock = chart.titleBlock;\n    layouts.removeBox(chart, titleBlock);\n    delete chart.titleBlock;\n  },\n  beforeUpdate(chart, _args, options) {\n    const title = chart.titleBlock;\n    layouts.configure(chart, title, options);\n    title.options = options;\n  },\n  defaults: {\n    align: 'center',\n    display: false,\n    font: {\n      weight: 'bold',\n    },\n    fullSize: true,\n    padding: 10,\n    position: 'top',\n    text: '',\n    weight: 2000\n  },\n  defaultRoutes: {\n    color: 'color'\n  },\n  descriptors: {\n    _scriptable: true,\n    _indexable: false,\n  },\n};\n\nconst map = new WeakMap();\nvar plugin_subtitle = {\n  id: 'subtitle',\n  start(chart, _args, options) {\n    const title = new Title({\n      ctx: chart.ctx,\n      options,\n      chart\n    });\n    layouts.configure(chart, title, options);\n    layouts.addBox(chart, title);\n    map.set(chart, title);\n  },\n  stop(chart) {\n    layouts.removeBox(chart, map.get(chart));\n    map.delete(chart);\n  },\n  beforeUpdate(chart, _args, options) {\n    const title = map.get(chart);\n    layouts.configure(chart, title, options);\n    title.options = options;\n  },\n  defaults: {\n    align: 'center',\n    display: false,\n    font: {\n      weight: 'normal',\n    },\n    fullSize: true,\n    padding: 0,\n    position: 'top',\n    text: '',\n    weight: 1500\n  },\n  defaultRoutes: {\n    color: 'color'\n  },\n  descriptors: {\n    _scriptable: true,\n    _indexable: false,\n  },\n};\n\nconst positioners = {\n  average(items) {\n    if (!items.length) {\n      return false;\n    }\n    let i, len;\n    let x = 0;\n    let y = 0;\n    let count = 0;\n    for (i = 0, len = items.length; i < len; ++i) {\n      const el = items[i].element;\n      if (el && el.hasValue()) {\n        const pos = el.tooltipPosition();\n        x += pos.x;\n        y += pos.y;\n        ++count;\n      }\n    }\n    return {\n      x: x / count,\n      y: y / count\n    };\n  },\n  nearest(items, eventPosition) {\n    if (!items.length) {\n      return false;\n    }\n    let x = eventPosition.x;\n    let y = eventPosition.y;\n    let minDistance = Number.POSITIVE_INFINITY;\n    let i, len, nearestElement;\n    for (i = 0, len = items.length; i < len; ++i) {\n      const el = items[i].element;\n      if (el && el.hasValue()) {\n        const center = el.getCenterPoint();\n        const d = distanceBetweenPoints(eventPosition, center);\n        if (d < minDistance) {\n          minDistance = d;\n          nearestElement = el;\n        }\n      }\n    }\n    if (nearestElement) {\n      const tp = nearestElement.tooltipPosition();\n      x = tp.x;\n      y = tp.y;\n    }\n    return {\n      x,\n      y\n    };\n  }\n};\nfunction pushOrConcat(base, toPush) {\n  if (toPush) {\n    if (isArray(toPush)) {\n      Array.prototype.push.apply(base, toPush);\n    } else {\n      base.push(toPush);\n    }\n  }\n  return base;\n}\nfunction splitNewlines(str) {\n  if ((typeof str === 'string' || str instanceof String) && str.indexOf('\\n') > -1) {\n    return str.split('\\n');\n  }\n  return str;\n}\nfunction createTooltipItem(chart, item) {\n  const {element, datasetIndex, index} = item;\n  const controller = chart.getDatasetMeta(datasetIndex).controller;\n  const {label, value} = controller.getLabelAndValue(index);\n  return {\n    chart,\n    label,\n    parsed: controller.getParsed(index),\n    raw: chart.data.datasets[datasetIndex].data[index],\n    formattedValue: value,\n    dataset: controller.getDataset(),\n    dataIndex: index,\n    datasetIndex,\n    element\n  };\n}\nfunction getTooltipSize(tooltip, options) {\n  const ctx = tooltip.chart.ctx;\n  const {body, footer, title} = tooltip;\n  const {boxWidth, boxHeight} = options;\n  const bodyFont = toFont(options.bodyFont);\n  const titleFont = toFont(options.titleFont);\n  const footerFont = toFont(options.footerFont);\n  const titleLineCount = title.length;\n  const footerLineCount = footer.length;\n  const bodyLineItemCount = body.length;\n  const padding = toPadding(options.padding);\n  let height = padding.height;\n  let width = 0;\n  let combinedBodyLength = body.reduce((count, bodyItem) => count + bodyItem.before.length + bodyItem.lines.length + bodyItem.after.length, 0);\n  combinedBodyLength += tooltip.beforeBody.length + tooltip.afterBody.length;\n  if (titleLineCount) {\n    height += titleLineCount * titleFont.lineHeight\n\t\t\t+ (titleLineCount - 1) * options.titleSpacing\n\t\t\t+ options.titleMarginBottom;\n  }\n  if (combinedBodyLength) {\n    const bodyLineHeight = options.displayColors ? Math.max(boxHeight, bodyFont.lineHeight) : bodyFont.lineHeight;\n    height += bodyLineItemCount * bodyLineHeight\n\t\t\t+ (combinedBodyLength - bodyLineItemCount) * bodyFont.lineHeight\n\t\t\t+ (combinedBodyLength - 1) * options.bodySpacing;\n  }\n  if (footerLineCount) {\n    height += options.footerMarginTop\n\t\t\t+ footerLineCount * footerFont.lineHeight\n\t\t\t+ (footerLineCount - 1) * options.footerSpacing;\n  }\n  let widthPadding = 0;\n  const maxLineWidth = function(line) {\n    width = Math.max(width, ctx.measureText(line).width + widthPadding);\n  };\n  ctx.save();\n  ctx.font = titleFont.string;\n  each(tooltip.title, maxLineWidth);\n  ctx.font = bodyFont.string;\n  each(tooltip.beforeBody.concat(tooltip.afterBody), maxLineWidth);\n  widthPadding = options.displayColors ? (boxWidth + 2 + options.boxPadding) : 0;\n  each(body, (bodyItem) => {\n    each(bodyItem.before, maxLineWidth);\n    each(bodyItem.lines, maxLineWidth);\n    each(bodyItem.after, maxLineWidth);\n  });\n  widthPadding = 0;\n  ctx.font = footerFont.string;\n  each(tooltip.footer, maxLineWidth);\n  ctx.restore();\n  width += padding.width;\n  return {width, height};\n}\nfunction determineYAlign(chart, size) {\n  const {y, height} = size;\n  if (y < height / 2) {\n    return 'top';\n  } else if (y > (chart.height - height / 2)) {\n    return 'bottom';\n  }\n  return 'center';\n}\nfunction doesNotFitWithAlign(xAlign, chart, options, size) {\n  const {x, width} = size;\n  const caret = options.caretSize + options.caretPadding;\n  if (xAlign === 'left' && x + width + caret > chart.width) {\n    return true;\n  }\n  if (xAlign === 'right' && x - width - caret < 0) {\n    return true;\n  }\n}\nfunction determineXAlign(chart, options, size, yAlign) {\n  const {x, width} = size;\n  const {width: chartWidth, chartArea: {left, right}} = chart;\n  let xAlign = 'center';\n  if (yAlign === 'center') {\n    xAlign = x <= (left + right) / 2 ? 'left' : 'right';\n  } else if (x <= width / 2) {\n    xAlign = 'left';\n  } else if (x >= chartWidth - width / 2) {\n    xAlign = 'right';\n  }\n  if (doesNotFitWithAlign(xAlign, chart, options, size)) {\n    xAlign = 'center';\n  }\n  return xAlign;\n}\nfunction determineAlignment(chart, options, size) {\n  const yAlign = size.yAlign || options.yAlign || determineYAlign(chart, size);\n  return {\n    xAlign: size.xAlign || options.xAlign || determineXAlign(chart, options, size, yAlign),\n    yAlign\n  };\n}\nfunction alignX(size, xAlign) {\n  let {x, width} = size;\n  if (xAlign === 'right') {\n    x -= width;\n  } else if (xAlign === 'center') {\n    x -= (width / 2);\n  }\n  return x;\n}\nfunction alignY(size, yAlign, paddingAndSize) {\n  let {y, height} = size;\n  if (yAlign === 'top') {\n    y += paddingAndSize;\n  } else if (yAlign === 'bottom') {\n    y -= height + paddingAndSize;\n  } else {\n    y -= (height / 2);\n  }\n  return y;\n}\nfunction getBackgroundPoint(options, size, alignment, chart) {\n  const {caretSize, caretPadding, cornerRadius} = options;\n  const {xAlign, yAlign} = alignment;\n  const paddingAndSize = caretSize + caretPadding;\n  const {topLeft, topRight, bottomLeft, bottomRight} = toTRBLCorners(cornerRadius);\n  let x = alignX(size, xAlign);\n  const y = alignY(size, yAlign, paddingAndSize);\n  if (yAlign === 'center') {\n    if (xAlign === 'left') {\n      x += paddingAndSize;\n    } else if (xAlign === 'right') {\n      x -= paddingAndSize;\n    }\n  } else if (xAlign === 'left') {\n    x -= Math.max(topLeft, bottomLeft) + caretSize;\n  } else if (xAlign === 'right') {\n    x += Math.max(topRight, bottomRight) + caretSize;\n  }\n  return {\n    x: _limitValue(x, 0, chart.width - size.width),\n    y: _limitValue(y, 0, chart.height - size.height)\n  };\n}\nfunction getAlignedX(tooltip, align, options) {\n  const padding = toPadding(options.padding);\n  return align === 'center'\n    ? tooltip.x + tooltip.width / 2\n    : align === 'right'\n      ? tooltip.x + tooltip.width - padding.right\n      : tooltip.x + padding.left;\n}\nfunction getBeforeAfterBodyLines(callback) {\n  return pushOrConcat([], splitNewlines(callback));\n}\nfunction createTooltipContext(parent, tooltip, tooltipItems) {\n  return createContext(parent, {\n    tooltip,\n    tooltipItems,\n    type: 'tooltip'\n  });\n}\nfunction overrideCallbacks(callbacks, context) {\n  const override = context && context.dataset && context.dataset.tooltip && context.dataset.tooltip.callbacks;\n  return override ? callbacks.override(override) : callbacks;\n}\nclass Tooltip extends Element {\n  constructor(config) {\n    super();\n    this.opacity = 0;\n    this._active = [];\n    this._eventPosition = undefined;\n    this._size = undefined;\n    this._cachedAnimations = undefined;\n    this._tooltipItems = [];\n    this.$animations = undefined;\n    this.$context = undefined;\n    this.chart = config.chart || config._chart;\n    this._chart = this.chart;\n    this.options = config.options;\n    this.dataPoints = undefined;\n    this.title = undefined;\n    this.beforeBody = undefined;\n    this.body = undefined;\n    this.afterBody = undefined;\n    this.footer = undefined;\n    this.xAlign = undefined;\n    this.yAlign = undefined;\n    this.x = undefined;\n    this.y = undefined;\n    this.height = undefined;\n    this.width = undefined;\n    this.caretX = undefined;\n    this.caretY = undefined;\n    this.labelColors = undefined;\n    this.labelPointStyles = undefined;\n    this.labelTextColors = undefined;\n  }\n  initialize(options) {\n    this.options = options;\n    this._cachedAnimations = undefined;\n    this.$context = undefined;\n  }\n  _resolveAnimations() {\n    const cached = this._cachedAnimations;\n    if (cached) {\n      return cached;\n    }\n    const chart = this.chart;\n    const options = this.options.setContext(this.getContext());\n    const opts = options.enabled && chart.options.animation && options.animations;\n    const animations = new Animations(this.chart, opts);\n    if (opts._cacheable) {\n      this._cachedAnimations = Object.freeze(animations);\n    }\n    return animations;\n  }\n  getContext() {\n    return this.$context ||\n\t\t\t(this.$context = createTooltipContext(this.chart.getContext(), this, this._tooltipItems));\n  }\n  getTitle(context, options) {\n    const {callbacks} = options;\n    const beforeTitle = callbacks.beforeTitle.apply(this, [context]);\n    const title = callbacks.title.apply(this, [context]);\n    const afterTitle = callbacks.afterTitle.apply(this, [context]);\n    let lines = [];\n    lines = pushOrConcat(lines, splitNewlines(beforeTitle));\n    lines = pushOrConcat(lines, splitNewlines(title));\n    lines = pushOrConcat(lines, splitNewlines(afterTitle));\n    return lines;\n  }\n  getBeforeBody(tooltipItems, options) {\n    return getBeforeAfterBodyLines(options.callbacks.beforeBody.apply(this, [tooltipItems]));\n  }\n  getBody(tooltipItems, options) {\n    const {callbacks} = options;\n    const bodyItems = [];\n    each(tooltipItems, (context) => {\n      const bodyItem = {\n        before: [],\n        lines: [],\n        after: []\n      };\n      const scoped = overrideCallbacks(callbacks, context);\n      pushOrConcat(bodyItem.before, splitNewlines(scoped.beforeLabel.call(this, context)));\n      pushOrConcat(bodyItem.lines, scoped.label.call(this, context));\n      pushOrConcat(bodyItem.after, splitNewlines(scoped.afterLabel.call(this, context)));\n      bodyItems.push(bodyItem);\n    });\n    return bodyItems;\n  }\n  getAfterBody(tooltipItems, options) {\n    return getBeforeAfterBodyLines(options.callbacks.afterBody.apply(this, [tooltipItems]));\n  }\n  getFooter(tooltipItems, options) {\n    const {callbacks} = options;\n    const beforeFooter = callbacks.beforeFooter.apply(this, [tooltipItems]);\n    const footer = callbacks.footer.apply(this, [tooltipItems]);\n    const afterFooter = callbacks.afterFooter.apply(this, [tooltipItems]);\n    let lines = [];\n    lines = pushOrConcat(lines, splitNewlines(beforeFooter));\n    lines = pushOrConcat(lines, splitNewlines(footer));\n    lines = pushOrConcat(lines, splitNewlines(afterFooter));\n    return lines;\n  }\n  _createItems(options) {\n    const active = this._active;\n    const data = this.chart.data;\n    const labelColors = [];\n    const labelPointStyles = [];\n    const labelTextColors = [];\n    let tooltipItems = [];\n    let i, len;\n    for (i = 0, len = active.length; i < len; ++i) {\n      tooltipItems.push(createTooltipItem(this.chart, active[i]));\n    }\n    if (options.filter) {\n      tooltipItems = tooltipItems.filter((element, index, array) => options.filter(element, index, array, data));\n    }\n    if (options.itemSort) {\n      tooltipItems = tooltipItems.sort((a, b) => options.itemSort(a, b, data));\n    }\n    each(tooltipItems, (context) => {\n      const scoped = overrideCallbacks(options.callbacks, context);\n      labelColors.push(scoped.labelColor.call(this, context));\n      labelPointStyles.push(scoped.labelPointStyle.call(this, context));\n      labelTextColors.push(scoped.labelTextColor.call(this, context));\n    });\n    this.labelColors = labelColors;\n    this.labelPointStyles = labelPointStyles;\n    this.labelTextColors = labelTextColors;\n    this.dataPoints = tooltipItems;\n    return tooltipItems;\n  }\n  update(changed, replay) {\n    const options = this.options.setContext(this.getContext());\n    const active = this._active;\n    let properties;\n    let tooltipItems = [];\n    if (!active.length) {\n      if (this.opacity !== 0) {\n        properties = {\n          opacity: 0\n        };\n      }\n    } else {\n      const position = positioners[options.position].call(this, active, this._eventPosition);\n      tooltipItems = this._createItems(options);\n      this.title = this.getTitle(tooltipItems, options);\n      this.beforeBody = this.getBeforeBody(tooltipItems, options);\n      this.body = this.getBody(tooltipItems, options);\n      this.afterBody = this.getAfterBody(tooltipItems, options);\n      this.footer = this.getFooter(tooltipItems, options);\n      const size = this._size = getTooltipSize(this, options);\n      const positionAndSize = Object.assign({}, position, size);\n      const alignment = determineAlignment(this.chart, options, positionAndSize);\n      const backgroundPoint = getBackgroundPoint(options, positionAndSize, alignment, this.chart);\n      this.xAlign = alignment.xAlign;\n      this.yAlign = alignment.yAlign;\n      properties = {\n        opacity: 1,\n        x: backgroundPoint.x,\n        y: backgroundPoint.y,\n        width: size.width,\n        height: size.height,\n        caretX: position.x,\n        caretY: position.y\n      };\n    }\n    this._tooltipItems = tooltipItems;\n    this.$context = undefined;\n    if (properties) {\n      this._resolveAnimations().update(this, properties);\n    }\n    if (changed && options.external) {\n      options.external.call(this, {chart: this.chart, tooltip: this, replay});\n    }\n  }\n  drawCaret(tooltipPoint, ctx, size, options) {\n    const caretPosition = this.getCaretPosition(tooltipPoint, size, options);\n    ctx.lineTo(caretPosition.x1, caretPosition.y1);\n    ctx.lineTo(caretPosition.x2, caretPosition.y2);\n    ctx.lineTo(caretPosition.x3, caretPosition.y3);\n  }\n  getCaretPosition(tooltipPoint, size, options) {\n    const {xAlign, yAlign} = this;\n    const {caretSize, cornerRadius} = options;\n    const {topLeft, topRight, bottomLeft, bottomRight} = toTRBLCorners(cornerRadius);\n    const {x: ptX, y: ptY} = tooltipPoint;\n    const {width, height} = size;\n    let x1, x2, x3, y1, y2, y3;\n    if (yAlign === 'center') {\n      y2 = ptY + (height / 2);\n      if (xAlign === 'left') {\n        x1 = ptX;\n        x2 = x1 - caretSize;\n        y1 = y2 + caretSize;\n        y3 = y2 - caretSize;\n      } else {\n        x1 = ptX + width;\n        x2 = x1 + caretSize;\n        y1 = y2 - caretSize;\n        y3 = y2 + caretSize;\n      }\n      x3 = x1;\n    } else {\n      if (xAlign === 'left') {\n        x2 = ptX + Math.max(topLeft, bottomLeft) + (caretSize);\n      } else if (xAlign === 'right') {\n        x2 = ptX + width - Math.max(topRight, bottomRight) - caretSize;\n      } else {\n        x2 = this.caretX;\n      }\n      if (yAlign === 'top') {\n        y1 = ptY;\n        y2 = y1 - caretSize;\n        x1 = x2 - caretSize;\n        x3 = x2 + caretSize;\n      } else {\n        y1 = ptY + height;\n        y2 = y1 + caretSize;\n        x1 = x2 + caretSize;\n        x3 = x2 - caretSize;\n      }\n      y3 = y1;\n    }\n    return {x1, x2, x3, y1, y2, y3};\n  }\n  drawTitle(pt, ctx, options) {\n    const title = this.title;\n    const length = title.length;\n    let titleFont, titleSpacing, i;\n    if (length) {\n      const rtlHelper = getRtlAdapter(options.rtl, this.x, this.width);\n      pt.x = getAlignedX(this, options.titleAlign, options);\n      ctx.textAlign = rtlHelper.textAlign(options.titleAlign);\n      ctx.textBaseline = 'middle';\n      titleFont = toFont(options.titleFont);\n      titleSpacing = options.titleSpacing;\n      ctx.fillStyle = options.titleColor;\n      ctx.font = titleFont.string;\n      for (i = 0; i < length; ++i) {\n        ctx.fillText(title[i], rtlHelper.x(pt.x), pt.y + titleFont.lineHeight / 2);\n        pt.y += titleFont.lineHeight + titleSpacing;\n        if (i + 1 === length) {\n          pt.y += options.titleMarginBottom - titleSpacing;\n        }\n      }\n    }\n  }\n  _drawColorBox(ctx, pt, i, rtlHelper, options) {\n    const labelColors = this.labelColors[i];\n    const labelPointStyle = this.labelPointStyles[i];\n    const {boxHeight, boxWidth, boxPadding} = options;\n    const bodyFont = toFont(options.bodyFont);\n    const colorX = getAlignedX(this, 'left', options);\n    const rtlColorX = rtlHelper.x(colorX);\n    const yOffSet = boxHeight < bodyFont.lineHeight ? (bodyFont.lineHeight - boxHeight) / 2 : 0;\n    const colorY = pt.y + yOffSet;\n    if (options.usePointStyle) {\n      const drawOptions = {\n        radius: Math.min(boxWidth, boxHeight) / 2,\n        pointStyle: labelPointStyle.pointStyle,\n        rotation: labelPointStyle.rotation,\n        borderWidth: 1\n      };\n      const centerX = rtlHelper.leftForLtr(rtlColorX, boxWidth) + boxWidth / 2;\n      const centerY = colorY + boxHeight / 2;\n      ctx.strokeStyle = options.multiKeyBackground;\n      ctx.fillStyle = options.multiKeyBackground;\n      drawPoint(ctx, drawOptions, centerX, centerY);\n      ctx.strokeStyle = labelColors.borderColor;\n      ctx.fillStyle = labelColors.backgroundColor;\n      drawPoint(ctx, drawOptions, centerX, centerY);\n    } else {\n      ctx.lineWidth = isObject(labelColors.borderWidth) ? Math.max(...Object.values(labelColors.borderWidth)) : (labelColors.borderWidth || 1);\n      ctx.strokeStyle = labelColors.borderColor;\n      ctx.setLineDash(labelColors.borderDash || []);\n      ctx.lineDashOffset = labelColors.borderDashOffset || 0;\n      const outerX = rtlHelper.leftForLtr(rtlColorX, boxWidth - boxPadding);\n      const innerX = rtlHelper.leftForLtr(rtlHelper.xPlus(rtlColorX, 1), boxWidth - boxPadding - 2);\n      const borderRadius = toTRBLCorners(labelColors.borderRadius);\n      if (Object.values(borderRadius).some(v => v !== 0)) {\n        ctx.beginPath();\n        ctx.fillStyle = options.multiKeyBackground;\n        addRoundedRectPath(ctx, {\n          x: outerX,\n          y: colorY,\n          w: boxWidth,\n          h: boxHeight,\n          radius: borderRadius,\n        });\n        ctx.fill();\n        ctx.stroke();\n        ctx.fillStyle = labelColors.backgroundColor;\n        ctx.beginPath();\n        addRoundedRectPath(ctx, {\n          x: innerX,\n          y: colorY + 1,\n          w: boxWidth - 2,\n          h: boxHeight - 2,\n          radius: borderRadius,\n        });\n        ctx.fill();\n      } else {\n        ctx.fillStyle = options.multiKeyBackground;\n        ctx.fillRect(outerX, colorY, boxWidth, boxHeight);\n        ctx.strokeRect(outerX, colorY, boxWidth, boxHeight);\n        ctx.fillStyle = labelColors.backgroundColor;\n        ctx.fillRect(innerX, colorY + 1, boxWidth - 2, boxHeight - 2);\n      }\n    }\n    ctx.fillStyle = this.labelTextColors[i];\n  }\n  drawBody(pt, ctx, options) {\n    const {body} = this;\n    const {bodySpacing, bodyAlign, displayColors, boxHeight, boxWidth, boxPadding} = options;\n    const bodyFont = toFont(options.bodyFont);\n    let bodyLineHeight = bodyFont.lineHeight;\n    let xLinePadding = 0;\n    const rtlHelper = getRtlAdapter(options.rtl, this.x, this.width);\n    const fillLineOfText = function(line) {\n      ctx.fillText(line, rtlHelper.x(pt.x + xLinePadding), pt.y + bodyLineHeight / 2);\n      pt.y += bodyLineHeight + bodySpacing;\n    };\n    const bodyAlignForCalculation = rtlHelper.textAlign(bodyAlign);\n    let bodyItem, textColor, lines, i, j, ilen, jlen;\n    ctx.textAlign = bodyAlign;\n    ctx.textBaseline = 'middle';\n    ctx.font = bodyFont.string;\n    pt.x = getAlignedX(this, bodyAlignForCalculation, options);\n    ctx.fillStyle = options.bodyColor;\n    each(this.beforeBody, fillLineOfText);\n    xLinePadding = displayColors && bodyAlignForCalculation !== 'right'\n      ? bodyAlign === 'center' ? (boxWidth / 2 + boxPadding) : (boxWidth + 2 + boxPadding)\n      : 0;\n    for (i = 0, ilen = body.length; i < ilen; ++i) {\n      bodyItem = body[i];\n      textColor = this.labelTextColors[i];\n      ctx.fillStyle = textColor;\n      each(bodyItem.before, fillLineOfText);\n      lines = bodyItem.lines;\n      if (displayColors && lines.length) {\n        this._drawColorBox(ctx, pt, i, rtlHelper, options);\n        bodyLineHeight = Math.max(bodyFont.lineHeight, boxHeight);\n      }\n      for (j = 0, jlen = lines.length; j < jlen; ++j) {\n        fillLineOfText(lines[j]);\n        bodyLineHeight = bodyFont.lineHeight;\n      }\n      each(bodyItem.after, fillLineOfText);\n    }\n    xLinePadding = 0;\n    bodyLineHeight = bodyFont.lineHeight;\n    each(this.afterBody, fillLineOfText);\n    pt.y -= bodySpacing;\n  }\n  drawFooter(pt, ctx, options) {\n    const footer = this.footer;\n    const length = footer.length;\n    let footerFont, i;\n    if (length) {\n      const rtlHelper = getRtlAdapter(options.rtl, this.x, this.width);\n      pt.x = getAlignedX(this, options.footerAlign, options);\n      pt.y += options.footerMarginTop;\n      ctx.textAlign = rtlHelper.textAlign(options.footerAlign);\n      ctx.textBaseline = 'middle';\n      footerFont = toFont(options.footerFont);\n      ctx.fillStyle = options.footerColor;\n      ctx.font = footerFont.string;\n      for (i = 0; i < length; ++i) {\n        ctx.fillText(footer[i], rtlHelper.x(pt.x), pt.y + footerFont.lineHeight / 2);\n        pt.y += footerFont.lineHeight + options.footerSpacing;\n      }\n    }\n  }\n  drawBackground(pt, ctx, tooltipSize, options) {\n    const {xAlign, yAlign} = this;\n    const {x, y} = pt;\n    const {width, height} = tooltipSize;\n    const {topLeft, topRight, bottomLeft, bottomRight} = toTRBLCorners(options.cornerRadius);\n    ctx.fillStyle = options.backgroundColor;\n    ctx.strokeStyle = options.borderColor;\n    ctx.lineWidth = options.borderWidth;\n    ctx.beginPath();\n    ctx.moveTo(x + topLeft, y);\n    if (yAlign === 'top') {\n      this.drawCaret(pt, ctx, tooltipSize, options);\n    }\n    ctx.lineTo(x + width - topRight, y);\n    ctx.quadraticCurveTo(x + width, y, x + width, y + topRight);\n    if (yAlign === 'center' && xAlign === 'right') {\n      this.drawCaret(pt, ctx, tooltipSize, options);\n    }\n    ctx.lineTo(x + width, y + height - bottomRight);\n    ctx.quadraticCurveTo(x + width, y + height, x + width - bottomRight, y + height);\n    if (yAlign === 'bottom') {\n      this.drawCaret(pt, ctx, tooltipSize, options);\n    }\n    ctx.lineTo(x + bottomLeft, y + height);\n    ctx.quadraticCurveTo(x, y + height, x, y + height - bottomLeft);\n    if (yAlign === 'center' && xAlign === 'left') {\n      this.drawCaret(pt, ctx, tooltipSize, options);\n    }\n    ctx.lineTo(x, y + topLeft);\n    ctx.quadraticCurveTo(x, y, x + topLeft, y);\n    ctx.closePath();\n    ctx.fill();\n    if (options.borderWidth > 0) {\n      ctx.stroke();\n    }\n  }\n  _updateAnimationTarget(options) {\n    const chart = this.chart;\n    const anims = this.$animations;\n    const animX = anims && anims.x;\n    const animY = anims && anims.y;\n    if (animX || animY) {\n      const position = positioners[options.position].call(this, this._active, this._eventPosition);\n      if (!position) {\n        return;\n      }\n      const size = this._size = getTooltipSize(this, options);\n      const positionAndSize = Object.assign({}, position, this._size);\n      const alignment = determineAlignment(chart, options, positionAndSize);\n      const point = getBackgroundPoint(options, positionAndSize, alignment, chart);\n      if (animX._to !== point.x || animY._to !== point.y) {\n        this.xAlign = alignment.xAlign;\n        this.yAlign = alignment.yAlign;\n        this.width = size.width;\n        this.height = size.height;\n        this.caretX = position.x;\n        this.caretY = position.y;\n        this._resolveAnimations().update(this, point);\n      }\n    }\n  }\n  _willRender() {\n    return !!this.opacity;\n  }\n  draw(ctx) {\n    const options = this.options.setContext(this.getContext());\n    let opacity = this.opacity;\n    if (!opacity) {\n      return;\n    }\n    this._updateAnimationTarget(options);\n    const tooltipSize = {\n      width: this.width,\n      height: this.height\n    };\n    const pt = {\n      x: this.x,\n      y: this.y\n    };\n    opacity = Math.abs(opacity) < 1e-3 ? 0 : opacity;\n    const padding = toPadding(options.padding);\n    const hasTooltipContent = this.title.length || this.beforeBody.length || this.body.length || this.afterBody.length || this.footer.length;\n    if (options.enabled && hasTooltipContent) {\n      ctx.save();\n      ctx.globalAlpha = opacity;\n      this.drawBackground(pt, ctx, tooltipSize, options);\n      overrideTextDirection(ctx, options.textDirection);\n      pt.y += padding.top;\n      this.drawTitle(pt, ctx, options);\n      this.drawBody(pt, ctx, options);\n      this.drawFooter(pt, ctx, options);\n      restoreTextDirection(ctx, options.textDirection);\n      ctx.restore();\n    }\n  }\n  getActiveElements() {\n    return this._active || [];\n  }\n  setActiveElements(activeElements, eventPosition) {\n    const lastActive = this._active;\n    const active = activeElements.map(({datasetIndex, index}) => {\n      const meta = this.chart.getDatasetMeta(datasetIndex);\n      if (!meta) {\n        throw new Error('Cannot find a dataset at index ' + datasetIndex);\n      }\n      return {\n        datasetIndex,\n        element: meta.data[index],\n        index,\n      };\n    });\n    const changed = !_elementsEqual(lastActive, active);\n    const positionChanged = this._positionChanged(active, eventPosition);\n    if (changed || positionChanged) {\n      this._active = active;\n      this._eventPosition = eventPosition;\n      this._ignoreReplayEvents = true;\n      this.update(true);\n    }\n  }\n  handleEvent(e, replay, inChartArea = true) {\n    if (replay && this._ignoreReplayEvents) {\n      return false;\n    }\n    this._ignoreReplayEvents = false;\n    const options = this.options;\n    const lastActive = this._active || [];\n    const active = this._getActiveElements(e, lastActive, replay, inChartArea);\n    const positionChanged = this._positionChanged(active, e);\n    const changed = replay || !_elementsEqual(active, lastActive) || positionChanged;\n    if (changed) {\n      this._active = active;\n      if (options.enabled || options.external) {\n        this._eventPosition = {\n          x: e.x,\n          y: e.y\n        };\n        this.update(true, replay);\n      }\n    }\n    return changed;\n  }\n  _getActiveElements(e, lastActive, replay, inChartArea) {\n    const options = this.options;\n    if (e.type === 'mouseout') {\n      return [];\n    }\n    if (!inChartArea) {\n      return lastActive;\n    }\n    const active = this.chart.getElementsAtEventForMode(e, options.mode, options, replay);\n    if (options.reverse) {\n      active.reverse();\n    }\n    return active;\n  }\n  _positionChanged(active, e) {\n    const {caretX, caretY, options} = this;\n    const position = positioners[options.position].call(this, active, e);\n    return position !== false && (caretX !== position.x || caretY !== position.y);\n  }\n}\nTooltip.positioners = positioners;\nvar plugin_tooltip = {\n  id: 'tooltip',\n  _element: Tooltip,\n  positioners,\n  afterInit(chart, _args, options) {\n    if (options) {\n      chart.tooltip = new Tooltip({chart, options});\n    }\n  },\n  beforeUpdate(chart, _args, options) {\n    if (chart.tooltip) {\n      chart.tooltip.initialize(options);\n    }\n  },\n  reset(chart, _args, options) {\n    if (chart.tooltip) {\n      chart.tooltip.initialize(options);\n    }\n  },\n  afterDraw(chart) {\n    const tooltip = chart.tooltip;\n    if (tooltip && tooltip._willRender()) {\n      const args = {\n        tooltip\n      };\n      if (chart.notifyPlugins('beforeTooltipDraw', args) === false) {\n        return;\n      }\n      tooltip.draw(chart.ctx);\n      chart.notifyPlugins('afterTooltipDraw', args);\n    }\n  },\n  afterEvent(chart, args) {\n    if (chart.tooltip) {\n      const useFinalPosition = args.replay;\n      if (chart.tooltip.handleEvent(args.event, useFinalPosition, args.inChartArea)) {\n        args.changed = true;\n      }\n    }\n  },\n  defaults: {\n    enabled: true,\n    external: null,\n    position: 'average',\n    backgroundColor: 'rgba(0,0,0,0.8)',\n    titleColor: '#fff',\n    titleFont: {\n      weight: 'bold',\n    },\n    titleSpacing: 2,\n    titleMarginBottom: 6,\n    titleAlign: 'left',\n    bodyColor: '#fff',\n    bodySpacing: 2,\n    bodyFont: {\n    },\n    bodyAlign: 'left',\n    footerColor: '#fff',\n    footerSpacing: 2,\n    footerMarginTop: 6,\n    footerFont: {\n      weight: 'bold',\n    },\n    footerAlign: 'left',\n    padding: 6,\n    caretPadding: 2,\n    caretSize: 5,\n    cornerRadius: 6,\n    boxHeight: (ctx, opts) => opts.bodyFont.size,\n    boxWidth: (ctx, opts) => opts.bodyFont.size,\n    multiKeyBackground: '#fff',\n    displayColors: true,\n    boxPadding: 0,\n    borderColor: 'rgba(0,0,0,0)',\n    borderWidth: 0,\n    animation: {\n      duration: 400,\n      easing: 'easeOutQuart',\n    },\n    animations: {\n      numbers: {\n        type: 'number',\n        properties: ['x', 'y', 'width', 'height', 'caretX', 'caretY'],\n      },\n      opacity: {\n        easing: 'linear',\n        duration: 200\n      }\n    },\n    callbacks: {\n      beforeTitle: noop,\n      title(tooltipItems) {\n        if (tooltipItems.length > 0) {\n          const item = tooltipItems[0];\n          const labels = item.chart.data.labels;\n          const labelCount = labels ? labels.length : 0;\n          if (this && this.options && this.options.mode === 'dataset') {\n            return item.dataset.label || '';\n          } else if (item.label) {\n            return item.label;\n          } else if (labelCount > 0 && item.dataIndex < labelCount) {\n            return labels[item.dataIndex];\n          }\n        }\n        return '';\n      },\n      afterTitle: noop,\n      beforeBody: noop,\n      beforeLabel: noop,\n      label(tooltipItem) {\n        if (this && this.options && this.options.mode === 'dataset') {\n          return tooltipItem.label + ': ' + tooltipItem.formattedValue || tooltipItem.formattedValue;\n        }\n        let label = tooltipItem.dataset.label || '';\n        if (label) {\n          label += ': ';\n        }\n        const value = tooltipItem.formattedValue;\n        if (!isNullOrUndef(value)) {\n          label += value;\n        }\n        return label;\n      },\n      labelColor(tooltipItem) {\n        const meta = tooltipItem.chart.getDatasetMeta(tooltipItem.datasetIndex);\n        const options = meta.controller.getStyle(tooltipItem.dataIndex);\n        return {\n          borderColor: options.borderColor,\n          backgroundColor: options.backgroundColor,\n          borderWidth: options.borderWidth,\n          borderDash: options.borderDash,\n          borderDashOffset: options.borderDashOffset,\n          borderRadius: 0,\n        };\n      },\n      labelTextColor() {\n        return this.options.bodyColor;\n      },\n      labelPointStyle(tooltipItem) {\n        const meta = tooltipItem.chart.getDatasetMeta(tooltipItem.datasetIndex);\n        const options = meta.controller.getStyle(tooltipItem.dataIndex);\n        return {\n          pointStyle: options.pointStyle,\n          rotation: options.rotation,\n        };\n      },\n      afterLabel: noop,\n      afterBody: noop,\n      beforeFooter: noop,\n      footer: noop,\n      afterFooter: noop\n    }\n  },\n  defaultRoutes: {\n    bodyFont: 'font',\n    footerFont: 'font',\n    titleFont: 'font'\n  },\n  descriptors: {\n    _scriptable: (name) => name !== 'filter' && name !== 'itemSort' && name !== 'external',\n    _indexable: false,\n    callbacks: {\n      _scriptable: false,\n      _indexable: false,\n    },\n    animation: {\n      _fallback: false\n    },\n    animations: {\n      _fallback: 'animation'\n    }\n  },\n  additionalOptionScopes: ['interaction']\n};\n\nvar plugins = /*#__PURE__*/Object.freeze({\n__proto__: null,\nDecimation: plugin_decimation,\nFiller: index,\nLegend: plugin_legend,\nSubTitle: plugin_subtitle,\nTitle: plugin_title,\nTooltip: plugin_tooltip\n});\n\nconst addIfString = (labels, raw, index, addedLabels) => {\n  if (typeof raw === 'string') {\n    index = labels.push(raw) - 1;\n    addedLabels.unshift({index, label: raw});\n  } else if (isNaN(raw)) {\n    index = null;\n  }\n  return index;\n};\nfunction findOrAddLabel(labels, raw, index, addedLabels) {\n  const first = labels.indexOf(raw);\n  if (first === -1) {\n    return addIfString(labels, raw, index, addedLabels);\n  }\n  const last = labels.lastIndexOf(raw);\n  return first !== last ? index : first;\n}\nconst validIndex = (index, max) => index === null ? null : _limitValue(Math.round(index), 0, max);\nclass CategoryScale extends Scale {\n  constructor(cfg) {\n    super(cfg);\n    this._startValue = undefined;\n    this._valueRange = 0;\n    this._addedLabels = [];\n  }\n  init(scaleOptions) {\n    const added = this._addedLabels;\n    if (added.length) {\n      const labels = this.getLabels();\n      for (const {index, label} of added) {\n        if (labels[index] === label) {\n          labels.splice(index, 1);\n        }\n      }\n      this._addedLabels = [];\n    }\n    super.init(scaleOptions);\n  }\n  parse(raw, index) {\n    if (isNullOrUndef(raw)) {\n      return null;\n    }\n    const labels = this.getLabels();\n    index = isFinite(index) && labels[index] === raw ? index\n      : findOrAddLabel(labels, raw, valueOrDefault(index, raw), this._addedLabels);\n    return validIndex(index, labels.length - 1);\n  }\n  determineDataLimits() {\n    const {minDefined, maxDefined} = this.getUserBounds();\n    let {min, max} = this.getMinMax(true);\n    if (this.options.bounds === 'ticks') {\n      if (!minDefined) {\n        min = 0;\n      }\n      if (!maxDefined) {\n        max = this.getLabels().length - 1;\n      }\n    }\n    this.min = min;\n    this.max = max;\n  }\n  buildTicks() {\n    const min = this.min;\n    const max = this.max;\n    const offset = this.options.offset;\n    const ticks = [];\n    let labels = this.getLabels();\n    labels = (min === 0 && max === labels.length - 1) ? labels : labels.slice(min, max + 1);\n    this._valueRange = Math.max(labels.length - (offset ? 0 : 1), 1);\n    this._startValue = this.min - (offset ? 0.5 : 0);\n    for (let value = min; value <= max; value++) {\n      ticks.push({value});\n    }\n    return ticks;\n  }\n  getLabelForValue(value) {\n    const labels = this.getLabels();\n    if (value >= 0 && value < labels.length) {\n      return labels[value];\n    }\n    return value;\n  }\n  configure() {\n    super.configure();\n    if (!this.isHorizontal()) {\n      this._reversePixels = !this._reversePixels;\n    }\n  }\n  getPixelForValue(value) {\n    if (typeof value !== 'number') {\n      value = this.parse(value);\n    }\n    return value === null ? NaN : this.getPixelForDecimal((value - this._startValue) / this._valueRange);\n  }\n  getPixelForTick(index) {\n    const ticks = this.ticks;\n    if (index < 0 || index > ticks.length - 1) {\n      return null;\n    }\n    return this.getPixelForValue(ticks[index].value);\n  }\n  getValueForPixel(pixel) {\n    return Math.round(this._startValue + this.getDecimalForPixel(pixel) * this._valueRange);\n  }\n  getBasePixel() {\n    return this.bottom;\n  }\n}\nCategoryScale.id = 'category';\nCategoryScale.defaults = {\n  ticks: {\n    callback: CategoryScale.prototype.getLabelForValue\n  }\n};\n\nfunction generateTicks$1(generationOptions, dataRange) {\n  const ticks = [];\n  const MIN_SPACING = 1e-14;\n  const {bounds, step, min, max, precision, count, maxTicks, maxDigits, includeBounds} = generationOptions;\n  const unit = step || 1;\n  const maxSpaces = maxTicks - 1;\n  const {min: rmin, max: rmax} = dataRange;\n  const minDefined = !isNullOrUndef(min);\n  const maxDefined = !isNullOrUndef(max);\n  const countDefined = !isNullOrUndef(count);\n  const minSpacing = (rmax - rmin) / (maxDigits + 1);\n  let spacing = niceNum((rmax - rmin) / maxSpaces / unit) * unit;\n  let factor, niceMin, niceMax, numSpaces;\n  if (spacing < MIN_SPACING && !minDefined && !maxDefined) {\n    return [{value: rmin}, {value: rmax}];\n  }\n  numSpaces = Math.ceil(rmax / spacing) - Math.floor(rmin / spacing);\n  if (numSpaces > maxSpaces) {\n    spacing = niceNum(numSpaces * spacing / maxSpaces / unit) * unit;\n  }\n  if (!isNullOrUndef(precision)) {\n    factor = Math.pow(10, precision);\n    spacing = Math.ceil(spacing * factor) / factor;\n  }\n  if (bounds === 'ticks') {\n    niceMin = Math.floor(rmin / spacing) * spacing;\n    niceMax = Math.ceil(rmax / spacing) * spacing;\n  } else {\n    niceMin = rmin;\n    niceMax = rmax;\n  }\n  if (minDefined && maxDefined && step && almostWhole((max - min) / step, spacing / 1000)) {\n    numSpaces = Math.round(Math.min((max - min) / spacing, maxTicks));\n    spacing = (max - min) / numSpaces;\n    niceMin = min;\n    niceMax = max;\n  } else if (countDefined) {\n    niceMin = minDefined ? min : niceMin;\n    niceMax = maxDefined ? max : niceMax;\n    numSpaces = count - 1;\n    spacing = (niceMax - niceMin) / numSpaces;\n  } else {\n    numSpaces = (niceMax - niceMin) / spacing;\n    if (almostEquals(numSpaces, Math.round(numSpaces), spacing / 1000)) {\n      numSpaces = Math.round(numSpaces);\n    } else {\n      numSpaces = Math.ceil(numSpaces);\n    }\n  }\n  const decimalPlaces = Math.max(\n    _decimalPlaces(spacing),\n    _decimalPlaces(niceMin)\n  );\n  factor = Math.pow(10, isNullOrUndef(precision) ? decimalPlaces : precision);\n  niceMin = Math.round(niceMin * factor) / factor;\n  niceMax = Math.round(niceMax * factor) / factor;\n  let j = 0;\n  if (minDefined) {\n    if (includeBounds && niceMin !== min) {\n      ticks.push({value: min});\n      if (niceMin < min) {\n        j++;\n      }\n      if (almostEquals(Math.round((niceMin + j * spacing) * factor) / factor, min, relativeLabelSize(min, minSpacing, generationOptions))) {\n        j++;\n      }\n    } else if (niceMin < min) {\n      j++;\n    }\n  }\n  for (; j < numSpaces; ++j) {\n    ticks.push({value: Math.round((niceMin + j * spacing) * factor) / factor});\n  }\n  if (maxDefined && includeBounds && niceMax !== max) {\n    if (ticks.length && almostEquals(ticks[ticks.length - 1].value, max, relativeLabelSize(max, minSpacing, generationOptions))) {\n      ticks[ticks.length - 1].value = max;\n    } else {\n      ticks.push({value: max});\n    }\n  } else if (!maxDefined || niceMax === max) {\n    ticks.push({value: niceMax});\n  }\n  return ticks;\n}\nfunction relativeLabelSize(value, minSpacing, {horizontal, minRotation}) {\n  const rad = toRadians(minRotation);\n  const ratio = (horizontal ? Math.sin(rad) : Math.cos(rad)) || 0.001;\n  const length = 0.75 * minSpacing * ('' + value).length;\n  return Math.min(minSpacing / ratio, length);\n}\nclass LinearScaleBase extends Scale {\n  constructor(cfg) {\n    super(cfg);\n    this.start = undefined;\n    this.end = undefined;\n    this._startValue = undefined;\n    this._endValue = undefined;\n    this._valueRange = 0;\n  }\n  parse(raw, index) {\n    if (isNullOrUndef(raw)) {\n      return null;\n    }\n    if ((typeof raw === 'number' || raw instanceof Number) && !isFinite(+raw)) {\n      return null;\n    }\n    return +raw;\n  }\n  handleTickRangeOptions() {\n    const {beginAtZero} = this.options;\n    const {minDefined, maxDefined} = this.getUserBounds();\n    let {min, max} = this;\n    const setMin = v => (min = minDefined ? min : v);\n    const setMax = v => (max = maxDefined ? max : v);\n    if (beginAtZero) {\n      const minSign = sign(min);\n      const maxSign = sign(max);\n      if (minSign < 0 && maxSign < 0) {\n        setMax(0);\n      } else if (minSign > 0 && maxSign > 0) {\n        setMin(0);\n      }\n    }\n    if (min === max) {\n      let offset = 1;\n      if (max >= Number.MAX_SAFE_INTEGER || min <= Number.MIN_SAFE_INTEGER) {\n        offset = Math.abs(max * 0.05);\n      }\n      setMax(max + offset);\n      if (!beginAtZero) {\n        setMin(min - offset);\n      }\n    }\n    this.min = min;\n    this.max = max;\n  }\n  getTickLimit() {\n    const tickOpts = this.options.ticks;\n    let {maxTicksLimit, stepSize} = tickOpts;\n    let maxTicks;\n    if (stepSize) {\n      maxTicks = Math.ceil(this.max / stepSize) - Math.floor(this.min / stepSize) + 1;\n      if (maxTicks > 1000) {\n        console.warn(`scales.${this.id}.ticks.stepSize: ${stepSize} would result generating up to ${maxTicks} ticks. Limiting to 1000.`);\n        maxTicks = 1000;\n      }\n    } else {\n      maxTicks = this.computeTickLimit();\n      maxTicksLimit = maxTicksLimit || 11;\n    }\n    if (maxTicksLimit) {\n      maxTicks = Math.min(maxTicksLimit, maxTicks);\n    }\n    return maxTicks;\n  }\n  computeTickLimit() {\n    return Number.POSITIVE_INFINITY;\n  }\n  buildTicks() {\n    const opts = this.options;\n    const tickOpts = opts.ticks;\n    let maxTicks = this.getTickLimit();\n    maxTicks = Math.max(2, maxTicks);\n    const numericGeneratorOptions = {\n      maxTicks,\n      bounds: opts.bounds,\n      min: opts.min,\n      max: opts.max,\n      precision: tickOpts.precision,\n      step: tickOpts.stepSize,\n      count: tickOpts.count,\n      maxDigits: this._maxDigits(),\n      horizontal: this.isHorizontal(),\n      minRotation: tickOpts.minRotation || 0,\n      includeBounds: tickOpts.includeBounds !== false\n    };\n    const dataRange = this._range || this;\n    const ticks = generateTicks$1(numericGeneratorOptions, dataRange);\n    if (opts.bounds === 'ticks') {\n      _setMinAndMaxByKey(ticks, this, 'value');\n    }\n    if (opts.reverse) {\n      ticks.reverse();\n      this.start = this.max;\n      this.end = this.min;\n    } else {\n      this.start = this.min;\n      this.end = this.max;\n    }\n    return ticks;\n  }\n  configure() {\n    const ticks = this.ticks;\n    let start = this.min;\n    let end = this.max;\n    super.configure();\n    if (this.options.offset && ticks.length) {\n      const offset = (end - start) / Math.max(ticks.length - 1, 1) / 2;\n      start -= offset;\n      end += offset;\n    }\n    this._startValue = start;\n    this._endValue = end;\n    this._valueRange = end - start;\n  }\n  getLabelForValue(value) {\n    return formatNumber(value, this.chart.options.locale, this.options.ticks.format);\n  }\n}\n\nclass LinearScale extends LinearScaleBase {\n  determineDataLimits() {\n    const {min, max} = this.getMinMax(true);\n    this.min = isNumberFinite(min) ? min : 0;\n    this.max = isNumberFinite(max) ? max : 1;\n    this.handleTickRangeOptions();\n  }\n  computeTickLimit() {\n    const horizontal = this.isHorizontal();\n    const length = horizontal ? this.width : this.height;\n    const minRotation = toRadians(this.options.ticks.minRotation);\n    const ratio = (horizontal ? Math.sin(minRotation) : Math.cos(minRotation)) || 0.001;\n    const tickFont = this._resolveTickFontOptions(0);\n    return Math.ceil(length / Math.min(40, tickFont.lineHeight / ratio));\n  }\n  getPixelForValue(value) {\n    return value === null ? NaN : this.getPixelForDecimal((value - this._startValue) / this._valueRange);\n  }\n  getValueForPixel(pixel) {\n    return this._startValue + this.getDecimalForPixel(pixel) * this._valueRange;\n  }\n}\nLinearScale.id = 'linear';\nLinearScale.defaults = {\n  ticks: {\n    callback: Ticks.formatters.numeric\n  }\n};\n\nfunction isMajor(tickVal) {\n  const remain = tickVal / (Math.pow(10, Math.floor(log10(tickVal))));\n  return remain === 1;\n}\nfunction generateTicks(generationOptions, dataRange) {\n  const endExp = Math.floor(log10(dataRange.max));\n  const endSignificand = Math.ceil(dataRange.max / Math.pow(10, endExp));\n  const ticks = [];\n  let tickVal = finiteOrDefault(generationOptions.min, Math.pow(10, Math.floor(log10(dataRange.min))));\n  let exp = Math.floor(log10(tickVal));\n  let significand = Math.floor(tickVal / Math.pow(10, exp));\n  let precision = exp < 0 ? Math.pow(10, Math.abs(exp)) : 1;\n  do {\n    ticks.push({value: tickVal, major: isMajor(tickVal)});\n    ++significand;\n    if (significand === 10) {\n      significand = 1;\n      ++exp;\n      precision = exp >= 0 ? 1 : precision;\n    }\n    tickVal = Math.round(significand * Math.pow(10, exp) * precision) / precision;\n  } while (exp < endExp || (exp === endExp && significand < endSignificand));\n  const lastTick = finiteOrDefault(generationOptions.max, tickVal);\n  ticks.push({value: lastTick, major: isMajor(tickVal)});\n  return ticks;\n}\nclass LogarithmicScale extends Scale {\n  constructor(cfg) {\n    super(cfg);\n    this.start = undefined;\n    this.end = undefined;\n    this._startValue = undefined;\n    this._valueRange = 0;\n  }\n  parse(raw, index) {\n    const value = LinearScaleBase.prototype.parse.apply(this, [raw, index]);\n    if (value === 0) {\n      this._zero = true;\n      return undefined;\n    }\n    return isNumberFinite(value) && value > 0 ? value : null;\n  }\n  determineDataLimits() {\n    const {min, max} = this.getMinMax(true);\n    this.min = isNumberFinite(min) ? Math.max(0, min) : null;\n    this.max = isNumberFinite(max) ? Math.max(0, max) : null;\n    if (this.options.beginAtZero) {\n      this._zero = true;\n    }\n    this.handleTickRangeOptions();\n  }\n  handleTickRangeOptions() {\n    const {minDefined, maxDefined} = this.getUserBounds();\n    let min = this.min;\n    let max = this.max;\n    const setMin = v => (min = minDefined ? min : v);\n    const setMax = v => (max = maxDefined ? max : v);\n    const exp = (v, m) => Math.pow(10, Math.floor(log10(v)) + m);\n    if (min === max) {\n      if (min <= 0) {\n        setMin(1);\n        setMax(10);\n      } else {\n        setMin(exp(min, -1));\n        setMax(exp(max, +1));\n      }\n    }\n    if (min <= 0) {\n      setMin(exp(max, -1));\n    }\n    if (max <= 0) {\n      setMax(exp(min, +1));\n    }\n    if (this._zero && this.min !== this._suggestedMin && min === exp(this.min, 0)) {\n      setMin(exp(min, -1));\n    }\n    this.min = min;\n    this.max = max;\n  }\n  buildTicks() {\n    const opts = this.options;\n    const generationOptions = {\n      min: this._userMin,\n      max: this._userMax\n    };\n    const ticks = generateTicks(generationOptions, this);\n    if (opts.bounds === 'ticks') {\n      _setMinAndMaxByKey(ticks, this, 'value');\n    }\n    if (opts.reverse) {\n      ticks.reverse();\n      this.start = this.max;\n      this.end = this.min;\n    } else {\n      this.start = this.min;\n      this.end = this.max;\n    }\n    return ticks;\n  }\n  getLabelForValue(value) {\n    return value === undefined\n      ? '0'\n      : formatNumber(value, this.chart.options.locale, this.options.ticks.format);\n  }\n  configure() {\n    const start = this.min;\n    super.configure();\n    this._startValue = log10(start);\n    this._valueRange = log10(this.max) - log10(start);\n  }\n  getPixelForValue(value) {\n    if (value === undefined || value === 0) {\n      value = this.min;\n    }\n    if (value === null || isNaN(value)) {\n      return NaN;\n    }\n    return this.getPixelForDecimal(value === this.min\n      ? 0\n      : (log10(value) - this._startValue) / this._valueRange);\n  }\n  getValueForPixel(pixel) {\n    const decimal = this.getDecimalForPixel(pixel);\n    return Math.pow(10, this._startValue + decimal * this._valueRange);\n  }\n}\nLogarithmicScale.id = 'logarithmic';\nLogarithmicScale.defaults = {\n  ticks: {\n    callback: Ticks.formatters.logarithmic,\n    major: {\n      enabled: true\n    }\n  }\n};\n\nfunction getTickBackdropHeight(opts) {\n  const tickOpts = opts.ticks;\n  if (tickOpts.display && opts.display) {\n    const padding = toPadding(tickOpts.backdropPadding);\n    return valueOrDefault(tickOpts.font && tickOpts.font.size, defaults.font.size) + padding.height;\n  }\n  return 0;\n}\nfunction measureLabelSize(ctx, font, label) {\n  label = isArray(label) ? label : [label];\n  return {\n    w: _longestText(ctx, font.string, label),\n    h: label.length * font.lineHeight\n  };\n}\nfunction determineLimits(angle, pos, size, min, max) {\n  if (angle === min || angle === max) {\n    return {\n      start: pos - (size / 2),\n      end: pos + (size / 2)\n    };\n  } else if (angle < min || angle > max) {\n    return {\n      start: pos - size,\n      end: pos\n    };\n  }\n  return {\n    start: pos,\n    end: pos + size\n  };\n}\nfunction fitWithPointLabels(scale) {\n  const orig = {\n    l: scale.left + scale._padding.left,\n    r: scale.right - scale._padding.right,\n    t: scale.top + scale._padding.top,\n    b: scale.bottom - scale._padding.bottom\n  };\n  const limits = Object.assign({}, orig);\n  const labelSizes = [];\n  const padding = [];\n  const valueCount = scale._pointLabels.length;\n  const pointLabelOpts = scale.options.pointLabels;\n  const additionalAngle = pointLabelOpts.centerPointLabels ? PI / valueCount : 0;\n  for (let i = 0; i < valueCount; i++) {\n    const opts = pointLabelOpts.setContext(scale.getPointLabelContext(i));\n    padding[i] = opts.padding;\n    const pointPosition = scale.getPointPosition(i, scale.drawingArea + padding[i], additionalAngle);\n    const plFont = toFont(opts.font);\n    const textSize = measureLabelSize(scale.ctx, plFont, scale._pointLabels[i]);\n    labelSizes[i] = textSize;\n    const angleRadians = _normalizeAngle(scale.getIndexAngle(i) + additionalAngle);\n    const angle = Math.round(toDegrees(angleRadians));\n    const hLimits = determineLimits(angle, pointPosition.x, textSize.w, 0, 180);\n    const vLimits = determineLimits(angle, pointPosition.y, textSize.h, 90, 270);\n    updateLimits(limits, orig, angleRadians, hLimits, vLimits);\n  }\n  scale.setCenterPoint(\n    orig.l - limits.l,\n    limits.r - orig.r,\n    orig.t - limits.t,\n    limits.b - orig.b\n  );\n  scale._pointLabelItems = buildPointLabelItems(scale, labelSizes, padding);\n}\nfunction updateLimits(limits, orig, angle, hLimits, vLimits) {\n  const sin = Math.abs(Math.sin(angle));\n  const cos = Math.abs(Math.cos(angle));\n  let x = 0;\n  let y = 0;\n  if (hLimits.start < orig.l) {\n    x = (orig.l - hLimits.start) / sin;\n    limits.l = Math.min(limits.l, orig.l - x);\n  } else if (hLimits.end > orig.r) {\n    x = (hLimits.end - orig.r) / sin;\n    limits.r = Math.max(limits.r, orig.r + x);\n  }\n  if (vLimits.start < orig.t) {\n    y = (orig.t - vLimits.start) / cos;\n    limits.t = Math.min(limits.t, orig.t - y);\n  } else if (vLimits.end > orig.b) {\n    y = (vLimits.end - orig.b) / cos;\n    limits.b = Math.max(limits.b, orig.b + y);\n  }\n}\nfunction buildPointLabelItems(scale, labelSizes, padding) {\n  const items = [];\n  const valueCount = scale._pointLabels.length;\n  const opts = scale.options;\n  const extra = getTickBackdropHeight(opts) / 2;\n  const outerDistance = scale.drawingArea;\n  const additionalAngle = opts.pointLabels.centerPointLabels ? PI / valueCount : 0;\n  for (let i = 0; i < valueCount; i++) {\n    const pointLabelPosition = scale.getPointPosition(i, outerDistance + extra + padding[i], additionalAngle);\n    const angle = Math.round(toDegrees(_normalizeAngle(pointLabelPosition.angle + HALF_PI)));\n    const size = labelSizes[i];\n    const y = yForAngle(pointLabelPosition.y, size.h, angle);\n    const textAlign = getTextAlignForAngle(angle);\n    const left = leftForTextAlign(pointLabelPosition.x, size.w, textAlign);\n    items.push({\n      x: pointLabelPosition.x,\n      y,\n      textAlign,\n      left,\n      top: y,\n      right: left + size.w,\n      bottom: y + size.h\n    });\n  }\n  return items;\n}\nfunction getTextAlignForAngle(angle) {\n  if (angle === 0 || angle === 180) {\n    return 'center';\n  } else if (angle < 180) {\n    return 'left';\n  }\n  return 'right';\n}\nfunction leftForTextAlign(x, w, align) {\n  if (align === 'right') {\n    x -= w;\n  } else if (align === 'center') {\n    x -= (w / 2);\n  }\n  return x;\n}\nfunction yForAngle(y, h, angle) {\n  if (angle === 90 || angle === 270) {\n    y -= (h / 2);\n  } else if (angle > 270 || angle < 90) {\n    y -= h;\n  }\n  return y;\n}\nfunction drawPointLabels(scale, labelCount) {\n  const {ctx, options: {pointLabels}} = scale;\n  for (let i = labelCount - 1; i >= 0; i--) {\n    const optsAtIndex = pointLabels.setContext(scale.getPointLabelContext(i));\n    const plFont = toFont(optsAtIndex.font);\n    const {x, y, textAlign, left, top, right, bottom} = scale._pointLabelItems[i];\n    const {backdropColor} = optsAtIndex;\n    if (!isNullOrUndef(backdropColor)) {\n      const borderRadius = toTRBLCorners(optsAtIndex.borderRadius);\n      const padding = toPadding(optsAtIndex.backdropPadding);\n      ctx.fillStyle = backdropColor;\n      const backdropLeft = left - padding.left;\n      const backdropTop = top - padding.top;\n      const backdropWidth = right - left + padding.width;\n      const backdropHeight = bottom - top + padding.height;\n      if (Object.values(borderRadius).some(v => v !== 0)) {\n        ctx.beginPath();\n        addRoundedRectPath(ctx, {\n          x: backdropLeft,\n          y: backdropTop,\n          w: backdropWidth,\n          h: backdropHeight,\n          radius: borderRadius,\n        });\n        ctx.fill();\n      } else {\n        ctx.fillRect(backdropLeft, backdropTop, backdropWidth, backdropHeight);\n      }\n    }\n    renderText(\n      ctx,\n      scale._pointLabels[i],\n      x,\n      y + (plFont.lineHeight / 2),\n      plFont,\n      {\n        color: optsAtIndex.color,\n        textAlign: textAlign,\n        textBaseline: 'middle'\n      }\n    );\n  }\n}\nfunction pathRadiusLine(scale, radius, circular, labelCount) {\n  const {ctx} = scale;\n  if (circular) {\n    ctx.arc(scale.xCenter, scale.yCenter, radius, 0, TAU);\n  } else {\n    let pointPosition = scale.getPointPosition(0, radius);\n    ctx.moveTo(pointPosition.x, pointPosition.y);\n    for (let i = 1; i < labelCount; i++) {\n      pointPosition = scale.getPointPosition(i, radius);\n      ctx.lineTo(pointPosition.x, pointPosition.y);\n    }\n  }\n}\nfunction drawRadiusLine(scale, gridLineOpts, radius, labelCount) {\n  const ctx = scale.ctx;\n  const circular = gridLineOpts.circular;\n  const {color, lineWidth} = gridLineOpts;\n  if ((!circular && !labelCount) || !color || !lineWidth || radius < 0) {\n    return;\n  }\n  ctx.save();\n  ctx.strokeStyle = color;\n  ctx.lineWidth = lineWidth;\n  ctx.setLineDash(gridLineOpts.borderDash);\n  ctx.lineDashOffset = gridLineOpts.borderDashOffset;\n  ctx.beginPath();\n  pathRadiusLine(scale, radius, circular, labelCount);\n  ctx.closePath();\n  ctx.stroke();\n  ctx.restore();\n}\nfunction createPointLabelContext(parent, index, label) {\n  return createContext(parent, {\n    label,\n    index,\n    type: 'pointLabel'\n  });\n}\nclass RadialLinearScale extends LinearScaleBase {\n  constructor(cfg) {\n    super(cfg);\n    this.xCenter = undefined;\n    this.yCenter = undefined;\n    this.drawingArea = undefined;\n    this._pointLabels = [];\n    this._pointLabelItems = [];\n  }\n  setDimensions() {\n    const padding = this._padding = toPadding(getTickBackdropHeight(this.options) / 2);\n    const w = this.width = this.maxWidth - padding.width;\n    const h = this.height = this.maxHeight - padding.height;\n    this.xCenter = Math.floor(this.left + w / 2 + padding.left);\n    this.yCenter = Math.floor(this.top + h / 2 + padding.top);\n    this.drawingArea = Math.floor(Math.min(w, h) / 2);\n  }\n  determineDataLimits() {\n    const {min, max} = this.getMinMax(false);\n    this.min = isNumberFinite(min) && !isNaN(min) ? min : 0;\n    this.max = isNumberFinite(max) && !isNaN(max) ? max : 0;\n    this.handleTickRangeOptions();\n  }\n  computeTickLimit() {\n    return Math.ceil(this.drawingArea / getTickBackdropHeight(this.options));\n  }\n  generateTickLabels(ticks) {\n    LinearScaleBase.prototype.generateTickLabels.call(this, ticks);\n    this._pointLabels = this.getLabels()\n      .map((value, index) => {\n        const label = callback(this.options.pointLabels.callback, [value, index], this);\n        return label || label === 0 ? label : '';\n      })\n      .filter((v, i) => this.chart.getDataVisibility(i));\n  }\n  fit() {\n    const opts = this.options;\n    if (opts.display && opts.pointLabels.display) {\n      fitWithPointLabels(this);\n    } else {\n      this.setCenterPoint(0, 0, 0, 0);\n    }\n  }\n  setCenterPoint(leftMovement, rightMovement, topMovement, bottomMovement) {\n    this.xCenter += Math.floor((leftMovement - rightMovement) / 2);\n    this.yCenter += Math.floor((topMovement - bottomMovement) / 2);\n    this.drawingArea -= Math.min(this.drawingArea / 2, Math.max(leftMovement, rightMovement, topMovement, bottomMovement));\n  }\n  getIndexAngle(index) {\n    const angleMultiplier = TAU / (this._pointLabels.length || 1);\n    const startAngle = this.options.startAngle || 0;\n    return _normalizeAngle(index * angleMultiplier + toRadians(startAngle));\n  }\n  getDistanceFromCenterForValue(value) {\n    if (isNullOrUndef(value)) {\n      return NaN;\n    }\n    const scalingFactor = this.drawingArea / (this.max - this.min);\n    if (this.options.reverse) {\n      return (this.max - value) * scalingFactor;\n    }\n    return (value - this.min) * scalingFactor;\n  }\n  getValueForDistanceFromCenter(distance) {\n    if (isNullOrUndef(distance)) {\n      return NaN;\n    }\n    const scaledDistance = distance / (this.drawingArea / (this.max - this.min));\n    return this.options.reverse ? this.max - scaledDistance : this.min + scaledDistance;\n  }\n  getPointLabelContext(index) {\n    const pointLabels = this._pointLabels || [];\n    if (index >= 0 && index < pointLabels.length) {\n      const pointLabel = pointLabels[index];\n      return createPointLabelContext(this.getContext(), index, pointLabel);\n    }\n  }\n  getPointPosition(index, distanceFromCenter, additionalAngle = 0) {\n    const angle = this.getIndexAngle(index) - HALF_PI + additionalAngle;\n    return {\n      x: Math.cos(angle) * distanceFromCenter + this.xCenter,\n      y: Math.sin(angle) * distanceFromCenter + this.yCenter,\n      angle\n    };\n  }\n  getPointPositionForValue(index, value) {\n    return this.getPointPosition(index, this.getDistanceFromCenterForValue(value));\n  }\n  getBasePosition(index) {\n    return this.getPointPositionForValue(index || 0, this.getBaseValue());\n  }\n  getPointLabelPosition(index) {\n    const {left, top, right, bottom} = this._pointLabelItems[index];\n    return {\n      left,\n      top,\n      right,\n      bottom,\n    };\n  }\n  drawBackground() {\n    const {backgroundColor, grid: {circular}} = this.options;\n    if (backgroundColor) {\n      const ctx = this.ctx;\n      ctx.save();\n      ctx.beginPath();\n      pathRadiusLine(this, this.getDistanceFromCenterForValue(this._endValue), circular, this._pointLabels.length);\n      ctx.closePath();\n      ctx.fillStyle = backgroundColor;\n      ctx.fill();\n      ctx.restore();\n    }\n  }\n  drawGrid() {\n    const ctx = this.ctx;\n    const opts = this.options;\n    const {angleLines, grid} = opts;\n    const labelCount = this._pointLabels.length;\n    let i, offset, position;\n    if (opts.pointLabels.display) {\n      drawPointLabels(this, labelCount);\n    }\n    if (grid.display) {\n      this.ticks.forEach((tick, index) => {\n        if (index !== 0) {\n          offset = this.getDistanceFromCenterForValue(tick.value);\n          const optsAtIndex = grid.setContext(this.getContext(index - 1));\n          drawRadiusLine(this, optsAtIndex, offset, labelCount);\n        }\n      });\n    }\n    if (angleLines.display) {\n      ctx.save();\n      for (i = labelCount - 1; i >= 0; i--) {\n        const optsAtIndex = angleLines.setContext(this.getPointLabelContext(i));\n        const {color, lineWidth} = optsAtIndex;\n        if (!lineWidth || !color) {\n          continue;\n        }\n        ctx.lineWidth = lineWidth;\n        ctx.strokeStyle = color;\n        ctx.setLineDash(optsAtIndex.borderDash);\n        ctx.lineDashOffset = optsAtIndex.borderDashOffset;\n        offset = this.getDistanceFromCenterForValue(opts.ticks.reverse ? this.min : this.max);\n        position = this.getPointPosition(i, offset);\n        ctx.beginPath();\n        ctx.moveTo(this.xCenter, this.yCenter);\n        ctx.lineTo(position.x, position.y);\n        ctx.stroke();\n      }\n      ctx.restore();\n    }\n  }\n  drawBorder() {}\n  drawLabels() {\n    const ctx = this.ctx;\n    const opts = this.options;\n    const tickOpts = opts.ticks;\n    if (!tickOpts.display) {\n      return;\n    }\n    const startAngle = this.getIndexAngle(0);\n    let offset, width;\n    ctx.save();\n    ctx.translate(this.xCenter, this.yCenter);\n    ctx.rotate(startAngle);\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'middle';\n    this.ticks.forEach((tick, index) => {\n      if (index === 0 && !opts.reverse) {\n        return;\n      }\n      const optsAtIndex = tickOpts.setContext(this.getContext(index));\n      const tickFont = toFont(optsAtIndex.font);\n      offset = this.getDistanceFromCenterForValue(this.ticks[index].value);\n      if (optsAtIndex.showLabelBackdrop) {\n        ctx.font = tickFont.string;\n        width = ctx.measureText(tick.label).width;\n        ctx.fillStyle = optsAtIndex.backdropColor;\n        const padding = toPadding(optsAtIndex.backdropPadding);\n        ctx.fillRect(\n          -width / 2 - padding.left,\n          -offset - tickFont.size / 2 - padding.top,\n          width + padding.width,\n          tickFont.size + padding.height\n        );\n      }\n      renderText(ctx, tick.label, 0, -offset, tickFont, {\n        color: optsAtIndex.color,\n      });\n    });\n    ctx.restore();\n  }\n  drawTitle() {}\n}\nRadialLinearScale.id = 'radialLinear';\nRadialLinearScale.defaults = {\n  display: true,\n  animate: true,\n  position: 'chartArea',\n  angleLines: {\n    display: true,\n    lineWidth: 1,\n    borderDash: [],\n    borderDashOffset: 0.0\n  },\n  grid: {\n    circular: false\n  },\n  startAngle: 0,\n  ticks: {\n    showLabelBackdrop: true,\n    callback: Ticks.formatters.numeric\n  },\n  pointLabels: {\n    backdropColor: undefined,\n    backdropPadding: 2,\n    display: true,\n    font: {\n      size: 10\n    },\n    callback(label) {\n      return label;\n    },\n    padding: 5,\n    centerPointLabels: false\n  }\n};\nRadialLinearScale.defaultRoutes = {\n  'angleLines.color': 'borderColor',\n  'pointLabels.color': 'color',\n  'ticks.color': 'color'\n};\nRadialLinearScale.descriptors = {\n  angleLines: {\n    _fallback: 'grid'\n  }\n};\n\nconst INTERVALS = {\n  millisecond: {common: true, size: 1, steps: 1000},\n  second: {common: true, size: 1000, steps: 60},\n  minute: {common: true, size: 60000, steps: 60},\n  hour: {common: true, size: 3600000, steps: 24},\n  day: {common: true, size: 86400000, steps: 30},\n  week: {common: false, size: 604800000, steps: 4},\n  month: {common: true, size: 2.628e9, steps: 12},\n  quarter: {common: false, size: 7.884e9, steps: 4},\n  year: {common: true, size: 3.154e10}\n};\nconst UNITS = (Object.keys(INTERVALS));\nfunction sorter(a, b) {\n  return a - b;\n}\nfunction parse(scale, input) {\n  if (isNullOrUndef(input)) {\n    return null;\n  }\n  const adapter = scale._adapter;\n  const {parser, round, isoWeekday} = scale._parseOpts;\n  let value = input;\n  if (typeof parser === 'function') {\n    value = parser(value);\n  }\n  if (!isNumberFinite(value)) {\n    value = typeof parser === 'string'\n      ? adapter.parse(value, parser)\n      : adapter.parse(value);\n  }\n  if (value === null) {\n    return null;\n  }\n  if (round) {\n    value = round === 'week' && (isNumber(isoWeekday) || isoWeekday === true)\n      ? adapter.startOf(value, 'isoWeek', isoWeekday)\n      : adapter.startOf(value, round);\n  }\n  return +value;\n}\nfunction determineUnitForAutoTicks(minUnit, min, max, capacity) {\n  const ilen = UNITS.length;\n  for (let i = UNITS.indexOf(minUnit); i < ilen - 1; ++i) {\n    const interval = INTERVALS[UNITS[i]];\n    const factor = interval.steps ? interval.steps : Number.MAX_SAFE_INTEGER;\n    if (interval.common && Math.ceil((max - min) / (factor * interval.size)) <= capacity) {\n      return UNITS[i];\n    }\n  }\n  return UNITS[ilen - 1];\n}\nfunction determineUnitForFormatting(scale, numTicks, minUnit, min, max) {\n  for (let i = UNITS.length - 1; i >= UNITS.indexOf(minUnit); i--) {\n    const unit = UNITS[i];\n    if (INTERVALS[unit].common && scale._adapter.diff(max, min, unit) >= numTicks - 1) {\n      return unit;\n    }\n  }\n  return UNITS[minUnit ? UNITS.indexOf(minUnit) : 0];\n}\nfunction determineMajorUnit(unit) {\n  for (let i = UNITS.indexOf(unit) + 1, ilen = UNITS.length; i < ilen; ++i) {\n    if (INTERVALS[UNITS[i]].common) {\n      return UNITS[i];\n    }\n  }\n}\nfunction addTick(ticks, time, timestamps) {\n  if (!timestamps) {\n    ticks[time] = true;\n  } else if (timestamps.length) {\n    const {lo, hi} = _lookup(timestamps, time);\n    const timestamp = timestamps[lo] >= time ? timestamps[lo] : timestamps[hi];\n    ticks[timestamp] = true;\n  }\n}\nfunction setMajorTicks(scale, ticks, map, majorUnit) {\n  const adapter = scale._adapter;\n  const first = +adapter.startOf(ticks[0].value, majorUnit);\n  const last = ticks[ticks.length - 1].value;\n  let major, index;\n  for (major = first; major <= last; major = +adapter.add(major, 1, majorUnit)) {\n    index = map[major];\n    if (index >= 0) {\n      ticks[index].major = true;\n    }\n  }\n  return ticks;\n}\nfunction ticksFromTimestamps(scale, values, majorUnit) {\n  const ticks = [];\n  const map = {};\n  const ilen = values.length;\n  let i, value;\n  for (i = 0; i < ilen; ++i) {\n    value = values[i];\n    map[value] = i;\n    ticks.push({\n      value,\n      major: false\n    });\n  }\n  return (ilen === 0 || !majorUnit) ? ticks : setMajorTicks(scale, ticks, map, majorUnit);\n}\nclass TimeScale extends Scale {\n  constructor(props) {\n    super(props);\n    this._cache = {\n      data: [],\n      labels: [],\n      all: []\n    };\n    this._unit = 'day';\n    this._majorUnit = undefined;\n    this._offsets = {};\n    this._normalized = false;\n    this._parseOpts = undefined;\n  }\n  init(scaleOpts, opts) {\n    const time = scaleOpts.time || (scaleOpts.time = {});\n    const adapter = this._adapter = new adapters._date(scaleOpts.adapters.date);\n    adapter.init(opts);\n    mergeIf(time.displayFormats, adapter.formats());\n    this._parseOpts = {\n      parser: time.parser,\n      round: time.round,\n      isoWeekday: time.isoWeekday\n    };\n    super.init(scaleOpts);\n    this._normalized = opts.normalized;\n  }\n  parse(raw, index) {\n    if (raw === undefined) {\n      return null;\n    }\n    return parse(this, raw);\n  }\n  beforeLayout() {\n    super.beforeLayout();\n    this._cache = {\n      data: [],\n      labels: [],\n      all: []\n    };\n  }\n  determineDataLimits() {\n    const options = this.options;\n    const adapter = this._adapter;\n    const unit = options.time.unit || 'day';\n    let {min, max, minDefined, maxDefined} = this.getUserBounds();\n    function _applyBounds(bounds) {\n      if (!minDefined && !isNaN(bounds.min)) {\n        min = Math.min(min, bounds.min);\n      }\n      if (!maxDefined && !isNaN(bounds.max)) {\n        max = Math.max(max, bounds.max);\n      }\n    }\n    if (!minDefined || !maxDefined) {\n      _applyBounds(this._getLabelBounds());\n      if (options.bounds !== 'ticks' || options.ticks.source !== 'labels') {\n        _applyBounds(this.getMinMax(false));\n      }\n    }\n    min = isNumberFinite(min) && !isNaN(min) ? min : +adapter.startOf(Date.now(), unit);\n    max = isNumberFinite(max) && !isNaN(max) ? max : +adapter.endOf(Date.now(), unit) + 1;\n    this.min = Math.min(min, max - 1);\n    this.max = Math.max(min + 1, max);\n  }\n  _getLabelBounds() {\n    const arr = this.getLabelTimestamps();\n    let min = Number.POSITIVE_INFINITY;\n    let max = Number.NEGATIVE_INFINITY;\n    if (arr.length) {\n      min = arr[0];\n      max = arr[arr.length - 1];\n    }\n    return {min, max};\n  }\n  buildTicks() {\n    const options = this.options;\n    const timeOpts = options.time;\n    const tickOpts = options.ticks;\n    const timestamps = tickOpts.source === 'labels' ? this.getLabelTimestamps() : this._generate();\n    if (options.bounds === 'ticks' && timestamps.length) {\n      this.min = this._userMin || timestamps[0];\n      this.max = this._userMax || timestamps[timestamps.length - 1];\n    }\n    const min = this.min;\n    const max = this.max;\n    const ticks = _filterBetween(timestamps, min, max);\n    this._unit = timeOpts.unit || (tickOpts.autoSkip\n      ? determineUnitForAutoTicks(timeOpts.minUnit, this.min, this.max, this._getLabelCapacity(min))\n      : determineUnitForFormatting(this, ticks.length, timeOpts.minUnit, this.min, this.max));\n    this._majorUnit = !tickOpts.major.enabled || this._unit === 'year' ? undefined\n      : determineMajorUnit(this._unit);\n    this.initOffsets(timestamps);\n    if (options.reverse) {\n      ticks.reverse();\n    }\n    return ticksFromTimestamps(this, ticks, this._majorUnit);\n  }\n  afterAutoSkip() {\n    if (this.options.offsetAfterAutoskip) {\n      this.initOffsets(this.ticks.map(tick => +tick.value));\n    }\n  }\n  initOffsets(timestamps) {\n    let start = 0;\n    let end = 0;\n    let first, last;\n    if (this.options.offset && timestamps.length) {\n      first = this.getDecimalForValue(timestamps[0]);\n      if (timestamps.length === 1) {\n        start = 1 - first;\n      } else {\n        start = (this.getDecimalForValue(timestamps[1]) - first) / 2;\n      }\n      last = this.getDecimalForValue(timestamps[timestamps.length - 1]);\n      if (timestamps.length === 1) {\n        end = last;\n      } else {\n        end = (last - this.getDecimalForValue(timestamps[timestamps.length - 2])) / 2;\n      }\n    }\n    const limit = timestamps.length < 3 ? 0.5 : 0.25;\n    start = _limitValue(start, 0, limit);\n    end = _limitValue(end, 0, limit);\n    this._offsets = {start, end, factor: 1 / (start + 1 + end)};\n  }\n  _generate() {\n    const adapter = this._adapter;\n    const min = this.min;\n    const max = this.max;\n    const options = this.options;\n    const timeOpts = options.time;\n    const minor = timeOpts.unit || determineUnitForAutoTicks(timeOpts.minUnit, min, max, this._getLabelCapacity(min));\n    const stepSize = valueOrDefault(timeOpts.stepSize, 1);\n    const weekday = minor === 'week' ? timeOpts.isoWeekday : false;\n    const hasWeekday = isNumber(weekday) || weekday === true;\n    const ticks = {};\n    let first = min;\n    let time, count;\n    if (hasWeekday) {\n      first = +adapter.startOf(first, 'isoWeek', weekday);\n    }\n    first = +adapter.startOf(first, hasWeekday ? 'day' : minor);\n    if (adapter.diff(max, min, minor) > 100000 * stepSize) {\n      throw new Error(min + ' and ' + max + ' are too far apart with stepSize of ' + stepSize + ' ' + minor);\n    }\n    const timestamps = options.ticks.source === 'data' && this.getDataTimestamps();\n    for (time = first, count = 0; time < max; time = +adapter.add(time, stepSize, minor), count++) {\n      addTick(ticks, time, timestamps);\n    }\n    if (time === max || options.bounds === 'ticks' || count === 1) {\n      addTick(ticks, time, timestamps);\n    }\n    return Object.keys(ticks).sort((a, b) => a - b).map(x => +x);\n  }\n  getLabelForValue(value) {\n    const adapter = this._adapter;\n    const timeOpts = this.options.time;\n    if (timeOpts.tooltipFormat) {\n      return adapter.format(value, timeOpts.tooltipFormat);\n    }\n    return adapter.format(value, timeOpts.displayFormats.datetime);\n  }\n  _tickFormatFunction(time, index, ticks, format) {\n    const options = this.options;\n    const formats = options.time.displayFormats;\n    const unit = this._unit;\n    const majorUnit = this._majorUnit;\n    const minorFormat = unit && formats[unit];\n    const majorFormat = majorUnit && formats[majorUnit];\n    const tick = ticks[index];\n    const major = majorUnit && majorFormat && tick && tick.major;\n    const label = this._adapter.format(time, format || (major ? majorFormat : minorFormat));\n    const formatter = options.ticks.callback;\n    return formatter ? callback(formatter, [label, index, ticks], this) : label;\n  }\n  generateTickLabels(ticks) {\n    let i, ilen, tick;\n    for (i = 0, ilen = ticks.length; i < ilen; ++i) {\n      tick = ticks[i];\n      tick.label = this._tickFormatFunction(tick.value, i, ticks);\n    }\n  }\n  getDecimalForValue(value) {\n    return value === null ? NaN : (value - this.min) / (this.max - this.min);\n  }\n  getPixelForValue(value) {\n    const offsets = this._offsets;\n    const pos = this.getDecimalForValue(value);\n    return this.getPixelForDecimal((offsets.start + pos) * offsets.factor);\n  }\n  getValueForPixel(pixel) {\n    const offsets = this._offsets;\n    const pos = this.getDecimalForPixel(pixel) / offsets.factor - offsets.end;\n    return this.min + pos * (this.max - this.min);\n  }\n  _getLabelSize(label) {\n    const ticksOpts = this.options.ticks;\n    const tickLabelWidth = this.ctx.measureText(label).width;\n    const angle = toRadians(this.isHorizontal() ? ticksOpts.maxRotation : ticksOpts.minRotation);\n    const cosRotation = Math.cos(angle);\n    const sinRotation = Math.sin(angle);\n    const tickFontSize = this._resolveTickFontOptions(0).size;\n    return {\n      w: (tickLabelWidth * cosRotation) + (tickFontSize * sinRotation),\n      h: (tickLabelWidth * sinRotation) + (tickFontSize * cosRotation)\n    };\n  }\n  _getLabelCapacity(exampleTime) {\n    const timeOpts = this.options.time;\n    const displayFormats = timeOpts.displayFormats;\n    const format = displayFormats[timeOpts.unit] || displayFormats.millisecond;\n    const exampleLabel = this._tickFormatFunction(exampleTime, 0, ticksFromTimestamps(this, [exampleTime], this._majorUnit), format);\n    const size = this._getLabelSize(exampleLabel);\n    const capacity = Math.floor(this.isHorizontal() ? this.width / size.w : this.height / size.h) - 1;\n    return capacity > 0 ? capacity : 1;\n  }\n  getDataTimestamps() {\n    let timestamps = this._cache.data || [];\n    let i, ilen;\n    if (timestamps.length) {\n      return timestamps;\n    }\n    const metas = this.getMatchingVisibleMetas();\n    if (this._normalized && metas.length) {\n      return (this._cache.data = metas[0].controller.getAllParsedValues(this));\n    }\n    for (i = 0, ilen = metas.length; i < ilen; ++i) {\n      timestamps = timestamps.concat(metas[i].controller.getAllParsedValues(this));\n    }\n    return (this._cache.data = this.normalize(timestamps));\n  }\n  getLabelTimestamps() {\n    const timestamps = this._cache.labels || [];\n    let i, ilen;\n    if (timestamps.length) {\n      return timestamps;\n    }\n    const labels = this.getLabels();\n    for (i = 0, ilen = labels.length; i < ilen; ++i) {\n      timestamps.push(parse(this, labels[i]));\n    }\n    return (this._cache.labels = this._normalized ? timestamps : this.normalize(timestamps));\n  }\n  normalize(values) {\n    return _arrayUnique(values.sort(sorter));\n  }\n}\nTimeScale.id = 'time';\nTimeScale.defaults = {\n  bounds: 'data',\n  adapters: {},\n  time: {\n    parser: false,\n    unit: false,\n    round: false,\n    isoWeekday: false,\n    minUnit: 'millisecond',\n    displayFormats: {}\n  },\n  ticks: {\n    source: 'auto',\n    major: {\n      enabled: false\n    }\n  }\n};\n\nfunction interpolate(table, val, reverse) {\n  let lo = 0;\n  let hi = table.length - 1;\n  let prevSource, nextSource, prevTarget, nextTarget;\n  if (reverse) {\n    if (val >= table[lo].pos && val <= table[hi].pos) {\n      ({lo, hi} = _lookupByKey(table, 'pos', val));\n    }\n    ({pos: prevSource, time: prevTarget} = table[lo]);\n    ({pos: nextSource, time: nextTarget} = table[hi]);\n  } else {\n    if (val >= table[lo].time && val <= table[hi].time) {\n      ({lo, hi} = _lookupByKey(table, 'time', val));\n    }\n    ({time: prevSource, pos: prevTarget} = table[lo]);\n    ({time: nextSource, pos: nextTarget} = table[hi]);\n  }\n  const span = nextSource - prevSource;\n  return span ? prevTarget + (nextTarget - prevTarget) * (val - prevSource) / span : prevTarget;\n}\nclass TimeSeriesScale extends TimeScale {\n  constructor(props) {\n    super(props);\n    this._table = [];\n    this._minPos = undefined;\n    this._tableRange = undefined;\n  }\n  initOffsets() {\n    const timestamps = this._getTimestampsForTable();\n    const table = this._table = this.buildLookupTable(timestamps);\n    this._minPos = interpolate(table, this.min);\n    this._tableRange = interpolate(table, this.max) - this._minPos;\n    super.initOffsets(timestamps);\n  }\n  buildLookupTable(timestamps) {\n    const {min, max} = this;\n    const items = [];\n    const table = [];\n    let i, ilen, prev, curr, next;\n    for (i = 0, ilen = timestamps.length; i < ilen; ++i) {\n      curr = timestamps[i];\n      if (curr >= min && curr <= max) {\n        items.push(curr);\n      }\n    }\n    if (items.length < 2) {\n      return [\n        {time: min, pos: 0},\n        {time: max, pos: 1}\n      ];\n    }\n    for (i = 0, ilen = items.length; i < ilen; ++i) {\n      next = items[i + 1];\n      prev = items[i - 1];\n      curr = items[i];\n      if (Math.round((next + prev) / 2) !== curr) {\n        table.push({time: curr, pos: i / (ilen - 1)});\n      }\n    }\n    return table;\n  }\n  _getTimestampsForTable() {\n    let timestamps = this._cache.all || [];\n    if (timestamps.length) {\n      return timestamps;\n    }\n    const data = this.getDataTimestamps();\n    const label = this.getLabelTimestamps();\n    if (data.length && label.length) {\n      timestamps = this.normalize(data.concat(label));\n    } else {\n      timestamps = data.length ? data : label;\n    }\n    timestamps = this._cache.all = timestamps;\n    return timestamps;\n  }\n  getDecimalForValue(value) {\n    return (interpolate(this._table, value) - this._minPos) / this._tableRange;\n  }\n  getValueForPixel(pixel) {\n    const offsets = this._offsets;\n    const decimal = this.getDecimalForPixel(pixel) / offsets.factor - offsets.end;\n    return interpolate(this._table, decimal * this._tableRange + this._minPos, true);\n  }\n}\nTimeSeriesScale.id = 'timeseries';\nTimeSeriesScale.defaults = TimeScale.defaults;\n\nvar scales = /*#__PURE__*/Object.freeze({\n__proto__: null,\nCategoryScale: CategoryScale,\nLinearScale: LinearScale,\nLogarithmicScale: LogarithmicScale,\nRadialLinearScale: RadialLinearScale,\nTimeScale: TimeScale,\nTimeSeriesScale: TimeSeriesScale\n});\n\nconst registerables = [\n  controllers,\n  elements,\n  plugins,\n  scales,\n];\n\nexport { Animation, Animations, ArcElement, BarController, BarElement, BasePlatform, BasicPlatform, BubbleController, CategoryScale, Chart, DatasetController, plugin_decimation as Decimation, DomPlatform, DoughnutController, Element, index as Filler, Interaction, plugin_legend as Legend, LineController, LineElement, LinearScale, LogarithmicScale, PieController, PointElement, PolarAreaController, RadarController, RadialLinearScale, Scale, ScatterController, plugin_subtitle as SubTitle, Ticks, TimeScale, TimeSeriesScale, plugin_title as Title, plugin_tooltip as Tooltip, adapters as _adapters, _detectPlatform, animator, controllers, elements, layouts, plugins, registerables, registry, scales };\n"],"names":["exports","_slicedToArray","_classCallCheck","_createClass","createExtendedExponentialRampToValueAutomationEvent","value","endTime","insertTime","type","createExtendedLinearRampToValueAutomationEvent","createSetValueAutomationEvent","startTime","createSetValueCurveAutomationEvent","values","duration","getTargetValueAtTime","time","valueAtStartTime","_ref","target","timeConstant","Math","exp","isExponentialRampToValueAutomationEvent","automationEvent","isLinearRampToValueAutomationEvent","isAnyRampToValueAutomationEvent","isSetValueAutomationEvent","isSetValueCurveAutomationEvent","getValueOfAutomationEventAtIndexAtTime","automationEvents","index","defaultValue","undefined","length","getEndTimeAndValueOfPreviousAutomationEvent","currentAutomationEvent","nextAutomationEvent","isCancelAndHoldAutomationEvent","isCancelScheduledValuesAutomationEvent","getEventTime","cancelTime","getExponentialRampValueAtTime","pow","getLinearRampValueAtTime","interpolateValue","theoreticIndex","lowerIndex","floor","upperIndex","ceil","getValueCurveValueAtTime","isSetTargetAutomationEvent","AutomationEventList","_Symbol$iterator","this","_automationEvents","_currenTime","_defaultValue","key","Symbol","iterator","eventTime","findIndex","removedAutomationEvent","slice","lastAutomationEvent","Error","startValue","truncatedAutomationEvent","push","getValue","ratio","max","fraction","i","factor","_index","previousAutomationEvent","persistentAutomationEvent","splice","remainingAutomationEvents","firstRemainingAutomationEvent","unshift","indexOfNextEvent","indexOfCurrentEvent","_getEndTimeAndValueOf","_getEndTimeAndValueOf2","_getEndTimeAndValueOf3","_getEndTimeAndValueOf4","_startTime","_value","createCancelAndHoldAutomationEvent","createCancelScheduledValuesAutomationEvent","createExponentialRampToValueAutomationEvent","createLinearRampToValueAutomationEvent","createSetTargetAutomationEvent","factory","require","PORT_MAP","WeakMap","ONGOING_REQUESTS","createBroker","brokerImplementation","fullBrokerImplementation","partialBrokerImplementation","connect","call","async","port1","port2","MessageChannel","portId","port","set","disconnect","_ref2","get","isSupported","_ref3","sender","ongoingRequests","has","Map","createOrGetOngoingRequests","addEventListener","data","message","id","reject","resolve","delete","error","result","start","isMessagePort","method","params","arguments","transferables","Promise","generateUniqueNumber","postMessage","notify","functions","handler","Object","entries","module","str","options","TypeError","trim","replace","m","test","condense","toLowerCase","isMergeableObject","isNonNullObject","stringValue","prototype","toString","$$typeof","REACT_ELEMENT_TYPE","isReactElement","isSpecial","for","cloneUnlessOtherwiseSpecified","clone","deepmerge","val","Array","isArray","defaultArrayMerge","source","concat","map","element","getKeys","keys","getOwnPropertySymbols","filter","symbol","propertyIsEnumerable","getEnumerableOwnPropertySymbols","propertyIsOnObject","object","property","_","mergeObject","destination","forEach","hasOwnProperty","propertyIsUnsafe","customMerge","getMergeFunction","arrayMerge","sourceIsArray","all","array","reduce","prev","next","deepmerge_1","wrap","characterize","encode","recordingId","timeslice","record","sampleRate","typedArrays","_ref4","buffer","blob","Blob","url","URL","createObjectURL","extendableMediaRecorderWavEncoder","worker","Worker","load","revokeObjectURL","encoderIds","Set","encoderId","arrayBuffers","instantiate","mimeType","addUniqueNumber","register","mediaEncoderHost","loadWorker","createInvalidModificationError","DOMException","err","code","name","createNotSupportedError","observable","noop","rethrow","emitNotSupportedError","observer","window","wrapSubscribeFunction","createWrapSubscribeFunction","patch","toObserver","emptyFunction","innerSubscribe","subscribe","_len","args","_key","unsubscribe","isNextFunction","arg","_observer$complete","_observer$error","_observer$next","complete","bind","mutations","createAnimationFrame","createMutations","htmlElement","MutationObserver","mutationObserver","records","observe","mapSubscribableThing","subscribableThing","createMapSubscribableThing","prependSubscribableThing","prependedValue","createPrependSubscribableThing","on","createAttribute","createGeolocation","createIntersections","createMediaDevices","createMediaQueryMatch","createMetrics","createMidiInputs","createMidiOutputs","listener","event","removeEventListener","createOn","JSON_RPC_ERROR_CODES","addRecorderAudioWorkletModule","compile","status","createAddRecorderAudioWorkletModule","blobConstructor","urlConstructor","worklet","addAudioWorkletModule","createRecorderAudioWorkletNode","createRecorderAudioWorkletNodeFactory","createListener","createPostMessage","validateState","audioWorkletNodeConstructor","context","audioWorkletNode","channelCountMode","numberOfInputs","numberOfOutputs","state","defineProperties","pause","encoderPort","resume","stop","ongoingRequest","createPostMessageFactory","expectedStates","currentState","includes","expectedState","join","ACTIVE_AUDIO_NODE_STORE","WeakSet","AUDIO_NODE_CONNECTIONS_STORE","AUDIO_NODE_STORE","AUDIO_PARAM_CONNECTIONS_STORE","AUDIO_PARAM_STORE","CONTEXT_STORE","EVENT_LISTENERS","CYCLE_COUNTERS","NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS","NODE_TO_PROCESSOR_MAPS","construct","IMPORT_STATEMENT_REGEX","splitImportStatements","importStatements","sourceWithoutImportStatements","match","unresolvedUrl","importStatementWithResolvedUrl","verifyParameterDescriptors","parameterDescriptors","verifyProcessorCtor","processorCtor","constructible","Proxy","isConstructible","getValueForKey","pickElementFromSet","predicate","matchingElements","from","matchingElement","deletePassiveInputConnectionToAudioNode","passiveInputs","output","input","passiveInputConnections","matchingConnection","passiveInputConnection","size","getEventListenersOfAudioNode","audioNode","setInternalStateToActive","add","eventListener","isAudioWorkletNode","setInternalStateToPassive","setInternalStateToPassiveWhenNecessary","activeInputs","every","connections","DEFAULT_OPTIONS","channelCount","channelInterpretation","fftSize","maxDecibels","minDecibels","smoothingTimeConstant","isOwnedByContext","nativeAudioNode","nativeContext","testAudioBufferCopyChannelMethodsOutOfBoundsSupport","nativeAudioBuffer","copyToChannel","Float32Array","createIndexSizeError","wrapAudioBufferGetChannelDataMethod","audioBuffer","getChannelData","channel","numberOfChannels","MOST_NEGATIVE_SINGLE_FLOAT","MOST_POSITIVE_SINGLE_FLOAT","isActiveAudioNode","loop","loopEnd","loopStart","playbackRate","getAudioNodeConnections","getAudioParamConnections","audioParam","deactivateActiveAudioNodeInputConnections","trace","audioParams","isAudioBufferSourceNode","parameters","isBiquadFilterNode","Q","detune","frequency","gain","isConstantSourceNode","offset","isGainNode","isOscillatorNode","isStereoPannerNode","pan","audioParamConnections","deactivateAudioGraph","isValidLatencyHint","latencyHint","isAudioNode","audioNodeOrAudioParam","isAudioNodeOutputConnection","outputConnection","insertElementInSet","ignoreDuplicates","lmnt","addActiveInputConnectionToAudioParam","activeInputConnection","addPassiveInputConnectionToAudioParam","isNativeAudioNodeFaker","nativeAudioNodeOrNativeAudioNodeFaker","connectNativeAudioNodeToNativeAudioNode","nativeSourceAudioNode","nativeDestinationAudioNode","fakeNativeDestinationAudioNode","inputs","deleteActiveInputConnection","activeInputConnections","deleteEventListenerOfAudioNode","deletePassiveInputConnectionToAudioParam","disconnectNativeAudioNodeFromNativeAudioNode","getNativeAudioNode","getNativeAudioParam","isPartOfACycle","isPassiveAudioNode","testAudioNodeDisconnectMethodSupport","nativeAudioContext","nativeAudioWorkletNodeConstructor","analyzer","createScriptProcessor","dummy","createGain","ones","createBuffer","channelData","createBufferSource","onaudioprocess","chnnlDt","inputBuffer","some","sample","visitEachAudioNodeOnce","cycles","visitor","counts","cycle","count","isNativeAudioNode","nativeAudioNodeOrAudioParam","wrapAudioNodeDisconnectMethod","returnValue","connectionsToDestination","connection","destinationOrOutput","apply","clear","filteredConnections","addConnectionToAudioParamOfAudioContext","isOffline","outputs","eventListeners","isActive","nativeAudioParam","partialConnection","deleteActiveInputConnectionToAudioParam","deleteInputsOfAudioNode","deleteInputConnectionOfAudioNode","deleteInputsOfAudioParam","deleteInputConnectionOfAudioParam","ReadOnlyMap","constructor","_map","callback","thisArg","parameterData","processorOptions","copyFromChannel","parent","channelNumber","bufferOffset","byteLength","slicedInput","BYTES_PER_ELEMENT","createNestedArrays","x","y","arrays","j","processBuffer","proxy","renderedBuffer","nativeOfflineAudioContext","outputChannelCount","processorConstructor","exposeCurrentFrameAndCurrentTime","numberOfInputChannels","numberOfOutputChannels","sum","processedBuffer","audioNodeConnections","audioWorkletProcessor","getAudioWorkletProcessor","nodeToProcessorMap","nativeAudioWorkletNode","prmtrs","k","potentiallyEmptyInputs","activeSourceFlag","process","outputChannelSplitterNodeOutput","dispatchEvent","ErrorEvent","colno","filename","lineno","disableNormalization","detachArrayBuffer","arrayBuffer","closeAndResolve","onmessage","close","delayTime","maxDelayTime","getOutputAudioNodeAtIndex","outputAudioNodes","outputAudioNode","attack","knee","release","threshold","createInvalidStateError","createInvalidAccessError","filterBuffer","feedback","feedbackLength","feedforward","feedforwardLength","minLength","xBuffer","yBuffer","bufferIndex","bufferLength","inputLength","testPromiseSupport","uint32Array","Uint32Array","promise","decodeAudioData","catch","assignNativeAudioNodeOption","option","assignNativeAudioNodeOptions","testAnalyserNodeGetFloatTimeDomainDataMethodSupport","nativeAnalyserNode","getFloatTimeDomainData","assignNativeAudioNodeAudioParamValue","wrapAudioScheduledSourceNodeStartMethodNegativeParameters","nativeAudioScheduledSourceNode","when","RangeError","wrapAudioScheduledSourceNodeStopMethodNegativeParameters","computeBufferSize","baseLatency","min","round","log2","createAudioWorkletProcessorPromise","audioWorkletNodeOptions","clonedAudioWorkletNodeOptions","onmessageerror","cloneAudioWorkletNodeOptions","createNativeBiquadFilterNode","nativeBiquadFilterNode","createBiquadFilter","createNativeChannelSplitterNode","nativeChannelSplitterNode","createChannelSplitter","channelSplitterNode","defineProperty","wrapChannelSplitterNode","interceptConnections","original","interceptor","createNativeDelayNode","nativeDelayNode","createDelay","createNativeGainNode","nativeGainNode","divide","a","b","denominator","evaluatePolynomial","coefficient","z","createNativeScriptProcessorNode","bufferSize","periodicWave","coneInnerAngle","coneOuterAngle","coneOuterGain","distanceModel","maxDistance","orientationX","orientationY","orientationZ","panningModel","positionX","positionY","positionZ","refDistance","rolloffFactor","createUnknownError","curve","oversample","getFirstSample","isDCCurve","overwriteAccessors","createGetter","createSetter","getPrototypeOf","getOwnPropertyDescriptor","setValueAtTimeUntilPossible","setValueAtTime","testAudioScheduledSourceNodeStartMethodNegativeParametersSupport","nativeAudioBufferSourceNode","createOscillator","testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport","testAudioScheduledSourceNodeStopMethodNegativeParametersSupport","wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls","disconnectGainNode","isStopped","wrapEventListener","descriptor","currentTarget","handleEvent","addActiveInputConnectionToAudioNode","createAddActiveInputConnectionToAudioNode","addPassiveInputConnectionToAudioNode","createAddPassiveInputConnectionToAudioNode","deleteActiveInputConnectionToAudioNode","createDeleteActiveInputConnectionToAudioNode","audioNodeTailTimeStore","getAudioNodeTailTime","_a","createGetAudioNodeTailTime","cacheTestResult","ongoingTests","testResults","tester","cachedTestResult","ongoingTest","synchronousTestResult","then","finalTestResult","createCacheTestResult","createNativeAnalyserNode","createNativeAnalyserNodeFactory","createAnalyser","byteTimeDomainData","Uint8Array","getByteTimeDomainData","wrapAnalyserNodeGetFloatTimeDomainDataMethod","getAudioNodeRenderer","renderer","createGetAudioNodeRenderer","renderInputsOfAudioNode","createRenderInputsOfAudioNode","audioNodeRenderer","renderedNativeAudioNode","render","allRenderingPromises","renderingPromises","createAnalyserNodeRenderer","createAnalyserNodeRendererFactory","renderedNativeAnalyserNodes","renderedNativeAnalyserNode","createAnalyserNode","getNativeContext","contextStore","nativeOfflineAudioContextConstructor","OfflineAudioContext","webkitOfflineAudioContext","createNativeOfflineAudioContextConstructor","isNativeOfflineAudioContext","anything","createIsNativeOfflineAudioContext","audioParamAudioNodeStore","eventTargetConstructor","_nativeEventTarget","_listeners","wrappedEventListener","createEventTargetConstructor","nativeAudioContextConstructor","AudioContext","webkitAudioContext","createNativeAudioContextConstructor","isNativeAudioContext","createIsNativeAudioContext","AudioNode","createIsNativeAudioNode","isNativeAudioParam","AudioParam","createIsNativeAudioParam","AudioWorkletNode","createNativeAudioWorkletNodeConstructor","audioNodeConstructor","createAudioNodeConstructor","addAudioNodeConnections","addConnectionToAudioNode","createIncrementCycleCounter","decrementCycleCounter","detectCycles","super","_context","_nativeAudioNode","isPassive","maxValue","destinations","deleteAnyConnection","audioNodeConnectionsOfSource","deleteConnectionAtOutput","deleteConnectionToDestination","audioNodeConnectionsStore","createAddConnectionToAudioNode","tailTimeTimeoutIds","tailTime","tailTimeTimeoutId","clearTimeout","setTimeout","createIncrementCycleCounterFactory","cycleCounters","cycleCounter","nativeDestinationAudioParam","createDecrementCycleCounter","createDetectCycles","chain","nextLink","isDelayNode","mergedCycles","nestedCycles","analyserNodeConstructor","createAnalyserNodeConstructor","audionNodeConstructor","mergedOptions","_nativeAnalyserNode","frequencyBinCount","getByteFrequencyData","getFloatFrequencyData","audioBufferStore","nativeAudioBufferConstructor","AudioBuffer","createNativeAudioBufferConstructor","convertNumberToUnsignedLong","unit32Array","wrapAudioBufferCopyChannelMethods","createWrapAudioBufferCopyChannelMethods","channelNumberAsNumber","audioBufferLength","destinationLength","sourceLength","wrapAudioBufferCopyChannelMethodsOutOfBounds","createWrapAudioBufferCopyChannelMethodsOutOfBounds","audioBufferConstructor","createAudioBufferConstructor","testNativeAudioBufferConstructorSupport","hasInstance","instance","createTestAudioBufferConstructorSupport","addSilentConnection","createAddSilentConnection","renderInputsOfAudioParam","createRenderInputsOfAudioParam","connectAudioParam","createConnectAudioParam","createNativeAudioBufferSourceNode","createNativeAudioBufferSourceNodeFactory","testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport","testAudioBufferSourceNodeStartMethodOffsetClampingSupport","testAudioBufferSourceNodeStopMethodNullifiedBufferSupport","wrapAudioBufferSourceNodeStartMethodOffsetClampling","wrapAudioBufferSourceNodeStopMethodNullifiedBuffer","isScheduled","wrapAudioBufferSourceNodeStartMethodConsecutiveCalls","clampedOffset","nullifiedBuffer","createWrapAudioBufferSourceNodeStopMethodNullifiedBuffer","renderAutomation","createRenderAutomation","getAudioParamRenderer","replay","createGetAudioParamRenderer","createAudioBufferSourceNodeRenderer","createAudioBufferSourceNodeRendererFactory","renderedNativeAudioBufferSourceNodes","renderedNativeAudioBufferSourceNode","nativeAudioBufferSourceNodeIsOwnedByContext","createAudioBufferSourceNode","createAudioParam","createAudioParamFactory","addAudioParamConnections","audioParamStore","createAudioParamRenderer","isAudioParamOfOfflineAudioContext","minValue","automationEventList","audioParamRenderer","currentTime","cancelAndHoldAtTime","flush","previousLastEvent","pop","currentLastEvent","cancelScheduledValues","exponentialRampToValueAtTime","linearRampToValueAtTime","setValueCurveAtTime","Number","isFinite","setTargetAtTime","convertedValues","firstSample","lastSample","numberOfInterpolatedValues","interpolatedValues","timeOfLastSample","audioParamConnectionsStore","audioBufferSourceNodeConstructor","createAudioBufferSourceNodeConstructor","audioBufferSourceNodeRenderer","_audioBufferSourceNodeRenderer","_isBufferNullified","_isBufferSet","_nativeAudioBufferSourceNode","_onended","_playbackRate","onended","wrappedListener","nativeOnEnded","resetInternalStateToPassive","audioDestinationNodeConstructor","createAudioDestinationNodeConstructor","createAudioDestinationNodeRenderer","createNativeAudioDestinationNode","nativeAudioDestinationNode","_isNodeOfNativeOfflineAudioContext","_nativeAudioDestinationNode","maxChannelCount","renderedNativeAudioDestinationNodes","renderedNativeAudioDestinationNode","createAudioDestinationNode","createNativeAudioDestinationNodeFactory","isNodeOfNativeOfflineAudioContext","gainNode","createBiquadFilterNodeRenderer","createBiquadFilterNodeRendererFactory","renderedNativeBiquadFilterNodes","renderedNativeBiquadFilterNode","nativeBiquadFilterNodeIsOwnedByContext","createBiquadFilterNode","setAudioNodeTailTime","createSetAudioNodeTailTime","biquadFilterNodeConstructor","createBiquadFilterNodeConstructor","_Q","_detune","_frequency","_gain","log10","_nativeBiquadFilterNode","getFrequencyResponse","frequencyHz","magResponse","phaseResponse","monitorConnections","createMonitorConnections","whenConnected","whenDisconnected","wasDisconnected","wasConnected","isDisconnected","wrapChannelMergerNode","createWrapChannelMergerNode","channelMergerNode","audioBufferSourceNode","createNativeChannelMergerNode","createNativeChannelMergerNodeFactory","nativeChannelMergerNode","createChannelMerger","createChannelMergerNodeRenderer","createChannelMergerNodeRendererFactory","renderedNativeAudioNodes","createAudioNode","channelMergerNodeConstructor","createChannelMergerNodeConstructor","createChannelSplitterNodeRenderer","createChannelSplitterNodeRendererFactory","channelSplitterNodeConstructor","createChannelSplitterNodeConstructor","sanitizeChannelSplitterOptions","createNativeConstantSourceNodeFaker","createNativeConstantSourceNodeFakerFactory","audioNodeOptions","nativeConstantSourceNodeFaker","createNativeConstantSourceNode","createNativeConstantSourceNodeFactory","createConstantSource","nativeConstantSourceNode","createConstantSourceNodeRenderer","createConstantSourceNodeRendererFactory","renderedNativeConstantSourceNodes","renderedNativeConstantSourceNode","nativeConstantSourceNodeIsOwnedByContext","createConstantSourceNode","constantSourceNodeConstructor","createConstantSourceNodeConstructor","constantSourceNodeRenderer","_constantSourceNodeRenderer","_nativeConstantSourceNode","_offset","createNativeConvolverNode","createNativeConvolverNodeFactory","nativeConvolverNode","createConvolver","normalize","createConvolverNodeRenderer","createConvolverNodeRendererFactory","renderedNativeConvolverNodes","renderedNativeConvolverNode","createConvolverNode","convolverNodeConstructor","createConvolverNodeConstructor","_nativeConvolverNode","createDelayNodeRenderer","createDelayNodeRendererFactory","renderedNativeDelayNodes","renderedNativeDelayNode","nativeDelayNodeIsOwnedByContext","createDelayNode","delayNodeConstructor","createDelayNodeConstructor","_delayTime","createNativeDynamicsCompressorNode","nativeDynamicsCompressorNode","createDynamicsCompressor","createNativeDynamicsCompressorNodeFactory","createDynamicsCompressorNodeRenderer","createDynamicsCompressorNodeRendererFactory","renderedNativeDynamicsCompressorNodes","renderedNativeDynamicsCompressorNode","nativeDynamicsCompressorNodeIsOwnedByContext","createDynamicsCompressorNode","dynamicsCompressorNodeConstructor","createDynamicsCompressorNodeConstructor","_attack","_knee","_nativeDynamicsCompressorNode","_ratio","_release","_threshold","previousChannelCount","reduction","createGainNodeRenderer","createGainNodeRendererFactory","renderedNativeGainNodes","renderedNativeGainNode","nativeGainNodeIsOwnedByContext","createGainNode","gainNodeConstructor","createGainNodeConstructor","createNativeIIRFilterNodeFaker","createNativeIIRFilterNodeFakerFactory","convertedFeedback","Float64Array","convertedFeedforward","scriptProcessorNode","bufferIndexes","xBuffers","yBuffers","fill","outputBuffer","nyquist","omega","PI","cos","sin","response","sqrt","atan2","renderNativeOfflineAudioContext","createRenderNativeOfflineAudioContext","testOfflineAudioContextCurrentTimeSupport","isOfflineAudioContextCurrentTimeSupported","oncomplete","startRendering","createTestOfflineAudioContextCurrentTimeSupport","createIIRFilterNodeRenderer","createIIRFilterNodeRendererFactory","filteredBufferPromise","nativeIIRFilterNode","nativeIIRFilterNodeIsOwnedByContext","createIIRFilter","partialOfflineAudioContext","filterFullBuffer","filteredBuffer","createNativeIIRFilterNode","createNativeIIRFilterNodeFactory","iIRFilterNodeConstructor","createIIRFilterNodeConstructor","wrapIIRFilterNodeGetFrequencyResponseMethod","_nativeIIRFilterNode","createAudioListener","createAudioListenerFactory","nativeListener","forwardX","forwardY","forwardZ","upX","upY","upZ","createFakeAudioParams","isScriptProcessorNodeCreated","lastOrientation","lastPosition","createScriptProcessorNode","orientation","setOrientation","positon","setPosition","createSetOrientation","createSetPosition","createFakeAudioParam","initialValue","setValue","constantSourceNode","_len2","_key2","_len3","_key3","_len4","_key4","_len5","_key5","_len6","_key6","_len7","_key7","unrenderedAudioWorkletNodeStore","minimalBaseAudioContextConstructor","createMinimalBaseAudioContextConstructor","_nativeContext","_destination","_listener","_onstatechange","onstatechange","nativeOnStateChange","createNativeOscillatorNode","createNativeOscillatorNodeFactory","nativeOscillatorNode","setPeriodicWave","createOscillatorNodeRenderer","createOscillatorNodeRendererFactory","renderedNativeOscillatorNodes","renderedNativeOscillatorNode","nativeOscillatorNodeIsOwnedByContext","createOscillatorNode","oscillatorNodeConstructor","createOscillatorNodeConstructor","oscillatorNodeRenderer","_nativeOscillatorNode","_oscillatorNodeRenderer","createConnectedNativeAudioBufferSourceNode","createConnectedNativeAudioBufferSourceNodeFactory","createNativeWaveShaperNodeFaker","createNativeWaveShaperNodeFakerFactory","negativeWaveShaperNode","createWaveShaper","positiveWaveShaperNode","inputGainNode","invertGainNode","outputGainNode","revertGainNode","disconnectNativeAudioBufferSourceNode","isConnected","unmodifiedCurve","nativeWaveShaperNodeFaker","curveLength","negativeCurve","positiveCurve","centerIndex","createNativeWaveShaperNode","createNativeWaveShaperNodeFactory","nativeWaveShaperNode","automationRate","createNativePannerNodeFaker","createNativePannerNodeFakerFactory","pannerNode","createPanner","SINGLE_CHANNEL_OPTIONS","orientationXGainNode","orientationYGainNode","orientationZGainNode","positionXGainNode","positionYGainNode","positionZGainNode","waveShaperNode","nativePannerNodeFaker","createNativePannerNode","nativePannerNode","createNativePannerNodeFactory","createPannerNodeRenderer","createPannerNodeRendererFactory","renderedBufferPromise","renderedNativeGainNodeOrNativePannerNode","commonAudioNodeOptions","commonNativePannerNodeOptions","nativePannerNodeIsOwnedByContext","nativeConstantSourceNodes","channelDatas","gateGainNode","partialPannerNode","pannerNodeConstructor","createPannerNodeConstructor","_nativePannerNode","_orientationX","_orientationY","_orientationZ","_positionX","_positionY","_positionZ","createNativePeriodicWave","imag","real","convertedImag","convertedReal","nativePeriodicWave","createPeriodicWave","createNativePeriodicWaveFactory","periodicWaveConstructor","createPeriodicWaveConstructor","periodicWaveStore","sanitizePeriodicWaveOptions","PeriodicWave","nativeStereoPannerNodeFakerFactory","createNativeStereoPannerNodeFakerFactory","CURVE_SIZE","DC_CURVE","HALF_PI","SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS","buildInternalGraph","panGainNode","buildInternalGraphForMono","leftWaveShaperCurve","rightWaveShaperCurve","leftGainNode","leftWaveShaperNode","panWaveShaperNode","rightGainNode","rightWaveShaperNode","connectGraph","disconnectGraph","buildInternalGraphForStereo","leftInputForLeftOutputWaveShaperCurve","leftInputForRightOutputWaveShaperCurve","rightInputForLeftOutputWaveShaperCurve","rightInputForRightOutputWaveShaperCurve","leftInputForLeftOutputGainNode","leftInputForLeftOutputWaveShaperNode","leftInputForRightOutputGainNode","leftInputForRightOutputWaveShaperNode","rightInputForLeftOutputGainNode","rightInputForLeftOutputWaveShaperNode","rightInputForRightOutputGainNode","rightInputForRightOutputWaveShaperNode","createNativeStereoPannerNode","createNativeStereoPannerNodeFactory","createNativeStereoPannerNodeFaker","createStereoPanner","nativeStereoPannerNode","createStereoPannerNodeRenderer","createStereoPannerNodeRendererFactory","renderedNativeStereoPannerNodes","renderedNativeStereoPannerNode","nativeStereoPannerNodeIsOwnedByContext","createStereoPannerNode","stereoPannerNodeConstructor","createStereoPannerNodeConstructor","_pan","createWaveShaperNodeRenderer","createWaveShaperNodeRendererFactory","renderedNativeWaveShaperNodes","renderedNativeWaveShaperNode","createWaveShaperNode","waveShaperNodeConstructor","createWaveShaperNodeConstructor","_isCurveNullified","_nativeWaveShaperNode","isSecureContext","createIsSecureContext","fn","currentFrame","configurable","createExposeCurrentFrameAndCurrentTime","backupOfflineAudioContextStore","getOrCreateBackupOfflineAudioContext","createGetOrCreateBackupOfflineAudioContext","backupOfflineAudioContext","createAddAudioWorkletModule","evaluateSource","fetchSource","resolvedRequests","testAudioWorkletProcessorPostMessageSupport","moduleURL","credentials","resolvedRequestsOfContext","ongoingRequestsOfContext","promiseOfOngoingRequest","audioWorklet","absoluteUrl","wrappedSource","evaluateAudioWorkletGlobalScope","_AWGS","SyntaxError","nodeNameToProcessorConstructorMap","isSupportingPostMessage","currentIndex","patchedAudioWorkletProcessor","memberDefinition","bufferRegistration","addModule","nativeContextOrBackupOfflineAudioContext","finally","updatedResolvedRequestsOfContext","updatedOngoingRequestsOfContext","head","document","script","createElement","originalOnErrorHandler","onerror","removeErrorEventListenerAndRevokeUrl","src","location","href","onload","appendChild","createEvaluateSource","createAbortError","fetch","ok","text","createFetchSource","createTestAudioWorkletProcessorPostMessageSupport","offlineAudioContext","isEmittingMessageEvents","isEmittingProcessorErrorEvents","oscillator","onprocessorerror","isNativeContext","createIsNativeContext","createDecodeAudioData","createDataCloneError","createEncodingError","detachedArrayBuffers","anyContext","audioData","fail","baseAudioContextConstructor","createBaseAudioContextConstructor","_audioWorklet","successCallback","errorCallback","mediaElementAudioSourceNodeConstructor","createMediaElementAudioSourceNodeConstructor","createNativeMediaElementAudioSourceNode","nativeMediaElementAudioSourceNode","_nativeMediaElementAudioSourceNode","mediaElement","createMediaElementSource","mediaStreamAudioDestinationNodeConstructor","createMediaStreamAudioDestinationNodeConstructor","createNativeMediaStreamAudioDestinationNode","nativeMediaStreamAudioDestinationNode","_nativeMediaStreamAudioDestinationNode","stream","createMediaStreamDestination","mediaStreamAudioSourceNodeConstructor","createMediaStreamAudioSourceNodeConstructor","createNativeMediaStreamAudioSourceNode","nativeMediaStreamAudioSourceNode","_nativeMediaStreamAudioSourceNode","mediaStream","audioStreamTracks","getAudioTracks","sort","filteredAudioStreamTracks","createMediaStreamSource","MediaStream","createNativeMediaStreamTrackAudioSourceNode","createNativeMediaStreamTrackAudioSourceNodeFactory","mediaStreamTrack","createMediaStreamTrackSource","kind","mediaStreamTrackAudioSourceNodeConstructor","createMediaStreamTrackAudioSourceNodeConstructor","getUnrenderedAudioWorkletNodes","createAudioContextConstructor","unrenderedAudioWorkletNodes","createGetUnrenderedAudioWorkletNodes","addUnrenderedAudioWorkletNode","createAddUnrenderedAudioWorkletNode","connectMultipleOutputs","createConnectMultipleOutputs","deleteUnrenderedAudioWorkletNode","createDeleteUnrenderedAudioWorkletNode","disconnectMultipleOutputs","createDisconnectMultipleOutputs","activeAudioWorkletNodeInputsStore","getActiveAudioWorkletNodeInputs","createGetActiveAudioWorkletNodeInputs","createNativeAudioWorkletNodeFaker","createNativeAudioWorkletNodeFakerFactory","numberOfParameters","messageChannel","gainNodes","inputChannelSplitterNodes","constantSourceNodes","inputChannelMergerNode","outputChannelSplitterNode","outputChannelMergerNodes","parameterMap","nativeAudioWorkletNodeFaker","patchedEventListeners","unpatchedEventListener","patchedEventListener","audioWorkletProcessorPromise","createAudioWorkletProcessor","dWrkltPrcssr","disconnectOutputsGraph","outputChannelMergerNode","activeInputIndexes","disconnectFakeGraph","connectFakeGraph","createNativeAudioWorkletNode","createNativeAudioWorkletNodeFactory","testClonabilityOfAudioWorkletNodeOptions","createAudioWorkletNodeRenderer","createAudioWorkletNodeRendererFactory","processedBufferPromise","renderedNativeAudioWorkletNodeOrGainNode","nativeOutputNodes","nativeAudioWorkletNodeIsOwnedByContext","renderBuffer","nm","getBackupOfflineAudioContext","createGetBackupOfflineAudioContext","setActiveAudioWorkletNodeInputs","createSetActiveAudioWorkletNodeInputs","createAudioWorkletNodeConstructor","sanitizeAudioWorkletNodeOptions","testAudioWorkletNodeOptionsClonability","_nativeAudioWorkletNode","_onprocessorerror","_parameters","nativeOnProcessorError","minimalAudioContextConstructor","createMinimalAudioContextConstructor","_baseLatency","_nativeAudioContext","_nativeGainNode","_state","revokeState","resolvePromise","suspend","createNativeOfflineAudioContext","createCreateNativeOfflineAudioContext","createStartRendering","ERROR_MESSAGE","createMinimalOfflineAudioContextConstructor","createOfflineAudioContextConstructor","createIsAnyAudioContext","createIsAnyAudioNode","audioNodeStore","createIsAnyAudioParam","createIsAnyOfflineAudioContext","readVariableSizeIntegerLength","dataView","byte","getUint8","encoderRegexes","createBlobEvent","nativeBlobEventConstructor","blobEventInit","eventInit","fakeBlobEvent","Event","createBlobEventFactory","BlobEvent","createNativeBlobEventConstructor","createWebAudioMediaRecorder","createWebAudioMediaRecorderFactory","eventTarget","getSettings","audioContext","MinimalAudioContext","bufferedArrayBuffers","promisedAudioWorkletModule","abortRecording","intervalId","promisedAudioNodesAndEncoderId","promisedPartialRecording","isAudioContextRunning","dispatchDataAvailableEvent","requestNextPartialRecording","mediaStreamAudioSourceNode","recorderAudioWorkletNode","getVideoTracks","audioTracks","AudioBufferSourceNode","MediaStreamAudioSourceNode","createPromisedAudioNodesEncoderIdAndPort","ConstantSourceNode","tracks","getTracks","setInterval","currentTracks","track","readVariableSizeInteger","firstDataByteOffset","createReadVariableSizeInteger","readElementContent","lengthAndValue","content","numberOfSamples","elementOffset","getFloat32","createReadElementContent","readElementType","createReadElementType","decodeWebMChunk","createDecodeWebMChunk","elementType","contents","currentElementType","lengthAndType","contentAndLength","createWebmPcmMediaRecorder","createWebmPcmMediaRecorderFactory","nativeMediaRecorderConstructor","nativeMediaRecorder","stopRecording","isRecording","pendingInvocations","promisedDataViewElementTypeEncoderIdAndPort","currentDataView","MultiBufferDataView","buffers","byteOffset","remainingDataView","createEventTarget","createEventTargetFactory","MediaRecorder","createNativeMediaRecorderConstructor","createNativeMediaRecorder","createNativeMediaRecorderFactory","mediaRecorderOptions","bufferedBlobs","dataAvailableListeners","errorListeners","stopListeners","wasActive","dataAvailableListener","errorListener","stopListener","startsWith","mediaRecorderConstructor","createMediaRecorderConstructor","isTypeSupported","internalMediaRecorder","_internalMediaRecorder","regex","_ondataavailable","_onerror","_onpause","_onresume","_onstart","_onstop","ondataavailable","boundListener","onpause","onresume","onstart","onstop","nativeEventTarget","canvasElement","getContext","captureStream","mediaRecorder","createIsSupportedPromise","rgstr","createAddUniqueNumber","number","createCache","lastNumberWeakMap","collection","nextNumber","MAX_SAFE_INTEGER","TWO_TO_THE_POWER_OF_TWENTY_NINE","TWO_TO_THE_POWER_OF_THIRTY","createGenerateUniqueNumber","cache","lastNumber","random","LAST_NUMBER_WEAK_MAP","indefiniteArticle","phrase","word","exec","l_word","alt_cases","indexOf","regexes","toUpperCase","stdOnEnd","cb","ieOnEnd","onreadystatechange","readyState","opts","getElementsByTagName","charset","attrs","attr","setAttribute","setAttributes","safeIsNaN","isNaN","areInputsEqual","newInputs","lastInputs","first","second","resultFn","isEqual","lastThis","lastResult","lastArgs","calledOnce","newArgs","_i","new_byte$1","Int8Array","new_short","Int16Array","new_int$1","Int32Array","new_float$1","new_double$1","new_float_n$1","sz","A","new_int_n$1","new_short_n","new_array_n$1","Arrays$1","fromIndex","toIndex","System$1","srcPos","dest","destPos","srcEnd","Util$1","ShortBlock$1","ordinal","SQRT2","FAST_LOG10","FAST_LOG10_X","short_block_allowed","short_block_coupled","short_block_dispensed","short_block_forced","Float$1","VbrMode$1","MAX_VALUE","vbr_off","vbr_mt","vbr_rh","vbr_abr","vbr_mtrh","vbr_default","common","System$6","System","Util$6","Util","Arrays$6","Arrays","new_float$6","new_float","NewMDCT","enwindow","NS","NL","win","tantab_l","Encoder_1","SHORT_TYPE","cx","ca","cs","order","window_subband","x1","x1Pos","u","v","xr","wp","x2","w","s","t","mdct_short","inout","inoutPos","l","tc0","tc1","tc2","ts0","ts1","ts2","mdct_long","out","outPos","_in","ct","st","tc3","tc4","ts5","ts6","ts7","ts8","ts3","ts4","tc5","tc6","tc7","tc8","mdct_sub48","gfc","w0","w1","wk","wkPos","ch","channels_out","gr","mode_gr","band","gi","l3_side","tt","mdct_enc","mdct_encPos","samp","sb_sample","sampPos","block_type","band0","band1","mixed_block_flag","amp_filter","work","bu","bd","arraycopy","NewMDCT_1","System$7","new_float$7","new_float_n$7","new_float_n","III_psy_xmin","SBMAX_l","SBMAX_s","self","assign","iii_psy_xmin","III_psy_xmin_1","III_psy_ratio","thm","en","III_psy_ratio_1","System$5","VbrMode$5","VbrMode","new_array_n$5","new_array_n","new_float$5","new_float_n$5","new_int$5","new_int","assert$5","assert","Encoder$2","FFTOFFSET","MPG_MD_MS_LR","bs","psy","vbr","qupvt","setModules","_bs","_psy","_qupvt","_vbr","newMDCT","adjust_ATH","gr2_max","max_pow","ATH","useAdjust","loudness_sq","aaSensitivityP","adjust","adjustLimit","adj_lim_new","updateStats","bitrate_index","mode_ext","bitrate_stereoMode_Hist","bt","bitrate_blockType_Hist","lame_encode_frame_init","gfp","inbuf","internal_flags","primebuff0","primebuff1","mf_size","BLKSIZE","framesize","lame_encode_mp3_frame","inbuf_l","inbuf_r","mp3buf","mp3bufPos","mp3buf_size","mp3count","masking_LR","masking","masking_MS","pe_use","tot_ener","ms_ener_ratio","pe","pe_MS","padding","slot_lag","frac_SpF","out_samplerate","psymodel","bufp","bufpPos","blocktype","VBR","L3psycho_anal_vbr","L3psycho_anal_ns","mode","MPEGMode","JOINT_STEREO","cod_info","NORM_TYPE","MPG_MD_LR_LR","force_ms","sum_pe_MS","sum_pe_LR","gi0","gi1","analysis","pinfo","ms_ratio","ers","energy","f","nsPsy","pefirbuf","fircoef","iteration_loop","format_bitstream","copy_buffer","bWriteVbrTag","addVbrFrame","pcmdata","set_frame_pinfo","ENCDELAY","POSTDELAY","MDCTDELAY","DECDELAY","SBLIMIT","CBANDS","SBPSY_l","SBPSY_s","PSFB21","PSFB12","HBLKSIZE","BLKSIZE_s","HBLKSIZE_s","START_TYPE","STOP_TYPE","MPG_MD_LR_I","MPG_MD_MS_I","Util$4","new_float$4","FFT","window_s","costab","fht","fz","fzPos","n","k4","fi","tri","s1","c1","k1","k2","k3","kx","f1","f0","f3","f2","c2","s2","g0","g1","g2","g3","rv_tbl","fft_short","x_real","chn","bufPos","fft_long","jj","init_fft","FFT_1","VbrMode$3","Float$3","Float","ShortBlock$3","ShortBlock","Util$3","Arrays$3","new_float$3","new_float_n$3","new_int$3","assert$3","PsyModel","fft","LOG10","rpelev","rpelev2","rpelev_s","rpelev2_s","DELBARK","VO_SCALE","temporalmask_sustain_sec","NS_PREECHO_ATT0","NS_PREECHO_ATT1","NS_PREECHO_ATT2","NS_MSFIX","NSFIRLEN","LN_TO_LOG10","NON_LINEAR_SCALE_ENERGY","psycho_loudness_approx","loudness_power","eql_w","compute_ffts","fftenergy","fftenergy_s","wsamp_l","wsamp_lPos","wsamp_s","wsamp_sPos","gr_out","r","re","im","totalenergy","energy_save","athaa_loudapprox","loudness_sq_save","ma_max_i1","ma_max_i2","ma_max_m","I1LIMIT","I2LIMIT","MLIMIT","tab","init_mask_add_max_values","table1","table2","table3","mask_add","m1","m2","kk","shortblock","cb_s","cb_l","table2_","vbrpsy_mask_add","calc_interchannel_masking","sb","sblock","msfix1","mld","mld_l","rmid","rside","mld_s","ns_msfix","msfix","athadjust","msfix2","athlower","ath","bm_l","thmLR","thmM","thmS","bm_s","convert_partition2scalefac_s","eb","thr","enn","thmm","bo_s_sb","bo_s","npart_s","b_lim","w_curr","PSY","bo_s_weight","w_next","convert_partition2scalefac_l","bo_l_sb","bo_l","npart_l","bo_l_weight","compute_masking_s","ebb","numlines_s","el","s3ind_s","ecb","s3_ss","nb_s1","blocktype_old","nb_s2","block_type_set","uselongblock","blocktype_d","short_blocks","NS_INTERP","regcoef_s","pecalc_s","mr","masking_lower","pe_s","regcoef_l","pecalc_l","pe_l","calc_energy","avg","numlines_l","rnumlines_l","calc_mask_index_l","mask_idx","last_tab_entry","vbrpsy_compute_fft_l","vbrpsy_compute_fft_s","vbrpsy_compute_loudness_approximation_l","masking_ratio","masking_MS_ratio","percep_entropy","percep_MS_entropy","numchn","pcfact","wsamp_L","wsamp_S","eb_l","eb_s","ns_hpfsmpl","mask_idx_l","mask_idx_s","ResvMax","ResvSize","firbuf","firbufPos","sum1","sum2","attackThreshold","en_subshort","en_short","attack_intensity","ns_uselongblock","ns_attacks","last_en_subshort","pf","pfPos","pfe","p","abs","ers_save","attackthre_s","attackthre","lastAttacks","idx","s3ind","eb2","s3_ll","nb_1","nb_2","STEREO","interChRatio","ATHlower","ppe","ppePos","fircoef_","vbrpsy_attack_detection","sub_short_factor","n_chn_out","n_chn_psy","vbrpsy_skip_masking_s","vbrpsy_skip_masking_l","psyvbr_calc_mask_index_s","vbrpsy_compute_masking_s","float","int","dd","dd_n","avg_mask","last","minval_s","vbrpsy_compute_masking_l","ecb_limit","ecb_limit_2","ecb_limit_1","minval_l","vbrpsy_compute_block_type","vbrpsy_apply_block_type","vbrpsy_compute_MS_thresholds","cb_mld","ath_cb","ebM","ebS","thmL","thmR","mld_m","thmMS","s3_func_x","bark","hf_slope","tempy","norm_s3_func_x","h","lim_a","lim_b","s3_func","tempx","temp","freq2bark","freq","atan","init_numline","numlines","bo","bm","bval","bval_width","bo_w","sfreq","blksize","scalepos","deltafreq","sbmax","b_frq","sample_freq_frac","partition","ni","j2","bark1","sfb","i1","i2","end","f_tmp","bark2","init_s3_values","npart","norm","use_old_s3","s3","numberOfNoneZero","s3_x_norm","stereo_demask","ATHformula_GB","ch01","mld_cb_l","mld_cb_s","new_thmm","psymodel_init","useOldS3","bvl_a","bvl_b","snr_l_a","snr_l_b","snr_s_a","snr_s_b","experimentalZ","ms_ener_ratio_old","scalefac_band","snr","level","ATHformula","log","decay","exp_nspsytune","frame_duration","ATHtype","freq_inc","eql_balance","ATHcurve","PsyModel_1","MPEGMode$1","_ordinal","DUAL_CHANNEL","MONO","NOT_SET","MPEGMode_1","LameGlobalFlags","class_id","num_samples","num_channels","in_samplerate","scale","scale_left","scale_right","decode_only","quality","free_format","findReplayGain","decode_on_the_fly","write_id3tag_automatic","brate","compression_ratio","copyright","extension","emphasis","error_protection","strict_ISO","disable_reservoir","quant_comp","quant_comp_short","experimentalY","preset","VBR_q_frac","VBR_q","VBR_mean_bitrate_kbps","VBR_min_bitrate_kbps","VBR_max_bitrate_kbps","VBR_hard_min","lowpassfreq","highpassfreq","lowpasswidth","highpasswidth","maskingadjust","maskingadjust_short","ATHonly","ATHshort","noATH","athaa_type","athaa_sensitivity","useTemporal","tune","tune_value_a","version","encoder_delay","encoder_padding","frameNum","lame_allocated_gfp","LameGlobalFlags_1","L3Side$1","SFBMAX","L3Side_1","new_float$10","new_int$10","GrInfo","l3_enc","scalefac","xrpow_max","part2_3_length","big_values","count1","global_gain","scalefac_compress","table_select","subblock_gain","region0_count","region1_count","preflag","scalefac_scale","count1table_select","part2_length","sfb_lmax","sfb_smin","psy_lmax","sfbmax","psymax","sfbdivide","width","count1bits","sfb_partition_table","slen","max_nonzero_coeff","clone_int","clone_float","other","GrInfo_1","new_int$9","IIISideInfo","main_data_begin","private_bits","resvDrain_pre","resvDrain_post","scfsi","IIISideInfo_1","System$11","new_int$11","ScaleFac","arrL","arrS","arr21","arr12","psfb21","psfb12","ScaleFac_1","new_float$12","new_float_n$12","new_int$12","NsPsy","longfact","shortfact","NsPsy_1","VBRSeekInfo","seen","want","pos","bag","nVbrNumFrames","nBytesWritten","TotalFrameSize","VBRSeekInfo_1","new_byte$8","new_byte","new_double$8","new_double","new_float$8","new_float_n$8","new_int$8","new_int_n$8","new_int_n","LameInternalFlags$1","MAX_HEADER_LEN","Header","write_timing","ptr","buf","Class_ID","iteration_init_init","fill_buffer_resample_init","mfbuf","MFSIZE","channels_in","resample_ratio","mf_samples_to_encode","VBR_min_bitrate","VBR_max_bitrate","samplerate_index","lowpass1","lowpass2","highpass1","highpass2","noise_shaping","noise_shaping_amp","substep_shaping","noise_shaping_stop","use_best_huffman","full_outer_loop","tag_spec","nMusicCRC","OldValue","CurrentStep","bv_scf","pseudohalf","sfb21_extra","inbuf_old","blackfilt","BPC","itime","sideinfo_len","header","MAX_HEADER_BUF","h_ptr","w_ptr","ancillary_flag","numlines_s_num1","numlines_l_num1","ms_ratio_s_old","ms_ratio_l_old","VBR_seek_table","nogap_total","nogap_current","findPeakSample","PeakSample","RadioGain","AudiophileGain","rgdata","noclipGainChange","noclipScale","hip","in_buffer_nsamples","in_buffer_0","in_buffer_1","MAX_BITS_PER_CHANNEL","MAX_BITS_PER_GRANULE","LameInternalFlags_1","new_float$13","ATH_1","System$15","Arrays$15","GainAnalysis$1","PINK_REF","RMS_PERCENTILE","YULE_ORDER","RMS_WINDOW_TIME_NUMERATOR","MAX_SAMP_FREQ","RMS_WINDOW_TIME_DENOMINATOR","ABYule","MAX_SAMPLES_PER_WINDOW","ABButter","filterYule","inputPos","outputPos","nSamples","kernel","filterButter","ResetSampleFrequency","rgData","samplefreq","MAX_ORDER","linprebuf","lstepbuf","loutbuf","rinprebuf","rstepbuf","routbuf","reqindex","INIT_GAIN_ANALYSIS_ERROR","sampleWindow","lsum","rsum","totsamp","ill","INIT_GAIN_ANALYSIS_OK","fsqr","d","analyzeResult","len","elems","GAIN_NOT_ENOUGH_SAMPLES","upper","STEPS_per_dB","InitGainAnalysis","linpre","rinpre","lstep","rstep","lout","rout","B","AnalyzeSamples","left_samples","left_samplesPos","right_samples","right_samplesPos","curleft","curleftBase","curright","currightBase","batchsamples","cursamples","cursamplepos","GAIN_ANALYSIS_OK","GAIN_ANALYSIS_ERROR","ival","GetTitleGain","retval","MAX_dB","GainAnalysis_1","new_float$14","new_int$14","ReplayGain","freqindex","ReplayGain_1","MeanBits$1","meanBits","bits","MeanBits_1","new_float$16","new_int$16","assert$16","CBRNewIterationLoop","_quantize","quantize","max_bits","l3_xmin","xrpow","targ_bits","mean_bits","mb","rv","ResvFrameBegin","on_pe","ms_convert","reduce_side","masking_lower_db","mask_adjust","mask_adjust_short","init_outer_loop","init_xrpow","calc_xmin","outer_loop","iteration_finish_one","ResvFrameEnd","CBRNewIterationLoop_1","HuffCodeTab","hl","xlen","linmax","table","hlen","Tables$1","ht","t1HB","t1l","t2HB","t2l","t3HB","t3l","t5HB","t5l","t6HB","t6l","t7HB","t7l","t8HB","t8l","t9HB","t9l","t10HB","t10l","t11HB","t11l","t12HB","t12l","t13HB","t13l","t16_5l","t15HB","t15l","t16HB","t16l","t24HB","t24l","t32HB","t32l","t33HB","t33l","largetbl","table23","table56","bitrate_table","samplerate_table","scfsi_band","Tables_1","VbrMode$19","Float$19","Util$19","new_float$19","new_int$19","assert$19","QuantizePVT$1","tak","POW20","Q_MAX2","Q_MAX","pow20","_tk","_rv","IPOW20","ipow20","DBL_EPSILON","PRECALC_SIZE","IXMAX_VAL","NSATHSCALE","LARGE_BITS","nr_of_sfb_block","pretab","sfBandIndex","pow43","adj43","ATHmdct","compute_ath","ATH_l","ATH_psfb21","ATH_s","ATH_psfb12","samp_freq","ATH_f","StartLine","iteration_init","bass","alto","treble","sfb21","huffman_init","cbr","tbits","add_bits","extra_bits","ResvMaxBits","fac","move_bits","athAdjust","athFloor","o","pxmin","gsfb","pxminPos","ath_over","enable_athaa_fix","rh1","xmin","rh2","en0","xa","xb","e","max_nonzero","BitStream","EQ","tmpATH","calc_noise_core","startline","step","noise","ix","ix01","calc_noise","distort","res","prev_noise","distortPos","l3_xminPos","over","over_noise_db","tot_noise_db","max_noise","scalefacPos","over_SSD","tmp","noise_log","usefullsize","sl","over_count","tot_noise","over_noise","set_pinfo","sfb2","en1","ifqstep","L3Side","xfsf","CalcNoiseResult","bw","LAMEsfb","en_s","xfsf_s","thr_s","LAMEsfb_s","LAMEqss","LAMEmainbits","LAMEsfbits","QuantizePVT_1","System$18","Arrays$18","new_int$18","assert$18","Takehiro$1","Bits","subdv_table","quantize_lines_xrpow_01","istep","xrPos","ixPos","compareval0","quantize_lines_xrpow","remaining","x0","x3","rx0","rx1","rx2","rx3","quantize_xrpow","xp","pi","codInfo","prevNoise","prev_data_use","accumulate","accumulate01","xpPos","iData","iDataPos","acc_iData","acc_iDataPos","acc_xp","acc_xpPos","sfb_count1","ix_max","endPos","max1","max2","count_bit_ESC","t1","t2","linbits","count_bit_noESC","hlen1","count_bit_noESC_from2","count_bit_noESC_from3","sum3","hlen2","hlen3","huf_tbl_noESC","choose_table","choice2","choice","recalc_divide_init","r01_bits","r01_div","r0_tbl","r1_tbl","bigv","r0","a1","r0bits","bi","r0t","r1","a2","r1t","recalc_divide_sub","cod_info2","r2","r2t","noquant_count_bits","best_huffman_divide","count_bits","roundfac","slen1_n","slen2_n","slen1_tab","slen2_tab","scfsi_calc","c","all_scalefactors_not_negative","best_scalefac_store","recalc","scale_bitcount","scale_bitcount_lsf","scale_short","scale_mixed","scale_long","max_slen1","max_slen2","max_range_sfac_tab","table_number","row_in_table","nr_sfb","max_sfac","partition_table","slen1","slen2","slen3","slen4","log2tab","printf","bv_index","scfb_anz","Takehiro_1","System$17","Arrays$17","new_byte$17","new_float_n$17","new_int$17","assert$17","BitStream$1","CRC16_POLYNOMIAL","MAX_LENGTH","ga","mpg","ver","_ga","_mpg","_ver","totbit","bufByteIdx","bufBitIdx","putheader_bits","putbits2","Lame","LAME_MAXMP3BUFFER","putbits_noheaders","drain_into_ancillary","remainingBits","getLameShortVersion","charAt","writeheader","CRC_update","crc","encodeSideInfo2","bitsPerFrame","CRC_writeheader","old","println","huffman_coder_count1","huffbits","Huffmancode","tableindex","cbits","xbits","ext","linbits_x1","linbits_x2","ShortHuffmancodebits","region1Start","LongHuffmancodebits","bigvalues","region2Start","writeMainData","data_bits","tot_bits","sfb_partition","scale_bits","sfbs","TotalBytes","total","compute_flushbits","total_bytes_output","flushbits","remaining_headers","last_ptr","first_ptr","getframebits","bit_rate","flush_bitstream","NEQ","GainAnalysis","add_dummy_byte","bufferPos","mp3data","minimum","updateMusicCRC","pcm_buf","mp3_in","samples_out","hip_decode1_unclipped","init_bit_stream_w","BitStream_1","System$2","VbrMode$2","ShortBlock$2","new_float$2","new_int_n$2","new_short_n$1","assert$2","Lame$1","LAME_MAXALBUMART","V9","V8","V7","V6","V5","V4","V3","V2","V1","V0","R3MIX","STANDARD","EXTREME","INSANE","STANDARD_FAST","EXTREME_FAST","MEDIUM","MEDIUM_FAST","qu","id3","mpglib","LowPassHighPass","lowerlimit","BandPass","bitrate","lPass","lowpass","enc","_p","_qu","_id3","_mpglib","LAME_ID","lame_init_old","filter_coef","optimum_samplefreq","input_samplefreq","suggested_samplefreq","SmpFrqIndex","sample_freq","gpf","FindNearestBitrate","bRate","samplerate","BitrateIndex","optimum_bandwidth","lh","freq_map","table_index","nearestBitrateFullIndex","lame_init_params_ppflt","lowpass_band","highpass_band","minband","maxband","fc1","fc2","lame_init_qval","lame_init_bitstream","id3tag_write_v2","InitVbrTag","update_inbuffer_size","nsamples","calcNeeded","mf_needed","lame_encode_buffer_sample","buffer_l","buffer_r","ret","mp3out","mp3size","in_buffer","in_bufferPos","in_buffer_ptr","n_in","n_out","inOut","InOut","fill_buffer","buf_size","lame_encode_frame","NumUsed","num_used","gcd","blackman","fcn","wcn","bkwn","fill_buffer_resample","outbuf","outbufPos","desired_len","bpc","intratio","filter_l","BLACKSIZE","time0","joff","xvalue","n_shift","io","numUsed","lame_init","full_bitrate_table","lower_range","lower_range_kbps","upper_range","upper_range_kbps","lame_init_params","map2MP3Frequency","linear_int","hip_decode_exit","hip_decode_init","cmp","apply_preset","LAME_DEFAULT_QUALITY","VBRNewIterationLoop","VBROldIterationLoop","vbrmode","ABRIterationLoop","NSATTACKTHRE","NSATTACKTHRE_S","lame_encode_flush","mp3buffer","mp3bufferPos","mp3buffer_size","mp3buffer_size_remaining","end_padding","frames_left","imp3","samples_to_encode","bunch","frame_num","lame_encode_buffer","id3tag_write_v1","Lame_1","VbrMode$20","Presets$1","VBRPresets","qual","comp","compS","shThreshold","shThresholdS","adj","adjShort","lower","sens","inter","joint","mod","fix","vbr_q","quant_comp_s","expY","st_lrm","st_s","masking_adj","masking_adj_short","ath_lower","ath_curve","ath_sensitivity","interch","safejoint","sfb21mod","ABRPresets","kbps","sc","mask","interCh","sfScale","nsmsfix","nsbass","sfscale","lame","_lame","vbr_old_switch_map","vbr_psy_switch_map","apply_vbr_preset","enforce","vbr_preset","q","lame_set_VBR_q","abr_switch_map","apply_abr_preset","actual_bitrate","Presets_1","VBRQuantize","VBRQuantize_1","CalcNoiseResult$1","CalcNoiseResult_1","new_float$22","new_int$22","CalcNoiseData","CalcNoiseData_1","System$21","VbrMode$21","Util$21","Arrays$21","new_float$21","assert$21","Quantize$1","tk","init_xrpow_core","psfb21_analogsilence","ath21","block","ath12","BinSearchDirection","bin_search_StepSize","desired_rate","nBits","flagGoneOver","Direction","BINSEARCH_NONE","BINSEARCH_DOWN","BINSEARCH_UP","loop_break","penalties","get_klemm_noise","klemm_noise","quant_compare","best","calc","better","amp_scalefac_bands","bRefine","ifqstep34","trigger","inc_scalefac_scale","inc_subblock_gain","amp","balance_noise","ixwork","trancate_smallspectrums","allowedNoise","trancateThreshold","nsame","cod_info_w","save_xrpow","best_noise_info","best_part2_3_length","bEndOfSearch","best_ggain_pass1","age","search_limit","noise_info","maxggain","huff_bits","ResvAdjust","VBR_encode_granule","min_bits","dbits","bst_cod_info","bst_xrpow","Max_bits","real_bits","this_bits","found","LameInternalFlags","get_framebits","frameBits","MeanBits","VBR_old_prepare","bands","analog_silence","mxb","bitpressure_strategy","VBR_new_prepare","maximum_framebits","calc_target_bits","analog_silence_bits","max_frame_bits","res_factor","totbits","Quantize_1","assert$23","Reservoir$1","maxmp3buf","frameLength","resvLimit","fullFrameBits","resvsize","over_bits","stuffingBits","mdb_bytes","Reservoir_1","Version","LAME_URL","LAME_MAJOR_VERSION","LAME_MINOR_VERSION","LAME_PATCH_VERSION","PSY_MAJOR_VERSION","PSY_MINOR_VERSION","getLameVersion","getLameVeryShortVersion","getPsyVersion","getLameUrl","getLameOsBitness","Version_1","System$22","VbrMode$22","ShortBlock$22","Arrays$22","new_byte$22","assert$24","VBRTag","_v","FRAMES_FLAG","BYTES_FLAG","TOC_FLAG","VBR_SCALE_FLAG","NUMTOCENTRIES","MAXFRAMESIZE","LAMEHEADERSIZE","XING_BITRATE1","XING_BITRATE2","XING_BITRATE25","ISO_8859_1","VBRTag0","VBRTag1","crc16Lookup","addVbr","xingSeekTable","indx","seek_point","extractInteger","createInteger","createShort","isVbrTag","String","equals","shiftInBitsValue","setLameTagFrameHeader","bbyte","abyte","crcUpdateLookup","putLameVBR","musicLength","streamBuffer","streamBufferPos","revMethod","abrBitrate","bytesWritten","encDelay","encPadding","revision","vbrTypeTranslator","peakSignalAmplitude","radioReplayGain","audiophileReplayGain","noiseShaping","stereoMode","nonOptimal","sourceFreq","misc","musicCRC","expNPsyTune","safeJoint","noGapMore","noGapPrevious","noGapCount","noGapCurr","athType","flags","skipId3v2","fpStream","seek","id3v2Header","readFully","Tables","getVbrTag","pTagData","VBRTagData","hId","hSrIndex","hMode","hBitrate","samprate","head_flags","frames","bytes","toc","vbrScale","headersize","kbps_header","totalFrameSize","headerSize","getLameTagFrame","streamIndex","streamSize","putVbrTag","id3v2TagSize","write","VBRTag_1","GetAudio","parse2","mpg2","Parse","ver2","id32","pre2","MPGLib","ID3Tag","_bits","Mp3Encoder","channels","console","gaud","Presets","QuantizePVT","Quantize","Reservoir","Takehiro","parse","retcode","maxSamples","encodeBuffer","left","right","_sz","subarray","WavHeader","dataOffset","dataLen","fourccToInt","fourcc","charCodeAt","RIFF","WAVE","fmt_","readHeader","getUint32","fmtLen","getUint16","Mp3Encoder_1","Encoder","config","mp3Encoder","bitRate","samplesMono","clearBuffer","dataBuffer","floatTo16BitPCM","convertBuffer","appendToBuffer","activeStream","microphone","processor","timerToStart","_this","startRecordingAt","lameEncoder","audio","deviceId","exact","mediaDevices","getUserMedia","addMicrophoneListener","finalBuffer","finish","hookCallback","hooks","setHookCallback","isObject","hasOwnProp","isObjectEmpty","obj","getOwnPropertyNames","isUndefined","isNumber","isDate","Date","arr","arrLen","extend","valueOf","createUTC","format","locale","strict","createLocalOrUTC","utc","defaultParsingFlags","empty","unusedTokens","unusedInput","overflow","charsLeftOver","nullInput","invalidEra","invalidMonth","invalidFormat","userInvalidated","iso","parsedDateParts","era","meridiem","rfc2822","weekdayMismatch","getParsingFlags","_pf","isValid","_isValid","parsedParts","isNowValid","_d","getTime","invalidWeekday","_strict","bigHour","isFrozen","createInvalid","NaN","fun","momentProperties","updateInProgress","copyConfig","to","prop","momentPropertiesLen","_isAMomentObject","_f","_l","_tzm","_isUTC","_locale","Moment","updateOffset","isMoment","warn","msg","suppressDeprecationWarnings","deprecate","firstTime","deprecationHandler","argLen","stack","deprecations","deprecateSimple","isFunction","Function","_config","_dayOfMonthOrdinalParseLenient","RegExp","_dayOfMonthOrdinalParse","_ordinalParse","mergeConfigs","parentConfig","childConfig","Locale","defaultCalendar","sameDay","nextDay","nextWeek","lastDay","lastWeek","sameElse","calendar","mom","now","_calendar","zeroFill","targetLength","forceSign","absNumber","zerosToFill","substr","formattingTokens","localFormattingTokens","formatFunctions","formatTokenFunctions","addFormatToken","token","padded","func","localeData","removeFormattingTokens","makeFormatFunction","formatMoment","expandFormat","invalidDate","replaceLongDateFormatTokens","longDateFormat","lastIndex","defaultLongDateFormat","LTS","LT","L","LL","LLL","LLLL","_longDateFormat","formatUpper","tok","defaultInvalidDate","_invalidDate","defaultOrdinal","defaultDayOfMonthOrdinalParse","defaultRelativeTime","future","past","ss","mm","hh","ww","M","MM","yy","relativeTime","withoutSuffix","string","isFuture","_relativeTime","pastFuture","diff","aliases","addUnitAlias","unit","shorthand","lowerCase","normalizeUnits","units","normalizeObjectUnits","inputObject","normalizedProp","normalizedInput","priorities","addUnitPriority","priority","getPrioritizedUnits","unitsObj","isLeapYear","year","absFloor","toInt","argumentForCoercion","coercedNumber","makeGetSet","keepTime","set$1","month","date","daysInMonth","stringGet","stringSet","prioritized","prioritizedLen","match1","match2","match3","match4","match6","match1to2","match3to4","match5to6","match1to3","match1to4","match1to6","matchUnsigned","matchSigned","matchOffset","matchShortOffset","matchTimestamp","matchWord","addRegexToken","strictRegex","isStrict","getParseRegexForToken","unescapeFormat","regexEscape","matched","p1","p2","p3","p4","tokens","addParseToken","tokenLen","addWeekParseToken","_w","addTimeToArrayFromToken","YEAR","MONTH","DATE","HOUR","MINUTE","SECOND","MILLISECOND","WEEK","WEEKDAY","modMonth","monthsShort","months","monthsShortRegex","monthsRegex","monthsParse","defaultLocaleMonths","split","defaultLocaleMonthsShort","MONTHS_IN_FORMAT","defaultMonthsShortRegex","defaultMonthsRegex","localeMonths","_months","isFormat","localeMonthsShort","_monthsShort","handleStrictParse","monthName","ii","llc","toLocaleLowerCase","_monthsParse","_longMonthsParse","_shortMonthsParse","localeMonthsParse","_monthsParseExact","setMonth","dayOfMonth","getSetMonth","getDaysInMonth","computeMonthsParse","_monthsShortStrictRegex","_monthsShortRegex","_monthsStrictRegex","_monthsRegex","cmpLenRev","shortPieces","longPieces","mixedPieces","daysInYear","parseTwoDigitYear","parseInt","getSetYear","getIsLeapYear","createDate","ms","getFullYear","setFullYear","createUTCDate","UTC","getUTCFullYear","setUTCFullYear","firstWeekOffset","dow","doy","fwd","getUTCDay","dayOfYearFromWeeks","week","weekday","resYear","resDayOfYear","dayOfYear","weekOfYear","resWeek","weekOffset","weeksInYear","weekOffsetNext","localeWeek","_week","defaultLocaleWeek","localeFirstDayOfWeek","localeFirstDayOfYear","getSetWeek","getSetISOWeek","parseWeekday","weekdaysParse","parseIsoWeekday","shiftWeekdays","ws","weekdaysMin","weekdaysShort","weekdays","weekdaysMinRegex","weekdaysShortRegex","weekdaysRegex","defaultLocaleWeekdays","defaultLocaleWeekdaysShort","defaultLocaleWeekdaysMin","defaultWeekdaysRegex","defaultWeekdaysShortRegex","defaultWeekdaysMinRegex","localeWeekdays","_weekdays","day","localeWeekdaysShort","_weekdaysShort","localeWeekdaysMin","_weekdaysMin","handleStrictParse$1","weekdayName","_weekdaysParse","_shortWeekdaysParse","_minWeekdaysParse","localeWeekdaysParse","_weekdaysParseExact","_fullWeekdaysParse","getSetDayOfWeek","getDay","getSetLocaleDayOfWeek","getSetISODayOfWeek","computeWeekdaysParse","_weekdaysStrictRegex","_weekdaysRegex","_weekdaysShortStrictRegex","_weekdaysShortRegex","_weekdaysMinStrictRegex","_weekdaysMinRegex","minp","shortp","longp","minPieces","hFormat","hours","kFormat","lowercase","minutes","matchMeridiem","_meridiemParse","localeIsPM","seconds","kInput","_isPm","isPM","_meridiem","pos1","pos2","defaultLocaleMeridiemParse","getSetHour","localeMeridiem","isLower","globalLocale","baseConfig","dayOfMonthOrdinalParse","meridiemParse","locales","localeFamilies","commonPrefix","arr1","arr2","minl","normalizeLocale","chooseLocale","names","loadLocale","isLocaleNameSane","oldLocale","_abbr","aliasedRequire","getSetGlobalLocale","getLocale","defineLocale","abbr","parentLocale","updateLocale","tmpLocale","listLocales","checkOverflow","_overflowDayOfYear","_overflowWeeks","_overflowWeekday","extendedIsoRegex","basicIsoRegex","tzRegex","isoDates","isoTimes","aspNetJsonRegex","obsOffsets","UT","GMT","EDT","EST","CDT","CST","MDT","MST","PDT","PST","configFromISO","allowTime","dateFormat","timeFormat","tzFormat","isoDatesLen","isoTimesLen","configFromStringAndFormat","extractFromRFC2822Strings","yearStr","monthStr","dayStr","hourStr","minuteStr","secondStr","untruncateYear","preprocessRFC2822","checkWeekday","weekdayStr","parsedInput","calculateOffset","obsOffset","militaryOffset","numOffset","hm","configFromRFC2822","parsedArray","setUTCMinutes","getUTCMinutes","configFromString","createFromInputFallback","defaults","currentDateArray","nowValue","_useUTC","getUTCMonth","getUTCDate","getMonth","getDate","configFromArray","currentDate","expectedWeekday","yearToUse","dayOfYearFromWeekInfo","_dayOfYear","_nextDay","weekYear","weekdayOverflow","curWeek","GG","W","E","createLocal","gg","ISO_8601","RFC_2822","skipped","stringLength","totalParsedInputLength","meridiemFixWrap","erasConvertYear","hour","isPm","meridiemHour","configFromStringAndArray","tempConfig","bestMoment","scoreToBeat","currentScore","validFormatFound","bestFormatIsValid","configfLen","score","configFromObject","dayOrDate","minute","millisecond","createFromConfig","prepareConfig","preparse","configFromInput","isUTC","prototypeMin","prototypeMax","pickBy","moments","ordering","isDurationValid","unitHasDecimal","orderLen","parseFloat","isValid$1","createInvalid$1","createDuration","Duration","years","quarters","quarter","weeks","isoWeek","days","milliseconds","_milliseconds","_days","_data","_bubble","isDuration","absRound","compareArrays","array1","array2","dontConvert","lengthDiff","diffs","separator","utcOffset","sign","offsetFromString","chunkOffset","matcher","parts","matches","cloneWithOffset","model","setTime","local","getDateOffset","getTimezoneOffset","getSetOffset","keepLocalTime","keepMinutes","localAdjust","_changeInProgress","addSubtract","getSetZone","setOffsetToUTC","setOffsetToLocal","subtract","setOffsetToParsedOffset","tZone","hasAlignedHourOffset","isDaylightSavingTime","isDaylightSavingTimeShifted","_isDSTShifted","toArray","isLocal","isUtcOffset","isUtc","aspNetRegex","isoRegex","diffRes","parseIso","momentsDifference","inp","positiveMomentsDifference","base","isAfter","isBefore","createAdder","direction","period","isAdding","invalid","isString","isMomentInput","isNumberOrStringArray","isMomentInputObject","objectTest","propertyTest","properties","propertyLen","arrayTest","dataTypeTest","item","isCalendarSpec","getCalendarFormat","myMoment","calendar$1","formats","sod","startOf","calendarFormat","localInput","endOf","isBetween","inclusivity","localFrom","localTo","isSame","inputMs","isSameOrAfter","isSameOrBefore","asFloat","that","zoneDelta","monthDiff","wholeMonthDiff","anchor","toISOString","keepOffset","toDate","inspect","prefix","datetime","suffix","zone","inputString","defaultFormatUtc","defaultFormat","postformat","humanize","fromNow","toNow","newLocaleData","lang","MS_PER_SECOND","MS_PER_MINUTE","MS_PER_HOUR","MS_PER_400_YEARS","mod$1","dividend","divisor","localStartOfDate","utcStartOfDate","startOfDate","isoWeekday","unix","toObject","toJSON","isValid$2","parsingFlags","invalidAt","creationData","localeEras","eras","_eras","since","until","localeErasParse","eraName","narrow","localeErasConvertYear","dir","getEraName","getEraNarrow","getEraAbbr","getEraYear","erasNameRegex","computeErasParse","_erasNameRegex","_erasRegex","erasAbbrRegex","_erasAbbrRegex","erasNarrowRegex","_erasNarrowRegex","matchEraAbbr","matchEraName","matchEraNarrow","matchEraYearOrdinal","_eraYearOrdinalRegex","abbrPieces","namePieces","narrowPieces","addWeekYearFormatToken","getter","getSetWeekYear","getSetWeekYearHelper","getSetISOWeekYear","getISOWeeksInYear","getISOWeeksInISOWeekYear","isoWeekYear","getWeeksInYear","weekInfo","getWeeksInWeekYear","weeksTarget","setWeekAll","dayOfYearData","getSetQuarter","erasParse","eraYearOrdinalParse","getSetDayOfMonth","getSetDayOfYear","getSetMinute","getSetMillisecond","getSetSecond","parseMs","getZoneAbbr","getZoneName","proto","createUnix","createInZone","parseZone","preParsePostFormat","eraNarrow","eraAbbr","eraYear","isoWeeks","weeksInWeekYear","isoWeeksInYear","isoWeeksInISOWeekYear","isDST","zoneAbbr","zoneName","dates","isDSTShifted","proto$1","get$1","field","setter","listMonthsImpl","listWeekdaysImpl","localeSorted","shift","listMonths","listMonthsShort","listWeekdays","listWeekdaysShort","listWeekdaysMin","firstDayOfYear","firstDayOfWeek","langData","mathAbs","addSubtract$1","add$1","subtract$1","absCeil","bubble","monthsFromDays","monthsToDays","daysToMonths","as","valueOf$1","makeAs","alias","asMilliseconds","asSeconds","asMinutes","asHours","asDays","asWeeks","asMonths","asQuarters","asYears","clone$1","get$2","makeGetter","thresholds","substituteTimeAgo","relativeTime$1","posNegDuration","getSetRelativeTimeRounding","roundingFunction","getSetRelativeTimeThreshold","limit","argWithSuffix","argThresholds","withSuffix","th","abs$1","toISOString$1","totalSign","ymSign","daysSign","hmsSign","toFixed","proto$2","toIsoString","relativeTimeRounding","relativeTimeThreshold","HTML5_FMT","DATETIME_LOCAL","DATETIME_LOCAL_SECONDS","DATETIME_LOCAL_MS","TIME","TIME_SECONDS","TIME_MS","_interopDefaultLegacy","_slicedToArray__default","_classCallCheck__default","_createClass__default","_createForOfIteratorHelper","allowArrayLike","it","_unsupportedIterableToArray","F","done","_e","normalCompletion","didErr","_e2","minLen","_arrayLikeToArray","availableBytes","_step","dataViews","effectiveByteLength","truncatedBuffers","consumedByteLength","truncatedByteOffset","_iterator","byteLengthOfDataView","DataView","_byteLengthOfDataView","_buffers","_byteLength","_byteOffset","_dataViews","_internalBuffer","ArrayBuffer","littleEndian","setUint8","getFloat64","getInt16","getInt32","_this$_findDataViewWi","_findDataViewWithOffset","_this$_findDataViewWi2","byteOffsetOfDataView","getInt8","_this$_findDataViewWi3","_this$_findDataViewWi4","setFloat32","setFloat64","setInt16","setInt32","_this$_findDataViewWi5","_this$_findDataViewWi6","setInt8","setUint16","setUint32","_this$_findDataViewWi7","_this$_findDataViewWi8","_step2","_iterator2","byteOffsetOfNextDataView","formatProdErrorMessage","$$observable","randomString","substring","ActionTypes","INIT","REPLACE","PROBE_UNKNOWN_ACTION","isPlainObject","createStore","reducer","preloadedState","enhancer","currentReducer","currentListeners","nextListeners","isDispatching","ensureCanMutateNextListeners","getState","isSubscribed","dispatch","action","listeners","replaceReducer","nextReducer","outerSubscribe","observeState","bindActionCreator","actionCreator","bindActionCreators","actionCreators","boundActionCreators","compose","funcs","ReactReduxContext","React","batch","getBatch","nullListeners","createSubscription","store","parentSub","handleChangeWrapper","subscription","onStateChange","trySubscribe","addNestedSub","createListenerCollection","notifyNestedSubs","Boolean","tryUnsubscribe","getListeners","useIsomorphicLayoutEffect","useLayoutEffect","useEffect","children","contextValue","useMemo","previousState","Context","Provider","_excluded","_excluded2","EMPTY_ARRAY","NO_SUBSCRIPTION_ARRAY","storeStateUpdatesReducer","updateCount","payload","useIsomorphicLayoutEffectWithArgs","effectFunc","effectArgs","dependencies","captureWrapperProps","lastWrapperProps","lastChildProps","renderIsScheduled","wrapperProps","actualChildProps","childPropsFromStoreUpdate","current","subscribeUpdates","shouldHandleStateChanges","childPropsSelector","forceComponentUpdateDispatch","didUnsubscribe","lastThrownError","checkForUpdates","newChildProps","latestStoreState","initStateUpdates","connectAdvanced","selectorFactory","_ref2$getDisplayName","getDisplayName","_ref2$methodName","methodName","_ref2$renderCountProp","renderCountProp","_ref2$shouldHandleSta","_ref2$storeKey","storeKey","_ref2$forwardRef","withRef","forwardRef","_ref2$context","connectOptions","_objectWithoutPropertiesLoose","WrappedComponent","wrappedComponentName","displayName","selectorFactoryOptions","_extends","pure","usePureOnlyMemo","ConnectFunction","props","_useMemo","reactReduxForwardedRef","propsContext","ContextToUse","Consumer","isContextConsumer","useContext","didStoreComeFromProps","createChildSelector","_useMemo2","overriddenContextValue","_useReducer","useReducer","previousStateUpdateResult","useRef","renderedWrappedComponent","ref","Connect","forwarded","hoistStatics","is","shallowEqual","objA","objB","keysA","keysB","wrapMapToPropsConstant","getConstant","constant","constantSelector","dependsOnOwnProps","getDependsOnOwnProps","mapToProps","wrapMapToPropsFunc","stateOrDispatch","ownProps","mapDispatchToProps","_loop","mapStateToProps","defaultMergeProps","stateProps","dispatchProps","mergeProps","mergedProps","areMergedPropsEqual","hasRunOnce","nextMergedProps","wrapMergePropsFunc","impureFinalPropsSelectorFactory","pureFinalPropsSelectorFactory","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","hasRunAtLeastOnce","handleSubsequentCalls","nextState","nextOwnProps","propsChanged","stateChanged","nextStateProps","statePropsChanged","handleNewState","finalPropsSelectorFactory","initMapStateToProps","initMapDispatchToProps","initMergeProps","factories","strictEqual","createConnect","_temp","_ref$connectHOC","connectHOC","_ref$mapStateToPropsF","mapStateToPropsFactories","defaultMapStateToPropsFactories","_ref$mapDispatchToPro","mapDispatchToPropsFactories","defaultMapDispatchToPropsFactories","_ref$mergePropsFactor","mergePropsFactories","defaultMergePropsFactories","_ref$selectorFactory","defaultSelectorFactory","_ref3$pure","_ref3$areStatesEqual","_ref3$areOwnPropsEqua","_ref3$areStatePropsEq","_ref3$areMergedPropsE","extraOptions","newBatch","useMemoOne","getResult","initial","useState","isFirstRun","committed","useCallback","getRect","top","bottom","height","center","expand","expandBy","shrink","shrinkBy","noSpacing","createBox","borderBox","_ref2$margin","margin","_ref2$border","border","_ref2$padding","marginBox","paddingBox","contentBox","raw","invariant","change","shiftBy","shifted","withScroll","scroll","pageXOffset","pageYOffset","calculateBox","styles","marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","getBox","getBoundingClientRect","getComputedStyle","frameId","wrapperFn","requestAnimationFrame","cancel","cancelAnimationFrame","bindEvents","bindings","sharedOptions","unbindings","binding","shared","fromBinding","getOptions","eventName","unbind","isProduction$1","RbdInvariant","condition","ErrorBoundary","_React$Component","callbacks","onWindowError","getCallbacks","isDragging","tryAbort","preventDefault","setCallbacks","_inheritsLoose","_proto","componentDidMount","componentDidCatch","setState","componentWillUnmount","position","withLocation","isInHomeList","droppableId","startPosition","endPosition","withCombine","combine","draggableId","returnedToStart","dragHandleUsageInstructions","onDragStart","onDragUpdate","update","onDragEnd","reason","origin","point1","point2","negate","point","line","otherValue","distance","closest","points","offsetByPosition","spacing","getCorners","clip","frame","shouldClipSubject","subject","executeClip","pageMarginBox","getSubject","page","withPlaceholder","axis","scrolled","displacement","increased","_extends2","increasedBy","increase","active","scrollDroppable","droppable","newScroll","scrollable","scrollDiff","scrollDisplacement","list","find","toDroppableMap","memoizeOne","droppables","previous","toDraggableMap","draggables","toDroppableList","toDraggableList","getDraggablesInsideDroppable","draggable","tryGetDestination","impact","at","tryGetCombine","removeDraggableFromList","remove","isHomeOf","noDisplacedBy","emptyGroups","invisible","visible","noImpact","displaced","displacedBy","isWithin","lowerBound","upperBound","isPartiallyVisibleThroughFrame","isWithinVertical","isWithinHorizontal","isPartiallyVisibleVertically","isPartiallyVisibleHorizontally","isBiggerVertically","isBiggerHorizontally","isTotallyVisibleThroughFrame","vertical","crossAxisLine","crossAxisStart","crossAxisEnd","crossAxisSize","horizontal","isVisible","toBeDisplaced","viewport","withDroppableDisplacement","isVisibleThroughFrameFn","displacedTarget","getDroppableDisplaced","isVisibleInDroppable","isVisibleInViewport","isPartiallyVisible","isTotallyVisible","getShouldAnimate","forceShouldAnimate","shouldAnimate","getDisplacementGroups","afterDragging","groups","getTarget","goAtEnd","insideDestination","inHomeList","newIndex","indexOfLastItem","getIndexOfLastItem","calculateReorderImpact","withoutDragging","sliceFrom","didStartAfterCritical","afterCritical","effected","moveToNextIndex","isMovingForward","previousImpact","wasAt","_newIndex","proposedIndex","firstIndex","fromReorder","isCombineEnabled","combineId","combineWithIndex","fromCombine","whenCombining","combineWith","displaceBy","isDisplaced","getCombinedItemDisplacement","distanceFromStartToBorderBoxCenter","box","getCrossAxisBorderBoxCenter","isMoving","goAfter","moveRelativeTo","goBefore","distanceFromEndToBorderBoxCenter","whenReordering","draggablePage","moveInto","goIntoStart","closestAfter","withDisplacement","getPageBorderBoxCenterFromImpact","withoutDisplacement","getResultWithoutDroppableDisplacement","scrollViewport","getDraggables","ids","getClientFromPageBorderBoxCenter","pageBorderBoxCenter","withoutPageScrollChange","withViewportDisplacement","client","isTotallyVisibleInNewLocation","newPageBorderBoxCenter","_ref$onlyOnMainAxis","onlyOnMainAxis","changeNeeded","isTotallyVisibleOnAxis","moveToNextPlace","previousPageBorderBoxCenter","previousClientSelection","isEnabled","getImpact","closestId","withoutDraggable","indexOfClosest","moveToNextCombine","clientSelection","scrollJumpRequest","cautious","maxScrollChange","scrolledViewport","scrolledDroppable","withViewportScroll","withDroppableScroll","tryGetVisible","speculativelyIncrease","getKnownActive","rect","getCurrentPageBorderBoxCenter","getCurrentPageBorderBox","getDisplacedBy","withMaxScroll","addPlaceholder","placeholderSize","requiredGrowth","availableSpace","needsToGrowBy","dimension","getRequiredGrowthForPlaceholder","added","oldFrameMaxScroll","_subject","maxScroll","newFrame","moveCrossAxis","isOver","isBetweenSourceClipped","candidates","activeOfTarget","isBetweenDestinationClipped","contains","isWithinDroppable","getBestCrossAxisDroppable","sorted","distanceToA","distanceToB","getClosestDraggable","proposed","proposedPageBorderBoxCenter","isGoingBeforeTarget","relativeTo","moveToNewDroppable","whatIsDraggedOver","moveInDirection","isActuallyOver","getDroppableOver","dimensions","isMainAxisMovementAllowed","home","critical","isMovingOnMainAxis","borderBoxCenter","_state$dimensions","selection","isMovementAllowed","phase","isPositionInFrame","getDroppableOver$1","pageBorderBox","childCenter","isContained","isStartContained","isEndContained","startCenter","candidate","getFurthestAway","offsetRectByPosition","getIsDisplaced","getDragImpact","pageOffset","destinationId","pageBorderBoxWithDroppableScroll","area","targetRect","targetStart","targetEnd","child","childRect","didStartAfterCritical$1","getCombineImpact","atIndex","getReorderImpact","patchDroppableMap","updated","clearUnusedPlaceholder","lastDroppable","_subject2","oldMaxScroll","removePlaceholder","forcedClientSelection","forcedDimensions","forcedViewport","forcedImpact","newImpact","withUpdatedPlaceholders","cleaned","patched","recomputePlaceholders","recompute","getDraggables$1","getClientBorderBoxCenter","refreshSnap","movementMode","needsVisibilityCheck","getLiftEffect","insideHome","rawIndex","inVirtualList","adjustAdditionsForScrollChanges","additions","updatedDroppables","windowScrollChange","getFrame","droppableScrollChange","moved","offset$1","initialWindowScroll","placeholder","offsetDraggable","isSnapping","postDroppableChange","isEnabledChanging","patchDimensionMap","removeScrollJumpRequest","idle","completed","shouldFlush","_action$payload","isWindowScrollAllowed","isFixedOnPage","_getLiftEffect","onLiftImpact","published","withScrollChange","modified","existing","updatedAdditions","removals","wasOverId","wasOver","draggingState","isWaiting","publishWhileDraggingInVirtual","_clientSelection","_action$payload2","_action$payload3","_id","_target","_action$payload4","_id2","_target2","_updated","_newScroll","_viewport","_result2","_action$payload5","dropDuration","newHomeClientOffset","lift","publishWhileDragging","collectionStarting","updateDroppableScroll","updateDroppableIsEnabled","updateDroppableIsCombineEnabled","move","moveUp","moveDown","moveRight","moveLeft","completeDrop","drop","dropAnimationFinished","curves","combining","outOfTheWayTiming","transitions","fluid","snap","timing","outOfTheWay","moveTo","transforms","isCombining","translate","minDropTime","maxDropTime","dropTimeRange","drop$1","_getDropImpact","lastImpact","didDropInsideDroppable","getDropImpact","newClientCenter","getNewHomeClientOffset","distance$1","getDropDuration","animateDrop","dropPending","getWindowScroll","getScrollListener","onWindowScroll","scheduled","rafSchd","passive","capture","getWindowScrollBinding","scrollListener","shouldEnd","getAsyncMarshal","timerId","execute","entry","shallow","withTimings","getDragStart","responder","announce","getDefaultMessage","willExpire","wasCalled","isExpired","timeoutId","getExpiringAnnounce","responders","getResponders","publisher","asyncMarshal","dragging","beforeCapture","onBeforeCapture","beforeStart","onBeforeDragStart","lastCritical","lastLocation","lastCombine","hasCriticalChanged","isDraggableEqual","isDroppableEqual","isCriticalEqual","hasLocationChanged","hasGroupingChanged","isCombineEqual","abort","getPublisher","dropAnimationFinish","dropAnimationFlushOnScroll","once","pendingDrop","postActionState","composeEnhancers","marshal","dimensionMarshal","focusMarshal","styleMarshal","autoScroller","createStore$1","middlewares","_dispatch","middlewareAPI","middleware","_objectSpread","applyMiddleware","dropping","resting","stopPublishing","dimensionMarshalStopper","request","scrollOptions","shouldPublishImmediately","_marshal$startPublish","startPublishing","lift$1","shouldStop","autoScroll","isWatching","tryRecordFocus","tryRestoreFocusRecorded","tryShiftRecord","focus","getMaxScroll","scrollHeight","scrollWidth","getDocumentElement","doc","documentElement","getMaxWindowScroll","clientWidth","clientHeight","getInitialPublish","registry","getViewport","windowScroll","getAllByType","getDimensionAndWatchScroll","getDimension","shouldPublishUpdate","getById","createDimensionMarshal","staging","collect","_staging","getScrollWhileDragging","publish","createPublisher","subscriber","exists","dragStopped","canStartDrag","scrollWindow","scrollBy","getScrollableDroppables","getBestScrollableDroppable","_dimension","maybe","getScrollableDroppableOver","percentage","stopDampeningAt","accelerateAt","getPercentage","startOfRange","endOfRange","range","stopAt","distanceToEdge","dragStartTime","shouldUseTimeDampening","startScrollingFrom","maxScrollValueAt","percentageFromMaxScrollValueAt","getValueFromDistance","proposedScroll","runTime","betweenAccelerateAtAndStopAtPercentage","dampenValueByTime","getScrollOnAxis","container","distanceToEdges","getDistanceThresholds","clean$2","getScroll","required","limited","isTooBigVertically","isTooBigHorizontally","adjustForSizeLimits","smallestSigned","getOverlap","getRemainder","targetScroll","overlap","canPartiallyScroll","rawMax","smallestChange","canScrollWindow","canScrollDroppable","scroll$1","_change","getWindowScrollChange","getDroppableScrollChange","createJumpScroller","scrollDroppableAsMuchAsItCan","getDroppableOverlap","whatTheDroppableCanScroll","scrollWindowAsMuchAsItCan","getWindowOverlap","whatTheWindowCanScroll","droppableRemainder","windowRemainder","moveByOffset","createAutoScroller","fluidScroller","scheduleWindowScroll","scheduleDroppableScroll","tryScroll","_dragging","wasScrollNeeded","fakeScrollCallback","createFluidScroller","jumpScroll","prefix$1","dragHandle","contextId","scrollContainer","getStyles","rules","rule","selector","getStyles$1","getSelector","attribute","dragHandle$1","grabCursor","always","dropAnimating","transition","userCancel","getHead","querySelector","createStyleEl","nonce","getWindowFromEl","ownerDocument","defaultView","isHtmlElement","HTMLElement","findDragHandle","possible","querySelectorAll","handle","getAttribute","createRegistry","subscribers","findDraggableById","findDroppableById","uniqueId","unregister","findById","clean","StoreContext","getBodyElement","body","visuallyHidden","getId","useUniqueId","AppContext","useDev","useHook","useDevSetupWarning","usePrevious","_preventedKeys","escape","space","arrowLeft","arrowUp","arrowRight","arrowDown","preventedKeys","preventStandardKeyEvents","keyCode","supportedEventName","primaryButton","sloppyClickThreshold","_scrollJumpKeys","idle$1","getCaptureBindings","getPhase","setPhase","button","clientX","clientY","actions","pending","fluidLift","shouldBlockNextClick","shouldRespectForcePress","noop$1","scrollJumpKeys","getDraggingBindings","idle$2","forcePressThreshold","interactiveTagNames","textarea","select","optgroup","video","isAnInteractiveElement","tagName","parentElement","isEventInInteractiveElement","getBorderBoxCenterPosition","supportedMatchesName","Element","closestPonyfill","closest$1","findClosestDragHandleFromEvent","_isActive","expected","isLockActive","shouldWarn","canStart","lockAPI","isClaimed","tryStart","forceSensorStop","sourceEvent","draggable$1","findDraggable","canDragInteractiveElements","lock","claim","getShouldRespectForcePress","tryDispatchWhenDragging","getAction","cleanup","liftActionArgs","move$1","api","snapLift","defaultSensors","phaseRef","unbindEventsRef","startCaptureBinding","defaultPrevented","ctrlKey","metaKey","shiftKey","altKey","findClosestDraggableId","tryGetLock","startPendingDrag","preventForcePressBinding","findOptionsForDraggable","canGetLock","listenForCapture","bindCapturingEvents","preDrag","isCapturing","touch","touches","longPressTimerId","unbindTarget","hasMoved","_event$touches$","force","shouldRespect","getHandleBindings","unbindWindow","getWindowBindings","startDragging","useSensorMarshal","customSensors","enableDefaultSensors","useSensors","abandon","newLock","tryAbandon","create","tryAbandonLock","forceStop","tryGetClosestDraggableIdFromEvent","tryReleaseLock","isLockClaimed","createResponders","getStore","lazyRef","App","sensors","lazyStoreRef","lastPropsRef","style","removeChild","textContent","useAnnouncer","dragHandleUsageInstructionsId","display","useHiddenTextElement","alwaysRef","dynamicRef","setDynamicStyle","setAlwaysStyle","dynamic","useStyleMarshal","lazyDispatch","marshalCallbacks","useRegistry","entriesRef","recordRef","restoreFocusFrameRef","isMountedRef","tryGiveFocus","tryGiveFocusTo","activeElement","redirectTo","focused","useFocusMarshal","tryResetStore","getCanLift","getIsMovementAllowed","appContext","canLift","count$1","DragDropContext","isEqual$1","isScroll","isAuto","isEither","overflowX","overflowY","isElementScrollable","getClosestScrollable","getScroll$1","scrollLeft","scrollTop","getIsFixed","getEnv","closestScrollable","env","isDropDisabled","targetRef","getClient","frameClient","scrollSize","getDroppableDimension","immediate","delayed","getListenerOptions","useRequiredContext","getClosestScrollableFromDrag","noop$2","getStyle","isAnimatingOpenOnMount","animate","getSize","boxSizing","flexShrink","flexGrow","pointerEvents","Placeholder$1","animateOpenTimerRef","tryClearAnimateOpenTimer","onTransitionEnd","onClose","_useState","setIsAnimatingOpenOnMount","onSizeChangeEnd","propertyName","innerRef","DroppableContext","AnimateInOut","_React$PureComponent","getDerivedStateFromProps","provided","zIndexOptions","getDraggingTransition","shouldAnimateDragMovement","getDraggingOpacity","isDropAnimating","getShouldDraggingAnimate","getStyle$1","mapped","transform","opacity","zIndex","getDraggingStyle","secondary","shouldAnimateDisplacement","useDraggablePublisher","getDraggableRef","computedStyles","getDimension$1","publishedRef","isFirstPublishRef","useValidation$1","getRef","preventHtml5Dnd","isStrictEqual","whatIsDraggedOverFromResult","getSecondarySnapshot","combineTargetFor","isClone","dropAnimation","draggingOver","atRest","snapshot","ConnectedDraggable","draggingSelector","memoizedOffset","getMemoizedSnapshot","getMemoizedProps","_draggingOver","_combineWith","getCombineWithFromResult","getDraggableSelector","secondarySelector","getFallback","getProps","ownId","draggingId","visualDisplacement","isAfterCriticalInVirtualList","getSecondarySelector","setRef","_useRequiredContext","_useRequiredContext2","dropAnimationFinishedAction","dragHandleProps","tabIndex","role","onMoveEnd","draggableProps","rubric","PrivateDraggable","isUsingCloneFor","PublicDraggable","isDragDisabled","disableInteractiveElementBlocking","isMatchingType","getDraggable","defaultProps","ignoreContainerClipping","renderClone","getContainerForClone","ConnectedDroppable","idleWithAnimation","shouldAnimatePlaceholder","isDraggingOver","draggingOverWith","draggingFromThisWith","isUsingPlaceholder","useClone","idleWithoutAnimation","getDraggableRubric","getMapProps","isDraggingOverForConsumer","isDraggingOverForImpact","_snapshot","_completed","wasCombining","isHome","updateViewportMaxScroll","droppableRef","placeholderRef","getDroppableRef","setDroppableRef","setPlaceholderRef","onPlaceholderTransitionEnd","whileDraggingRef","previousRef","publishedDescriptorRef","memoizedUpdateScroll","getClosestScroll","updateScroll","scheduleScrollUpdate","onClosestScroll","removeAttribute","useDroppablePublisher","droppableProps","droppableContext","node","draggableProvided","draggableSnapshot","ReactDOM","getClone","PropTypes","Image","bsPrefix","className","rounded","roundedCircle","thumbnail","useBootstrapPrefix","_jsx","classNames","defaultDatasetIdKey","reforwardRef","setLabels","currentData","nextLabels","labels","setDatasets","nextDatasets","datasetIdKey","addedDatasets","datasets","nextDataset","currentDataset","dataset","cloneData","nextData","ChartComponent","param","redraw","plugins","fallbackContent","updateMode","canvasRef","chartRef","renderChart","Chart$1","destroyChart","destroy","chart","nextOptions","Chart","createTypedChart","registerables","Bar","BarController","VIEWBOX_CENTER_X","VIEWBOX_CENTER_Y","Path","counterClockwise","dashRatio","pathRadius","strokeWidth","getDashStyle","getPathDescription","fillOpacity","rotation","diameter","gapLength","strokeDasharray","strokeDashoffset","CircularProgressbar","_super","__extends","getBackgroundPadding","background","backgroundPadding","getPathRadius","getPathRatio","circleRatio","classes","pathRatio","root","viewBox","cy","trail","path","Component","CircularProgressbarWithChildren","circularProgressbarProps","__rest","__assign","flexDirection","justifyContent","alignItems","buildStyles","strokeLinecap","textColor","textSize","pathColor","pathTransition","pathTransitionDuration","trailColor","backgroundColor","rotationTransform","rotationTransformOrigin","removeUndefinedValues","stroke","transformOrigin","transitionDuration","fontSize","g","__awaiter","_arguments","P","generator","fulfilled","rejected","__generator","label","sent","trys","ops","verb","op","ReactMediaRecorder","useReactMediaRecorder","RecorderErrors","extendable_media_recorder_1","react_1","extendable_media_recorder_wav_encoder_1","_b","_c","onStop","onStart","blobPropertyBag","screen","_g","_h","customMediaStream","_j","stopStreamsOnStop","_k","askPermissionOnMount","mediaChunks","setStatus","_m","isAudioMuted","setIsAudioMuted","_o","mediaBlobUrl","setMediaBlobUrl","setError","getMediaStream","requiredMedia","stream_1","error_1","navigator","getDisplayMedia","audioTrack","addTrack","checkConstraints","mediaType","supportedMediaConstraints","getSupportedConstraints","unSupportedConstraints","constraint","onRecordingActive","onRecordingStart","onRecordingStop","chunk","blobProperty","muteAudio","mute","enabled","unMuteAudio","startRecording","pauseRecording","resumeRecording","previewStream","previewAudioStream","clearBlobUrl","__create","__defProp","__getOwnPropDesc","__getOwnPropNames","__getProtoOf","__hasOwnProp","__copyProps","except","desc","enumerable","__toESM","isNodeMode","__esModule","__publicField","__defNormalProp","writable","Player_exports","__export","default","Player","import_react","import_react_fast_compare","import_props","import_utils","player","progress","isReady","playedSeconds","getCurrentTime","loadedSeconds","getSecondsLoaded","getDuration","played","loaded","prevPlayed","prevLoaded","onProgress","progressTimeout","progressFrequency","progressInterval","mounted","isLoading","onReady","playing","volume","muted","setVolume","loadOnReady","play","handleDurationCheck","isPlaying","onPlay","startOnPlay","setPlaybackRate","seekOnPlay","seekTo","onPause","activePlayer","onEnded","loopOnEnded","onError","durationCheckTimeout","onDurationCalled","onDuration","stopOnUnmount","disablePIP","componentDidUpdate","prevProps","pip","disableDeferredLoading","forceLoad","isMediaStream","enablePIP","unmute","setLoop","amount","keepPlaying","Player2","onMount","handlePlayerMount","handleReady","handlePlay","handlePause","handleEnded","onLoaded","handleLoaded","handleError","propTypes","ReactPlayer_exports","createReactPlayer","import_deepmerge","import_memoize_one","import_Player","Preview","lazy","IS_BROWSER","IS_GLOBAL","global","SUPPORTED_PROPS","UniversalSuspense","Suspense","customPlayers","players","fallback","showPreview","light","wrapper","onClickPreview","getInternalPlayer","canPlay","omit","getActivePlayer","getConfig","references","lazyPlayer","shouldComponentUpdate","nextProps","renderPreview","playIcon","previewTabIndex","oEmbedUrl","onClick","handleClickPreview","fallback2","Wrapper","attributes","getAttributes","wrapperRef","renderActivePlayer","canEnablePIP","src_exports","src_default","import_players","import_ReactPlayer","patterns_exports","AUDIO_EXTENSIONS","DASH_EXTENSIONS","FLV_EXTENSIONS","HLS_EXTENSIONS","MATCH_URL_DAILYMOTION","MATCH_URL_FACEBOOK","MATCH_URL_FACEBOOK_WATCH","MATCH_URL_KALTURA","MATCH_URL_MIXCLOUD","MATCH_URL_SOUNDCLOUD","MATCH_URL_STREAMABLE","MATCH_URL_TWITCH_CHANNEL","MATCH_URL_TWITCH_VIDEO","MATCH_URL_VIDYARD","MATCH_URL_VIMEO","MATCH_URL_WISTIA","MATCH_URL_YOUTUBE","VIDEO_EXTENSIONS","canPlayFile","isBlobUrl","youtube","soundcloud","vimeo","facebook","streamable","wistia","twitch","dailymotion","mixcloud","vidyard","kaltura","file","players_exports","players_default","import_patterns","pictureInPictureEnabled","supportsWebKitPresentationMode","props_exports","import_prop_types","bool","oneOfType","shape","controls","playsinline","isRequired","playerVars","embedOptions","onUnstarted","appId","playerId","playerOptions","title","forceVideo","forceAudio","forceHLS","forceSafariHLS","forceDisableHls","forceDASH","forceFLV","hlsOptions","hlsVersion","dashVersion","flvVersion","customControls","onBuffer","onBufferEnd","onSeek","onPlaybackRateChange","onPlaybackQualityChange","onEnablePIP","onDisablePIP","visual","buying","liking","download","sharing","show_comments","show_playcount","showinfo","rel","iv_load_policy","modestbranding","autopause","byline","portrait","hide_cover","utils_exports","callPlayer","getSDK","parseEndTime","parseStartTime","queryString","import_load_script","componentImportFn","MATCH_START_QUERY","MATCH_END_QUERY","MATCH_START_STAMP","MATCH_NUMERIC","parseTimeParam","pattern","stamp","parseTimeString","getGlobal","requests","enableStubOn","sdkGlobal","sdkReady","isLoaded","fetchScript","existingGlobal","sdk","previousOnReady","omitKeys","notMobile","userAgent","webkitSupportsPresentationMode","webkitSetPresentationMode","_toConsumableArray","dashify","applyModifiers","modifiers","modifiedName","modifier","tail","buildRegex","variable","expression","preRenderString","expressionRegex","variables","expressionResult","modifiersRegex","modifiersRegexResult","preRenderedParts","part","prts","prt","missingParameters","renderedParts","preRenderedPart","template","knownParameters","renderCode","renderMessage","causeOrMissingParameters","optionalCause","cause","arrayLikeToArray","Constructor","toPropertyKey","_defineProperties","protoProps","staticProps","iter","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","arrayWithoutHoles","iterableToArray","nonIterableSpread","_typeof","toPrimitive","uid","isNullOrUndef","isNumberFinite","finiteOrDefault","valueOrDefault","toDimension","endsWith","each","loopable","reverse","_elementsEqual","a0","ilen","v0","v1","datasetIndex","klen","isValidKey","_merger","tval","sval","merge","sources","merger","mergeIf","_mergerIf","keyResolvers","resolveObjectKey","resolver","_splitKey","_getKeyResolver","_capitalize","defined","setsEqual","TAU","PITAU","INFINITY","POSITIVE_INFINITY","RAD_PER_DEG","QUARTER_PI","TWO_THIRDS_PI","niceNum","roundedRange","almostEquals","niceRange","epsilon","_setMinAndMaxByKey","toRadians","degrees","toDegrees","radians","_decimalPlaces","getAngleFromPoint","centrePoint","anglePoint","distanceFromXCenter","distanceFromYCenter","radialDistanceFromCenter","angle","distanceBetweenPoints","pt1","pt2","_angleDiff","_normalizeAngle","_angleBetween","sameAngleIsFullCircle","angleToStart","angleToEnd","startToAngle","endToAngle","_limitValue","_isBetween","_lookup","mid","hi","lo","_lookupByKey","_rlookupByKey","arrayEvents","unlistenArrayEvents","stub","_chartjs","_arrayUnique","items","requestAnimFrame","throttled","updateFn","updateArgs","ticking","rest","_toLeftRightCenter","align","_alignStartEnd","_getStartAndCountOfVisiblePoints","meta","animationsDisabled","pointCount","_sorted","iScale","_parsed","minDefined","maxDefined","getUserBounds","getPixelForValue","_scaleRangesChanged","xScale","yScale","_scaleRanges","newRanges","xmax","ymin","ymax","changed","atEdge","elasticIn","elasticOut","effects","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","easeOutSine","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeInElastic","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","easeOutBounce","easeInOutBounce","lim","p2b","n2b","b2n","n2p","map$1","C","D","hex","h1","h2","eq","hexString","isShort","alpha","HUE_RE","hsl2rgbn","hsv2rgbn","hwb2rgbn","rgb","rgb2hsl","hueValue","calln","hsl2rgb","hue","hueParse","hwb2rgb","hsv2rgb","Z","Y","X","V","U","T","S","R","O","N","K","G","H","I","J","names$1","OiceXe","antiquewEte","aqua","aquamarRe","azuY","beige","bisque","black","blanKedOmond","Xe","XeviTet","bPwn","burlywood","caMtXe","KartYuse","KocTate","cSO","cSnflowerXe","cSnsilk","crimson","cyan","xXe","xcyan","xgTMnPd","xWay","xgYF","xgYy","xkhaki","xmagFta","xTivegYF","xSange","xScEd","xYd","xsOmon","xsHgYF","xUXe","xUWay","xUgYy","xQe","xviTet","dAppRk","dApskyXe","dimWay","dimgYy","dodgerXe","fiYbrick","flSOwEte","foYstWAn","fuKsia","gaRsbSo","ghostwEte","gTd","gTMnPd","Way","gYF","gYFLw","gYy","honeyMw","hotpRk","RdianYd","Rdigo","ivSy","khaki","lavFMr","lavFMrXsh","lawngYF","NmoncEffon","ZXe","ZcSO","Zcyan","ZgTMnPdLw","ZWay","ZgYF","ZgYy","ZpRk","ZsOmon","ZsHgYF","ZskyXe","ZUWay","ZUgYy","ZstAlXe","ZLw","lime","limegYF","lRF","magFta","maPon","VaquamarRe","VXe","VScEd","VpurpN","VsHgYF","VUXe","VsprRggYF","VQe","VviTetYd","midnightXe","mRtcYam","mistyPse","moccasR","navajowEte","navy","Tdlace","Tive","TivedBb","Sange","SangeYd","ScEd","pOegTMnPd","pOegYF","pOeQe","pOeviTetYd","papayawEp","pHKpuff","peru","pRk","plum","powMrXe","purpN","YbeccapurpN","Yd","Psybrown","PyOXe","saddNbPwn","sOmon","sandybPwn","sHgYF","sHshell","siFna","silver","skyXe","UXe","UWay","UgYy","snow","sprRggYF","stAlXe","tan","teO","tEstN","tomato","Qe","viTet","JHt","wEte","wEtesmoke","Lw","LwgYF","nameParse","unpacked","tkeys","nk","unpack","transparent","RGB_RE","modHSL","fromObject","functionParse","rgbParse","Color","hexParse","_rgb","_valid","valid","rgbString","hslString","mix","color","weight","w2","interpolate","rgb1","rgb2","clearer","greyscale","opaquer","lighten","darken","saturate","desaturate","rotate","deg","index_esm","isPatternOrGradient","getHoverColor","overrides","descriptors","getScope$1","scope","_descriptors","animation","borderColor","devicePixelRatio","platform","getDevicePixelRatio","elements","events","font","family","lineHeight","hover","hoverBackgroundColor","ctx","hoverBorderColor","hoverColor","indexAxis","interaction","intersect","includeInvisible","maintainAspectRatio","onHover","parsing","responsive","scales","showLine","drawActiveElementsOnTop","describe","override","route","targetScope","targetName","scopeObject","targetScopeObject","privateName","_scriptable","_indexable","_fallback","_measureText","gc","longest","textWidth","measureText","_longestText","arrayOfThings","garbageCollect","save","jlen","thing","nestedThing","restore","gcLen","_alignPixel","pixel","currentDevicePixelRatio","halfWidth","clearCanvas","canvas","resetTransform","clearRect","drawPoint","drawPointLegend","xOffset","yOffset","cornerRadius","pointStyle","radius","rad","drawImage","beginPath","ellipse","arc","closePath","lineTo","SQRT1_2","borderWidth","_isPointInArea","clipArea","unclipArea","_steppedLineTo","flip","midpoint","_bezierCurveTo","bezierCurveTo","cp1x","cp2x","cp1y","cp2y","renderText","lines","strokeColor","translation","fillStyle","textAlign","textBaseline","setRenderOpts","strokeStyle","lineWidth","strokeText","maxWidth","fillText","decorateText","strikethrough","underline","metrics","actualBoundingBoxLeft","actualBoundingBoxRight","actualBoundingBoxAscent","actualBoundingBoxDescent","yDecoration","decorationWidth","addRoundedRectPath","topLeft","bottomLeft","bottomRight","topRight","LINE_HEIGHT","FONT_STYLE","toLineHeight","numberOrZero","_readValueToProps","objProps","read","toTRBL","toTRBLCorners","toPadding","toFont","toFontString","info","cacheable","createContext","parentContext","_createResolver","scopes","prefixes","rootScopes","_resolve","toStringTag","_cacheable","_scopes","_rootScopes","_getTarget","deleteProperty","_keys","_cached","readKey","needsSubResolver","createSubResolver","_resolveWithPrefixes","Reflect","getKeysFromAllScopes","ownKeys","storage","_storage","_attachContext","subProxy","descriptorDefaults","_proxy","_subProxy","_stack","setContext","receiver","isScriptable","_resolveScriptable","isIndexable","_resolveArray","_resolveWithContext","allKeys","scriptable","indexable","_allKeys","resolveFallback","getScope","addScopes","parentScopes","parentFallback","allScopes","addScopesFromKey","subGetTarget","resolveKeysFromAllScopes","_parseObjectDataRadialScale","_parsing","parsed","EPSILON","getPoint","skip","getValueAxis","splineCurve","firstPoint","middlePoint","afterPoint","d01","d12","s01","s12","fa","fb","splineCurveMonotone","valueAxis","pointsLen","deltaK","mK","pointBefore","pointCurrent","pointAfter","slopeDelta","alphaK","betaK","tauK","squaredMagnitude","monotoneAdjust","delta","iPixel","vPixel","monotoneCompute","capControlPoint","pt","_updateBezierControlPoints","controlPoints","spanGaps","cubicInterpolationMode","tension","capBezierPoints","inArea","inAreaPrev","inAreaNext","_isDomSupported","_getParentNode","domNode","parentNode","host","parseMaxStyle","styleValue","parentProperty","valueInPixels","positions","getPositionedStyle","useOffsetPos","shadowRoot","getRelativePosition","evt","paddings","borders","offsetX","offsetY","getCanvasPosition","round1","getMaximumSize","bbWidth","bbHeight","aspectRatio","margins","maxHeight","containerSize","containerStyle","containerBorder","containerPadding","getContainerSize","retinaScale","forceRatio","forceStyle","pixelRatio","deviceHeight","deviceWidth","setTransform","supportsEventListenerOptions","passiveSupported","readUsedSize","getPropertyValue","_pointInLine","_steppedInterpolation","_bezierInterpolation","cp1","cp2","intlCache","formatNumber","num","cacheKey","JSON","stringify","formatter","Intl","NumberFormat","getNumberFormat","getRtlAdapter","rtl","rectX","setWidth","xPlus","leftForLtr","itemWidth","getRightToLeftAdapter","_itemWidth","overrideTextDirection","getPropertyPriority","setProperty","prevTextDirection","restoreTextDirection","propertyFn","between","compare","normalizeSegment","_boundSegment","segment","bounds","startBound","endBound","getSegment","prevValue","inside","subStart","shouldStart","_boundSegments","segments","sub","splitByStyles","segmentOptions","chartContext","_chart","baseStyle","readStyle","_datasetIndex","prevStyle","addStyle","p0","p0DataIndex","p1DataIndex","styleChanged","doSplitByStyles","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","animator","_request","_charts","_running","_lastDate","_notify","anims","numSteps","currentStep","_refresh","_update","running","draw","_active","_total","tick","_getAnims","charts","listen","acc","cur","_duration","interpolators","boolean","c0","Animation","cfg","currentValue","_fn","_easing","easing","_start","delay","_prop","_from","_to","_promises","elapsed","remain","wait","promises","rej","resolved","animationOptions","colors","numbers","resize","show","animations","hide","Animations","_properties","configure","animatedProps","_animateOptions","newOptions","$shared","$animations","resolveTargetOptions","_createAnimations","anim","awaitAll","scaleClip","allowedOverflow","getSortedDatasetIndices","filterVisible","metasets","_getSortedDatasetMetas","applyStack","dsIndex","singleMode","isStacked","stacked","getOrCreateStack","stacks","stackKey","indexValue","subStack","getLastIndexInStack","vScale","positive","getMatchingVisibleMetas","updateStacks","controller","_cachedMeta","_stacks","iAxis","vAxis","indexScale","valueScale","getStackKey","_top","_bottom","getFirstScaleId","clearStacks","isDirectUpdateMode","cloneIfNotShared","cached","DatasetController","_ctx","_cachedDataOpts","getMeta","_type","_objectData","_sharedOptions","_drawStart","_drawCount","enableOptionSharing","supportsDecimation","$context","_syncList","initialize","linkScales","_stacked","addElements","updateIndex","getDataset","chooseId","xid","xAxisID","yid","yAxisID","rid","rAxisID","iid","iAxisID","vid","vAxisID","getScaleForId","rScale","getDatasetMeta","scaleID","_getOtherScale","reset","_destroy","_dataCheck","adata","convertObjectDataToArray","isExtensible","datasetElementType","buildOrUpdateElements","resetNewElements","stackChanged","oldStacked","_resyncElements","scopeKeys","datasetScopeKeys","getOptionScopes","createResolver","parseArrayData","parseObjectData","parsePrimitiveData","isNotInOrderComparedToPrev","getLabels","singleScale","xAxisKey","yAxisKey","getParsed","getDataElement","updateRangeFromParsed","parsedValue","getMinMax","canStack","otherScale","createStack","hidden","NEGATIVE_INFINITY","otherMin","otherMax","_skip","getAllParsedValues","getMaxOverflow","getLabelAndValue","getLabelForValue","_clip","disabled","toClip","defaultClip","chartArea","resolveDatasetElementOptions","resolveDataElementOptions","dataIndex","createDataContext","createDatasetContext","_resolveElementOptions","dataElementType","datasetElementScopeKeys","resolveNamedOptions","freeze","_resolveAnimations","datasetAnimationScopeKeys","getSharedOptions","includeOptions","_animationsDisabled","_getSharedOptions","firstOpts","previouslySharedOptions","updateSharedOptions","updateElement","_setStyle","removeHoverStyle","setHoverStyle","_removeDatasetHoverStyle","_setDatasetHoverStyle","arg1","arg2","numMeta","numData","_insertElements","_removeElements","updateElements","removed","_sync","_dataChanges","_onDataPush","_onDataPop","_onDataShift","_onDataSplice","newCount","_onDataUnshift","computeMinSampleSize","_cache","$bar","visibleMetas","getAllScaleValues","curr","_length","updateMinAndPrev","ticks","getPixelForTick","parseValue","endValue","barStart","barEnd","_custom","parseFloatBar","parseArrayOrPrimitive","isFloatBar","custom","setBorderSkipped","edge","borderSkipped","borderProps","enableBorderRadius","parseEdge","orig","v2","startEnd","setInflateAmount","inflateAmount","iAxisKey","vAxisKey","bars","getBasePixel","isHorizontal","ruler","_getRuler","vpixels","_calculateBarValuePixels","ipixels","_calculateBarIndexPixels","_getStacks","grouped","skipNull","_getStackCount","_getStackIndex","pixels","barThickness","_startPixel","_endPixel","stackCount","categoryPercentage","barPercentage","baseValue","minBarLength","actualBase","floating","getDataVisibility","barSign","startPixel","getPixelForDecimal","endPixel","halfGrid","getLineWidthForValue","maxBarThickness","Infinity","percent","computeFlexCategoryTraits","thickness","computeFitCategoryTraits","stackIndex","rects","_index_","grid","_value_","beginAtZero","BubbleController","tooltip","DoughnutController","innerRadius","outerRadius","_getRotation","_getCircumference","circumference","_getRotationExtents","isDatasetVisible","arcs","getMaxBorderWidth","getMaxOffset","maxSize","cutout","toPercentage","chartWeight","_getRingWeight","ratioX","ratioY","startAngle","endAngle","startX","startY","endX","endY","calcMax","calcMin","maxX","maxY","minX","minY","getRatioAndOffset","maxRadius","radiusLength","_getVisibleDatasetWeightTotal","calculateTotal","_getRingWeightOffset","_circumference","animateRotate","calculateCircumference","animationOpts","centerX","centerY","animateScale","metaData","borderAlign","hoverBorderWidth","hoverOffset","ringWeightOffset","legend","generateLabels","legendItem","toggleDataVisibility","tooltipItem","dataLabel","formattedValue","LineController","_dataset","_decimated","animated","maxGapLength","directUpdate","prevParsed","nullData","lastPoint","updateControlPoints","PolarAreaController","_updateRadius","minSize","cutoutPercentage","getVisibleDatasetCount","xCenter","yCenter","datasetStartAngle","getIndexAngle","defaultAngle","countVisibleElements","_computeAngle","getDistanceFromCenterForValue","angleLines","circular","pointLabels","PieController","RadarController","_fullLoop","pointPosition","getPointPositionForValue","tooltipPosition","useFinalPosition","hasValue","final","defaultRoutes","formatters","numeric","tickValue","notation","maxTick","calculateDelta","logDelta","numDecimal","minimumFractionDigits","maximumFractionDigits","logarithmic","Ticks","autoSkip","tickOpts","ticksLimit","maxTicksLimit","tickLength","_tickSize","maxScale","maxChart","_maxLength","determineMaxTicks","majorIndices","major","getMajorIndices","numMajorIndices","newTicks","skipMajors","evenMajorSpacing","getEvenSpacing","factors","_factorize","calculateSpacing","avgMajorSpacing","majorStart","majorEnd","grace","drawBorder","drawOnChartArea","drawTicks","tickWidth","tickColor","minRotation","maxRotation","mirror","textStrokeWidth","textStrokeColor","autoSkipPadding","labelOffset","minor","crossAlign","showLabelBackdrop","backdropColor","backdropPadding","offsetFromEdge","numItems","increment","getPixelForGridLine","offsetGridLines","validIndex","lineValue","getTickMarkLength","getTitleHeight","titleAlign","reverseAlign","Scale","_margins","labelRotation","_range","_gridLineItems","_labelItems","_labelSizes","_longestTextCache","_reversePixels","_userMax","_userMin","_suggestedMax","_suggestedMin","_ticksLength","_borderValue","_dataLimitsCached","init","suggestedMin","suggestedMax","metas","getPadding","getTicks","xLabels","yLabels","beforeLayout","beforeUpdate","sampleSize","beforeSetDimensions","setDimensions","afterSetDimensions","beforeDataLimits","determineDataLimits","afterDataLimits","minmax","keepZero","_addGrace","beforeBuildTicks","buildTicks","afterBuildTicks","samplingEnabled","_convertTicksToLabels","beforeCalculateLabelRotation","calculateLabelRotation","afterCalculateLabelRotation","afterAutoSkip","beforeFit","fit","afterFit","afterUpdate","reversePixels","_alignToPixels","alignToPixels","_callHooks","notifyPlugins","beforeTickToLabelConversion","generateTickLabels","afterTickToLabelConversion","numTicks","maxLabelDiagonal","_isVisible","labelSizes","_getLabelSizes","maxLabelWidth","widest","maxLabelHeight","highest","asin","titleOpts","gridOpts","titleHeight","tickPadding","angleRadians","labelHeight","labelWidth","_calculatePadding","_handleMargins","isRotated","labelsBelowTicks","offsetLeft","offsetRight","isFullSize","fullSize","_computeLabelSizes","caches","widths","heights","tickFont","fontString","nestedLabel","widestLabelSize","highestLabelSize","_resolveTickFontOptions","valueAt","getValueForPixel","decimal","getDecimalForPixel","getBaseValue","createTickContext","optionTicks","rot","_computeGridLineItems","ticksLength","tl","borderOpts","axisWidth","axisHalfWidth","alignBorderValue","borderValue","alignedLineValue","tx1","ty1","tx2","ty2","y1","y2","positionAxisID","optsAtIndex","lineColor","tickBorderDash","tickBorderDashOffset","_computeLabelItems","tickAndPadding","hTickAndPadding","lineCount","textOffset","_getXAxisLabelAlignment","_getYAxisLabelAlignment","halfCount","backdrop","tickTextAlign","labelPadding","_computeLabelArea","drawBackground","fillRect","drawGrid","drawLine","setLineDash","lineDashOffset","lastLineWidth","drawLabels","drawTitle","titleX","titleY","titleArgs","_layers","tz","gz","getSortedVisibleDatasetMetas","axisID","_maxDigits","TypedRegistry","isForType","isPrototypeOf","parentScope","isIChartComponent","itemDefaults","routes","propertyParts","sourceName","sourceScope","routeDefaults","registerDefaults","controllers","_typedRegistries","_each","addControllers","addPlugins","addScales","getController","_get","getElement","getPlugin","getScale","removeControllers","removeElements","_len8","_key8","removePlugins","_len9","_key9","removeScales","_len10","_key10","typedRegistry","reg","_getRegistryForType","_exec","itemReg","component","camelMethod","ScatterController","__proto__","abstract","DateAdapter","chartOptions","timestamp","members","adapters","_date","binarySearch","metaset","lookupMethod","getRange","evaluateInteractionItems","getIntersectItems","isPointInArea","inRange","getNearestCartesianItems","distanceMetric","useX","useY","deltaX","deltaY","getDistanceMetricForAxis","minDistance","getCenterPoint","getNearestItems","getNearestRadialItems","getAxisItems","rangeMethod","intersectsItem","Interaction","modes","nearest","STATIC_POSITIONS","filterByPosition","filterDynamicPositionByAxis","sortByWeight","setLayoutDims","layouts","stackWeight","placed","buildStacks","vBoxMaxWidth","hBoxMaxHeight","layout","availableWidth","availableHeight","getCombinedMax","maxPadding","updateMaxPadding","boxPadding","updateDims","newWidth","outerWidth","newHeight","outerHeight","widthChanged","heightChanged","same","getMargins","marginForPositions","fitBoxes","boxes","refitBoxes","refit","setBoxDims","placeBoxes","userPadding","autoPadding","addBox","removeBox","layoutItem","minPadding","layoutBoxes","wrapBoxes","centerHorizontal","centerVertical","leftAndTop","rightAndBottom","buildLayoutBoxes","verticalBoxes","horizontalBoxes","visibleVerticalBoxCount","updatePos","handleMaxPadding","BasePlatform","acquireContext","releaseContext","isAttached","updateConfig","BasicPlatform","EXPANDO_KEY","EVENT_TYPES","touchstart","touchmove","touchend","pointerenter","pointerdown","pointermove","pointerup","pointerleave","pointerout","isNullOrEmpty","eventListenerOptions","removeListener","nodeListContains","nodeList","createAttachObserver","addedNodes","removedNodes","childList","subtree","createDetachObserver","drpListeningCharts","oldDevicePixelRatio","onWindowResize","dpr","createResizeObserver","ResizeObserver","contentRect","listenDevicePixelRatioChanges","releaseObserver","unlistenDevicePixelRatioChanges","createProxyAndListen","native","fromNativeEvent","addListener","DomPlatform","renderHeight","renderWidth","displayWidth","displayHeight","initCanvas","proxies","$proxies","attach","detach","PluginService","_init","hook","_createDescriptors","plugin","cancelable","invalidate","_oldCache","_notifyStateChanges","localIds","allPlugins","getOpts","pluginOpts","createDescriptors","previousDescriptors","pluginScopeKeys","getIndexAxis","datasetDefaults","determineAxis","scaleOptions","initOptions","chartDefaults","configScales","chartIndexAxis","firstIDs","scaleConf","defaultId","getDefaultScaleIDFromAxis","defaultScaleOptions","defaultID","getAxisFromDefaultScaleID","mergeScaleConfig","initData","keyCache","keysCached","cachedKeys","generate","addIfFound","Config","initConfig","_scopeCache","_resolverCache","clearCache","datasetType","additionalOptionScopes","_cachedScopes","mainScope","resetCache","keyLists","chartOptionScopes","subPrefixes","getResolver","hasFunction","needContext","resolverCache","KNOWN_POSITIONS","positionIsHorizontal","compare2Level","l1","l2","onAnimationsComplete","onComplete","onAnimationProgress","getCanvas","getElementById","instances","getChart","moveNumericKeys","intKey","userConfig","initialCanvas","existingChart","OffscreenCanvas","_detectPlatform","_options","_aspectRatio","_metasets","_lastEvent","_responsiveListeners","_sortedMetasets","_plugins","_hiddenIndices","attached","_doResize","timeout","debounce","resizeDelay","_initialize","_resizeBeforeDraw","_resize","newSize","newRatio","onResize","ensureScalesHaveIDs","axisOptions","buildOrUpdateScales","scaleOpts","isRadial","dposition","dtype","scaleType","hasUpdated","_updateMetasets","_destroyDatasetMeta","_removeUnreferencedMetasets","buildOrUpdateControllers","newControllers","ControllerClass","_resetElements","animsDisabled","_updateScales","_checkEventBindings","_updateHiddenIndices","_minPadding","_updateLayout","_updateDatasets","_eventHandler","_updateHoverStyles","existingEvents","newEvents","unbindEvents","changes","_getUniformDataChanges","datasetCount","makeSet","changeSet","noArea","_idx","_updateDataset","layers","_drawDatasets","_drawDataset","useClip","getElementsAtEventForMode","setDatasetVisibility","_updateVisibility","_stop","toBase64Image","toDataURL","bindUserEvents","bindResponsiveEvents","_add","_remove","detached","updateHoverStyle","getActiveElements","setActiveElements","activeElements","lastActive","hoverOptions","deactivated","activated","inChartArea","eventFilter","_handleEvent","_getActiveElements","isClick","_isClickEvent","lastEvent","determineLastEvent","invalidatePlugins","clipArc","pixelMargin","angleMargin","parseBorderRadius$1","angleDelta","borderRadius","halfThickness","innerLimit","computeOuterLimit","outerArcLimit","outerStart","outerEnd","innerStart","innerEnd","rThetaToXY","theta","pathArc","innerR","spacingOffset","avNogSpacingRadius","angleOffset","outerStartAdjustedRadius","outerEndAdjustedRadius","outerStartAdjustedAngle","outerEndAdjustedAngle","innerStartAdjustedRadius","innerEndAdjustedRadius","innerStartAdjustedAngle","innerEndAdjustedAngle","pCenter","p8","outerStartX","outerStartY","outerEndX","outerEndY","inner","lineJoin","fullCircles","drawFullCircleBorders","ArcElement","chartX","chartY","rAdjust","betweenAngles","withinRadius","halfAngle","halfRadius","radiusOffset","drawArc","setStyle","lineCap","pathVars","paramsStart","paramsEnd","segmentStart","segmentEnd","outside","pathSegment","lineMethod","stepped","getLineMethod","fastPathSegment","prevX","lastY","avgX","countX","pointIndex","drawX","truncX","_getSegmentMethod","usePath2D","Path2D","_path","strokePathWithCache","segmentMethod","strokePathDirect","LineElement","_points","_segments","_pointsUpdated","findStartAndEnd","solidSegments","_computeSegments","_interpolate","_getInterpolationMethod","interpolated","inRange$1","hitRadius","PointElement","mouseX","mouseY","inXRange","inYRange","hoverRadius","getBarBounds","bar","half","skipOrLimit","boundingRects","maxW","maxH","parseBorderWidth","maxR","enableBorder","parseBorderRadius","outer","skipX","skipY","addNormalRectPath","inflateRect","refRect","BarElement","addRectPath","cleanDecimatedDataset","cleanDecimatedData","plugin_decimation","algorithm","beforeElementsUpdate","xAxis","getStartAndCountOfVisiblePointsSimplified","decimated","samples","bucketWidth","sampledIndex","endIndex","maxAreaPoint","maxArea","nextA","avgY","avgRangeStart","avgRangeEnd","avgRangeLength","rangeOffs","rangeTo","pointAx","pointAy","lttbDecimation","minIndex","maxIndex","startIndex","xMin","dx","intermediateIndex1","intermediateIndex2","minMaxDecimation","_getBounds","_findSegmentEnd","_getEdge","_createBoundaryLine","boundary","linePoints","_ref5","_pointsFromSegments","_shouldApplyFill","_resolveTarget","propagate","visited","_decodeFill","fillOption","parseFillOption","firstCh","decodeTargetIndex","addPointsBelow","sourcePoint","linesBelow","postponed","findPoint","pointValue","firstValue","lastValue","simpleArc","getLineByIndex","sourcePoints","below","getLinesBelow","_buildStackLine","_getTargetValue","computeCircularBoundary","_getTargetPixel","computeLinearBoundary","computeBoundary","_drawfill","lineOpts","above","clipVertical","doFill","clipY","lineLoop","tpoints","targetSegments","tgt","subBounds","fillSources","fillSource","notShape","clipBounds","interpolatedLineTo","targetLoop","interpolatedPoint","afterDatasetsUpdate","_args","$filler","beforeDraw","drawTime","beforeDatasetsDraw","beforeDatasetDraw","getBoxSize","labelOpts","boxHeight","boxWidth","usePointStyle","pointStyleWidth","itemHeight","Legend","_added","legendHitBoxes","_hoveredItem","doughnutMode","legendItems","columnSizes","lineWidths","buildLabels","labelFont","_computeTitleHeight","_fitRows","_fitCols","hitboxes","totalHeight","row","heightLimit","totalWidth","currentColWidth","currentColHeight","col","adjustHitBoxes","rtlHelper","hitbox","_draw","defaultColor","fontColor","halfFontSize","cursor","textDirection","lineDash","drawOptions","yBoxTop","xBoxLeft","drawLegendBox","_textX","titleFont","titlePadding","topPaddingPlusHalfFontSize","_getLegendItemAt","hitBox","onLeave","isListened","hoveredItem","sameItem","itemsEqual","plugin_legend","_element","afterEvent","ci","Title","_padding","_drawArgs","fontOpts","plugin_title","titleBlock","createTitle","plugin_subtitle","positioners","average","eventPosition","nearestElement","tp","pushOrConcat","toPush","splitNewlines","createTooltipItem","getTooltipSize","footer","bodyFont","footerFont","titleLineCount","footerLineCount","bodyLineItemCount","combinedBodyLength","bodyItem","before","after","beforeBody","afterBody","titleSpacing","titleMarginBottom","displayColors","bodySpacing","footerMarginTop","footerSpacing","widthPadding","maxLineWidth","determineXAlign","yAlign","chartWidth","xAlign","caret","caretSize","caretPadding","doesNotFitWithAlign","determineAlignment","determineYAlign","getBackgroundPoint","alignment","paddingAndSize","alignX","alignY","getAlignedX","getBeforeAfterBodyLines","overrideCallbacks","Tooltip","_eventPosition","_size","_cachedAnimations","_tooltipItems","dataPoints","caretX","caretY","labelColors","labelPointStyles","labelTextColors","tooltipItems","getTitle","beforeTitle","afterTitle","getBeforeBody","getBody","bodyItems","scoped","beforeLabel","afterLabel","getAfterBody","getFooter","beforeFooter","afterFooter","_createItems","itemSort","labelColor","labelPointStyle","labelTextColor","positionAndSize","backgroundPoint","external","drawCaret","tooltipPoint","caretPosition","getCaretPosition","y3","ptX","ptY","titleColor","_drawColorBox","colorX","rtlColorX","yOffSet","colorY","multiKeyBackground","outerX","innerX","strokeRect","drawBody","bodyAlign","bodyLineHeight","xLinePadding","fillLineOfText","bodyAlignForCalculation","bodyColor","drawFooter","footerAlign","footerColor","tooltipSize","quadraticCurveTo","_updateAnimationTarget","animX","animY","_willRender","hasTooltipContent","globalAlpha","_ref6","positionChanged","_positionChanged","_ignoreReplayEvents","plugin_tooltip","afterInit","afterDraw","labelCount","Decimation","Filler","SubTitle","findOrAddLabel","addedLabels","addIfString","lastIndexOf","CategoryScale","_startValue","_valueRange","_addedLabels","generateTicks$1","generationOptions","dataRange","precision","maxTicks","maxDigits","includeBounds","maxSpaces","rmin","rmax","countDefined","minSpacing","niceMin","niceMax","numSpaces","almostWhole","decimalPlaces","relativeLabelSize","_ref7","LinearScaleBase","_endValue","handleTickRangeOptions","setMin","setMax","minSign","maxSign","MIN_SAFE_INTEGER","getTickLimit","stepSize","computeTickLimit","LinearScale","isMajor","tickVal","LogarithmicScale","_zero","endExp","endSignificand","significand","lastTick","generateTicks","getTickBackdropHeight","determineLimits","fitWithPointLabels","limits","valueCount","_pointLabels","pointLabelOpts","additionalAngle","centerPointLabels","getPointLabelContext","getPointPosition","drawingArea","plFont","updateLimits","setCenterPoint","_pointLabelItems","extra","outerDistance","pointLabelPosition","yForAngle","getTextAlignForAngle","leftForTextAlign","buildPointLabelItems","hLimits","vLimits","pathRadiusLine","RadialLinearScale","leftMovement","rightMovement","topMovement","bottomMovement","scalingFactor","getValueForDistanceFromCenter","scaledDistance","pointLabel","createPointLabelContext","distanceFromCenter","getBasePosition","getPointLabelPosition","backdropLeft","backdropTop","backdropWidth","backdropHeight","drawPointLabels","gridLineOpts","drawRadiusLine","INTERVALS","steps","UNITS","sorter","adapter","_adapter","parser","_parseOpts","determineUnitForAutoTicks","minUnit","capacity","interval","addTick","timestamps","ticksFromTimestamps","majorUnit","setMajorTicks","TimeScale","_unit","_majorUnit","_offsets","_normalized","displayFormats","normalized","_applyBounds","_getLabelBounds","getLabelTimestamps","timeOpts","_generate","_filterBetween","_getLabelCapacity","determineUnitForFormatting","determineMajorUnit","initOffsets","offsetAfterAutoskip","getDecimalForValue","hasWeekday","getDataTimestamps","tooltipFormat","_tickFormatFunction","minorFormat","majorFormat","offsets","_getLabelSize","ticksOpts","tickLabelWidth","cosRotation","sinRotation","tickFontSize","exampleTime","exampleLabel","prevSource","nextSource","prevTarget","nextTarget","span","TimeSeriesScale","_table","_minPos","_tableRange","_getTimestampsForTable","buildLookupTable"],"sourceRoot":""}